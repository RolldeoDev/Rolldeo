var mE=Object.defineProperty;var gE=(e,t,n)=>t in e?mE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ua=(e,t,n)=>gE(e,typeof t!="symbol"?t+"":t,n);function wv(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zd={exports:{}},eo={},$d={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function bE(){if(Fg)return Et;Fg=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function g(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,v={};function w(M,U,A){this.props=M,this.context=U,this.refs=v,this.updater=A||b}w.prototype.isReactComponent={},w.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=w.prototype;function C(M,U,A){this.props=M,this.context=U,this.refs=v,this.updater=A||b}var T=C.prototype=new k;T.constructor=C,x(T,w.prototype),T.isPureReactComponent=!0;var D=Array.isArray,I=Object.prototype.hasOwnProperty,L={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function B(M,U,A){var te,ce={},Ee=null,Ue=null;if(U!=null)for(te in U.ref!==void 0&&(Ue=U.ref),U.key!==void 0&&(Ee=""+U.key),U)I.call(U,te)&&!O.hasOwnProperty(te)&&(ce[te]=U[te]);var Te=arguments.length-2;if(Te===1)ce.children=A;else if(1<Te){for(var $e=Array(Te),le=0;le<Te;le++)$e[le]=arguments[le+2];ce.children=$e}if(M&&M.defaultProps)for(te in Te=M.defaultProps,Te)ce[te]===void 0&&(ce[te]=Te[te]);return{$$typeof:e,type:M,key:Ee,ref:Ue,props:ce,_owner:L.current}}function z(M,U){return{$$typeof:e,type:M.type,key:U,ref:M.ref,props:M.props,_owner:M._owner}}function j(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function q(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(A){return U[A]})}var F=/\/+/g;function G(M,U){return typeof M=="object"&&M!==null&&M.key!=null?q(""+M.key):U.toString(36)}function _(M,U,A,te,ce){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var Ue=!1;if(M===null)Ue=!0;else switch(Ee){case"string":case"number":Ue=!0;break;case"object":switch(M.$$typeof){case e:case t:Ue=!0}}if(Ue)return Ue=M,ce=ce(Ue),M=te===""?"."+G(Ue,0):te,D(ce)?(A="",M!=null&&(A=M.replace(F,"$&/")+"/"),_(ce,U,A,"",function(le){return le})):ce!=null&&(j(ce)&&(ce=z(ce,A+(!ce.key||Ue&&Ue.key===ce.key?"":(""+ce.key).replace(F,"$&/")+"/")+M)),U.push(ce)),1;if(Ue=0,te=te===""?".":te+":",D(M))for(var Te=0;Te<M.length;Te++){Ee=M[Te];var $e=te+G(Ee,Te);Ue+=_(Ee,U,A,$e,ce)}else if($e=g(M),typeof $e=="function")for(M=$e.call(M),Te=0;!(Ee=M.next()).done;)Ee=Ee.value,$e=te+G(Ee,Te++),Ue+=_(Ee,U,A,$e,ce);else if(Ee==="object")throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Ue}function H(M,U,A){if(M==null)return M;var te=[],ce=0;return _(M,te,"","",function(Ee){return U.call(A,Ee,ce++)}),te}function se(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(A){(M._status===0||M._status===-1)&&(M._status=1,M._result=A)},function(A){(M._status===0||M._status===-1)&&(M._status=2,M._result=A)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var ne={current:null},Z={transition:null},J={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Z,ReactCurrentOwner:L};function P(){throw Error("act(...) is not supported in production builds of React.")}return Et.Children={map:H,forEach:function(M,U,A){H(M,function(){U.apply(this,arguments)},A)},count:function(M){var U=0;return H(M,function(){U++}),U},toArray:function(M){return H(M,function(U){return U})||[]},only:function(M){if(!j(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Et.Component=w,Et.Fragment=n,Et.Profiler=i,Et.PureComponent=C,Et.StrictMode=r,Et.Suspense=d,Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Et.act=P,Et.cloneElement=function(M,U,A){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var te=x({},M.props),ce=M.key,Ee=M.ref,Ue=M._owner;if(U!=null){if(U.ref!==void 0&&(Ee=U.ref,Ue=L.current),U.key!==void 0&&(ce=""+U.key),M.type&&M.type.defaultProps)var Te=M.type.defaultProps;for($e in U)I.call(U,$e)&&!O.hasOwnProperty($e)&&(te[$e]=U[$e]===void 0&&Te!==void 0?Te[$e]:U[$e])}var $e=arguments.length-2;if($e===1)te.children=A;else if(1<$e){Te=Array($e);for(var le=0;le<$e;le++)Te[le]=arguments[le+2];te.children=Te}return{$$typeof:e,type:M.type,key:ce,ref:Ee,props:te,_owner:Ue}},Et.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:s,_context:M},M.Consumer=M},Et.createElement=B,Et.createFactory=function(M){var U=B.bind(null,M);return U.type=M,U},Et.createRef=function(){return{current:null}},Et.forwardRef=function(M){return{$$typeof:c,render:M}},Et.isValidElement=j,Et.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:se}},Et.memo=function(M,U){return{$$typeof:p,type:M,compare:U===void 0?null:U}},Et.startTransition=function(M){var U=Z.transition;Z.transition={};try{M()}finally{Z.transition=U}},Et.unstable_act=P,Et.useCallback=function(M,U){return ne.current.useCallback(M,U)},Et.useContext=function(M){return ne.current.useContext(M)},Et.useDebugValue=function(){},Et.useDeferredValue=function(M){return ne.current.useDeferredValue(M)},Et.useEffect=function(M,U){return ne.current.useEffect(M,U)},Et.useId=function(){return ne.current.useId()},Et.useImperativeHandle=function(M,U,A){return ne.current.useImperativeHandle(M,U,A)},Et.useInsertionEffect=function(M,U){return ne.current.useInsertionEffect(M,U)},Et.useLayoutEffect=function(M,U){return ne.current.useLayoutEffect(M,U)},Et.useMemo=function(M,U){return ne.current.useMemo(M,U)},Et.useReducer=function(M,U,A){return ne.current.useReducer(M,U,A)},Et.useRef=function(M){return ne.current.useRef(M)},Et.useState=function(M){return ne.current.useState(M)},Et.useSyncExternalStore=function(M,U,A){return ne.current.useSyncExternalStore(M,U,A)},Et.useTransition=function(){return ne.current.useTransition()},Et.version="18.3.1",Et}var Lg;function bf(){return Lg||(Lg=1,$d.exports=bE()),$d.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function yE(){if(Pg)return eo;Pg=1;var e=bf(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,p){var h,m={},g=null,b=null;p!==void 0&&(g=""+p),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(b=d.ref);for(h in d)r.call(d,h)&&!s.hasOwnProperty(h)&&(m[h]=d[h]);if(c&&c.defaultProps)for(h in d=c.defaultProps,d)m[h]===void 0&&(m[h]=d[h]);return{$$typeof:t,type:c,key:g,ref:b,props:m,_owner:i.current}}return eo.Fragment=n,eo.jsx=o,eo.jsxs=o,eo}var zg;function vE(){return zg||(zg=1,zd.exports=yE()),zd.exports}var u=vE(),N=bf();const Qt=fs(N),xE=wv({__proto__:null,default:Qt},[N]);var ec={},Bd={exports:{}},Jn={},Ud={exports:{}},Hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function wE(){return $g||($g=1,(function(e){function t(Z,J){var P=Z.length;Z.push(J);e:for(;0<P;){var M=P-1>>>1,U=Z[M];if(0<i(U,J))Z[M]=J,Z[P]=U,P=M;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var J=Z[0],P=Z.pop();if(P!==J){Z[0]=P;e:for(var M=0,U=Z.length,A=U>>>1;M<A;){var te=2*(M+1)-1,ce=Z[te],Ee=te+1,Ue=Z[Ee];if(0>i(ce,P))Ee<U&&0>i(Ue,ce)?(Z[M]=Ue,Z[Ee]=P,M=Ee):(Z[M]=ce,Z[te]=P,M=te);else if(Ee<U&&0>i(Ue,P))Z[M]=Ue,Z[Ee]=P,M=Ee;else break e}}return J}function i(Z,J){var P=Z.sortIndex-J.sortIndex;return P!==0?P:Z.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],p=[],h=1,m=null,g=3,b=!1,x=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Z){for(var J=n(p);J!==null;){if(J.callback===null)r(p);else if(J.startTime<=Z)r(p),J.sortIndex=J.expirationTime,t(d,J);else break;J=n(p)}}function D(Z){if(v=!1,T(Z),!x)if(n(d)!==null)x=!0,se(I);else{var J=n(p);J!==null&&ne(D,J.startTime-Z)}}function I(Z,J){x=!1,v&&(v=!1,k(B),B=-1),b=!0;var P=g;try{for(T(J),m=n(d);m!==null&&(!(m.expirationTime>J)||Z&&!q());){var M=m.callback;if(typeof M=="function"){m.callback=null,g=m.priorityLevel;var U=M(m.expirationTime<=J);J=e.unstable_now(),typeof U=="function"?m.callback=U:m===n(d)&&r(d),T(J)}else r(d);m=n(d)}if(m!==null)var A=!0;else{var te=n(p);te!==null&&ne(D,te.startTime-J),A=!1}return A}finally{m=null,g=P,b=!1}}var L=!1,O=null,B=-1,z=5,j=-1;function q(){return!(e.unstable_now()-j<z)}function F(){if(O!==null){var Z=e.unstable_now();j=Z;var J=!0;try{J=O(!0,Z)}finally{J?G():(L=!1,O=null)}}else L=!1}var G;if(typeof C=="function")G=function(){C(F)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,H=_.port2;_.port1.onmessage=F,G=function(){H.postMessage(null)}}else G=function(){w(F,0)};function se(Z){O=Z,L||(L=!0,G())}function ne(Z,J){B=w(function(){Z(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){x||b||(x=!0,se(I))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var P=g;g=J;try{return Z()}finally{g=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,J){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var P=g;g=Z;try{return J()}finally{g=P}},e.unstable_scheduleCallback=function(Z,J,P){var M=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?M+P:M):P=M,Z){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=P+U,Z={id:h++,callback:J,priorityLevel:Z,startTime:P,expirationTime:U,sortIndex:-1},P>M?(Z.sortIndex=P,t(p,Z),n(d)===null&&Z===n(p)&&(v?(k(B),B=-1):v=!0,ne(D,P-M))):(Z.sortIndex=U,t(d,Z),x||b||(x=!0,se(I))),Z},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(Z){var J=g;return function(){var P=g;g=J;try{return Z.apply(this,arguments)}finally{g=P}}}})(Hd)),Hd}var Bg;function EE(){return Bg||(Bg=1,Ud.exports=wE()),Ud.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function kE(){if(Ug)return Jn;Ug=1;var e=bf(),t=EE();function n(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(i[a]=l,a=0;a<l.length;a++)r.add(l[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function g(a){return d.call(m,a)?!0:d.call(h,a)?!1:p.test(a)?m[a]=!0:(h[a]=!0,!1)}function b(a,l,f,y){if(f!==null&&f.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,l,f,y){if(l===null||typeof l>"u"||b(a,l,f,y))return!0;if(y)return!1;if(f!==null)switch(f.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function v(a,l,f,y,E,S,$){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=E,this.mustUseProperty=f,this.propertyName=a,this.type=l,this.sanitizeURL=S,this.removeEmptyString=$}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){w[a]=new v(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];w[l]=new v(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){w[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){w[a]=new v(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){w[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){w[a]=new v(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){w[a]=new v(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){w[a]=new v(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){w[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(k,C);w[l]=new v(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(k,C);w[l]=new v(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(k,C);w[l]=new v(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){w[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)}),w.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){w[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});function T(a,l,f,y){var E=w.hasOwnProperty(l)?w[l]:null;(E!==null?E.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(x(l,f,E,y)&&(f=null),y||E===null?g(l)&&(f===null?a.removeAttribute(l):a.setAttribute(l,""+f)):E.mustUseProperty?a[E.propertyName]=f===null?E.type===3?!1:"":f:(l=E.attributeName,y=E.attributeNamespace,f===null?a.removeAttribute(l):(E=E.type,f=E===3||E===4&&f===!0?"":""+f,y?a.setAttributeNS(y,l,f):a.setAttribute(l,f))))}var D=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),L=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),q=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Z=Symbol.iterator;function J(a){return a===null||typeof a!="object"?null:(a=Z&&a[Z]||a["@@iterator"],typeof a=="function"?a:null)}var P=Object.assign,M;function U(a){if(M===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);M=l&&l[1]||""}return`
`+M+a}var A=!1;function te(a,l){if(!a||A)return"";A=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(he){var y=he}Reflect.construct(a,[],l)}else{try{l.call()}catch(he){y=he}a.call(l.prototype)}else{try{throw Error()}catch(he){y=he}a()}}catch(he){if(he&&y&&typeof he.stack=="string"){for(var E=he.stack.split(`
`),S=y.stack.split(`
`),$=E.length-1,Y=S.length-1;1<=$&&0<=Y&&E[$]!==S[Y];)Y--;for(;1<=$&&0<=Y;$--,Y--)if(E[$]!==S[Y]){if($!==1||Y!==1)do if($--,Y--,0>Y||E[$]!==S[Y]){var ee=`
`+E[$].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=$&&0<=Y);break}}}finally{A=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?U(a):""}function ce(a){switch(a.tag){case 5:return U(a.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return a=te(a.type,!1),a;case 11:return a=te(a.type.render,!1),a;case 1:return a=te(a.type,!0),a;default:return""}}function Ee(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case O:return"Fragment";case L:return"Portal";case z:return"Profiler";case B:return"StrictMode";case G:return"Suspense";case _:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case q:return(a.displayName||"Context")+".Consumer";case j:return(a._context.displayName||"Context")+".Provider";case F:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case H:return l=a.displayName||null,l!==null?l:Ee(a.type)||"Memo";case se:l=a._payload,a=a._init;try{return Ee(a(l))}catch{}}return null}function Ue(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(l);case 8:return l===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Te(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function $e(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function le(a){var l=$e(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,S=f.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return E.call(this)},set:function($){y=""+$,S.call(this,$)}}),Object.defineProperty(a,l,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function($){y=""+$},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function rt(a){a._valueTracker||(a._valueTracker=le(a))}function at(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var f=l.getValue(),y="";return a&&(y=$e(a)?a.checked?"true":"false":a.value),a=y,a!==f?(l.setValue(a),!0):!1}function wt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function R(a,l){var f=l.checked;return P({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function ge(a,l){var f=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;f=Te(l.value!=null?l.value:f),a._wrapperState={initialChecked:y,initialValue:f,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function oe(a,l){l=l.checked,l!=null&&T(a,"checked",l,!1)}function K(a,l){oe(a,l);var f=Te(l.value),y=l.type;if(f!=null)y==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(y==="submit"||y==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?re(a,l.type,f):l.hasOwnProperty("defaultValue")&&re(a,l.type,Te(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function W(a,l,f){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,f||l===a.value||(a.value=l),a.defaultValue=l}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function re(a,l,f){(l!=="number"||wt(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var ve=Array.isArray;function we(a,l,f,y){if(a=a.options,l){l={};for(var E=0;E<f.length;E++)l["$"+f[E]]=!0;for(f=0;f<a.length;f++)E=l.hasOwnProperty("$"+a[f].value),a[f].selected!==E&&(a[f].selected=E),E&&y&&(a[f].defaultSelected=!0)}else{for(f=""+Te(f),l=null,E=0;E<a.length;E++){if(a[E].value===f){a[E].selected=!0,y&&(a[E].defaultSelected=!0);return}l!==null||a[E].disabled||(l=a[E])}l!==null&&(l.selected=!0)}}function de(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return P({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Ce(a,l){var f=l.value;if(f==null){if(f=l.children,l=l.defaultValue,f!=null){if(l!=null)throw Error(n(92));if(ve(f)){if(1<f.length)throw Error(n(93));f=f[0]}l=f}l==null&&(l=""),f=l}a._wrapperState={initialValue:Te(f)}}function Oe(a,l){var f=Te(l.value),y=Te(l.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),l.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),y!=null&&(a.defaultValue=""+y)}function _e(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function ie(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xe(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?ie(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ne,Ve=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,f,y,E){MSApp.execUnsafeLocalFunction(function(){return a(l,f,y,E)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Ne=Ne||document.createElement("div"),Ne.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Ne.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function ct(a,l){if(l){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=l;return}}a.textContent=l}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(a){sn.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),ht[l]=ht[a]})});function ut(a,l,f){return l==null||typeof l=="boolean"||l===""?"":f||typeof l!="number"||l===0||ht.hasOwnProperty(a)&&ht[a]?(""+l).trim():l+"px"}function un(a,l){a=a.style;for(var f in l)if(l.hasOwnProperty(f)){var y=f.indexOf("--")===0,E=ut(f,l[f],y);f==="float"&&(f="cssFloat"),y?a.setProperty(f,E):a[f]=E}}var fn=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(a,l){if(l){if(fn[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function bn(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kt=null;function $n(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var sr=null,Tn=null,Nt=null;function Pt(a){if(a=zs(a)){if(typeof sr!="function")throw Error(n(280));var l=a.stateNode;l&&(l=hl(l),sr(a.stateNode,a.type,l))}}function X(a){Tn?Nt?Nt.push(a):Nt=[a]:Tn=a}function ye(){if(Tn){var a=Tn,l=Nt;if(Nt=Tn=null,Pt(a),l)for(a=0;a<l.length;a++)Pt(l[a])}}function Re(a,l){return a(l)}function Ke(){}var bt=!1;function It(a,l,f){if(bt)return a(l,f);bt=!0;try{return Re(a,l,f)}finally{bt=!1,(Tn!==null||Nt!==null)&&(Ke(),ye())}}function Le(a,l){var f=a.stateNode;if(f===null)return null;var y=hl(f);if(y===null)return null;f=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(n(231,l,typeof f));return f}var V=!1;if(c)try{var Q={};Object.defineProperty(Q,"passive",{get:function(){V=!0}}),window.addEventListener("test",Q,Q),window.removeEventListener("test",Q,Q)}catch{V=!1}function ue(a,l,f,y,E,S,$,Y,ee){var he=Array.prototype.slice.call(arguments,3);try{l.apply(f,he)}catch(Se){this.onError(Se)}}var be=!1,Ie=null,Be=!1,tt=null,He={onError:function(a){be=!0,Ie=a}};function Ye(a,l,f,y,E,S,$,Y,ee){be=!1,Ie=null,ue.apply(He,arguments)}function We(a,l,f,y,E,S,$,Y,ee){if(Ye.apply(this,arguments),be){if(be){var he=Ie;be=!1,Ie=null}else throw Error(n(198));Be||(Be=!0,tt=he)}}function Ge(a){var l=a,f=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(f=l.return),a=l.return;while(a)}return l.tag===3?f:null}function pt(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function xt(a){if(Ge(a)!==a)throw Error(n(188))}function Jt(a){var l=a.alternate;if(!l){if(l=Ge(a),l===null)throw Error(n(188));return l!==a?null:a}for(var f=a,y=l;;){var E=f.return;if(E===null)break;var S=E.alternate;if(S===null){if(y=E.return,y!==null){f=y;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===f)return xt(E),a;if(S===y)return xt(E),l;S=S.sibling}throw Error(n(188))}if(f.return!==y.return)f=E,y=S;else{for(var $=!1,Y=E.child;Y;){if(Y===f){$=!0,f=E,y=S;break}if(Y===y){$=!0,y=E,f=S;break}Y=Y.sibling}if(!$){for(Y=S.child;Y;){if(Y===f){$=!0,f=S,y=E;break}if(Y===y){$=!0,y=S,f=E;break}Y=Y.sibling}if(!$)throw Error(n(189))}}if(f.alternate!==y)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?a:l}function Lt(a){return a=Jt(a),a!==null?St(a):null}function St(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=St(a);if(l!==null)return l;a=a.sibling}return null}var Ht=t.unstable_scheduleCallback,wn=t.unstable_cancelCallback,$r=t.unstable_shouldYield,Gn=t.unstable_requestPaint,Rt=t.unstable_now,Qa=t.unstable_getCurrentPriorityLevel,Cr=t.unstable_ImmediatePriority,Bn=t.unstable_UserBlockingPriority,_r=t.unstable_NormalPriority,Ae=t.unstable_LowPriority,Me=t.unstable_IdlePriority,Je=null,mt=null;function qt(a){if(mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(Je,a,void 0,(a.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:Rn,Dn=Math.log,ta=Math.LN2;function Rn(a){return a>>>=0,a===0?32:31-(Dn(a)/ta|0)|0}var Un=64,Ja=4194304;function xa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function ei(a,l){var f=a.pendingLanes;if(f===0)return 0;var y=0,E=a.suspendedLanes,S=a.pingedLanes,$=f&268435455;if($!==0){var Y=$&~E;Y!==0?y=xa(Y):(S&=$,S!==0&&(y=xa(S)))}else $=f&~E,$!==0?y=xa($):S!==0&&(y=xa(S));if(y===0)return 0;if(l!==0&&l!==y&&(l&E)===0&&(E=y&-y,S=l&-l,E>=S||E===16&&(S&4194240)!==0))return l;if((y&4)!==0&&(y|=f&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=y;0<l;)f=31-gt(l),E=1<<f,y|=a[f],l&=~E;return y}function lu(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cu(a,l){for(var f=a.suspendedLanes,y=a.pingedLanes,E=a.expirationTimes,S=a.pendingLanes;0<S;){var $=31-gt(S),Y=1<<$,ee=E[$];ee===-1?((Y&f)===0||(Y&y)!==0)&&(E[$]=lu(Y,l)):ee<=l&&(a.expiredLanes|=Y),S&=~Y}}function Es(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Qo(){var a=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),a}function wa(a){for(var l=[],f=0;31>f;f++)l.push(a);return l}function Ea(a,l,f){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-gt(l),a[l]=f}function mr(a,l){var f=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var y=a.eventTimes;for(a=a.expirationTimes;0<f;){var E=31-gt(f),S=1<<E;l[E]=0,y[E]=-1,a[E]=-1,f&=~S}}function ks(a,l){var f=a.entangledLanes|=l;for(a=a.entanglements;f;){var y=31-gt(f),E=1<<y;E&l|a[y]&l&&(a[y]|=l),f&=~E}}var jt=0;function ft(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ns,dn,$t,ti,Br,ni=!1,ka=[],ze=null,Ze=null,lt=null,Tt=new Map,on=new Map,En=[],uu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jo(a,l){switch(a){case"focusin":case"focusout":ze=null;break;case"dragenter":case"dragleave":Ze=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":Tt.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":on.delete(l.pointerId)}}function Ss(a,l,f,y,E,S){return a===null||a.nativeEvent!==S?(a={blockedOn:l,domEventName:f,eventSystemFlags:y,nativeEvent:S,targetContainers:[E]},l!==null&&(l=zs(l),l!==null&&dn(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),a)}function Pw(a,l,f,y,E){switch(l){case"focusin":return ze=Ss(ze,a,l,f,y,E),!0;case"dragenter":return Ze=Ss(Ze,a,l,f,y,E),!0;case"mouseover":return lt=Ss(lt,a,l,f,y,E),!0;case"pointerover":var S=E.pointerId;return Tt.set(S,Ss(Tt.get(S)||null,a,l,f,y,E)),!0;case"gotpointercapture":return S=E.pointerId,on.set(S,Ss(on.get(S)||null,a,l,f,y,E)),!0}return!1}function xh(a){var l=ri(a.target);if(l!==null){var f=Ge(l);if(f!==null){if(l=f.tag,l===13){if(l=pt(f),l!==null){a.blockedOn=l,Br(a.priority,function(){$t(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function el(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var f=pu(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);Kt=y,f.target.dispatchEvent(y),Kt=null}else return l=zs(f),l!==null&&dn(l),a.blockedOn=f,!1;l.shift()}return!0}function wh(a,l,f){el(a)&&f.delete(l)}function zw(){ni=!1,ze!==null&&el(ze)&&(ze=null),Ze!==null&&el(Ze)&&(Ze=null),lt!==null&&el(lt)&&(lt=null),Tt.forEach(wh),on.forEach(wh)}function Cs(a,l){a.blockedOn===l&&(a.blockedOn=null,ni||(ni=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zw)))}function _s(a){function l(E){return Cs(E,a)}if(0<ka.length){Cs(ka[0],a);for(var f=1;f<ka.length;f++){var y=ka[f];y.blockedOn===a&&(y.blockedOn=null)}}for(ze!==null&&Cs(ze,a),Ze!==null&&Cs(Ze,a),lt!==null&&Cs(lt,a),Tt.forEach(l),on.forEach(l),f=0;f<En.length;f++)y=En[f],y.blockedOn===a&&(y.blockedOn=null);for(;0<En.length&&(f=En[0],f.blockedOn===null);)xh(f),f.blockedOn===null&&En.shift()}var Di=D.ReactCurrentBatchConfig,tl=!0;function $w(a,l,f,y){var E=jt,S=Di.transition;Di.transition=null;try{jt=1,du(a,l,f,y)}finally{jt=E,Di.transition=S}}function Bw(a,l,f,y){var E=jt,S=Di.transition;Di.transition=null;try{jt=4,du(a,l,f,y)}finally{jt=E,Di.transition=S}}function du(a,l,f,y){if(tl){var E=pu(a,l,f,y);if(E===null)Du(a,l,y,nl,f),Jo(a,y);else if(Pw(E,a,l,f,y))y.stopPropagation();else if(Jo(a,y),l&4&&-1<uu.indexOf(a)){for(;E!==null;){var S=zs(E);if(S!==null&&Ns(S),S=pu(a,l,f,y),S===null&&Du(a,l,y,nl,f),S===E)break;E=S}E!==null&&y.stopPropagation()}else Du(a,l,y,null,f)}}var nl=null;function pu(a,l,f,y){if(nl=null,a=$n(y),a=ri(a),a!==null)if(l=Ge(a),l===null)a=null;else if(f=l.tag,f===13){if(a=pt(l),a!==null)return a;a=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return nl=a,null}function Eh(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qa()){case Cr:return 1;case Bn:return 4;case _r:case Ae:return 16;case Me:return 536870912;default:return 16}default:return 16}}var Na=null,fu=null,rl=null;function kh(){if(rl)return rl;var a,l=fu,f=l.length,y,E="value"in Na?Na.value:Na.textContent,S=E.length;for(a=0;a<f&&l[a]===E[a];a++);var $=f-a;for(y=1;y<=$&&l[f-y]===E[S-y];y++);return rl=E.slice(a,1<y?1-y:void 0)}function al(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function il(){return!0}function Nh(){return!1}function or(a){function l(f,y,E,S,$){this._reactName=f,this._targetInst=E,this.type=y,this.nativeEvent=S,this.target=$,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(f=a[Y],this[Y]=f?f(S):S[Y]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?il:Nh,this.isPropagationStopped=Nh,this}return P(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),l}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=or(Ri),Ts=P({},Ri,{view:0,detail:0}),Uw=or(Ts),mu,gu,Ds,sl=P({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ds&&(Ds&&a.type==="mousemove"?(mu=a.screenX-Ds.screenX,gu=a.screenY-Ds.screenY):gu=mu=0,Ds=a),mu)},movementY:function(a){return"movementY"in a?a.movementY:gu}}),Sh=or(sl),Hw=P({},sl,{dataTransfer:0}),qw=or(Hw),Vw=P({},Ts,{relatedTarget:0}),bu=or(Vw),Ww=P({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Gw=or(Ww),Kw=P({},Ri,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Yw=or(Kw),Zw=P({},Ri,{data:0}),Ch=or(Zw),Xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e1(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Jw[a])?!!l[a]:!1}function yu(){return e1}var t1=P({},Ts,{key:function(a){if(a.key){var l=Xw[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=al(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Qw[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yu,charCode:function(a){return a.type==="keypress"?al(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?al(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),n1=or(t1),r1=P({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_h=or(r1),a1=P({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yu}),i1=or(a1),s1=P({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),o1=or(s1),l1=P({},sl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),c1=or(l1),u1=[9,13,27,32],vu=c&&"CompositionEvent"in window,Rs=null;c&&"documentMode"in document&&(Rs=document.documentMode);var d1=c&&"TextEvent"in window&&!Rs,Th=c&&(!vu||Rs&&8<Rs&&11>=Rs),Dh=" ",Rh=!1;function Ah(a,l){switch(a){case"keyup":return u1.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ih(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ai=!1;function p1(a,l){switch(a){case"compositionend":return Ih(l);case"keypress":return l.which!==32?null:(Rh=!0,Dh);case"textInput":return a=l.data,a===Dh&&Rh?null:a;default:return null}}function f1(a,l){if(Ai)return a==="compositionend"||!vu&&Ah(a,l)?(a=kh(),rl=fu=Na=null,Ai=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Th&&l.locale!=="ko"?null:l.data;default:return null}}var h1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!h1[a.type]:l==="textarea"}function Oh(a,l,f,y){X(y),l=dl(l,"onChange"),0<l.length&&(f=new hu("onChange","change",null,f,y),a.push({event:f,listeners:l}))}var As=null,Is=null;function m1(a){Qh(a,0)}function ol(a){var l=Fi(a);if(at(l))return a}function g1(a,l){if(a==="change")return l}var Mh=!1;if(c){var xu;if(c){var wu="oninput"in document;if(!wu){var Fh=document.createElement("div");Fh.setAttribute("oninput","return;"),wu=typeof Fh.oninput=="function"}xu=wu}else xu=!1;Mh=xu&&(!document.documentMode||9<document.documentMode)}function Lh(){As&&(As.detachEvent("onpropertychange",Ph),Is=As=null)}function Ph(a){if(a.propertyName==="value"&&ol(Is)){var l=[];Oh(l,Is,a,$n(a)),It(m1,l)}}function b1(a,l,f){a==="focusin"?(Lh(),As=l,Is=f,As.attachEvent("onpropertychange",Ph)):a==="focusout"&&Lh()}function y1(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ol(Is)}function v1(a,l){if(a==="click")return ol(l)}function x1(a,l){if(a==="input"||a==="change")return ol(l)}function w1(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Tr=typeof Object.is=="function"?Object.is:w1;function js(a,l){if(Tr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var f=Object.keys(a),y=Object.keys(l);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var E=f[y];if(!d.call(l,E)||!Tr(a[E],l[E]))return!1}return!0}function zh(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $h(a,l){var f=zh(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=l&&y>=l)return{node:f,offset:l-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=zh(f)}}function Bh(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Bh(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function Uh(){for(var a=window,l=wt();l instanceof a.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)a=l.contentWindow;else break;l=wt(a.document)}return l}function Eu(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function E1(a){var l=Uh(),f=a.focusedElem,y=a.selectionRange;if(l!==f&&f&&f.ownerDocument&&Bh(f.ownerDocument.documentElement,f)){if(y!==null&&Eu(f)){if(l=y.start,a=y.end,a===void 0&&(a=l),"selectionStart"in f)f.selectionStart=l,f.selectionEnd=Math.min(a,f.value.length);else if(a=(l=f.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var E=f.textContent.length,S=Math.min(y.start,E);y=y.end===void 0?S:Math.min(y.end,E),!a.extend&&S>y&&(E=y,y=S,S=E),E=$h(f,S);var $=$h(f,y);E&&$&&(a.rangeCount!==1||a.anchorNode!==E.node||a.anchorOffset!==E.offset||a.focusNode!==$.node||a.focusOffset!==$.offset)&&(l=l.createRange(),l.setStart(E.node,E.offset),a.removeAllRanges(),S>y?(a.addRange(l),a.extend($.node,$.offset)):(l.setEnd($.node,$.offset),a.addRange(l)))}}for(l=[],a=f;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<l.length;f++)a=l[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var k1=c&&"documentMode"in document&&11>=document.documentMode,Ii=null,ku=null,Os=null,Nu=!1;function Hh(a,l,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Nu||Ii==null||Ii!==wt(y)||(y=Ii,"selectionStart"in y&&Eu(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Os&&js(Os,y)||(Os=y,y=dl(ku,"onSelect"),0<y.length&&(l=new hu("onSelect","select",null,l,f),a.push({event:l,listeners:y}),l.target=Ii)))}function ll(a,l){var f={};return f[a.toLowerCase()]=l.toLowerCase(),f["Webkit"+a]="webkit"+l,f["Moz"+a]="moz"+l,f}var ji={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},Su={},qh={};c&&(qh=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function cl(a){if(Su[a])return Su[a];if(!ji[a])return a;var l=ji[a],f;for(f in l)if(l.hasOwnProperty(f)&&f in qh)return Su[a]=l[f];return a}var Vh=cl("animationend"),Wh=cl("animationiteration"),Gh=cl("animationstart"),Kh=cl("transitionend"),Yh=new Map,Zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sa(a,l){Yh.set(a,l),s(l,[a])}for(var Cu=0;Cu<Zh.length;Cu++){var _u=Zh[Cu],N1=_u.toLowerCase(),S1=_u[0].toUpperCase()+_u.slice(1);Sa(N1,"on"+S1)}Sa(Vh,"onAnimationEnd"),Sa(Wh,"onAnimationIteration"),Sa(Gh,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(Kh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function Xh(a,l,f){var y=a.type||"unknown-event";a.currentTarget=f,We(y,l,void 0,a),a.currentTarget=null}function Qh(a,l){l=(l&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],E=y.event;y=y.listeners;e:{var S=void 0;if(l)for(var $=y.length-1;0<=$;$--){var Y=y[$],ee=Y.instance,he=Y.currentTarget;if(Y=Y.listener,ee!==S&&E.isPropagationStopped())break e;Xh(E,Y,he),S=ee}else for($=0;$<y.length;$++){if(Y=y[$],ee=Y.instance,he=Y.currentTarget,Y=Y.listener,ee!==S&&E.isPropagationStopped())break e;Xh(E,Y,he),S=ee}}}if(Be)throw a=tt,Be=!1,tt=null,a}function Yt(a,l){var f=l[Mu];f===void 0&&(f=l[Mu]=new Set);var y=a+"__bubble";f.has(y)||(Jh(l,a,2,!1),f.add(y))}function Tu(a,l,f){var y=0;l&&(y|=4),Jh(f,a,y,l)}var ul="_reactListening"+Math.random().toString(36).slice(2);function Fs(a){if(!a[ul]){a[ul]=!0,r.forEach(function(f){f!=="selectionchange"&&(C1.has(f)||Tu(f,!1,a),Tu(f,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[ul]||(l[ul]=!0,Tu("selectionchange",!1,l))}}function Jh(a,l,f,y){switch(Eh(l)){case 1:var E=$w;break;case 4:E=Bw;break;default:E=du}f=E.bind(null,l,f,a),E=void 0,!V||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),y?E!==void 0?a.addEventListener(l,f,{capture:!0,passive:E}):a.addEventListener(l,f,!0):E!==void 0?a.addEventListener(l,f,{passive:E}):a.addEventListener(l,f,!1)}function Du(a,l,f,y,E){var S=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var $=y.tag;if($===3||$===4){var Y=y.stateNode.containerInfo;if(Y===E||Y.nodeType===8&&Y.parentNode===E)break;if($===4)for($=y.return;$!==null;){var ee=$.tag;if((ee===3||ee===4)&&(ee=$.stateNode.containerInfo,ee===E||ee.nodeType===8&&ee.parentNode===E))return;$=$.return}for(;Y!==null;){if($=ri(Y),$===null)return;if(ee=$.tag,ee===5||ee===6){y=S=$;continue e}Y=Y.parentNode}}y=y.return}It(function(){var he=S,Se=$n(f),De=[];e:{var ke=Yh.get(a);if(ke!==void 0){var qe=hu,Qe=a;switch(a){case"keypress":if(al(f)===0)break e;case"keydown":case"keyup":qe=n1;break;case"focusin":Qe="focus",qe=bu;break;case"focusout":Qe="blur",qe=bu;break;case"beforeblur":case"afterblur":qe=bu;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=Sh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=qw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=i1;break;case Vh:case Wh:case Gh:qe=Gw;break;case Kh:qe=o1;break;case"scroll":qe=Uw;break;case"wheel":qe=c1;break;case"copy":case"cut":case"paste":qe=Yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=_h}var et=(l&4)!==0,pn=!et&&a==="scroll",pe=et?ke!==null?ke+"Capture":null:ke;et=[];for(var ae=he,fe;ae!==null;){fe=ae;var Fe=fe.stateNode;if(fe.tag===5&&Fe!==null&&(fe=Fe,pe!==null&&(Fe=Le(ae,pe),Fe!=null&&et.push(Ls(ae,Fe,fe)))),pn)break;ae=ae.return}0<et.length&&(ke=new qe(ke,Qe,null,f,Se),De.push({event:ke,listeners:et}))}}if((l&7)===0){e:{if(ke=a==="mouseover"||a==="pointerover",qe=a==="mouseout"||a==="pointerout",ke&&f!==Kt&&(Qe=f.relatedTarget||f.fromElement)&&(ri(Qe)||Qe[na]))break e;if((qe||ke)&&(ke=Se.window===Se?Se:(ke=Se.ownerDocument)?ke.defaultView||ke.parentWindow:window,qe?(Qe=f.relatedTarget||f.toElement,qe=he,Qe=Qe?ri(Qe):null,Qe!==null&&(pn=Ge(Qe),Qe!==pn||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(qe=null,Qe=he),qe!==Qe)){if(et=Sh,Fe="onMouseLeave",pe="onMouseEnter",ae="mouse",(a==="pointerout"||a==="pointerover")&&(et=_h,Fe="onPointerLeave",pe="onPointerEnter",ae="pointer"),pn=qe==null?ke:Fi(qe),fe=Qe==null?ke:Fi(Qe),ke=new et(Fe,ae+"leave",qe,f,Se),ke.target=pn,ke.relatedTarget=fe,Fe=null,ri(Se)===he&&(et=new et(pe,ae+"enter",Qe,f,Se),et.target=fe,et.relatedTarget=pn,Fe=et),pn=Fe,qe&&Qe)t:{for(et=qe,pe=Qe,ae=0,fe=et;fe;fe=Oi(fe))ae++;for(fe=0,Fe=pe;Fe;Fe=Oi(Fe))fe++;for(;0<ae-fe;)et=Oi(et),ae--;for(;0<fe-ae;)pe=Oi(pe),fe--;for(;ae--;){if(et===pe||pe!==null&&et===pe.alternate)break t;et=Oi(et),pe=Oi(pe)}et=null}else et=null;qe!==null&&em(De,ke,qe,et,!1),Qe!==null&&pn!==null&&em(De,pn,Qe,et,!0)}}e:{if(ke=he?Fi(he):window,qe=ke.nodeName&&ke.nodeName.toLowerCase(),qe==="select"||qe==="input"&&ke.type==="file")var nt=g1;else if(jh(ke))if(Mh)nt=x1;else{nt=y1;var it=b1}else(qe=ke.nodeName)&&qe.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(nt=v1);if(nt&&(nt=nt(a,he))){Oh(De,nt,f,Se);break e}it&&it(a,ke,he),a==="focusout"&&(it=ke._wrapperState)&&it.controlled&&ke.type==="number"&&re(ke,"number",ke.value)}switch(it=he?Fi(he):window,a){case"focusin":(jh(it)||it.contentEditable==="true")&&(Ii=it,ku=he,Os=null);break;case"focusout":Os=ku=Ii=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,Hh(De,f,Se);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Hh(De,f,Se)}var st;if(vu)e:{switch(a){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Ai?Ah(a,f)&&(dt="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(dt="onCompositionStart");dt&&(Th&&f.locale!=="ko"&&(Ai||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Ai&&(st=kh()):(Na=Se,fu="value"in Na?Na.value:Na.textContent,Ai=!0)),it=dl(he,dt),0<it.length&&(dt=new Ch(dt,a,null,f,Se),De.push({event:dt,listeners:it}),st?dt.data=st:(st=Ih(f),st!==null&&(dt.data=st)))),(st=d1?p1(a,f):f1(a,f))&&(he=dl(he,"onBeforeInput"),0<he.length&&(Se=new Ch("onBeforeInput","beforeinput",null,f,Se),De.push({event:Se,listeners:he}),Se.data=st))}Qh(De,l)})}function Ls(a,l,f){return{instance:a,listener:l,currentTarget:f}}function dl(a,l){for(var f=l+"Capture",y=[];a!==null;){var E=a,S=E.stateNode;E.tag===5&&S!==null&&(E=S,S=Le(a,f),S!=null&&y.unshift(Ls(a,S,E)),S=Le(a,l),S!=null&&y.push(Ls(a,S,E))),a=a.return}return y}function Oi(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function em(a,l,f,y,E){for(var S=l._reactName,$=[];f!==null&&f!==y;){var Y=f,ee=Y.alternate,he=Y.stateNode;if(ee!==null&&ee===y)break;Y.tag===5&&he!==null&&(Y=he,E?(ee=Le(f,S),ee!=null&&$.unshift(Ls(f,ee,Y))):E||(ee=Le(f,S),ee!=null&&$.push(Ls(f,ee,Y)))),f=f.return}$.length!==0&&a.push({event:l,listeners:$})}var _1=/\r\n?/g,T1=/\u0000|\uFFFD/g;function tm(a){return(typeof a=="string"?a:""+a).replace(_1,`
`).replace(T1,"")}function pl(a,l,f){if(l=tm(l),tm(a)!==l&&f)throw Error(n(425))}function fl(){}var Ru=null,Au=null;function Iu(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var ju=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,nm=typeof Promise=="function"?Promise:void 0,R1=typeof queueMicrotask=="function"?queueMicrotask:typeof nm<"u"?function(a){return nm.resolve(null).then(a).catch(A1)}:ju;function A1(a){setTimeout(function(){throw a})}function Ou(a,l){var f=l,y=0;do{var E=f.nextSibling;if(a.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(y===0){a.removeChild(E),_s(l);return}y--}else f!=="$"&&f!=="$?"&&f!=="$!"||y++;f=E}while(f);_s(l)}function Ca(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function rm(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return a;l--}else f==="/$"&&l++}a=a.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),Ur="__reactFiber$"+Mi,Ps="__reactProps$"+Mi,na="__reactContainer$"+Mi,Mu="__reactEvents$"+Mi,I1="__reactListeners$"+Mi,j1="__reactHandles$"+Mi;function ri(a){var l=a[Ur];if(l)return l;for(var f=a.parentNode;f;){if(l=f[na]||f[Ur]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(a=rm(a);a!==null;){if(f=a[Ur])return f;a=rm(a)}return l}a=f,f=a.parentNode}return null}function zs(a){return a=a[Ur]||a[na],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Fi(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function hl(a){return a[Ps]||null}var Fu=[],Li=-1;function _a(a){return{current:a}}function Zt(a){0>Li||(a.current=Fu[Li],Fu[Li]=null,Li--)}function Wt(a,l){Li++,Fu[Li]=a.current,a.current=l}var Ta={},jn=_a(Ta),Kn=_a(!1),ai=Ta;function Pi(a,l){var f=a.type.contextTypes;if(!f)return Ta;var y=a.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var E={},S;for(S in f)E[S]=l[S];return y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=E),E}function Yn(a){return a=a.childContextTypes,a!=null}function ml(){Zt(Kn),Zt(jn)}function am(a,l,f){if(jn.current!==Ta)throw Error(n(168));Wt(jn,l),Wt(Kn,f)}function im(a,l,f){var y=a.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return f;y=y.getChildContext();for(var E in y)if(!(E in l))throw Error(n(108,Ue(a)||"Unknown",E));return P({},f,y)}function gl(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ta,ai=jn.current,Wt(jn,a),Wt(Kn,Kn.current),!0}function sm(a,l,f){var y=a.stateNode;if(!y)throw Error(n(169));f?(a=im(a,l,ai),y.__reactInternalMemoizedMergedChildContext=a,Zt(Kn),Zt(jn),Wt(jn,a)):Zt(Kn),Wt(Kn,f)}var ra=null,bl=!1,Lu=!1;function om(a){ra===null?ra=[a]:ra.push(a)}function O1(a){bl=!0,om(a)}function Da(){if(!Lu&&ra!==null){Lu=!0;var a=0,l=jt;try{var f=ra;for(jt=1;a<f.length;a++){var y=f[a];do y=y(!0);while(y!==null)}ra=null,bl=!1}catch(E){throw ra!==null&&(ra=ra.slice(a+1)),Ht(Cr,Da),E}finally{jt=l,Lu=!1}}return null}var zi=[],$i=0,yl=null,vl=0,gr=[],br=0,ii=null,aa=1,ia="";function si(a,l){zi[$i++]=vl,zi[$i++]=yl,yl=a,vl=l}function lm(a,l,f){gr[br++]=aa,gr[br++]=ia,gr[br++]=ii,ii=a;var y=aa;a=ia;var E=32-gt(y)-1;y&=~(1<<E),f+=1;var S=32-gt(l)+E;if(30<S){var $=E-E%5;S=(y&(1<<$)-1).toString(32),y>>=$,E-=$,aa=1<<32-gt(l)+E|f<<E|y,ia=S+a}else aa=1<<S|f<<E|y,ia=a}function Pu(a){a.return!==null&&(si(a,1),lm(a,1,0))}function zu(a){for(;a===yl;)yl=zi[--$i],zi[$i]=null,vl=zi[--$i],zi[$i]=null;for(;a===ii;)ii=gr[--br],gr[br]=null,ia=gr[--br],gr[br]=null,aa=gr[--br],gr[br]=null}var lr=null,cr=null,en=!1,Dr=null;function cm(a,l){var f=wr(5,null,null,0);f.elementType="DELETED",f.stateNode=l,f.return=a,l=a.deletions,l===null?(a.deletions=[f],a.flags|=16):l.push(f)}function um(a,l){switch(a.tag){case 5:var f=a.type;return l=l.nodeType!==1||f.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,lr=a,cr=Ca(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,lr=a,cr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(f=ii!==null?{id:aa,overflow:ia}:null,a.memoizedState={dehydrated:l,treeContext:f,retryLane:1073741824},f=wr(18,null,null,0),f.stateNode=l,f.return=a,a.child=f,lr=a,cr=null,!0):!1;default:return!1}}function $u(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Bu(a){if(en){var l=cr;if(l){var f=l;if(!um(a,l)){if($u(a))throw Error(n(418));l=Ca(f.nextSibling);var y=lr;l&&um(a,l)?cm(y,f):(a.flags=a.flags&-4097|2,en=!1,lr=a)}}else{if($u(a))throw Error(n(418));a.flags=a.flags&-4097|2,en=!1,lr=a}}}function dm(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;lr=a}function xl(a){if(a!==lr)return!1;if(!en)return dm(a),en=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!Iu(a.type,a.memoizedProps)),l&&(l=cr)){if($u(a))throw pm(),Error(n(418));for(;l;)cm(a,l),l=Ca(l.nextSibling)}if(dm(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(l===0){cr=Ca(a.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++}a=a.nextSibling}cr=null}}else cr=lr?Ca(a.stateNode.nextSibling):null;return!0}function pm(){for(var a=cr;a;)a=Ca(a.nextSibling)}function Bi(){cr=lr=null,en=!1}function Uu(a){Dr===null?Dr=[a]:Dr.push(a)}var M1=D.ReactCurrentBatchConfig;function $s(a,l,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var y=f.stateNode}if(!y)throw Error(n(147,a));var E=y,S=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===S?l.ref:(l=function($){var Y=E.refs;$===null?delete Y[S]:Y[S]=$},l._stringRef=S,l)}if(typeof a!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,a))}return a}function wl(a,l){throw a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function fm(a){var l=a._init;return l(a._payload)}function hm(a){function l(pe,ae){if(a){var fe=pe.deletions;fe===null?(pe.deletions=[ae],pe.flags|=16):fe.push(ae)}}function f(pe,ae){if(!a)return null;for(;ae!==null;)l(pe,ae),ae=ae.sibling;return null}function y(pe,ae){for(pe=new Map;ae!==null;)ae.key!==null?pe.set(ae.key,ae):pe.set(ae.index,ae),ae=ae.sibling;return pe}function E(pe,ae){return pe=La(pe,ae),pe.index=0,pe.sibling=null,pe}function S(pe,ae,fe){return pe.index=fe,a?(fe=pe.alternate,fe!==null?(fe=fe.index,fe<ae?(pe.flags|=2,ae):fe):(pe.flags|=2,ae)):(pe.flags|=1048576,ae)}function $(pe){return a&&pe.alternate===null&&(pe.flags|=2),pe}function Y(pe,ae,fe,Fe){return ae===null||ae.tag!==6?(ae=jd(fe,pe.mode,Fe),ae.return=pe,ae):(ae=E(ae,fe),ae.return=pe,ae)}function ee(pe,ae,fe,Fe){var nt=fe.type;return nt===O?Se(pe,ae,fe.props.children,Fe,fe.key):ae!==null&&(ae.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===se&&fm(nt)===ae.type)?(Fe=E(ae,fe.props),Fe.ref=$s(pe,ae,fe),Fe.return=pe,Fe):(Fe=Vl(fe.type,fe.key,fe.props,null,pe.mode,Fe),Fe.ref=$s(pe,ae,fe),Fe.return=pe,Fe)}function he(pe,ae,fe,Fe){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==fe.containerInfo||ae.stateNode.implementation!==fe.implementation?(ae=Od(fe,pe.mode,Fe),ae.return=pe,ae):(ae=E(ae,fe.children||[]),ae.return=pe,ae)}function Se(pe,ae,fe,Fe,nt){return ae===null||ae.tag!==7?(ae=hi(fe,pe.mode,Fe,nt),ae.return=pe,ae):(ae=E(ae,fe),ae.return=pe,ae)}function De(pe,ae,fe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=jd(""+ae,pe.mode,fe),ae.return=pe,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case I:return fe=Vl(ae.type,ae.key,ae.props,null,pe.mode,fe),fe.ref=$s(pe,null,ae),fe.return=pe,fe;case L:return ae=Od(ae,pe.mode,fe),ae.return=pe,ae;case se:var Fe=ae._init;return De(pe,Fe(ae._payload),fe)}if(ve(ae)||J(ae))return ae=hi(ae,pe.mode,fe,null),ae.return=pe,ae;wl(pe,ae)}return null}function ke(pe,ae,fe,Fe){var nt=ae!==null?ae.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return nt!==null?null:Y(pe,ae,""+fe,Fe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case I:return fe.key===nt?ee(pe,ae,fe,Fe):null;case L:return fe.key===nt?he(pe,ae,fe,Fe):null;case se:return nt=fe._init,ke(pe,ae,nt(fe._payload),Fe)}if(ve(fe)||J(fe))return nt!==null?null:Se(pe,ae,fe,Fe,null);wl(pe,fe)}return null}function qe(pe,ae,fe,Fe,nt){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return pe=pe.get(fe)||null,Y(ae,pe,""+Fe,nt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case I:return pe=pe.get(Fe.key===null?fe:Fe.key)||null,ee(ae,pe,Fe,nt);case L:return pe=pe.get(Fe.key===null?fe:Fe.key)||null,he(ae,pe,Fe,nt);case se:var it=Fe._init;return qe(pe,ae,fe,it(Fe._payload),nt)}if(ve(Fe)||J(Fe))return pe=pe.get(fe)||null,Se(ae,pe,Fe,nt,null);wl(ae,Fe)}return null}function Qe(pe,ae,fe,Fe){for(var nt=null,it=null,st=ae,dt=ae=0,Sn=null;st!==null&&dt<fe.length;dt++){st.index>dt?(Sn=st,st=null):Sn=st.sibling;var Mt=ke(pe,st,fe[dt],Fe);if(Mt===null){st===null&&(st=Sn);break}a&&st&&Mt.alternate===null&&l(pe,st),ae=S(Mt,ae,dt),it===null?nt=Mt:it.sibling=Mt,it=Mt,st=Sn}if(dt===fe.length)return f(pe,st),en&&si(pe,dt),nt;if(st===null){for(;dt<fe.length;dt++)st=De(pe,fe[dt],Fe),st!==null&&(ae=S(st,ae,dt),it===null?nt=st:it.sibling=st,it=st);return en&&si(pe,dt),nt}for(st=y(pe,st);dt<fe.length;dt++)Sn=qe(st,pe,dt,fe[dt],Fe),Sn!==null&&(a&&Sn.alternate!==null&&st.delete(Sn.key===null?dt:Sn.key),ae=S(Sn,ae,dt),it===null?nt=Sn:it.sibling=Sn,it=Sn);return a&&st.forEach(function(Pa){return l(pe,Pa)}),en&&si(pe,dt),nt}function et(pe,ae,fe,Fe){var nt=J(fe);if(typeof nt!="function")throw Error(n(150));if(fe=nt.call(fe),fe==null)throw Error(n(151));for(var it=nt=null,st=ae,dt=ae=0,Sn=null,Mt=fe.next();st!==null&&!Mt.done;dt++,Mt=fe.next()){st.index>dt?(Sn=st,st=null):Sn=st.sibling;var Pa=ke(pe,st,Mt.value,Fe);if(Pa===null){st===null&&(st=Sn);break}a&&st&&Pa.alternate===null&&l(pe,st),ae=S(Pa,ae,dt),it===null?nt=Pa:it.sibling=Pa,it=Pa,st=Sn}if(Mt.done)return f(pe,st),en&&si(pe,dt),nt;if(st===null){for(;!Mt.done;dt++,Mt=fe.next())Mt=De(pe,Mt.value,Fe),Mt!==null&&(ae=S(Mt,ae,dt),it===null?nt=Mt:it.sibling=Mt,it=Mt);return en&&si(pe,dt),nt}for(st=y(pe,st);!Mt.done;dt++,Mt=fe.next())Mt=qe(st,pe,dt,Mt.value,Fe),Mt!==null&&(a&&Mt.alternate!==null&&st.delete(Mt.key===null?dt:Mt.key),ae=S(Mt,ae,dt),it===null?nt=Mt:it.sibling=Mt,it=Mt);return a&&st.forEach(function(hE){return l(pe,hE)}),en&&si(pe,dt),nt}function pn(pe,ae,fe,Fe){if(typeof fe=="object"&&fe!==null&&fe.type===O&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case I:e:{for(var nt=fe.key,it=ae;it!==null;){if(it.key===nt){if(nt=fe.type,nt===O){if(it.tag===7){f(pe,it.sibling),ae=E(it,fe.props.children),ae.return=pe,pe=ae;break e}}else if(it.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===se&&fm(nt)===it.type){f(pe,it.sibling),ae=E(it,fe.props),ae.ref=$s(pe,it,fe),ae.return=pe,pe=ae;break e}f(pe,it);break}else l(pe,it);it=it.sibling}fe.type===O?(ae=hi(fe.props.children,pe.mode,Fe,fe.key),ae.return=pe,pe=ae):(Fe=Vl(fe.type,fe.key,fe.props,null,pe.mode,Fe),Fe.ref=$s(pe,ae,fe),Fe.return=pe,pe=Fe)}return $(pe);case L:e:{for(it=fe.key;ae!==null;){if(ae.key===it)if(ae.tag===4&&ae.stateNode.containerInfo===fe.containerInfo&&ae.stateNode.implementation===fe.implementation){f(pe,ae.sibling),ae=E(ae,fe.children||[]),ae.return=pe,pe=ae;break e}else{f(pe,ae);break}else l(pe,ae);ae=ae.sibling}ae=Od(fe,pe.mode,Fe),ae.return=pe,pe=ae}return $(pe);case se:return it=fe._init,pn(pe,ae,it(fe._payload),Fe)}if(ve(fe))return Qe(pe,ae,fe,Fe);if(J(fe))return et(pe,ae,fe,Fe);wl(pe,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,ae!==null&&ae.tag===6?(f(pe,ae.sibling),ae=E(ae,fe),ae.return=pe,pe=ae):(f(pe,ae),ae=jd(fe,pe.mode,Fe),ae.return=pe,pe=ae),$(pe)):f(pe,ae)}return pn}var Ui=hm(!0),mm=hm(!1),El=_a(null),kl=null,Hi=null,Hu=null;function qu(){Hu=Hi=kl=null}function Vu(a){var l=El.current;Zt(El),a._currentValue=l}function Wu(a,l,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===f)break;a=a.return}}function qi(a,l){kl=a,Hu=Hi=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Zn=!0),a.firstContext=null)}function yr(a){var l=a._currentValue;if(Hu!==a)if(a={context:a,memoizedValue:l,next:null},Hi===null){if(kl===null)throw Error(n(308));Hi=a,kl.dependencies={lanes:0,firstContext:a}}else Hi=Hi.next=a;return l}var oi=null;function Gu(a){oi===null?oi=[a]:oi.push(a)}function gm(a,l,f,y){var E=l.interleaved;return E===null?(f.next=f,Gu(l)):(f.next=E.next,E.next=f),l.interleaved=f,sa(a,y)}function sa(a,l){a.lanes|=l;var f=a.alternate;for(f!==null&&(f.lanes|=l),f=a,a=a.return;a!==null;)a.childLanes|=l,f=a.alternate,f!==null&&(f.childLanes|=l),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Ra=!1;function Ku(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bm(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function oa(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Aa(a,l,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ot&2)!==0){var E=y.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),y.pending=l,sa(a,f)}return E=y.interleaved,E===null?(l.next=l,Gu(y)):(l.next=E.next,E.next=l),y.interleaved=l,sa(a,f)}function Nl(a,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194240)!==0)){var y=l.lanes;y&=a.pendingLanes,f|=y,l.lanes=f,ks(a,f)}}function ym(a,l){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var E=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var $={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};S===null?E=S=$:S=S.next=$,f=f.next}while(f!==null);S===null?E=S=l:S=S.next=l}else E=S=l;f={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:y.shared,effects:y.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=l:a.next=l,f.lastBaseUpdate=l}function Sl(a,l,f,y){var E=a.updateQueue;Ra=!1;var S=E.firstBaseUpdate,$=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var ee=Y,he=ee.next;ee.next=null,$===null?S=he:$.next=he,$=ee;var Se=a.alternate;Se!==null&&(Se=Se.updateQueue,Y=Se.lastBaseUpdate,Y!==$&&(Y===null?Se.firstBaseUpdate=he:Y.next=he,Se.lastBaseUpdate=ee))}if(S!==null){var De=E.baseState;$=0,Se=he=ee=null,Y=S;do{var ke=Y.lane,qe=Y.eventTime;if((y&ke)===ke){Se!==null&&(Se=Se.next={eventTime:qe,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var Qe=a,et=Y;switch(ke=l,qe=f,et.tag){case 1:if(Qe=et.payload,typeof Qe=="function"){De=Qe.call(qe,De,ke);break e}De=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=et.payload,ke=typeof Qe=="function"?Qe.call(qe,De,ke):Qe,ke==null)break e;De=P({},De,ke);break e;case 2:Ra=!0}}Y.callback!==null&&Y.lane!==0&&(a.flags|=64,ke=E.effects,ke===null?E.effects=[Y]:ke.push(Y))}else qe={eventTime:qe,lane:ke,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Se===null?(he=Se=qe,ee=De):Se=Se.next=qe,$|=ke;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;ke=Y,Y=ke.next,ke.next=null,E.lastBaseUpdate=ke,E.shared.pending=null}}while(!0);if(Se===null&&(ee=De),E.baseState=ee,E.firstBaseUpdate=he,E.lastBaseUpdate=Se,l=E.shared.interleaved,l!==null){E=l;do $|=E.lane,E=E.next;while(E!==l)}else S===null&&(E.shared.lanes=0);ui|=$,a.lanes=$,a.memoizedState=De}}function vm(a,l,f){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var y=a[l],E=y.callback;if(E!==null){if(y.callback=null,y=f,typeof E!="function")throw Error(n(191,E));E.call(y)}}}var Bs={},Hr=_a(Bs),Us=_a(Bs),Hs=_a(Bs);function li(a){if(a===Bs)throw Error(n(174));return a}function Yu(a,l){switch(Wt(Hs,l),Wt(Us,a),Wt(Hr,Bs),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:xe(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=xe(l,a)}Zt(Hr),Wt(Hr,l)}function Vi(){Zt(Hr),Zt(Us),Zt(Hs)}function xm(a){li(Hs.current);var l=li(Hr.current),f=xe(l,a.type);l!==f&&(Wt(Us,a),Wt(Hr,f))}function Zu(a){Us.current===a&&(Zt(Hr),Zt(Us))}var nn=_a(0);function Cl(a){for(var l=a;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Xu=[];function Qu(){for(var a=0;a<Xu.length;a++)Xu[a]._workInProgressVersionPrimary=null;Xu.length=0}var _l=D.ReactCurrentDispatcher,Ju=D.ReactCurrentBatchConfig,ci=0,rn=null,yn=null,kn=null,Tl=!1,qs=!1,Vs=0,F1=0;function On(){throw Error(n(321))}function ed(a,l){if(l===null)return!1;for(var f=0;f<l.length&&f<a.length;f++)if(!Tr(a[f],l[f]))return!1;return!0}function td(a,l,f,y,E,S){if(ci=S,rn=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,_l.current=a===null||a.memoizedState===null?$1:B1,a=f(y,E),qs){S=0;do{if(qs=!1,Vs=0,25<=S)throw Error(n(301));S+=1,kn=yn=null,l.updateQueue=null,_l.current=U1,a=f(y,E)}while(qs)}if(_l.current=Al,l=yn!==null&&yn.next!==null,ci=0,kn=yn=rn=null,Tl=!1,l)throw Error(n(300));return a}function nd(){var a=Vs!==0;return Vs=0,a}function qr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?rn.memoizedState=kn=a:kn=kn.next=a,kn}function vr(){if(yn===null){var a=rn.alternate;a=a!==null?a.memoizedState:null}else a=yn.next;var l=kn===null?rn.memoizedState:kn.next;if(l!==null)kn=l,yn=a;else{if(a===null)throw Error(n(310));yn=a,a={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},kn===null?rn.memoizedState=kn=a:kn=kn.next=a}return kn}function Ws(a,l){return typeof l=="function"?l(a):l}function rd(a){var l=vr(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var y=yn,E=y.baseQueue,S=f.pending;if(S!==null){if(E!==null){var $=E.next;E.next=S.next,S.next=$}y.baseQueue=E=S,f.pending=null}if(E!==null){S=E.next,y=y.baseState;var Y=$=null,ee=null,he=S;do{var Se=he.lane;if((ci&Se)===Se)ee!==null&&(ee=ee.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),y=he.hasEagerState?he.eagerState:a(y,he.action);else{var De={lane:Se,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};ee===null?(Y=ee=De,$=y):ee=ee.next=De,rn.lanes|=Se,ui|=Se}he=he.next}while(he!==null&&he!==S);ee===null?$=y:ee.next=Y,Tr(y,l.memoizedState)||(Zn=!0),l.memoizedState=y,l.baseState=$,l.baseQueue=ee,f.lastRenderedState=y}if(a=f.interleaved,a!==null){E=a;do S=E.lane,rn.lanes|=S,ui|=S,E=E.next;while(E!==a)}else E===null&&(f.lanes=0);return[l.memoizedState,f.dispatch]}function ad(a){var l=vr(),f=l.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=a;var y=f.dispatch,E=f.pending,S=l.memoizedState;if(E!==null){f.pending=null;var $=E=E.next;do S=a(S,$.action),$=$.next;while($!==E);Tr(S,l.memoizedState)||(Zn=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),f.lastRenderedState=S}return[S,y]}function wm(){}function Em(a,l){var f=rn,y=vr(),E=l(),S=!Tr(y.memoizedState,E);if(S&&(y.memoizedState=E,Zn=!0),y=y.queue,id(Sm.bind(null,f,y,a),[a]),y.getSnapshot!==l||S||kn!==null&&kn.memoizedState.tag&1){if(f.flags|=2048,Gs(9,Nm.bind(null,f,y,E,l),void 0,null),Nn===null)throw Error(n(349));(ci&30)!==0||km(f,l,E)}return E}function km(a,l,f){a.flags|=16384,a={getSnapshot:l,value:f},l=rn.updateQueue,l===null?(l={lastEffect:null,stores:null},rn.updateQueue=l,l.stores=[a]):(f=l.stores,f===null?l.stores=[a]:f.push(a))}function Nm(a,l,f,y){l.value=f,l.getSnapshot=y,Cm(l)&&_m(a)}function Sm(a,l,f){return f(function(){Cm(l)&&_m(a)})}function Cm(a){var l=a.getSnapshot;a=a.value;try{var f=l();return!Tr(a,f)}catch{return!0}}function _m(a){var l=sa(a,1);l!==null&&jr(l,a,1,-1)}function Tm(a){var l=qr();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:a},l.queue=a,a=a.dispatch=z1.bind(null,rn,a),[l.memoizedState,a]}function Gs(a,l,f,y){return a={tag:a,create:l,destroy:f,deps:y,next:null},l=rn.updateQueue,l===null?(l={lastEffect:null,stores:null},rn.updateQueue=l,l.lastEffect=a.next=a):(f=l.lastEffect,f===null?l.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,l.lastEffect=a)),a}function Dm(){return vr().memoizedState}function Dl(a,l,f,y){var E=qr();rn.flags|=a,E.memoizedState=Gs(1|l,f,void 0,y===void 0?null:y)}function Rl(a,l,f,y){var E=vr();y=y===void 0?null:y;var S=void 0;if(yn!==null){var $=yn.memoizedState;if(S=$.destroy,y!==null&&ed(y,$.deps)){E.memoizedState=Gs(l,f,S,y);return}}rn.flags|=a,E.memoizedState=Gs(1|l,f,S,y)}function Rm(a,l){return Dl(8390656,8,a,l)}function id(a,l){return Rl(2048,8,a,l)}function Am(a,l){return Rl(4,2,a,l)}function Im(a,l){return Rl(4,4,a,l)}function jm(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function Om(a,l,f){return f=f!=null?f.concat([a]):null,Rl(4,4,jm.bind(null,l,a),f)}function sd(){}function Mm(a,l){var f=vr();l=l===void 0?null:l;var y=f.memoizedState;return y!==null&&l!==null&&ed(l,y[1])?y[0]:(f.memoizedState=[a,l],a)}function Fm(a,l){var f=vr();l=l===void 0?null:l;var y=f.memoizedState;return y!==null&&l!==null&&ed(l,y[1])?y[0]:(a=a(),f.memoizedState=[a,l],a)}function Lm(a,l,f){return(ci&21)===0?(a.baseState&&(a.baseState=!1,Zn=!0),a.memoizedState=f):(Tr(f,l)||(f=Qo(),rn.lanes|=f,ui|=f,a.baseState=!0),l)}function L1(a,l){var f=jt;jt=f!==0&&4>f?f:4,a(!0);var y=Ju.transition;Ju.transition={};try{a(!1),l()}finally{jt=f,Ju.transition=y}}function Pm(){return vr().memoizedState}function P1(a,l,f){var y=Ma(a);if(f={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null},zm(a))$m(l,f);else if(f=gm(a,l,f,y),f!==null){var E=qn();jr(f,a,y,E),Bm(f,l,y)}}function z1(a,l,f){var y=Ma(a),E={lane:y,action:f,hasEagerState:!1,eagerState:null,next:null};if(zm(a))$m(l,E);else{var S=a.alternate;if(a.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var $=l.lastRenderedState,Y=S($,f);if(E.hasEagerState=!0,E.eagerState=Y,Tr(Y,$)){var ee=l.interleaved;ee===null?(E.next=E,Gu(l)):(E.next=ee.next,ee.next=E),l.interleaved=E;return}}catch{}finally{}f=gm(a,l,E,y),f!==null&&(E=qn(),jr(f,a,y,E),Bm(f,l,y))}}function zm(a){var l=a.alternate;return a===rn||l!==null&&l===rn}function $m(a,l){qs=Tl=!0;var f=a.pending;f===null?l.next=l:(l.next=f.next,f.next=l),a.pending=l}function Bm(a,l,f){if((f&4194240)!==0){var y=l.lanes;y&=a.pendingLanes,f|=y,l.lanes=f,ks(a,f)}}var Al={readContext:yr,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},$1={readContext:yr,useCallback:function(a,l){return qr().memoizedState=[a,l===void 0?null:l],a},useContext:yr,useEffect:Rm,useImperativeHandle:function(a,l,f){return f=f!=null?f.concat([a]):null,Dl(4194308,4,jm.bind(null,l,a),f)},useLayoutEffect:function(a,l){return Dl(4194308,4,a,l)},useInsertionEffect:function(a,l){return Dl(4,2,a,l)},useMemo:function(a,l){var f=qr();return l=l===void 0?null:l,a=a(),f.memoizedState=[a,l],a},useReducer:function(a,l,f){var y=qr();return l=f!==void 0?f(l):l,y.memoizedState=y.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},y.queue=a,a=a.dispatch=P1.bind(null,rn,a),[y.memoizedState,a]},useRef:function(a){var l=qr();return a={current:a},l.memoizedState=a},useState:Tm,useDebugValue:sd,useDeferredValue:function(a){return qr().memoizedState=a},useTransition:function(){var a=Tm(!1),l=a[0];return a=L1.bind(null,a[1]),qr().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,f){var y=rn,E=qr();if(en){if(f===void 0)throw Error(n(407));f=f()}else{if(f=l(),Nn===null)throw Error(n(349));(ci&30)!==0||km(y,l,f)}E.memoizedState=f;var S={value:f,getSnapshot:l};return E.queue=S,Rm(Sm.bind(null,y,S,a),[a]),y.flags|=2048,Gs(9,Nm.bind(null,y,S,f,l),void 0,null),f},useId:function(){var a=qr(),l=Nn.identifierPrefix;if(en){var f=ia,y=aa;f=(y&~(1<<32-gt(y)-1)).toString(32)+f,l=":"+l+"R"+f,f=Vs++,0<f&&(l+="H"+f.toString(32)),l+=":"}else f=F1++,l=":"+l+"r"+f.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},B1={readContext:yr,useCallback:Mm,useContext:yr,useEffect:id,useImperativeHandle:Om,useInsertionEffect:Am,useLayoutEffect:Im,useMemo:Fm,useReducer:rd,useRef:Dm,useState:function(){return rd(Ws)},useDebugValue:sd,useDeferredValue:function(a){var l=vr();return Lm(l,yn.memoizedState,a)},useTransition:function(){var a=rd(Ws)[0],l=vr().memoizedState;return[a,l]},useMutableSource:wm,useSyncExternalStore:Em,useId:Pm,unstable_isNewReconciler:!1},U1={readContext:yr,useCallback:Mm,useContext:yr,useEffect:id,useImperativeHandle:Om,useInsertionEffect:Am,useLayoutEffect:Im,useMemo:Fm,useReducer:ad,useRef:Dm,useState:function(){return ad(Ws)},useDebugValue:sd,useDeferredValue:function(a){var l=vr();return yn===null?l.memoizedState=a:Lm(l,yn.memoizedState,a)},useTransition:function(){var a=ad(Ws)[0],l=vr().memoizedState;return[a,l]},useMutableSource:wm,useSyncExternalStore:Em,useId:Pm,unstable_isNewReconciler:!1};function Rr(a,l){if(a&&a.defaultProps){l=P({},l),a=a.defaultProps;for(var f in a)l[f]===void 0&&(l[f]=a[f]);return l}return l}function od(a,l,f,y){l=a.memoizedState,f=f(y,l),f=f==null?l:P({},l,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Il={isMounted:function(a){return(a=a._reactInternals)?Ge(a)===a:!1},enqueueSetState:function(a,l,f){a=a._reactInternals;var y=qn(),E=Ma(a),S=oa(y,E);S.payload=l,f!=null&&(S.callback=f),l=Aa(a,S,E),l!==null&&(jr(l,a,E,y),Nl(l,a,E))},enqueueReplaceState:function(a,l,f){a=a._reactInternals;var y=qn(),E=Ma(a),S=oa(y,E);S.tag=1,S.payload=l,f!=null&&(S.callback=f),l=Aa(a,S,E),l!==null&&(jr(l,a,E,y),Nl(l,a,E))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var f=qn(),y=Ma(a),E=oa(f,y);E.tag=2,l!=null&&(E.callback=l),l=Aa(a,E,y),l!==null&&(jr(l,a,y,f),Nl(l,a,y))}};function Um(a,l,f,y,E,S,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,S,$):l.prototype&&l.prototype.isPureReactComponent?!js(f,y)||!js(E,S):!0}function Hm(a,l,f){var y=!1,E=Ta,S=l.contextType;return typeof S=="object"&&S!==null?S=yr(S):(E=Yn(l)?ai:jn.current,y=l.contextTypes,S=(y=y!=null)?Pi(a,E):Ta),l=new l(f,S),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Il,a.stateNode=l,l._reactInternals=a,y&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=E,a.__reactInternalMemoizedMaskedChildContext=S),l}function qm(a,l,f,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,y),l.state!==a&&Il.enqueueReplaceState(l,l.state,null)}function ld(a,l,f,y){var E=a.stateNode;E.props=f,E.state=a.memoizedState,E.refs={},Ku(a);var S=l.contextType;typeof S=="object"&&S!==null?E.context=yr(S):(S=Yn(l)?ai:jn.current,E.context=Pi(a,S)),E.state=a.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(od(a,l,S,f),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(l=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),l!==E.state&&Il.enqueueReplaceState(E,E.state,null),Sl(a,f,E,y),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308)}function Wi(a,l){try{var f="",y=l;do f+=ce(y),y=y.return;while(y);var E=f}catch(S){E=`
Error generating stack: `+S.message+`
`+S.stack}return{value:a,source:l,stack:E,digest:null}}function cd(a,l,f){return{value:a,source:null,stack:f??null,digest:l??null}}function ud(a,l){try{console.error(l.value)}catch(f){setTimeout(function(){throw f})}}var H1=typeof WeakMap=="function"?WeakMap:Map;function Vm(a,l,f){f=oa(-1,f),f.tag=3,f.payload={element:null};var y=l.value;return f.callback=function(){zl||(zl=!0,Sd=y),ud(a,l)},f}function Wm(a,l,f){f=oa(-1,f),f.tag=3;var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var E=l.value;f.payload=function(){return y(E)},f.callback=function(){ud(a,l)}}var S=a.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(f.callback=function(){ud(a,l),typeof y!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var $=l.stack;this.componentDidCatch(l.value,{componentStack:$!==null?$:""})}),f}function Gm(a,l,f){var y=a.pingCache;if(y===null){y=a.pingCache=new H1;var E=new Set;y.set(l,E)}else E=y.get(l),E===void 0&&(E=new Set,y.set(l,E));E.has(f)||(E.add(f),a=rE.bind(null,a,l,f),l.then(a,a))}function Km(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Ym(a,l,f,y,E){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(l=oa(-1,1),l.tag=2,Aa(f,l,1))),f.lanes|=1),a):(a.flags|=65536,a.lanes=E,a)}var q1=D.ReactCurrentOwner,Zn=!1;function Hn(a,l,f,y){l.child=a===null?mm(l,null,f,y):Ui(l,a.child,f,y)}function Zm(a,l,f,y,E){f=f.render;var S=l.ref;return qi(l,E),y=td(a,l,f,y,S,E),f=nd(),a!==null&&!Zn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~E,la(a,l,E)):(en&&f&&Pu(l),l.flags|=1,Hn(a,l,y,E),l.child)}function Xm(a,l,f,y,E){if(a===null){var S=f.type;return typeof S=="function"&&!Id(S)&&S.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(l.tag=15,l.type=S,Qm(a,l,S,y,E)):(a=Vl(f.type,null,y,l,l.mode,E),a.ref=l.ref,a.return=l,l.child=a)}if(S=a.child,(a.lanes&E)===0){var $=S.memoizedProps;if(f=f.compare,f=f!==null?f:js,f($,y)&&a.ref===l.ref)return la(a,l,E)}return l.flags|=1,a=La(S,y),a.ref=l.ref,a.return=l,l.child=a}function Qm(a,l,f,y,E){if(a!==null){var S=a.memoizedProps;if(js(S,y)&&a.ref===l.ref)if(Zn=!1,l.pendingProps=y=S,(a.lanes&E)!==0)(a.flags&131072)!==0&&(Zn=!0);else return l.lanes=a.lanes,la(a,l,E)}return dd(a,l,f,y,E)}function Jm(a,l,f){var y=l.pendingProps,E=y.children,S=a!==null?a.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Ki,ur),ur|=f;else{if((f&1073741824)===0)return a=S!==null?S.baseLanes|f:f,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,Wt(Ki,ur),ur|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:f,Wt(Ki,ur),ur|=y}else S!==null?(y=S.baseLanes|f,l.memoizedState=null):y=f,Wt(Ki,ur),ur|=y;return Hn(a,l,E,f),l.child}function eg(a,l){var f=l.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(l.flags|=512,l.flags|=2097152)}function dd(a,l,f,y,E){var S=Yn(f)?ai:jn.current;return S=Pi(l,S),qi(l,E),f=td(a,l,f,y,S,E),y=nd(),a!==null&&!Zn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~E,la(a,l,E)):(en&&y&&Pu(l),l.flags|=1,Hn(a,l,f,E),l.child)}function tg(a,l,f,y,E){if(Yn(f)){var S=!0;gl(l)}else S=!1;if(qi(l,E),l.stateNode===null)Ol(a,l),Hm(l,f,y),ld(l,f,y,E),y=!0;else if(a===null){var $=l.stateNode,Y=l.memoizedProps;$.props=Y;var ee=$.context,he=f.contextType;typeof he=="object"&&he!==null?he=yr(he):(he=Yn(f)?ai:jn.current,he=Pi(l,he));var Se=f.getDerivedStateFromProps,De=typeof Se=="function"||typeof $.getSnapshotBeforeUpdate=="function";De||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Y!==y||ee!==he)&&qm(l,$,y,he),Ra=!1;var ke=l.memoizedState;$.state=ke,Sl(l,y,$,E),ee=l.memoizedState,Y!==y||ke!==ee||Kn.current||Ra?(typeof Se=="function"&&(od(l,f,Se,y),ee=l.memoizedState),(Y=Ra||Um(l,f,Y,y,ke,ee,he))?(De||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(l.flags|=4194308)):(typeof $.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=ee),$.props=y,$.state=ee,$.context=he,y=Y):(typeof $.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{$=l.stateNode,bm(a,l),Y=l.memoizedProps,he=l.type===l.elementType?Y:Rr(l.type,Y),$.props=he,De=l.pendingProps,ke=$.context,ee=f.contextType,typeof ee=="object"&&ee!==null?ee=yr(ee):(ee=Yn(f)?ai:jn.current,ee=Pi(l,ee));var qe=f.getDerivedStateFromProps;(Se=typeof qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Y!==De||ke!==ee)&&qm(l,$,y,ee),Ra=!1,ke=l.memoizedState,$.state=ke,Sl(l,y,$,E);var Qe=l.memoizedState;Y!==De||ke!==Qe||Kn.current||Ra?(typeof qe=="function"&&(od(l,f,qe,y),Qe=l.memoizedState),(he=Ra||Um(l,f,he,y,ke,Qe,ee)||!1)?(Se||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(y,Qe,ee),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(y,Qe,ee)),typeof $.componentDidUpdate=="function"&&(l.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof $.componentDidUpdate!="function"||Y===a.memoizedProps&&ke===a.memoizedState||(l.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&ke===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Qe),$.props=y,$.state=Qe,$.context=ee,y=he):(typeof $.componentDidUpdate!="function"||Y===a.memoizedProps&&ke===a.memoizedState||(l.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||Y===a.memoizedProps&&ke===a.memoizedState||(l.flags|=1024),y=!1)}return pd(a,l,f,y,S,E)}function pd(a,l,f,y,E,S){eg(a,l);var $=(l.flags&128)!==0;if(!y&&!$)return E&&sm(l,f,!1),la(a,l,S);y=l.stateNode,q1.current=l;var Y=$&&typeof f.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,a!==null&&$?(l.child=Ui(l,a.child,null,S),l.child=Ui(l,null,Y,S)):Hn(a,l,Y,S),l.memoizedState=y.state,E&&sm(l,f,!0),l.child}function ng(a){var l=a.stateNode;l.pendingContext?am(a,l.pendingContext,l.pendingContext!==l.context):l.context&&am(a,l.context,!1),Yu(a,l.containerInfo)}function rg(a,l,f,y,E){return Bi(),Uu(E),l.flags|=256,Hn(a,l,f,y),l.child}var fd={dehydrated:null,treeContext:null,retryLane:0};function hd(a){return{baseLanes:a,cachePool:null,transitions:null}}function ag(a,l,f){var y=l.pendingProps,E=nn.current,S=!1,$=(l.flags&128)!==0,Y;if((Y=$)||(Y=a!==null&&a.memoizedState===null?!1:(E&2)!==0),Y?(S=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(E|=1),Wt(nn,E&1),a===null)return Bu(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):($=y.children,a=y.fallback,S?(y=l.mode,S=l.child,$={mode:"hidden",children:$},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=$):S=Wl($,y,0,null),a=hi(a,y,f,null),S.return=l,a.return=l,S.sibling=a,l.child=S,l.child.memoizedState=hd(f),l.memoizedState=fd,a):md(l,$));if(E=a.memoizedState,E!==null&&(Y=E.dehydrated,Y!==null))return V1(a,l,$,y,Y,E,f);if(S){S=y.fallback,$=l.mode,E=a.child,Y=E.sibling;var ee={mode:"hidden",children:y.children};return($&1)===0&&l.child!==E?(y=l.child,y.childLanes=0,y.pendingProps=ee,l.deletions=null):(y=La(E,ee),y.subtreeFlags=E.subtreeFlags&14680064),Y!==null?S=La(Y,S):(S=hi(S,$,f,null),S.flags|=2),S.return=l,y.return=l,y.sibling=S,l.child=y,y=S,S=l.child,$=a.child.memoizedState,$=$===null?hd(f):{baseLanes:$.baseLanes|f,cachePool:null,transitions:$.transitions},S.memoizedState=$,S.childLanes=a.childLanes&~f,l.memoizedState=fd,y}return S=a.child,a=S.sibling,y=La(S,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=f),y.return=l,y.sibling=null,a!==null&&(f=l.deletions,f===null?(l.deletions=[a],l.flags|=16):f.push(a)),l.child=y,l.memoizedState=null,y}function md(a,l){return l=Wl({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function jl(a,l,f,y){return y!==null&&Uu(y),Ui(l,a.child,null,f),a=md(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function V1(a,l,f,y,E,S,$){if(f)return l.flags&256?(l.flags&=-257,y=cd(Error(n(422))),jl(a,l,$,y)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(S=y.fallback,E=l.mode,y=Wl({mode:"visible",children:y.children},E,0,null),S=hi(S,E,$,null),S.flags|=2,y.return=l,S.return=l,y.sibling=S,l.child=y,(l.mode&1)!==0&&Ui(l,a.child,null,$),l.child.memoizedState=hd($),l.memoizedState=fd,S);if((l.mode&1)===0)return jl(a,l,$,null);if(E.data==="$!"){if(y=E.nextSibling&&E.nextSibling.dataset,y)var Y=y.dgst;return y=Y,S=Error(n(419)),y=cd(S,y,void 0),jl(a,l,$,y)}if(Y=($&a.childLanes)!==0,Zn||Y){if(y=Nn,y!==null){switch($&-$){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(y.suspendedLanes|$))!==0?0:E,E!==0&&E!==S.retryLane&&(S.retryLane=E,sa(a,E),jr(y,a,E,-1))}return Ad(),y=cd(Error(n(421))),jl(a,l,$,y)}return E.data==="$?"?(l.flags|=128,l.child=a.child,l=aE.bind(null,a),E._reactRetry=l,null):(a=S.treeContext,cr=Ca(E.nextSibling),lr=l,en=!0,Dr=null,a!==null&&(gr[br++]=aa,gr[br++]=ia,gr[br++]=ii,aa=a.id,ia=a.overflow,ii=l),l=md(l,y.children),l.flags|=4096,l)}function ig(a,l,f){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),Wu(a.return,l,f)}function gd(a,l,f,y,E){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:E}:(S.isBackwards=l,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=f,S.tailMode=E)}function sg(a,l,f){var y=l.pendingProps,E=y.revealOrder,S=y.tail;if(Hn(a,l,y.children,f),y=nn.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ig(a,f,l);else if(a.tag===19)ig(a,f,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}if(Wt(nn,y),(l.mode&1)===0)l.memoizedState=null;else switch(E){case"forwards":for(f=l.child,E=null;f!==null;)a=f.alternate,a!==null&&Cl(a)===null&&(E=f),f=f.sibling;f=E,f===null?(E=l.child,l.child=null):(E=f.sibling,f.sibling=null),gd(l,!1,E,f,S);break;case"backwards":for(f=null,E=l.child,l.child=null;E!==null;){if(a=E.alternate,a!==null&&Cl(a)===null){l.child=E;break}a=E.sibling,E.sibling=f,f=E,E=a}gd(l,!0,f,null,S);break;case"together":gd(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ol(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function la(a,l,f){if(a!==null&&(l.dependencies=a.dependencies),ui|=l.lanes,(f&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,f=La(a,a.pendingProps),l.child=f,f.return=l;a.sibling!==null;)a=a.sibling,f=f.sibling=La(a,a.pendingProps),f.return=l;f.sibling=null}return l.child}function W1(a,l,f){switch(l.tag){case 3:ng(l),Bi();break;case 5:xm(l);break;case 1:Yn(l.type)&&gl(l);break;case 4:Yu(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,E=l.memoizedProps.value;Wt(El,y._currentValue),y._currentValue=E;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Wt(nn,nn.current&1),l.flags|=128,null):(f&l.child.childLanes)!==0?ag(a,l,f):(Wt(nn,nn.current&1),a=la(a,l,f),a!==null?a.sibling:null);Wt(nn,nn.current&1);break;case 19:if(y=(f&l.childLanes)!==0,(a.flags&128)!==0){if(y)return sg(a,l,f);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Wt(nn,nn.current),y)break;return null;case 22:case 23:return l.lanes=0,Jm(a,l,f)}return la(a,l,f)}var og,bd,lg,cg;og=function(a,l){for(var f=l.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},bd=function(){},lg=function(a,l,f,y){var E=a.memoizedProps;if(E!==y){a=l.stateNode,li(Hr.current);var S=null;switch(f){case"input":E=R(a,E),y=R(a,y),S=[];break;case"select":E=P({},E,{value:void 0}),y=P({},y,{value:void 0}),S=[];break;case"textarea":E=de(a,E),y=de(a,y),S=[];break;default:typeof E.onClick!="function"&&typeof y.onClick=="function"&&(a.onclick=fl)}_t(f,y);var $;f=null;for(he in E)if(!y.hasOwnProperty(he)&&E.hasOwnProperty(he)&&E[he]!=null)if(he==="style"){var Y=E[he];for($ in Y)Y.hasOwnProperty($)&&(f||(f={}),f[$]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(i.hasOwnProperty(he)?S||(S=[]):(S=S||[]).push(he,null));for(he in y){var ee=y[he];if(Y=E!=null?E[he]:void 0,y.hasOwnProperty(he)&&ee!==Y&&(ee!=null||Y!=null))if(he==="style")if(Y){for($ in Y)!Y.hasOwnProperty($)||ee&&ee.hasOwnProperty($)||(f||(f={}),f[$]="");for($ in ee)ee.hasOwnProperty($)&&Y[$]!==ee[$]&&(f||(f={}),f[$]=ee[$])}else f||(S||(S=[]),S.push(he,f)),f=ee;else he==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,Y=Y?Y.__html:void 0,ee!=null&&Y!==ee&&(S=S||[]).push(he,ee)):he==="children"?typeof ee!="string"&&typeof ee!="number"||(S=S||[]).push(he,""+ee):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(i.hasOwnProperty(he)?(ee!=null&&he==="onScroll"&&Yt("scroll",a),S||Y===ee||(S=[])):(S=S||[]).push(he,ee))}f&&(S=S||[]).push("style",f);var he=S;(l.updateQueue=he)&&(l.flags|=4)}},cg=function(a,l,f,y){f!==y&&(l.flags|=4)};function Ks(a,l){if(!en)switch(a.tailMode){case"hidden":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Mn(a){var l=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(l)for(var E=a.child;E!==null;)f|=E.lanes|E.childLanes,y|=E.subtreeFlags&14680064,y|=E.flags&14680064,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)f|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=y,a.childLanes=f,l}function G1(a,l,f){var y=l.pendingProps;switch(zu(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(l),null;case 1:return Yn(l.type)&&ml(),Mn(l),null;case 3:return y=l.stateNode,Vi(),Zt(Kn),Zt(jn),Qu(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(a===null||a.child===null)&&(xl(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Dr!==null&&(Td(Dr),Dr=null))),bd(a,l),Mn(l),null;case 5:Zu(l);var E=li(Hs.current);if(f=l.type,a!==null&&l.stateNode!=null)lg(a,l,f,y,E),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(n(166));return Mn(l),null}if(a=li(Hr.current),xl(l)){y=l.stateNode,f=l.type;var S=l.memoizedProps;switch(y[Ur]=l,y[Ps]=S,a=(l.mode&1)!==0,f){case"dialog":Yt("cancel",y),Yt("close",y);break;case"iframe":case"object":case"embed":Yt("load",y);break;case"video":case"audio":for(E=0;E<Ms.length;E++)Yt(Ms[E],y);break;case"source":Yt("error",y);break;case"img":case"image":case"link":Yt("error",y),Yt("load",y);break;case"details":Yt("toggle",y);break;case"input":ge(y,S),Yt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},Yt("invalid",y);break;case"textarea":Ce(y,S),Yt("invalid",y)}_t(f,S),E=null;for(var $ in S)if(S.hasOwnProperty($)){var Y=S[$];$==="children"?typeof Y=="string"?y.textContent!==Y&&(S.suppressHydrationWarning!==!0&&pl(y.textContent,Y,a),E=["children",Y]):typeof Y=="number"&&y.textContent!==""+Y&&(S.suppressHydrationWarning!==!0&&pl(y.textContent,Y,a),E=["children",""+Y]):i.hasOwnProperty($)&&Y!=null&&$==="onScroll"&&Yt("scroll",y)}switch(f){case"input":rt(y),W(y,S,!0);break;case"textarea":rt(y),_e(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=fl)}y=E,l.updateQueue=y,y!==null&&(l.flags|=4)}else{$=E.nodeType===9?E:E.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ie(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=$.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof y.is=="string"?a=$.createElement(f,{is:y.is}):(a=$.createElement(f),f==="select"&&($=a,y.multiple?$.multiple=!0:y.size&&($.size=y.size))):a=$.createElementNS(a,f),a[Ur]=l,a[Ps]=y,og(a,l,!1,!1),l.stateNode=a;e:{switch($=bn(f,y),f){case"dialog":Yt("cancel",a),Yt("close",a),E=y;break;case"iframe":case"object":case"embed":Yt("load",a),E=y;break;case"video":case"audio":for(E=0;E<Ms.length;E++)Yt(Ms[E],a);E=y;break;case"source":Yt("error",a),E=y;break;case"img":case"image":case"link":Yt("error",a),Yt("load",a),E=y;break;case"details":Yt("toggle",a),E=y;break;case"input":ge(a,y),E=R(a,y),Yt("invalid",a);break;case"option":E=y;break;case"select":a._wrapperState={wasMultiple:!!y.multiple},E=P({},y,{value:void 0}),Yt("invalid",a);break;case"textarea":Ce(a,y),E=de(a,y),Yt("invalid",a);break;default:E=y}_t(f,E),Y=E;for(S in Y)if(Y.hasOwnProperty(S)){var ee=Y[S];S==="style"?un(a,ee):S==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Ve(a,ee)):S==="children"?typeof ee=="string"?(f!=="textarea"||ee!=="")&&ct(a,ee):typeof ee=="number"&&ct(a,""+ee):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?ee!=null&&S==="onScroll"&&Yt("scroll",a):ee!=null&&T(a,S,ee,$))}switch(f){case"input":rt(a),W(a,y,!1);break;case"textarea":rt(a),_e(a);break;case"option":y.value!=null&&a.setAttribute("value",""+Te(y.value));break;case"select":a.multiple=!!y.multiple,S=y.value,S!=null?we(a,!!y.multiple,S,!1):y.defaultValue!=null&&we(a,!!y.multiple,y.defaultValue,!0);break;default:typeof E.onClick=="function"&&(a.onclick=fl)}switch(f){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Mn(l),null;case 6:if(a&&l.stateNode!=null)cg(a,l,a.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(n(166));if(f=li(Hs.current),li(Hr.current),xl(l)){if(y=l.stateNode,f=l.memoizedProps,y[Ur]=l,(S=y.nodeValue!==f)&&(a=lr,a!==null))switch(a.tag){case 3:pl(y.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&pl(y.nodeValue,f,(a.mode&1)!==0)}S&&(l.flags|=4)}else y=(f.nodeType===9?f:f.ownerDocument).createTextNode(y),y[Ur]=l,l.stateNode=y}return Mn(l),null;case 13:if(Zt(nn),y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(en&&cr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)pm(),Bi(),l.flags|=98560,S=!1;else if(S=xl(l),y!==null&&y.dehydrated!==null){if(a===null){if(!S)throw Error(n(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Ur]=l}else Bi(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Mn(l),S=!1}else Dr!==null&&(Td(Dr),Dr=null),S=!0;if(!S)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=f,l):(y=y!==null,y!==(a!==null&&a.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(nn.current&1)!==0?vn===0&&(vn=3):Ad())),l.updateQueue!==null&&(l.flags|=4),Mn(l),null);case 4:return Vi(),bd(a,l),a===null&&Fs(l.stateNode.containerInfo),Mn(l),null;case 10:return Vu(l.type._context),Mn(l),null;case 17:return Yn(l.type)&&ml(),Mn(l),null;case 19:if(Zt(nn),S=l.memoizedState,S===null)return Mn(l),null;if(y=(l.flags&128)!==0,$=S.rendering,$===null)if(y)Ks(S,!1);else{if(vn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if($=Cl(a),$!==null){for(l.flags|=128,Ks(S,!1),y=$.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=f,f=l.child;f!==null;)S=f,a=y,S.flags&=14680066,$=S.alternate,$===null?(S.childLanes=0,S.lanes=a,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=$.childLanes,S.lanes=$.lanes,S.child=$.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=$.memoizedProps,S.memoizedState=$.memoizedState,S.updateQueue=$.updateQueue,S.type=$.type,a=$.dependencies,S.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return Wt(nn,nn.current&1|2),l.child}a=a.sibling}S.tail!==null&&Rt()>Yi&&(l.flags|=128,y=!0,Ks(S,!1),l.lanes=4194304)}else{if(!y)if(a=Cl($),a!==null){if(l.flags|=128,y=!0,f=a.updateQueue,f!==null&&(l.updateQueue=f,l.flags|=4),Ks(S,!0),S.tail===null&&S.tailMode==="hidden"&&!$.alternate&&!en)return Mn(l),null}else 2*Rt()-S.renderingStartTime>Yi&&f!==1073741824&&(l.flags|=128,y=!0,Ks(S,!1),l.lanes=4194304);S.isBackwards?($.sibling=l.child,l.child=$):(f=S.last,f!==null?f.sibling=$:l.child=$,S.last=$)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=Rt(),l.sibling=null,f=nn.current,Wt(nn,y?f&1|2:f&1),l):(Mn(l),null);case 22:case 23:return Rd(),y=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(ur&1073741824)!==0&&(Mn(l),l.subtreeFlags&6&&(l.flags|=8192)):Mn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function K1(a,l){switch(zu(l),l.tag){case 1:return Yn(l.type)&&ml(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Vi(),Zt(Kn),Zt(jn),Qu(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Zu(l),null;case 13:if(Zt(nn),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Bi()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Zt(nn),null;case 4:return Vi(),null;case 10:return Vu(l.type._context),null;case 22:case 23:return Rd(),null;case 24:return null;default:return null}}var Ml=!1,Fn=!1,Y1=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Gi(a,l){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(y){ln(a,l,y)}else f.current=null}function yd(a,l,f){try{f()}catch(y){ln(a,l,y)}}var ug=!1;function Z1(a,l){if(Ru=tl,a=Uh(),Eu(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var E=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var $=0,Y=-1,ee=-1,he=0,Se=0,De=a,ke=null;t:for(;;){for(var qe;De!==f||E!==0&&De.nodeType!==3||(Y=$+E),De!==S||y!==0&&De.nodeType!==3||(ee=$+y),De.nodeType===3&&($+=De.nodeValue.length),(qe=De.firstChild)!==null;)ke=De,De=qe;for(;;){if(De===a)break t;if(ke===f&&++he===E&&(Y=$),ke===S&&++Se===y&&(ee=$),(qe=De.nextSibling)!==null)break;De=ke,ke=De.parentNode}De=qe}f=Y===-1||ee===-1?null:{start:Y,end:ee}}else f=null}f=f||{start:0,end:0}}else f=null;for(Au={focusedElem:a,selectionRange:f},tl=!1,Xe=l;Xe!==null;)if(l=Xe,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Xe=a;else for(;Xe!==null;){l=Xe;try{var Qe=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var et=Qe.memoizedProps,pn=Qe.memoizedState,pe=l.stateNode,ae=pe.getSnapshotBeforeUpdate(l.elementType===l.type?et:Rr(l.type,et),pn);pe.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:var fe=l.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Fe){ln(l,l.return,Fe)}if(a=l.sibling,a!==null){a.return=l.return,Xe=a;break}Xe=l.return}return Qe=ug,ug=!1,Qe}function Ys(a,l,f){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var E=y=y.next;do{if((E.tag&a)===a){var S=E.destroy;E.destroy=void 0,S!==void 0&&yd(l,f,S)}E=E.next}while(E!==y)}}function Fl(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&a)===a){var y=f.create;f.destroy=y()}f=f.next}while(f!==l)}}function vd(a){var l=a.ref;if(l!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof l=="function"?l(a):l.current=a}}function dg(a){var l=a.alternate;l!==null&&(a.alternate=null,dg(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Ur],delete l[Ps],delete l[Mu],delete l[I1],delete l[j1])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function pg(a){return a.tag===5||a.tag===3||a.tag===4}function fg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||pg(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function xd(a,l,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?f.nodeType===8?f.parentNode.insertBefore(a,l):f.insertBefore(a,l):(f.nodeType===8?(l=f.parentNode,l.insertBefore(a,f)):(l=f,l.appendChild(a)),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=fl));else if(y!==4&&(a=a.child,a!==null))for(xd(a,l,f),a=a.sibling;a!==null;)xd(a,l,f),a=a.sibling}function wd(a,l,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?f.insertBefore(a,l):f.appendChild(a);else if(y!==4&&(a=a.child,a!==null))for(wd(a,l,f),a=a.sibling;a!==null;)wd(a,l,f),a=a.sibling}var An=null,Ar=!1;function Ia(a,l,f){for(f=f.child;f!==null;)hg(a,l,f),f=f.sibling}function hg(a,l,f){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(Je,f)}catch{}switch(f.tag){case 5:Fn||Gi(f,l);case 6:var y=An,E=Ar;An=null,Ia(a,l,f),An=y,Ar=E,An!==null&&(Ar?(a=An,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):An.removeChild(f.stateNode));break;case 18:An!==null&&(Ar?(a=An,f=f.stateNode,a.nodeType===8?Ou(a.parentNode,f):a.nodeType===1&&Ou(a,f),_s(a)):Ou(An,f.stateNode));break;case 4:y=An,E=Ar,An=f.stateNode.containerInfo,Ar=!0,Ia(a,l,f),An=y,Ar=E;break;case 0:case 11:case 14:case 15:if(!Fn&&(y=f.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){E=y=y.next;do{var S=E,$=S.destroy;S=S.tag,$!==void 0&&((S&2)!==0||(S&4)!==0)&&yd(f,l,$),E=E.next}while(E!==y)}Ia(a,l,f);break;case 1:if(!Fn&&(Gi(f,l),y=f.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=f.memoizedProps,y.state=f.memoizedState,y.componentWillUnmount()}catch(Y){ln(f,l,Y)}Ia(a,l,f);break;case 21:Ia(a,l,f);break;case 22:f.mode&1?(Fn=(y=Fn)||f.memoizedState!==null,Ia(a,l,f),Fn=y):Ia(a,l,f);break;default:Ia(a,l,f)}}function mg(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new Y1),l.forEach(function(y){var E=iE.bind(null,a,y);f.has(y)||(f.add(y),y.then(E,E))})}}function Ir(a,l){var f=l.deletions;if(f!==null)for(var y=0;y<f.length;y++){var E=f[y];try{var S=a,$=l,Y=$;e:for(;Y!==null;){switch(Y.tag){case 5:An=Y.stateNode,Ar=!1;break e;case 3:An=Y.stateNode.containerInfo,Ar=!0;break e;case 4:An=Y.stateNode.containerInfo,Ar=!0;break e}Y=Y.return}if(An===null)throw Error(n(160));hg(S,$,E),An=null,Ar=!1;var ee=E.alternate;ee!==null&&(ee.return=null),E.return=null}catch(he){ln(E,l,he)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)gg(l,a),l=l.sibling}function gg(a,l){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Ir(l,a),Vr(a),y&4){try{Ys(3,a,a.return),Fl(3,a)}catch(et){ln(a,a.return,et)}try{Ys(5,a,a.return)}catch(et){ln(a,a.return,et)}}break;case 1:Ir(l,a),Vr(a),y&512&&f!==null&&Gi(f,f.return);break;case 5:if(Ir(l,a),Vr(a),y&512&&f!==null&&Gi(f,f.return),a.flags&32){var E=a.stateNode;try{ct(E,"")}catch(et){ln(a,a.return,et)}}if(y&4&&(E=a.stateNode,E!=null)){var S=a.memoizedProps,$=f!==null?f.memoizedProps:S,Y=a.type,ee=a.updateQueue;if(a.updateQueue=null,ee!==null)try{Y==="input"&&S.type==="radio"&&S.name!=null&&oe(E,S),bn(Y,$);var he=bn(Y,S);for($=0;$<ee.length;$+=2){var Se=ee[$],De=ee[$+1];Se==="style"?un(E,De):Se==="dangerouslySetInnerHTML"?Ve(E,De):Se==="children"?ct(E,De):T(E,Se,De,he)}switch(Y){case"input":K(E,S);break;case"textarea":Oe(E,S);break;case"select":var ke=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!S.multiple;var qe=S.value;qe!=null?we(E,!!S.multiple,qe,!1):ke!==!!S.multiple&&(S.defaultValue!=null?we(E,!!S.multiple,S.defaultValue,!0):we(E,!!S.multiple,S.multiple?[]:"",!1))}E[Ps]=S}catch(et){ln(a,a.return,et)}}break;case 6:if(Ir(l,a),Vr(a),y&4){if(a.stateNode===null)throw Error(n(162));E=a.stateNode,S=a.memoizedProps;try{E.nodeValue=S}catch(et){ln(a,a.return,et)}}break;case 3:if(Ir(l,a),Vr(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{_s(l.containerInfo)}catch(et){ln(a,a.return,et)}break;case 4:Ir(l,a),Vr(a);break;case 13:Ir(l,a),Vr(a),E=a.child,E.flags&8192&&(S=E.memoizedState!==null,E.stateNode.isHidden=S,!S||E.alternate!==null&&E.alternate.memoizedState!==null||(Nd=Rt())),y&4&&mg(a);break;case 22:if(Se=f!==null&&f.memoizedState!==null,a.mode&1?(Fn=(he=Fn)||Se,Ir(l,a),Fn=he):Ir(l,a),Vr(a),y&8192){if(he=a.memoizedState!==null,(a.stateNode.isHidden=he)&&!Se&&(a.mode&1)!==0)for(Xe=a,Se=a.child;Se!==null;){for(De=Xe=Se;Xe!==null;){switch(ke=Xe,qe=ke.child,ke.tag){case 0:case 11:case 14:case 15:Ys(4,ke,ke.return);break;case 1:Gi(ke,ke.return);var Qe=ke.stateNode;if(typeof Qe.componentWillUnmount=="function"){y=ke,f=ke.return;try{l=y,Qe.props=l.memoizedProps,Qe.state=l.memoizedState,Qe.componentWillUnmount()}catch(et){ln(y,f,et)}}break;case 5:Gi(ke,ke.return);break;case 22:if(ke.memoizedState!==null){vg(De);continue}}qe!==null?(qe.return=ke,Xe=qe):vg(De)}Se=Se.sibling}e:for(Se=null,De=a;;){if(De.tag===5){if(Se===null){Se=De;try{E=De.stateNode,he?(S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(Y=De.stateNode,ee=De.memoizedProps.style,$=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,Y.style.display=ut("display",$))}catch(et){ln(a,a.return,et)}}}else if(De.tag===6){if(Se===null)try{De.stateNode.nodeValue=he?"":De.memoizedProps}catch(et){ln(a,a.return,et)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===a)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===a)break e;for(;De.sibling===null;){if(De.return===null||De.return===a)break e;Se===De&&(Se=null),De=De.return}Se===De&&(Se=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:Ir(l,a),Vr(a),y&4&&mg(a);break;case 21:break;default:Ir(l,a),Vr(a)}}function Vr(a){var l=a.flags;if(l&2){try{e:{for(var f=a.return;f!==null;){if(pg(f)){var y=f;break e}f=f.return}throw Error(n(160))}switch(y.tag){case 5:var E=y.stateNode;y.flags&32&&(ct(E,""),y.flags&=-33);var S=fg(a);wd(a,S,E);break;case 3:case 4:var $=y.stateNode.containerInfo,Y=fg(a);xd(a,Y,$);break;default:throw Error(n(161))}}catch(ee){ln(a,a.return,ee)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function X1(a,l,f){Xe=a,bg(a)}function bg(a,l,f){for(var y=(a.mode&1)!==0;Xe!==null;){var E=Xe,S=E.child;if(E.tag===22&&y){var $=E.memoizedState!==null||Ml;if(!$){var Y=E.alternate,ee=Y!==null&&Y.memoizedState!==null||Fn;Y=Ml;var he=Fn;if(Ml=$,(Fn=ee)&&!he)for(Xe=E;Xe!==null;)$=Xe,ee=$.child,$.tag===22&&$.memoizedState!==null?xg(E):ee!==null?(ee.return=$,Xe=ee):xg(E);for(;S!==null;)Xe=S,bg(S),S=S.sibling;Xe=E,Ml=Y,Fn=he}yg(a)}else(E.subtreeFlags&8772)!==0&&S!==null?(S.return=E,Xe=S):yg(a)}}function yg(a){for(;Xe!==null;){var l=Xe;if((l.flags&8772)!==0){var f=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Fn||Fl(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Fn)if(f===null)y.componentDidMount();else{var E=l.elementType===l.type?f.memoizedProps:Rr(l.type,f.memoizedProps);y.componentDidUpdate(E,f.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=l.updateQueue;S!==null&&vm(l,S,y);break;case 3:var $=l.updateQueue;if($!==null){if(f=null,l.child!==null)switch(l.child.tag){case 5:f=l.child.stateNode;break;case 1:f=l.child.stateNode}vm(l,$,f)}break;case 5:var Y=l.stateNode;if(f===null&&l.flags&4){f=Y;var ee=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&f.focus();break;case"img":ee.src&&(f.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var he=l.alternate;if(he!==null){var Se=he.memoizedState;if(Se!==null){var De=Se.dehydrated;De!==null&&_s(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Fn||l.flags&512&&vd(l)}catch(ke){ln(l,l.return,ke)}}if(l===a){Xe=null;break}if(f=l.sibling,f!==null){f.return=l.return,Xe=f;break}Xe=l.return}}function vg(a){for(;Xe!==null;){var l=Xe;if(l===a){Xe=null;break}var f=l.sibling;if(f!==null){f.return=l.return,Xe=f;break}Xe=l.return}}function xg(a){for(;Xe!==null;){var l=Xe;try{switch(l.tag){case 0:case 11:case 15:var f=l.return;try{Fl(4,l)}catch(ee){ln(l,f,ee)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var E=l.return;try{y.componentDidMount()}catch(ee){ln(l,E,ee)}}var S=l.return;try{vd(l)}catch(ee){ln(l,S,ee)}break;case 5:var $=l.return;try{vd(l)}catch(ee){ln(l,$,ee)}}}catch(ee){ln(l,l.return,ee)}if(l===a){Xe=null;break}var Y=l.sibling;if(Y!==null){Y.return=l.return,Xe=Y;break}Xe=l.return}}var Q1=Math.ceil,Ll=D.ReactCurrentDispatcher,Ed=D.ReactCurrentOwner,xr=D.ReactCurrentBatchConfig,Ot=0,Nn=null,hn=null,In=0,ur=0,Ki=_a(0),vn=0,Zs=null,ui=0,Pl=0,kd=0,Xs=null,Xn=null,Nd=0,Yi=1/0,ca=null,zl=!1,Sd=null,ja=null,$l=!1,Oa=null,Bl=0,Qs=0,Cd=null,Ul=-1,Hl=0;function qn(){return(Ot&6)!==0?Rt():Ul!==-1?Ul:Ul=Rt()}function Ma(a){return(a.mode&1)===0?1:(Ot&2)!==0&&In!==0?In&-In:M1.transition!==null?(Hl===0&&(Hl=Qo()),Hl):(a=jt,a!==0||(a=window.event,a=a===void 0?16:Eh(a.type)),a)}function jr(a,l,f,y){if(50<Qs)throw Qs=0,Cd=null,Error(n(185));Ea(a,f,y),((Ot&2)===0||a!==Nn)&&(a===Nn&&((Ot&2)===0&&(Pl|=f),vn===4&&Fa(a,In)),Qn(a,y),f===1&&Ot===0&&(l.mode&1)===0&&(Yi=Rt()+500,bl&&Da()))}function Qn(a,l){var f=a.callbackNode;cu(a,l);var y=ei(a,a===Nn?In:0);if(y===0)f!==null&&wn(f),a.callbackNode=null,a.callbackPriority=0;else if(l=y&-y,a.callbackPriority!==l){if(f!=null&&wn(f),l===1)a.tag===0?O1(Eg.bind(null,a)):om(Eg.bind(null,a)),R1(function(){(Ot&6)===0&&Da()}),f=null;else{switch(ft(y)){case 1:f=Cr;break;case 4:f=Bn;break;case 16:f=_r;break;case 536870912:f=Me;break;default:f=_r}f=Rg(f,wg.bind(null,a))}a.callbackPriority=l,a.callbackNode=f}}function wg(a,l){if(Ul=-1,Hl=0,(Ot&6)!==0)throw Error(n(327));var f=a.callbackNode;if(Zi()&&a.callbackNode!==f)return null;var y=ei(a,a===Nn?In:0);if(y===0)return null;if((y&30)!==0||(y&a.expiredLanes)!==0||l)l=ql(a,y);else{l=y;var E=Ot;Ot|=2;var S=Ng();(Nn!==a||In!==l)&&(ca=null,Yi=Rt()+500,pi(a,l));do try{tE();break}catch(Y){kg(a,Y)}while(!0);qu(),Ll.current=S,Ot=E,hn!==null?l=0:(Nn=null,In=0,l=vn)}if(l!==0){if(l===2&&(E=Es(a),E!==0&&(y=E,l=_d(a,E))),l===1)throw f=Zs,pi(a,0),Fa(a,y),Qn(a,Rt()),f;if(l===6)Fa(a,y);else{if(E=a.current.alternate,(y&30)===0&&!J1(E)&&(l=ql(a,y),l===2&&(S=Es(a),S!==0&&(y=S,l=_d(a,S))),l===1))throw f=Zs,pi(a,0),Fa(a,y),Qn(a,Rt()),f;switch(a.finishedWork=E,a.finishedLanes=y,l){case 0:case 1:throw Error(n(345));case 2:fi(a,Xn,ca);break;case 3:if(Fa(a,y),(y&130023424)===y&&(l=Nd+500-Rt(),10<l)){if(ei(a,0)!==0)break;if(E=a.suspendedLanes,(E&y)!==y){qn(),a.pingedLanes|=a.suspendedLanes&E;break}a.timeoutHandle=ju(fi.bind(null,a,Xn,ca),l);break}fi(a,Xn,ca);break;case 4:if(Fa(a,y),(y&4194240)===y)break;for(l=a.eventTimes,E=-1;0<y;){var $=31-gt(y);S=1<<$,$=l[$],$>E&&(E=$),y&=~S}if(y=E,y=Rt()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*Q1(y/1960))-y,10<y){a.timeoutHandle=ju(fi.bind(null,a,Xn,ca),y);break}fi(a,Xn,ca);break;case 5:fi(a,Xn,ca);break;default:throw Error(n(329))}}}return Qn(a,Rt()),a.callbackNode===f?wg.bind(null,a):null}function _d(a,l){var f=Xs;return a.current.memoizedState.isDehydrated&&(pi(a,l).flags|=256),a=ql(a,l),a!==2&&(l=Xn,Xn=f,l!==null&&Td(l)),a}function Td(a){Xn===null?Xn=a:Xn.push.apply(Xn,a)}function J1(a){for(var l=a;;){if(l.flags&16384){var f=l.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var y=0;y<f.length;y++){var E=f[y],S=E.getSnapshot;E=E.value;try{if(!Tr(S(),E))return!1}catch{return!1}}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Fa(a,l){for(l&=~kd,l&=~Pl,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var f=31-gt(l),y=1<<f;a[f]=-1,l&=~y}}function Eg(a){if((Ot&6)!==0)throw Error(n(327));Zi();var l=ei(a,0);if((l&1)===0)return Qn(a,Rt()),null;var f=ql(a,l);if(a.tag!==0&&f===2){var y=Es(a);y!==0&&(l=y,f=_d(a,y))}if(f===1)throw f=Zs,pi(a,0),Fa(a,l),Qn(a,Rt()),f;if(f===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,fi(a,Xn,ca),Qn(a,Rt()),null}function Dd(a,l){var f=Ot;Ot|=1;try{return a(l)}finally{Ot=f,Ot===0&&(Yi=Rt()+500,bl&&Da())}}function di(a){Oa!==null&&Oa.tag===0&&(Ot&6)===0&&Zi();var l=Ot;Ot|=1;var f=xr.transition,y=jt;try{if(xr.transition=null,jt=1,a)return a()}finally{jt=y,xr.transition=f,Ot=l,(Ot&6)===0&&Da()}}function Rd(){ur=Ki.current,Zt(Ki)}function pi(a,l){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,D1(f)),hn!==null)for(f=hn.return;f!==null;){var y=f;switch(zu(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&ml();break;case 3:Vi(),Zt(Kn),Zt(jn),Qu();break;case 5:Zu(y);break;case 4:Vi();break;case 13:Zt(nn);break;case 19:Zt(nn);break;case 10:Vu(y.type._context);break;case 22:case 23:Rd()}f=f.return}if(Nn=a,hn=a=La(a.current,null),In=ur=l,vn=0,Zs=null,kd=Pl=ui=0,Xn=Xs=null,oi!==null){for(l=0;l<oi.length;l++)if(f=oi[l],y=f.interleaved,y!==null){f.interleaved=null;var E=y.next,S=f.pending;if(S!==null){var $=S.next;S.next=E,y.next=$}f.pending=y}oi=null}return a}function kg(a,l){do{var f=hn;try{if(qu(),_l.current=Al,Tl){for(var y=rn.memoizedState;y!==null;){var E=y.queue;E!==null&&(E.pending=null),y=y.next}Tl=!1}if(ci=0,kn=yn=rn=null,qs=!1,Vs=0,Ed.current=null,f===null||f.return===null){vn=1,Zs=l,hn=null;break}e:{var S=a,$=f.return,Y=f,ee=l;if(l=In,Y.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var he=ee,Se=Y,De=Se.tag;if((Se.mode&1)===0&&(De===0||De===11||De===15)){var ke=Se.alternate;ke?(Se.updateQueue=ke.updateQueue,Se.memoizedState=ke.memoizedState,Se.lanes=ke.lanes):(Se.updateQueue=null,Se.memoizedState=null)}var qe=Km($);if(qe!==null){qe.flags&=-257,Ym(qe,$,Y,S,l),qe.mode&1&&Gm(S,he,l),l=qe,ee=he;var Qe=l.updateQueue;if(Qe===null){var et=new Set;et.add(ee),l.updateQueue=et}else Qe.add(ee);break e}else{if((l&1)===0){Gm(S,he,l),Ad();break e}ee=Error(n(426))}}else if(en&&Y.mode&1){var pn=Km($);if(pn!==null){(pn.flags&65536)===0&&(pn.flags|=256),Ym(pn,$,Y,S,l),Uu(Wi(ee,Y));break e}}S=ee=Wi(ee,Y),vn!==4&&(vn=2),Xs===null?Xs=[S]:Xs.push(S),S=$;do{switch(S.tag){case 3:S.flags|=65536,l&=-l,S.lanes|=l;var pe=Vm(S,ee,l);ym(S,pe);break e;case 1:Y=ee;var ae=S.type,fe=S.stateNode;if((S.flags&128)===0&&(typeof ae.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(ja===null||!ja.has(fe)))){S.flags|=65536,l&=-l,S.lanes|=l;var Fe=Wm(S,Y,l);ym(S,Fe);break e}}S=S.return}while(S!==null)}Cg(f)}catch(nt){l=nt,hn===f&&f!==null&&(hn=f=f.return);continue}break}while(!0)}function Ng(){var a=Ll.current;return Ll.current=Al,a===null?Al:a}function Ad(){(vn===0||vn===3||vn===2)&&(vn=4),Nn===null||(ui&268435455)===0&&(Pl&268435455)===0||Fa(Nn,In)}function ql(a,l){var f=Ot;Ot|=2;var y=Ng();(Nn!==a||In!==l)&&(ca=null,pi(a,l));do try{eE();break}catch(E){kg(a,E)}while(!0);if(qu(),Ot=f,Ll.current=y,hn!==null)throw Error(n(261));return Nn=null,In=0,vn}function eE(){for(;hn!==null;)Sg(hn)}function tE(){for(;hn!==null&&!$r();)Sg(hn)}function Sg(a){var l=Dg(a.alternate,a,ur);a.memoizedProps=a.pendingProps,l===null?Cg(a):hn=l,Ed.current=null}function Cg(a){var l=a;do{var f=l.alternate;if(a=l.return,(l.flags&32768)===0){if(f=G1(f,l,ur),f!==null){hn=f;return}}else{if(f=K1(f,l),f!==null){f.flags&=32767,hn=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{vn=6,hn=null;return}}if(l=l.sibling,l!==null){hn=l;return}hn=l=a}while(l!==null);vn===0&&(vn=5)}function fi(a,l,f){var y=jt,E=xr.transition;try{xr.transition=null,jt=1,nE(a,l,f,y)}finally{xr.transition=E,jt=y}return null}function nE(a,l,f,y){do Zi();while(Oa!==null);if((Ot&6)!==0)throw Error(n(327));f=a.finishedWork;var E=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var S=f.lanes|f.childLanes;if(mr(a,S),a===Nn&&(hn=Nn=null,In=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||$l||($l=!0,Rg(_r,function(){return Zi(),null})),S=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||S){S=xr.transition,xr.transition=null;var $=jt;jt=1;var Y=Ot;Ot|=4,Ed.current=null,Z1(a,f),gg(f,a),E1(Au),tl=!!Ru,Au=Ru=null,a.current=f,X1(f),Gn(),Ot=Y,jt=$,xr.transition=S}else a.current=f;if($l&&($l=!1,Oa=a,Bl=E),S=a.pendingLanes,S===0&&(ja=null),qt(f.stateNode),Qn(a,Rt()),l!==null)for(y=a.onRecoverableError,f=0;f<l.length;f++)E=l[f],y(E.value,{componentStack:E.stack,digest:E.digest});if(zl)throw zl=!1,a=Sd,Sd=null,a;return(Bl&1)!==0&&a.tag!==0&&Zi(),S=a.pendingLanes,(S&1)!==0?a===Cd?Qs++:(Qs=0,Cd=a):Qs=0,Da(),null}function Zi(){if(Oa!==null){var a=ft(Bl),l=xr.transition,f=jt;try{if(xr.transition=null,jt=16>a?16:a,Oa===null)var y=!1;else{if(a=Oa,Oa=null,Bl=0,(Ot&6)!==0)throw Error(n(331));var E=Ot;for(Ot|=4,Xe=a.current;Xe!==null;){var S=Xe,$=S.child;if((Xe.flags&16)!==0){var Y=S.deletions;if(Y!==null){for(var ee=0;ee<Y.length;ee++){var he=Y[ee];for(Xe=he;Xe!==null;){var Se=Xe;switch(Se.tag){case 0:case 11:case 15:Ys(8,Se,S)}var De=Se.child;if(De!==null)De.return=Se,Xe=De;else for(;Xe!==null;){Se=Xe;var ke=Se.sibling,qe=Se.return;if(dg(Se),Se===he){Xe=null;break}if(ke!==null){ke.return=qe,Xe=ke;break}Xe=qe}}}var Qe=S.alternate;if(Qe!==null){var et=Qe.child;if(et!==null){Qe.child=null;do{var pn=et.sibling;et.sibling=null,et=pn}while(et!==null)}}Xe=S}}if((S.subtreeFlags&2064)!==0&&$!==null)$.return=S,Xe=$;else e:for(;Xe!==null;){if(S=Xe,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Ys(9,S,S.return)}var pe=S.sibling;if(pe!==null){pe.return=S.return,Xe=pe;break e}Xe=S.return}}var ae=a.current;for(Xe=ae;Xe!==null;){$=Xe;var fe=$.child;if(($.subtreeFlags&2064)!==0&&fe!==null)fe.return=$,Xe=fe;else e:for($=ae;Xe!==null;){if(Y=Xe,(Y.flags&2048)!==0)try{switch(Y.tag){case 0:case 11:case 15:Fl(9,Y)}}catch(nt){ln(Y,Y.return,nt)}if(Y===$){Xe=null;break e}var Fe=Y.sibling;if(Fe!==null){Fe.return=Y.return,Xe=Fe;break e}Xe=Y.return}}if(Ot=E,Da(),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(Je,a)}catch{}y=!0}return y}finally{jt=f,xr.transition=l}}return!1}function _g(a,l,f){l=Wi(f,l),l=Vm(a,l,1),a=Aa(a,l,1),l=qn(),a!==null&&(Ea(a,1,l),Qn(a,l))}function ln(a,l,f){if(a.tag===3)_g(a,a,f);else for(;l!==null;){if(l.tag===3){_g(l,a,f);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ja===null||!ja.has(y))){a=Wi(f,a),a=Wm(l,a,1),l=Aa(l,a,1),a=qn(),l!==null&&(Ea(l,1,a),Qn(l,a));break}}l=l.return}}function rE(a,l,f){var y=a.pingCache;y!==null&&y.delete(l),l=qn(),a.pingedLanes|=a.suspendedLanes&f,Nn===a&&(In&f)===f&&(vn===4||vn===3&&(In&130023424)===In&&500>Rt()-Nd?pi(a,0):kd|=f),Qn(a,l)}function Tg(a,l){l===0&&((a.mode&1)===0?l=1:(l=Ja,Ja<<=1,(Ja&130023424)===0&&(Ja=4194304)));var f=qn();a=sa(a,l),a!==null&&(Ea(a,l,f),Qn(a,f))}function aE(a){var l=a.memoizedState,f=0;l!==null&&(f=l.retryLane),Tg(a,f)}function iE(a,l){var f=0;switch(a.tag){case 13:var y=a.stateNode,E=a.memoizedState;E!==null&&(f=E.retryLane);break;case 19:y=a.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(l),Tg(a,f)}var Dg;Dg=function(a,l,f){if(a!==null)if(a.memoizedProps!==l.pendingProps||Kn.current)Zn=!0;else{if((a.lanes&f)===0&&(l.flags&128)===0)return Zn=!1,W1(a,l,f);Zn=(a.flags&131072)!==0}else Zn=!1,en&&(l.flags&1048576)!==0&&lm(l,vl,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Ol(a,l),a=l.pendingProps;var E=Pi(l,jn.current);qi(l,f),E=td(null,l,y,a,E,f);var S=nd();return l.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Yn(y)?(S=!0,gl(l)):S=!1,l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ku(l),E.updater=Il,l.stateNode=E,E._reactInternals=l,ld(l,y,a,f),l=pd(null,l,y,!0,S,f)):(l.tag=0,en&&S&&Pu(l),Hn(null,l,E,f),l=l.child),l;case 16:y=l.elementType;e:{switch(Ol(a,l),a=l.pendingProps,E=y._init,y=E(y._payload),l.type=y,E=l.tag=oE(y),a=Rr(y,a),E){case 0:l=dd(null,l,y,a,f);break e;case 1:l=tg(null,l,y,a,f);break e;case 11:l=Zm(null,l,y,a,f);break e;case 14:l=Xm(null,l,y,Rr(y.type,a),f);break e}throw Error(n(306,y,""))}return l;case 0:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Rr(y,E),dd(a,l,y,E,f);case 1:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Rr(y,E),tg(a,l,y,E,f);case 3:e:{if(ng(l),a===null)throw Error(n(387));y=l.pendingProps,S=l.memoizedState,E=S.element,bm(a,l),Sl(l,y,null,f);var $=l.memoizedState;if(y=$.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){E=Wi(Error(n(423)),l),l=rg(a,l,y,f,E);break e}else if(y!==E){E=Wi(Error(n(424)),l),l=rg(a,l,y,f,E);break e}else for(cr=Ca(l.stateNode.containerInfo.firstChild),lr=l,en=!0,Dr=null,f=mm(l,null,y,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Bi(),y===E){l=la(a,l,f);break e}Hn(a,l,y,f)}l=l.child}return l;case 5:return xm(l),a===null&&Bu(l),y=l.type,E=l.pendingProps,S=a!==null?a.memoizedProps:null,$=E.children,Iu(y,E)?$=null:S!==null&&Iu(y,S)&&(l.flags|=32),eg(a,l),Hn(a,l,$,f),l.child;case 6:return a===null&&Bu(l),null;case 13:return ag(a,l,f);case 4:return Yu(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=Ui(l,null,y,f):Hn(a,l,y,f),l.child;case 11:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Rr(y,E),Zm(a,l,y,E,f);case 7:return Hn(a,l,l.pendingProps,f),l.child;case 8:return Hn(a,l,l.pendingProps.children,f),l.child;case 12:return Hn(a,l,l.pendingProps.children,f),l.child;case 10:e:{if(y=l.type._context,E=l.pendingProps,S=l.memoizedProps,$=E.value,Wt(El,y._currentValue),y._currentValue=$,S!==null)if(Tr(S.value,$)){if(S.children===E.children&&!Kn.current){l=la(a,l,f);break e}}else for(S=l.child,S!==null&&(S.return=l);S!==null;){var Y=S.dependencies;if(Y!==null){$=S.child;for(var ee=Y.firstContext;ee!==null;){if(ee.context===y){if(S.tag===1){ee=oa(-1,f&-f),ee.tag=2;var he=S.updateQueue;if(he!==null){he=he.shared;var Se=he.pending;Se===null?ee.next=ee:(ee.next=Se.next,Se.next=ee),he.pending=ee}}S.lanes|=f,ee=S.alternate,ee!==null&&(ee.lanes|=f),Wu(S.return,f,l),Y.lanes|=f;break}ee=ee.next}}else if(S.tag===10)$=S.type===l.type?null:S.child;else if(S.tag===18){if($=S.return,$===null)throw Error(n(341));$.lanes|=f,Y=$.alternate,Y!==null&&(Y.lanes|=f),Wu($,f,l),$=S.sibling}else $=S.child;if($!==null)$.return=S;else for($=S;$!==null;){if($===l){$=null;break}if(S=$.sibling,S!==null){S.return=$.return,$=S;break}$=$.return}S=$}Hn(a,l,E.children,f),l=l.child}return l;case 9:return E=l.type,y=l.pendingProps.children,qi(l,f),E=yr(E),y=y(E),l.flags|=1,Hn(a,l,y,f),l.child;case 14:return y=l.type,E=Rr(y,l.pendingProps),E=Rr(y.type,E),Xm(a,l,y,E,f);case 15:return Qm(a,l,l.type,l.pendingProps,f);case 17:return y=l.type,E=l.pendingProps,E=l.elementType===y?E:Rr(y,E),Ol(a,l),l.tag=1,Yn(y)?(a=!0,gl(l)):a=!1,qi(l,f),Hm(l,y,E),ld(l,y,E,f),pd(null,l,y,!0,a,f);case 19:return sg(a,l,f);case 22:return Jm(a,l,f)}throw Error(n(156,l.tag))};function Rg(a,l){return Ht(a,l)}function sE(a,l,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(a,l,f,y){return new sE(a,l,f,y)}function Id(a){return a=a.prototype,!(!a||!a.isReactComponent)}function oE(a){if(typeof a=="function")return Id(a)?1:0;if(a!=null){if(a=a.$$typeof,a===F)return 11;if(a===H)return 14}return 2}function La(a,l){var f=a.alternate;return f===null?(f=wr(a.tag,l,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=l,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,l=a.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Vl(a,l,f,y,E,S){var $=2;if(y=a,typeof a=="function")Id(a)&&($=1);else if(typeof a=="string")$=5;else e:switch(a){case O:return hi(f.children,E,S,l);case B:$=8,E|=8;break;case z:return a=wr(12,f,l,E|2),a.elementType=z,a.lanes=S,a;case G:return a=wr(13,f,l,E),a.elementType=G,a.lanes=S,a;case _:return a=wr(19,f,l,E),a.elementType=_,a.lanes=S,a;case ne:return Wl(f,E,S,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case j:$=10;break e;case q:$=9;break e;case F:$=11;break e;case H:$=14;break e;case se:$=16,y=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return l=wr($,f,l,E),l.elementType=a,l.type=y,l.lanes=S,l}function hi(a,l,f,y){return a=wr(7,a,y,l),a.lanes=f,a}function Wl(a,l,f,y){return a=wr(22,a,y,l),a.elementType=ne,a.lanes=f,a.stateNode={isHidden:!1},a}function jd(a,l,f){return a=wr(6,a,null,l),a.lanes=f,a}function Od(a,l,f){return l=wr(4,a.children!==null?a.children:[],a.key,l),l.lanes=f,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function lE(a,l,f,y,E){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wa(0),this.expirationTimes=wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wa(0),this.identifierPrefix=y,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Md(a,l,f,y,E,S,$,Y,ee){return a=new lE(a,l,f,Y,ee),l===1?(l=1,S===!0&&(l|=8)):l=0,S=wr(3,null,null,l),a.current=S,S.stateNode=a,S.memoizedState={element:y,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(S),a}function cE(a,l,f){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:y==null?null:""+y,children:a,containerInfo:l,implementation:f}}function Ag(a){if(!a)return Ta;a=a._reactInternals;e:{if(Ge(a)!==a||a.tag!==1)throw Error(n(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Yn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(a.tag===1){var f=a.type;if(Yn(f))return im(a,f,l)}return l}function Ig(a,l,f,y,E,S,$,Y,ee){return a=Md(f,y,!0,a,E,S,$,Y,ee),a.context=Ag(null),f=a.current,y=qn(),E=Ma(f),S=oa(y,E),S.callback=l??null,Aa(f,S,E),a.current.lanes=E,Ea(a,E,y),Qn(a,y),a}function Gl(a,l,f,y){var E=l.current,S=qn(),$=Ma(E);return f=Ag(f),l.context===null?l.context=f:l.pendingContext=f,l=oa(S,$),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=Aa(E,l,$),a!==null&&(jr(a,E,$,S),Nl(a,E,$)),$}function Kl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function jg(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<l?f:l}}function Fd(a,l){jg(a,l),(a=a.alternate)&&jg(a,l)}function uE(){return null}var Og=typeof reportError=="function"?reportError:function(a){console.error(a)};function Ld(a){this._internalRoot=a}Yl.prototype.render=Ld.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));Gl(a,l,null,null)},Yl.prototype.unmount=Ld.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;di(function(){Gl(null,a,null,null)}),l[na]=null}};function Yl(a){this._internalRoot=a}Yl.prototype.unstable_scheduleHydration=function(a){if(a){var l=ti();a={blockedOn:null,target:a,priority:l};for(var f=0;f<En.length&&l!==0&&l<En[f].priority;f++);En.splice(f,0,a),f===0&&xh(a)}};function Pd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Zl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Mg(){}function dE(a,l,f,y,E){if(E){if(typeof y=="function"){var S=y;y=function(){var he=Kl($);S.call(he)}}var $=Ig(l,y,a,0,null,!1,!1,"",Mg);return a._reactRootContainer=$,a[na]=$.current,Fs(a.nodeType===8?a.parentNode:a),di(),$}for(;E=a.lastChild;)a.removeChild(E);if(typeof y=="function"){var Y=y;y=function(){var he=Kl(ee);Y.call(he)}}var ee=Md(a,0,!1,null,null,!1,!1,"",Mg);return a._reactRootContainer=ee,a[na]=ee.current,Fs(a.nodeType===8?a.parentNode:a),di(function(){Gl(l,ee,f,y)}),ee}function Xl(a,l,f,y,E){var S=f._reactRootContainer;if(S){var $=S;if(typeof E=="function"){var Y=E;E=function(){var ee=Kl($);Y.call(ee)}}Gl(l,$,a,E)}else $=dE(f,l,a,E,y);return Kl($)}Ns=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var f=xa(l.pendingLanes);f!==0&&(ks(l,f|1),Qn(l,Rt()),(Ot&6)===0&&(Yi=Rt()+500,Da()))}break;case 13:di(function(){var y=sa(a,1);if(y!==null){var E=qn();jr(y,a,1,E)}}),Fd(a,1)}},dn=function(a){if(a.tag===13){var l=sa(a,134217728);if(l!==null){var f=qn();jr(l,a,134217728,f)}Fd(a,134217728)}},$t=function(a){if(a.tag===13){var l=Ma(a),f=sa(a,l);if(f!==null){var y=qn();jr(f,a,l,y)}Fd(a,l)}},ti=function(){return jt},Br=function(a,l){var f=jt;try{return jt=a,l()}finally{jt=f}},sr=function(a,l,f){switch(l){case"input":if(K(a,f),l=f.name,f.type==="radio"&&l!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<f.length;l++){var y=f[l];if(y!==a&&y.form===a.form){var E=hl(y);if(!E)throw Error(n(90));at(y),K(y,E)}}}break;case"textarea":Oe(a,f);break;case"select":l=f.value,l!=null&&we(a,!!f.multiple,l,!1)}},Re=Dd,Ke=di;var pE={usingClientEntryPoint:!1,Events:[zs,Fi,hl,X,ye,Dd]},Js={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fE={bundleType:Js.bundleType,version:Js.version,rendererPackageName:Js.rendererPackageName,rendererConfig:Js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Lt(a),a===null?null:a.stateNode},findFiberByHostInstance:Js.findFiberByHostInstance||uE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Je=Ql.inject(fE),mt=Ql}catch{}}return Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pE,Jn.createPortal=function(a,l){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pd(l))throw Error(n(200));return cE(a,l,null,f)},Jn.createRoot=function(a,l){if(!Pd(a))throw Error(n(299));var f=!1,y="",E=Og;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError)),l=Md(a,1,!1,null,null,f,!1,y,E),a[na]=l.current,Fs(a.nodeType===8?a.parentNode:a),new Ld(l)},Jn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Lt(l),a=a===null?null:a.stateNode,a},Jn.flushSync=function(a){return di(a)},Jn.hydrate=function(a,l,f){if(!Zl(l))throw Error(n(200));return Xl(null,a,l,!0,f)},Jn.hydrateRoot=function(a,l,f){if(!Pd(a))throw Error(n(405));var y=f!=null&&f.hydratedSources||null,E=!1,S="",$=Og;if(f!=null&&(f.unstable_strictMode===!0&&(E=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onRecoverableError!==void 0&&($=f.onRecoverableError)),l=Ig(l,null,a,1,f??null,E,!1,S,$),a[na]=l.current,Fs(a),y)for(a=0;a<y.length;a++)f=y[a],E=f._getVersion,E=E(f._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[f,E]:l.mutableSourceEagerHydrationData.push(f,E);return new Yl(l)},Jn.render=function(a,l,f){if(!Zl(l))throw Error(n(200));return Xl(null,a,l,!1,f)},Jn.unmountComponentAtNode=function(a){if(!Zl(a))throw Error(n(40));return a._reactRootContainer?(di(function(){Xl(null,null,a,!1,function(){a._reactRootContainer=null,a[na]=null})}),!0):!1},Jn.unstable_batchedUpdates=Dd,Jn.unstable_renderSubtreeIntoContainer=function(a,l,f,y){if(!Zl(f))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Xl(a,l,f,!1,y)},Jn.version="18.3.1-next-f1338f8080-20240426",Jn}var Hg;function Ev(){if(Hg)return Bd.exports;Hg=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Bd.exports=kE(),Bd.exports}var qg;function NE(){if(qg)return ec;qg=1;var e=Ev();return ec.createRoot=e.createRoot,ec.hydrateRoot=e.hydrateRoot,ec}var SE=NE(),nr=Ev();const CE=fs(nr),_E=wv({__proto__:null,default:CE},[nr]);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tn.apply(this,arguments)}var gn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(gn||(gn={}));const Vg="popstate";function TE(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:c}=r.location;return ko("",{pathname:s,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wi(i)}return RE(t,n,null,e)}function Ct(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DE(){return Math.random().toString(36).substr(2,8)}function Wg(e,t){return{usr:e.state,key:e.key,idx:t}}function ko(e,t,n,r){return n===void 0&&(n=null),tn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Za(t):t,{state:n,key:t&&t.key||r||DE()})}function wi(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Za(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function RE(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,c=gn.Pop,d=null,p=h();p==null&&(p=0,o.replaceState(tn({},o.state,{idx:p}),""));function h(){return(o.state||{idx:null}).idx}function m(){c=gn.Pop;let w=h(),k=w==null?null:w-p;p=w,d&&d({action:c,location:v.location,delta:k})}function g(w,k){c=gn.Push;let C=ko(v.location,w,k);p=h()+1;let T=Wg(C,p),D=v.createHref(C);try{o.pushState(T,"",D)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(D)}s&&d&&d({action:c,location:v.location,delta:1})}function b(w,k){c=gn.Replace;let C=ko(v.location,w,k);p=h();let T=Wg(C,p),D=v.createHref(C);o.replaceState(T,"",D),s&&d&&d({action:c,location:v.location,delta:0})}function x(w){let k=i.location.origin!=="null"?i.location.origin:i.location.href,C=typeof w=="string"?w:wi(w);return C=C.replace(/ $/,"%20"),Ct(k,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,k)}let v={get action(){return c},get location(){return e(i,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Vg,m),d=w,()=>{i.removeEventListener(Vg,m),d=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let k=x(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:b,go(w){return o.go(w)}};return v}var Bt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Bt||(Bt={}));const AE=new Set(["lazy","caseSensitive","path","id","index","children"]);function IE(e){return e.index===!0}function kc(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,s)=>{let o=[...n,String(s)],c=typeof i.id=="string"?i.id:o.join("-");if(Ct(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ct(!r[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),IE(i)){let d=tn({},i,t(i),{id:c});return r[c]=d,d}else{let d=tn({},i,t(i),{id:c,children:void 0});return r[c]=d,i.children&&(d.children=kc(i.children,t,o,r)),d}})}function gi(e,t,n){return n===void 0&&(n="/"),yc(e,t,n,!1)}function yc(e,t,n,r){let i=typeof t=="string"?Za(t):t,s=Ka(i.pathname||"/",n);if(s==null)return null;let o=kv(e);OE(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let p=VE(s);c=HE(o[d],p,r)}return c}function jE(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function kv(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,c)=>{let d={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};d.relativePath.startsWith("/")&&(Ct(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=ha([r,d.relativePath]),h=n.concat(d);s.children&&s.children.length>0&&(Ct(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),kv(s.children,t,h,p)),!(s.path==null&&!s.index)&&t.push({path:p,score:BE(p,s.index),routesMeta:h})};return e.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))i(s,o);else for(let d of Nv(s.path))i(s,o,d)}),t}function Nv(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Nv(r.join("/")),c=[];return c.push(...o.map(d=>d===""?s:[s,d].join("/"))),i&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function OE(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:UE(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ME=/^:[\w-]+$/,FE=3,LE=2,PE=1,zE=10,$E=-2,Gg=e=>e==="*";function BE(e,t){let n=e.split("/"),r=n.length;return n.some(Gg)&&(r+=$E),t&&(r+=LE),n.filter(i=>!Gg(i)).reduce((i,s)=>i+(ME.test(s)?FE:s===""?PE:zE),r)}function UE(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function HE(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],p=c===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",m=Kg({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},h),g=d.route;if(!m&&p&&n&&!r[r.length-1].route.index&&(m=Kg({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ha([s,m.pathname]),pathnameBase:YE(ha([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=ha([s,m.pathnameBase]))}return o}function Kg(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qE(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,h,m)=>{let{paramName:g,isOptional:b}=h;if(g==="*"){let v=c[m]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const x=c[m];return b&&!x?p[g]=void 0:p[g]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:s,pathnameBase:o,pattern:e}}function qE(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function VE(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const WE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GE=e=>WE.test(e);function KE(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Za(e):e,s;if(n)if(GE(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),xi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Yg(n.substring(1),"/"):s=Yg(n,t)}else s=t;return{pathname:s,search:ZE(r),hash:XE(i)}}function Yg(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qd(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sv(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function yf(e,t){let n=Sv(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vf(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Za(e):(i=tn({},e),Ct(!i.pathname||!i.pathname.includes("?"),qd("?","pathname","search",i)),Ct(!i.pathname||!i.pathname.includes("#"),qd("#","pathname","hash",i)),Ct(!i.search||!i.search.includes("#"),qd("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,c;if(o==null)c=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}c=m>=0?t[m]:"/"}let d=KE(i,c),p=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||h)&&(d.pathname+="/"),d}const ha=e=>e.join("/").replace(/\/\/+/g,"/"),YE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,XE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Nc{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function No(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Cv=["post","put","patch","delete"],QE=new Set(Cv),JE=["get",...Cv],ek=new Set(JE),tk=new Set([301,302,303,307,308]),nk=new Set([307,308]),Vd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rk={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ts={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},xf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ak=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),_v="remix-router-transitions";function ik(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Ct(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let V=e.detectErrorBoundary;i=Q=>({hasErrorBoundary:V(Q)})}else i=ak;let s={},o=kc(e.routes,i,void 0,s),c,d=e.basename||"/",p=e.dataStrategy||ck,h=e.patchRoutesOnNavigation,m=tn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),g=null,b=new Set,x=null,v=null,w=null,k=e.hydrationData!=null,C=gi(o,e.history.location,d),T=!1,D=null;if(C==null&&!h){let V=tr(404,{pathname:e.history.location.pathname}),{matches:Q,route:ue}=sb(o);C=Q,D={[ue.id]:V}}C&&!e.hydrationData&&Ke(C,o,e.history.location.pathname).active&&(C=null);let I;if(C)if(C.some(V=>V.route.lazy))I=!1;else if(!C.some(V=>V.route.loader))I=!0;else if(m.v7_partialHydration){let V=e.hydrationData?e.hydrationData.loaderData:null,Q=e.hydrationData?e.hydrationData.errors:null;if(Q){let ue=C.findIndex(be=>Q[be.route.id]!==void 0);I=C.slice(0,ue+1).every(be=>!Pp(be.route,V,Q))}else I=C.every(ue=>!Pp(ue.route,V,Q))}else I=e.hydrationData!=null;else if(I=!1,C=[],m.v7_partialHydration){let V=Ke(null,o,e.history.location.pathname);V.active&&V.matches&&(T=!0,C=V.matches)}let L,O={historyAction:e.history.action,location:e.history.location,matches:C,initialized:I,navigation:Vd,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||D,fetchers:new Map,blockers:new Map},B=gn.Pop,z=!1,j,q=!1,F=new Map,G=null,_=!1,H=!1,se=[],ne=new Set,Z=new Map,J=0,P=-1,M=new Map,U=new Set,A=new Map,te=new Map,ce=new Set,Ee=new Map,Ue=new Map,Te;function $e(){if(g=e.history.listen(V=>{let{action:Q,location:ue,delta:be}=V;if(Te){Te(),Te=void 0;return}xi(Ue.size===0||be!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ie=sr({currentLocation:O.location,nextLocation:ue,historyAction:Q});if(Ie&&be!=null){let Be=new Promise(tt=>{Te=tt});e.history.go(be*-1),$n(Ie,{state:"blocked",location:ue,proceed(){$n(Ie,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),Be.then(()=>e.history.go(be))},reset(){let tt=new Map(O.blockers);tt.set(Ie,ts),at({blockers:tt})}});return}return oe(Q,ue)}),n){kk(t,F);let V=()=>Nk(t,F);t.addEventListener("pagehide",V),G=()=>t.removeEventListener("pagehide",V)}return O.initialized||oe(gn.Pop,O.location,{initialHydration:!0}),L}function le(){g&&g(),G&&G(),b.clear(),j&&j.abort(),O.fetchers.forEach((V,Q)=>ht(Q)),O.blockers.forEach((V,Q)=>Kt(Q))}function rt(V){return b.add(V),()=>b.delete(V)}function at(V,Q){Q===void 0&&(Q={}),O=tn({},O,V);let ue=[],be=[];m.v7_fetcherPersist&&O.fetchers.forEach((Ie,Be)=>{Ie.state==="idle"&&(ce.has(Be)?be.push(Be):ue.push(Be))}),ce.forEach(Ie=>{!O.fetchers.has(Ie)&&!Z.has(Ie)&&be.push(Ie)}),[...b].forEach(Ie=>Ie(O,{deletedFetchers:be,viewTransitionOpts:Q.viewTransitionOpts,flushSync:Q.flushSync===!0})),m.v7_fetcherPersist?(ue.forEach(Ie=>O.fetchers.delete(Ie)),be.forEach(Ie=>ht(Ie))):be.forEach(Ie=>ce.delete(Ie))}function wt(V,Q,ue){var be,Ie;let{flushSync:Be}=ue===void 0?{}:ue,tt=O.actionData!=null&&O.navigation.formMethod!=null&&Or(O.navigation.formMethod)&&O.navigation.state==="loading"&&((be=V.state)==null?void 0:be._isRedirect)!==!0,He;Q.actionData?Object.keys(Q.actionData).length>0?He=Q.actionData:He=null:tt?He=O.actionData:He=null;let Ye=Q.loaderData?ab(O.loaderData,Q.loaderData,Q.matches||[],Q.errors):O.loaderData,We=O.blockers;We.size>0&&(We=new Map(We),We.forEach((xt,Jt)=>We.set(Jt,ts)));let Ge=z===!0||O.navigation.formMethod!=null&&Or(O.navigation.formMethod)&&((Ie=V.state)==null?void 0:Ie._isRedirect)!==!0;c&&(o=c,c=void 0),_||B===gn.Pop||(B===gn.Push?e.history.push(V,V.state):B===gn.Replace&&e.history.replace(V,V.state));let pt;if(B===gn.Pop){let xt=F.get(O.location.pathname);xt&&xt.has(V.pathname)?pt={currentLocation:O.location,nextLocation:V}:F.has(V.pathname)&&(pt={currentLocation:V,nextLocation:O.location})}else if(q){let xt=F.get(O.location.pathname);xt?xt.add(V.pathname):(xt=new Set([V.pathname]),F.set(O.location.pathname,xt)),pt={currentLocation:O.location,nextLocation:V}}at(tn({},Q,{actionData:He,loaderData:Ye,historyAction:B,location:V,initialized:!0,navigation:Vd,revalidation:"idle",restoreScrollPosition:Re(V,Q.matches||O.matches),preventScrollReset:Ge,blockers:We}),{viewTransitionOpts:pt,flushSync:Be===!0}),B=gn.Pop,z=!1,q=!1,_=!1,H=!1,se=[]}async function R(V,Q){if(typeof V=="number"){e.history.go(V);return}let ue=Lp(O.location,O.matches,d,m.v7_prependBasename,V,m.v7_relativeSplatPath,Q==null?void 0:Q.fromRouteId,Q==null?void 0:Q.relative),{path:be,submission:Ie,error:Be}=Zg(m.v7_normalizeFormMethod,!1,ue,Q),tt=O.location,He=ko(O.location,be,Q&&Q.state);He=tn({},He,e.history.encodeLocation(He));let Ye=Q&&Q.replace!=null?Q.replace:void 0,We=gn.Push;Ye===!0?We=gn.Replace:Ye===!1||Ie!=null&&Or(Ie.formMethod)&&Ie.formAction===O.location.pathname+O.location.search&&(We=gn.Replace);let Ge=Q&&"preventScrollReset"in Q?Q.preventScrollReset===!0:void 0,pt=(Q&&Q.flushSync)===!0,xt=sr({currentLocation:tt,nextLocation:He,historyAction:We});if(xt){$n(xt,{state:"blocked",location:He,proceed(){$n(xt,{state:"proceeding",proceed:void 0,reset:void 0,location:He}),R(V,Q)},reset(){let Jt=new Map(O.blockers);Jt.set(xt,ts),at({blockers:Jt})}});return}return await oe(We,He,{submission:Ie,pendingError:Be,preventScrollReset:Ge,replace:Q&&Q.replace,enableViewTransition:Q&&Q.viewTransition,flushSync:pt})}function ge(){if(xe(),at({revalidation:"loading"}),O.navigation.state!=="submitting"){if(O.navigation.state==="idle"){oe(O.historyAction,O.location,{startUninterruptedRevalidation:!0});return}oe(B||O.historyAction,O.navigation.location,{overrideNavigation:O.navigation,enableViewTransition:q===!0})}}async function oe(V,Q,ue){j&&j.abort(),j=null,B=V,_=(ue&&ue.startUninterruptedRevalidation)===!0,ye(O.location,O.matches),z=(ue&&ue.preventScrollReset)===!0,q=(ue&&ue.enableViewTransition)===!0;let be=c||o,Ie=ue&&ue.overrideNavigation,Be=ue!=null&&ue.initialHydration&&O.matches&&O.matches.length>0&&!T?O.matches:gi(be,Q,d),tt=(ue&&ue.flushSync)===!0;if(Be&&O.initialized&&!H&&mk(O.location,Q)&&!(ue&&ue.submission&&Or(ue.submission.formMethod))){wt(Q,{matches:Be},{flushSync:tt});return}let He=Ke(Be,be,Q.pathname);if(He.active&&He.matches&&(Be=He.matches),!Be){let{error:Lt,notFoundMatches:St,route:Ht}=Tn(Q.pathname);wt(Q,{matches:St,loaderData:{},errors:{[Ht.id]:Lt}},{flushSync:tt});return}j=new AbortController;let Ye=Xi(e.history,Q,j.signal,ue&&ue.submission),We;if(ue&&ue.pendingError)We=[bi(Be).route.id,{type:Bt.error,error:ue.pendingError}];else if(ue&&ue.submission&&Or(ue.submission.formMethod)){let Lt=await K(Ye,Q,ue.submission,Be,He.active,{replace:ue.replace,flushSync:tt});if(Lt.shortCircuited)return;if(Lt.pendingActionResult){let[St,Ht]=Lt.pendingActionResult;if(pr(Ht)&&No(Ht.error)&&Ht.error.status===404){j=null,wt(Q,{matches:Lt.matches,loaderData:{},errors:{[St]:Ht.error}});return}}Be=Lt.matches||Be,We=Lt.pendingActionResult,Ie=Wd(Q,ue.submission),tt=!1,He.active=!1,Ye=Xi(e.history,Ye.url,Ye.signal)}let{shortCircuited:Ge,matches:pt,loaderData:xt,errors:Jt}=await W(Ye,Q,Be,He.active,Ie,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,tt,We);Ge||(j=null,wt(Q,tn({matches:pt||Be},ib(We),{loaderData:xt,errors:Jt})))}async function K(V,Q,ue,be,Ie,Be){Be===void 0&&(Be={}),xe();let tt=wk(Q,ue);if(at({navigation:tt},{flushSync:Be.flushSync===!0}),Ie){let We=await bt(be,Q.pathname,V.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){let Ge=bi(We.partialMatches).route.id;return{matches:We.partialMatches,pendingActionResult:[Ge,{type:Bt.error,error:We.error}]}}else if(We.matches)be=We.matches;else{let{notFoundMatches:Ge,error:pt,route:xt}=Tn(Q.pathname);return{matches:Ge,pendingActionResult:[xt.id,{type:Bt.error,error:pt}]}}}let He,Ye=po(be,Q);if(!Ye.route.action&&!Ye.route.lazy)He={type:Bt.error,error:tr(405,{method:V.method,pathname:Q.pathname,routeId:Ye.route.id})};else if(He=(await _e("action",O,V,[Ye],be,null))[Ye.route.id],V.signal.aborted)return{shortCircuited:!0};if(yi(He)){let We;return Be&&Be.replace!=null?We=Be.replace:We=tb(He.response.headers.get("Location"),new URL(V.url),d)===O.location.pathname+O.location.search,await Oe(V,He,!0,{submission:ue,replace:We}),{shortCircuited:!0}}if(Va(He))throw tr(400,{type:"defer-action"});if(pr(He)){let We=bi(be,Ye.route.id);return(Be&&Be.replace)!==!0&&(B=gn.Push),{matches:be,pendingActionResult:[We.route.id,He]}}return{matches:be,pendingActionResult:[Ye.route.id,He]}}async function W(V,Q,ue,be,Ie,Be,tt,He,Ye,We,Ge){let pt=Ie||Wd(Q,Be),xt=Be||tt||lb(pt),Jt=!_&&(!m.v7_partialHydration||!Ye);if(be){if(Jt){let Je=re(Ge);at(tn({navigation:pt},Je!==void 0?{actionData:Je}:{}),{flushSync:We})}let Me=await bt(ue,Q.pathname,V.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){let Je=bi(Me.partialMatches).route.id;return{matches:Me.partialMatches,loaderData:{},errors:{[Je]:Me.error}}}else if(Me.matches)ue=Me.matches;else{let{error:Je,notFoundMatches:mt,route:qt}=Tn(Q.pathname);return{matches:mt,loaderData:{},errors:{[qt.id]:Je}}}}let Lt=c||o,[St,Ht]=Qg(e.history,O,ue,xt,Q,m.v7_partialHydration&&Ye===!0,m.v7_skipActionErrorRevalidation,H,se,ne,ce,A,U,Lt,d,Ge);if(Nt(Me=>!(ue&&ue.some(Je=>Je.route.id===Me))||St&&St.some(Je=>Je.route.id===Me)),P=++J,St.length===0&&Ht.length===0){let Me=fn();return wt(Q,tn({matches:ue,loaderData:{},errors:Ge&&pr(Ge[1])?{[Ge[0]]:Ge[1].error}:null},ib(Ge),Me?{fetchers:new Map(O.fetchers)}:{}),{flushSync:We}),{shortCircuited:!0}}if(Jt){let Me={};if(!be){Me.navigation=pt;let Je=re(Ge);Je!==void 0&&(Me.actionData=Je)}Ht.length>0&&(Me.fetchers=ve(Ht)),at(Me,{flushSync:We})}Ht.forEach(Me=>{ut(Me.key),Me.controller&&Z.set(Me.key,Me.controller)});let wn=()=>Ht.forEach(Me=>ut(Me.key));j&&j.signal.addEventListener("abort",wn);let{loaderResults:$r,fetcherResults:Gn}=await ie(O,ue,St,Ht,V);if(V.signal.aborted)return{shortCircuited:!0};j&&j.signal.removeEventListener("abort",wn),Ht.forEach(Me=>Z.delete(Me.key));let Rt=tc($r);if(Rt)return await Oe(V,Rt.result,!0,{replace:He}),{shortCircuited:!0};if(Rt=tc(Gn),Rt)return U.add(Rt.key),await Oe(V,Rt.result,!0,{replace:He}),{shortCircuited:!0};let{loaderData:Qa,errors:Cr}=rb(O,ue,$r,Ge,Ht,Gn,Ee);Ee.forEach((Me,Je)=>{Me.subscribe(mt=>{(mt||Me.done)&&Ee.delete(Je)})}),m.v7_partialHydration&&Ye&&O.errors&&(Cr=tn({},O.errors,Cr));let Bn=fn(),_r=_t(P),Ae=Bn||_r||Ht.length>0;return tn({matches:ue,loaderData:Qa,errors:Cr},Ae?{fetchers:new Map(O.fetchers)}:{})}function re(V){if(V&&!pr(V[1]))return{[V[0]]:V[1].data};if(O.actionData)return Object.keys(O.actionData).length===0?null:O.actionData}function ve(V){return V.forEach(Q=>{let ue=O.fetchers.get(Q.key),be=to(void 0,ue?ue.data:void 0);O.fetchers.set(Q.key,be)}),new Map(O.fetchers)}function we(V,Q,ue,be){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ut(V);let Ie=(be&&be.flushSync)===!0,Be=c||o,tt=Lp(O.location,O.matches,d,m.v7_prependBasename,ue,m.v7_relativeSplatPath,Q,be==null?void 0:be.relative),He=gi(Be,tt,d),Ye=Ke(He,Be,tt);if(Ye.active&&Ye.matches&&(He=Ye.matches),!He){Ve(V,Q,tr(404,{pathname:tt}),{flushSync:Ie});return}let{path:We,submission:Ge,error:pt}=Zg(m.v7_normalizeFormMethod,!0,tt,be);if(pt){Ve(V,Q,pt,{flushSync:Ie});return}let xt=po(He,We),Jt=(be&&be.preventScrollReset)===!0;if(Ge&&Or(Ge.formMethod)){de(V,Q,We,xt,He,Ye.active,Ie,Jt,Ge);return}A.set(V,{routeId:Q,path:We}),Ce(V,Q,We,xt,He,Ye.active,Ie,Jt,Ge)}async function de(V,Q,ue,be,Ie,Be,tt,He,Ye){xe(),A.delete(V);function We(gt){if(!gt.route.action&&!gt.route.lazy){let Dn=tr(405,{method:Ye.formMethod,pathname:ue,routeId:Q});return Ve(V,Q,Dn,{flushSync:tt}),!0}return!1}if(!Be&&We(be))return;let Ge=O.fetchers.get(V);Ne(V,Ek(Ye,Ge),{flushSync:tt});let pt=new AbortController,xt=Xi(e.history,ue,pt.signal,Ye);if(Be){let gt=await bt(Ie,new URL(xt.url).pathname,xt.signal,V);if(gt.type==="aborted")return;if(gt.type==="error"){Ve(V,Q,gt.error,{flushSync:tt});return}else if(gt.matches){if(Ie=gt.matches,be=po(Ie,ue),We(be))return}else{Ve(V,Q,tr(404,{pathname:ue}),{flushSync:tt});return}}Z.set(V,pt);let Jt=J,St=(await _e("action",O,xt,[be],Ie,V))[be.route.id];if(xt.signal.aborted){Z.get(V)===pt&&Z.delete(V);return}if(m.v7_fetcherPersist&&ce.has(V)){if(yi(St)||pr(St)){Ne(V,Ua(void 0));return}}else{if(yi(St))if(Z.delete(V),P>Jt){Ne(V,Ua(void 0));return}else return U.add(V),Ne(V,to(Ye)),Oe(xt,St,!1,{fetcherSubmission:Ye,preventScrollReset:He});if(pr(St)){Ve(V,Q,St.error);return}}if(Va(St))throw tr(400,{type:"defer-action"});let Ht=O.navigation.location||O.location,wn=Xi(e.history,Ht,pt.signal),$r=c||o,Gn=O.navigation.state!=="idle"?gi($r,O.navigation.location,d):O.matches;Ct(Gn,"Didn't find any matches after fetcher action");let Rt=++J;M.set(V,Rt);let Qa=to(Ye,St.data);O.fetchers.set(V,Qa);let[Cr,Bn]=Qg(e.history,O,Gn,Ye,Ht,!1,m.v7_skipActionErrorRevalidation,H,se,ne,ce,A,U,$r,d,[be.route.id,St]);Bn.filter(gt=>gt.key!==V).forEach(gt=>{let Dn=gt.key,ta=O.fetchers.get(Dn),Rn=to(void 0,ta?ta.data:void 0);O.fetchers.set(Dn,Rn),ut(Dn),gt.controller&&Z.set(Dn,gt.controller)}),at({fetchers:new Map(O.fetchers)});let _r=()=>Bn.forEach(gt=>ut(gt.key));pt.signal.addEventListener("abort",_r);let{loaderResults:Ae,fetcherResults:Me}=await ie(O,Gn,Cr,Bn,wn);if(pt.signal.aborted)return;pt.signal.removeEventListener("abort",_r),M.delete(V),Z.delete(V),Bn.forEach(gt=>Z.delete(gt.key));let Je=tc(Ae);if(Je)return Oe(wn,Je.result,!1,{preventScrollReset:He});if(Je=tc(Me),Je)return U.add(Je.key),Oe(wn,Je.result,!1,{preventScrollReset:He});let{loaderData:mt,errors:qt}=rb(O,Gn,Ae,void 0,Bn,Me,Ee);if(O.fetchers.has(V)){let gt=Ua(St.data);O.fetchers.set(V,gt)}_t(Rt),O.navigation.state==="loading"&&Rt>P?(Ct(B,"Expected pending action"),j&&j.abort(),wt(O.navigation.location,{matches:Gn,loaderData:mt,errors:qt,fetchers:new Map(O.fetchers)})):(at({errors:qt,loaderData:ab(O.loaderData,mt,Gn,qt),fetchers:new Map(O.fetchers)}),H=!1)}async function Ce(V,Q,ue,be,Ie,Be,tt,He,Ye){let We=O.fetchers.get(V);Ne(V,to(Ye,We?We.data:void 0),{flushSync:tt});let Ge=new AbortController,pt=Xi(e.history,ue,Ge.signal);if(Be){let St=await bt(Ie,new URL(pt.url).pathname,pt.signal,V);if(St.type==="aborted")return;if(St.type==="error"){Ve(V,Q,St.error,{flushSync:tt});return}else if(St.matches)Ie=St.matches,be=po(Ie,ue);else{Ve(V,Q,tr(404,{pathname:ue}),{flushSync:tt});return}}Z.set(V,Ge);let xt=J,Lt=(await _e("loader",O,pt,[be],Ie,V))[be.route.id];if(Va(Lt)&&(Lt=await wf(Lt,pt.signal,!0)||Lt),Z.get(V)===Ge&&Z.delete(V),!pt.signal.aborted){if(ce.has(V)){Ne(V,Ua(void 0));return}if(yi(Lt))if(P>xt){Ne(V,Ua(void 0));return}else{U.add(V),await Oe(pt,Lt,!1,{preventScrollReset:He});return}if(pr(Lt)){Ve(V,Q,Lt.error);return}Ct(!Va(Lt),"Unhandled fetcher deferred data"),Ne(V,Ua(Lt.data))}}async function Oe(V,Q,ue,be){let{submission:Ie,fetcherSubmission:Be,preventScrollReset:tt,replace:He}=be===void 0?{}:be;Q.response.headers.has("X-Remix-Revalidate")&&(H=!0);let Ye=Q.response.headers.get("Location");Ct(Ye,"Expected a Location header on the redirect Response"),Ye=tb(Ye,new URL(V.url),d);let We=ko(O.location,Ye,{_isRedirect:!0});if(n){let St=!1;if(Q.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(xf.test(Ye)){const Ht=e.history.createURL(Ye);St=Ht.origin!==t.location.origin||Ka(Ht.pathname,d)==null}if(St){He?t.location.replace(Ye):t.location.assign(Ye);return}}j=null;let Ge=He===!0||Q.response.headers.has("X-Remix-Replace")?gn.Replace:gn.Push,{formMethod:pt,formAction:xt,formEncType:Jt}=O.navigation;!Ie&&!Be&&pt&&xt&&Jt&&(Ie=lb(O.navigation));let Lt=Ie||Be;if(nk.has(Q.response.status)&&Lt&&Or(Lt.formMethod))await oe(Ge,We,{submission:tn({},Lt,{formAction:Ye}),preventScrollReset:tt||z,enableViewTransition:ue?q:void 0});else{let St=Wd(We,Ie);await oe(Ge,We,{overrideNavigation:St,fetcherSubmission:Be,preventScrollReset:tt||z,enableViewTransition:ue?q:void 0})}}async function _e(V,Q,ue,be,Ie,Be){let tt,He={};try{tt=await uk(p,V,Q,ue,be,Ie,Be,s,i)}catch(Ye){return be.forEach(We=>{He[We.route.id]={type:Bt.error,error:Ye}}),He}for(let[Ye,We]of Object.entries(tt))if(gk(We)){let Ge=We.result;He[Ye]={type:Bt.redirect,response:fk(Ge,ue,Ye,Ie,d,m.v7_relativeSplatPath)}}else He[Ye]=await pk(We);return He}async function ie(V,Q,ue,be,Ie){let Be=V.matches,tt=_e("loader",V,Ie,ue,Q,null),He=Promise.all(be.map(async Ge=>{if(Ge.matches&&Ge.match&&Ge.controller){let xt=(await _e("loader",V,Xi(e.history,Ge.path,Ge.controller.signal),[Ge.match],Ge.matches,Ge.key))[Ge.match.route.id];return{[Ge.key]:xt}}else return Promise.resolve({[Ge.key]:{type:Bt.error,error:tr(404,{pathname:Ge.path})}})})),Ye=await tt,We=(await He).reduce((Ge,pt)=>Object.assign(Ge,pt),{});return await Promise.all([vk(Q,Ye,Ie.signal,Be,V.loaderData),xk(Q,We,be)]),{loaderResults:Ye,fetcherResults:We}}function xe(){H=!0,se.push(...Nt()),A.forEach((V,Q)=>{Z.has(Q)&&ne.add(Q),ut(Q)})}function Ne(V,Q,ue){ue===void 0&&(ue={}),O.fetchers.set(V,Q),at({fetchers:new Map(O.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Ve(V,Q,ue,be){be===void 0&&(be={});let Ie=bi(O.matches,Q);ht(V),at({errors:{[Ie.route.id]:ue},fetchers:new Map(O.fetchers)},{flushSync:(be&&be.flushSync)===!0})}function ct(V){return te.set(V,(te.get(V)||0)+1),ce.has(V)&&ce.delete(V),O.fetchers.get(V)||rk}function ht(V){let Q=O.fetchers.get(V);Z.has(V)&&!(Q&&Q.state==="loading"&&M.has(V))&&ut(V),A.delete(V),M.delete(V),U.delete(V),m.v7_fetcherPersist&&ce.delete(V),ne.delete(V),O.fetchers.delete(V)}function sn(V){let Q=(te.get(V)||0)-1;Q<=0?(te.delete(V),ce.add(V),m.v7_fetcherPersist||ht(V)):te.set(V,Q),at({fetchers:new Map(O.fetchers)})}function ut(V){let Q=Z.get(V);Q&&(Q.abort(),Z.delete(V))}function un(V){for(let Q of V){let ue=ct(Q),be=Ua(ue.data);O.fetchers.set(Q,be)}}function fn(){let V=[],Q=!1;for(let ue of U){let be=O.fetchers.get(ue);Ct(be,"Expected fetcher: "+ue),be.state==="loading"&&(U.delete(ue),V.push(ue),Q=!0)}return un(V),Q}function _t(V){let Q=[];for(let[ue,be]of M)if(be<V){let Ie=O.fetchers.get(ue);Ct(Ie,"Expected fetcher: "+ue),Ie.state==="loading"&&(ut(ue),M.delete(ue),Q.push(ue))}return un(Q),Q.length>0}function bn(V,Q){let ue=O.blockers.get(V)||ts;return Ue.get(V)!==Q&&Ue.set(V,Q),ue}function Kt(V){O.blockers.delete(V),Ue.delete(V)}function $n(V,Q){let ue=O.blockers.get(V)||ts;Ct(ue.state==="unblocked"&&Q.state==="blocked"||ue.state==="blocked"&&Q.state==="blocked"||ue.state==="blocked"&&Q.state==="proceeding"||ue.state==="blocked"&&Q.state==="unblocked"||ue.state==="proceeding"&&Q.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+Q.state);let be=new Map(O.blockers);be.set(V,Q),at({blockers:be})}function sr(V){let{currentLocation:Q,nextLocation:ue,historyAction:be}=V;if(Ue.size===0)return;Ue.size>1&&xi(!1,"A router only supports one blocker at a time");let Ie=Array.from(Ue.entries()),[Be,tt]=Ie[Ie.length-1],He=O.blockers.get(Be);if(!(He&&He.state==="proceeding")&&tt({currentLocation:Q,nextLocation:ue,historyAction:be}))return Be}function Tn(V){let Q=tr(404,{pathname:V}),ue=c||o,{matches:be,route:Ie}=sb(ue);return Nt(),{notFoundMatches:be,route:Ie,error:Q}}function Nt(V){let Q=[];return Ee.forEach((ue,be)=>{(!V||V(be))&&(ue.cancel(),Q.push(be),Ee.delete(be))}),Q}function Pt(V,Q,ue){if(x=V,w=Q,v=ue||null,!k&&O.navigation===Vd){k=!0;let be=Re(O.location,O.matches);be!=null&&at({restoreScrollPosition:be})}return()=>{x=null,w=null,v=null}}function X(V,Q){return v&&v(V,Q.map(be=>jE(be,O.loaderData)))||V.key}function ye(V,Q){if(x&&w){let ue=X(V,Q);x[ue]=w()}}function Re(V,Q){if(x){let ue=X(V,Q),be=x[ue];if(typeof be=="number")return be}return null}function Ke(V,Q,ue){if(h)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:yc(Q,ue,d,!0)}}else return{active:!0,matches:yc(Q,ue,d,!0)||[]};return{active:!1,matches:null}}async function bt(V,Q,ue,be){if(!h)return{type:"success",matches:V};let Ie=V;for(;;){let Be=c==null,tt=c||o,He=s;try{await h({signal:ue,path:Q,matches:Ie,fetcherKey:be,patch:(Ge,pt)=>{ue.aborted||eb(Ge,pt,tt,He,i)}})}catch(Ge){return{type:"error",error:Ge,partialMatches:Ie}}finally{Be&&!ue.aborted&&(o=[...o])}if(ue.aborted)return{type:"aborted"};let Ye=gi(tt,Q,d);if(Ye)return{type:"success",matches:Ye};let We=yc(tt,Q,d,!0);if(!We||Ie.length===We.length&&Ie.every((Ge,pt)=>Ge.route.id===We[pt].route.id))return{type:"success",matches:null};Ie=We}}function It(V){s={},c=kc(V,i,void 0,s)}function Le(V,Q){let ue=c==null;eb(V,Q,c||o,s,i),ue&&(o=[...o],at({}))}return L={get basename(){return d},get future(){return m},get state(){return O},get routes(){return o},get window(){return t},initialize:$e,subscribe:rt,enableScrollRestoration:Pt,navigate:R,fetch:we,revalidate:ge,createHref:V=>e.history.createHref(V),encodeLocation:V=>e.history.encodeLocation(V),getFetcher:ct,deleteFetcher:sn,dispose:le,getBlocker:bn,deleteBlocker:Kt,patchRoutes:Le,_internalFetchControllers:Z,_internalActiveDeferreds:Ee,_internalSetRoutes:It},L}function sk(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Lp(e,t,n,r,i,s,o,c){let d,p;if(o){d=[];for(let m of t)if(d.push(m),m.route.id===o){p=m;break}}else d=t,p=t[t.length-1];let h=vf(i||".",yf(d,s),Ka(e.pathname,n)||e.pathname,c==="path");if(i==null&&(h.search=e.search,h.hash=e.hash),(i==null||i===""||i===".")&&p){let m=Ef(h.search);if(p.route.index&&!m)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!p.route.index&&m){let g=new URLSearchParams(h.search),b=g.getAll("index");g.delete("index"),b.filter(v=>v).forEach(v=>g.append("index",v));let x=g.toString();h.search=x?"?"+x:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:ha([n,h.pathname])),wi(h)}function Zg(e,t,n,r){if(!r||!sk(r))return{path:n};if(r.formMethod&&!yk(r.formMethod))return{path:n,error:tr(405,{method:r.formMethod})};let i=()=>({path:n,error:tr(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),c=Rv(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Or(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((b,x)=>{let[v,w]=x;return""+b+v+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Or(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:c,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}Ct(typeof FormData=="function","FormData is not available in this environment");let d,p;if(r.formData)d=zp(r.formData),p=r.formData;else if(r.body instanceof FormData)d=zp(r.body),p=r.body;else if(r.body instanceof URLSearchParams)d=r.body,p=nb(d);else if(r.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(r.body),p=nb(d)}catch{return i()}let h={formMethod:o,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Or(h.formMethod))return{path:n,submission:h};let m=Za(n);return t&&m.search&&Ef(m.search)&&d.append("index",""),m.search="?"+d,{path:wi(m),submission:h}}function Xg(e,t,n){n===void 0&&(n=!1);let r=e.findIndex(i=>i.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function Qg(e,t,n,r,i,s,o,c,d,p,h,m,g,b,x,v){let w=v?pr(v[1])?v[1].error:v[1].data:void 0,k=e.createURL(t.location),C=e.createURL(i),T=n;s&&t.errors?T=Xg(n,Object.keys(t.errors)[0],!0):v&&pr(v[1])&&(T=Xg(n,v[0]));let D=v?v[1].statusCode:void 0,I=o&&D&&D>=400,L=T.filter((B,z)=>{let{route:j}=B;if(j.lazy)return!0;if(j.loader==null)return!1;if(s)return Pp(j,t.loaderData,t.errors);if(ok(t.loaderData,t.matches[z],B)||d.some(G=>G===B.route.id))return!0;let q=t.matches[z],F=B;return Jg(B,tn({currentUrl:k,currentParams:q.params,nextUrl:C,nextParams:F.params},r,{actionResult:w,actionStatus:D,defaultShouldRevalidate:I?!1:c||k.pathname+k.search===C.pathname+C.search||k.search!==C.search||Tv(q,F)}))}),O=[];return m.forEach((B,z)=>{if(s||!n.some(_=>_.route.id===B.routeId)||h.has(z))return;let j=gi(b,B.path,x);if(!j){O.push({key:z,routeId:B.routeId,path:B.path,matches:null,match:null,controller:null});return}let q=t.fetchers.get(z),F=po(j,B.path),G=!1;g.has(z)?G=!1:p.has(z)?(p.delete(z),G=!0):q&&q.state!=="idle"&&q.data===void 0?G=c:G=Jg(F,tn({currentUrl:k,currentParams:t.matches[t.matches.length-1].params,nextUrl:C,nextParams:n[n.length-1].params},r,{actionResult:w,actionStatus:D,defaultShouldRevalidate:I?!1:c})),G&&O.push({key:z,routeId:B.routeId,path:B.path,matches:j,match:F,controller:new AbortController})}),[L,O]}function Pp(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,i=n!=null&&n[e.id]!==void 0;return!r&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!i}function ok(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function Tv(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Jg(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function eb(e,t,n,r,i){var s;let o;if(e){let p=r[e];Ct(p,"No route found to patch children into: routeId = "+e),p.children||(p.children=[]),o=p.children}else o=n;let c=t.filter(p=>!o.some(h=>Dv(p,h))),d=kc(c,i,[e||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...d)}function Dv(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var i;return(i=t.children)==null?void 0:i.some(s=>Dv(n,s))}):!1}async function lk(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];Ct(i,"No route found in manifest");let s={};for(let o in r){let d=i[o]!==void 0&&o!=="hasErrorBoundary";xi(!d,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!d&&!AE.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,tn({},t(i),{lazy:void 0}))}async function ck(e){let{matches:t}=e,n=t.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function uk(e,t,n,r,i,s,o,c,d,p){let h=s.map(b=>b.route.lazy?lk(b.route,d,c):void 0),m=s.map((b,x)=>{let v=h[x],w=i.some(C=>C.route.id===b.route.id);return tn({},b,{shouldLoad:w,resolve:async C=>(C&&r.method==="GET"&&(b.route.lazy||b.route.loader)&&(w=!0),w?dk(t,r,b,v,C,p):Promise.resolve({type:Bt.data,result:void 0}))})}),g=await e({matches:m,request:r,params:s[0].params,fetcherKey:o,context:p});try{await Promise.all(h)}catch{}return g}async function dk(e,t,n,r,i,s){let o,c,d=p=>{let h,m=new Promise((x,v)=>h=v);c=()=>h(),t.signal.addEventListener("abort",c);let g=x=>typeof p!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):p({request:t,params:n.params,context:s},...x!==void 0?[x]:[]),b=(async()=>{try{return{type:"data",result:await(i?i(v=>g(v)):g())}}catch(x){return{type:"error",result:x}}})();return Promise.race([b,m])};try{let p=n.route[e];if(r)if(p){let h,[m]=await Promise.all([d(p).catch(g=>{h=g}),r]);if(h!==void 0)throw h;o=m}else if(await r,p=n.route[e],p)o=await d(p);else if(e==="action"){let h=new URL(t.url),m=h.pathname+h.search;throw tr(405,{method:t.method,pathname:m,routeId:n.route.id})}else return{type:Bt.data,result:void 0};else if(p)o=await d(p);else{let h=new URL(t.url),m=h.pathname+h.search;throw tr(404,{pathname:m})}Ct(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(p){return{type:Bt.error,result:p}}finally{c&&t.signal.removeEventListener("abort",c)}return o}async function pk(e){let{result:t,type:n}=e;if(Av(t)){let m;try{let g=t.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?t.body==null?m=null:m=await t.json():m=await t.text()}catch(g){return{type:Bt.error,error:g}}return n===Bt.error?{type:Bt.error,error:new Nc(t.status,t.statusText,m),statusCode:t.status,headers:t.headers}:{type:Bt.data,data:m,statusCode:t.status,headers:t.headers}}if(n===Bt.error){if(ob(t)){var r,i;if(t.data instanceof Error){var s,o;return{type:Bt.error,error:t.data,statusCode:(s=t.init)==null?void 0:s.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}}return{type:Bt.error,error:new Nc(((r=t.init)==null?void 0:r.status)||500,void 0,t.data),statusCode:No(t)?t.status:void 0,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}}return{type:Bt.error,error:t,statusCode:No(t)?t.status:void 0}}if(bk(t)){var c,d;return{type:Bt.deferred,deferredData:t,statusCode:(c=t.init)==null?void 0:c.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}if(ob(t)){var p,h;return{type:Bt.data,data:t.data,statusCode:(p=t.init)==null?void 0:p.status,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}}return{type:Bt.data,data:t}}function fk(e,t,n,r,i,s){let o=e.headers.get("Location");if(Ct(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!xf.test(o)){let c=r.slice(0,r.findIndex(d=>d.route.id===n)+1);o=Lp(new URL(t.url),c,i,!0,o,s),e.headers.set("Location",o)}return e}function tb(e,t,n){if(xf.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),s=Ka(i.pathname,n)!=null;if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function Xi(e,t,n,r){let i=e.createURL(Rv(t)).toString(),s={signal:n};if(r&&Or(r.formMethod)){let{formMethod:o,formEncType:c}=r;s.method=o.toUpperCase(),c==="application/json"?(s.headers=new Headers({"Content-Type":c}),s.body=JSON.stringify(r.json)):c==="text/plain"?s.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?s.body=zp(r.formData):s.body=r.formData}return new Request(i,s)}function zp(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function nb(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function hk(e,t,n,r,i){let s={},o=null,c,d=!1,p={},h=n&&pr(n[1])?n[1].error:void 0;return e.forEach(m=>{if(!(m.route.id in t))return;let g=m.route.id,b=t[g];if(Ct(!yi(b),"Cannot handle redirect results in processLoaderData"),pr(b)){let x=b.error;h!==void 0&&(x=h,h=void 0),o=o||{};{let v=bi(e,g);o[v.route.id]==null&&(o[v.route.id]=x)}s[g]=void 0,d||(d=!0,c=No(b.error)?b.error.status:500),b.headers&&(p[g]=b.headers)}else Va(b)?(r.set(g,b.deferredData),s[g]=b.deferredData.data,b.statusCode!=null&&b.statusCode!==200&&!d&&(c=b.statusCode),b.headers&&(p[g]=b.headers)):(s[g]=b.data,b.statusCode&&b.statusCode!==200&&!d&&(c=b.statusCode),b.headers&&(p[g]=b.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:c||200,loaderHeaders:p}}function rb(e,t,n,r,i,s,o){let{loaderData:c,errors:d}=hk(t,n,r,o);return i.forEach(p=>{let{key:h,match:m,controller:g}=p,b=s[h];if(Ct(b,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(pr(b)){let x=bi(e.matches,m==null?void 0:m.route.id);d&&d[x.route.id]||(d=tn({},d,{[x.route.id]:b.error})),e.fetchers.delete(h)}else if(yi(b))Ct(!1,"Unhandled fetcher revalidation redirect");else if(Va(b))Ct(!1,"Unhandled fetcher deferred data");else{let x=Ua(b.data);e.fetchers.set(h,x)}}),{loaderData:c,errors:d}}function ab(e,t,n,r){let i=tn({},t);for(let s of n){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(i[o]=t[o]):e[o]!==void 0&&s.route.loader&&(i[o]=e[o]),r&&r.hasOwnProperty(o))break}return i}function ib(e){return e?pr(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function bi(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function sb(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function tr(e,t){let{pathname:n,routeId:r,method:i,type:s,message:o}=t===void 0?{}:t,c="Unknown Server Error",d="Unknown @remix-run/router error";return e===400?(c="Bad Request",i&&n&&r?d="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?d="defer() is not supported in actions":s==="invalid-body"&&(d="Unable to encode submission body")):e===403?(c="Forbidden",d='Route "'+r+'" does not match URL "'+n+'"'):e===404?(c="Not Found",d='No route matches URL "'+n+'"'):e===405&&(c="Method Not Allowed",i&&n&&r?d="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(d='Invalid request method "'+i.toUpperCase()+'"')),new Nc(e||500,c,new Error(d),!0)}function tc(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,i]=t[n];if(yi(i))return{key:r,result:i}}}function Rv(e){let t=typeof e=="string"?Za(e):e;return wi(tn({},t,{hash:""}))}function mk(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function gk(e){return Av(e.result)&&tk.has(e.result.status)}function Va(e){return e.type===Bt.deferred}function pr(e){return e.type===Bt.error}function yi(e){return(e&&e.type)===Bt.redirect}function ob(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function bk(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Av(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function yk(e){return ek.has(e.toLowerCase())}function Or(e){return QE.has(e.toLowerCase())}async function vk(e,t,n,r,i){let s=Object.entries(t);for(let o=0;o<s.length;o++){let[c,d]=s[o],p=e.find(g=>(g==null?void 0:g.route.id)===c);if(!p)continue;let h=r.find(g=>g.route.id===p.route.id),m=h!=null&&!Tv(h,p)&&(i&&i[p.route.id])!==void 0;Va(d)&&m&&await wf(d,n,!1).then(g=>{g&&(t[c]=g)})}}async function xk(e,t,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],c=t[i];e.find(p=>(p==null?void 0:p.route.id)===s)&&Va(c)&&(Ct(o,"Expected an AbortController for revalidating fetcher deferred result"),await wf(c,o.signal,!0).then(p=>{p&&(t[i]=p)}))}}async function wf(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Bt.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Bt.error,error:i}}return{type:Bt.data,data:e.deferredData.data}}}function Ef(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function po(e,t){let n=typeof t=="string"?Za(t).search:t.search;if(e[e.length-1].route.index&&Ef(n||""))return e[e.length-1];let r=Sv(e);return r[r.length-1]}function lb(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:o}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Wd(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wk(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function to(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ek(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ua(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function kk(e,t){try{let n=e.sessionStorage.getItem(_v);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function Nk(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(_v,JSON.stringify(n))}catch(r){xi(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ds(){return ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ds.apply(this,arguments)}const Hc=N.createContext(null),Iv=N.createContext(null),Ni=N.createContext(null),kf=N.createContext(null),ya=N.createContext({outlet:null,matches:[],isDataRoute:!1}),jv=N.createContext(null);function Sk(e,t){let{relative:n}=t===void 0?{}:t;Lo()||Ct(!1);let{basename:r,navigator:i}=N.useContext(Ni),{hash:s,pathname:o,search:c}=Mv(e,{relative:n}),d=o;return r!=="/"&&(d=o==="/"?r:ha([r,o])),i.createHref({pathname:d,search:c,hash:s})}function Lo(){return N.useContext(kf)!=null}function Qr(){return Lo()||Ct(!1),N.useContext(kf).location}function Ov(e){N.useContext(Ni).static||N.useLayoutEffect(e)}function hs(){let{isDataRoute:e}=N.useContext(ya);return e?$k():Ck()}function Ck(){Lo()||Ct(!1);let e=N.useContext(Hc),{basename:t,future:n,navigator:r}=N.useContext(Ni),{matches:i}=N.useContext(ya),{pathname:s}=Qr(),o=JSON.stringify(yf(i,n.v7_relativeSplatPath)),c=N.useRef(!1);return Ov(()=>{c.current=!0}),N.useCallback(function(p,h){if(h===void 0&&(h={}),!c.current)return;if(typeof p=="number"){r.go(p);return}let m=vf(p,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ha([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,s,e])}const _k=N.createContext(null);function Tk(e){let t=N.useContext(ya).outlet;return t&&N.createElement(_k.Provider,{value:e},t)}function Dk(){let{matches:e}=N.useContext(ya),t=e[e.length-1];return t?t.params:{}}function Mv(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(Ni),{matches:i}=N.useContext(ya),{pathname:s}=Qr(),o=JSON.stringify(yf(i,r.v7_relativeSplatPath));return N.useMemo(()=>vf(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Rk(e,t,n,r){Lo()||Ct(!1);let{navigator:i}=N.useContext(Ni),{matches:s}=N.useContext(ya),o=s[s.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let p=Qr(),h;h=p;let m=h.pathname||"/",g=m;if(d!=="/"){let v=d.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=gi(e,{pathname:g});return Mk(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:ha([d,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:ha([d,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r)}function Ak(){let e=Lk(),t=No(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const Ik=N.createElement(Ak,null);class jk extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(ya.Provider,{value:this.props.routeContext},N.createElement(jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ok(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(Hc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(ya.Provider,{value:t},r)}function Mk(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(i=n)==null?void 0:i.errors;if(c!=null){let h=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);h>=0||Ct(!1),o=o.slice(0,Math.min(o.length,h+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=h),m.route.id){let{loaderData:g,errors:b}=n,x=m.route.loader&&g[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||x){d=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let b,x=!1,v=null,w=null;n&&(b=c&&m.route.id?c[m.route.id]:void 0,v=m.route.errorElement||Ik,d&&(p<0&&g===0?(Bk("route-fallback"),x=!0,w=null):p===g&&(x=!0,w=m.route.hydrateFallbackElement||null)));let k=t.concat(o.slice(0,g+1)),C=()=>{let T;return b?T=v:x?T=w:m.route.Component?T=N.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=h,N.createElement(Ok,{match:m,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?N.createElement(jk,{location:n.location,revalidation:n.revalidation,component:v,error:b,children:C(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):C()},null)}var Nf=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(Nf||{}),Fv=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(Fv||{});function Lv(e){let t=N.useContext(Hc);return t||Ct(!1),t}function Pv(e){let t=N.useContext(Iv);return t||Ct(!1),t}function Fk(e){let t=N.useContext(ya);return t||Ct(!1),t}function zv(e){let t=Fk(),n=t.matches[t.matches.length-1];return n.route.id||Ct(!1),n.route.id}function Lk(){var e;let t=N.useContext(jv),n=Pv(Fv.UseRouteError),r=zv();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}let Pk=0;function zk(e){let{router:t,basename:n}=Lv(Nf.UseBlocker),r=Pv(),[i,s]=N.useState(""),o=N.useCallback(c=>{if(typeof e!="function")return!!e;if(n==="/")return e(c);let{currentLocation:d,nextLocation:p,historyAction:h}=c;return e({currentLocation:ds({},d,{pathname:Ka(d.pathname,n)||d.pathname}),nextLocation:ds({},p,{pathname:Ka(p.pathname,n)||p.pathname}),historyAction:h})},[n,e]);return N.useEffect(()=>{let c=String(++Pk);return s(c),()=>t.deleteBlocker(c)},[t]),N.useEffect(()=>{i!==""&&t.getBlocker(i,o)},[t,i,o]),i&&r.blockers.has(i)?r.blockers.get(i):ts}function $k(){let{router:e}=Lv(Nf.UseNavigateStable),t=zv(),n=N.useRef(!1);return Ov(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ds({fromRouteId:t},s)))},[e,t])}const cb={};function Bk(e,t,n){cb[e]||(cb[e]=!0)}function Uk(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Hk(e){return Tk(e.context)}function qk(e){let{basename:t="/",children:n=null,location:r,navigationType:i=gn.Pop,navigator:s,static:o=!1,future:c}=e;Lo()&&Ct(!1);let d=t.replace(/^\/*/,"/"),p=N.useMemo(()=>({basename:d,navigator:s,static:o,future:ds({v7_relativeSplatPath:!1},c)}),[d,c,s,o]);typeof r=="string"&&(r=Za(r));let{pathname:h="/",search:m="",hash:g="",state:b=null,key:x="default"}=r,v=N.useMemo(()=>{let w=Ka(h,d);return w==null?null:{location:{pathname:w,search:m,hash:g,state:b,key:x},navigationType:i}},[d,h,m,g,b,x,i]);return v==null?null:N.createElement(Ni.Provider,{value:p},N.createElement(kf.Provider,{children:n,value:v}))}new Promise(()=>{});function Vk(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:N.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:N.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:N.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},So.apply(this,arguments)}function Wk(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Gk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Kk(e,t){return e.button===0&&(!t||t==="_self")&&!Gk(e)}function $p(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Yk(e,t){let n=$p(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Zk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xk="6";try{window.__reactRouterVersion=Xk}catch{}function Qk(e,t){return ik({basename:void 0,future:So({},void 0,{v7_prependBasename:!0}),history:TE({window:void 0}),hydrationData:Jk(),routes:e,mapRouteProperties:Vk,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function Jk(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=So({},t,{errors:eN(t.errors)})),t}function eN(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new Nc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const tN=N.createContext({isTransitioning:!1}),nN=N.createContext(new Map),rN="startTransition",ub=xE[rN],aN="flushSync",db=_E[aN];function iN(e){ub?ub(e):e()}function no(e){db?db(e):e()}class sN{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function oN(e){let{fallbackElement:t,router:n,future:r}=e,[i,s]=N.useState(n.state),[o,c]=N.useState(),[d,p]=N.useState({isTransitioning:!1}),[h,m]=N.useState(),[g,b]=N.useState(),[x,v]=N.useState(),w=N.useRef(new Map),{v7_startTransition:k}=r||{},C=N.useCallback(B=>{k?iN(B):B()},[k]),T=N.useCallback((B,z)=>{let{deletedFetchers:j,flushSync:q,viewTransitionOpts:F}=z;B.fetchers.forEach((_,H)=>{_.data!==void 0&&w.current.set(H,_.data)}),j.forEach(_=>w.current.delete(_));let G=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!F||G){q?no(()=>s(B)):C(()=>s(B));return}if(q){no(()=>{g&&(h&&h.resolve(),g.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let _=n.window.document.startViewTransition(()=>{no(()=>s(B))});_.finished.finally(()=>{no(()=>{m(void 0),b(void 0),c(void 0),p({isTransitioning:!1})})}),no(()=>b(_));return}g?(h&&h.resolve(),g.skipTransition(),v({state:B,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(c(B),p({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[n.window,g,h,w,C]);N.useLayoutEffect(()=>n.subscribe(T),[n,T]),N.useEffect(()=>{d.isTransitioning&&!d.flushSync&&m(new sN)},[d]),N.useEffect(()=>{if(h&&o&&n.window){let B=o,z=h.promise,j=n.window.document.startViewTransition(async()=>{C(()=>s(B)),await z});j.finished.finally(()=>{m(void 0),b(void 0),c(void 0),p({isTransitioning:!1})}),b(j)}},[C,o,h,n.window]),N.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,g,i.location,o]),N.useEffect(()=>{!d.isTransitioning&&x&&(c(x.state),p({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),v(void 0))},[d.isTransitioning,x]),N.useEffect(()=>{},[]);let D=N.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:B=>n.navigate(B),push:(B,z,j)=>n.navigate(B,{state:z,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(B,z,j)=>n.navigate(B,{replace:!0,state:z,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[n]),I=n.basename||"/",L=N.useMemo(()=>({router:n,navigator:D,static:!1,basename:I}),[n,D,I]),O=N.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return N.useEffect(()=>Uk(r,n.future),[r,n.future]),N.createElement(N.Fragment,null,N.createElement(Hc.Provider,{value:L},N.createElement(Iv.Provider,{value:i},N.createElement(nN.Provider,{value:w.current},N.createElement(tN.Provider,{value:d},N.createElement(qk,{basename:I,location:i.location,navigationType:i.historyAction,navigator:D,future:O},i.initialized||n.future.v7_partialHydration?N.createElement(lN,{routes:n.routes,future:n.future,state:i}):t))))),null)}const lN=N.memo(cN);function cN(e){let{routes:t,future:n,state:r}=e;return Rk(t,void 0,r,n)}const uN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ln=N.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:c,target:d,to:p,preventScrollReset:h,viewTransition:m}=t,g=Wk(t,Zk),{basename:b}=N.useContext(Ni),x,v=!1;if(typeof p=="string"&&dN.test(p)&&(x=p,uN))try{let T=new URL(window.location.href),D=p.startsWith("//")?new URL(T.protocol+p):new URL(p),I=Ka(D.pathname,b);D.origin===T.origin&&I!=null?p=I+D.search+D.hash:v=!0}catch{}let w=Sk(p,{relative:i}),k=pN(p,{replace:o,state:c,target:d,preventScrollReset:h,relative:i,viewTransition:m});function C(T){r&&r(T),T.defaultPrevented||k(T)}return N.createElement("a",So({},g,{href:x||w,onClick:v||s?r:C,ref:n,target:d}))});var pb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pb||(pb={}));var fb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fb||(fb={}));function pN(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:c}=t===void 0?{}:t,d=hs(),p=Qr(),h=Mv(e,{relative:o});return N.useCallback(m=>{if(Kk(m,n)){m.preventDefault();let g=r!==void 0?r:wi(p)===wi(h);d(e,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:c})}},[p,d,h,r,i,n,e,s,o,c])}function fN(e){let t=N.useRef($p(e)),n=N.useRef(!1),r=Qr(),i=N.useMemo(()=>Yk(r.search,n.current?null:t.current),[r.search]),s=hs(),o=N.useCallback((c,d)=>{const p=$p(typeof c=="function"?c(i):c);n.current=!0,s("?"+p,d)},[s,i]);return[i,o]}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$v=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...c},d)=>N.createElement("svg",{ref:d,...mN,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:$v("lucide",i),...c},[...o.map(([p,h])=>N.createElement(p,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(e,t)=>{const n=N.forwardRef(({className:r,...i},s)=>N.createElement(gN,{ref:s,iconNode:t,className:$v(`lucide-${hN(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Pe("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Pe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Pe("ChevronsDownUp",[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Pe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Pe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Pe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=Pe("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Pe("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Pe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Pe("Combine",[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Pe("Dice6",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Pe("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=Pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=Pe("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Pe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Pe("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Pe("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Pe("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=Pe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Pe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Pe("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Pe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=Pe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=Pe("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Pe("Grab",[["path",{d:"M18 11.5V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4",key:"edstyy"}],["path",{d:"M14 10V8a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"19wdwo"}],["path",{d:"M10 9.9V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v5",key:"1lugqo"}],["path",{d:"M6 14a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1hbeus"}],["path",{d:"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0",key:"1etffm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Pe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Pe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Pe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Pe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Pe("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Pe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Pe("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=Pe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=Pe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=Pe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=Pe("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=Pe("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=Pe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Pe("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Pe("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=Pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=Pe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Pe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=Pe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=Pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=Pe("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Pe("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Pe("Variable",[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=Pe("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Pe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Qv(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Qv(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function GN(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Qv(e))&&(r&&(r+=" "),r+=t);return r}const Lf="-",KN=e=>{const t=ZN(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(Lf);return c[0]===""&&c.length!==1&&c.shift(),Jv(c,t)||YN(o)},getConflictingClassGroupIds:(o,c)=>{const d=n[o]||[];return c&&r[o]?[...d,...r[o]]:d}}},Jv=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?Jv(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const s=e.join(Lf);return(o=t.validators.find(({validator:c})=>c(s)))==null?void 0:o.classGroupId},bb=/^\[(.+)\]$/,YN=e=>{if(bb.test(e)){const t=bb.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ZN=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return QN(Object.entries(e.classGroups),n).forEach(([s,o])=>{Up(o,r,s,t)}),r},Up=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const s=i===""?t:yb(t,i);s.classGroupId=n;return}if(typeof i=="function"){if(XN(i)){Up(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Up(o,yb(t,s),n,r)})})},yb=(e,t)=>{let n=e;return t.split(Lf).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},XN=e=>e.isThemeGetter,QN=(e,t)=>t?e.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,c])=>[t+o,c])):s);return[n,i]}):e,JN=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},ex="!",eS=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],s=t.length,o=c=>{const d=[];let p=0,h=0,m;for(let w=0;w<c.length;w++){let k=c[w];if(p===0){if(k===i&&(r||c.slice(w,w+s)===t)){d.push(c.slice(h,w)),h=w+s;continue}if(k==="/"){m=w;continue}}k==="["?p++:k==="]"&&p--}const g=d.length===0?c:c.substring(h),b=g.startsWith(ex),x=b?g.substring(1):g,v=m&&m>h?m-h:void 0;return{modifiers:d,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:v}};return n?c=>n({className:c,parseClassName:o}):o},tS=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},nS=e=>({cache:JN(e.cacheSize),parseClassName:eS(e),...KN(e)}),rS=/\s+/,aS=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,s=[],o=e.trim().split(rS);let c="";for(let d=o.length-1;d>=0;d-=1){const p=o[d],{modifiers:h,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:b}=n(p);let x=!!b,v=r(x?g.substring(0,b):g);if(!v){if(!x){c=p+(c.length>0?" "+c:c);continue}if(v=r(g),!v){c=p+(c.length>0?" "+c:c);continue}x=!1}const w=tS(h).join(":"),k=m?w+ex:w,C=k+v;if(s.includes(C))continue;s.push(C);const T=i(v,x);for(let D=0;D<T.length;++D){const I=T[D];s.push(k+I)}c=p+(c.length>0?" "+c:c)}return c};function iS(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=tx(t))&&(r&&(r+=" "),r+=n);return r}const tx=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=tx(e[r]))&&(n&&(n+=" "),n+=t);return n};function sS(e,...t){let n,r,i,s=o;function o(d){const p=t.reduce((h,m)=>m(h),e());return n=nS(p),r=n.cache.get,i=n.cache.set,s=c,c(d)}function c(d){const p=r(d);if(p)return p;const h=aS(d,n);return i(d,h),h}return function(){return s(iS.apply(null,arguments))}}const Xt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},nx=/^\[(?:([a-z-]+):)?(.+)\]$/i,oS=/^\d+\/\d+$/,lS=new Set(["px","full","screen"]),cS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,pS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,da=e=>ls(e)||lS.has(e)||oS.test(e),za=e=>gs(e,"length",wS),ls=e=>!!e&&!Number.isNaN(Number(e)),Gd=e=>gs(e,"number",ls),ro=e=>!!e&&Number.isInteger(Number(e)),hS=e=>e.endsWith("%")&&ls(e.slice(0,-1)),yt=e=>nx.test(e),$a=e=>cS.test(e),mS=new Set(["length","size","percentage"]),gS=e=>gs(e,mS,rx),bS=e=>gs(e,"position",rx),yS=new Set(["image","url"]),vS=e=>gs(e,yS,kS),xS=e=>gs(e,"",ES),ao=()=>!0,gs=(e,t,n)=>{const r=nx.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},wS=e=>uS.test(e)&&!dS.test(e),rx=()=>!1,ES=e=>pS.test(e),kS=e=>fS.test(e),NS=()=>{const e=Xt("colors"),t=Xt("spacing"),n=Xt("blur"),r=Xt("brightness"),i=Xt("borderColor"),s=Xt("borderRadius"),o=Xt("borderSpacing"),c=Xt("borderWidth"),d=Xt("contrast"),p=Xt("grayscale"),h=Xt("hueRotate"),m=Xt("invert"),g=Xt("gap"),b=Xt("gradientColorStops"),x=Xt("gradientColorStopPositions"),v=Xt("inset"),w=Xt("margin"),k=Xt("opacity"),C=Xt("padding"),T=Xt("saturate"),D=Xt("scale"),I=Xt("sepia"),L=Xt("skew"),O=Xt("space"),B=Xt("translate"),z=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",yt,t],F=()=>[yt,t],G=()=>["",da,za],_=()=>["auto",ls,yt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Z=()=>["start","end","center","between","around","evenly","stretch"],J=()=>["","0",yt],P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[ls,yt];return{cacheSize:500,separator:":",theme:{colors:[ao],spacing:[da,za],blur:["none","",$a,yt],brightness:M(),borderColor:[e],borderRadius:["none","","full",$a,yt],borderSpacing:F(),borderWidth:G(),contrast:M(),grayscale:J(),hueRotate:M(),invert:J(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[hS,za],inset:q(),margin:q(),opacity:M(),padding:F(),saturate:M(),scale:M(),sepia:J(),skew:M(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",yt]}],container:["container"],columns:[{columns:[$a]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),yt]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ro,yt]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yt]}],grow:[{grow:J()}],shrink:[{shrink:J()}],order:[{order:["first","last","none",ro,yt]}],"grid-cols":[{"grid-cols":[ao]}],"col-start-end":[{col:["auto",{span:["full",ro,yt]},yt]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[ao]}],"row-start-end":[{row:["auto",{span:[ro,yt]},yt]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...Z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yt,t]}],"min-w":[{"min-w":[yt,t,"min","max","fit"]}],"max-w":[{"max-w":[yt,t,"none","full","min","max","fit","prose",{screen:[$a]},$a]}],h:[{h:[yt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",$a,za]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gd]}],"font-family":[{font:[ao]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yt]}],"line-clamp":[{"line-clamp":["none",ls,Gd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",da,yt]}],"list-image":[{"list-image":["none",yt]}],"list-style-type":[{list:["none","disc","decimal",yt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",da,za]}],"underline-offset":[{"underline-offset":["auto",da,yt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),bS]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gS]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vS]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[da,yt]}],"outline-w":[{outline:[da,za]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[da,za]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",$a,xS]}],"shadow-color":[{shadow:[ao]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",$a,yt]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[T]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yt]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",yt]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",yt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[ro,yt]}],"translate-x":[{"translate-x":[B]}],"translate-y":[{"translate-y":[B]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[da,za,Gd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SS=sS(NS);function me(...e){return SS(GN(e))}class CS extends N.Component{constructor(n){super(n);ua(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ua(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error Boundary caught an error:",n),console.error("Error info:",r),this.setState({errorInfo:r})}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-card border rounded-lg shadow-lg p-6 text-center space-y-4",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"p-3 bg-destructive/10 rounded-full",children:u.jsx(Wa,{className:"h-8 w-8 text-destructive"})})}),u.jsx("h1",{className:"text-xl font-bold",children:"Something went wrong"}),u.jsx("p",{className:"text-muted-foreground",children:"An unexpected error occurred. This has been logged for debugging."}),this.state.error&&u.jsxs("details",{className:"text-left bg-muted p-3 rounded-md text-sm",children:[u.jsx("summary",{className:"cursor-pointer font-medium",children:"Technical details"}),u.jsxs("pre",{className:"mt-2 overflow-auto text-xs text-muted-foreground whitespace-pre-wrap",children:[this.state.error.message,((n=this.state.errorInfo)==null?void 0:n.componentStack)&&u.jsxs(u.Fragment,{children:[`

Component Stack:`,this.state.errorInfo.componentStack]})]})]}),u.jsxs("div",{className:"flex gap-3 justify-center pt-2",children:[u.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[u.jsx(Mf,{className:"h-4 w-4"}),"Try Again"]}),u.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center gap-2 px-4 py-2 border rounded-md hover:bg-accent transition-colors",children:[u.jsx(Yv,{className:"h-4 w-4"}),"Go Home"]})]})]})}):this.props.children}}function _S(){const[e,t]=N.useState(null),[n,r]=N.useState(!1),[i,s]=N.useState(!1);N.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){s(!0);return}const d=localStorage.getItem("pwa-install-dismissed");if(d){const m=parseInt(d,10);if(Date.now()-m<10080*60*1e3)return}const p=m=>{m.preventDefault(),t(m),r(!0)},h=()=>{s(!0),r(!1),t(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",h),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",h)}},[]);const o=N.useCallback(async()=>{if(!e)return;await e.prompt();const{outcome:d}=await e.userChoice;d==="accepted"&&s(!0),t(null),r(!1)},[e]),c=N.useCallback(()=>{r(!1),t(null),localStorage.setItem("pwa-install-dismissed",Date.now().toString())},[]);return i||!n||!e?null:u.jsx("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 z-40 max-w-sm",children:u.jsxs("div",{className:"bg-card border rounded-lg shadow-lg p-4 flex items-start gap-3",children:[u.jsx("div",{className:"p-2 bg-primary/10 rounded-lg flex-shrink-0",children:u.jsx(zo,{className:"h-5 w-5 text-primary"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-sm",children:"Install Rolldeo"}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Install this app on your device for quick access and offline use."}),u.jsxs("div",{className:"flex gap-2 mt-3",children:[u.jsx("button",{onClick:o,className:"px-3 py-1.5 text-xs font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Install"}),u.jsx("button",{onClick:c,className:"px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",children:"Not now"})]})]}),u.jsx("button",{onClick:c,className:"p-1 hover:bg-accent rounded transition-colors flex-shrink-0","aria-label":"Dismiss",children:u.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})})]})})}function TS(){const[e,t]=N.useState(navigator.onLine),[n,r]=N.useState(!1),[i,s]=N.useState(!1);return N.useEffect(()=>{const o=()=>{t(!0),i&&(r(!0),setTimeout(()=>{r(!1)},3e3))},c=()=>{t(!1),s(!0)};return window.addEventListener("online",o),window.addEventListener("offline",c),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",c)}},[i]),n?u.jsxs("div",{className:me("fixed top-16 left-1/2 -translate-x-1/2 z-50","flex items-center gap-2 px-4 py-2 rounded-full shadow-lg","bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200","text-sm font-medium","animate-in fade-in slide-in-from-top-2 duration-300"),role:"status","aria-live":"polite",children:[u.jsx(Xv,{className:"h-4 w-4"}),"Back online"]}):e?null:u.jsxs("div",{className:me("fixed top-16 left-1/2 -translate-x-1/2 z-50","flex items-center gap-2 px-4 py-2 rounded-full shadow-lg","bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200","text-sm font-medium","animate-in fade-in slide-in-from-top-2 duration-300"),role:"status","aria-live":"polite",children:[u.jsx(WN,{className:"h-4 w-4"}),"You're offline"]})}const vb=e=>{let t;const n=new Set,r=(p,h)=>{const m=typeof p=="function"?p(t):p;if(!Object.is(m,t)){const g=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(b=>b(t,g))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p))},d=t=e(r,i,c);return c},DS=(e=>e?vb(e):vb),RS=e=>e;function AS(e,t=RS){const n=Qt.useSyncExternalStore(e.subscribe,Qt.useCallback(()=>t(e.getState()),[e,t]),Qt.useCallback(()=>t(e.getInitialState()),[e,t]));return Qt.useDebugValue(n),n}const IS=e=>{const t=DS(e),n=r=>AS(t,r);return Object.assign(n,t),n},Pf=(e=>IS);function jS(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var s;const o=d=>d===null?null:JSON.parse(d,void 0),c=(s=n.getItem(i))!=null?s:null;return c instanceof Promise?c.then(o):o(c)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Hp=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Hp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Hp(r)(n)}}}},OS=(e,t)=>(n,r,i)=>{let s={storage:jS(()=>localStorage),partialize:v=>v,version:0,merge:(v,w)=>({...w,...v}),...t},o=!1;const c=new Set,d=new Set;let p=s.storage;if(!p)return e((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...v)},r,i);const h=()=>{const v=s.partialize({...r()});return p.setItem(s.name,{state:v,version:s.version})},m=i.setState;i.setState=(v,w)=>(m(v,w),h());const g=e((...v)=>(n(...v),h()),r,i);i.getInitialState=()=>g;let b;const x=()=>{var v,w;if(!p)return;o=!1,c.forEach(C=>{var T;return C((T=r())!=null?T:g)});const k=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(v=r())!=null?v:g))||void 0;return Hp(p.getItem.bind(p))(s.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==s.version){if(s.migrate){const T=s.migrate(C.state,C.version);return T instanceof Promise?T.then(D=>[!0,D]):[!0,T]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var T;const[D,I]=C;if(b=s.merge(I,(T=r())!=null?T:g),n(b,!0),D)return h()}).then(()=>{k==null||k(b,void 0),b=r(),o=!0,d.forEach(C=>C(b))}).catch(C=>{k==null||k(void 0,C)})};return i.persist={setOptions:v=>{s={...s,...v},v.storage&&(p=v.storage)},clearStorage:()=>{p==null||p.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:v=>(c.add(v),()=>{c.delete(v)}),onFinishHydration:v=>(d.add(v),()=>{d.delete(v)})},s.skipHydration||x(),b||g},ax=OS,Ft=Pf()(ax((e,t)=>({searchQuery:"",selectedTags:[],viewMode:"grid",showHiddenTables:!1,theme:"system",isImportDialogOpen:!1,isConflictDialogOpen:!1,browserPanelWidth:380,expandedCollectionId:null,browserActiveTab:"templates",browserViewMode:"flat",browserGroupBy:null,browserSearchQuery:"",preloadedCollectionsExpanded:!1,lastEditorCollectionId:null,editorActiveTab:"tables",editorSelectedItemId:null,editorSidebarCollapsed:!1,setSearchQuery:n=>e({searchQuery:n}),toggleTag:n=>e(r=>({selectedTags:r.selectedTags.includes(n)?r.selectedTags.filter(i=>i!==n):[...r.selectedTags,n]})),setSelectedTags:n=>e({selectedTags:n}),clearTags:()=>e({selectedTags:[]}),clearFilters:()=>e({searchQuery:"",selectedTags:[]}),setViewMode:n=>e({viewMode:n}),toggleShowHiddenTables:()=>e(n=>({showHiddenTables:!n.showHiddenTables})),setTheme:n=>e({theme:n}),openImportDialog:()=>e({isImportDialogOpen:!0}),closeImportDialog:()=>e({isImportDialogOpen:!1}),openConflictDialog:()=>e({isConflictDialogOpen:!0}),closeConflictDialog:()=>e({isConflictDialogOpen:!1}),setBrowserPanelWidth:n=>e({browserPanelWidth:n}),toggleCollectionExpanded:n=>e(r=>({expandedCollectionId:r.expandedCollectionId===n?null:n,browserSearchQuery:r.expandedCollectionId===n?r.browserSearchQuery:""})),setExpandedCollectionId:n=>e({expandedCollectionId:n,browserSearchQuery:""}),setBrowserActiveTab:n=>e({browserActiveTab:n}),setBrowserViewMode:n=>e({browserViewMode:n}),setBrowserGroupBy:n=>e({browserGroupBy:n}),setBrowserSearchQuery:n=>e({browserSearchQuery:n}),clearBrowserFilters:()=>e({browserSearchQuery:"",browserGroupBy:null}),togglePreloadedCollections:()=>e(n=>({preloadedCollectionsExpanded:!n.preloadedCollectionsExpanded})),setLastEditorCollectionId:n=>e({lastEditorCollectionId:n}),setEditorActiveTab:n=>e({editorActiveTab:n}),setEditorSelectedItemId:n=>e({editorSelectedItemId:n}),setEditorSidebarCollapsed:n=>e({editorSidebarCollapsed:n})}),{name:"ui-store",partialize:e=>({viewMode:e.viewMode,showHiddenTables:e.showHiddenTables,theme:e.theme,browserPanelWidth:e.browserPanelWidth,browserViewMode:e.browserViewMode,browserGroupBy:e.browserGroupBy,preloadedCollectionsExpanded:e.preloadedCollectionsExpanded,lastEditorCollectionId:e.lastEditorCollectionId,editorActiveTab:e.editorActiveTab,editorSelectedItemId:e.editorSelectedItemId,editorSidebarCollapsed:e.editorSidebarCollapsed})}));function Sc(e){const t=document.documentElement;if(t.classList.remove("light","dark"),e==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.add(n?"dark":"light"),t.style.colorScheme=n?"dark":"light"}else t.classList.add(e),t.style.colorScheme=e}function MS(){var t;const e=localStorage.getItem("ui-store");if(e)try{const n=JSON.parse(e);(t=n.state)!=null&&t.theme&&Sc(n.state.theme)}catch{}else Sc("system")}const FS=N.memo(function(){const t=Ft(o=>o.theme),n=Ft(o=>o.setTheme);N.useEffect(()=>{if(Sc(t),t==="system"){const o=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>Sc("system");return o.addEventListener("change",c),()=>o.removeEventListener("change",c)}},[t]);const r=()=>{n(t==="light"?"dark":t==="dark"?"system":"light")},i=()=>{switch(t){case"light":return u.jsx(UN,{className:"h-4 w-4"});case"dark":return u.jsx(jN,{className:"h-4 w-4"});case"system":return u.jsx(Af,{className:"h-4 w-4"})}},s=()=>{switch(t){case"light":return"Light";case"dark":return"Dark";case"system":return"Auto"}};return u.jsxs("button",{onClick:r,className:me("flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-300","bg-secondary/50 hover:bg-secondary border border-border/50","text-muted-foreground hover:text-foreground","active:scale-95"),"aria-label":`Current theme: ${t}. Click to change.`,title:`Theme: ${s()}`,children:[u.jsx("span",{className:"transition-transform duration-300 ease-out",children:i()}),u.jsx("span",{className:"hidden sm:inline text-xs",children:s()})]})}),LS=N.createContext(null);function PS({children:e}){const[t,n]=N.useState([]),r=N.useCallback(h=>{n(m=>m.filter(g=>g.id!==h))},[]),i=N.useCallback((h,m="info",g=4e3)=>{const b=`toast-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,x={id:b,message:h,type:m,duration:g};n(v=>[...v,x]),g>0&&setTimeout(()=>{r(b)},g)},[r]),s=N.useCallback((h,m)=>i(h,"success",m),[i]),o=N.useCallback((h,m)=>i(h,"error",m??6e3),[i]),c=N.useCallback((h,m)=>i(h,"warning",m),[i]),d=N.useCallback((h,m)=>i(h,"info",m),[i]),p={toasts:t,addToast:i,removeToast:r,success:s,error:o,warning:c,info:d};return u.jsxs(LS.Provider,{value:p,children:[e,u.jsx(zS,{toasts:t,onRemove:r})]})}function zS({toasts:e,onRemove:t}){return e.length===0?null:u.jsx("div",{className:"fixed bottom-28 md:bottom-6 right-4 md:right-6 z-50 flex flex-col gap-3 max-w-sm w-full pointer-events-none",role:"region","aria-label":"Notifications",children:e.map(n=>u.jsx($S,{toast:n,onRemove:t},n.id))})}function $S({toast:e,onRemove:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1);N.useEffect(()=>{requestAnimationFrame(()=>{r(!0)})},[]);const o=N.useCallback(()=>{s(!0),setTimeout(()=>{t(e.id)},200)},[t,e.id]),d={success:vN,error:qc,warning:Wa,info:Ei}[e.type],p={success:"card-mint border-[hsl(var(--mint)/0.3)]",error:"card-rose border-[hsl(var(--rose)/0.3)]",warning:"card-amber border-[hsl(var(--amber)/0.3)]",info:"card-lavender border-[hsl(var(--lavender)/0.3)]"},h={success:"icon-mint",error:"icon-rose",warning:"icon-amber",info:"icon-lavender"};return u.jsxs("div",{role:"alert",className:me("pointer-events-auto card-elevated flex items-start gap-3 p-4 border rounded-xl shadow-lg transition-all duration-300",p[e.type],n&&!i?"opacity-100 translate-x-0 scale-100":"opacity-0 translate-x-4 scale-95"),children:[u.jsx("div",{className:me("icon-container p-2",h[e.type]),children:u.jsx(d,{className:"h-4 w-4"})}),u.jsx("p",{className:"flex-1 text-sm font-medium pt-1.5 text-foreground",children:e.message}),u.jsx("button",{onClick:o,className:"flex-shrink-0 p-2 hover:bg-white/10 rounded-lg transition-colors","aria-label":"Dismiss notification",children:u.jsx(cn,{className:"h-4 w-4 text-muted-foreground"})})]})}const zf="/assets/rollifyLogo-B151EpNy.png",Kd=[{path:"/",icon:Yv,label:"Home"},{path:"/library",icon:Wc,label:"Library"},{path:"/roll",icon:Sr,label:"Roll"},{path:"/editor",icon:Ff,label:"Editor"},{path:"/guide",icon:Pr,label:"Guide"}];function BS(){const e=Qr(),[t,n]=N.useState(!1);return u.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[u.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-xl",children:"Skip to main content"}),u.jsxs("header",{className:"sticky top-0 z-40 glass-card border-b border-border/50",role:"banner",children:[u.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[u.jsxs(Ln,{to:"/",className:"flex items-center gap-3 group",children:[u.jsx("img",{src:zf,alt:"Rolldeo logo",className:"h-10 w-10 rounded-xl group-hover:scale-105 transition-transform"}),u.jsx("span",{className:"font-bold text-xl tracking-tight",children:"Rolldeo"})]}),u.jsx("nav",{className:"hidden md:flex items-center gap-1","aria-label":"Main navigation",children:Kd.map(r=>{const i=r.path==="/"?e.pathname==="/":e.pathname.startsWith(r.path);return u.jsxs(Ln,{to:r.path,className:me("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",i?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[u.jsx(r.icon,{className:"h-4 w-4"}),r.label]},r.path)})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(FS,{}),u.jsx("button",{className:"md:hidden p-2 rounded-xl hover:bg-accent transition-colors",onClick:()=>n(!t),"aria-label":"Toggle menu",children:u.jsx(Zv,{className:"h-5 w-5"})})]})]}),t&&u.jsx("div",{className:"md:hidden border-t border-border/50 bg-card/95 backdrop-blur-xl animate-slide-up",children:u.jsx("nav",{className:"container py-4 space-y-1","aria-label":"Mobile navigation",children:Kd.map(r=>{const i=r.path==="/"?e.pathname==="/":e.pathname.startsWith(r.path);return u.jsxs(Ln,{to:r.path,onClick:()=>n(!1),className:me("flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all",i?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[u.jsx(r.icon,{className:"h-5 w-5"}),r.label]},r.path)})})})]}),u.jsx("main",{id:"main-content",className:"flex-1 container py-8",role:"main",children:u.jsx(Hk,{})}),u.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 glass-card border-t border-border/50 safe-area-bottom","aria-label":"Mobile navigation",children:u.jsx("div",{className:"flex justify-around py-2",children:Kd.map(r=>{const i=r.path==="/"?e.pathname==="/":e.pathname.startsWith(r.path);return u.jsxs(Ln,{to:r.path,className:me("flex flex-col items-center gap-1 px-4 py-2 rounded-xl text-xs font-medium transition-all",i?"text-primary":"text-muted-foreground"),children:[u.jsx("div",{className:me("p-2 rounded-xl transition-all",i&&"bg-primary/10"),children:u.jsx(r.icon,{className:"h-5 w-5"})}),u.jsx("span",{className:me("transition-all",i?"opacity-100":"opacity-70"),children:r.label})]},r.path)})})}),u.jsx("div",{className:"md:hidden h-24"})]})}function nc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yd={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var xb;function US(){return xb||(xb=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,i,s){function o(p,h){if(!i[p]){if(!r[p]){var m=typeof nc=="function"&&nc;if(!h&&m)return m(p,!0);if(c)return c(p,!0);var g=new Error("Cannot find module '"+p+"'");throw g.code="MODULE_NOT_FOUND",g}var b=i[p]={exports:{}};r[p][0].call(b.exports,function(x){var v=r[p][1][x];return o(v||x)},b,b.exports,n,r,i,s)}return i[p].exports}for(var c=typeof nc=="function"&&nc,d=0;d<s.length;d++)o(s[d]);return o})({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(d){for(var p,h,m,g,b,x,v,w=[],k=0,C=d.length,T=C,D=s.getTypeOf(d)!=="string";k<d.length;)T=C-k,m=D?(p=d[k++],h=k<C?d[k++]:0,k<C?d[k++]:0):(p=d.charCodeAt(k++),h=k<C?d.charCodeAt(k++):0,k<C?d.charCodeAt(k++):0),g=p>>2,b=(3&p)<<4|h>>4,x=1<T?(15&h)<<2|m>>6:64,v=2<T?63&m:64,w.push(c.charAt(g)+c.charAt(b)+c.charAt(x)+c.charAt(v));return w.join("")},i.decode=function(d){var p,h,m,g,b,x,v=0,w=0,k="data:";if(d.substr(0,k.length)===k)throw new Error("Invalid base64 input, it looks like a data url.");var C,T=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&T--,d.charAt(d.length-2)===c.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=o.uint8array?new Uint8Array(0|T):new Array(0|T);v<d.length;)p=c.indexOf(d.charAt(v++))<<2|(g=c.indexOf(d.charAt(v++)))>>4,h=(15&g)<<4|(b=c.indexOf(d.charAt(v++)))>>2,m=(3&b)<<6|(x=c.indexOf(d.charAt(v++))),C[w++]=p,b!==64&&(C[w++]=h),x!==64&&(C[w++]=m);return C}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function p(h,m,g,b,x){this.compressedSize=h,this.uncompressedSize=m,this.crc32=g,this.compression=b,this.compressedContent=x}p.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return h.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(h,m,g){return h.pipe(new c).pipe(new d("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},r.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=(function(){for(var c,d=[],p=0;p<256;p++){c=p;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;d[p]=c}return d})();r.exports=function(c,d){return c!==void 0&&c.length?s.getTypeOf(c)!=="string"?(function(p,h,m,g){var b=o,x=g+m;p^=-1;for(var v=g;v<x;v++)p=p>>>8^b[255&(p^h[v])];return-1^p})(0|d,c,c.length,0):(function(p,h,m,g){var b=o,x=g+m;p^=-1;for(var v=g;v<x;v++)p=p>>>8^b[255&(p^h.charCodeAt(v))];return-1^p})(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),c=n("./utils"),d=n("./stream/GenericWorker"),p=s?"uint8array":"array";function h(m,g){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}i.magic="\b\0",c.inherits(h,d),h.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(p,m.data),!1)},h.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},i.compressWorker=function(m){return new h("Deflate",m)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(b,x){var v,w="";for(v=0;v<x;v++)w+=String.fromCharCode(255&b),b>>>=8;return w}function o(b,x,v,w,k,C){var T,D,I=b.file,L=b.compression,O=C!==p.utf8encode,B=c.transformTo("string",C(I.name)),z=c.transformTo("string",p.utf8encode(I.name)),j=I.comment,q=c.transformTo("string",C(j)),F=c.transformTo("string",p.utf8encode(j)),G=z.length!==I.name.length,_=F.length!==j.length,H="",se="",ne="",Z=I.dir,J=I.date,P={crc32:0,compressedSize:0,uncompressedSize:0};x&&!v||(P.crc32=b.crc32,P.compressedSize=b.compressedSize,P.uncompressedSize=b.uncompressedSize);var M=0;x&&(M|=8),O||!G&&!_||(M|=2048);var U=0,A=0;Z&&(U|=16),k==="UNIX"?(A=798,U|=(function(ce,Ee){var Ue=ce;return ce||(Ue=Ee?16893:33204),(65535&Ue)<<16})(I.unixPermissions,Z)):(A=20,U|=(function(ce){return 63&(ce||0)})(I.dosPermissions)),T=J.getUTCHours(),T<<=6,T|=J.getUTCMinutes(),T<<=5,T|=J.getUTCSeconds()/2,D=J.getUTCFullYear()-1980,D<<=4,D|=J.getUTCMonth()+1,D<<=5,D|=J.getUTCDate(),G&&(se=s(1,1)+s(h(B),4)+z,H+="up"+s(se.length,2)+se),_&&(ne=s(1,1)+s(h(q),4)+F,H+="uc"+s(ne.length,2)+ne);var te="";return te+=`
\0`,te+=s(M,2),te+=L.magic,te+=s(T,2),te+=s(D,2),te+=s(P.crc32,4),te+=s(P.compressedSize,4),te+=s(P.uncompressedSize,4),te+=s(B.length,2),te+=s(H.length,2),{fileRecord:m.LOCAL_FILE_HEADER+te+B+H,dirRecord:m.CENTRAL_FILE_HEADER+s(A,2)+te+s(q.length,2)+"\0\0\0\0"+s(U,4)+s(w,4)+B+H+q}}var c=n("../utils"),d=n("../stream/GenericWorker"),p=n("../utf8"),h=n("../crc32"),m=n("../signature");function g(b,x,v,w){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(g,d),g.prototype.push=function(b){var x=b.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,d.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:v?(x+100*(v-w-1))/v:100}}))},g.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var x=this.streamFiles&&!b.file.dir;if(x){var v=o(b,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(b){this.accumulate=!1;var x=this.streamFiles&&!b.file.dir,v=o(b,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),x)this.push({data:(function(w){return m.DATA_DESCRIPTOR+s(w.crc32,4)+s(w.compressedSize,4)+s(w.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var b=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var v=this.bytesWritten-b,w=(function(k,C,T,D,I){var L=c.transformTo("string",I(D));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(k,2)+s(k,2)+s(C,4)+s(T,4)+s(L.length,2)+L})(this.dirRecords.length,v,b,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(b){this._sources.push(b);var x=this;return b.on("data",function(v){x.processChunk(v)}),b.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),b.on("error",function(v){x.error(v)}),this},g.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(b){var x=this._sources;if(!d.prototype.error.call(this,b))return!1;for(var v=0;v<x.length;v++)try{x[v].error(b)}catch{}return!0},g.prototype.lock=function(){d.prototype.lock.call(this);for(var b=this._sources,x=0;x<b.length;x++)b[x].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(c,d,p){var h=new o(d.streamFiles,p,d.platform,d.encodeFileName),m=0;try{c.forEach(function(g,b){m++;var x=(function(C,T){var D=C||T,I=s[D];if(!I)throw new Error(D+" is not a valid compression method !");return I})(b.options.compression,d.compression),v=b.options.compressionOptions||d.compressionOptions||{},w=b.dir,k=b.date;b._compressWorker(x,v).withStreamInfo("file",{name:g,dir:w,date:k,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(h)}),h.entriesCount=m}catch(g){h.error(g)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var c in this)typeof this[c]!="function"&&(o[c]=this[c]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,c){return new s().loadAsync(o,c)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),c=n("./utf8"),d=n("./zipEntries"),p=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function m(g){return new o.Promise(function(b,x){var v=g.decompressed.getContentWorker().pipe(new p);v.on("error",function(w){x(w)}).on("end",function(){v.streamInfo.crc32!==g.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}r.exports=function(g,b){var x=this;return b=s.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),h.isNode&&h.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,b.optimizedBinaryString,b.base64).then(function(v){var w=new d(b);return w.load(v),w}).then(function(v){var w=[o.Promise.resolve(v)],k=v.files;if(b.checkCRC32)for(var C=0;C<k.length;C++)w.push(m(k[C]));return o.Promise.all(w)}).then(function(v){for(var w=v.shift(),k=w.files,C=0;C<k.length;C++){var T=k[C],D=T.fileNameStr,I=s.resolve(T.fileNameStr);x.file(I,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:b.createFolders}),T.dir||(x.file(I).unsafeOriginalName=D)}return w.zipComment.length&&(x.comment=w.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function c(d,p){o.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(p)}s.inherits(c,o),c.prototype._bindStream=function(d){var p=this;(this._stream=d).pause(),d.on("data",function(h){p.push({data:h,meta:{percent:0}})}).on("error",function(h){p.isPaused?this.generatedError=h:p.error(h)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(c,d,p){s.call(this,d),this._helper=c;var h=this;c.on("data",function(m,g){h.push(m)||h._helper.pause(),p&&p(g)}).on("error",function(m){h.emit("error",m)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(I,L,O){var B,z=c.getTypeOf(L),j=c.extend(O||{},h);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(I=k(I)),j.createFolders&&(B=w(I))&&C.call(this,B,!0);var q=z==="string"&&j.binary===!1&&j.base64===!1;O&&O.binary!==void 0||(j.binary=!q),(L instanceof m&&L.uncompressedSize===0||j.dir||!L||L.length===0)&&(j.base64=!1,j.binary=!0,L="",j.compression="STORE",z="string");var F=null;F=L instanceof m||L instanceof d?L:x.isNode&&x.isStream(L)?new v(I,L):c.prepareContent(I,L,j.binary,j.optimizedBinaryString,j.base64);var G=new g(I,F,j);this.files[I]=G}var o=n("./utf8"),c=n("./utils"),d=n("./stream/GenericWorker"),p=n("./stream/StreamHelper"),h=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),b=n("./generate"),x=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),w=function(I){I.slice(-1)==="/"&&(I=I.substring(0,I.length-1));var L=I.lastIndexOf("/");return 0<L?I.substring(0,L):""},k=function(I){return I.slice(-1)!=="/"&&(I+="/"),I},C=function(I,L){return L=L!==void 0?L:h.createFolders,I=k(I),this.files[I]||s.call(this,I,null,{dir:!0,createFolders:L}),this.files[I]};function T(I){return Object.prototype.toString.call(I)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(I){var L,O,B;for(L in this.files)B=this.files[L],(O=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&I(O,B)},filter:function(I){var L=[];return this.forEach(function(O,B){I(O,B)&&L.push(B)}),L},file:function(I,L,O){if(arguments.length!==1)return I=this.root+I,s.call(this,I,L,O),this;if(T(I)){var B=I;return this.filter(function(j,q){return!q.dir&&B.test(j)})}var z=this.files[this.root+I];return z&&!z.dir?z:null},folder:function(I){if(!I)return this;if(T(I))return this.filter(function(z,j){return j.dir&&I.test(z)});var L=this.root+I,O=C.call(this,L),B=this.clone();return B.root=O.name,B},remove:function(I){I=this.root+I;var L=this.files[I];if(L||(I.slice(-1)!=="/"&&(I+="/"),L=this.files[I]),L&&!L.dir)delete this.files[I];else for(var O=this.filter(function(z,j){return j.name.slice(0,I.length)===I}),B=0;B<O.length;B++)delete this.files[O[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(I){var L,O={};try{if((O=c.extend(I||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");c.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var B=O.comment||this.comment||"";L=b.generateWorker(this,O,B)}catch(z){(L=new d("error")).error(z)}return new p(L,O.type||"string",O.mimeType)},generateAsync:function(I,L){return this.generateInternalStream(I).accumulate(L)},generateNodeStream:function(I,L){return(I=I||{}).type||(I.type="nodebuffer"),this.generateInternalStream(I).toNodejsStream(L)}};r.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(c){s.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}n("../utils").inherits(o,s),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),p=c.charCodeAt(1),h=c.charCodeAt(2),m=c.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===d&&this.data[g+1]===p&&this.data[g+2]===h&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),p=c.charCodeAt(1),h=c.charCodeAt(2),m=c.charCodeAt(3),g=this.readData(4);return d===g[0]&&p===g[1]&&h===g[2]&&m===g[3]},o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,p=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)p=(p<<8)+this.byteAt(d);return this.index+=c,p},readString:function(c){return s.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(c){s.call(this,c)}n("../utils").inherits(o,s),o.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(c){s.call(this,c)}n("../utils").inherits(o,s),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(c){s.call(this,c)}n("../utils").inherits(o,s),o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),c=n("./ArrayReader"),d=n("./StringReader"),p=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(m){var g=s.getTypeOf(m);return s.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new p(m):o.uint8array?new h(s.transformTo("uint8array",m)):new c(s.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function c(d){s.call(this,"ConvertWorker to "+d),this.destType=d}o.inherits(c,s),c.prototype.processChunk=function(d){this.push({data:o.transformTo(this.destType,d.data),meta:d.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function c(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,s),c.prototype.processChunk=function(d){this.streamInfo.crc32=o(d.data,this.streamInfo.crc32||0),this.push(d)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function c(d){o.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}s.inherits(c,o),c.prototype.processChunk=function(d){if(d){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+d.data.length}o.prototype.processChunk.call(this,d)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function c(d){o.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(h){p.dataIsReady=!0,p.data=h,p.max=h&&h.length||0,p.type=s.getTypeOf(h),p.isPaused||p._tickAndRepeat()},function(h){p.error(h)})}s.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,p);break;case"uint8array":d=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":d=this.data.slice(this.index,p)}return this.index=p,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var d=0;d<this._listeners[o].length;d++)this._listeners[o][d].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(d){c.processChunk(d)}),o.on("end",function(){c.end()}),o.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),c=n("./GenericWorker"),d=n("../base64"),p=n("../support"),h=n("../external"),m=null;if(p.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(x,v){return new h.Promise(function(w,k){var C=[],T=x._internalType,D=x._outputType,I=x._mimeType;x.on("data",function(L,O){C.push(L),v&&v(O)}).on("error",function(L){C=[],k(L)}).on("end",function(){try{var L=(function(O,B,z){switch(O){case"blob":return s.newBlob(s.transformTo("arraybuffer",B),z);case"base64":return d.encode(B);default:return s.transformTo(O,B)}})(D,(function(O,B){var z,j=0,q=null,F=0;for(z=0;z<B.length;z++)F+=B[z].length;switch(O){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(q=new Uint8Array(F),z=0;z<B.length;z++)q.set(B[z],j),j+=B[z].length;return q;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+O+"'")}})(T,C),I);w(L)}catch(O){k(O)}C=[]}).resume()})}function b(x,v,w){var k=v;switch(v){case"blob":case"arraybuffer":k="uint8array";break;case"base64":k="string"}try{this._internalType=k,this._outputType=v,this._mimeType=w,s.checkSupport(k),this._worker=x.pipe(new o(k)),x.lock()}catch(C){this._worker=new c("error"),this._worker.error(C)}}b.prototype={accumulate:function(x){return g(this,x)},on:function(x,v){var w=this;return x==="data"?this._worker.on(x,function(k){v.call(w,k.data,k.meta)}):this._worker.on(x,function(){s.delay(v,arguments,w)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),c=n("./nodejsUtils"),d=n("./stream/GenericWorker"),p=new Array(256),h=0;h<256;h++)p[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;p[254]=p[254]=1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function g(){d.call(this,"utf-8 encode")}i.utf8encode=function(b){return o.nodebuffer?c.newBufferFrom(b,"utf-8"):(function(x){var v,w,k,C,T,D=x.length,I=0;for(C=0;C<D;C++)(64512&(w=x.charCodeAt(C)))==55296&&C+1<D&&(64512&(k=x.charCodeAt(C+1)))==56320&&(w=65536+(w-55296<<10)+(k-56320),C++),I+=w<128?1:w<2048?2:w<65536?3:4;for(v=o.uint8array?new Uint8Array(I):new Array(I),C=T=0;T<I;C++)(64512&(w=x.charCodeAt(C)))==55296&&C+1<D&&(64512&(k=x.charCodeAt(C+1)))==56320&&(w=65536+(w-55296<<10)+(k-56320),C++),w<128?v[T++]=w:(w<2048?v[T++]=192|w>>>6:(w<65536?v[T++]=224|w>>>12:(v[T++]=240|w>>>18,v[T++]=128|w>>>12&63),v[T++]=128|w>>>6&63),v[T++]=128|63&w);return v})(b)},i.utf8decode=function(b){return o.nodebuffer?s.transformTo("nodebuffer",b).toString("utf-8"):(function(x){var v,w,k,C,T=x.length,D=new Array(2*T);for(v=w=0;v<T;)if((k=x[v++])<128)D[w++]=k;else if(4<(C=p[k]))D[w++]=65533,v+=C-1;else{for(k&=C===2?31:C===3?15:7;1<C&&v<T;)k=k<<6|63&x[v++],C--;1<C?D[w++]=65533:k<65536?D[w++]=k:(k-=65536,D[w++]=55296|k>>10&1023,D[w++]=56320|1023&k)}return D.length!==w&&(D.subarray?D=D.subarray(0,w):D.length=w),s.applyFromCharCode(D)})(b=s.transformTo(o.uint8array?"uint8array":"array",b))},s.inherits(m,d),m.prototype.processChunk=function(b){var x=s.transformTo(o.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=x;(x=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),x.set(v,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var w=(function(C,T){var D;for((T=T||C.length)>C.length&&(T=C.length),D=T-1;0<=D&&(192&C[D])==128;)D--;return D<0||D===0?T:D+p[C[D]]>T?D:T})(x),k=x;w!==x.length&&(o.uint8array?(k=x.subarray(0,w),this.leftOver=x.subarray(w,x.length)):(k=x.slice(0,w),this.leftOver=x.slice(w,x.length))),this.push({data:i.utf8decode(k),meta:b.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m,s.inherits(g,d),g.prototype.processChunk=function(b){this.push({data:i.utf8encode(b.data),meta:b.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),c=n("./nodejsUtils"),d=n("./external");function p(v){return v}function h(v,w){for(var k=0;k<v.length;++k)w[k]=255&v.charCodeAt(k);return w}n("setimmediate"),i.newBlob=function(v,w){i.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var k=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return k.append(v),k.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(v,w,k){var C=[],T=0,D=v.length;if(D<=k)return String.fromCharCode.apply(null,v);for(;T<D;)w==="array"||w==="nodebuffer"?C.push(String.fromCharCode.apply(null,v.slice(T,Math.min(T+k,D)))):C.push(String.fromCharCode.apply(null,v.subarray(T,Math.min(T+k,D)))),T+=k;return C.join("")},stringifyByChar:function(v){for(var w="",k=0;k<v.length;k++)w+=String.fromCharCode(v[k]);return w},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function g(v){var w=65536,k=i.getTypeOf(v),C=!0;if(k==="uint8array"?C=m.applyCanBeUsed.uint8array:k==="nodebuffer"&&(C=m.applyCanBeUsed.nodebuffer),C)for(;1<w;)try{return m.stringifyByChunk(v,k,w)}catch{w=Math.floor(w/2)}return m.stringifyByChar(v)}function b(v,w){for(var k=0;k<v.length;k++)w[k]=v[k];return w}i.applyFromCharCode=g;var x={};x.string={string:p,array:function(v){return h(v,new Array(v.length))},arraybuffer:function(v){return x.string.uint8array(v).buffer},uint8array:function(v){return h(v,new Uint8Array(v.length))},nodebuffer:function(v){return h(v,c.allocBuffer(v.length))}},x.array={string:g,array:p,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return c.newBufferFrom(v)}},x.arraybuffer={string:function(v){return g(new Uint8Array(v))},array:function(v){return b(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:p,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return c.newBufferFrom(new Uint8Array(v))}},x.uint8array={string:g,array:function(v){return b(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:p,nodebuffer:function(v){return c.newBufferFrom(v)}},x.nodebuffer={string:g,array:function(v){return b(v,new Array(v.length))},arraybuffer:function(v){return x.nodebuffer.uint8array(v).buffer},uint8array:function(v){return b(v,new Uint8Array(v.length))},nodebuffer:p},i.transformTo=function(v,w){if(w=w||"",!v)return w;i.checkSupport(v);var k=i.getTypeOf(w);return x[k][v](w)},i.resolve=function(v){for(var w=v.split("/"),k=[],C=0;C<w.length;C++){var T=w[C];T==="."||T===""&&C!==0&&C!==w.length-1||(T===".."?k.pop():k.push(T))}return k.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":s.nodebuffer&&c.isBuffer(v)?"nodebuffer":s.uint8array&&v instanceof Uint8Array?"uint8array":s.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!s[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var w,k,C="";for(k=0;k<(v||"").length;k++)C+="\\x"+((w=v.charCodeAt(k))<16?"0":"")+w.toString(16).toUpperCase();return C},i.delay=function(v,w,k){setImmediate(function(){v.apply(k||null,w||[])})},i.inherits=function(v,w){function k(){}k.prototype=w.prototype,v.prototype=new k},i.extend=function(){var v,w,k={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&k[w]===void 0&&(k[w]=arguments[v][w]);return k},i.prepareContent=function(v,w,k,C,T){return d.Promise.resolve(w).then(function(D){return s.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new d.Promise(function(I,L){var O=new FileReader;O.onload=function(B){I(B.target.result)},O.onerror=function(B){L(B.target.error)},O.readAsArrayBuffer(D)}):D}).then(function(D){var I=i.getTypeOf(D);return I?(I==="arraybuffer"?D=i.transformTo("uint8array",D):I==="string"&&(T?D=o.decode(D):k&&C!==!0&&(D=(function(L){return h(L,s.uint8array?new Uint8Array(L.length):new Array(L.length))})(D))),D):d.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),c=n("./signature"),d=n("./zipEntry"),p=n("./support");function h(m){this.files=[],this.loadOptions=m}h.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var b=this.reader.index;this.reader.setIndex(m);var x=this.reader.readString(4)===g;return this.reader.setIndex(b),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=p.uint8array?"uint8array":"array",b=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,b,x=this.zip64EndOfCentralSize-44;0<x;)m=this.reader.readInt(2),g=this.reader.readInt(4),b=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var x=g-b;if(0<x)this.isSignature(g,c.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),c=n("./compressedObject"),d=n("./crc32"),p=n("./utf8"),h=n("./compressions"),m=n("./support");function g(b,x){this.options=b,this.loadOptions=x}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var x,v;if(b.skip(22),this.fileNameLength=b.readInt(2),v=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=(function(w){for(var k in h)if(Object.prototype.hasOwnProperty.call(h,k)&&h[k].magic===w)return h[k];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,x,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var x=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(x),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var x,v,w,k=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<k;)x=b.readInt(2),v=b.readInt(2),w=b.readData(v),this.extraFields[x]={id:x,length:v,value:w};b.setIndex(k)},handleUTF8:function(){var b=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var v=o.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var k=o.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(k)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var x=s(b.value);return x.readInt(1)!==1||d(this.fileName)!==x.readInt(4)?null:p.utf8decode(x.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var x=s(b.value);return x.readInt(1)!==1||d(this.fileComment)!==x.readInt(4)?null:p.utf8decode(x.readData(b.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(x,v,w){this.name=x,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var o=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),d=n("./utf8"),p=n("./compressedObject"),h=n("./stream/GenericWorker");s.prototype={internalStream:function(x){var v=null,w="string";try{if(!x)throw new Error("No output type specified.");var k=(w=x.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var C=!this._dataBinary;C&&!k&&(v=v.pipe(new d.Utf8EncodeWorker)),!C&&k&&(v=v.pipe(new d.Utf8DecodeWorker))}catch(T){(v=new h("error")).error(T)}return new o(v,w,"")},async:function(x,v){return this.internalStream(x).accumulate(v)},nodeStream:function(x,v){return this.internalStream(x||"nodebuffer").toNodejsStream(v)},_compressWorker:function(x,v){if(this._data instanceof p&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new d.Utf8EncodeWorker)),p.createWorkerFrom(w,x,v)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof h?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<m.length;b++)s.prototype[m[b]]=g;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,c,d=s.MutationObserver||s.WebKitMutationObserver;if(d){var p=0,h=new d(x),m=s.document.createTextNode("");h.observe(m,{characterData:!0}),o=function(){m.data=p=++p%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var v=s.document.createElement("script");v.onreadystatechange=function(){x(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:function(){setTimeout(x,0)};else{var g=new s.MessageChannel;g.port1.onmessage=x,o=function(){g.port2.postMessage(0)}}var b=[];function x(){var v,w;c=!0;for(var k=b.length;k;){for(w=b,b=[],v=-1;++v<k;)w[v]();k=b.length}c=!1}r.exports=function(v){b.push(v)!==1||c||o()}}).call(this,typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var c={},d=["REJECTED"],p=["FULFILLED"],h=["PENDING"];function m(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,k!==o&&v(this,k)}function g(k,C,T){this.promise=k,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function b(k,C,T){s(function(){var D;try{D=C(T)}catch(I){return c.reject(k,I)}D===k?c.reject(k,new TypeError("Cannot resolve promise with itself")):c.resolve(k,D)})}function x(k){var C=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof C=="function")return function(){C.apply(k,arguments)}}function v(k,C){var T=!1;function D(O){T||(T=!0,c.reject(k,O))}function I(O){T||(T=!0,c.resolve(k,O))}var L=w(function(){C(I,D)});L.status==="error"&&D(L.value)}function w(k,C){var T={};try{T.value=k(C),T.status="success"}catch(D){T.status="error",T.value=D}return T}(r.exports=m).prototype.finally=function(k){if(typeof k!="function")return this;var C=this.constructor;return this.then(function(T){return C.resolve(k()).then(function(){return T})},function(T){return C.resolve(k()).then(function(){throw T})})},m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,C){if(typeof k!="function"&&this.state===p||typeof C!="function"&&this.state===d)return this;var T=new this.constructor(o);return this.state!==h?b(T,this.state===p?k:C,this.outcome):this.queue.push(new g(T,k,C)),T},g.prototype.callFulfilled=function(k){c.resolve(this.promise,k)},g.prototype.otherCallFulfilled=function(k){b(this.promise,this.onFulfilled,k)},g.prototype.callRejected=function(k){c.reject(this.promise,k)},g.prototype.otherCallRejected=function(k){b(this.promise,this.onRejected,k)},c.resolve=function(k,C){var T=w(x,C);if(T.status==="error")return c.reject(k,T.value);var D=T.value;if(D)v(k,D);else{k.state=p,k.outcome=C;for(var I=-1,L=k.queue.length;++I<L;)k.queue[I].callFulfilled(C)}return k},c.reject=function(k,C){k.state=d,k.outcome=C;for(var T=-1,D=k.queue.length;++T<D;)k.queue[T].callRejected(C);return k},m.resolve=function(k){return k instanceof this?k:c.resolve(new this(o),k)},m.reject=function(k){var C=new this(o);return c.reject(C,k)},m.all=function(k){var C=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=k.length,D=!1;if(!T)return this.resolve([]);for(var I=new Array(T),L=0,O=-1,B=new this(o);++O<T;)z(k[O],O);return B;function z(j,q){C.resolve(j).then(function(F){I[q]=F,++L!==T||D||(D=!0,c.resolve(B,I))},function(F){D||(D=!0,c.reject(B,F))})}},m.race=function(k){var C=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=k.length,D=!1;if(!T)return this.resolve([]);for(var I=-1,L=new this(o);++I<T;)O=k[I],C.resolve(O).then(function(B){D||(D=!0,c.resolve(L,B))},function(B){D||(D=!0,c.reject(L,B))});var O;return L}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/messages"),p=n("./zlib/zstream"),h=Object.prototype.toString,m=0,g=-1,b=0,x=8;function v(k){if(!(this instanceof v))return new v(k);this.options=o.assign({level:g,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},k||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var T=s.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(T!==m)throw new Error(d[T]);if(C.header&&s.deflateSetHeader(this.strm,C.header),C.dictionary){var D;if(D=typeof C.dictionary=="string"?c.string2buf(C.dictionary):h.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(T=s.deflateSetDictionary(this.strm,D))!==m)throw new Error(d[T]);this._dict_set=!0}}function w(k,C){var T=new v(C);if(T.push(k,!0),T.err)throw T.msg||d[T.err];return T.result}v.prototype.push=function(k,C){var T,D,I=this.strm,L=this.options.chunkSize;if(this.ended)return!1;D=C===~~C?C:C===!0?4:0,typeof k=="string"?I.input=c.string2buf(k):h.call(k)==="[object ArrayBuffer]"?I.input=new Uint8Array(k):I.input=k,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(L),I.next_out=0,I.avail_out=L),(T=s.deflate(I,D))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);I.avail_out!==0&&(I.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(I.output,I.next_out))):this.onData(o.shrinkBuf(I.output,I.next_out)))}while((0<I.avail_in||I.avail_out===0)&&T!==1);return D===4?(T=s.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):D!==2||(this.onEnd(m),!(I.avail_out=0))},v.prototype.onData=function(k){this.chunks.push(k)},v.prototype.onEnd=function(k){k===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},i.Deflate=v,i.deflate=w,i.deflateRaw=function(k,C){return(C=C||{}).raw=!0,w(k,C)},i.gzip=function(k,C){return(C=C||{}).gzip=!0,w(k,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/constants"),p=n("./zlib/messages"),h=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function b(v){if(!(this instanceof b))return new b(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var k=s.inflateInit2(this.strm,w.windowBits);if(k!==d.Z_OK)throw new Error(p[k]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function x(v,w){var k=new b(w);if(k.push(v,!0),k.err)throw k.msg||p[k.err];return k.result}b.prototype.push=function(v,w){var k,C,T,D,I,L,O=this.strm,B=this.options.chunkSize,z=this.options.dictionary,j=!1;if(this.ended)return!1;C=w===~~w?w:w===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof v=="string"?O.input=c.binstring2buf(v):g.call(v)==="[object ArrayBuffer]"?O.input=new Uint8Array(v):O.input=v,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new o.Buf8(B),O.next_out=0,O.avail_out=B),(k=s.inflate(O,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&z&&(L=typeof z=="string"?c.string2buf(z):g.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,k=s.inflateSetDictionary(this.strm,L)),k===d.Z_BUF_ERROR&&j===!0&&(k=d.Z_OK,j=!1),k!==d.Z_STREAM_END&&k!==d.Z_OK)return this.onEnd(k),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&k!==d.Z_STREAM_END&&(O.avail_in!==0||C!==d.Z_FINISH&&C!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=c.utf8border(O.output,O.next_out),D=O.next_out-T,I=c.buf2string(O.output,T),O.next_out=D,O.avail_out=B-D,D&&o.arraySet(O.output,O.output,T,D,0),this.onData(I)):this.onData(o.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(j=!0)}while((0<O.avail_in||O.avail_out===0)&&k!==d.Z_STREAM_END);return k===d.Z_STREAM_END&&(C=d.Z_FINISH),C===d.Z_FINISH?(k=s.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===d.Z_OK):C!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(O.avail_out=0))},b.prototype.onData=function(v){this.chunks.push(v)},b.prototype.onEnd=function(v){v===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=b,i.inflate=x,i.inflateRaw=function(v,w){return(w=w||{}).raw=!0,x(v,w)},i.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(d){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var h=p.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var m in h)h.hasOwnProperty(m)&&(d[m]=h[m])}}return d},i.shrinkBuf=function(d,p){return d.length===p?d:d.subarray?d.subarray(0,p):(d.length=p,d)};var o={arraySet:function(d,p,h,m,g){if(p.subarray&&d.subarray)d.set(p.subarray(h,h+m),g);else for(var b=0;b<m;b++)d[g+b]=p[h+b]},flattenChunks:function(d){var p,h,m,g,b,x;for(p=m=0,h=d.length;p<h;p++)m+=d[p].length;for(x=new Uint8Array(m),p=g=0,h=d.length;p<h;p++)b=d[p],x.set(b,g),g+=b.length;return x}},c={arraySet:function(d,p,h,m,g){for(var b=0;b<m;b++)d[g+b]=p[h+b]},flattenChunks:function(d){return[].concat.apply([],d)}};i.setTyped=function(d){d?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,c))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new s.Buf8(256),p=0;p<256;p++)d[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function h(m,g){if(g<65537&&(m.subarray&&c||!m.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(m,g));for(var b="",x=0;x<g;x++)b+=String.fromCharCode(m[x]);return b}d[254]=d[254]=1,i.string2buf=function(m){var g,b,x,v,w,k=m.length,C=0;for(v=0;v<k;v++)(64512&(b=m.charCodeAt(v)))==55296&&v+1<k&&(64512&(x=m.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(x-56320),v++),C+=b<128?1:b<2048?2:b<65536?3:4;for(g=new s.Buf8(C),v=w=0;w<C;v++)(64512&(b=m.charCodeAt(v)))==55296&&v+1<k&&(64512&(x=m.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(x-56320),v++),b<128?g[w++]=b:(b<2048?g[w++]=192|b>>>6:(b<65536?g[w++]=224|b>>>12:(g[w++]=240|b>>>18,g[w++]=128|b>>>12&63),g[w++]=128|b>>>6&63),g[w++]=128|63&b);return g},i.buf2binstring=function(m){return h(m,m.length)},i.binstring2buf=function(m){for(var g=new s.Buf8(m.length),b=0,x=g.length;b<x;b++)g[b]=m.charCodeAt(b);return g},i.buf2string=function(m,g){var b,x,v,w,k=g||m.length,C=new Array(2*k);for(b=x=0;b<k;)if((v=m[b++])<128)C[x++]=v;else if(4<(w=d[v]))C[x++]=65533,b+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&b<k;)v=v<<6|63&m[b++],w--;1<w?C[x++]=65533:v<65536?C[x++]=v:(v-=65536,C[x++]=55296|v>>10&1023,C[x++]=56320|1023&v)}return h(C,x)},i.utf8border=function(m,g){var b;for((g=g||m.length)>m.length&&(g=m.length),b=g-1;0<=b&&(192&m[b])==128;)b--;return b<0||b===0?g:b+d[m[b]]>g?b:g}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,c,d){for(var p=65535&s|0,h=s>>>16&65535|0,m=0;c!==0;){for(c-=m=2e3<c?2e3:c;h=h+(p=p+o[d++]|0)|0,--m;);p%=65521,h%=65521}return p|h<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=(function(){for(var o,c=[],d=0;d<256;d++){o=d;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;c[d]=o}return c})();r.exports=function(o,c,d,p){var h=s,m=p+d;o^=-1;for(var g=p;g<m;g++)o=o>>>8^h[255&(o^c[g])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),c=n("./trees"),d=n("./adler32"),p=n("./crc32"),h=n("./messages"),m=0,g=4,b=0,x=-2,v=-1,w=4,k=2,C=8,T=9,D=286,I=30,L=19,O=2*D+1,B=15,z=3,j=258,q=j+z+1,F=42,G=113,_=1,H=2,se=3,ne=4;function Z(R,ge){return R.msg=h[ge],ge}function J(R){return(R<<1)-(4<R?9:0)}function P(R){for(var ge=R.length;0<=--ge;)R[ge]=0}function M(R){var ge=R.state,oe=ge.pending;oe>R.avail_out&&(oe=R.avail_out),oe!==0&&(o.arraySet(R.output,ge.pending_buf,ge.pending_out,oe,R.next_out),R.next_out+=oe,ge.pending_out+=oe,R.total_out+=oe,R.avail_out-=oe,ge.pending-=oe,ge.pending===0&&(ge.pending_out=0))}function U(R,ge){c._tr_flush_block(R,0<=R.block_start?R.block_start:-1,R.strstart-R.block_start,ge),R.block_start=R.strstart,M(R.strm)}function A(R,ge){R.pending_buf[R.pending++]=ge}function te(R,ge){R.pending_buf[R.pending++]=ge>>>8&255,R.pending_buf[R.pending++]=255&ge}function ce(R,ge){var oe,K,W=R.max_chain_length,re=R.strstart,ve=R.prev_length,we=R.nice_match,de=R.strstart>R.w_size-q?R.strstart-(R.w_size-q):0,Ce=R.window,Oe=R.w_mask,_e=R.prev,ie=R.strstart+j,xe=Ce[re+ve-1],Ne=Ce[re+ve];R.prev_length>=R.good_match&&(W>>=2),we>R.lookahead&&(we=R.lookahead);do if(Ce[(oe=ge)+ve]===Ne&&Ce[oe+ve-1]===xe&&Ce[oe]===Ce[re]&&Ce[++oe]===Ce[re+1]){re+=2,oe++;do;while(Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&Ce[++re]===Ce[++oe]&&re<ie);if(K=j-(ie-re),re=ie-j,ve<K){if(R.match_start=ge,we<=(ve=K))break;xe=Ce[re+ve-1],Ne=Ce[re+ve]}}while((ge=_e[ge&Oe])>de&&--W!=0);return ve<=R.lookahead?ve:R.lookahead}function Ee(R){var ge,oe,K,W,re,ve,we,de,Ce,Oe,_e=R.w_size;do{if(W=R.window_size-R.lookahead-R.strstart,R.strstart>=_e+(_e-q)){for(o.arraySet(R.window,R.window,_e,_e,0),R.match_start-=_e,R.strstart-=_e,R.block_start-=_e,ge=oe=R.hash_size;K=R.head[--ge],R.head[ge]=_e<=K?K-_e:0,--oe;);for(ge=oe=_e;K=R.prev[--ge],R.prev[ge]=_e<=K?K-_e:0,--oe;);W+=_e}if(R.strm.avail_in===0)break;if(ve=R.strm,we=R.window,de=R.strstart+R.lookahead,Ce=W,Oe=void 0,Oe=ve.avail_in,Ce<Oe&&(Oe=Ce),oe=Oe===0?0:(ve.avail_in-=Oe,o.arraySet(we,ve.input,ve.next_in,Oe,de),ve.state.wrap===1?ve.adler=d(ve.adler,we,Oe,de):ve.state.wrap===2&&(ve.adler=p(ve.adler,we,Oe,de)),ve.next_in+=Oe,ve.total_in+=Oe,Oe),R.lookahead+=oe,R.lookahead+R.insert>=z)for(re=R.strstart-R.insert,R.ins_h=R.window[re],R.ins_h=(R.ins_h<<R.hash_shift^R.window[re+1])&R.hash_mask;R.insert&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[re+z-1])&R.hash_mask,R.prev[re&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=re,re++,R.insert--,!(R.lookahead+R.insert<z)););}while(R.lookahead<q&&R.strm.avail_in!==0)}function Ue(R,ge){for(var oe,K;;){if(R.lookahead<q){if(Ee(R),R.lookahead<q&&ge===m)return _;if(R.lookahead===0)break}if(oe=0,R.lookahead>=z&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+z-1])&R.hash_mask,oe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),oe!==0&&R.strstart-oe<=R.w_size-q&&(R.match_length=ce(R,oe)),R.match_length>=z)if(K=c._tr_tally(R,R.strstart-R.match_start,R.match_length-z),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=z){for(R.match_length--;R.strstart++,R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+z-1])&R.hash_mask,oe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart,--R.match_length!=0;);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+1])&R.hash_mask;else K=c._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(K&&(U(R,!1),R.strm.avail_out===0))return _}return R.insert=R.strstart<z-1?R.strstart:z-1,ge===g?(U(R,!0),R.strm.avail_out===0?se:ne):R.last_lit&&(U(R,!1),R.strm.avail_out===0)?_:H}function Te(R,ge){for(var oe,K,W;;){if(R.lookahead<q){if(Ee(R),R.lookahead<q&&ge===m)return _;if(R.lookahead===0)break}if(oe=0,R.lookahead>=z&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+z-1])&R.hash_mask,oe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=z-1,oe!==0&&R.prev_length<R.max_lazy_match&&R.strstart-oe<=R.w_size-q&&(R.match_length=ce(R,oe),R.match_length<=5&&(R.strategy===1||R.match_length===z&&4096<R.strstart-R.match_start)&&(R.match_length=z-1)),R.prev_length>=z&&R.match_length<=R.prev_length){for(W=R.strstart+R.lookahead-z,K=c._tr_tally(R,R.strstart-1-R.prev_match,R.prev_length-z),R.lookahead-=R.prev_length-1,R.prev_length-=2;++R.strstart<=W&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+z-1])&R.hash_mask,oe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),--R.prev_length!=0;);if(R.match_available=0,R.match_length=z-1,R.strstart++,K&&(U(R,!1),R.strm.avail_out===0))return _}else if(R.match_available){if((K=c._tr_tally(R,0,R.window[R.strstart-1]))&&U(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return _}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(K=c._tr_tally(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<z-1?R.strstart:z-1,ge===g?(U(R,!0),R.strm.avail_out===0?se:ne):R.last_lit&&(U(R,!1),R.strm.avail_out===0)?_:H}function $e(R,ge,oe,K,W){this.good_length=R,this.max_lazy=ge,this.nice_length=oe,this.max_chain=K,this.func=W}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*O),this.dyn_dtree=new o.Buf16(2*(2*I+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(B+1),this.heap=new o.Buf16(2*D+1),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*D+1),P(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function rt(R){var ge;return R&&R.state?(R.total_in=R.total_out=0,R.data_type=k,(ge=R.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?F:G,R.adler=ge.wrap===2?0:1,ge.last_flush=m,c._tr_init(ge),b):Z(R,x)}function at(R){var ge=rt(R);return ge===b&&(function(oe){oe.window_size=2*oe.w_size,P(oe.head),oe.max_lazy_match=s[oe.level].max_lazy,oe.good_match=s[oe.level].good_length,oe.nice_match=s[oe.level].nice_length,oe.max_chain_length=s[oe.level].max_chain,oe.strstart=0,oe.block_start=0,oe.lookahead=0,oe.insert=0,oe.match_length=oe.prev_length=z-1,oe.match_available=0,oe.ins_h=0})(R.state),ge}function wt(R,ge,oe,K,W,re){if(!R)return x;var ve=1;if(ge===v&&(ge=6),K<0?(ve=0,K=-K):15<K&&(ve=2,K-=16),W<1||T<W||oe!==C||K<8||15<K||ge<0||9<ge||re<0||w<re)return Z(R,x);K===8&&(K=9);var we=new le;return(R.state=we).strm=R,we.wrap=ve,we.gzhead=null,we.w_bits=K,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=W+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+z-1)/z),we.window=new o.Buf8(2*we.w_size),we.head=new o.Buf16(we.hash_size),we.prev=new o.Buf16(we.w_size),we.lit_bufsize=1<<W+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new o.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=ge,we.strategy=re,we.method=oe,at(R)}s=[new $e(0,0,0,0,function(R,ge){var oe=65535;for(oe>R.pending_buf_size-5&&(oe=R.pending_buf_size-5);;){if(R.lookahead<=1){if(Ee(R),R.lookahead===0&&ge===m)return _;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;var K=R.block_start+oe;if((R.strstart===0||R.strstart>=K)&&(R.lookahead=R.strstart-K,R.strstart=K,U(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-q&&(U(R,!1),R.strm.avail_out===0))return _}return R.insert=0,ge===g?(U(R,!0),R.strm.avail_out===0?se:ne):(R.strstart>R.block_start&&(U(R,!1),R.strm.avail_out),_)}),new $e(4,4,8,4,Ue),new $e(4,5,16,8,Ue),new $e(4,6,32,32,Ue),new $e(4,4,16,16,Te),new $e(8,16,32,32,Te),new $e(8,16,128,128,Te),new $e(8,32,128,256,Te),new $e(32,128,258,1024,Te),new $e(32,258,258,4096,Te)],i.deflateInit=function(R,ge){return wt(R,ge,C,15,8,0)},i.deflateInit2=wt,i.deflateReset=at,i.deflateResetKeep=rt,i.deflateSetHeader=function(R,ge){return R&&R.state?R.state.wrap!==2?x:(R.state.gzhead=ge,b):x},i.deflate=function(R,ge){var oe,K,W,re;if(!R||!R.state||5<ge||ge<0)return R?Z(R,x):x;if(K=R.state,!R.output||!R.input&&R.avail_in!==0||K.status===666&&ge!==g)return Z(R,R.avail_out===0?-5:x);if(K.strm=R,oe=K.last_flush,K.last_flush=ge,K.status===F)if(K.wrap===2)R.adler=0,A(K,31),A(K,139),A(K,8),K.gzhead?(A(K,(K.gzhead.text?1:0)+(K.gzhead.hcrc?2:0)+(K.gzhead.extra?4:0)+(K.gzhead.name?8:0)+(K.gzhead.comment?16:0)),A(K,255&K.gzhead.time),A(K,K.gzhead.time>>8&255),A(K,K.gzhead.time>>16&255),A(K,K.gzhead.time>>24&255),A(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),A(K,255&K.gzhead.os),K.gzhead.extra&&K.gzhead.extra.length&&(A(K,255&K.gzhead.extra.length),A(K,K.gzhead.extra.length>>8&255)),K.gzhead.hcrc&&(R.adler=p(R.adler,K.pending_buf,K.pending,0)),K.gzindex=0,K.status=69):(A(K,0),A(K,0),A(K,0),A(K,0),A(K,0),A(K,K.level===9?2:2<=K.strategy||K.level<2?4:0),A(K,3),K.status=G);else{var ve=C+(K.w_bits-8<<4)<<8;ve|=(2<=K.strategy||K.level<2?0:K.level<6?1:K.level===6?2:3)<<6,K.strstart!==0&&(ve|=32),ve+=31-ve%31,K.status=G,te(K,ve),K.strstart!==0&&(te(K,R.adler>>>16),te(K,65535&R.adler)),R.adler=1}if(K.status===69)if(K.gzhead.extra){for(W=K.pending;K.gzindex<(65535&K.gzhead.extra.length)&&(K.pending!==K.pending_buf_size||(K.gzhead.hcrc&&K.pending>W&&(R.adler=p(R.adler,K.pending_buf,K.pending-W,W)),M(R),W=K.pending,K.pending!==K.pending_buf_size));)A(K,255&K.gzhead.extra[K.gzindex]),K.gzindex++;K.gzhead.hcrc&&K.pending>W&&(R.adler=p(R.adler,K.pending_buf,K.pending-W,W)),K.gzindex===K.gzhead.extra.length&&(K.gzindex=0,K.status=73)}else K.status=73;if(K.status===73)if(K.gzhead.name){W=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>W&&(R.adler=p(R.adler,K.pending_buf,K.pending-W,W)),M(R),W=K.pending,K.pending===K.pending_buf_size)){re=1;break}re=K.gzindex<K.gzhead.name.length?255&K.gzhead.name.charCodeAt(K.gzindex++):0,A(K,re)}while(re!==0);K.gzhead.hcrc&&K.pending>W&&(R.adler=p(R.adler,K.pending_buf,K.pending-W,W)),re===0&&(K.gzindex=0,K.status=91)}else K.status=91;if(K.status===91)if(K.gzhead.comment){W=K.pending;do{if(K.pending===K.pending_buf_size&&(K.gzhead.hcrc&&K.pending>W&&(R.adler=p(R.adler,K.pending_buf,K.pending-W,W)),M(R),W=K.pending,K.pending===K.pending_buf_size)){re=1;break}re=K.gzindex<K.gzhead.comment.length?255&K.gzhead.comment.charCodeAt(K.gzindex++):0,A(K,re)}while(re!==0);K.gzhead.hcrc&&K.pending>W&&(R.adler=p(R.adler,K.pending_buf,K.pending-W,W)),re===0&&(K.status=103)}else K.status=103;if(K.status===103&&(K.gzhead.hcrc?(K.pending+2>K.pending_buf_size&&M(R),K.pending+2<=K.pending_buf_size&&(A(K,255&R.adler),A(K,R.adler>>8&255),R.adler=0,K.status=G)):K.status=G),K.pending!==0){if(M(R),R.avail_out===0)return K.last_flush=-1,b}else if(R.avail_in===0&&J(ge)<=J(oe)&&ge!==g)return Z(R,-5);if(K.status===666&&R.avail_in!==0)return Z(R,-5);if(R.avail_in!==0||K.lookahead!==0||ge!==m&&K.status!==666){var we=K.strategy===2?(function(de,Ce){for(var Oe;;){if(de.lookahead===0&&(Ee(de),de.lookahead===0)){if(Ce===m)return _;break}if(de.match_length=0,Oe=c._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++,Oe&&(U(de,!1),de.strm.avail_out===0))return _}return de.insert=0,Ce===g?(U(de,!0),de.strm.avail_out===0?se:ne):de.last_lit&&(U(de,!1),de.strm.avail_out===0)?_:H})(K,ge):K.strategy===3?(function(de,Ce){for(var Oe,_e,ie,xe,Ne=de.window;;){if(de.lookahead<=j){if(Ee(de),de.lookahead<=j&&Ce===m)return _;if(de.lookahead===0)break}if(de.match_length=0,de.lookahead>=z&&0<de.strstart&&(_e=Ne[ie=de.strstart-1])===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]){xe=de.strstart+j;do;while(_e===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]&&_e===Ne[++ie]&&ie<xe);de.match_length=j-(xe-ie),de.match_length>de.lookahead&&(de.match_length=de.lookahead)}if(de.match_length>=z?(Oe=c._tr_tally(de,1,de.match_length-z),de.lookahead-=de.match_length,de.strstart+=de.match_length,de.match_length=0):(Oe=c._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++),Oe&&(U(de,!1),de.strm.avail_out===0))return _}return de.insert=0,Ce===g?(U(de,!0),de.strm.avail_out===0?se:ne):de.last_lit&&(U(de,!1),de.strm.avail_out===0)?_:H})(K,ge):s[K.level].func(K,ge);if(we!==se&&we!==ne||(K.status=666),we===_||we===se)return R.avail_out===0&&(K.last_flush=-1),b;if(we===H&&(ge===1?c._tr_align(K):ge!==5&&(c._tr_stored_block(K,0,0,!1),ge===3&&(P(K.head),K.lookahead===0&&(K.strstart=0,K.block_start=0,K.insert=0))),M(R),R.avail_out===0))return K.last_flush=-1,b}return ge!==g?b:K.wrap<=0?1:(K.wrap===2?(A(K,255&R.adler),A(K,R.adler>>8&255),A(K,R.adler>>16&255),A(K,R.adler>>24&255),A(K,255&R.total_in),A(K,R.total_in>>8&255),A(K,R.total_in>>16&255),A(K,R.total_in>>24&255)):(te(K,R.adler>>>16),te(K,65535&R.adler)),M(R),0<K.wrap&&(K.wrap=-K.wrap),K.pending!==0?b:1)},i.deflateEnd=function(R){var ge;return R&&R.state?(ge=R.state.status)!==F&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==G&&ge!==666?Z(R,x):(R.state=null,ge===G?Z(R,-3):b):x},i.deflateSetDictionary=function(R,ge){var oe,K,W,re,ve,we,de,Ce,Oe=ge.length;if(!R||!R.state||(re=(oe=R.state).wrap)===2||re===1&&oe.status!==F||oe.lookahead)return x;for(re===1&&(R.adler=d(R.adler,ge,Oe,0)),oe.wrap=0,Oe>=oe.w_size&&(re===0&&(P(oe.head),oe.strstart=0,oe.block_start=0,oe.insert=0),Ce=new o.Buf8(oe.w_size),o.arraySet(Ce,ge,Oe-oe.w_size,oe.w_size,0),ge=Ce,Oe=oe.w_size),ve=R.avail_in,we=R.next_in,de=R.input,R.avail_in=Oe,R.next_in=0,R.input=ge,Ee(oe);oe.lookahead>=z;){for(K=oe.strstart,W=oe.lookahead-(z-1);oe.ins_h=(oe.ins_h<<oe.hash_shift^oe.window[K+z-1])&oe.hash_mask,oe.prev[K&oe.w_mask]=oe.head[oe.ins_h],oe.head[oe.ins_h]=K,K++,--W;);oe.strstart=K,oe.lookahead=z-1,Ee(oe)}return oe.strstart+=oe.lookahead,oe.block_start=oe.strstart,oe.insert=oe.lookahead,oe.lookahead=0,oe.match_length=oe.prev_length=z-1,oe.match_available=0,R.next_in=we,R.input=de,R.avail_in=ve,oe.wrap=re,b},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var c,d,p,h,m,g,b,x,v,w,k,C,T,D,I,L,O,B,z,j,q,F,G,_,H;c=s.state,d=s.next_in,_=s.input,p=d+(s.avail_in-5),h=s.next_out,H=s.output,m=h-(o-s.avail_out),g=h+(s.avail_out-257),b=c.dmax,x=c.wsize,v=c.whave,w=c.wnext,k=c.window,C=c.hold,T=c.bits,D=c.lencode,I=c.distcode,L=(1<<c.lenbits)-1,O=(1<<c.distbits)-1;e:do{T<15&&(C+=_[d++]<<T,T+=8,C+=_[d++]<<T,T+=8),B=D[C&L];t:for(;;){if(C>>>=z=B>>>24,T-=z,(z=B>>>16&255)===0)H[h++]=65535&B;else{if(!(16&z)){if((64&z)==0){B=D[(65535&B)+(C&(1<<z)-1)];continue t}if(32&z){c.mode=12;break e}s.msg="invalid literal/length code",c.mode=30;break e}j=65535&B,(z&=15)&&(T<z&&(C+=_[d++]<<T,T+=8),j+=C&(1<<z)-1,C>>>=z,T-=z),T<15&&(C+=_[d++]<<T,T+=8,C+=_[d++]<<T,T+=8),B=I[C&O];n:for(;;){if(C>>>=z=B>>>24,T-=z,!(16&(z=B>>>16&255))){if((64&z)==0){B=I[(65535&B)+(C&(1<<z)-1)];continue n}s.msg="invalid distance code",c.mode=30;break e}if(q=65535&B,T<(z&=15)&&(C+=_[d++]<<T,(T+=8)<z&&(C+=_[d++]<<T,T+=8)),b<(q+=C&(1<<z)-1)){s.msg="invalid distance too far back",c.mode=30;break e}if(C>>>=z,T-=z,(z=h-m)<q){if(v<(z=q-z)&&c.sane){s.msg="invalid distance too far back",c.mode=30;break e}if(G=k,(F=0)===w){if(F+=x-z,z<j){for(j-=z;H[h++]=k[F++],--z;);F=h-q,G=H}}else if(w<z){if(F+=x+w-z,(z-=w)<j){for(j-=z;H[h++]=k[F++],--z;);if(F=0,w<j){for(j-=z=w;H[h++]=k[F++],--z;);F=h-q,G=H}}}else if(F+=w-z,z<j){for(j-=z;H[h++]=k[F++],--z;);F=h-q,G=H}for(;2<j;)H[h++]=G[F++],H[h++]=G[F++],H[h++]=G[F++],j-=3;j&&(H[h++]=G[F++],1<j&&(H[h++]=G[F++]))}else{for(F=h-q;H[h++]=H[F++],H[h++]=H[F++],H[h++]=H[F++],2<(j-=3););j&&(H[h++]=H[F++],1<j&&(H[h++]=H[F++]))}break}}break}}while(d<p&&h<g);d-=j=T>>3,C&=(1<<(T-=j<<3))-1,s.next_in=d,s.next_out=h,s.avail_in=d<p?p-d+5:5-(d-p),s.avail_out=h<g?g-h+257:257-(h-g),c.hold=C,c.bits=T}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),c=n("./crc32"),d=n("./inffast"),p=n("./inftrees"),h=1,m=2,g=0,b=-2,x=1,v=852,w=592;function k(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(F){var G;return F&&F.state?(G=F.state,F.total_in=F.total_out=G.total=0,F.msg="",G.wrap&&(F.adler=1&G.wrap),G.mode=x,G.last=0,G.havedict=0,G.dmax=32768,G.head=null,G.hold=0,G.bits=0,G.lencode=G.lendyn=new s.Buf32(v),G.distcode=G.distdyn=new s.Buf32(w),G.sane=1,G.back=-1,g):b}function D(F){var G;return F&&F.state?((G=F.state).wsize=0,G.whave=0,G.wnext=0,T(F)):b}function I(F,G){var _,H;return F&&F.state?(H=F.state,G<0?(_=0,G=-G):(_=1+(G>>4),G<48&&(G&=15)),G&&(G<8||15<G)?b:(H.window!==null&&H.wbits!==G&&(H.window=null),H.wrap=_,H.wbits=G,D(F))):b}function L(F,G){var _,H;return F?(H=new C,(F.state=H).window=null,(_=I(F,G))!==g&&(F.state=null),_):b}var O,B,z=!0;function j(F){if(z){var G;for(O=new s.Buf32(512),B=new s.Buf32(32),G=0;G<144;)F.lens[G++]=8;for(;G<256;)F.lens[G++]=9;for(;G<280;)F.lens[G++]=7;for(;G<288;)F.lens[G++]=8;for(p(h,F.lens,0,288,O,0,F.work,{bits:9}),G=0;G<32;)F.lens[G++]=5;p(m,F.lens,0,32,B,0,F.work,{bits:5}),z=!1}F.lencode=O,F.lenbits=9,F.distcode=B,F.distbits=5}function q(F,G,_,H){var se,ne=F.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new s.Buf8(ne.wsize)),H>=ne.wsize?(s.arraySet(ne.window,G,_-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(H<(se=ne.wsize-ne.wnext)&&(se=H),s.arraySet(ne.window,G,_-H,se,ne.wnext),(H-=se)?(s.arraySet(ne.window,G,_-H,H,0),ne.wnext=H,ne.whave=ne.wsize):(ne.wnext+=se,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=se))),0}i.inflateReset=D,i.inflateReset2=I,i.inflateResetKeep=T,i.inflateInit=function(F){return L(F,15)},i.inflateInit2=L,i.inflate=function(F,G){var _,H,se,ne,Z,J,P,M,U,A,te,ce,Ee,Ue,Te,$e,le,rt,at,wt,R,ge,oe,K,W=0,re=new s.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return b;(_=F.state).mode===12&&(_.mode=13),Z=F.next_out,se=F.output,P=F.avail_out,ne=F.next_in,H=F.input,J=F.avail_in,M=_.hold,U=_.bits,A=J,te=P,ge=g;e:for(;;)switch(_.mode){case x:if(_.wrap===0){_.mode=13;break}for(;U<16;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(2&_.wrap&&M===35615){re[_.check=0]=255&M,re[1]=M>>>8&255,_.check=c(_.check,re,2,0),U=M=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&M)<<8)+(M>>8))%31){F.msg="incorrect header check",_.mode=30;break}if((15&M)!=8){F.msg="unknown compression method",_.mode=30;break}if(U-=4,R=8+(15&(M>>>=4)),_.wbits===0)_.wbits=R;else if(R>_.wbits){F.msg="invalid window size",_.mode=30;break}_.dmax=1<<R,F.adler=_.check=1,_.mode=512&M?10:12,U=M=0;break;case 2:for(;U<16;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(_.flags=M,(255&_.flags)!=8){F.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){F.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=M>>8&1),512&_.flags&&(re[0]=255&M,re[1]=M>>>8&255,_.check=c(_.check,re,2,0)),U=M=0,_.mode=3;case 3:for(;U<32;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}_.head&&(_.head.time=M),512&_.flags&&(re[0]=255&M,re[1]=M>>>8&255,re[2]=M>>>16&255,re[3]=M>>>24&255,_.check=c(_.check,re,4,0)),U=M=0,_.mode=4;case 4:for(;U<16;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}_.head&&(_.head.xflags=255&M,_.head.os=M>>8),512&_.flags&&(re[0]=255&M,re[1]=M>>>8&255,_.check=c(_.check,re,2,0)),U=M=0,_.mode=5;case 5:if(1024&_.flags){for(;U<16;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}_.length=M,_.head&&(_.head.extra_len=M),512&_.flags&&(re[0]=255&M,re[1]=M>>>8&255,_.check=c(_.check,re,2,0)),U=M=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(J<(ce=_.length)&&(ce=J),ce&&(_.head&&(R=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,H,ne,ce,R)),512&_.flags&&(_.check=c(_.check,H,ce,ne)),J-=ce,ne+=ce,_.length-=ce),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(J===0)break e;for(ce=0;R=H[ne+ce++],_.head&&R&&_.length<65536&&(_.head.name+=String.fromCharCode(R)),R&&ce<J;);if(512&_.flags&&(_.check=c(_.check,H,ce,ne)),J-=ce,ne+=ce,R)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(J===0)break e;for(ce=0;R=H[ne+ce++],_.head&&R&&_.length<65536&&(_.head.comment+=String.fromCharCode(R)),R&&ce<J;);if(512&_.flags&&(_.check=c(_.check,H,ce,ne)),J-=ce,ne+=ce,R)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;U<16;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(M!==(65535&_.check)){F.msg="header crc mismatch",_.mode=30;break}U=M=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),F.adler=_.check=0,_.mode=12;break;case 10:for(;U<32;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}F.adler=_.check=k(M),U=M=0,_.mode=11;case 11:if(_.havedict===0)return F.next_out=Z,F.avail_out=P,F.next_in=ne,F.avail_in=J,_.hold=M,_.bits=U,2;F.adler=_.check=1,_.mode=12;case 12:if(G===5||G===6)break e;case 13:if(_.last){M>>>=7&U,U-=7&U,_.mode=27;break}for(;U<3;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}switch(_.last=1&M,U-=1,3&(M>>>=1)){case 0:_.mode=14;break;case 1:if(j(_),_.mode=20,G!==6)break;M>>>=2,U-=2;break e;case 2:_.mode=17;break;case 3:F.msg="invalid block type",_.mode=30}M>>>=2,U-=2;break;case 14:for(M>>>=7&U,U-=7&U;U<32;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if((65535&M)!=(M>>>16^65535)){F.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&M,U=M=0,_.mode=15,G===6)break e;case 15:_.mode=16;case 16:if(ce=_.length){if(J<ce&&(ce=J),P<ce&&(ce=P),ce===0)break e;s.arraySet(se,H,ne,ce,Z),J-=ce,ne+=ce,P-=ce,Z+=ce,_.length-=ce;break}_.mode=12;break;case 17:for(;U<14;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(_.nlen=257+(31&M),M>>>=5,U-=5,_.ndist=1+(31&M),M>>>=5,U-=5,_.ncode=4+(15&M),M>>>=4,U-=4,286<_.nlen||30<_.ndist){F.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;U<3;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}_.lens[ve[_.have++]]=7&M,M>>>=3,U-=3}for(;_.have<19;)_.lens[ve[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,oe={bits:_.lenbits},ge=p(0,_.lens,0,19,_.lencode,0,_.work,oe),_.lenbits=oe.bits,ge){F.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;$e=(W=_.lencode[M&(1<<_.lenbits)-1])>>>16&255,le=65535&W,!((Te=W>>>24)<=U);){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(le<16)M>>>=Te,U-=Te,_.lens[_.have++]=le;else{if(le===16){for(K=Te+2;U<K;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(M>>>=Te,U-=Te,_.have===0){F.msg="invalid bit length repeat",_.mode=30;break}R=_.lens[_.have-1],ce=3+(3&M),M>>>=2,U-=2}else if(le===17){for(K=Te+3;U<K;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}U-=Te,R=0,ce=3+(7&(M>>>=Te)),M>>>=3,U-=3}else{for(K=Te+7;U<K;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}U-=Te,R=0,ce=11+(127&(M>>>=Te)),M>>>=7,U-=7}if(_.have+ce>_.nlen+_.ndist){F.msg="invalid bit length repeat",_.mode=30;break}for(;ce--;)_.lens[_.have++]=R}}if(_.mode===30)break;if(_.lens[256]===0){F.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,oe={bits:_.lenbits},ge=p(h,_.lens,0,_.nlen,_.lencode,0,_.work,oe),_.lenbits=oe.bits,ge){F.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,oe={bits:_.distbits},ge=p(m,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,oe),_.distbits=oe.bits,ge){F.msg="invalid distances set",_.mode=30;break}if(_.mode=20,G===6)break e;case 20:_.mode=21;case 21:if(6<=J&&258<=P){F.next_out=Z,F.avail_out=P,F.next_in=ne,F.avail_in=J,_.hold=M,_.bits=U,d(F,te),Z=F.next_out,se=F.output,P=F.avail_out,ne=F.next_in,H=F.input,J=F.avail_in,M=_.hold,U=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;$e=(W=_.lencode[M&(1<<_.lenbits)-1])>>>16&255,le=65535&W,!((Te=W>>>24)<=U);){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if($e&&(240&$e)==0){for(rt=Te,at=$e,wt=le;$e=(W=_.lencode[wt+((M&(1<<rt+at)-1)>>rt)])>>>16&255,le=65535&W,!(rt+(Te=W>>>24)<=U);){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}M>>>=rt,U-=rt,_.back+=rt}if(M>>>=Te,U-=Te,_.back+=Te,_.length=le,$e===0){_.mode=26;break}if(32&$e){_.back=-1,_.mode=12;break}if(64&$e){F.msg="invalid literal/length code",_.mode=30;break}_.extra=15&$e,_.mode=22;case 22:if(_.extra){for(K=_.extra;U<K;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}_.length+=M&(1<<_.extra)-1,M>>>=_.extra,U-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;$e=(W=_.distcode[M&(1<<_.distbits)-1])>>>16&255,le=65535&W,!((Te=W>>>24)<=U);){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if((240&$e)==0){for(rt=Te,at=$e,wt=le;$e=(W=_.distcode[wt+((M&(1<<rt+at)-1)>>rt)])>>>16&255,le=65535&W,!(rt+(Te=W>>>24)<=U);){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}M>>>=rt,U-=rt,_.back+=rt}if(M>>>=Te,U-=Te,_.back+=Te,64&$e){F.msg="invalid distance code",_.mode=30;break}_.offset=le,_.extra=15&$e,_.mode=24;case 24:if(_.extra){for(K=_.extra;U<K;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}_.offset+=M&(1<<_.extra)-1,M>>>=_.extra,U-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){F.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(P===0)break e;if(ce=te-P,_.offset>ce){if((ce=_.offset-ce)>_.whave&&_.sane){F.msg="invalid distance too far back",_.mode=30;break}Ee=ce>_.wnext?(ce-=_.wnext,_.wsize-ce):_.wnext-ce,ce>_.length&&(ce=_.length),Ue=_.window}else Ue=se,Ee=Z-_.offset,ce=_.length;for(P<ce&&(ce=P),P-=ce,_.length-=ce;se[Z++]=Ue[Ee++],--ce;);_.length===0&&(_.mode=21);break;case 26:if(P===0)break e;se[Z++]=_.length,P--,_.mode=21;break;case 27:if(_.wrap){for(;U<32;){if(J===0)break e;J--,M|=H[ne++]<<U,U+=8}if(te-=P,F.total_out+=te,_.total+=te,te&&(F.adler=_.check=_.flags?c(_.check,se,te,Z-te):o(_.check,se,te,Z-te)),te=P,(_.flags?M:k(M))!==_.check){F.msg="incorrect data check",_.mode=30;break}U=M=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;U<32;){if(J===0)break e;J--,M+=H[ne++]<<U,U+=8}if(M!==(4294967295&_.total)){F.msg="incorrect length check",_.mode=30;break}U=M=0}_.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return b}return F.next_out=Z,F.avail_out=P,F.next_in=ne,F.avail_in=J,_.hold=M,_.bits=U,(_.wsize||te!==F.avail_out&&_.mode<30&&(_.mode<27||G!==4))&&q(F,F.output,F.next_out,te-F.avail_out)?(_.mode=31,-4):(A-=F.avail_in,te-=F.avail_out,F.total_in+=A,F.total_out+=te,_.total+=te,_.wrap&&te&&(F.adler=_.check=_.flags?c(_.check,se,te,F.next_out-te):o(_.check,se,te,F.next_out-te)),F.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(A==0&&te===0||G===4)&&ge===g&&(ge=-5),ge)},i.inflateEnd=function(F){if(!F||!F.state)return b;var G=F.state;return G.window&&(G.window=null),F.state=null,g},i.inflateGetHeader=function(F,G){var _;return F&&F.state?(2&(_=F.state).wrap)==0?b:((_.head=G).done=!1,g):b},i.inflateSetDictionary=function(F,G){var _,H=G.length;return F&&F.state?(_=F.state).wrap!==0&&_.mode!==11?b:_.mode===11&&o(1,G,H,0)!==_.check?-3:q(F,G,H,H)?(_.mode=31,-4):(_.havedict=1,g):b},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,m,g,b,x,v,w,k){var C,T,D,I,L,O,B,z,j,q=k.bits,F=0,G=0,_=0,H=0,se=0,ne=0,Z=0,J=0,P=0,M=0,U=null,A=0,te=new s.Buf16(16),ce=new s.Buf16(16),Ee=null,Ue=0;for(F=0;F<=15;F++)te[F]=0;for(G=0;G<b;G++)te[m[g+G]]++;for(se=q,H=15;1<=H&&te[H]===0;H--);if(H<se&&(se=H),H===0)return x[v++]=20971520,x[v++]=20971520,k.bits=1,0;for(_=1;_<H&&te[_]===0;_++);for(se<_&&(se=_),F=J=1;F<=15;F++)if(J<<=1,(J-=te[F])<0)return-1;if(0<J&&(h===0||H!==1))return-1;for(ce[1]=0,F=1;F<15;F++)ce[F+1]=ce[F]+te[F];for(G=0;G<b;G++)m[g+G]!==0&&(w[ce[m[g+G]]++]=G);if(O=h===0?(U=Ee=w,19):h===1?(U=o,A-=257,Ee=c,Ue-=257,256):(U=d,Ee=p,-1),F=_,L=v,Z=G=M=0,D=-1,I=(P=1<<(ne=se))-1,h===1&&852<P||h===2&&592<P)return 1;for(;;){for(B=F-Z,j=w[G]<O?(z=0,w[G]):w[G]>O?(z=Ee[Ue+w[G]],U[A+w[G]]):(z=96,0),C=1<<F-Z,_=T=1<<ne;x[L+(M>>Z)+(T-=C)]=B<<24|z<<16|j|0,T!==0;);for(C=1<<F-1;M&C;)C>>=1;if(C!==0?(M&=C-1,M+=C):M=0,G++,--te[F]==0){if(F===H)break;F=m[g+w[G]]}if(se<F&&(M&I)!==D){for(Z===0&&(Z=se),L+=_,J=1<<(ne=F-Z);ne+Z<H&&!((J-=te[ne+Z])<=0);)ne++,J<<=1;if(P+=1<<ne,h===1&&852<P||h===2&&592<P)return 1;x[D=M&I]=se<<24|ne<<16|L-v|0}}return M!==0&&(x[L+M]=F-Z<<24|64<<16|0),k.bits=se,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,c=1;function d(W){for(var re=W.length;0<=--re;)W[re]=0}var p=0,h=29,m=256,g=m+1+h,b=30,x=19,v=2*g+1,w=15,k=16,C=7,T=256,D=16,I=17,L=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(g+2));d(q);var F=new Array(2*b);d(F);var G=new Array(512);d(G);var _=new Array(256);d(_);var H=new Array(h);d(H);var se,ne,Z,J=new Array(b);function P(W,re,ve,we,de){this.static_tree=W,this.extra_bits=re,this.extra_base=ve,this.elems=we,this.max_length=de,this.has_stree=W&&W.length}function M(W,re){this.dyn_tree=W,this.max_code=0,this.stat_desc=re}function U(W){return W<256?G[W]:G[256+(W>>>7)]}function A(W,re){W.pending_buf[W.pending++]=255&re,W.pending_buf[W.pending++]=re>>>8&255}function te(W,re,ve){W.bi_valid>k-ve?(W.bi_buf|=re<<W.bi_valid&65535,A(W,W.bi_buf),W.bi_buf=re>>k-W.bi_valid,W.bi_valid+=ve-k):(W.bi_buf|=re<<W.bi_valid&65535,W.bi_valid+=ve)}function ce(W,re,ve){te(W,ve[2*re],ve[2*re+1])}function Ee(W,re){for(var ve=0;ve|=1&W,W>>>=1,ve<<=1,0<--re;);return ve>>>1}function Ue(W,re,ve){var we,de,Ce=new Array(w+1),Oe=0;for(we=1;we<=w;we++)Ce[we]=Oe=Oe+ve[we-1]<<1;for(de=0;de<=re;de++){var _e=W[2*de+1];_e!==0&&(W[2*de]=Ee(Ce[_e]++,_e))}}function Te(W){var re;for(re=0;re<g;re++)W.dyn_ltree[2*re]=0;for(re=0;re<b;re++)W.dyn_dtree[2*re]=0;for(re=0;re<x;re++)W.bl_tree[2*re]=0;W.dyn_ltree[2*T]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function $e(W){8<W.bi_valid?A(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function le(W,re,ve,we){var de=2*re,Ce=2*ve;return W[de]<W[Ce]||W[de]===W[Ce]&&we[re]<=we[ve]}function rt(W,re,ve){for(var we=W.heap[ve],de=ve<<1;de<=W.heap_len&&(de<W.heap_len&&le(re,W.heap[de+1],W.heap[de],W.depth)&&de++,!le(re,we,W.heap[de],W.depth));)W.heap[ve]=W.heap[de],ve=de,de<<=1;W.heap[ve]=we}function at(W,re,ve){var we,de,Ce,Oe,_e=0;if(W.last_lit!==0)for(;we=W.pending_buf[W.d_buf+2*_e]<<8|W.pending_buf[W.d_buf+2*_e+1],de=W.pending_buf[W.l_buf+_e],_e++,we===0?ce(W,de,re):(ce(W,(Ce=_[de])+m+1,re),(Oe=O[Ce])!==0&&te(W,de-=H[Ce],Oe),ce(W,Ce=U(--we),ve),(Oe=B[Ce])!==0&&te(W,we-=J[Ce],Oe)),_e<W.last_lit;);ce(W,T,re)}function wt(W,re){var ve,we,de,Ce=re.dyn_tree,Oe=re.stat_desc.static_tree,_e=re.stat_desc.has_stree,ie=re.stat_desc.elems,xe=-1;for(W.heap_len=0,W.heap_max=v,ve=0;ve<ie;ve++)Ce[2*ve]!==0?(W.heap[++W.heap_len]=xe=ve,W.depth[ve]=0):Ce[2*ve+1]=0;for(;W.heap_len<2;)Ce[2*(de=W.heap[++W.heap_len]=xe<2?++xe:0)]=1,W.depth[de]=0,W.opt_len--,_e&&(W.static_len-=Oe[2*de+1]);for(re.max_code=xe,ve=W.heap_len>>1;1<=ve;ve--)rt(W,Ce,ve);for(de=ie;ve=W.heap[1],W.heap[1]=W.heap[W.heap_len--],rt(W,Ce,1),we=W.heap[1],W.heap[--W.heap_max]=ve,W.heap[--W.heap_max]=we,Ce[2*de]=Ce[2*ve]+Ce[2*we],W.depth[de]=(W.depth[ve]>=W.depth[we]?W.depth[ve]:W.depth[we])+1,Ce[2*ve+1]=Ce[2*we+1]=de,W.heap[1]=de++,rt(W,Ce,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],(function(Ne,Ve){var ct,ht,sn,ut,un,fn,_t=Ve.dyn_tree,bn=Ve.max_code,Kt=Ve.stat_desc.static_tree,$n=Ve.stat_desc.has_stree,sr=Ve.stat_desc.extra_bits,Tn=Ve.stat_desc.extra_base,Nt=Ve.stat_desc.max_length,Pt=0;for(ut=0;ut<=w;ut++)Ne.bl_count[ut]=0;for(_t[2*Ne.heap[Ne.heap_max]+1]=0,ct=Ne.heap_max+1;ct<v;ct++)Nt<(ut=_t[2*_t[2*(ht=Ne.heap[ct])+1]+1]+1)&&(ut=Nt,Pt++),_t[2*ht+1]=ut,bn<ht||(Ne.bl_count[ut]++,un=0,Tn<=ht&&(un=sr[ht-Tn]),fn=_t[2*ht],Ne.opt_len+=fn*(ut+un),$n&&(Ne.static_len+=fn*(Kt[2*ht+1]+un)));if(Pt!==0){do{for(ut=Nt-1;Ne.bl_count[ut]===0;)ut--;Ne.bl_count[ut]--,Ne.bl_count[ut+1]+=2,Ne.bl_count[Nt]--,Pt-=2}while(0<Pt);for(ut=Nt;ut!==0;ut--)for(ht=Ne.bl_count[ut];ht!==0;)bn<(sn=Ne.heap[--ct])||(_t[2*sn+1]!==ut&&(Ne.opt_len+=(ut-_t[2*sn+1])*_t[2*sn],_t[2*sn+1]=ut),ht--)}})(W,re),Ue(Ce,xe,W.bl_count)}function R(W,re,ve){var we,de,Ce=-1,Oe=re[1],_e=0,ie=7,xe=4;for(Oe===0&&(ie=138,xe=3),re[2*(ve+1)+1]=65535,we=0;we<=ve;we++)de=Oe,Oe=re[2*(we+1)+1],++_e<ie&&de===Oe||(_e<xe?W.bl_tree[2*de]+=_e:de!==0?(de!==Ce&&W.bl_tree[2*de]++,W.bl_tree[2*D]++):_e<=10?W.bl_tree[2*I]++:W.bl_tree[2*L]++,Ce=de,xe=(_e=0)===Oe?(ie=138,3):de===Oe?(ie=6,3):(ie=7,4))}function ge(W,re,ve){var we,de,Ce=-1,Oe=re[1],_e=0,ie=7,xe=4;for(Oe===0&&(ie=138,xe=3),we=0;we<=ve;we++)if(de=Oe,Oe=re[2*(we+1)+1],!(++_e<ie&&de===Oe)){if(_e<xe)for(;ce(W,de,W.bl_tree),--_e!=0;);else de!==0?(de!==Ce&&(ce(W,de,W.bl_tree),_e--),ce(W,D,W.bl_tree),te(W,_e-3,2)):_e<=10?(ce(W,I,W.bl_tree),te(W,_e-3,3)):(ce(W,L,W.bl_tree),te(W,_e-11,7));Ce=de,xe=(_e=0)===Oe?(ie=138,3):de===Oe?(ie=6,3):(ie=7,4)}}d(J);var oe=!1;function K(W,re,ve,we){te(W,(p<<1)+(we?1:0),3),(function(de,Ce,Oe,_e){$e(de),A(de,Oe),A(de,~Oe),s.arraySet(de.pending_buf,de.window,Ce,Oe,de.pending),de.pending+=Oe})(W,re,ve)}i._tr_init=function(W){oe||((function(){var re,ve,we,de,Ce,Oe=new Array(w+1);for(de=we=0;de<h-1;de++)for(H[de]=we,re=0;re<1<<O[de];re++)_[we++]=de;for(_[we-1]=de,de=Ce=0;de<16;de++)for(J[de]=Ce,re=0;re<1<<B[de];re++)G[Ce++]=de;for(Ce>>=7;de<b;de++)for(J[de]=Ce<<7,re=0;re<1<<B[de]-7;re++)G[256+Ce++]=de;for(ve=0;ve<=w;ve++)Oe[ve]=0;for(re=0;re<=143;)q[2*re+1]=8,re++,Oe[8]++;for(;re<=255;)q[2*re+1]=9,re++,Oe[9]++;for(;re<=279;)q[2*re+1]=7,re++,Oe[7]++;for(;re<=287;)q[2*re+1]=8,re++,Oe[8]++;for(Ue(q,g+1,Oe),re=0;re<b;re++)F[2*re+1]=5,F[2*re]=Ee(re,5);se=new P(q,O,m+1,g,w),ne=new P(F,B,0,b,w),Z=new P(new Array(0),z,0,x,C)})(),oe=!0),W.l_desc=new M(W.dyn_ltree,se),W.d_desc=new M(W.dyn_dtree,ne),W.bl_desc=new M(W.bl_tree,Z),W.bi_buf=0,W.bi_valid=0,Te(W)},i._tr_stored_block=K,i._tr_flush_block=function(W,re,ve,we){var de,Ce,Oe=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=(function(_e){var ie,xe=4093624447;for(ie=0;ie<=31;ie++,xe>>>=1)if(1&xe&&_e.dyn_ltree[2*ie]!==0)return o;if(_e.dyn_ltree[18]!==0||_e.dyn_ltree[20]!==0||_e.dyn_ltree[26]!==0)return c;for(ie=32;ie<m;ie++)if(_e.dyn_ltree[2*ie]!==0)return c;return o})(W)),wt(W,W.l_desc),wt(W,W.d_desc),Oe=(function(_e){var ie;for(R(_e,_e.dyn_ltree,_e.l_desc.max_code),R(_e,_e.dyn_dtree,_e.d_desc.max_code),wt(_e,_e.bl_desc),ie=x-1;3<=ie&&_e.bl_tree[2*j[ie]+1]===0;ie--);return _e.opt_len+=3*(ie+1)+5+5+4,ie})(W),de=W.opt_len+3+7>>>3,(Ce=W.static_len+3+7>>>3)<=de&&(de=Ce)):de=Ce=ve+5,ve+4<=de&&re!==-1?K(W,re,ve,we):W.strategy===4||Ce===de?(te(W,2+(we?1:0),3),at(W,q,F)):(te(W,4+(we?1:0),3),(function(_e,ie,xe,Ne){var Ve;for(te(_e,ie-257,5),te(_e,xe-1,5),te(_e,Ne-4,4),Ve=0;Ve<Ne;Ve++)te(_e,_e.bl_tree[2*j[Ve]+1],3);ge(_e,_e.dyn_ltree,ie-1),ge(_e,_e.dyn_dtree,xe-1)})(W,W.l_desc.max_code+1,W.d_desc.max_code+1,Oe+1),at(W,W.dyn_ltree,W.dyn_dtree)),Te(W),we&&$e(W)},i._tr_tally=function(W,re,ve){return W.pending_buf[W.d_buf+2*W.last_lit]=re>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&re,W.pending_buf[W.l_buf+W.last_lit]=255&ve,W.last_lit++,re===0?W.dyn_ltree[2*ve]++:(W.matches++,re--,W.dyn_ltree[2*(_[ve]+m+1)]++,W.dyn_dtree[2*U(re)]++),W.last_lit===W.lit_bufsize-1},i._tr_align=function(W){te(W,2,3),ce(W,T,q),(function(re){re.bi_valid===16?(A(re,re.bi_buf),re.bi_buf=0,re.bi_valid=0):8<=re.bi_valid&&(re.pending_buf[re.pending++]=255&re.bi_buf,re.bi_buf>>=8,re.bi_valid-=8)})(W)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,c){if(!o.setImmediate){var d,p,h,m,g=1,b={},x=!1,v=o.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(o);w=w&&w.setTimeout?w:o,d={}.toString.call(o.process)==="[object process]"?function(D){process.nextTick(function(){C(D)})}:(function(){if(o.postMessage&&!o.importScripts){var D=!0,I=o.onmessage;return o.onmessage=function(){D=!1},o.postMessage("","*"),o.onmessage=I,D}})()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(D){o.postMessage(m+D,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(D){C(D.data)},function(D){h.port2.postMessage(D)}):v&&"onreadystatechange"in v.createElement("script")?(p=v.documentElement,function(D){var I=v.createElement("script");I.onreadystatechange=function(){C(D),I.onreadystatechange=null,p.removeChild(I),I=null},p.appendChild(I)}):function(D){setTimeout(C,0,D)},w.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var I=new Array(arguments.length-1),L=0;L<I.length;L++)I[L]=arguments[L+1];var O={callback:D,args:I};return b[g]=O,d(g),g++},w.clearImmediate=k}function k(D){delete b[D]}function C(D){if(x)setTimeout(C,0,D);else{var I=b[D];if(I){x=!0;try{(function(L){var O=L.callback,B=L.args;switch(B.length){case 0:O();break;case 1:O(B[0]);break;case 2:O(B[0],B[1]);break;case 3:O(B[0],B[1],B[2]);break;default:O.apply(c,B)}})(I)}finally{k(D),x=!1}}}}function T(D){D.source===o&&typeof D.data=="string"&&D.data.indexOf(m)===0&&C(+D.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Yd)),Yd.exports}var HS=US();const ix=fs(HS),sx=new Set(["dice","unique","again","true","false","null","and","or","not","contains","matches","shared","math"]),qS=/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)*$/,VS=/^\d+\.\d+\.\d+(-[a-zA-Z0-9.]+)?(\+[a-zA-Z0-9.]+)?$/,ox=/^[a-zA-Z_][a-zA-Z0-9_]*$/;function lx(e){const t=[];WS(e,t);const n=new Set,r=new Set;for(const o of e.tables)n.add(o.id);for(const o of e.templates??[])r.add(o.id);for(let o=0;o<e.tables.length;o++)GS(e.tables[o],`tables[${o}]`,n,t);for(let o=0;o<(e.templates??[]).length;o++)XS(e.templates[o],`templates[${o}]`,n,t);e.variables&&Cc(e.variables,"variables",t),e.shared&&Cc(e.shared,"shared",t);for(const o of n)r.has(o)&&t.push({severity:"warning",code:"ID_COLLISION",message:`Table and template share the same ID: ${o}`,suggestion:"Consider using unique IDs to avoid confusion"});QS(e.tables,t);const i=t.filter(o=>o.severity==="error"),s=t.filter(o=>o.severity==="warning");return{valid:i.length===0,issues:t,errors:i,warnings:s}}function WS(e,t){const n=e.metadata;(!n.name||n.name.trim()==="")&&t.push({severity:"error",code:"MISSING_NAME",message:"Metadata name is required",path:"metadata.name"}),n.namespace?qS.test(n.namespace)||t.push({severity:"error",code:"INVALID_NAMESPACE",message:`Invalid namespace format: ${n.namespace}`,path:"metadata.namespace",suggestion:'Use dot-separated segments (e.g., "fantasy.core")'}):t.push({severity:"error",code:"MISSING_NAMESPACE",message:"Metadata namespace is required",path:"metadata.namespace"}),n.version?VS.test(n.version)||t.push({severity:"warning",code:"INVALID_VERSION",message:`Version should follow semver format: ${n.version}`,path:"metadata.version",suggestion:'Use semantic versioning (e.g., "1.0.0")'}):t.push({severity:"error",code:"MISSING_VERSION",message:"Metadata version is required",path:"metadata.version"}),n.specVersion!=="1.0"&&t.push({severity:"error",code:"INVALID_SPEC_VERSION",message:`Unsupported spec version: ${n.specVersion}`,path:"metadata.specVersion",suggestion:'Use specVersion "1.0"'}),n.maxRecursionDepth!==void 0&&n.maxRecursionDepth<1&&t.push({severity:"error",code:"INVALID_CONFIG",message:"maxRecursionDepth must be at least 1",path:"metadata.maxRecursionDepth"}),n.maxExplodingDice!==void 0&&n.maxExplodingDice<1&&t.push({severity:"error",code:"INVALID_CONFIG",message:"maxExplodingDice must be at least 1",path:"metadata.maxExplodingDice"}),n.maxInheritanceDepth!==void 0&&n.maxInheritanceDepth<1&&t.push({severity:"error",code:"INVALID_CONFIG",message:"maxInheritanceDepth must be at least 1",path:"metadata.maxInheritanceDepth"})}function GS(e,t,n,r){if($f(e.id,`${t}.id`,"Table",r),(!e.name||e.name.trim()==="")&&r.push({severity:"error",code:"MISSING_TABLE_NAME",message:"Table name is required",path:`${t}.name`}),e.extends){const i=e.extends.split(".").pop();i&&!n.has(i)&&!e.extends.includes(".")&&r.push({severity:"error",code:"INVALID_EXTENDS",message:`Extends references unknown table: ${e.extends}`,path:`${t}.extends`})}e.type==="simple"?KS(e,t,r):e.type==="composite"?YS(e,t,n,r):e.type==="collection"&&ZS(e,t,n,r),e.shared&&Cc(e.shared,`${t}.shared`,r)}function KS(e,t,n){if(!e.entries||e.entries.length===0){n.push({severity:"error",code:"EMPTY_ENTRIES",message:"Simple table must have at least one entry",path:`${t}.entries`});return}const r=new Set;for(let i=0;i<e.entries.length;i++){const s=e.entries[i],o=`${t}.entries[${i}]`;s.id&&(r.has(s.id)&&n.push({severity:"error",code:"DUPLICATE_ENTRY_ID",message:`Duplicate entry ID: ${s.id}`,path:`${o}.id`}),r.add(s.id),$f(s.id,`${o}.id`,"Entry",n)),s.weight!==void 0&&s.range!==void 0&&n.push({severity:"error",code:"WEIGHT_RANGE_CONFLICT",message:"Entry cannot have both weight and range",path:o,suggestion:"Use either weight or range, not both"}),s.weight!==void 0&&s.weight<0&&n.push({severity:"error",code:"INVALID_WEIGHT",message:`Entry weight cannot be negative: ${s.weight}`,path:`${o}.weight`}),s.range&&(s.range.length!==2?n.push({severity:"error",code:"INVALID_RANGE",message:"Range must be a two-element array [min, max]",path:`${o}.range`}):s.range[0]>s.range[1]&&n.push({severity:"error",code:"INVALID_RANGE",message:`Range min (${s.range[0]}) cannot exceed max (${s.range[1]})`,path:`${o}.range`}));const c=e.extends&&s.id;!s.value&&s.value!==""&&!c&&n.push({severity:"error",code:"MISSING_VALUE",message:"Entry value is required",path:`${o}.value`})}e.extends||e.entries.some(s=>(s.range?s.range[1]-s.range[0]+1:s.weight??1)>0)||n.push({severity:"error",code:"NO_ACTIVE_ENTRIES",message:"Table has no entries with positive weight",path:`${t}.entries`})}function YS(e,t,n,r){if(!e.sources||e.sources.length===0){r.push({severity:"error",code:"EMPTY_SOURCES",message:"Composite table must have at least one source",path:`${t}.sources`});return}for(let i=0;i<e.sources.length;i++){const s=e.sources[i],o=`${t}.sources[${i}]`,c=s.tableId.split(".").pop();c&&!n.has(c)&&!s.tableId.includes(".")&&r.push({severity:"error",code:"INVALID_SOURCE",message:`Source references unknown table: ${s.tableId}`,path:`${o}.tableId`}),s.weight!==void 0&&s.weight<0&&r.push({severity:"error",code:"INVALID_WEIGHT",message:`Source weight cannot be negative: ${s.weight}`,path:`${o}.weight`})}}function ZS(e,t,n,r){if(!e.collections||e.collections.length===0){r.push({severity:"error",code:"EMPTY_COLLECTIONS",message:"Collection table must reference at least one table",path:`${t}.collections`});return}for(let i=0;i<e.collections.length;i++){const s=e.collections[i],o=s.split(".").pop();o&&!n.has(o)&&!s.includes(".")&&r.push({severity:"error",code:"INVALID_COLLECTION",message:`Collection references unknown table: ${s}`,path:`${t}.collections[${i}]`})}}function XS(e,t,n,r){$f(e.id,`${t}.id`,"Template",r),(!e.name||e.name.trim()==="")&&r.push({severity:"error",code:"MISSING_TEMPLATE_NAME",message:"Template name is required",path:`${t}.name`}),!e.pattern&&e.pattern!==""&&r.push({severity:"error",code:"MISSING_PATTERN",message:"Template pattern is required",path:`${t}.pattern`}),e.shared&&Cc(e.shared,`${t}.shared`,r)}function Cc(e,t,n){for(const[r,i]of Object.entries(e))ox.test(r)||n.push({severity:"error",code:"INVALID_VARIABLE_NAME",message:`Invalid variable name: ${r}`,path:`${t}.${r}`,suggestion:"Variable names must start with a letter and contain only alphanumeric characters and underscores"}),sx.has(r)&&n.push({severity:"error",code:"RESERVED_WORD",message:`Variable name is a reserved word: ${r}`,path:`${t}.${r}`})}function QS(e,t){const n=new Map;for(const r of e)n.set(r.id,r);for(const r of e)if(r.extends){const i=new Set;let s=r;for(;s!=null&&s.extends;){if(i.has(s.id)){t.push({severity:"error",code:"CIRCULAR_INHERITANCE",message:`Circular inheritance detected involving table: ${s.id}`,path:"tables"});break}i.add(s.id);const o=s.extends.split(".").pop();s=o?n.get(o):void 0}}}function $f(e,t,n,r){if(!e||e.trim()===""){r.push({severity:"error",code:"MISSING_ID",message:`${n} ID is required`,path:t});return}e.includes(".")&&r.push({severity:"error",code:"INVALID_ID",message:`${n} ID cannot contain periods: ${e}`,path:t,suggestion:"Use underscores or camelCase instead"}),ox.test(e)||r.push({severity:"error",code:"INVALID_ID",message:`Invalid ${n} ID format: ${e}`,path:t,suggestion:"IDs must start with a letter and contain only alphanumeric characters and underscores"}),sx.has(e.toLowerCase())&&r.push({severity:"error",code:"RESERVED_WORD",message:`${n} ID is a reserved word: ${e}`,path:t})}const qp=(e,t)=>t.some(n=>e instanceof n);let wb,Eb;function JS(){return wb||(wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eC(){return Eb||(Eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vp=new WeakMap,Zd=new WeakMap,Yc=new WeakMap;function tC(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(vi(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return Yc.set(t,e),t}function nC(e){if(Vp.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Vp.set(e,t)}let Wp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Vp.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vi(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function cx(e){Wp=e(Wp)}function rC(e){return eC().includes(e)?function(...t){return e.apply(Gp(this),t),vi(this.request)}:function(...t){return vi(e.apply(Gp(this),t))}}function aC(e){return typeof e=="function"?rC(e):(e instanceof IDBTransaction&&nC(e),qp(e,JS())?new Proxy(e,Wp):e)}function vi(e){if(e instanceof IDBRequest)return tC(e);if(Zd.has(e))return Zd.get(e);const t=aC(e);return t!==e&&(Zd.set(e,t),Yc.set(t,e)),t}const Gp=e=>Yc.get(e);function iC(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),c=vi(o);return r&&o.addEventListener("upgradeneeded",d=>{r(vi(o.result),d.oldVersion,d.newVersion,vi(o.transaction),d)}),n&&o.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const sC=["get","getKey","getAll","getAllKeys","count"],oC=["put","add","delete","clear"],Xd=new Map;function kb(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xd.get(t))return Xd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=oC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sC.includes(n)))return;const s=async function(o,...c){const d=this.transaction(o,i?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),i&&d.done]))[0]};return Xd.set(t,s),s}cx(e=>({...e,get:(t,n,r)=>kb(t,n)||e.get(t,n,r),has:(t,n)=>!!kb(t,n)||e.has(t,n)}));const lC=["continue","continuePrimaryKey","advance"],Nb={},Kp=new WeakMap,ux=new WeakMap,cC={get(e,t){if(!lC.includes(t))return e[t];let n=Nb[t];return n||(n=Nb[t]=function(...r){Kp.set(this,ux.get(this)[t](...r))}),n}};async function*uC(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,cC);for(ux.set(n,t),Yc.set(n,Gp(t));t;)yield n,t=await(Kp.get(n)||t.continue()),Kp.delete(n)}function Sb(e,t){return t===Symbol.asyncIterator&&qp(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&qp(e,[IDBIndex,IDBObjectStore])}cx(e=>({...e,get(t,n,r){return Sb(t,n)?uC:e.get(t,n,r)},has(t,n){return Sb(t,n)||e.has(t,n)}}));const dC="rolldeo-db",pC=1;let Qd=null;async function Jr(){return Qd||(Qd=iC(dC,pC,{upgrade(e){if(!e.objectStoreNames.contains("collections")){const t=e.createObjectStore("collections",{keyPath:"id"});t.createIndex("by-namespace","namespace"),t.createIndex("by-preloaded","isPreloaded"),t.createIndex("by-tags","tags",{multiEntry:!0})}if(!e.objectStoreNames.contains("rollHistory")){const t=e.createObjectStore("rollHistory",{keyPath:"id",autoIncrement:!0});t.createIndex("by-collection","collectionId"),t.createIndex("by-timestamp","timestamp"),t.createIndex("by-pinned","pinned")}e.objectStoreNames.contains("userPreferences")||e.createObjectStore("userPreferences",{keyPath:"id"})}})),Qd}async function Jd(e){await(await Jr()).put("collections",e)}async function fC(e){return(await Jr()).get("collections",e)}async function hC(){return(await Jr()).getAll("collections")}async function mC(e){await(await Jr()).delete("collections",e)}async function Cb(e){return(await Jr()).add("rollHistory",e)}async function gC(e=100){const r=(await Jr()).transaction("rollHistory","readonly").store.index("by-timestamp"),i=[];let s=await r.openCursor(null,"prev");for(;s&&i.length<e;)i.push(s.value),s=await s.continue();return i}async function bC(e,t){const n=await Jr(),r=await n.get("rollHistory",e);r&&(r.pinned=t,await n.put("rollHistory",r))}async function yC(e){await(await Jr()).delete("rollHistory",e)}async function vC(e=!0){const t=await Jr();if(e){const r=(await t.getAll("rollHistory")).filter(s=>!s.pinned),i=t.transaction("rollHistory","readwrite");await Promise.all(r.map(s=>i.store.delete(s.id))),await i.done}else await t.clear("rollHistory")}function xC(e,t,n){return`${e}-${t}-${n}`.toLowerCase().replace(/[^a-z0-9.-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}async function wC(e){const t={success:!1,collections:[],errors:[],pathToIdMap:new Map};try{const n=await e.text(),r=dx(n,e.name);r.error?t.errors.push({fileName:e.name,error:r.error}):r.collection&&(t.collections.push(r.collection),t.success=!0,t.pathToIdMap.set(e.name,r.collection.id),t.pathToIdMap.set(`./${e.name}`,r.collection.id))}catch(n){t.errors.push({fileName:e.name,error:n instanceof Error?n.message:"Unknown error reading file"})}return t}async function EC(e){const t={success:!1,collections:[],errors:[],pathToIdMap:new Map};try{const n=await e.arrayBuffer(),r=await ix.loadAsync(n),i=Object.keys(r.files).filter(s=>!(!s.toLowerCase().endsWith(".json")||s.startsWith("__MACOSX")||s.split("/").some(o=>o.startsWith("."))||r.files[s].dir));if(i.length===0)return t.errors.push({fileName:e.name,error:"No JSON files found in ZIP archive"}),t;for(const s of i)try{const o=await r.files[s].async("string"),c=s.split("/").pop()||s,d=dx(o,c);d.error?t.errors.push({fileName:s,error:d.error}):d.collection&&(d.collection.originalPath=s,t.collections.push(d.collection),t.pathToIdMap.set(s,d.collection.id),t.pathToIdMap.set(c,d.collection.id),s.startsWith("./")||(t.pathToIdMap.set(`./${s}`,d.collection.id),t.pathToIdMap.set(`./${c}`,d.collection.id)))}catch(o){t.errors.push({fileName:s,error:o instanceof Error?o.message:"Failed to read file from ZIP"})}t.success=t.collections.length>0}catch(n){t.errors.push({fileName:e.name,error:n instanceof Error?n.message:"Failed to read ZIP file"})}return t}function dx(e,t){let n;try{n=JSON.parse(e)}catch{return{error:"Invalid JSON format"}}if(!n||typeof n!="object")return{error:"Document must be a JSON object"};const r=n;if(!r.metadata)return{error:'Missing required "metadata" field'};if(!r.metadata.name||typeof r.metadata.name!="string")return{error:'Missing or invalid "metadata.name"'};if(!r.metadata.namespace||typeof r.metadata.namespace!="string")return{error:'Missing or invalid "metadata.namespace"'};if(!r.metadata.version||typeof r.metadata.version!="string")return{error:'Missing or invalid "metadata.version"'};if(!r.metadata.specVersion)return{error:'Missing "metadata.specVersion"'};if(!r.tables||!Array.isArray(r.tables))return{error:'Missing or invalid "tables" array'};const i=lx(r);if(!i.valid){const o=i.errors[0];return{error:(o==null?void 0:o.message)||"Document validation failed"}}return{collection:{id:xC(r.metadata.namespace,r.metadata.name,r.metadata.version),name:r.metadata.name,document:r,fileName:t}}}function px(e){return e.name.toLowerCase().endsWith(".json")||e.type==="application/json"}function fx(e){return e.name.toLowerCase().endsWith(".zip")||e.type==="application/zip"||e.type==="application/x-zip-compressed"}function _b(e){return px(e)||fx(e)}async function kC(e){const t={success:!1,collections:[],errors:[],pathToIdMap:new Map};for(const n of e){let r;if(fx(n))r=await EC(n);else if(px(n))r=await wC(n);else{t.errors.push({fileName:n.name,error:"Unsupported file type. Please use .json or .zip files."});continue}if(t.collections.push(...r.collections),t.errors.push(...r.errors),r.pathToIdMap)for(const[i,s]of r.pathToIdMap)t.pathToIdMap.set(i,s)}return t.success=t.collections.length>0,t}function hx(e,t){if(!t.has(e))return e;let n=2,r=`${e}-${n}`;for(;t.has(r);)n++,r=`${e}-${n}`;return r}function mx({onFilesSelected:e,accept:t=[".json",".zip"],className:n,disabled:r=!1,children:i}){const[s,o]=N.useState(!1),c=N.useRef(null),d=N.useCallback(x=>{x.preventDefault(),x.stopPropagation(),r||o(!0)},[r]),p=N.useCallback(x=>{x.preventDefault(),x.stopPropagation(),o(!1)},[]),h=N.useCallback(x=>{if(x.preventDefault(),x.stopPropagation(),o(!1),r)return;const v=Array.from(x.dataTransfer.files).filter(_b);v.length>0&&e(v)},[r,e]),m=N.useCallback(()=>{!r&&c.current&&c.current.click()},[r]),g=N.useCallback(x=>{const v=Array.from(x.target.files||[]).filter(_b);v.length>0&&e(v),c.current&&(c.current.value="")},[e]),b=N.useCallback(x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),m())},[m]);return u.jsxs("div",{onDragOver:d,onDragLeave:p,onDrop:h,onClick:m,onKeyDown:b,role:"button",tabIndex:r?-1:0,"aria-label":"Drop files or click to browse","aria-disabled":r,className:me("relative card-elevated rounded-2xl p-10 text-center transition-all duration-300","border-2 border-dashed","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background",r?"cursor-not-allowed opacity-50 border-white/10":"cursor-pointer border-white/10 hover:border-primary/50 hover:bg-primary/5",s&&!r&&"border-primary bg-primary/10 scale-[1.01]",n),children:[u.jsx("div",{className:me("absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300","bg-gradient-to-br from-primary/10 via-transparent to-lavender/10",s&&"opacity-100")}),u.jsx("input",{ref:c,type:"file",accept:t.join(","),multiple:!0,onChange:g,className:"hidden",disabled:r}),i||u.jsxs("div",{className:"relative flex flex-col items-center gap-5",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"icon-container icon-lavender",children:u.jsx(_o,{className:"h-5 w-5"})}),u.jsx("div",{className:me("icon-container icon-mint p-4 transition-transform duration-300",s&&"scale-110"),children:u.jsx(EN,{className:"h-7 w-7"})}),u.jsx("div",{className:"icon-container icon-amber",children:u.jsx(mb,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-foreground font-semibold text-lg",children:s?"Drop files here":"Drop files here or click to browse"}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["Accepts ",u.jsx("span",{className:"text-lavender font-medium",children:"JSON"})," and"," ",u.jsx("span",{className:"text-amber font-medium",children:"ZIP"})," files"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("span",{className:"pill pill-lavender",children:[u.jsx(_o,{className:"h-3 w-3 mr-1.5 inline"}),".json"]}),u.jsxs("span",{className:"pill pill-amber",children:[u.jsx(mb,{className:"h-3 w-3 mr-1.5 inline"}),".zip"]})]})]})]})}function gx({isOpen:e,onClose:t,result:n,isImporting:r}){return e?u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm animate-fade-in",onClick:r?void 0:t,"aria-hidden":"true"}),u.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"import-dialog-title",className:"relative card-elevated border border-white/10 max-w-md w-full mx-4 max-h-[80vh] flex flex-col animate-slide-up",children:[u.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:me("icon-container",r?"icon-amber":n!=null&&n.success?"icon-mint":"icon-rose"),children:r?u.jsx(ba,{className:"h-5 w-5 animate-spin"}):n!=null&&n.success?u.jsx(CN,{className:"h-5 w-5"}):u.jsx(qc,{className:"h-5 w-5"})}),u.jsx("h2",{id:"import-dialog-title",className:"text-lg font-semibold",children:r?"Importing...":"Import Results"})]}),!r&&u.jsx("button",{onClick:t,className:"p-2 rounded-xl hover:bg-white/5 transition-colors","aria-label":"Close dialog",children:u.jsx(cn,{className:"h-5 w-5"})})]}),u.jsx("div",{className:"p-5 overflow-y-auto flex-1",children:r?u.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(ba,{className:"h-12 w-12 animate-spin text-primary"}),u.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"})]}),u.jsx("p",{className:"text-muted-foreground",children:"Processing files..."})]}):n?u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:me("flex items-center gap-4 p-4 rounded-xl border",n.success?"card-mint border-[hsl(var(--mint)/0.2)]":"card-rose border-[hsl(var(--rose)/0.2)]"),children:[n.success?u.jsx(Bp,{className:"h-6 w-6 text-mint shrink-0"}):u.jsx(hb,{className:"h-6 w-6 text-rose shrink-0"}),u.jsxs("div",{children:[u.jsxs("p",{className:"font-semibold",children:[n.collections.length," collection",n.collections.length!==1?"s":""," imported"]}),n.errors.length>0&&u.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.errors.length," error",n.errors.length!==1?"s":""]})]})]}),n.collections.length>0&&u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h3",{className:"font-medium text-mint flex items-center gap-2 text-sm",children:[u.jsx(Bp,{className:"h-4 w-4"}),"Imported Successfully"]}),u.jsx("ul",{className:"space-y-2",children:n.collections.map(i=>u.jsxs("li",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[u.jsx("span",{className:"font-medium",children:i.name}),u.jsx("span",{className:"text-xs text-muted-foreground pill pill-outline",children:i.fileName})]},i.id))})]}),n.errors.length>0&&u.jsxs("div",{className:"space-y-3",children:[u.jsxs("h3",{className:"font-medium text-rose flex items-center gap-2 text-sm",children:[u.jsx(hb,{className:"h-4 w-4"}),"Errors"]}),u.jsx("ul",{className:"space-y-2",children:n.errors.map((i,s)=>u.jsxs("li",{className:"p-3 rounded-xl bg-rose/5 border border-rose/10",children:[u.jsx("p",{className:"font-medium text-sm mb-1",children:i.fileName}),u.jsx("p",{className:"text-rose text-sm",children:i.error})]},s))})]})]}):null}),!r&&u.jsx("div",{className:"p-5 border-t border-white/5",children:u.jsx("button",{onClick:t,className:"btn-primary w-full",children:n!=null&&n.success?"Continue to Library":"Close"})})]})]}):null}const NC={maxExplodingDice:100};function vc(e,t=NC){const n=CC(e);return _C(n,t)}const SC=/^(\d+)d(\d+)(k[hl]?\d+)?(!)?([+\-*]\d+)?$/i;function CC(e){const n=e.replace(/\s/g,"").toLowerCase().match(SC);if(!n)throw new Error(`Invalid dice expression: ${e}`);const[,r,i,s,o,c]=n,d=parseInt(r,10),p=parseInt(i,10);if(d<1||p<1)throw new Error(`Invalid dice: ${d}d${p} - count and sides must be positive`);let h,m;if(s){const x=s.match(/k(h|l)?(\d+)/);if(x){const[,v,w]=x,k=parseInt(w,10);if(k<1||k>d)throw new Error(`Cannot keep ${k} dice from ${d}d${p}`);v==="l"?m=k:h=k}}let g=null,b=0;return c&&(g=c[0],b=parseInt(c.slice(1),10)),{count:d,sides:p,keepHighest:h,keepLowest:m,exploding:o==="!",modifier:{type:g,value:b}}}function _C(e,t){const{count:n,sides:r,keepHighest:i,keepLowest:s,exploding:o,modifier:c}=e;let d=[],p=0;for(let x=0;x<n;x++){let v=Tb(1,r);if(d.push(v),o)for(;v===r&&p<t.maxExplodingDice;)v=Tb(1,r),d.push(v),p++}let h;i!==void 0?h=[...d].sort((x,v)=>v-x).slice(0,i):s!==void 0?h=[...d].sort((x,v)=>x-v).slice(0,s):h=d;let m=h.reduce((x,v)=>x+v,0);c.type==="+"?m+=c.value:c.type==="-"?m-=c.value:c.type==="*"&&(m*=c.value);let g=`${e.count}d${e.sides}`;e.keepHighest&&(g+=`kh${e.keepHighest}`),e.keepLowest&&(g+=`kl${e.keepLowest}`),e.exploding&&(g+="!"),c.type&&(g+=`${c.type}${c.value}`);let b=`[${d.join(", ")}]`;if((i!==void 0||s!==void 0)&&(b+=`  keep [${h.join(", ")}]`),c.type){const x=h.reduce((v,w)=>v+w,0);b+=`  ${x} ${c.type} ${c.value}`}return b+=` = ${m}`,{total:m,rolls:d,kept:h,expression:g,breakdown:b}}function Tb(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Zc(e){var t;return((t=e.trace)==null?void 0:t.enabled)??!1}function bx(e){return e.trace?`trace-${e.trace.idCounter++}`:""}function pa(e,t,n,r){if(!Zc(e))return null;const i={id:bx(e),type:t,label:n,startTime:Date.now(),input:r,output:{value:""},children:[]},s=e.trace.nodeStack[e.trace.nodeStack.length-1];return s?s.children.push(i):e.trace.rootNode=i,e.trace.nodeStack.push(i),i}function Wr(e,t,n){if(!Zc(e))return;const r=e.trace.nodeStack.pop();r&&(r.duration=Date.now()-r.startTime,r.output=t,n&&(r.metadata=n))}function Cn(e,t,n,r,i,s){if(!Zc(e))return;const o={id:bx(e),type:t,label:n,startTime:Date.now(),duration:0,input:r,output:i,children:[],metadata:s},c=e.trace.nodeStack[e.trace.nodeStack.length-1];c&&c.children.push(o)}function TC(){return{enabled:!0,nodeStack:[],idCounter:0,startTime:Date.now()}}function ep(e){if(!Zc(e)||!e.trace.rootNode)return null;const t=e.trace.rootNode,n=DC(t);return{root:t,totalTime:Date.now()-e.trace.startTime,stats:n,version:"1.0"}}function DC(e){const t={nodeCount:0,maxDepth:0,typeBreakdown:{},diceRolled:0,tablesAccessed:[],variablesAccessed:[]};function n(r,i){var s;if(t.nodeCount++,t.maxDepth=Math.max(t.maxDepth,i),t.typeBreakdown[r.type]=(t.typeBreakdown[r.type]||0)+1,r.type==="dice_roll"&&r.metadata){const o=r.metadata;t.diceRolled+=((s=o.rolls)==null?void 0:s.length)||0}if(r.type==="table_roll"&&t.tablesAccessed.push(r.label.replace(/^Table: /,"")),r.type==="variable_access"&&r.metadata){const o=r.metadata;o.name&&t.variablesAccessed.push(o.name)}if(r.type==="capture_multi_roll"&&r.metadata){const o=r.metadata;o.captureVar&&t.variablesAccessed.push(`$${o.captureVar}`)}if(r.type==="capture_access"&&r.metadata){const o=r.metadata;o.varName&&t.variablesAccessed.push(`$${o.varName}`)}if(r.type==="collect"&&r.metadata){const o=r.metadata;o.varName&&t.variablesAccessed.push(`$${o.varName}`)}for(const o of r.children)n(o,i+1)}return n(e,0),t.tablesAccessed=[...new Set(t.tablesAccessed)],t.variablesAccessed=[...new Set(t.variablesAccessed)],t}function RC(e,t,n){return{staticVariables:t??new Map,sharedVariables:new Map,sharedVariableSources:new Map,documentSharedNames:new Set,placeholders:new Map,recursionDepth:0,usedEntries:new Map,instanceResults:new Map,captureVariables:new Map,config:e,currentTableId:void 0,currentEntryId:void 0,currentCollectionId:void 0,trace:n!=null&&n.enableTrace?TC():void 0,collectedDescriptions:[]}}function ho(e,t,n){if(e.sharedVariables.has(t))return e.sharedVariables.get(t);if(e.staticVariables.has(t))return e.staticVariables.get(t)}function Yp(e,t,n,r){e.sharedVariables.set(t,n),r&&e.sharedVariableSources.set(t,r)}function Db(e,t){return e.sharedVariableSources.get(t)}function AC(e,t){e.documentSharedNames.add(t)}function IC(e,t){return e.documentSharedNames.has(t)}function Bf(e,t,n){const r=e.placeholders.get(t);if(r)return n?r[n]:r.value}function jC(e,t,n){const r=e.placeholders.get(t)??{};e.placeholders.set(t,{...r,...n})}function Rb(e,t,n){jC(e,t,n)}function Ab(e){return e.recursionDepth++,e.recursionDepth<=e.config.maxRecursionDepth}function Ib(e){e.recursionDepth=Math.max(0,e.recursionDepth-1)}function Uf(e,t){return e.usedEntries.has(t)||e.usedEntries.set(t,new Set),e.usedEntries.get(t)}function yx(e,t,n){Uf(e,t).add(n)}function OC(e,t,n){e.instanceResults.set(t,n)}function MC(e,t){return e.instanceResults.get(t)}function jb(e,t){return e.captureVariables.get(t)}function FC(e,t,n){const r=e.captureVariables.has(t);return e.captureVariables.set(t,n),r}function LC(e,t){return e.captureVariables.has(t)?"capture":e.sharedVariables.has(t)?"shared":e.staticVariables.has(t)?"static":null}function tp(e,t,n){e.currentTableId=t,e.currentEntryId=n}function np(e,t){e.currentCollectionId=t}function Ob(e,t,n,r,i,s){e.collectedDescriptions.push({tableName:t,tableId:n,rolledValue:r,description:i,depth:e.recursionDepth})}function mo(e){if(!e)return[];const t=[];let n=0;for(;n<e.length;){if(e[n]==="\\"&&e.slice(n+1,n+3)==="{{"){n+=3;continue}if(e.slice(n,n+2)==="{{"){const r=n;n+=2;let i=1,s=n;for(;n<e.length&&i>0;){if(e[n]==="\\"&&e.slice(n+1,n+3)==="}}"){n+=3;continue}e.slice(n,n+2)==="{{"?(i++,n+=2):e.slice(n,n+2)==="}}"?(i--,i===0&&t.push({start:r,end:n+2,expression:e.slice(s,n).trim(),raw:e.slice(r,n+2)}),n+=2):n++}}else n++}return t}function vx(e){const t=e.trim();if(t.startsWith("collect:"))return HC(t);if(t.includes(" >> $")||t.includes(">>$"))return Mb(t);if(t.startsWith("$")&&!t.includes("*")&&BC(t))return UC(t);if(t.startsWith("dice:")){const n=t.slice(5).trim();return/^[^*]+\*[a-zA-Z]/.test(n)?n.includes(" >> $")||n.includes(">>$")?Mb(t):zC(n):{type:"dice",expression:n}}if(t.startsWith("math:"))return{type:"math",expression:t.slice(5).trim()};if(t.startsWith("$")&&!t.includes("*")){const n=t.slice(1),r=n.indexOf(".");return r>0?{type:"variable",alias:n.slice(0,r),name:n.slice(r+1)}:{type:"variable",name:n}}if(t.startsWith("@")){const n=t.slice(1),r=n.indexOf(".");return r>0?{type:"placeholder",name:n.slice(0,r),property:n.slice(r+1)}:{type:"placeholder",name:n}}if(t==="again"||t.endsWith("*again"))return PC(t);if(t.includes("#")){const[n,r]=t.split("#");return{type:"instance",tableId:n.trim(),instanceName:r.trim()}}return/^\d+\*/.test(t)||/^\$\w+\*/.test(t)?$C(t):Xc(t)}function PC(e){if(e==="again")return{type:"again"};const t=e.split("*"),n={type:"again"};if(t.length>=2){const r=t[0];/^\d+$/.test(r)&&(n.count=parseInt(r,10)),t.includes("unique")&&(n.unique=!0)}return n}function zC(e){let t,n=e;const r=e.match(/\|"([^"]*)"$/);r&&(t=r[1],n=e.slice(0,e.indexOf("|")));const i=n.split("*"),s=i[0],o=i.includes("unique");let c=i[i.length-1];c==="unique"&&i.length>2&&(c=i[i.length-2]),c==="again"&&(c="again");const d=Xc(c);return{type:"multiRoll",count:0,diceCount:s,tableId:d.tableId,alias:d.alias,namespace:d.namespace,unique:o,separator:t}}function $C(e){let t,n=e;const r=e.match(/\|"([^"]*)"$/);r&&(t=r[1],n=e.slice(0,e.indexOf("|")));const i=n.split("*"),s=i[0],o=i.includes("unique");let c=i[i.length-1];c==="unique"&&i.length>2&&(c=i[i.length-2]);let d;/^\d+$/.test(s)?d=parseInt(s,10):s.startsWith("$")?d=s.slice(1):d=1;const p=Xc(c);return{type:"multiRoll",count:d,tableId:p.tableId,alias:p.alias,namespace:p.namespace,unique:o,separator:t}}function Xc(e){const t=e.split(".");return t.length===1?{type:"table",tableId:t[0]}:t.length===2?{type:"table",alias:t[0],tableId:t[1]}:{type:"table",namespace:t.slice(0,-1).join("."),tableId:t[t.length-1]}}function BC(e){const t=e.slice(1);return/\[/.test(t)||/\.count$/.test(t)||/\.value$/.test(t)||/\|"/.test(t)||/\.\@/.test(t)}function Mb(e){const t=e.match(/(.+?)\s*>>\s*\$(\w+)(.*)$/);if(!t)throw new Error(`Invalid capture multi-roll syntax: ${e}`);const[,n,r,i]=t;let s,o=!1;if(i){const v=i.trim();(v==="|silent"||v.includes("|silent"))&&(o=!0);const w=v.match(/\|"([^"]*)"/);w&&(s=w[1])}const c=n.trim();let d,p=c;if(c.startsWith("dice:")){p=c.slice(5).trim();const v=p.indexOf("*");v>0&&(d=p.slice(0,v),p=p.slice(v+1))}const h=p.split("*"),m=h.includes("unique");let g=0,b;if(d)g=0,b=h.filter(v=>v!=="unique").pop()||"";else{const v=h[0];/^\d+$/.test(v)?g=parseInt(v,10):v.startsWith("$")?g=v.slice(1):g=1,b=h[h.length-1],b==="unique"&&h.length>2&&(b=h[h.length-2])}const x=Xc(b);return{type:"captureMultiRoll",count:g,diceCount:d,tableId:x.tableId,alias:x.alias,namespace:x.namespace,unique:m,captureVar:r,separator:o?void 0:s,silent:o}}function UC(e){const t=e.slice(1);let n,r=t;const i=t.match(/^(.+?)\|"([^"]*)"$/);i&&(r=i[1],n=i[2]);const s=r.match(/^(\w+)\[(-?\d+)\](?:\.(.+))?$/);if(s){const[,d,p,h]=s,m=parseInt(p,10);let g;return h&&(h.startsWith("@")?g=h.slice(1):g=h),{type:"captureAccess",varName:d,index:m,property:g,separator:n}}const o=r.match(/^(\w+)\.(.+)$/);if(o){const[,d,p]=o;let h;return p.startsWith("@")?h=p.slice(1):h=p,{type:"captureAccess",varName:d,property:h,separator:n}}const c=r.match(/^(\w+)$/);if(c)return{type:"captureAccess",varName:c[1],separator:n};throw new Error(`Invalid capture access syntax: ${e}`)}function HC(e){const n=e.slice(8).trim().match(/^\$(\w+)\.(@?\w+)(.*)$/);if(!n)throw new Error(`Invalid collect syntax: ${e}`);const[,r,i,s]=n;let o;i.startsWith("@")?o=i.slice(1):o=i;let c=!1,d;if(s){s.includes("|unique")&&(c=!0);const p=s.match(/\|"([^"]*)"/);p&&(d=p[1])}return{type:"collect",varName:r,property:o,unique:c,separator:d}}function qC(e){const t=[],n=mo(e);let r=0;for(const i of n){if(i.start>r){const s=Fb(e.slice(r,i.start));s&&t.push({type:"literal",text:s})}t.push(vx(i.expression)),r=i.end}if(r<e.length){const i=Fb(e.slice(r));i&&t.push({type:"literal",text:i})}return t}function Fb(e){return e.replace(/\\{{/g,"{{").replace(/\\}}/g,"}}")}function VC(e){const t=[];let n=0;for(;n<e.length;){const r=e[n];if(/\s/.test(r)){n++;continue}if(/\d/.test(r)){let i="";for(;n<e.length&&/\d/.test(e[n]);)i+=e[n],n++;t.push({type:"NUMBER",value:parseInt(i,10)});continue}if("+-*/".includes(r)){t.push({type:"OPERATOR",value:r}),n++;continue}if(r==="("){t.push({type:"LPAREN",value:"("}),n++;continue}if(r===")"){t.push({type:"RPAREN",value:")"}),n++;continue}if(r==="$"){let i="";for(n++;n<e.length&&/[a-zA-Z0-9_]/.test(e[n]);)i+=e[n],n++;t.push({type:"VARIABLE",value:i});continue}if(r==="@"){let i="";for(n++;n<e.length&&/[a-zA-Z0-9_.]/.test(e[n]);)i+=e[n],n++;t.push({type:"PLACEHOLDER",value:i});continue}if(e.slice(n,n+5)==="dice:"){n+=5;let i="";for(;n<e.length&&!/[\s+\-*/()]/.test(e[n]);)i+=e[n],n++;t.push({type:"DICE",value:i});continue}n++}return t.push({type:"EOF",value:""}),t}class WC{constructor(t,n){ua(this,"tokens");ua(this,"pos");ua(this,"context");this.tokens=t,this.pos=0,this.context=n}current(){return this.tokens[this.pos]??{type:"EOF",value:""}}advance(){const t=this.current();return t.type!=="EOF"&&this.pos++,t}expect(t){const n=this.current();if(n.type!==t)throw new Error(`Expected ${t}, got ${n.type}`);return this.advance()}parse(){const t=this.parseExpression();if(this.current().type!=="EOF")throw new Error(`Unexpected token: ${this.current().value}`);return t}parseExpression(){let t=this.parseTerm();for(;this.current().type==="OPERATOR"&&"+-".includes(this.current().value);){const n=this.advance().value,r=this.parseTerm();n==="+"?t=t+r:t=t-r}return t}parseTerm(){let t=this.parseFactor();for(;this.current().type==="OPERATOR"&&"*/".includes(this.current().value);){const n=this.advance().value,r=this.parseFactor();n==="*"?t=t*r:r===0?(console.warn("Division by zero in math expression, returning 0"),t=0):t=Math.trunc(t/r)}return t}parseFactor(){const t=this.current();if(t.type==="OPERATOR"&&t.value==="-")return this.advance(),-this.parseFactor();if(t.type==="LPAREN"){this.advance();const n=this.parseExpression();return this.expect("RPAREN"),n}return this.parsePrimary()}parsePrimary(){const t=this.advance();switch(t.type){case"NUMBER":return t.value;case"VARIABLE":{const n=ho(this.context,t.value);return this.coerceToNumber(n,`$${t.value}`)}case"PLACEHOLDER":{const n=t.value,[r,i]=n.split("."),s=Bf(this.context,r,i);return this.coerceToNumber(s,`@${n}`)}case"DICE":return vc(t.value,{maxExplodingDice:this.context.config.maxExplodingDice}).total;default:throw new Error(`Unexpected token type: ${t.type}`)}}coerceToNumber(t,n){if(t===void 0)return console.warn(`Undefined value for ${n}, using 0`),0;if(typeof t=="number")return t;const r=parseInt(t,10);return isNaN(r)?(console.warn(`Non-numeric value "${t}" for ${n}, using 0`),0):r}}function GC(e,t){try{const n=VC(e);return new WC(n,t).parse()}catch(n){return console.error(`Math evaluation error: ${e}`,n),null}}function KC(e,t,n){const r=e.id??`${n}${String(t).padStart(3,"0")}`;let i;return e.range?i=e.range[1]-e.range[0]+1:i=e.weight??1,{entry:e,weight:i,id:r}}function To(e,t,n){const r=[];for(let i=0;i<e.length;i++){const s=KC(e[i],i,t);s.weight<=0||n!=null&&n.has(s.id)||r.push(s)}return r}function Zp(e){return e.reduce((t,n)=>t+n.weight,0)}function YC(e){if(e.length===0)return null;const t=Zp(e);if(t===0)return null;const n=Math.random()*t;let r=0;for(const i of e)if(r+=i.weight,n<r)return i;return e[e.length-1]}function xx(e,t,n={}){const r=new Set;if(n.excludeIds)for(const d of n.excludeIds)r.add(d);if(n.unique){const d=Uf(t,e.id);for(const p of d)r.add(p)}const i=To(e.entries,e.id,r);if(i.length===0){const d=t.config.uniqueOverflowBehavior;if(d==="error")throw new Error(`Unique selection overflow: no more entries available in table '${e.id}'`);return d==="cycle"?(t.usedEntries.delete(e.id),To(e.entries,e.id).length===0?null:xx(e,t,{...n,unique:!1})):null}const s=YC(i);if(!s)return null;n.unique&&yx(t,e.id,s.id);const o={...e.defaultSets??{},...s.entry.sets??{},value:s.entry.value},c=s.entry.resultType??e.resultType;return{entry:s.entry,id:s.id,mergedSets:o,assets:s.entry.assets,resultType:c}}function wx(e){return e.map(t=>({source:t,weight:t.weight??1})).filter(t=>t.weight>0)}function Ex(e){return e.reduce((t,n)=>t+n.weight,0)}function ZC(e){const t=wx(e.sources);if(t.length===0)return null;const n=Ex(t);if(n===0)return null;const r=Math.random()*n;let i=0;for(const o of t)if(i+=o.weight,r<i)return{sourceTableId:o.source.tableId,weight:o.weight};const s=t[t.length-1];return{sourceTableId:s.source.tableId,weight:s.weight}}function XC(e,t){const n=[];for(const{id:i,table:s}of e){const o=To(s.entries,i);for(const c of o){const d=`${i}.${c.id}`;t!=null&&t.has(d)||n.push({...c,id:d,sourceTableId:i})}}const r=n.reduce((i,s)=>i+s.weight,0);return{entries:n,totalWeight:r}}function QC(e){if(e.entries.length===0||e.totalWeight===0)return null;const t=Math.random()*e.totalWeight;let n=0;for(const r of e.entries)if(n+=r.weight,t<n)return r;return e.entries[e.entries.length-1]}function kx(e,t,n,r={}){const i=t(e.collections);if(i.length===0)return null;const s=new Set;if(r.excludeIds)for(const m of r.excludeIds)s.add(m);if(r.unique){const m=Uf(n,e.id);for(const g of m)s.add(g)}const o=XC(i,s);if(o.entries.length===0){const m=n.config.uniqueOverflowBehavior;if(m==="error")throw new Error(`Unique selection overflow: no more entries available in collection '${e.id}'`);return m==="cycle"?(n.usedEntries.delete(e.id),kx(e,t,n,{...r,unique:!1})):null}const c=QC(o);if(!c)return null;r.unique&&yx(n,e.id,c.id);const d=i.find(m=>m.id===c.sourceTableId),p={...(d==null?void 0:d.table.defaultSets)??{},...e.defaultSets??{},...c.entry.sets??{},value:c.entry.value},h=c.entry.resultType??(d==null?void 0:d.table.resultType)??e.resultType;return{entry:c.entry,id:c.id,mergedSets:p,assets:c.entry.assets,resultType:h,sourceTableId:c.sourceTableId}}function JC(e){const t=[];let n="",r=!1,i="";for(let s=0;s<e.length;s++){const o=e[s];r?o===i?(t.push(n),n="",r=!1):n+=o:o==='"'||o==="'"?(n&&t.push(n),n="",r=!0,i=o):o===" "||o==="	"?(n&&t.push(n),n=""):o==="("||o===")"?(n&&t.push(n),t.push(o),n=""):o==="&"&&e[s+1]==="&"?(n&&t.push(n),t.push("&&"),n="",s++):o==="|"&&e[s+1]==="|"?(n&&t.push(n),t.push("||"),n="",s++):o==="!"&&e[s+1]!=="="?(n&&t.push(n),t.push("!"),n=""):o==="="&&e[s+1]==="="?(n&&t.push(n),t.push("=="),n="",s++):o==="!"&&e[s+1]==="="?(n&&t.push(n),t.push("!="),n="",s++):o===">"&&e[s+1]==="="?(n&&t.push(n),t.push(">="),n="",s++):o==="<"&&e[s+1]==="="?(n&&t.push(n),t.push("<="),n="",s++):o===">"||o==="<"?(n&&t.push(n),t.push(o),n=""):n+=o}return n&&t.push(n),t.filter(s=>s.length>0)}function rp(e,t){if(e.startsWith("@")){const n=e.slice(1).split("."),r=n[0],i=n[1];return Bf(t,r,i)}else if(e.startsWith("$")){const n=e.slice(1);return ho(t,n)}else{const n=parseFloat(e);return!isNaN(n)&&isFinite(n)?n:e}}function e_(e,t,n){switch(e===void 0&&(e=""),n===void 0&&(n=""),t){case"==":return String(e)===String(n);case"!=":return String(e)!==String(n);case">":return Number(e)>Number(n);case"<":return Number(e)<Number(n);case">=":return Number(e)>=Number(n);case"<=":return Number(e)<=Number(n);case"contains":return String(e).toLowerCase().includes(String(n).toLowerCase());case"matches":try{return new RegExp(String(n),"i").test(String(e))}catch{return!1}default:return!1}}function t_(e,t){const n=JC(e);return fa(n,t)}function fa(e,t){if(e.length===0)return!1;if(e[0]==="!")return!fa(e.slice(1),t);if(e[0]==="("){let s=1,o=1;for(;o<e.length&&s>0;)e[o]==="("&&s++,e[o]===")"&&s--,o++;const c=e.slice(1,o-1),d=fa(c,t),p=e.slice(o);return p.length===0?d:p[0]==="&&"?d&&fa(p.slice(1),t):p[0]==="||"?d||fa(p.slice(1),t):d}let n=0,r=-1,i=-1;for(let s=0;s<e.length;s++)e[s]==="("?n++:e[s]===")"?n--:n===0&&(e[s]==="||"&&r===-1?r=s:e[s]==="&&"&&i===-1&&(i=s));if(r!==-1){const s=fa(e.slice(0,r),t),o=fa(e.slice(r+1),t);return s||o}if(i!==-1){const s=fa(e.slice(0,i),t),o=fa(e.slice(i+1),t);return s&&o}if(e.length>=3){const s=e[0],o=e[1],c=e.slice(2).join(" "),d=rp(s,t),p=rp(c,t);return e_(d,o,p)}return e.length===1?!!rp(e[0],t):!1}function n_(e,t,n,r){if(!t_(e.when,n))return{matched:!1};const s=r(e.value);switch(e.action){case"append":return{matched:!0,action:"append",modifiedText:t+s};case"prepend":return{matched:!0,action:"prepend",modifiedText:s+t};case"replace":if(!e.target)return{matched:!0,action:"replace",modifiedText:s};const o=new RegExp(e.target,"g");return{matched:!0,action:"replace",modifiedText:t.replace(o,s)};case"setVariable":if(!e.target)return{matched:!0,action:"setVariable"};const c=parseFloat(s),d=!isNaN(c)&&isFinite(c)?c:s;return Yp(n,e.target,d),{matched:!0,action:"setVariable",variableSet:{name:e.target,value:d}};default:return{matched:!0}}}function rc(e,t,n,r){let i=t;for(const s of e){const o=n_(s,i,n,r);o.matched&&o.modifiedText!==void 0&&(i=o.modifiedText)}return i}class r_{constructor(t={}){ua(this,"collections",new Map);ua(this,"config");ua(this,"resolvedTables",new Map);var n,r,i,s;this.config={maxRecursionDepth:((n=t.config)==null?void 0:n.maxRecursionDepth)??50,maxExplodingDice:((r=t.config)==null?void 0:r.maxExplodingDice)??100,maxInheritanceDepth:((i=t.config)==null?void 0:i.maxInheritanceDepth)??5,uniqueOverflowBehavior:((s=t.config)==null?void 0:s.uniqueOverflowBehavior)??"stop"}}loadCollection(t,n,r=!1){const i=new Map;for(const c of t.tables)i.set(c.id,c);const s=new Map;if(t.templates)for(const c of t.templates)s.set(c.id,c);const o={id:n,document:t,imports:new Map,isPreloaded:r,source:r?"preloaded":n,tableIndex:i,templateIndex:s};this.collections.set(n,o)}loadFromJson(t,n,r=!1){const i=JSON.parse(t),s=this.validate(i);return s.valid&&this.loadCollection(i,n,r),s}unloadCollection(t){return this.collections.delete(t)}hasCollection(t){return this.collections.has(t)}getCollection(t){return this.collections.get(t)}listCollections(){return Array.from(this.collections.values()).map(t=>({id:t.id,name:t.document.metadata.name,isPreloaded:t.isPreloaded}))}resolveImports(t){for(const n of this.collections.values())if(!(!n.document.imports||n.document.imports.length===0)){n.imports.clear();for(const r of n.document.imports){let i;if(t){const s=t.get(r.path);s&&(i=this.collections.get(s))}if(!i){for(const s of this.collections.values())if(s.document.metadata.namespace===r.path){i=s;break}}i||(i=this.collections.get(r.path)),i&&n.imports.set(r.alias,i)}}}validate(t){return lx(t)}getTable(t,n){if(n){const r=this.collections.get(n);return r==null?void 0:r.tableIndex.get(t)}for(const r of this.collections.values()){const i=r.tableIndex.get(t);if(i)return i}}listTables(t,n=!1){const r=[],i=s=>{for(const o of s.document.tables)!n&&o.hidden||r.push({id:o.id,name:o.name,type:o.type,description:o.description,tags:o.tags,hidden:o.hidden,entryCount:o.type==="simple"?o.entries.length:void 0})};if(t){const s=this.collections.get(t);s&&i(s)}else for(const s of this.collections.values())i(s);return r}getTemplate(t,n){const r=this.collections.get(n);return r==null?void 0:r.templateIndex.get(t)}listTemplates(t){const n=this.collections.get(t);return n!=null&&n.document.templates?n.document.templates.map(r=>({id:r.id,name:r.name,description:r.description,tags:r.tags})):[]}roll(t,n,r){const i=this.collections.get(n);if(!i)throw new Error(`Collection not found: ${n}`);const s=i.tableIndex.get(t);if(!s)throw new Error(`Table not found: ${t} in collection ${n}`);const o=this.createGenerationContext(i,r);np(o,n),pa(o,"root",`Roll: ${s.name||t}`,{raw:t,parsed:{collectionId:n,tableType:s.type}});const c=this.rollTable(s,o,n);let d=c.text;i.document.conditionals&&i.document.conditionals.length>0&&(d=rc(i.document.conditionals,c.text,o,g=>this.evaluatePattern(g,o,n))),Wr(o,{value:d});const p=ep(o),h=o.captureVariables.size>0?Object.fromEntries(o.captureVariables):void 0,m=o.collectedDescriptions.length>0?[...o.collectedDescriptions].sort((g,b)=>(g.depth??0)-(b.depth??0)):void 0;return{text:d,resultType:c.resultType,assets:c.assets,placeholders:c.placeholders,metadata:{sourceId:t,collectionId:n,timestamp:Date.now(),entryId:c.entryId},trace:p??void 0,captures:h,descriptions:m}}rollTemplate(t,n,r){const i=this.collections.get(n);if(!i)throw new Error(`Collection not found: ${n}`);const s=i.templateIndex.get(t);if(!s)throw new Error(`Template not found: ${t} in collection ${n}`);const o=this.createGenerationContext(i,r);np(o,n),pa(o,"root",`Template: ${s.name||t}`,{raw:t,parsed:{collectionId:n,pattern:s.pattern}}),s.shared&&this.evaluateTableLevelShared(s.shared,o,n,t);let c=this.evaluatePattern(s.pattern,o,n);i.document.conditionals&&i.document.conditionals.length>0&&(c=rc(i.document.conditionals,c,o,m=>this.evaluatePattern(m,o,n))),Wr(o,{value:c});const d=ep(o),p=o.captureVariables.size>0?Object.fromEntries(o.captureVariables):void 0,h=o.collectedDescriptions.length>0?[...o.collectedDescriptions].sort((m,g)=>(m.depth??0)-(g.depth??0)):void 0;return{text:c,resultType:s.resultType,metadata:{sourceId:t,collectionId:n,timestamp:Date.now()},trace:d??void 0,captures:p,descriptions:h}}evaluateRawPattern(t,n,r){const i=this.collections.get(n);if(!i)throw new Error(`Collection not found: ${n}`);const s=this.createGenerationContext(i,r);np(s,n),r!=null&&r.shared&&this.evaluateTableLevelShared(r.shared,s,n,"__preview__"),pa(s,"root","Pattern Preview",{raw:t,parsed:{collectionId:n,pattern:t}});let o=this.evaluatePattern(t,s,n);i.document.conditionals&&i.document.conditionals.length>0&&(o=rc(i.document.conditionals,o,s,p=>this.evaluatePattern(p,s,n))),Wr(s,{value:o});const c=ep(s),d=s.captureVariables.size>0?Object.fromEntries(s.captureVariables):void 0;return{text:o,metadata:{sourceId:"__preview__",collectionId:n,timestamp:Date.now()},trace:c??void 0,captures:d}}createGenerationContext(t,n){const r=new Map;if(t.document.variables)for(const[o,c]of Object.entries(t.document.variables))r.set(o,c);const i={maxRecursionDepth:t.document.metadata.maxRecursionDepth??this.config.maxRecursionDepth,maxExplodingDice:t.document.metadata.maxExplodingDice??this.config.maxExplodingDice,maxInheritanceDepth:t.document.metadata.maxInheritanceDepth??this.config.maxInheritanceDepth,uniqueOverflowBehavior:t.document.metadata.uniqueOverflowBehavior??this.config.uniqueOverflowBehavior},s=RC(i,r,{enableTrace:n==null?void 0:n.enableTrace});if(t.document.shared){for(const o of Object.keys(t.document.shared))AC(s,o);this.evaluateSharedVariables(t.document.shared,s,t.id)}return s}evaluateSharedVariables(t,n,r){for(const[i,s]of Object.entries(t)){const o=this.evaluatePattern(s,n,r),c=parseFloat(o),d=!isNaN(c)&&isFinite(c)?c:o;Yp(n,i,d)}}evaluateTableLevelShared(t,n,r,i){for(const[s,o]of Object.entries(t)){if(IC(n,s))throw new Error(`SHARED_SHADOW in ${i}: Table/template-level shared variable '${s}' would shadow document-level shared variable. Document-level shared variables take precedence.`);if(n.staticVariables.has(s))throw new Error(`SHARED_SHADOW in ${i}: Shared variable '${s}' would shadow static variable.`);if(n.sharedVariables.has(s))continue;const c=this.evaluatePattern(o,n,r),d=parseFloat(c),p=!isNaN(d)&&isFinite(d)?d:c;Yp(n,s,p,i)}}resolveTableInheritance(t,n,r=0){const i=`${n}:${t.id}`,s=this.resolvedTables.get(i);if(s)return s;if(!t.extends)return t;const o=this.collections.get(n),c=(o==null?void 0:o.document.metadata.maxInheritanceDepth)??this.config.maxInheritanceDepth;if(r>=c)throw new Error(`Inheritance depth limit exceeded for table '${t.id}' (max: ${c})`);const d=t.extends,p=this.resolveTableRef(d,n);if(!p)throw new Error(`Parent table not found: '${d}' for table '${t.id}'`);if(p.table.type!=="simple")throw new Error(`Cannot extend non-simple table: '${d}' (type: ${p.table.type})`);const h=this.resolveTableInheritance(p.table,p.collectionId,r+1),m=[],g=new Map;for(let v=0;v<h.entries.length;v++){const w=h.entries[v],k=w.id??`${h.id}${String(v).padStart(3,"0")}`;g.set(k,{...w,id:k})}for(let v=0;v<t.entries.length;v++){const w=t.entries[v],k=w.id??`${t.id}${String(v).padStart(3,"0")}`,C=g.get(k);C?g.set(k,{...C,...w,id:k}):g.set(k,{...w,id:k})}for(const v of g.values())m.push(v);const b={...h.defaultSets??{},...t.defaultSets??{}},x={...t,entries:m,defaultSets:Object.keys(b).length>0?b:void 0,extends:void 0};return this.resolvedTables.set(i,x),x}resolveTableRef(t,n){if(t.includes(".")){const i=t.split(".");if(i.length>=2){const s=i[0],o=i[i.length-1],c=this.collections.get(n);if(c!=null&&c.imports.has(s)){const p=c.imports.get(s),h=p.tableIndex.get(o);if(h)return{table:h,collectionId:p.id}}const d=i.slice(0,-1).join(".");for(const p of this.collections.values())if(p.document.metadata.namespace===d){const h=p.tableIndex.get(o);if(h)return{table:h,collectionId:p.id}}if(c!=null&&c.document.imports){const p=c.document.imports.find(h=>h.alias===s);if(p){for(const h of this.collections.values())if(h.id!==n){if(h.document.metadata.namespace===p.path){const m=h.tableIndex.get(o);if(m)return{table:m,collectionId:h.id}}if(h.id===p.path){const m=h.tableIndex.get(o);if(m)return{table:m,collectionId:h.id}}}}}}}const r=this.collections.get(n);if(r){const i=r.tableIndex.get(t);if(i)return{table:i,collectionId:n}}for(const i of this.collections.values()){const s=i.tableIndex.get(t);if(s)return{table:s,collectionId:i.id}}}resolveTemplateRef(t,n){if(t.includes(".")){const i=t.split(".");if(i.length>=2){const s=i[0],o=i[i.length-1],c=this.collections.get(n);if(c!=null&&c.imports.has(s)){const p=c.imports.get(s),h=p.templateIndex.get(o);if(h)return{template:h,collectionId:p.id}}const d=i.slice(0,-1).join(".");for(const p of this.collections.values())if(p.document.metadata.namespace===d){const h=p.templateIndex.get(o);if(h)return{template:h,collectionId:p.id}}if(c!=null&&c.document.imports){const p=c.document.imports.find(h=>h.alias===s);if(p){for(const h of this.collections.values())if(h.id!==n){if(h.document.metadata.namespace===p.path){const m=h.templateIndex.get(o);if(m)return{template:m,collectionId:h.id}}if(h.id===p.path){const m=h.templateIndex.get(o);if(m)return{template:m,collectionId:h.id}}}}}}}const r=this.collections.get(n);if(r){const i=r.templateIndex.get(t);if(i)return{template:i,collectionId:n}}for(const i of this.collections.values()){const s=i.templateIndex.get(t);if(s)return{template:s,collectionId:i.id}}}clearInheritanceCache(){this.resolvedTables.clear()}rollTable(t,n,r,i={}){if(!Ab(n))throw new Error(`Recursion limit exceeded (${n.config.maxRecursionDepth})`);pa(n,"table_roll",`Table: ${t.name||t.id}`,{raw:t.id,parsed:{type:t.type,name:t.name}});try{if(tp(n,t.id),t.shared){for(const o of Object.keys(t.shared))Db(n,o)===t.id&&(n.sharedVariables.delete(o),n.sharedVariableSources.delete(o));this.evaluateTableLevelShared(t.shared,n,r,t.id)}let s;if(t.type==="simple")s=this.rollSimple(t,n,r,i);else if(t.type==="composite")s=this.rollComposite(t,n,r,i);else if(t.type==="collection")s=this.rollCollection(t,n,r,i);else throw new Error(`Unknown table type: ${t.type}`);return Wr(n,{value:s.text}),s}catch(s){throw Wr(n,{value:"",error:String(s)}),s}finally{Ib(n)}}rollSimple(t,n,r,i){const s=this.resolveTableInheritance(t,r),o=To(s.entries,s.id,i.excludeIds),c=Zp(o),d=xx(s,n,i);if(!d)return Cn(n,"entry_select","No entry selected",{raw:t.id},{value:""},{type:"entry_select",tableId:t.id,entryId:"",selectedWeight:0,totalWeight:c,probability:0,poolSize:o.length,unique:i.unique??!1,excludedIds:i.excludeIds?Array.from(i.excludeIds):void 0}),{text:""};const p=o.find(g=>g.id===d.id),h=(p==null?void 0:p.weight)??1;Cn(n,"entry_select",`Selected: ${d.id}`,{raw:t.id,parsed:{entryValue:d.entry.value}},{value:d.entry.value},{type:"entry_select",tableId:t.id,entryId:d.id,selectedWeight:h,totalWeight:c,probability:c>0?h/c:0,poolSize:o.length,unique:i.unique??!1,excludedIds:i.excludeIds?Array.from(i.excludeIds):void 0}),tp(n,t.id,d.id),Object.keys(d.mergedSets).length>0&&Rb(n,t.id,d.mergedSets);const m=this.evaluatePattern(d.entry.value??"",n,r);if(d.entry.description){const g=this.evaluatePattern(d.entry.description,n,r);Ob(n,s.name,s.id,m,g)}return{text:m,resultType:d.resultType,assets:d.assets,placeholders:d.mergedSets,entryId:d.id}}rollComposite(t,n,r,i){const s=wx(t.sources),o=Ex(s),c=ZC(t);if(!c)return{text:""};Cn(n,"composite_select",`Source: ${c.sourceTableId}`,{raw:t.id,parsed:{sourceCount:t.sources.length}},{value:c.sourceTableId},{type:"composite_select",sources:s.map(h=>({tableId:h.source.tableId,weight:h.weight,probability:o>0?h.weight/o:0})),selectedTableId:c.sourceTableId});const d=this.getTable(c.sourceTableId,r);if(!d)throw new Error(`Source table not found: ${c.sourceTableId}`);const p=this.rollTable(d,n,r,i);return{...p,resultType:p.resultType??d.resultType??t.resultType}}rollCollection(t,n,r,i){const s=m=>{const g=[];for(const b of m){const x=this.getTable(b,r);x&&x.type==="simple"&&g.push({id:b,table:x})}return g},o=s(t.collections);let c=0,d=0;for(const{table:m}of o){const g=To(m.entries,m.id,i.excludeIds);c+=g.length,d+=Zp(g)}Cn(n,"collection_merge",`Merged ${t.collections.length} tables`,{raw:t.id,parsed:{sourceTableIds:t.collections}},{value:`${c} entries`},{type:"collection_merge",sourceTables:t.collections,totalEntries:c,totalWeight:d});const p=kx(t,s,n,i);if(!p)return{text:""};Cn(n,"entry_select",`Selected: ${p.id}`,{raw:t.id,parsed:{entryValue:p.entry.value,sourceTableId:p.sourceTableId}},{value:p.entry.value},{type:"entry_select",tableId:t.id,entryId:p.id,selectedWeight:1,totalWeight:d,probability:d>0?1/c:0,poolSize:c,unique:i.unique??!1,excludedIds:i.excludeIds?Array.from(i.excludeIds):void 0}),tp(n,t.id,p.id),Object.keys(p.mergedSets).length>0&&Rb(n,t.id,p.mergedSets);const h=this.evaluatePattern(p.entry.value??"",n,r);if(p.entry.description){const m=this.getTable(p.sourceTableId,r),g=(m==null?void 0:m.name)??p.sourceTableId,b=this.evaluatePattern(p.entry.description,n,r);Ob(n,g,p.sourceTableId,h,b)}return{text:h,resultType:p.resultType,assets:p.assets,placeholders:p.mergedSets,entryId:p.id}}evaluatePattern(t,n,r){return qC(t).map(s=>this.evaluateToken(s,n,r)).join("")}evaluateToken(t,n,r){switch(t.type){case"literal":return t.text;case"dice":return this.evaluateDice(t.expression,n);case"math":{const i=GC(t.expression,n);return i!==null?String(i):"[math error]"}case"variable":return this.evaluateVariable(t,n);case"placeholder":return this.evaluatePlaceholder(t,n,r);case"table":return this.evaluateTableRef(t,n,r);case"multiRoll":return this.evaluateMultiRoll(t,n,r);case"again":return this.evaluateAgain(t,n,r);case"instance":return this.evaluateInstance(t,n,r);case"captureMultiRoll":return this.evaluateCaptureMultiRoll(t,n,r);case"captureAccess":return this.evaluateCaptureAccess(t,n);case"collect":return this.evaluateCollect(t,n);default:return""}}evaluateDice(t,n){var o;const r=vc(t,{maxExplodingDice:n.config.maxExplodingDice}),i=t.match(/([+\-*])(\d+)$/),s=i?{operator:i[1],value:parseInt(i[2],10)}:void 0;return Cn(n,"dice_roll",`Dice: ${t}`,{raw:t},{value:r.total},{type:"dice",expression:r.expression,rolls:r.rolls,kept:r.kept,modifier:s,exploded:r.rolls.length>parseInt(((o=t.match(/^(\d+)d/))==null?void 0:o[1])||"1",10),breakdown:r.breakdown}),String(r.total)}evaluateVariable(t,n){const r=ho(n,t.name,t.alias),i=r!==void 0?String(r):"";let s="undefined";return n.sharedVariables.has(t.name)?s="shared":n.staticVariables.has(t.name)&&(s="static"),Cn(n,"variable_access",`$${t.alias?t.alias+".":""}${t.name}`,{raw:t.name,parsed:{alias:t.alias}},{value:i},{type:"variable",name:t.name,source:s}),i}evaluatePlaceholder(t,n,r){const i=Bf(n,t.name,t.property);if(i&&r){const o=this.resolveTableRef(i,r);if(o)return Cn(n,"placeholder_access",`@${t.name}${t.property?"."+t.property:""}`,{raw:t.name,parsed:{property:t.property}},{value:i},{type:"placeholder",name:t.name,property:t.property,found:!0,resolvedToTable:i}),this.rollTable(o.table,n,o.collectionId).text;const c=this.resolveTemplateRef(i,r);if(c)return Cn(n,"placeholder_access",`@${t.name}${t.property?"."+t.property:""}`,{raw:t.name,parsed:{property:t.property}},{value:i},{type:"placeholder",name:t.name,property:t.property,found:!0,resolvedToTemplate:i}),this.evaluateTemplateInternal(c.template,c.collectionId,n)}const s=i??"";return Cn(n,"placeholder_access",`@${t.name}${t.property?"."+t.property:""}`,{raw:t.name,parsed:{property:t.property}},{value:s},{type:"placeholder",name:t.name,property:t.property,found:i!==void 0}),s}evaluateTableRef(t,n,r){let i=t.tableId;t.namespace?i=`${t.namespace}.${t.tableId}`:t.alias&&(i=`${t.alias}.${t.tableId}`);const s=this.resolveTableRef(i,r);if(s)return this.rollTable(s.table,n,s.collectionId).text;const o=this.resolveTemplateRef(i,r);return o?this.evaluateTemplateInternal(o.template,o.collectionId,n):""}evaluateTemplateInternal(t,n,r){if(!Ab(r))throw new Error(`Recursion limit exceeded (${r.config.maxRecursionDepth})`);try{const i=this.collections.get(n);if(!i)return"";pa(r,"template_ref",`Template: ${t.name||t.id}`,{raw:t.id,parsed:{collectionId:n,templateId:t.id,pattern:t.pattern}});const s={...r,placeholders:new Map};if(t.shared){for(const c of Object.keys(t.shared))Db(s,c)===t.id&&(s.sharedVariables.delete(c),s.sharedVariableSources.delete(c));this.evaluateTableLevelShared(t.shared,s,n,t.id)}let o=this.evaluatePattern(t.pattern,s,n);return i.document.conditionals&&i.document.conditionals.length>0&&(o=rc(i.document.conditionals,o,s,c=>this.evaluatePattern(c,s,n))),Wr(r,{value:o}),o}finally{Ib(r)}}evaluateMultiRoll(t,n,r){let i,s="literal";if(t.diceCount)i=vc(t.diceCount,{maxExplodingDice:n.config.maxExplodingDice}).total,s="dice";else if(typeof t.count=="number")i=t.count,s="literal";else{const h=ho(n,t.count);i=typeof h=="number"?h:parseInt(String(h),10)||1,s="variable"}const o=this.getTable(t.tableId,r);if(!o){const h=this.resolveTemplateRef(t.tableId,r);return h?this.evaluateMultiRollTemplate(h.template,h.collectionId,i,s,t,n):(console.warn(`Table or template not found: ${t.tableId}`),"")}pa(n,"multi_roll",`${i}x ${t.tableId}`,{raw:`${t.count}*${t.tableId}`,parsed:{count:i,tableId:t.tableId,unique:t.unique}});const c=[],d=new Set;for(let h=0;h<i;h++){const m=this.rollTable(o,n,r,{unique:t.unique,excludeIds:t.unique?d:void 0});m.text&&(c.push(m.text),m.entryId&&d.add(m.entryId))}const p=c.join(t.separator??", ");return Wr(n,{value:p},{type:"multi_roll",tableId:t.tableId,countSource:s,count:i,unique:t.unique??!1,separator:t.separator??", "}),p}evaluateMultiRollTemplate(t,n,r,i,s,o){pa(o,"multi_roll",`${r}x ${s.tableId} (template)`,{raw:`${s.count}*${s.tableId}`,parsed:{count:r,tableId:s.tableId,unique:s.unique,isTemplate:!0}});const c=[];for(let p=0;p<r;p++){const h=this.evaluateTemplateInternal(t,n,o);h&&c.push(h)}const d=c.join(s.separator??", ");return Wr(o,{value:d},{type:"multi_roll",tableId:s.tableId,countSource:i,count:r,unique:!1,separator:s.separator??", "}),d}evaluateAgain(t,n,r){if(!n.currentTableId)return console.warn("{{again}} used outside of table context"),"";const i=this.getTable(n.currentTableId,r);if(!i)return"";const s=new Set;n.currentEntryId&&s.add(n.currentEntryId);const o=t.count??1,c=[];for(let d=0;d<o;d++){const p=this.rollTable(i,n,r,{unique:t.unique,excludeIds:s});p.text&&(c.push(p.text),p.entryId&&t.unique&&s.add(p.entryId))}return c.join(", ")}evaluateInstance(t,n,r){const i=MC(n,t.instanceName);if(i)return Cn(n,"instance",`Instance: ${t.instanceName} (cached)`,{raw:`${t.tableId}#${t.instanceName}`},{value:i.text,cached:!0},{type:"instance",name:t.instanceName,cached:!0,tableId:t.tableId}),i.text;const s=this.getTable(t.tableId,r);if(!s)return console.warn(`Table not found: ${t.tableId}`),"";pa(n,"instance",`Instance: ${t.instanceName}`,{raw:`${t.tableId}#${t.instanceName}`,parsed:{tableId:t.tableId,instanceName:t.instanceName}});const o=this.rollTable(s,n,r),c={text:o.text,resultType:o.resultType,assets:o.assets,placeholders:o.placeholders,metadata:{sourceId:t.tableId,collectionId:r,timestamp:Date.now(),entryId:o.entryId}};return OC(n,t.instanceName,c),Wr(n,{value:o.text,cached:!1},{type:"instance",name:t.instanceName,cached:!1,tableId:t.tableId}),o.text}evaluateCaptureMultiRoll(t,n,r){const i=LC(n,t.captureVar);i&&console.warn(`Capture variable '$${t.captureVar}' overwrites existing ${i} variable`);let s;if(t.diceCount)s=vc(t.diceCount,{maxExplodingDice:n.config.maxExplodingDice}).total;else if(typeof t.count=="number")s=t.count;else{const v=ho(n,t.count);s=typeof v=="number"?v:parseInt(String(v),10)||1}let o=t.tableId;t.namespace?o=`${t.namespace}.${t.tableId}`:t.alias&&(o=`${t.alias}.${t.tableId}`);const c=this.resolveTableRef(o,r);if(!c)return console.warn(`Table not found: ${o}`),"";const{table:d,collectionId:p}=c;pa(n,"capture_multi_roll",`${s}x ${t.tableId} >> $${t.captureVar}`,{raw:`${t.count}*${t.tableId} >> $${t.captureVar}`,parsed:{count:s,tableId:t.tableId,captureVar:t.captureVar,unique:t.unique,silent:t.silent}});const h=[],m=[],g=new Set;for(let v=0;v<s;v++){const w=this.rollTable(d,n,p,{unique:t.unique,excludeIds:t.unique?g:void 0});if(w.text){m.push(w.text);const k={};if(w.placeholders)for(const[C,T]of Object.entries(w.placeholders))T.includes("{{")?k[C]=this.evaluatePattern(T,n,p):k[C]=T;h.push({value:w.text,sets:k}),w.entryId&&g.add(w.entryId)}}const b={items:h,count:h.length};FC(n,t.captureVar,b);let x;return t.silent?x="":x=m.join(t.separator??", "),Wr(n,{value:x},{type:"capture_multi_roll",tableId:t.tableId,captureVar:t.captureVar,count:h.length,unique:t.unique??!1,silent:t.silent??!1,separator:t.separator??", ",capturedItems:h.map(v=>({value:v.value,sets:v.sets}))}),x}evaluateCaptureAccess(t,n){const r=jb(n,t.varName);let i=`$${t.varName}`;if(t.index!==void 0&&(i+=`[${t.index}]`),t.property&&(i+=`.${t.property.startsWith("@"),t.property}`),!r)return console.warn(`Capture variable not found: $${t.varName} (forward reference?)`),Cn(n,"capture_access",i,{raw:i},{value:"",error:"Variable not found"},{type:"capture_access",varName:t.varName,index:t.index,property:t.property??"value",found:!1}),"";let s;if(t.property==="count"&&t.index===void 0)return s=String(r.count),Cn(n,"capture_access",i,{raw:i},{value:s},{type:"capture_access",varName:t.varName,property:"count",found:!0,totalItems:r.items.length}),s;if(t.index!==void 0){let o=t.index;if(o<0&&(o=r.items.length+o),o<0||o>=r.items.length)return console.warn(`Capture access out of bounds: $${t.varName}[${t.index}] (length: ${r.items.length})`),Cn(n,"capture_access",i,{raw:i},{value:"",error:`Index out of bounds (${r.items.length} items)`},{type:"capture_access",varName:t.varName,index:t.index,property:t.property??"value",found:!1,totalItems:r.items.length}),"";const c=r.items[o];if(t.property)if(t.property==="value")s=c.value;else{const d=c.sets[t.property];d===void 0&&console.warn(`Capture property not found: $${t.varName}[${t.index}].@${t.property}`),s=d??""}else s=c.value;return Cn(n,"capture_access",i,{raw:i},{value:s},{type:"capture_access",varName:t.varName,index:t.index,property:t.property??"value",found:!0,totalItems:r.items.length}),s}return t.property&&t.property!=="value"&&t.property!=="count"?s=r.items.map(c=>c.sets[t.property]??"").filter(c=>c!=="").join(t.separator??", "):s=r.items.map(c=>c.value).join(t.separator??", "),Cn(n,"capture_access",i,{raw:i},{value:s},{type:"capture_access",varName:t.varName,property:t.property??"value",found:!0,totalItems:r.items.length}),s}evaluateCollect(t,n){const r=`collect:$${t.varName}.${t.property}${t.unique?"|unique":""}`,i=jb(n,t.varName);if(!i)return console.warn(`Capture variable not found: $${t.varName} (forward reference?)`),Cn(n,"collect",r,{raw:r},{value:"",error:"Variable not found"},{type:"collect",varName:t.varName,property:t.property,unique:t.unique??!1,separator:t.separator??", ",allValues:[],resultValues:[]}),"";let s;t.property==="value"?s=i.items.map(d=>d.value):s=i.items.map(d=>d.sets[t.property]??"");let o=s.filter(d=>d!=="");t.unique&&(o=[...new Set(o)]);const c=o.join(t.separator??", ");return Cn(n,"collect",r,{raw:r},{value:c},{type:"collect",varName:t.varName,property:t.property,unique:t.unique??!1,separator:t.separator??", ",allValues:s.filter(d=>d!==""),resultValues:o}),c}}const a_={name:"Fantasy RPG Quickstart",namespace:"rollify.fantasy",version:"1.0.0",specVersion:"1.0",author:"Rollify",description:"A fantasy RPG starter demonstrating all core features: basic tables, weights, dice, table references, multiple rolls, unique selections, custom separators, ranges, templates, and shared variables.",tags:["fantasy","rpg","quickstart","tutorial"]},i_={dungeonLevel:"{{dice:1d4}}",partySize:"{{dice:1d4+2}}"},s_=[{id:"coinType",name:"Coin Type",type:"simple",description:"Basic table - equal chance for each entry",resultType:"currency",tags:["treasure","basic"],entries:[{value:"copper pieces"},{value:"silver pieces"},{value:"gold pieces"},{value:"platinum pieces"}]},{id:"treasureQuality",name:"Treasure Quality",type:"simple",description:"Weighted entries - common results appear more often",resultType:"trait",tags:["treasure","weighted"],entries:[{id:"poor",value:"tarnished",weight:4},{id:"common",value:"ordinary",weight:6},{id:"fine",value:"fine",weight:3},{id:"masterwork",value:"masterwork",weight:1}]},{id:"treasureCoins",name:"Treasure Coins",type:"simple",description:"Dice rolls generate random amounts",resultType:"treasure",tags:["treasure","dice"],entries:[{value:"{{dice:3d6}} {{coinType}}",weight:4},{value:"{{dice:2d6*10}} {{coinType}}",weight:3},{value:"{{dice:4d6*25}} {{coinType}}",weight:2},{value:"{{dice:2d6*100}} gold pieces",weight:1}]},{id:"weaponMaterial",name:"Weapon Material",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"iron",weight:5},{value:"steel",weight:3},{value:"silver",weight:1},{value:"cold iron",weight:1}]},{id:"weaponBase",name:"Weapon Base",type:"simple",hidden:!0,resultType:"item",entries:[{value:"dagger"},{value:"shortsword"},{value:"longsword"},{value:"battleaxe"},{value:"warhammer"},{value:"spear"}]},{id:"weapon",name:"Weapon",type:"simple",description:"Table references combine results from other tables",resultType:"item",tags:["equipment","weapons"],entries:[{value:"{{treasureQuality}} {{weaponMaterial}} {{weaponBase}}"}]},{id:"magicEnchantment",name:"Magic Enchantment",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"flaming",sets:{element:"fire"}},{value:"frost",sets:{element:"ice"}},{value:"shocking",sets:{element:"lightning"}},{value:"venomous",sets:{element:"poison"}},{value:"holy",sets:{element:"radiant"}},{value:"vampiric",sets:{element:"necrotic"}}]},{id:"magicWeapon",name:"Magic Weapon",type:"simple",description:"Combines dice bonus with enchantment and base weapon",resultType:"item",tags:["equipment","weapons","magic"],entries:[{value:"+{{dice:1d3}} {{magicEnchantment}} {{weaponBase}}"}]},{id:"monsterEncounter",name:"Monster Encounter (d100)",type:"simple",description:"Ranges work like traditional d100 tables",resultType:"encounter",tags:["encounters","monsters","ranges"],entries:[{id:"goblins",value:"{{dice:1d6}} goblins",range:[1,25]},{id:"wolves",value:"{{dice:1d4+1}} wolves",range:[26,45]},{id:"skeletons",value:"{{dice:2d4}} skeletons",range:[46,60]},{id:"bandits",value:"{{dice:1d6+2}} bandits",range:[61,75]},{id:"ogre",value:"an ogre",range:[76,85]},{id:"troll",value:"a troll",range:[86,95]},{id:"dragon",value:"a young dragon!",range:[96,100]}]},{id:"gemType",name:"Gem Type",type:"simple",resultType:"item",tags:["treasure","gems"],entries:[{value:"agate",weight:4,sets:{value:"10"}},{value:"moonstone",weight:3,sets:{value:"50"}},{value:"pearl",weight:2,sets:{value:"100"}},{value:"emerald",weight:1,sets:{value:"500"}},{value:"ruby",weight:1,sets:{value:"1000"}}]},{id:"tavernAdjective",name:"Tavern Adjective",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"Prancing"},{value:"Golden"},{value:"Silver"},{value:"Drunken"},{value:"Sleeping"},{value:"Laughing"},{value:"Rusty"},{value:"Lucky"}]},{id:"tavernNoun",name:"Tavern Noun",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"Dragon"},{value:"Unicorn"},{value:"Goblin"},{value:"Knight"},{value:"Maiden"},{value:"Tankard"},{value:"Sword"},{value:"Crown"}]},{id:"tavernName",name:"Tavern Name",type:"simple",description:"Combines two helper tables for variety",resultType:"name",tags:["locations","taverns","names"],entries:[{value:"The {{tavernAdjective}} {{tavernNoun}}"}]},{id:"npcTrait",name:"NPC Trait",type:"simple",resultType:"trait",tags:["npcs","personality"],entries:[{value:"speaks in whispers"},{value:"laughs nervously"},{value:"never makes eye contact"},{value:"constantly fidgets"},{value:"tells obvious lies"},{value:"is overly formal"},{value:"has a thick accent"},{value:"hums tunelessly"}]},{id:"npcOccupation",name:"NPC Occupation",type:"simple",resultType:"trait",tags:["npcs","jobs"],entries:[{value:"blacksmith",weight:2},{value:"innkeeper",weight:2},{value:"merchant",weight:3},{value:"farmer",weight:4},{value:"town guard",weight:2},{value:"hedge wizard",weight:1},{value:"retired adventurer",weight:1}]},{id:"dungeonRoom",name:"Dungeon Room",type:"simple",resultType:"location",tags:["dungeons","rooms"],entries:[{value:"a dusty storage chamber"},{value:"an ancient library"},{value:"a torture chamber"},{value:"a flooded crypt"},{value:"a ceremonial hall"},{value:"a collapsed tunnel"},{value:"a guard post"},{value:"a treasure vault"}]}],o_=[{id:"simpleLoot",name:"Simple Loot",description:"Basic template combining tables",resultType:"treasure",tags:["treasure","simple"],pattern:"You find {{treasureCoins}} and a {{weapon}}."},{id:"gemPouch",name:"Gem Pouch",description:"Multiple rolls with custom separator",resultType:"treasure",tags:["treasure","gems"],pattern:'A leather pouch contains {{dice:1d4+1}} gems: {{3*gemType|", "}}.'},{id:"uniqueGems",name:"Unique Gems",description:"Multiple unique rolls - no duplicates",resultType:"treasure",tags:["treasure","unique"],pattern:'The crown is set with three different gems: {{3*unique*gemType|" and "}}.'},{id:"quickNpc",name:"Quick NPC",description:"Generates a random NPC with traits",resultType:"npc",tags:["npcs","generator"],pattern:"A {{npcOccupation}} who {{npcTrait}} and {{npcTrait}}."},{id:"randomEncounter",name:"Random Encounter",description:"Dungeon encounter using d100 table",resultType:"encounter",tags:["encounters","dungeon"],pattern:"**Encounter!** You face {{monsterEncounter}}!"},{id:"dungeonExploration",name:"Dungeon Exploration",description:"Uses shared variable for consistent dungeon level",resultType:"location",tags:["dungeons","exploration"],pattern:`## Dungeon Level {{$dungeonLevel}}

Your party of {{$partySize}} adventurers enters {{dungeonRoom}}.

**Encounter:** {{monsterEncounter}}

**Treasure:** {{treasureCoins}}`},{id:"tavernScene",name:"Tavern Scene",description:"Complete tavern encounter",resultType:"location",tags:["taverns","social"],pattern:`## {{tavernName}}

You enter the busy tavern. At the bar, you notice a {{npcOccupation}} who {{npcTrait}}.

**Rumors:** Someone mentions {{monsterEncounter}} spotted near town.`},{id:"treasureHoard",name:"Treasure Hoard",description:"Complete treasure haul with multiple items",resultType:"treasure",tags:["treasure","hoard"],pattern:`## Treasure Hoard

**Coins:** {{treasureCoins}}

**Gems:** {{3*unique*gemType|", "}}

**Magic Item:** {{magicWeapon}}`}],l_={metadata:a_,shared:i_,tables:s_,templates:o_},c_={name:"Fantasy Name Generator",namespace:"examples.fantasyNames",version:"1.0.0",specVersion:"1.0",author:"Rolldeo Examples",description:"A comprehensive fantasy name generator demonstrating race-specific names, gender pronouns, and NPC generation templates.",tags:["fantasy","names","npc","generator"]},u_=JSON.parse('[{"id":"race","name":"Fantasy Race","type":"simple","description":"Determines the race of a fantasy character, setting up name table references.","resultType":"race","entries":[{"id":"elf","value":"Elf","weight":2,"description":"Elves are graceful, long-lived beings with a deep connection to nature and magic. They value art, music, and the preservation of ancient knowledge.","sets":{"raceId":"elf","firstNameTable":"elfFirstNames","surnameTable":"elfSurnames","lifespan":"750 years","size":"Medium"}},{"id":"dwarf","value":"Dwarf","weight":2,"description":"Dwarves are stout, hardy folk known for their craftsmanship, mining expertise, and fierce loyalty to clan and kin. They hold grudges for generations.","sets":{"raceId":"dwarf","firstNameTable":"dwarfFirstNames","surnameTable":"dwarfSurnames","lifespan":"350 years","size":"Medium"}},{"id":"goblin","value":"Goblin","weight":1,"description":"Goblins are small, cunning creatures who thrive in the shadows. Despite their reputation, many goblins possess remarkable ingenuity and survival instincts.","sets":{"raceId":"goblin","firstNameTable":"goblinNames","surnameTable":"goblinEpithets","lifespan":"60 years","size":"Small"}},{"id":"giant","value":"Giant","weight":1,"description":"Giants are massive humanoids of tremendous strength. They range from brutish hill giants to wise storm giants, each with their own culture and traditions.","sets":{"raceId":"giant","firstNameTable":"giantNames","surnameTable":"giantTitles","lifespan":"500 years","size":"Huge"}},{"id":"orc","value":"Orc","weight":2,"description":"Orcs are powerful warriors with a strong tribal culture. They value strength, honor in battle, and loyalty to their clan above all else.","sets":{"raceId":"orc","firstNameTable":"orcNames","surnameTable":"orcClanNames","lifespan":"80 years","size":"Medium"}},{"id":"halfling","value":"Halfling","weight":2,"description":"Halflings are small, cheerful folk who value comfort, good food, and close-knit communities. Their bravery often surprises those who underestimate them.","sets":{"raceId":"halfling","firstNameTable":"halflingFirstNames","surnameTable":"halflingSurnames","lifespan":"150 years","size":"Small"}},{"id":"tiefling","value":"Tiefling","weight":1,"description":"Tieflings bear the mark of infernal heritage, with horns, tails, and unusual skin tones. Many struggle against prejudice while forging their own destiny.","sets":{"raceId":"tiefling","firstNameTable":"tieflingNames","surnameTable":"tieflingVirtueNames","lifespan":"100 years","size":"Medium"}},{"id":"dragonborn","value":"Dragonborn","weight":1,"description":"Dragonborn are proud, draconic humanoids who honor their dragon ancestry. They value clan honor, personal excellence, and self-improvement.","sets":{"raceId":"dragonborn","firstNameTable":"dragonbornNames","surnameTable":"dragonbornClanNames","lifespan":"80 years","size":"Medium"}}]},{"id":"gender","name":"Gender","type":"simple","description":"Determines gender and sets appropriate pronouns for template usage.","resultType":"gender","entries":[{"id":"male","value":"male","weight":1,"sets":{"Subject":"He","subject":"he","object":"him","possessive":"his","possessivePronoun":"his","reflexive":"himself","honorific":"Lord","child":"son","is":"is"}},{"id":"female","value":"female","weight":1,"sets":{"Subject":"She","subject":"she","object":"her","possessive":"her","possessivePronoun":"hers","reflexive":"herself","honorific":"Lady","child":"daughter","is":"is"}},{"id":"nonbinary","value":"non-binary","weight":1,"sets":{"Subject":"They","subject":"they","object":"them","possessive":"their","possessivePronoun":"theirs","reflexive":"themself","honorific":"Mx.","child":"child","is":"are"}}]},{"id":"elfFirstNames","name":"Elf First Names","type":"simple","hidden":true,"entries":[{"value":"Aelindra","tags":["female"]},{"value":"Caelynn","tags":["female"]},{"value":"Erevan","tags":["male"]},{"value":"Thalion","tags":["male"]},{"value":"Lyria","tags":["female"]},{"value":"Galinndan","tags":["male"]},{"value":"Naivara","tags":["female"]},{"value":"Rolen","tags":["male"]},{"value":"Sariel","tags":["neutral"]},{"value":"Varis","tags":["male"]},{"value":"Adrie","tags":["female"]},{"value":"Berrian","tags":["male"]},{"value":"Enna","tags":["female"]},{"value":"Heian","tags":["male"]},{"value":"Ilanis","tags":["neutral"]},{"value":"Theren","tags":["male"]},{"value":"Quelenna","tags":["female"]},{"value":"Soveliss","tags":["male"]},{"value":"Althaea","tags":["female"]},{"value":"Fenris","tags":["male"]}]},{"id":"elfSurnames","name":"Elf Surnames","type":"simple","hidden":true,"entries":[{"value":"Starweaver"},{"value":"Moonwhisper"},{"value":"Nightbreeze"},{"value":"Sunblade"},{"value":"Silverleaf"},{"value":"Dawnstrider"},{"value":"Oakenshield"},{"value":"Winterbloom"},{"value":"Shadowmere"},{"value":"Brightwater"},{"value":"Thornwood"},{"value":"Crystalvale"},{"value":"Glimmerstone"},{"value":"Whisperwind"},{"value":"Emberheart"}]},{"id":"dwarfFirstNames","name":"Dwarf First Names","type":"simple","hidden":true,"entries":[{"value":"Thorin","tags":["male"]},{"value":"Balin","tags":["male"]},{"value":"Dwalin","tags":["male"]},{"value":"Gimli","tags":["male"]},{"value":"Bofur","tags":["male"]},{"value":"Dori","tags":["male"]},{"value":"Nori","tags":["male"]},{"value":"Ori","tags":["male"]},{"value":"Helga","tags":["female"]},{"value":"Brunhild","tags":["female"]},{"value":"Dagmar","tags":["female"]},{"value":"Thyra","tags":["female"]},{"value":"Astrid","tags":["female"]},{"value":"Ingrid","tags":["female"]},{"value":"Rurik","tags":["male"]},{"value":"Thorgrim","tags":["male"]},{"value":"Kira","tags":["female"]},{"value":"Brynja","tags":["female"]},{"value":"Gundren","tags":["male"]},{"value":"Harbek","tags":["male"]}]},{"id":"dwarfSurnames","name":"Dwarf Surnames","type":"simple","hidden":true,"entries":[{"value":"Ironforge"},{"value":"Stonehelm"},{"value":"Battlehammer"},{"value":"Firebeard"},{"value":"Goldminer"},{"value":"Ironfoot"},{"value":"Copperbrew"},{"value":"Steelaxe"},{"value":"Deepdelver"},{"value":"Mountainheart"},{"value":"Bronzeshield"},{"value":"Granitepick"},{"value":"Silvervein"},{"value":"Thunderstone"},{"value":"Hammerfall"}]},{"id":"goblinNames","name":"Goblin Names","type":"simple","hidden":true,"entries":[{"value":"Snaggle"},{"value":"Grik"},{"value":"Zix"},{"value":"Nix"},{"value":"Splurt"},{"value":"Blix"},{"value":"Crink"},{"value":"Droop"},{"value":"Fizzle"},{"value":"Glonk"},{"value":"Klarg"},{"value":"Mog"},{"value":"Noggin"},{"value":"Pox"},{"value":"Retch"},{"value":"Scrunge"},{"value":"Tink"},{"value":"Vex"},{"value":"Wort"},{"value":"Zub"}]},{"id":"goblinEpithets","name":"Goblin Epithets","type":"simple","hidden":true,"entries":[{"value":"the Sneaky"},{"value":"Ratcatcher"},{"value":"Shinyfinder"},{"value":"Bonegnawer"},{"value":"the Quick"},{"value":"Mudfoot"},{"value":"Stabsworth"},{"value":"the Clever"},{"value":"Darkdweller"},{"value":"Three-Fingers"},{"value":"the Bold"},{"value":"Scrapheap"},{"value":"Nightcreeper"},{"value":"Wartbiter"},{"value":"the Fortunate"}]},{"id":"giantNames","name":"Giant Names","type":"simple","hidden":true,"entries":[{"value":"Gromnir"},{"value":"Thrym"},{"value":"Surtr"},{"value":"Ymir"},{"value":"Bolgrim"},{"value":"Dovregar"},{"value":"Fendar"},{"value":"Gjallar"},{"value":"Hrungnir"},{"value":"Jotnar"},{"value":"Kolgrim"},{"value":"Mugdar"},{"value":"Orgnar"},{"value":"Skaldi"},{"value":"Thrudge"},{"value":"Vangrim"},{"value":"Wulfgar"},{"value":"Zephara"},{"value":"Bergita"},{"value":"Helgara"}]},{"id":"giantTitles","name":"Giant Titles","type":"simple","hidden":true,"entries":[{"value":"Mountainbreaker"},{"value":"Earthshaker"},{"value":"Stormcaller"},{"value":"Skycrusher"},{"value":"Worldwalker"},{"value":"Thundervoice"},{"value":"Boulderkin"},{"value":"Cragmaster"},{"value":"Frostbringer"},{"value":"Peakwarden"},{"value":"Stoneheart"},{"value":"the Colossal"},{"value":"the Ancient"},{"value":"Cloudtoucher"},{"value":"Avalanche"}]},{"id":"orcNames","name":"Orc Names","type":"simple","hidden":true,"entries":[{"value":"Grok"},{"value":"Thrak"},{"value":"Urgash"},{"value":"Moglak"},{"value":"Grumnak"},{"value":"Shagar"},{"value":"Durgash"},{"value":"Korgul"},{"value":"Nazgrim"},{"value":"Ragnar"},{"value":"Shelza"},{"value":"Morgra"},{"value":"Grusha"},{"value":"Yazga"},{"value":"Borka"},{"value":"Urzag"},{"value":"Zograk"},{"value":"Krusk"},{"value":"Bagrak"},{"value":"Olgra"}]},{"id":"orcClanNames","name":"Orc Clan Names","type":"simple","hidden":true,"entries":[{"value":"of the Bloody Hand"},{"value":"Skullsplitter"},{"value":"Bonecrusher"},{"value":"of the Burning Blade"},{"value":"Ironjaw"},{"value":"of the Red Fang"},{"value":"Blacktusk"},{"value":"Warborn"},{"value":"of the Shattered Shield"},{"value":"Gorefist"},{"value":"of the Thunder Clan"},{"value":"Deathbringer"},{"value":"of the Worg Riders"},{"value":"Nighthowl"},{"value":"of the Iron Horde"}]},{"id":"halflingFirstNames","name":"Halfling First Names","type":"simple","hidden":true,"entries":[{"value":"Bilbo","tags":["male"]},{"value":"Frodo","tags":["male"]},{"value":"Samwise","tags":["male"]},{"value":"Merry","tags":["male"]},{"value":"Pippin","tags":["male"]},{"value":"Rosie","tags":["female"]},{"value":"Daisy","tags":["female"]},{"value":"Marigold","tags":["female"]},{"value":"Tansy","tags":["female"]},{"value":"Cora","tags":["female"]},{"value":"Alton","tags":["male"]},{"value":"Beau","tags":["male"]},{"value":"Eldon","tags":["male"]},{"value":"Garret","tags":["male"]},{"value":"Lavinia","tags":["female"]},{"value":"Portia","tags":["female"]},{"value":"Seraphina","tags":["female"]},{"value":"Wellby","tags":["male"]},{"value":"Lily","tags":["female"]},{"value":"Osborn","tags":["male"]}]},{"id":"halflingSurnames","name":"Halfling Surnames","type":"simple","hidden":true,"entries":[{"value":"Underbough"},{"value":"Goodbarrel"},{"value":"Tealeaf"},{"value":"Thorngage"},{"value":"Brushgather"},{"value":"Highhill"},{"value":"Greenbottle"},{"value":"Tosscobble"},{"value":"Proudfoot"},{"value":"Bramblefoot"},{"value":"Quickstep"},{"value":"Appleblossom"},{"value":"Hilltopple"},{"value":"Warmwater"},{"value":"Hearthfire"}]},{"id":"tieflingNames","name":"Tiefling Names","type":"simple","hidden":true,"entries":[{"value":"Morthos"},{"value":"Damakos"},{"value":"Kairon"},{"value":"Leucis"},{"value":"Melech"},{"value":"Therai"},{"value":"Akmenos"},{"value":"Amnon"},{"value":"Bryseis"},{"value":"Criella"},{"value":"Damaia"},{"value":"Kallista"},{"value":"Lerissa"},{"value":"Makaria"},{"value":"Orianna"},{"value":"Phaedra"},{"value":"Rieta"},{"value":"Nemeia"},{"value":"Zariel"},{"value":"Xarrai"}]},{"id":"tieflingVirtueNames","name":"Tiefling Virtue Names","type":"simple","hidden":true,"description":"Many tieflings adopt a virtue name that reflects their personal goals or ideals.","entries":[{"value":"\\"Ambition\\""},{"value":"\\"Carrion\\""},{"value":"\\"Creed\\""},{"value":"\\"Despair\\""},{"value":"\\"Excellence\\""},{"value":"\\"Fear\\""},{"value":"\\"Glory\\""},{"value":"\\"Hope\\""},{"value":"\\"Ideal\\""},{"value":"\\"Music\\""},{"value":"\\"Nowhere\\""},{"value":"\\"Open\\""},{"value":"\\"Poetry\\""},{"value":"\\"Quest\\""},{"value":"\\"Random\\""},{"value":"\\"Reverence\\""},{"value":"\\"Sorrow\\""},{"value":"\\"Torment\\""},{"value":"\\"Weary\\""},{"value":"\\"Ruin\\""}]},{"id":"dragonbornNames","name":"Dragonborn Names","type":"simple","hidden":true,"entries":[{"value":"Arjhan"},{"value":"Balasar"},{"value":"Bharash"},{"value":"Donaar"},{"value":"Ghesh"},{"value":"Heskan"},{"value":"Kriv"},{"value":"Medrash"},{"value":"Mehen"},{"value":"Nadarr"},{"value":"Pandjed"},{"value":"Patrin"},{"value":"Rhogar"},{"value":"Shamash"},{"value":"Shedinn"},{"value":"Akra"},{"value":"Biri"},{"value":"Daar"},{"value":"Farideh"},{"value":"Harann"}]},{"id":"dragonbornClanNames","name":"Dragonborn Clan Names","type":"simple","hidden":true,"entries":[{"value":"Clethtinthiallor"},{"value":"Daardendrian"},{"value":"Delmirev"},{"value":"Drachedandion"},{"value":"Fenkenkabradon"},{"value":"Kepeshkmolik"},{"value":"Kerrhylon"},{"value":"Kimbatuul"},{"value":"Linxakasendalor"},{"value":"Myastan"},{"value":"Nemmonis"},{"value":"Norixius"},{"value":"Ophinshtalajiir"},{"value":"Prexijandilin"},{"value":"Shestendeliath"}]},{"id":"profession","name":"NPC Profession","type":"simple","description":"Common professions for fantasy NPCs.","resultType":"profession","entries":[{"value":"blacksmith","description":"A skilled metalworker who forges weapons, armor, and tools. {{@gender.Subject}} spends long hours at the forge."},{"value":"merchant","description":"A trader who buys and sells goods. {{@gender.Subject}} has an eye for valuable wares and a silver tongue for bargaining."},{"value":"innkeeper","description":"The proprietor of a local tavern or inn. {{@gender.Subject}} knows all the local gossip and provides a warm hearth for travelers."},{"value":"guard","description":"A protector of the peace who patrols the streets. {{@gender.Subject}} takes {{@gender.possessive}} duty seriously."},{"value":"healer","description":"A practitioner of medicine or divine healing. {{@gender.Subject}} has saved many lives with {{@gender.possessive}} skills."},{"value":"scholar","description":"A learned individual who studies ancient texts. {{@gender.Subject}} can often be found buried in books."},{"value":"farmer","description":"A hardworking individual who works the land. {{@gender.Subject}} rises with the sun and knows the rhythms of the seasons."},{"value":"hunter","description":"A skilled tracker who hunts game in the wilds. {{@gender.Subject}} {{@gender.is}} at home in the forest."},{"value":"mage","description":"A practitioner of the arcane arts. {{@gender.Subject}} wields magic with studied precision."},{"value":"bard","description":"A performer and storyteller. {{@gender.Subject}} travels from town to town sharing tales and songs."},{"value":"thief","description":"A nimble-fingered rogue who lives by {{@gender.possessive}} wits. {{@gender.Subject}} knows every shadow in the city."},{"value":"priest","description":"A devoted servant of the gods. {{@gender.Subject}} provides spiritual guidance to {{@gender.possessive}} community."}]},{"id":"personalityTrait","name":"Personality Trait","type":"simple","entries":[{"value":"cheerful and optimistic"},{"value":"gruff but kindhearted"},{"value":"suspicious of strangers"},{"value":"eager to share stories"},{"value":"quiet and observant"},{"value":"boisterous and loud"},{"value":"nervous and fidgety"},{"value":"calm and collected"},{"value":"fiercely protective"},{"value":"curious about everything"},{"value":"haunted by the past"},{"value":"ambitious and driven"}]},{"id":"physicalTrait","name":"Physical Trait","type":"simple","entries":[{"value":"has a prominent scar"},{"value":"walks with a slight limp"},{"value":"has striking eyes"},{"value":"is unusually tall for {{@gender.possessive}} kind"},{"value":"has calloused hands from hard work"},{"value":"wears an old family heirloom"},{"value":"has a distinctive birthmark"},{"value":"keeps {{@gender.possessive}} hair impeccably groomed"},{"value":"has a warm, genuine smile"},{"value":"bears tattoos of {{@gender.possessive}} clan"},{"value":"is missing a finger"},{"value":"has prematurely gray hair"}]}]'),d_=[{id:"fullName",name:"Generate Full Name",description:"Generates a complete name for a specified race.",shared:{_raceInit:"{{race}}"},pattern:"{{@race.firstNameTable}} {{@race.surnameTable}}"},{id:"simpleNpc",name:"Simple NPC",description:"Generates a basic NPC with name, race, and gender.",pattern:"**{{fullName}}** is a {{gender}} {{race}}."},{id:"detailedNpc",name:"Detailed NPC",description:"Generates a fully detailed NPC with profession, personality, and description.",shared:{_genderInit:"{{gender}}",_raceInit:"{{race}}",_firstName:"{{@race.firstNameTable}}",_surname:"{{@race.surnameTable}}"},pattern:`## {{$_firstName}} {{$_surname}}

**{{@gender.honorific}} {{$_firstName}} {{$_surname}}** is a {{@gender.value}} {{@race.value}} {{profession}}.

{{@gender.Subject}} {{@gender.is}} {{personalityTrait}} and {{physicalTrait}}.

*{{@gender.Subject}} has a lifespan of approximately {{@race.lifespan}}.*`},{id:"npcWithBackstory",name:"NPC with Backstory",description:"Generates an NPC with a narrative backstory using pronoun placeholders.",shared:{_genderInit:"{{gender}}",_raceInit:"{{race}}",_firstName:"{{@race.firstNameTable}}",_surname:"{{@race.surnameTable}}"},pattern:`### {{$_firstName}} {{$_surname}}

{{@gender.Subject}} {{@gender.is}} a {{@race.value}} {{profession}} known throughout the region.

Those who know {{@gender.object}} describe {{@gender.object}} as {{personalityTrait}}. {{@gender.Subject}} {{physicalTrait}}, a reminder of {{@gender.possessive}} past adventures.

As a {{@race.value}}, {{@gender.subject}} carries the traditions of {{@gender.possessive}} people. The burden of {{@gender.possessive}} heritage weighs on {{@gender.object}}, but {{@gender.subject}} faces each day with determination.

> "I've learned to rely on {{@gender.reflexive}}," {{@gender.subject}} often says.`},{id:"partyOfAdventurers",name:"Party of Adventurers",description:"Generates a group of 4 unique NPCs for an adventuring party.",pattern:`# The Adventuring Party

{{4*unique*simpleNpc|"

"}}`},{id:"tavernPatrons",name:"Tavern Patrons",description:"Generates several NPCs you might find at a local tavern.",pattern:`# Tonight at the Tavern

The following patrons are drinking and socializing:

{{dice:1d4+2*detailedNpc|"

---

"}}`}],p_={metadata:c_,tables:u_,templates:d_},f_={name:"Sci-Fi Quickstart",namespace:"rollify.scifi",version:"1.0.0",specVersion:"1.0",author:"Rollify",description:"A sci-fi starter demonstrating all core features: basic tables, weights, dice, table references, multiple rolls, unique selections, custom separators, ranges, templates, and shared variables.",tags:["sci-fi","space","quickstart","tutorial"]},h_={sectorNumber:"{{dice:1d20}}",crewSize:"{{dice:1d6+3}}"},m_=[{id:"cargoType",name:"Cargo Type",type:"simple",description:"Basic table - equal chance for each entry",resultType:"item",tags:["cargo","basic"],entries:[{value:"medical supplies"},{value:"food rations"},{value:"machine parts"},{value:"fuel cells"}]},{id:"threatLevel",name:"Threat Level",type:"simple",description:"Weighted entries - lower threats more common",resultType:"trait",tags:["encounters","weighted"],entries:[{id:"minimal",value:"minimal",weight:4},{id:"moderate",value:"moderate",weight:5},{id:"significant",value:"significant",weight:3},{id:"extreme",value:"extreme",weight:1}]},{id:"salvageValue",name:"Salvage Value",type:"simple",description:"Dice rolls generate random credit amounts",resultType:"treasure",tags:["salvage","dice"],entries:[{value:"{{dice:2d6*50}} credits of scrap",weight:4},{value:"{{dice:3d6*100}} credits in components",weight:3},{value:"{{dice:2d6*500}} credits in rare materials",weight:2},{value:"{{dice:4d6*1000}} credits in tech",weight:1}]},{id:"shipSize",name:"Ship Size",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"small",weight:4},{value:"medium",weight:3},{value:"large",weight:2},{value:"massive",weight:1}]},{id:"shipRole",name:"Ship Role",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"freighter"},{value:"patrol craft"},{value:"mining vessel"},{value:"research ship"},{value:"passenger liner"},{value:"military corvette"}]},{id:"ship",name:"Ship",type:"simple",description:"Table references combine results from other tables",resultType:"vehicle",tags:["ships","vehicles"],entries:[{value:"{{shipSize}} {{shipRole}}"}]},{id:"weaponMod",name:"Weapon Modification",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"overcharged",sets:{damage:"+1"}},{value:"rapid-fire",sets:{rate:"fast"}},{value:"scoped",sets:{range:"long"}},{value:"silenced",sets:{stealth:"yes"}},{value:"armor-piercing",sets:{penetration:"high"}}]},{id:"weaponType",name:"Weapon Type",type:"simple",hidden:!0,resultType:"item",entries:[{value:"laser pistol"},{value:"plasma rifle"},{value:"ion blaster"},{value:"pulse cannon"},{value:"rail gun"}]},{id:"advancedWeapon",name:"Advanced Weapon",type:"simple",description:"Combines dice bonus with modification and weapon type",resultType:"item",tags:["equipment","weapons"],entries:[{value:"mark {{dice:1d4}} {{weaponMod}} {{weaponType}}"}]},{id:"scanResult",name:"Scan Result (d100)",type:"simple",description:"Ranges work like traditional percentile tables",resultType:"encounter",tags:["encounters","scanning","ranges"],entries:[{id:"clear",value:"all clear - no contacts",range:[1,30]},{id:"debris",value:"debris field detected",range:[31,50]},{id:"ship",value:"{{ship}} on sensors",range:[51,70]},{id:"distress",value:"distress signal from {{ship}}",range:[71,85]},{id:"pirates",value:"{{dice:1d3}} pirate vessels approaching!",range:[86,95]},{id:"anomaly",value:"unknown anomaly detected",range:[96,100]}]},{id:"planetFeature",name:"Planet Feature",type:"simple",resultType:"trait",tags:["planets","exploration"],entries:[{value:"ancient ruins",sets:{interest:"archaeological"}},{value:"rich mineral deposits",sets:{interest:"mining"}},{value:"hostile wildlife",sets:{interest:"danger"}},{value:"abandoned colony",sets:{interest:"salvage"}},{value:"strange energy readings",sets:{interest:"mystery"}}]},{id:"planetAdjective",name:"Planet Adjective",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"Frozen"},{value:"Scorched"},{value:"Stormy"},{value:"Barren"},{value:"Verdant"},{value:"Toxic"},{value:"Oceanic"},{value:"Volcanic"}]},{id:"planetNoun",name:"Planet Noun",type:"simple",hidden:!0,resultType:"trait",entries:[{value:"Prime"},{value:"Haven"},{value:"Reach"},{value:"Station"},{value:"Outpost"},{value:"Colony"},{value:"Base"},{value:"Point"}]},{id:"planetName",name:"Planet Name",type:"simple",description:"Combines two helper tables for variety",resultType:"name",tags:["planets","names"],entries:[{value:"{{planetAdjective}} {{planetNoun}}"}]},{id:"crewTrait",name:"Crew Trait",type:"simple",resultType:"trait",tags:["npcs","crew"],entries:[{value:"is a former military officer"},{value:"has cybernetic implants"},{value:"speaks multiple alien languages"},{value:"is wanted in three systems"},{value:"has unusual allergies"},{value:"collects alien artifacts"},{value:"is secretly wealthy"},{value:"never removes their helmet"}]},{id:"crewRole",name:"Crew Role",type:"simple",resultType:"trait",tags:["npcs","jobs"],entries:[{value:"pilot",weight:2},{value:"engineer",weight:3},{value:"medic",weight:2},{value:"gunner",weight:2},{value:"navigator",weight:2},{value:"scientist",weight:1},{value:"mercenary",weight:1}]},{id:"stationSection",name:"Station Section",type:"simple",resultType:"location",tags:["stations","locations"],entries:[{value:"a bustling cargo bay"},{value:"the medical wing"},{value:"a seedy cantina"},{value:"the command center"},{value:"an engineering deck"},{value:"abandoned quarters"},{value:"a black market shop"},{value:"the docking ring"}]}],g_=[{id:"simpleSalvage",name:"Simple Salvage",description:"Basic template combining tables",resultType:"treasure",tags:["salvage","simple"],pattern:"You salvage {{salvageValue}} and {{cargoType}}."},{id:"cargoManifest",name:"Cargo Manifest",description:"Multiple rolls with custom separator",resultType:"item",tags:["cargo","inventory"],pattern:'Cargo hold contains {{dice:1d4+2}} crates: {{3*cargoType|", "}}.'},{id:"uniqueCargo",name:"Unique Cargo",description:"Multiple unique rolls - no duplicates",resultType:"item",tags:["cargo","unique"],pattern:`The smuggler's hold has three different shipments: {{3*unique*cargoType|" and "}}.`},{id:"quickCrewmate",name:"Quick Crewmate",description:"Generates a random crew member with traits",resultType:"npc",tags:["npcs","crew"],pattern:"A {{crewRole}} who {{crewTrait}} and {{crewTrait}}."},{id:"spaceEncounter",name:"Space Encounter",description:"Space encounter using percentile table",resultType:"encounter",tags:["encounters","space"],pattern:"**Sensors Alert!** {{scanResult}}"},{id:"systemSurvey",name:"System Survey",description:"Uses shared variable for consistent sector number",resultType:"location",tags:["exploration","systems"],pattern:`## Sector {{$sectorNumber}} Survey

Your crew of {{$crewSize}} surveys the system.

**Planet:** {{planetName}}
**Notable:** {{planetFeature}}

**Scan:** {{scanResult}}`},{id:"stationScene",name:"Station Scene",description:"Complete station encounter",resultType:"location",tags:["stations","social"],pattern:`## Docking at {{planetName}}

You enter {{stationSection}}. A {{crewRole}} approaches who {{crewTrait}}.

**Rumors:** Someone mentions {{scanResult}} in this sector.`},{id:"salvageHaul",name:"Salvage Haul",description:"Complete salvage operation results",resultType:"treasure",tags:["salvage","loot"],pattern:`## Salvage Report

**Credits:** {{salvageValue}}

**Cargo Recovered:** {{3*unique*cargoType|", "}}

**Equipment Found:** {{advancedWeapon}}`}],b_={metadata:f_,shared:h_,tables:m_,templates:g_},Lb=[{id:"fantasy-rpg",document:l_},{id:"fantasy-names",document:p_},{id:"sci-fi",document:b_}],an=Pf()((e,t)=>({engine:new r_,collections:new Map,isInitialized:!1,isLoading:!1,error:null,initialize:async()=>{if(!t().isInitialized){e({isLoading:!0,error:null});try{await Jr();const r=await hC(),i=new Set(r.map(d=>d.id)),s=Date.now(),o=Lb.filter(({id:d})=>!i.has(d));await Promise.all(o.map(({id:d,document:p})=>Jd({id:d,document:p,name:p.metadata.name,namespace:p.metadata.namespace,version:p.metadata.version,description:p.metadata.description,tags:p.metadata.tags||[],isPreloaded:!0,source:"preloaded",createdAt:s,updatedAt:s})));for(const{id:d,document:p}of Lb)t().loadCollection(d,p,!0,"preloaded");for(const d of r)d.isPreloaded||t().loadCollection(d.id,d.document,!1,d.source);const c=new Map;for(const d of r)d.fileName&&(c.set(d.fileName,d.id),c.set(`./${d.fileName}`,d.id));c.size>0&&t().engine.resolveImports(c),e({isInitialized:!0,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Failed to initialize",isLoading:!1})}}},loadCollection:(n,r,i=!1,s="file")=>{var h;const{engine:o,collections:c}=t();o.loadCollection(r,n,i);const d={id:n,name:r.metadata.name,namespace:r.metadata.namespace,version:r.metadata.version,description:r.metadata.description,tags:r.metadata.tags||[],tableCount:r.tables.length,templateCount:((h=r.templates)==null?void 0:h.length)||0,isPreloaded:i,source:s},p=new Map(c);p.set(n,d),e({collections:p})},deleteCollection:async n=>{const{engine:r,collections:i}=t(),s=i.get(n);if(!s)throw new Error(`Collection not found: ${n}`);if(s.isPreloaded)throw new Error("Cannot delete pre-loaded collection");r.unloadCollection(n),await mC(n);const o=new Map(i);o.delete(n),e({collections:o})},importFiles:async n=>kC(n),saveImportedCollections:async(n,r,i)=>{for(const s of n)await Jd({id:s.id,document:s.document,name:s.name,namespace:s.document.metadata.namespace,version:s.document.metadata.version,description:s.document.metadata.description,tags:s.document.metadata.tags||[],isPreloaded:!1,source:r,fileName:s.fileName,createdAt:Date.now(),updatedAt:Date.now()}),t().loadCollection(s.id,s.document,!1,r);i&&i.size>0&&t().engine.resolveImports(i)},saveCollection:async(n,r,i)=>{const s=t().collections.get(n),o=Date.now();let c=o;if(s){const d=await fC(n);c=(d==null?void 0:d.createdAt)??o}await Jd({id:n,document:r,name:r.metadata.name,namespace:r.metadata.namespace,version:r.metadata.version,description:r.metadata.description,tags:r.metadata.tags||[],isPreloaded:!1,source:i,createdAt:c,updatedAt:o}),t().loadCollection(n,r,!1,i),t().engine.resolveImports()},getCollection:n=>t().collections.get(n),getCollectionDocument:n=>{const r=t().engine.getCollection(n);return r==null?void 0:r.document},getPreloadedCollections:()=>Array.from(t().collections.values()).filter(n=>n.isPreloaded),getUserCollections:()=>Array.from(t().collections.values()).filter(n=>!n.isPreloaded),getAllCollections:()=>Array.from(t().collections.values()),getTableList:n=>{try{return t().engine.listTables(n)}catch{return[]}},getTemplateList:n=>{try{return t().engine.listTemplates(n)}catch{return[]}},getAllTags:()=>{const n=new Set;for(const r of t().collections.values())for(const i of r.tags)n.add(i);return Array.from(n).sort()}})),y_=[{path:"/roll",icon:Sr,label:"Start Rolling",description:"Roll on your favorite tables",color:"mint"},{path:"/library",icon:Wc,label:"Browse Library",description:"Explore table collections",color:"lavender"},{path:"/editor",icon:Ff,label:"Create Tables",description:"Build your own random tables",color:"amber"}],v_=[{icon:Xv,title:"Works Offline",description:"Install as a PWA and use Rolldeo without internet.",color:"mint"},{icon:ma,title:"Full Spec Support",description:"Dice rolls, math, inheritance, conditionals & more.",color:"lavender"},{icon:Ff,title:"Visual & JSON Editing",description:"Edit with a friendly UI or directly in JSON.",color:"amber"},{icon:wN,title:"Roll History",description:"Track results and re-roll when you need inspiration.",color:"rose"}],Pb={mint:{icon:"icon-mint",card:"card-mint",text:"text-mint",bg:"bg-mint"},lavender:{icon:"icon-lavender",card:"card-lavender",text:"text-lavender",bg:"bg-lavender"},amber:{icon:"icon-amber",card:"card-amber",text:"text-amber",bg:"bg-amber"},rose:{icon:"icon-rose",card:"card-rose",text:"text-rose",bg:"bg-rose"}};function x_(){const e=hs(),{importFiles:t,saveImportedCollections:n}=an(),r=an(b=>b.collections),i=N.useMemo(()=>new Set(r.keys()),[r]),[s,o]=N.useState(!1),[c,d]=N.useState(null),[p,h]=N.useState(!1),m=N.useCallback(async b=>{o(!0),h(!0);try{const x=await t(b),v=x.collections.map(k=>({...k,id:hx(k.id,i)})),w=new Map;if(x.pathToIdMap)for(const[k,C]of x.pathToIdMap){const T=x.collections.find(I=>I.id===C),D=v.find(I=>I.fileName===(T==null?void 0:T.fileName));D&&w.set(k,D.id)}if(v.length>0){const k=b.some(C=>C.name.endsWith(".zip"))?"zip":"file";await n(v,k,w)}d({...x,collections:v})}catch(x){d({success:!1,collections:[],errors:[{fileName:"Import",error:x instanceof Error?x.message:"Import failed"}]})}finally{o(!1)}},[t,n,i]),g=N.useCallback(()=>{h(!1),c!=null&&c.success&&e("/library"),d(null)},[c,e]);return u.jsxs("div",{className:"space-y-12",children:[u.jsxs("section",{className:"text-center space-y-6 py-8",children:[u.jsx("div",{className:"flex justify-center animate-fade-in",children:u.jsx("img",{src:zf,alt:"Rolldeo logo",className:"h-24 w-24 sm:h-32 sm:w-32 rounded-2xl shadow-lg shadow-primary/20"})}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium animate-fade-in",children:[u.jsx(ma,{className:"h-4 w-4"}),"Random Table Engine"]}),u.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight animate-slide-up",children:["Find the Perfect",u.jsx("br",{}),u.jsx("span",{className:"gradient-text",children:"Random Roll"})]}),u.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto animate-slide-up stagger-1",children:"Your digital companion for random tables. Roll on pre-built tables, upload your own, and never be without inspiration at your game table."})]}),u.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:y_.map((b,x)=>{const v=Pb[b.color];return u.jsx(Ln,{to:b.path,className:`group card-elevated p-6 border transition-all duration-300 hover:scale-[1.02] hover:border-white/10 ${v.card} animate-slide-up`,style:{animationDelay:`${(x+1)*.1}s`},children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`icon-container ${v.icon}`,children:u.jsx(b.icon,{className:"h-6 w-6"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-lg mb-1 group-hover:text-foreground transition-colors",children:b.label}),u.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),u.jsx(Bv,{className:"h-5 w-5 text-muted-foreground opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})},b.path)})}),u.jsx("section",{className:"animate-slide-up stagger-3",children:u.jsx(mx,{onFilesSelected:m,disabled:s})}),u.jsxs("section",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Features"}),u.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-border to-transparent"})]}),u.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:v_.map((b,x)=>{const v=Pb[b.color];return u.jsxs("div",{className:"card-elevated p-5 border border-white/5 animate-slide-up",style:{animationDelay:`${(x+1)*.1}s`},children:[u.jsx("div",{className:`icon-container ${v.icon} w-fit mb-4`,children:u.jsx(b.icon,{className:"h-5 w-5"})}),u.jsx("h3",{className:"font-semibold mb-2",children:b.title}),u.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:b.description})]},b.title)})})]}),u.jsx("section",{className:"card-elevated border border-white/5 p-6 md:p-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[u.jsx("div",{className:"icon-container icon-lavender shrink-0",children:u.jsx(Gc,{className:"h-6 w-6"})}),u.jsxs("div",{className:"flex-1 text-center md:text-left",children:[u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Fully Open Source & CC0 Licensed"}),u.jsx("p",{className:"text-muted-foreground",children:"Rolldeo is completely free and open source. The code, documentation, and included table collections are all released under the CC0 license  use them however you like, no attribution required."})]}),u.jsxs(Ln,{to:"/guide",className:"btn-secondary flex items-center gap-2 shrink-0",children:[u.jsx(Pr,{className:"h-4 w-4"}),"Learn More"]})]})}),u.jsx("section",{className:"card-elevated border border-white/5 p-6 md:p-8",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Ready to get started?"}),u.jsx("p",{className:"text-muted-foreground",children:"Upload your random tables or explore the pre-loaded collections."})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs(Ln,{to:"/library",className:"btn-secondary flex items-center gap-2",children:[u.jsx(Wc,{className:"h-4 w-4"}),"Browse Library"]}),u.jsxs(Ln,{to:"/roll",className:"btn-primary flex items-center gap-2",children:[u.jsx(Sr,{className:"h-4 w-4"}),"Start Rolling"]})]})]})}),u.jsx(gx,{isOpen:p,onClose:g,result:c,isImporting:s})]})}function Nx(){const{collections:e,isLoading:t,isInitialized:n,error:r,initialize:i,deleteCollection:s,importFiles:o,getAllTags:c}=an(),{searchQuery:d,selectedTags:p}=Ft();N.useEffect(()=>{!n&&!t&&i()},[n,t]);const h=N.useMemo(()=>Array.from(e.values()).filter(m=>{var g;if(d){const b=d.toLowerCase(),x=m.name.toLowerCase().includes(b),v=(g=m.description)==null?void 0:g.toLowerCase().includes(b),w=m.namespace.toLowerCase().includes(b),k=m.tags.some(C=>C.toLowerCase().includes(b));if(!x&&!v&&!w&&!k)return!1}return!(p.length>0&&!p.some(b=>m.tags.includes(b)))}),[e,d,p]);return{collections:h,preloaded:h.filter(m=>m.isPreloaded),userCollections:h.filter(m=>!m.isPreloaded),allTags:c(),isLoading:t,isInitialized:n,error:r,deleteCollection:s,importFiles:o}}const Xp=Pf()(ax((e,t)=>({selectedCollectionId:null,selectedTableId:null,selectedTemplateId:null,currentResult:null,isRolling:!1,rollError:null,traceEnabled:!1,history:[],historyLoaded:!1,historyError:null,selectCollection:n=>{e({selectedCollectionId:n,selectedTableId:null,selectedTemplateId:null,currentResult:null,rollError:null})},selectTable:n=>{e({selectedTableId:n,selectedTemplateId:null,currentResult:null,rollError:null})},selectTemplate:n=>{e({selectedTemplateId:n,selectedTableId:null,currentResult:null,rollError:null})},setTraceEnabled:n=>{e({traceEnabled:n})},roll:async()=>{const{selectedCollectionId:n,selectedTableId:r,selectedTemplateId:i}=t();return n?i?t().rollOnTemplate(n,i):r?t().rollOnTable(n,r):(e({rollError:"No table or template selected"}),null):(e({rollError:"No collection selected"}),null)},rollOnTable:async(n,r)=>{e({isRolling:!0,rollError:null});try{const i=an.getState().engine,{traceEnabled:s}=t(),o=i.roll(r,n,{enableTrace:s}),d={id:await Cb({result:o,collectionId:n,tableId:r,pinned:!1,timestamp:Date.now()}),result:o,collectionId:n,tableId:r,pinned:!1,timestamp:Date.now()};return e(p=>({currentResult:o,isRolling:!1,history:[d,...p.history].slice(0,100)})),o}catch(i){const s=i instanceof Error?i.message:"Roll failed";throw e({isRolling:!1,rollError:s}),i}},rollOnTemplate:async(n,r)=>{e({isRolling:!0,rollError:null});try{const i=an.getState().engine,{traceEnabled:s}=t(),o=i.rollTemplate(r,n,{enableTrace:s}),d={id:await Cb({result:o,collectionId:n,templateId:r,pinned:!1,timestamp:Date.now()}),result:o,collectionId:n,templateId:r,pinned:!1,timestamp:Date.now()};return e(p=>({currentResult:o,isRolling:!1,history:[d,...p.history].slice(0,100)})),o}catch(i){const s=i instanceof Error?i.message:"Roll failed";throw e({isRolling:!1,rollError:s}),i}},clearResult:()=>{e({currentResult:null,rollError:null})},loadHistory:async()=>{if(!t().historyLoaded)try{const n=await gC(100);e({history:n,historyLoaded:!0,historyError:null})}catch(n){console.error("Failed to load history:",n),e({historyLoaded:!0,historyError:n instanceof Error?n.message:"Failed to load roll history"})}},pinResult:async(n,r)=>{try{await bC(n,r),e(i=>({history:i.history.map(s=>s.id===n?{...s,pinned:r}:s)}))}catch(i){console.error("Failed to pin result:",i)}},deleteHistoryItem:async n=>{try{await yC(n),e(r=>({history:r.history.filter(i=>i.id!==n)}))}catch(r){console.error("Failed to delete history item:",r)}},clearHistory:async(n=!0)=>{await vC(n),e(n?r=>({history:r.history.filter(i=>i.pinned)}):{history:[]})}}),{name:"roll-store",partialize:e=>({selectedCollectionId:e.selectedCollectionId,selectedTableId:e.selectedTableId,selectedTemplateId:e.selectedTemplateId})}));function w_(e){const t=new Date(e),n=new Date,r=n.getTime()-t.getTime();return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:t.getFullYear()===n.getFullYear()?t.toLocaleDateString(void 0,{month:"short",day:"numeric"}):t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function E_(e,t){const{selectedCollectionId:n,selectedTableId:r,selectedTemplateId:i,currentResult:s,isRolling:o,rollError:c,history:d,selectCollection:p,selectTable:h,selectTemplate:m,roll:g,rollOnTable:b,rollOnTemplate:x,clearResult:v,loadHistory:w,pinResult:k,deleteHistoryItem:C,clearHistory:T}=Xp(),{getAllCollections:D,getTableList:I,getTemplateList:L,isInitialized:O}=an(),{showHiddenTables:B}=Ft();N.useEffect(()=>{e&&e!==n&&p(e)},[e]),N.useEffect(()=>{},[t]),N.useEffect(()=>{w()},[]);const z=N.useMemo(()=>D(),[D]),j=N.useMemo(()=>{if(!n)return[];const se=I(n);return B?se:se.filter(ne=>!ne.hidden)},[n,I,B]),q=N.useMemo(()=>n?L(n):[],[n,L]),F=N.useMemo(()=>O&&n!==null&&(r!==null||i!==null),[O,n,r,i]),G=N.useMemo(()=>{if(i){const se=q.find(ne=>ne.id===i);return(se==null?void 0:se.name)||i}if(r){const se=j.find(ne=>ne.id===r);return(se==null?void 0:se.name)||r}return null},[r,i,j,q]),_=N.useMemo(()=>d.filter(se=>se.pinned),[d]),H=N.useCallback(async()=>F?g():null,[F,g]);return{selectedCollectionId:n,selectedTableId:r,selectedTemplateId:i,collections:z,tables:j,templates:q,currentResult:s,isRolling:o,rollError:c,history:d,pinnedHistory:_,selectCollection:p,selectTable:h,selectTemplate:m,roll:H,rollOnTable:b,rollOnTemplate:x,clearResult:v,pinResult:k,deleteHistoryItem:C,clearHistory:T,canRoll:F,selectedItemName:G}}function k_(e){if(!e||!(e instanceof HTMLElement))return!1;const t=e.tagName.toLowerCase();return!!(t==="input"||t==="textarea"||t==="select"||e.isContentEditable||e.closest(".monaco-editor"))}function zb(e){return navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey}function Sx({shortcuts:e,enabled:t=!0}){const n=N.useCallback(r=>{if(t){for(const i of e)if(!(r.code!==i.key&&r.key!==i.key)&&!(i.ctrlOrCmd&&!zb(r))&&!(i.ctrlOrCmd===!1&&zb(r))&&!(i.shift&&!r.shiftKey)&&!(i.shift===!1&&r.shiftKey)&&!(i.alt&&!r.altKey)&&!(i.alt===!1&&r.altKey)&&!(i.key!=="Escape"&&k_(r.target))){i.preventDefault!==!1&&r.preventDefault(),i.handler(r);return}}},[e,t]);N.useEffect(()=>{if(t)return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[n,t])}function N_(e,t=300){const[n,r]=N.useState(e);return N.useEffect(()=>{const i=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(i)}},[e,t]),n}function S_({initialWidth:e,minWidth:t,maxWidth:n,onWidthChange:r,persistDelay:i=500}){const[s,o]=N.useState(e),[c,d]=N.useState(!1),p=N.useRef(null),h=N.useCallback(b=>Math.min(n,Math.max(t,b)),[t,n]),m=N.useCallback(b=>{b.preventDefault(),d(!0)},[]),g=N.useCallback(b=>{o(h(b))},[h]);return N.useEffect(()=>{if(!c)return;const b=v=>{requestAnimationFrame(()=>{const w=h(v.clientX);o(w)})},x=()=>{d(!1),r&&(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{o(v=>(r(v),v))},i))};return document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x),document.body.style.cursor="",document.body.style.userSelect=""}},[c,h,r,i]),N.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),{width:s,isResizing:c,handleMouseDown:m,setWidth:g}}function C_({tables:e,templates:t,searchQuery:n,viewMode:r,groupBy:i,activeTab:s,showHidden:o=!1}){const c=N_(n,300),d=N.useMemo(()=>s==="tables"?e.map(m=>({id:m.id,name:m.name,type:"table",tableType:m.type,description:m.description,tags:m.tags,hidden:m.hidden,entryCount:m.entryCount})):t.map(m=>({id:m.id,name:m.name,type:"template",description:m.description,tags:m.tags})),[e,t,s]),p=N.useMemo(()=>{const m=c.toLowerCase().trim();return d.filter(g=>{var b,x;return!o&&g.hidden?!1:!!(!m||g.name.toLowerCase().includes(m)||(b=g.description)!=null&&b.toLowerCase().includes(m)||(x=g.tags)!=null&&x.some(v=>v.toLowerCase().includes(m)))})},[d,c,o]),h=N.useMemo(()=>{var b;if(r!=="grouped"||!i)return[];const m=new Map;for(const x of p){let v;switch(i){case"type":x.type==="template"?v=["Templates"]:v=[x.tableType==="simple"?"Simple Tables":x.tableType==="composite"?"Composite Tables":"Collection Tables"];break;case"tag":v=(b=x.tags)!=null&&b.length?x.tags:["Untagged"];break;case"alpha":const w=x.name.charAt(0).toUpperCase();v=[/[A-Z]/.test(w)?w:"#"];break;default:v=["Other"]}for(const w of v){const k=m.get(w)||[];k.push(x),m.set(w,k)}}const g=Array.from(m.entries()).map(([x,v])=>({groupName:x,items:v.sort((w,k)=>w.name.localeCompare(k.name))}));if(i==="alpha")g.sort((x,v)=>x.groupName==="#"?1:v.groupName==="#"?-1:x.groupName.localeCompare(v.groupName));else if(i==="type"){const x=["Simple Tables","Composite Tables","Collection Tables","Templates"];g.sort((v,w)=>x.indexOf(v.groupName)-x.indexOf(w.groupName))}else g.sort((x,v)=>x.groupName==="Untagged"?1:v.groupName==="Untagged"?-1:x.groupName.localeCompare(v.groupName));return g},[p,r,i]);return{filteredItems:p,groupedItems:h,debouncedQuery:c,totalCount:d.length,filteredCount:p.length}}const $b=["pill-mint","pill-lavender","pill-amber"];function __(){const e=N.useRef(null),{preloaded:t,userCollections:n,allTags:r,isLoading:i,isInitialized:s,error:o,deleteCollection:c}=Nx(),{importFiles:d,saveImportedCollections:p}=an(),h=an(G=>G.collections),m=N.useMemo(()=>new Set(h.keys()),[h]),{searchQuery:g,selectedTags:b,setSearchQuery:x,toggleTag:v,clearFilters:w,preloadedCollectionsExpanded:k,togglePreloadedCollections:C}=Ft(),[T,D]=N.useState(!1),[I,L]=N.useState(null),[O,B]=N.useState(!1),z=N.useCallback(async G=>{D(!0),B(!0);try{const _=await d(G),H=_.collections.map(ne=>({...ne,id:hx(ne.id,m)})),se=new Map;if(_.pathToIdMap)for(const[ne,Z]of _.pathToIdMap){const J=_.collections.find(M=>M.id===Z),P=H.find(M=>M.fileName===(J==null?void 0:J.fileName));P&&se.set(ne,P.id)}if(H.length>0){const ne=G.some(Z=>Z.name.endsWith(".zip"))?"zip":"file";await p(H,ne,se)}L({..._,collections:H})}catch(_){L({success:!1,collections:[],errors:[{fileName:"Import",error:_ instanceof Error?_.message:"Import failed"}]})}finally{D(!1)}},[d,p,m]),j=N.useCallback(()=>{B(!1),L(null)},[]),q=N.useMemo(()=>[{key:"Slash",handler:()=>{var G;(G=e.current)==null||G.focus()},description:"Focus search"}],[]);Sx({shortcuts:q});const F=async(G,_)=>{confirm(`Delete "${_}"? This cannot be undone.`)&&await c(G)};return o?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[u.jsx("p",{className:"text-destructive mb-4",children:o}),u.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry"})]}):u.jsxs("div",{className:"space-y-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Library"}),u.jsx("p",{className:"text-muted-foreground",children:"Browse and manage your table collections"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(ms,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx("input",{ref:e,type:"search",placeholder:"Search collections... (/)",value:g,onChange:G=>x(G.target.value),className:"input-dark pl-11 w-full sm:w-72"})]})]}),r.length>0&&u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Filter:"}),r.slice(0,10).map(G=>u.jsx("button",{onClick:()=>v(G),className:me("pill transition-all duration-200",b.includes(G)?"bg-primary text-primary-foreground border-primary":"pill-outline hover:border-white/30"),children:G},G)),(g||b.length>0)&&u.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 px-3 py-1 text-sm text-muted-foreground hover:text-foreground rounded-full hover:bg-white/5 transition-colors",children:[u.jsx(cn,{className:"h-3 w-3"}),"Clear"]})]}),i&&!s&&u.jsx("div",{className:"flex items-center justify-center py-12",children:u.jsxs("div",{className:"flex flex-col items-center gap-4",children:[u.jsx(ba,{className:"h-8 w-8 animate-spin text-primary"}),u.jsx("p",{className:"text-muted-foreground",children:"Loading collections..."})]})}),u.jsxs("section",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"icon-container icon-mint",children:u.jsx(Uo,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold",children:"Your Collections"}),u.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n.length,")"]})]}),n.length>0?u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map((G,_)=>u.jsx(Bb,{collection:G,onDelete:()=>F(G.id,G.name),index:_},G.id))}):g||b.length>0?u.jsxs("div",{className:"card-elevated border border-dashed border-white/10 p-8 text-center",children:[u.jsx("div",{className:"icon-container icon-mint mx-auto mb-4 w-fit",children:u.jsx(Vc,{className:"h-6 w-6"})}),u.jsx("p",{className:"text-muted-foreground",children:"No collections match your filters"})]}):u.jsx(mx,{onFilesSelected:z,disabled:T})]}),t.length>0&&u.jsxs("section",{className:"space-y-4",children:[u.jsxs("button",{onClick:C,className:"flex items-center gap-3 w-full text-left group",children:[u.jsx("div",{className:"icon-container icon-lavender",children:u.jsx(Pr,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-xl font-semibold group-hover:text-foreground transition-colors",children:"Pre-loaded Collections"}),u.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.length,")"]}),u.jsx("div",{className:"ml-auto text-muted-foreground group-hover:text-foreground transition-colors",children:k?u.jsx(Fr,{className:"h-5 w-5"}):u.jsx(rr,{className:"h-5 w-5"})})]}),k&&u.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 animate-slide-up",children:t.map((G,_)=>u.jsx(Bb,{collection:G,index:_},G.id))})]}),!i&&t.length===0&&n.length===0&&u.jsx("div",{className:"text-center py-12 text-muted-foreground",children:u.jsx("p",{children:"No collections found. Try clearing your filters."})}),u.jsx(gx,{isOpen:O,onClose:j,result:I,isImporting:T})]})}function Bb({collection:e,onDelete:t,index:n=0}){return u.jsxs("div",{className:"card-elevated p-5 border border-white/5 group transition-all duration-300 hover:border-white/10 hover:scale-[1.01] animate-slide-up",style:{animationDelay:`${n*.05}s`},children:[u.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[u.jsx("h3",{className:"font-semibold text-lg leading-tight",children:e.name}),t&&u.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),t()},className:"p-2 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded-lg transition-all -mt-1 -mr-1",title:"Delete collection",children:u.jsx(zr,{className:"h-4 w-4 text-destructive"})})]}),u.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2 min-h-[2.5rem]",children:e.description||`Collection with ${e.tableCount} tables`}),u.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4 min-h-[1.75rem]",children:[e.tags.slice(0,3).map((r,i)=>u.jsx("span",{className:me("pill",$b[i%$b.length]),children:r},r)),e.tags.length>3&&u.jsxs("span",{className:"pill pill-outline",children:["+",e.tags.length-3]})]}),u.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mb-4 pb-4 border-b border-white/5",children:[u.jsxs("span",{className:"flex items-center gap-1.5",children:[u.jsx(Sr,{className:"h-3.5 w-3.5"}),e.tableCount," table",e.tableCount!==1?"s":""]}),e.templateCount>0&&u.jsxs("span",{className:"flex items-center gap-1.5",children:[u.jsx(Uo,{className:"h-3.5 w-3.5"}),e.templateCount," template",e.templateCount!==1?"s":""]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs(Ln,{to:`/roll?collection=${e.id}`,className:"flex-1 btn-primary flex items-center justify-center gap-2 py-2.5 text-sm",children:[u.jsx(Sr,{className:"h-4 w-4"}),"Roll"]}),u.jsx(Ln,{to:`/editor/${e.id}`,className:"flex-1 btn-secondary flex items-center justify-center py-2.5 text-sm",children:"View"})]})]})}const T_=N.memo(function({onMouseDown:t,isResizing:n}){return u.jsx("div",{className:`
        relative w-1.5 cursor-col-resize flex-shrink-0
        transition-colors duration-150
        ${n?"bg-primary/40":"bg-transparent hover:bg-primary/20"}
      `,onMouseDown:t,role:"separator","aria-orientation":"vertical","aria-label":"Resize panels",tabIndex:0,onKeyDown:r=>{(r.key==="ArrowLeft"||r.key==="ArrowRight")&&r.preventDefault()},children:u.jsx("div",{className:`
          absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
          w-0.5 h-8 rounded-full
          transition-all duration-150
          ${n?"bg-primary h-16":"bg-white/20"}
        `})})}),D_=280,R_=600,A_=380,I_=768;function j_({leftPanel:e,rightPanel:t}){const n=Ft(x=>x.browserPanelWidth),r=Ft(x=>x.setBrowserPanelWidth),[i,s]=N.useState(!1),[o,c]=N.useState(!1),{width:d,isResizing:p,handleMouseDown:h,setWidth:m}=S_({initialWidth:n||A_,minWidth:D_,maxWidth:R_,onWidthChange:r,persistDelay:500});N.useEffect(()=>{const x=()=>{s(window.innerWidth<I_)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),N.useEffect(()=>{i||c(!1)},[i]),N.useEffect(()=>{n&&n!==d&&m(n)},[]);const g=N.useCallback(()=>{c(x=>!x)},[]),b=N.useCallback(()=>{c(!1)},[]);return i?u.jsxs("div",{className:"relative h-full w-full overflow-hidden",children:[o&&u.jsx("div",{className:"absolute inset-0 bg-black/50 z-30 transition-opacity",onClick:b,"aria-hidden":"true"}),u.jsxs("div",{className:me("absolute top-0 left-0 h-full w-[85vw] max-w-[400px] bg-card z-40","transform transition-transform duration-300 ease-out",o?"translate-x-0":"-translate-x-full"),children:[u.jsxs("div",{className:"h-14 flex items-center justify-between px-4 border-b border-border/50",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:zf,alt:"Rolldeo logo",className:"h-8 w-8 rounded-lg"}),u.jsx("span",{className:"font-semibold",children:"Browse Tables"})]}),u.jsx("button",{onClick:b,className:"p-2 -mr-2 rounded-lg hover:bg-accent transition-colors","aria-label":"Close browser",children:u.jsx(cn,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"h-[calc(100%-3.5rem)] overflow-hidden",children:e({onMobileClose:b})})]}),u.jsx("div",{className:"h-full overflow-hidden",children:t}),u.jsx("button",{onClick:g,className:me("fixed bottom-24 right-4 z-50","w-14 h-14 rounded-full","bg-primary text-primary-foreground","shadow-lg shadow-primary/25","flex items-center justify-center","transition-all duration-300 ease-out","hover:scale-105 active:scale-95","focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 focus:ring-offset-background",!o&&"animate-fab-float"),"aria-label":o?"Close table browser":"Open table browser",children:u.jsx("div",{className:me("transition-transform duration-300 ease-out",o&&"rotate-90"),children:o?u.jsx(cn,{size:24}):u.jsx(Sr,{size:24})})})]}):u.jsxs("div",{className:"flex h-full w-full overflow-hidden",children:[u.jsx("div",{className:"flex-shrink-0 flex flex-col bg-card border-r border-border/50 overflow-hidden",style:{width:`${d}px`},children:e({})}),u.jsx(T_,{onMouseDown:h,isResizing:p}),u.jsx("div",{className:"flex-1 min-w-0 flex flex-col overflow-hidden",children:t})]})}const O_=N.memo(function({activeTab:t,onTabChange:n,tableCount:r,templateCount:i}){return u.jsxs("div",{className:"flex border-b border-white/5",role:"tablist",children:[u.jsxs("button",{className:`
          flex-1 flex items-center justify-center gap-2 px-4 py-2.5
          text-sm font-medium transition-colors duration-150
          border-b-2 -mb-px
          ${t==="tables"?"text-foreground border-primary":"text-muted-foreground border-transparent hover:text-foreground/80 hover:bg-white/5"}
        `,onClick:()=>n("tables"),role:"tab","aria-selected":t==="tables","aria-controls":"tables-panel",children:[u.jsx(Zr,{className:"w-4 h-4"}),u.jsx("span",{children:"Tables"}),u.jsx("span",{className:"text-xs bg-white/10 px-1.5 py-0.5 rounded",children:r})]}),u.jsxs("button",{className:`
          flex-1 flex items-center justify-center gap-2 px-4 py-2.5
          text-sm font-medium transition-colors duration-150
          border-b-2 -mb-px
          ${t==="templates"?"text-foreground border-primary":"text-muted-foreground border-transparent hover:text-foreground/80 hover:bg-white/5"}
        `,onClick:()=>n("templates"),role:"tab","aria-selected":t==="templates","aria-controls":"templates-panel",children:[u.jsx(Ya,{className:"w-4 h-4"}),u.jsx("span",{children:"Templates"}),u.jsx("span",{className:"text-xs bg-white/10 px-1.5 py-0.5 rounded",children:i})]})]})}),M_=N.memo(function({value:t,onChange:n,placeholder:r="Search..."}){return u.jsxs("div",{className:"relative px-3 py-2",children:[u.jsx(ms,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),u.jsx("input",{type:"text",value:t,onChange:i=>n(i.target.value),placeholder:r,className:`
          w-full pl-8 pr-8 py-2 text-sm
          bg-white/5 border border-white/10 rounded-lg
          text-foreground placeholder:text-muted-foreground
          focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/50
          transition-colors duration-150
        `,"aria-label":"Search tables and templates"}),t&&u.jsx("button",{className:"absolute right-5 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-white/10 transition-colors",onClick:()=>n(""),"aria-label":"Clear search",children:u.jsx(cn,{className:"w-4 h-4 text-muted-foreground"})})]})}),Ub=[{value:"type",label:"Type"},{value:"tag",label:"Tag"},{value:"alpha",label:"Alphabetical"}],F_=N.memo(function({viewMode:t,groupBy:n,onViewModeChange:r,onGroupByChange:i}){var h;const[s,o]=N.useState(!1),c=N.useRef(null);N.useEffect(()=>{const m=g=>{c.current&&!c.current.contains(g.target)&&o(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const d=()=>{t==="flat"?(r("grouped"),n||i("type")):r("flat")},p=m=>{i(m),o(!1)};return u.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-white/5",children:[u.jsxs("button",{className:`
          flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium
          transition-colors duration-150
          ${t==="flat"?"bg-primary/20 text-primary":"bg-white/5 text-muted-foreground hover:text-foreground"}
        `,onClick:d,"aria-pressed":t==="flat",title:"Flat list",children:[u.jsx(IN,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:"Flat"})]}),u.jsxs("div",{className:"relative",ref:c,children:[u.jsxs("button",{className:`
            flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium
            transition-colors duration-150
            ${t==="grouped"?"bg-primary/20 text-primary":"bg-white/5 text-muted-foreground hover:text-foreground"}
          `,onClick:()=>{t==="grouped"?o(!s):d()},"aria-pressed":t==="grouped","aria-haspopup":t==="grouped"?"listbox":void 0,"aria-expanded":s,title:"Grouped view",children:[u.jsx(AN,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:t==="grouped"&&n?(h=Ub.find(m=>m.value===n))==null?void 0:h.label:"Grouped"}),t==="grouped"&&u.jsx(Fr,{className:`w-3 h-3 transition-transform ${s?"rotate-180":""}`})]}),s&&t==="grouped"&&u.jsx("div",{className:"absolute top-full left-0 mt-1 w-36 py-1 bg-card border border-white/10 rounded-lg shadow-xl z-50",role:"listbox",children:Ub.map(m=>u.jsx("button",{className:`
                  w-full px-3 py-2 text-left text-xs
                  transition-colors duration-150
                  ${n===m.value?"bg-primary/20 text-primary":"text-foreground hover:bg-white/5"}
                `,onClick:()=>p(m.value),role:"option","aria-selected":n===m.value,children:m.label},m.value))})]})]})});function Qi(e,t,n){let r=n.initialDeps??[],i;function s(){var o,c,d,p;let h;n.key&&((o=n.debug)!=null&&o.call(n))&&(h=Date.now());const m=e();if(!(m.length!==r.length||m.some((x,v)=>r[v]!==x)))return i;r=m;let b;if(n.key&&((c=n.debug)!=null&&c.call(n))&&(b=Date.now()),i=t(...m),n.key&&((d=n.debug)!=null&&d.call(n))){const x=Math.round((Date.now()-h)*100)/100,v=Math.round((Date.now()-b)*100)/100,w=v/16,k=(C,T)=>{for(C=String(C);C.length<T;)C=" "+C;return C};console.info(`%c ${k(v,5)} /${k(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*w,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(p=n==null?void 0:n.onChange)==null||p.call(n,i),i}return s.updateDeps=o=>{r=o},s}function Hb(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const L_=(e,t)=>Math.abs(e-t)<1.01,P_=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},qb=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},z_=e=>e,$_=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},B_=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:c,height:d}=o;t({width:Math.round(c),height:Math.round(d)})};if(i(qb(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(o=>{const c=()=>{const d=o[0];if(d!=null&&d.borderBoxSize){const p=d.borderBoxSize[0];if(p){i({width:p.inlineSize,height:p.blockSize});return}}i(qb(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Vb={passive:!0},Wb=typeof window>"u"?!0:"onscrollend"in window,U_=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=e.options.useScrollendEvent&&Wb?()=>{}:P_(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=h=>()=>{const{horizontal:m,isRtl:g}=e.options;i=m?n.scrollLeft*(g&&-1||1):n.scrollTop,s(),t(i,h)},c=o(!0),d=o(!1);d(),n.addEventListener("scroll",c,Vb);const p=e.options.useScrollendEvent&&Wb;return p&&n.addEventListener("scrollend",d,Vb),()=>{n.removeEventListener("scroll",c),p&&n.removeEventListener("scrollend",d)}},H_=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},q_=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const o=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class V_{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const o=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:z_,rangeExtractor:$_,onChange:()=>{},measureElement:H_,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Qi(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let o=r-1;o>=0;o--){const c=n[o];if(i.has(c.lane))continue;const d=s.get(c.lane);if(d==null||c.end>d.end?s.set(c.lane,c):c.end<d.end&&i.set(c.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((o,c)=>o.end===c.end?o.index-c.index:o.end-c.end)[0]:void 0},this.getMeasurementOptions=Qi(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,o)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:o}),{key:!1}),this.getMeasurements=Qi(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:o},c)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(h=>{this.itemSizeCache.set(h.key,h.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const p=this.measurementsCache.slice(0,d);for(let h=d;h<n;h++){const m=s(h),g=this.options.lanes===1?p[h-1]:this.getFurthestMeasurement(p,h),b=g?g.end+this.options.gap:r+i,x=c.get(m),v=typeof x=="number"?x:this.options.estimateSize(h),w=b+v,k=g?g.lane:h%this.options.lanes;p[h]={index:h,start:b,size:v,end:w,key:m,lane:k}}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Qi(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?W_({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Qi(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,o)=>s===null||o===null?[]:n({startIndex:s,endIndex:o,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const o=s.key,c=this.elementsCache.get(o);c!==n&&(c&&this.observer.unobserve(c),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,o=r-s;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,o,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Qi(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,o=n.length;s<o;s++){const c=n[s],d=r[c];i.push(d)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Hb(r[Cx(0,r.length-1,i=>Hb(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const c=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(c,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(i.end>=o+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const c=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(c,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const o=10,c=p=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(n,p);if(!h){console.warn("Failed to get offset for index:",n);return}const[m,g]=h;this._scrollToOffset(m,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const b=this.getScrollOffset(),x=this.getOffsetForIndex(n,g);if(!x){console.warn("Failed to get offset for index:",n);return}L_(x[0],b)||d(g)})},d=p=>{this.targetWindow&&(s++,s<o?this.targetWindow.requestAnimationFrame(()=>c(p)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};c(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&s.some(c=>c===null);){const c=r[o];s[c.lane]===null&&(s[c.lane]=c.end),o--}i=Math.max(...s.filter(c=>c!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Cx=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function W_({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const i=e.length-1,s=d=>e[d].start;if(e.length<=r)return{startIndex:0,endIndex:i};let o=Cx(0,i,s,n),c=o;if(r===1)for(;c<i&&e[c].end<n+t;)c++;else if(r>1){const d=Array(r).fill(0);for(;c<i&&d.some(h=>h<n+t);){const h=e[c];d[h.lane]=h.end,c++}const p=Array(r).fill(n+t);for(;o>=0&&p.some(h=>h>=n);){const h=e[o];p[h.lane]=h.start,o--}o=Math.max(0,o-o%r),c=Math.min(i,c+(r-1-c%r))}return{startIndex:o,endIndex:c}}const Gb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function G_(e){const t=N.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var o;s?nr.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,s)}},[r]=N.useState(()=>new V_(n));return r.setOptions(n),Gb(()=>r._didMount(),[]),Gb(()=>r._willUpdate()),r}function K_(e){return G_({observeElementRect:B_,observeElementOffset:U_,scrollToFn:q_,...e})}const Hf=N.memo(function({type:t,className:n="w-4 h-4"}){switch(t){case"simple":return u.jsx(Zr,{className:`${n} text-mint`,"aria-label":"Simple table"});case"composite":return u.jsx(Uo,{className:`${n} text-lavender`,"aria-label":"Composite table"});case"collection":return u.jsx(TN,{className:`${n} text-amber-400`,"aria-label":"Collection table"});case"template":return u.jsx(Ya,{className:`${n} text-rose-400`,"aria-label":"Template"});default:return u.jsx(Zr,{className:`${n} text-muted-foreground`})}});function Y_({items:e,position:t,onClose:n}){const r=N.useRef(null),i=N.useCallback(()=>{const d=e.length*36,p=8;let h=t.x,m=t.y;return h+180>window.innerWidth-p&&(h=window.innerWidth-180-p),m+d>window.innerHeight-p&&(m=window.innerHeight-d-p),{x:Math.max(p,h),y:Math.max(p,m)}},[t,e.length]);N.useEffect(()=>{const c=d=>{d.key==="Escape"&&n()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[n]),N.useEffect(()=>{const c=d=>{r.current&&!r.current.contains(d.target)&&n()};return window.addEventListener("mousedown",c,!0),()=>window.removeEventListener("mousedown",c,!0)},[n]),N.useEffect(()=>{const c=()=>n();return window.addEventListener("scroll",c,!0),()=>window.removeEventListener("scroll",c,!0)},[n]);const s=i(),o=c=>{c.disabled||(c.onClick(),n())};return nr.createPortal(u.jsx("div",{ref:r,className:me("fixed z-50","min-w-[180px] py-1","bg-popover border border-border rounded-lg shadow-lg","animate-fade-in"),style:{left:s.x,top:s.y},role:"menu","aria-orientation":"vertical",children:e.map((c,d)=>{if("type"in c&&c.type==="divider")return u.jsx("div",{className:"my-1 h-px bg-border",role:"separator"},`divider-${d}`);const p=c,h=p.icon;return u.jsxs("button",{className:me("w-full flex items-center gap-3 px-3 py-2 text-sm text-left","transition-colors duration-100",p.disabled?"text-muted-foreground/50 cursor-not-allowed":"hover:bg-accent text-foreground"),onClick:()=>o(p),disabled:p.disabled,role:"menuitem",children:[u.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),u.jsx("span",{children:p.label})]},p.id)})}),document.body)}const Z_=N.memo(function({item:t,isSelected:n,onSelect:r,onRoll:i,onEdit:s,onCopyResult:o,onRollMultiple:c,onViewDetails:d}){const[p,h]=N.useState(null),m=w=>{w.key==="Enter"?(w.preventDefault(),i()):w.key===" "&&(w.preventDefault(),r())},g=()=>{i()},b=N.useCallback(w=>{w.preventDefault(),w.stopPropagation(),h({x:w.clientX,y:w.clientY})},[]),x=N.useCallback(()=>{h(null)},[]),v=[{id:"roll",label:"Roll",icon:Sr,onClick:i},{id:"edit",label:"Edit",icon:FN,onClick:s||(()=>{}),disabled:!s},{type:"divider"},{id:"copy-result",label:"Copy Result",icon:Cf,onClick:o||(()=>{}),disabled:!o},{id:"roll-multiple",label:"Roll Multiple...",icon:Bo,onClick:c||(()=>{}),disabled:!c},{type:"divider"},{id:"view-details",label:"View Details",icon:Ei,onClick:d||(()=>{}),disabled:!d}];return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:`
        flex items-center gap-3 px-3 py-2.5 cursor-pointer
        border-l-2 transition-colors duration-150
        ${n?"bg-primary/10 border-l-primary":"border-l-transparent hover:bg-white/5"}
        ${t.hidden?"opacity-50":""}
      `,onClick:r,onDoubleClick:g,onKeyDown:m,onContextMenu:b,role:"option","aria-selected":n,tabIndex:0,children:[u.jsx(Hf,{type:t.type==="template"?"template":t.tableType||"simple",className:"w-4 h-4 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-sm font-medium truncate",children:t.name}),t.hidden&&u.jsx(Co,{className:"w-3 h-3 text-muted-foreground flex-shrink-0","aria-label":"Hidden"})]}),t.description&&u.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:t.description})]}),t.tags&&t.tags.length>0&&u.jsxs("div",{className:"hidden sm:flex items-center gap-1 flex-shrink-0",children:[t.tags.slice(0,2).map(w=>u.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/10 rounded text-muted-foreground",children:w},w)),t.tags.length>2&&u.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["+",t.tags.length-2]})]}),u.jsx("button",{className:`
          p-1.5 rounded-md transition-colors duration-150
          ${n?"bg-primary/20 text-primary hover:bg-primary/30":"bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-foreground"}
        `,onClick:w=>{w.stopPropagation(),i()},"aria-label":`Roll ${t.name}`,title:"Roll (or double-click)",children:u.jsx(Sr,{className:"w-4 h-4"})})]}),p&&u.jsx(Y_,{items:v,position:p,onClose:x})]})}),X_=52,Q_=36,J_=5,e2=N.memo(function({items:t,groupedItems:n,isGrouped:r,selectedItemId:i,onSelectItem:s,onRollItem:o,onEditItem:c,onCopyResult:d,onRollMultiple:p,onViewDetails:h}){const m=N.useRef(null),g=N.useMemo(()=>{if(!r)return t.map(w=>({type:"item",item:w,uniqueKey:`item-${w.id}`}));const v=[];for(const w of n){v.push({type:"group-header",groupName:w.groupName,uniqueKey:`group-${w.groupName}`});for(const k of w.items)v.push({type:"item",item:k,uniqueKey:`item-${w.groupName}-${k.id}`})}return v},[t,n,r]),b=K_({count:g.length,getScrollElement:()=>m.current,estimateSize:v=>g[v].type==="group-header"?Q_:X_,overscan:J_}),x=b.getVirtualItems();return g.length===0?u.jsx("div",{className:"flex-1 flex items-center justify-center py-12 text-center",children:u.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})}):u.jsx("div",{ref:m,className:"flex-1 overflow-auto",children:u.jsx("div",{style:{height:`${b.getTotalSize()}px`,width:"100%",position:"relative"},children:x.map(v=>{const w=g[v.index];if(w.type==="group-header")return u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${v.size}px`,transform:`translateY(${v.start}px)`},children:u.jsx("div",{className:"px-3 py-2 bg-background border-b border-white/5",children:u.jsx("span",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:w.groupName})})},w.uniqueKey);const k=w.item;return u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${v.size}px`,transform:`translateY(${v.start}px)`},children:u.jsx(Z_,{item:k,isSelected:i===k.id,onSelect:()=>s(k),onRoll:()=>o(k),onEdit:c?()=>c(k):void 0,onCopyResult:d?()=>d(k):void 0,onRollMultiple:p?()=>p(k):void 0,onViewDetails:h?()=>h(k):void 0})},w.uniqueKey)})})})}),t2=N.memo(function({collection:t,isExpanded:n,selectedItemId:r,shouldScrollIntoView:i,onScrollComplete:s,onToggleExpand:o,onSelectItem:c,onRollItem:d,onEditItem:p,onCopyResult:h,onRollMultiple:m,onViewDetails:g}){const b=N.useRef(null),x=n?Fr:rr,v=n?Vc:Kv;N.useEffect(()=>{i&&b.current&&requestAnimationFrame(()=>{var P;(P=b.current)==null||P.scrollIntoView({behavior:"smooth",block:"start"}),s()})},[i,s]);const w=an(P=>P.getTableList),k=an(P=>P.getTemplateList),C=Ft(P=>P.browserActiveTab),T=Ft(P=>P.browserViewMode),D=Ft(P=>P.browserGroupBy),I=Ft(P=>P.browserSearchQuery),L=Ft(P=>P.showHiddenTables),O=Ft(P=>P.setBrowserActiveTab),B=Ft(P=>P.setBrowserViewMode),z=Ft(P=>P.setBrowserGroupBy),j=Ft(P=>P.setBrowserSearchQuery),q=N.useMemo(()=>w(t.id),[t.id,w]),F=N.useMemo(()=>k(t.id),[t.id,k]),{filteredItems:G,groupedItems:_,filteredCount:H,totalCount:se}=C_({tables:q,templates:F,searchQuery:I,viewMode:T,groupBy:D,activeTab:C,showHidden:L}),ne=P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),o())},Z=N.useCallback(P=>{c(P)},[c]),J=N.useCallback(P=>{d(P)},[d]);return u.jsxs("div",{className:"border-b border-white/5 relative isolate",children:[u.jsxs("div",{ref:b,className:`
          flex items-center gap-2 px-3 py-3 cursor-pointer
          transition-colors duration-150 relative z-10 bg-background
          ${n?"bg-primary/10":"hover:bg-white/5"}
        `,onClick:o,onKeyDown:ne,role:"button","aria-expanded":n,tabIndex:0,children:[u.jsx(x,{className:`w-4 h-4 text-muted-foreground transition-transform duration-200 ${n?"rotate-0":""}`}),u.jsx(v,{className:"w-4 h-4 text-amber-400/80 flex-shrink-0"}),u.jsx("span",{className:"flex-1 truncate text-sm font-medium",children:t.name}),u.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:[t.tableCount,"T / ",t.templateCount,"P"]})]}),n&&u.jsxs("div",{className:"flex flex-col bg-background/50 relative z-0",children:[u.jsx(O_,{activeTab:C,onTabChange:O,tableCount:q.length,templateCount:F.length}),u.jsx(M_,{value:I,onChange:j,placeholder:`Search ${C}...`}),u.jsx(F_,{viewMode:T,groupBy:D,onViewModeChange:B,onGroupByChange:z}),I&&u.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground border-b border-white/5",children:["Showing ",H," of ",se," ",C]}),u.jsx("div",{className:"h-[400px] flex flex-col isolate",children:u.jsx(e2,{items:G,groupedItems:_,isGrouped:T==="grouped",selectedItemId:r,onSelectItem:Z,onRollItem:J,onEditItem:p,onCopyResult:h,onRollMultiple:m,onViewDetails:g})})]})]})}),n2=N.memo(function({selectedItemId:t,onSelectItem:n,onRollItem:r,onEditItem:i,onCopyResult:s,onRollMultiple:o,onViewDetails:c}){const d=an(D=>D.collections),p=Ft(D=>D.expandedCollectionId),h=Ft(D=>D.toggleCollectionExpanded),m=Ft(D=>D.setExpandedCollectionId),g=Ft(D=>D.setBrowserActiveTab),[b,x]=N.useState(null),v=N.useMemo(()=>Array.from(d.values()).sort((I,L)=>I.isPreloaded!==L.isPreloaded?I.isPreloaded?-1:1:I.name.localeCompare(L.name)),[d]),w=N.useCallback(D=>{h(D)},[h]),k=N.useCallback(()=>{x(null)},[]),C=N.useCallback((D,I)=>{p!==I&&m(I),g(D.type==="template"?"templates":"tables"),x(I),n(D,I)},[n,p,m,g]),T=N.useCallback((D,I)=>{p!==I&&m(I),g(D.type==="template"?"templates":"tables"),x(I),r(D,I)},[r,p,m,g]);return v.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[u.jsx(_N,{className:"w-12 h-12 text-muted-foreground/50 mb-4"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"No collections loaded"}),u.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Import a JSON file to get started"})]}):u.jsx("div",{className:"flex-1 overflow-auto",role:"list","aria-label":"Collections",children:v.map(D=>u.jsx(t2,{collection:D,isExpanded:p===D.id,selectedItemId:t,shouldScrollIntoView:b===D.id,onScrollComplete:k,onToggleExpand:()=>w(D.id),onSelectItem:I=>C(I,D.id),onRollItem:I=>T(I,D.id),onEditItem:i?I=>i(I,D.id):void 0,onCopyResult:s?I=>s(I,D.id):void 0,onRollMultiple:o?I=>o(I,D.id):void 0,onViewDetails:c?I=>c(I,D.id):void 0},D.id))})}),r2=N.memo(function({selectedItemId:t,onSelectItem:n,onRollItem:r,onEditItem:i,onCopyResult:s,onRollMultiple:o,onViewDetails:c,onMobileClose:d}){const p=N.useCallback((v,w)=>{n(v,w),d==null||d()},[n,d]),h=N.useCallback((v,w)=>{r(v,w),d==null||d()},[r,d]),m=N.useCallback((v,w)=>{i==null||i(v,w),d==null||d()},[i,d]),g=N.useCallback((v,w)=>{s==null||s(v,w),d==null||d()},[s,d]),b=N.useCallback((v,w)=>{o==null||o(v,w),d==null||d()},[o,d]),x=N.useCallback((v,w)=>{c==null||c(v,w),d==null||d()},[c,d]);return u.jsx("div",{className:"flex flex-col h-full",children:u.jsx(n2,{selectedItemId:t,onSelectItem:p,onRollItem:h,onEditItem:i?m:void 0,onCopyResult:s?g:void 0,onRollMultiple:o?b:void 0,onViewDetails:c?x:void 0})})}),a2=N.memo(function({enabled:t,onChange:n,disabled:r}){return u.jsxs("label",{className:`
        flex items-center gap-2 text-sm cursor-pointer select-none
        px-3 py-1.5 rounded-lg border transition-all
        ${r?"opacity-50 cursor-not-allowed":"hover:bg-accent"}
        ${t?"text-primary border-primary/40 bg-primary/10":"text-muted-foreground border-border/50 hover:border-border"}
      `,children:[u.jsx("input",{type:"checkbox",checked:t,onChange:i=>n(i.target.checked),disabled:r,className:"sr-only peer"}),u.jsx("div",{className:`
          relative w-8 h-4 rounded-full transition-colors
          ${t?"bg-primary":"bg-muted-foreground/30"}
          after:content-[''] after:absolute
          after:w-3 after:h-3 after:rounded-full after:bg-white
          after:top-0.5 after:left-0.5 after:transition-transform after:shadow-sm
          ${t?"after:translate-x-4":""}
        `}),u.jsx(Po,{className:"w-4 h-4"}),u.jsx("span",{className:"font-medium",children:"Trace"})]})}),i2=N.memo(function({selectedItem:t,isRolling:n,canRoll:r,onRoll:i}){const s=Xp(c=>c.traceEnabled),o=Xp(c=>c.setTraceEnabled);return t?u.jsxs("div",{className:"p-4 border-b border-white/5",children:[u.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center flex-shrink-0",children:u.jsx(Hf,{type:t.type==="template"?"template":t.tableType||"simple",className:"w-6 h-6"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-lg truncate",children:t.name}),t.description&&u.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:t.description}),t.tags&&t.tags.length>0&&u.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",children:t.tags.map(c=>u.jsx("span",{className:"text-xs px-2 py-0.5 bg-white/10 rounded-full text-muted-foreground",children:c},c))})]})]}),u.jsx("div",{className:"flex items-center justify-end mb-3",children:u.jsx(a2,{enabled:s,onChange:o,disabled:n})}),u.jsxs("button",{onClick:i,disabled:!r||n,className:`
          relative w-full flex items-center justify-center gap-3 px-6 py-4 text-lg font-bold rounded-xl
          transition-all duration-300
          bg-primary text-primary-foreground
          hover:brightness-110 active:scale-[0.98]
          disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:brightness-100
          ${n?"animate-pulse":""}
        `,children:[u.jsx("div",{className:"absolute inset-0 rounded-xl bg-primary/30 blur-xl -z-10 opacity-50"}),n?u.jsx(ba,{className:"h-6 w-6 animate-spin"}):u.jsx(Sr,{className:"h-6 w-6"}),n?"Rolling...":"Roll!",!n&&u.jsx("span",{className:"text-sm font-medium opacity-60 ml-1",children:"(Space)"})]})]}):u.jsx("div",{className:"p-6 border-b border-white/5",children:u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-white/5 flex items-center justify-center",children:u.jsx(Sr,{className:"w-8 h-8 text-muted-foreground/50"})}),u.jsx("p",{className:"text-muted-foreground",children:"Select a table or template to roll"})]})})});function s2(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const o2=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,l2=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,c2={};function Kb(e,t){return(c2.jsx?l2:o2).test(e)}const u2=/[ \t\n\f\r]/g;function d2(e){return typeof e=="object"?e.type==="text"?Yb(e.value):!1:Yb(e)}function Yb(e){return e.replace(u2,"")===""}class Ho{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Ho.prototype.normal={};Ho.prototype.property={};Ho.prototype.space=void 0;function _x(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Ho(n,r,t)}function Qp(e){return e.toLowerCase()}class ar{constructor(t,n){this.attribute=n,this.property=t}}ar.prototype.attribute="";ar.prototype.booleanish=!1;ar.prototype.boolean=!1;ar.prototype.commaOrSpaceSeparated=!1;ar.prototype.commaSeparated=!1;ar.prototype.defined=!1;ar.prototype.mustUseProperty=!1;ar.prototype.number=!1;ar.prototype.overloadedBoolean=!1;ar.prototype.property="";ar.prototype.spaceSeparated=!1;ar.prototype.space=void 0;let p2=0;const vt=Si(),mn=Si(),Jp=Si(),je=Si(),Gt=Si(),cs=Si(),dr=Si();function Si(){return 2**++p2}const ef=Object.freeze(Object.defineProperty({__proto__:null,boolean:vt,booleanish:mn,commaOrSpaceSeparated:dr,commaSeparated:cs,number:je,overloadedBoolean:Jp,spaceSeparated:Gt},Symbol.toStringTag,{value:"Module"})),ap=Object.keys(ef);class qf extends ar{constructor(t,n,r,i){let s=-1;if(super(t,n),Zb(this,"space",i),typeof r=="number")for(;++s<ap.length;){const o=ap[s];Zb(this,ap[s],(r&ef[o])===ef[o])}}}qf.prototype.defined=!0;function Zb(e,t,n){n&&(e[t]=n)}function bs(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new qf(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Qp(r)]=r,n[Qp(s.attribute)]=r}return new Ho(t,n,e.space)}const Tx=bs({properties:{ariaActiveDescendant:null,ariaAtomic:mn,ariaAutoComplete:null,ariaBusy:mn,ariaChecked:mn,ariaColCount:je,ariaColIndex:je,ariaColSpan:je,ariaControls:Gt,ariaCurrent:null,ariaDescribedBy:Gt,ariaDetails:null,ariaDisabled:mn,ariaDropEffect:Gt,ariaErrorMessage:null,ariaExpanded:mn,ariaFlowTo:Gt,ariaGrabbed:mn,ariaHasPopup:null,ariaHidden:mn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gt,ariaLevel:je,ariaLive:null,ariaModal:mn,ariaMultiLine:mn,ariaMultiSelectable:mn,ariaOrientation:null,ariaOwns:Gt,ariaPlaceholder:null,ariaPosInSet:je,ariaPressed:mn,ariaReadOnly:mn,ariaRelevant:null,ariaRequired:mn,ariaRoleDescription:Gt,ariaRowCount:je,ariaRowIndex:je,ariaRowSpan:je,ariaSelected:mn,ariaSetSize:je,ariaSort:null,ariaValueMax:je,ariaValueMin:je,ariaValueNow:je,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Dx(e,t){return t in e?e[t]:t}function Rx(e,t){return Dx(e,t.toLowerCase())}const f2=bs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cs,acceptCharset:Gt,accessKey:Gt,action:null,allow:null,allowFullScreen:vt,allowPaymentRequest:vt,allowUserMedia:vt,alt:null,as:null,async:vt,autoCapitalize:null,autoComplete:Gt,autoFocus:vt,autoPlay:vt,blocking:Gt,capture:null,charSet:null,checked:vt,cite:null,className:Gt,cols:je,colSpan:null,content:null,contentEditable:mn,controls:vt,controlsList:Gt,coords:je|cs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vt,defer:vt,dir:null,dirName:null,disabled:vt,download:Jp,draggable:mn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vt,formTarget:null,headers:Gt,height:je,hidden:Jp,high:je,href:null,hrefLang:null,htmlFor:Gt,httpEquiv:Gt,id:null,imageSizes:null,imageSrcSet:null,inert:vt,inputMode:null,integrity:null,is:null,isMap:vt,itemId:null,itemProp:Gt,itemRef:Gt,itemScope:vt,itemType:Gt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vt,low:je,manifest:null,max:null,maxLength:je,media:null,method:null,min:null,minLength:je,multiple:vt,muted:vt,name:null,nonce:null,noModule:vt,noValidate:vt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vt,optimum:je,pattern:null,ping:Gt,placeholder:null,playsInline:vt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vt,referrerPolicy:null,rel:Gt,required:vt,reversed:vt,rows:je,rowSpan:je,sandbox:Gt,scope:null,scoped:vt,seamless:vt,selected:vt,shadowRootClonable:vt,shadowRootDelegatesFocus:vt,shadowRootMode:null,shape:null,size:je,sizes:null,slot:null,span:je,spellCheck:mn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:je,step:null,style:null,tabIndex:je,target:null,title:null,translate:null,type:null,typeMustMatch:vt,useMap:null,value:mn,width:je,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gt,axis:null,background:null,bgColor:null,border:je,borderColor:null,bottomMargin:je,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vt,declare:vt,event:null,face:null,frame:null,frameBorder:null,hSpace:je,leftMargin:je,link:null,longDesc:null,lowSrc:null,marginHeight:je,marginWidth:je,noResize:vt,noHref:vt,noShade:vt,noWrap:vt,object:null,profile:null,prompt:null,rev:null,rightMargin:je,rules:null,scheme:null,scrolling:mn,standby:null,summary:null,text:null,topMargin:je,valueType:null,version:null,vAlign:null,vLink:null,vSpace:je,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vt,disableRemotePlayback:vt,prefix:null,property:null,results:je,security:null,unselectable:null},space:"html",transform:Rx}),h2=bs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:dr,accentHeight:je,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:je,amplitude:je,arabicForm:null,ascent:je,attributeName:null,attributeType:null,azimuth:je,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:je,by:null,calcMode:null,capHeight:je,className:Gt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:je,diffuseConstant:je,direction:null,display:null,dur:null,divisor:je,dominantBaseline:null,download:vt,dx:null,dy:null,edgeMode:null,editable:null,elevation:je,enableBackground:null,end:null,event:null,exponent:je,externalResourcesRequired:null,fill:null,fillOpacity:je,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cs,g2:cs,glyphName:cs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:je,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:je,horizOriginX:je,horizOriginY:je,id:null,ideographic:je,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:je,k:je,k1:je,k2:je,k3:je,k4:je,kernelMatrix:dr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:je,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:je,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:je,overlineThickness:je,paintOrder:null,panose1:null,path:null,pathLength:je,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:je,pointsAtY:je,pointsAtZ:je,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:dr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:dr,rev:dr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:dr,requiredFeatures:dr,requiredFonts:dr,requiredFormats:dr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:je,specularExponent:je,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:je,strikethroughThickness:je,string:null,stroke:null,strokeDashArray:dr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:je,strokeOpacity:je,strokeWidth:null,style:null,surfaceScale:je,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:dr,tabIndex:je,tableValues:null,target:null,targetX:je,targetY:je,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:dr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:je,underlineThickness:je,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:je,values:null,vAlphabetic:je,vMathematical:je,vectorEffect:null,vHanging:je,vIdeographic:je,version:null,vertAdvY:je,vertOriginX:je,vertOriginY:je,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:je,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Dx}),Ax=bs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Ix=bs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Rx}),jx=bs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),m2={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},g2=/[A-Z]/g,Xb=/-[a-z]/g,b2=/^data[-\w.:]+$/i;function y2(e,t){const n=Qp(t);let r=t,i=ar;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&b2.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Xb,x2);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Xb.test(s)){let o=s.replace(g2,v2);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=qf}return new i(r,t)}function v2(e){return"-"+e.toLowerCase()}function x2(e){return e.charAt(1).toUpperCase()}const w2=_x([Tx,f2,Ax,Ix,jx],"html"),Vf=_x([Tx,h2,Ax,Ix,jx],"svg");function E2(e){return e.join(" ").trim()}var Ji={},ip,Qb;function k2(){if(Qb)return ip;Qb=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,p="/",h="*",m="",g="comment",b="declaration";function x(w,k){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];k=k||{};var C=1,T=1;function D(_){var H=_.match(t);H&&(C+=H.length);var se=_.lastIndexOf(d);T=~se?_.length-se:T+_.length}function I(){var _={line:C,column:T};return function(H){return H.position=new L(_),z(),H}}function L(_){this.start=_,this.end={line:C,column:T},this.source=k.source}L.prototype.content=w;function O(_){var H=new Error(k.source+":"+C+":"+T+": "+_);if(H.reason=_,H.filename=k.source,H.line=C,H.column=T,H.source=w,!k.silent)throw H}function B(_){var H=_.exec(w);if(H){var se=H[0];return D(se),w=w.slice(se.length),H}}function z(){B(n)}function j(_){var H;for(_=_||[];H=q();)H!==!1&&_.push(H);return _}function q(){var _=I();if(!(p!=w.charAt(0)||h!=w.charAt(1))){for(var H=2;m!=w.charAt(H)&&(h!=w.charAt(H)||p!=w.charAt(H+1));)++H;if(H+=2,m===w.charAt(H-1))return O("End of comment missing");var se=w.slice(2,H-2);return T+=2,D(se),w=w.slice(H),T+=2,_({type:g,comment:se})}}function F(){var _=I(),H=B(r);if(H){if(q(),!B(i))return O("property missing ':'");var se=B(s),ne=_({type:b,property:v(H[0].replace(e,m)),value:se?v(se[0].replace(e,m)):m});return B(o),ne}}function G(){var _=[];j(_);for(var H;H=F();)H!==!1&&(_.push(H),j(_));return _}return z(),G()}function v(w){return w?w.replace(c,m):m}return ip=x,ip}var Jb;function N2(){if(Jb)return Ji;Jb=1;var e=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.default=n;const t=e(k2());function n(r,i){let s=null;if(!r||typeof r!="string")return s;const o=(0,t.default)(r),c=typeof i=="function";return o.forEach(d=>{if(d.type!=="declaration")return;const{property:p,value:h}=d;c?i(p,h,d):h&&(s=s||{},s[p]=h)}),s}return Ji}var io={},ey;function S2(){if(ey)return io;ey=1,Object.defineProperty(io,"__esModule",{value:!0}),io.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(p){return!p||n.test(p)||e.test(p)},o=function(p,h){return h.toUpperCase()},c=function(p,h){return"".concat(h,"-")},d=function(p,h){return h===void 0&&(h={}),s(p)?p:(p=p.toLowerCase(),h.reactCompat?p=p.replace(i,c):p=p.replace(r,c),p.replace(t,o))};return io.camelCase=d,io}var so,ty;function C2(){if(ty)return so;ty=1;var e=so&&so.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(N2()),n=S2();function r(i,s){var o={};return!i||typeof i!="string"||(0,t.default)(i,function(c,d){c&&d&&(o[(0,n.camelCase)(c,s)]=d)}),o}return r.default=r,so=r,so}var _2=C2();const T2=fs(_2),Ox=Mx("end"),Wf=Mx("start");function Mx(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function D2(e){const t=Wf(e),n=Ox(e);if(t&&n)return{start:t,end:n}}function go(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ny(e.position):"start"in e||"end"in e?ny(e):"line"in e||"column"in e?tf(e):""}function tf(e){return ry(e&&e.line)+":"+ry(e&&e.column)}function ny(e){return tf(e&&e.start)+"-"+tf(e&&e.end)}function ry(e){return e&&typeof e=="number"?e:1}class zn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?s.ruleId=r:(s.source=r.slice(0,d),s.ruleId=r.slice(d+1))}if(!s.place&&s.ancestors&&s.ancestors){const d=s.ancestors[s.ancestors.length-1];d&&(s.place=d.position)}const c=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=c?c.line:void 0,this.name=go(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}zn.prototype.file="";zn.prototype.name="";zn.prototype.reason="";zn.prototype.message="";zn.prototype.stack="";zn.prototype.column=void 0;zn.prototype.line=void 0;zn.prototype.ancestors=void 0;zn.prototype.cause=void 0;zn.prototype.fatal=void 0;zn.prototype.place=void 0;zn.prototype.ruleId=void 0;zn.prototype.source=void 0;const Gf={}.hasOwnProperty,R2=new Map,A2=/[A-Z]/g,I2=new Set(["table","tbody","thead","tfoot","tr"]),j2=new Set(["td","th"]),Fx="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function O2(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=U2(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=B2(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Vf:w2,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Lx(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Lx(e,t,n){if(t.type==="element")return M2(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return F2(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return P2(e,t,n);if(t.type==="mdxjsEsm")return L2(e,t);if(t.type==="root")return z2(e,t,n);if(t.type==="text")return $2(e,t)}function M2(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Vf,e.schema=i),e.ancestors.push(t);const s=zx(e,t.tagName,!1),o=H2(e,t);let c=Yf(e,t);return I2.has(t.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!d2(d):!0})),Px(e,o,s,t),Kf(o,c),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function F2(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Do(e,t.position)}function L2(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Do(e,t.position)}function P2(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Vf,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:zx(e,t.name,!0),o=q2(e,t),c=Yf(e,t);return Px(e,o,s,t),Kf(o,c),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function z2(e,t,n){const r={};return Kf(r,Yf(e,t)),e.create(t,e.Fragment,r,n)}function $2(e,t){return t.value}function Px(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Kf(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function B2(e,t,n){return r;function r(i,s,o,c){const p=Array.isArray(o.children)?n:t;return c?p(s,o,c):p(s,o)}}function U2(e,t){return n;function n(r,i,s,o){const c=Array.isArray(s.children),d=Wf(r);return t(i,s,o,c,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function H2(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&Gf.call(t.properties,i)){const s=V2(e,i,t.properties[i]);if(s){const[o,c]=s;e.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&j2.has(t.tagName)?r=c:n[o]=c}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function q2(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const c=o.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else Do(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const c=r.value.data.estree.body[0];c.type,s=e.evaluater.evaluateExpression(c.expression)}else Do(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Yf(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:R2;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const d=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(d){const p=i.get(d)||0;o=d+"-"+p,i.set(d,p+1)}}const c=Lx(e,s,o);c!==void 0&&n.push(c)}return n}function V2(e,t,n){const r=y2(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?s2(n):E2(n)),r.property==="style"){let i=typeof n=="object"?n:W2(e,String(n));return e.stylePropertyNameCase==="css"&&(i=G2(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?m2[r.property]||r.property:r.attribute,n]}}function W2(e,t){try{return T2(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new zn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=Fx+"#cannot-parse-style-attribute",i}}function zx(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const c=Kb(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(s&&c.type==="Literal"),optional:!1}:c}r=o}else r=Kb(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Gf.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Do(e)}function Do(e,t){const n=new zn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Fx+"#cannot-handle-mdx-estrees-without-createevaluater",n}function G2(e){const t={};let n;for(n in e)Gf.call(e,n)&&(t[K2(n)]=e[n]);return t}function K2(e){let t=e.replace(A2,Y2);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Y2(e){return"-"+e.toLowerCase()}const sp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Z2={};function Zf(e,t){const n=Z2,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return $x(e,r,i)}function $x(e,t,n){if(X2(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ay(e.children,t,n)}return Array.isArray(e)?ay(e,t,n):""}function ay(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=$x(e[i],t,n);return r.join("")}function X2(e){return!!(e&&typeof e=="object")}const iy=document.createElement("i");function Xf(e){const t="&"+e+";";iy.innerHTML=t;const n=iy.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hr(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function kr(e,t){return e.length>0?(hr(e,e.length,0,t),e):t}const sy={}.hasOwnProperty;function Bx(e){const t={};let n=-1;for(;++n<e.length;)Q2(t,e[n]);return t}function Q2(e,t){let n;for(n in t){const i=(sy.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){sy.call(i,o)||(i[o]=[]);const c=s[o];J2(i[o],Array.isArray(c)?c:c?[c]:[])}}}function J2(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);hr(e,0,0,r)}function Ux(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Mr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Wn=Xa(/[A-Za-z]/),Pn=Xa(/[\dA-Za-z]/),eT=Xa(/[#-'*+\--9=?A-Z^-~]/);function _c(e){return e!==null&&(e<32||e===127)}const nf=Xa(/\d/),tT=Xa(/[\dA-Fa-f]/),nT=Xa(/[!-/:-@[-`{-~]/);function ot(e){return e!==null&&e<-2}function Vt(e){return e!==null&&(e<0||e===32)}function kt(e){return e===-2||e===-1||e===32}const Qc=Xa(new RegExp("\\p{P}|\\p{S}","u")),ki=Xa(/\s/);function Xa(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ys(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Pn(e.charCodeAt(n+1))&&Pn(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const c=e.charCodeAt(n+1);s<56320&&c>56319&&c<57344?(o=String.fromCharCode(s,c),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function At(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(d){return kt(d)?(e.enter(n),c(d)):t(d)}function c(d){return kt(d)&&s++<i?(e.consume(d),c):(e.exit(n),t(d))}}const rT={tokenize:aT};function aT(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),At(e,t,"linePrefix")}function i(c){return e.enter("paragraph"),s(c)}function s(c){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,o(c)}function o(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return ot(c)?(e.consume(c),e.exit("chunkText"),s):(e.consume(c),o)}}const iT={tokenize:sT},oy={tokenize:oT};function sT(e){const t=this,n=[];let r=0,i,s,o;return c;function c(T){if(r<n.length){const D=n[r];return t.containerState=D[1],e.attempt(D[0].continuation,d,p)(T)}return p(T)}function d(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&C();const D=t.events.length;let I=D,L;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){L=t.events[I][1].end;break}k(r);let O=D;for(;O<t.events.length;)t.events[O][1].end={...L},O++;return hr(t.events,I+1,0,t.events.slice(D)),t.events.length=O,p(T)}return c(T)}function p(T){if(r===n.length){if(!i)return g(T);if(i.currentConstruct&&i.currentConstruct.concrete)return x(T);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(oy,h,m)(T)}function h(T){return i&&C(),k(r),g(T)}function m(T){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(T)}function g(T){return t.containerState={},e.attempt(oy,b,x)(T)}function b(T){return r++,n.push([t.currentConstruct,t.containerState]),g(T)}function x(T){if(T===null){i&&C(),k(0),e.consume(T);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(T)}function v(T){if(T===null){w(e.exit("chunkFlow"),!0),k(0),e.consume(T);return}return ot(T)?(e.consume(T),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,c):(e.consume(T),v)}function w(T,D){const I=t.sliceStream(T);if(D&&I.push(null),T.previous=s,s&&(s.next=T),s=T,i.defineSkip(T.start),i.write(I),t.parser.lazy[T.start.line]){let L=i.events.length;for(;L--;)if(i.events[L][1].start.offset<o&&(!i.events[L][1].end||i.events[L][1].end.offset>o))return;const O=t.events.length;let B=O,z,j;for(;B--;)if(t.events[B][0]==="exit"&&t.events[B][1].type==="chunkFlow"){if(z){j=t.events[B][1].end;break}z=!0}for(k(r),L=O;L<t.events.length;)t.events[L][1].end={...j},L++;hr(t.events,B+1,0,t.events.slice(O)),t.events.length=L}}function k(T){let D=n.length;for(;D-- >T;){const I=n[D];t.containerState=I[1],I[0].exit.call(t,e)}n.length=T}function C(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function oT(e,t,n){return At(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ps(e){if(e===null||Vt(e)||ki(e))return 1;if(Qc(e))return 2}function Jc(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const rf={name:"attention",resolveAll:lT,tokenize:cT};function lT(e,t){let n=-1,r,i,s,o,c,d,p,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},g={...e[n][1].start};ly(m,-d),ly(g,d),o={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},s={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:d>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},e[r][1].end={...o.start},e[n][1].start={...c.end},p=[],e[r][1].end.offset-e[r][1].start.offset&&(p=kr(p,[["enter",e[r][1],t],["exit",e[r][1],t]])),p=kr(p,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),p=kr(p,Jc(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),p=kr(p,[["exit",s,t],["enter",c,t],["exit",c,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,p=kr(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,hr(e,r-1,n-r+3,p),n=r+p.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cT(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ps(r);let s;return o;function o(d){return s=d,e.enter("attentionSequence"),c(d)}function c(d){if(d===s)return e.consume(d),c;const p=e.exit("attentionSequence"),h=ps(d),m=!h||h===2&&i||n.includes(d),g=!i||i===2&&h||n.includes(r);return p._open=!!(s===42?m:m&&(i||!g)),p._close=!!(s===42?g:g&&(h||!m)),t(d)}}function ly(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const uT={name:"autolink",tokenize:dT};function dT(e,t,n){let r=0;return i;function i(b){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(b){return Wn(b)?(e.consume(b),o):b===64?n(b):p(b)}function o(b){return b===43||b===45||b===46||Pn(b)?(r=1,c(b)):p(b)}function c(b){return b===58?(e.consume(b),r=0,d):(b===43||b===45||b===46||Pn(b))&&r++<32?(e.consume(b),c):(r=0,p(b))}function d(b){return b===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):b===null||b===32||b===60||_c(b)?n(b):(e.consume(b),d)}function p(b){return b===64?(e.consume(b),h):eT(b)?(e.consume(b),p):n(b)}function h(b){return Pn(b)?m(b):n(b)}function m(b){return b===46?(e.consume(b),r=0,h):b===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(b),e.exit("autolinkMarker"),e.exit("autolink"),t):g(b)}function g(b){if((b===45||Pn(b))&&r++<63){const x=b===45?g:m;return e.consume(b),x}return n(b)}}const qo={partial:!0,tokenize:pT};function pT(e,t,n){return r;function r(s){return kt(s)?At(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||ot(s)?t(s):n(s)}}const Hx={continuation:{tokenize:hT},exit:mT,name:"blockQuote",tokenize:fT};function fT(e,t,n){const r=this;return i;function i(o){if(o===62){const c=r.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return kt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function hT(e,t,n){const r=this;return i;function i(o){return kt(o)?At(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Hx,t,n)(o)}}function mT(e){e.exit("blockQuote")}const qx={name:"characterEscape",tokenize:gT};function gT(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return nT(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Vx={name:"characterReference",tokenize:bT};function bT(e,t,n){const r=this;let i=0,s,o;return c;function c(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),s=31,o=Pn,h(m))}function p(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=tT,h):(e.enter("characterReferenceValue"),s=7,o=nf,h(m))}function h(m){if(m===59&&i){const g=e.exit("characterReferenceValue");return o===Pn&&!Xf(r.sliceSerialize(g))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(m)&&i++<s?(e.consume(m),h):n(m)}}const cy={partial:!0,tokenize:vT},uy={concrete:!0,name:"codeFenced",tokenize:yT};function yT(e,t,n){const r=this,i={partial:!0,tokenize:I};let s=0,o=0,c;return d;function d(L){return p(L)}function p(L){const O=r.events[r.events.length-1];return s=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,c=L,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(L)}function h(L){return L===c?(o++,e.consume(L),h):o<3?n(L):(e.exit("codeFencedFenceSequence"),kt(L)?At(e,m,"whitespace")(L):m(L))}function m(L){return L===null||ot(L)?(e.exit("codeFencedFence"),r.interrupt?t(L):e.check(cy,v,D)(L)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(L))}function g(L){return L===null||ot(L)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(L)):kt(L)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),At(e,b,"whitespace")(L)):L===96&&L===c?n(L):(e.consume(L),g)}function b(L){return L===null||ot(L)?m(L):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(L))}function x(L){return L===null||ot(L)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(L)):L===96&&L===c?n(L):(e.consume(L),x)}function v(L){return e.attempt(i,D,w)(L)}function w(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),k}function k(L){return s>0&&kt(L)?At(e,C,"linePrefix",s+1)(L):C(L)}function C(L){return L===null||ot(L)?e.check(cy,v,D)(L):(e.enter("codeFlowValue"),T(L))}function T(L){return L===null||ot(L)?(e.exit("codeFlowValue"),C(L)):(e.consume(L),T)}function D(L){return e.exit("codeFenced"),t(L)}function I(L,O,B){let z=0;return j;function j(H){return L.enter("lineEnding"),L.consume(H),L.exit("lineEnding"),q}function q(H){return L.enter("codeFencedFence"),kt(H)?At(L,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):F(H)}function F(H){return H===c?(L.enter("codeFencedFenceSequence"),G(H)):B(H)}function G(H){return H===c?(z++,L.consume(H),G):z>=o?(L.exit("codeFencedFenceSequence"),kt(H)?At(L,_,"whitespace")(H):_(H)):B(H)}function _(H){return H===null||ot(H)?(L.exit("codeFencedFence"),O(H)):B(H)}}}function vT(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const op={name:"codeIndented",tokenize:wT},xT={partial:!0,tokenize:ET};function wT(e,t,n){const r=this;return i;function i(p){return e.enter("codeIndented"),At(e,s,"linePrefix",5)(p)}function s(p){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(p):n(p)}function o(p){return p===null?d(p):ot(p)?e.attempt(xT,o,d)(p):(e.enter("codeFlowValue"),c(p))}function c(p){return p===null||ot(p)?(e.exit("codeFlowValue"),o(p)):(e.consume(p),c)}function d(p){return e.exit("codeIndented"),t(p)}}function ET(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):ot(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):At(e,s,"linePrefix",5)(o)}function s(o){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(o):ot(o)?i(o):n(o)}}const kT={name:"codeText",previous:ST,resolve:NT,tokenize:CT};function NT(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function ST(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function CT(e,t,n){let r=0,i,s;return o;function o(m){return e.enter("codeText"),e.enter("codeTextSequence"),c(m)}function c(m){return m===96?(e.consume(m),r++,c):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(s=e.enter("codeTextSequence"),i=0,h(m)):ot(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),p(m))}function p(m){return m===null||m===32||m===96||ot(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),p)}function h(m){return m===96?(e.consume(m),i++,h):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(s.type="codeTextData",p(m))}}class _T{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&oo(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),oo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),oo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);oo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);oo(this.left,n.reverse())}}}function oo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Wx(e){const t={};let n=-1,r,i,s,o,c,d,p;const h=new _T(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,s=0,s<d.length&&d[s][1].type==="lineEndingBlank"&&(s+=2),s<d.length&&d[s][1].type==="content"))for(;++s<d.length&&d[s][1].type!=="content";)d[s][1].type==="chunkText"&&(d[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,TT(h,n)),n=t[n],p=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=h.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},c=h.slice(i,n),c.unshift(r),h.splice(i,n-i+1,c))}}return hr(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!p}function TT(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,d=[],p={};let h,m,g=-1,b=n,x=0,v=0;const w=[v];for(;b;){for(;e.get(++i)[1]!==b;);s.push(i),b._tokenizer||(h=r.sliceStream(b),b.next||h.push(null),m&&o.defineSkip(b.start),b._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),b._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=b,b=b.next}for(b=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(v=g+1,w.push(v),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(o.events=[],b?(b._tokenizer=void 0,b.previous=void 0):w.pop(),g=w.length;g--;){const k=c.slice(w[g],w[g+1]),C=s.pop();d.push([C,C+k.length-1]),e.splice(C,2,k)}for(d.reverse(),g=-1;++g<d.length;)p[x+d[g][0]]=x+d[g][1],x+=d[g][1]-d[g][0]-1;return p}const DT={resolve:AT,tokenize:IT},RT={partial:!0,tokenize:jT};function AT(e){return Wx(e),e}function IT(e,t){let n;return r;function r(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(c)}function i(c){return c===null?s(c):ot(c)?e.check(RT,o,s)(c):(e.consume(c),i)}function s(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function o(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function jT(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),At(e,s,"linePrefix")}function s(o){if(o===null||ot(o))return n(o);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Gx(e,t,n,r,i,s,o,c,d){const p=d||Number.POSITIVE_INFINITY;let h=0;return m;function m(k){return k===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(k),e.exit(s),g):k===null||k===32||k===41||_c(k)?n(k):(e.enter(r),e.enter(o),e.enter(c),e.enter("chunkString",{contentType:"string"}),v(k))}function g(k){return k===62?(e.enter(s),e.consume(k),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),b(k))}function b(k){return k===62?(e.exit("chunkString"),e.exit(c),g(k)):k===null||k===60||ot(k)?n(k):(e.consume(k),k===92?x:b)}function x(k){return k===60||k===62||k===92?(e.consume(k),b):b(k)}function v(k){return!h&&(k===null||k===41||Vt(k))?(e.exit("chunkString"),e.exit(c),e.exit(o),e.exit(r),t(k)):h<p&&k===40?(e.consume(k),h++,v):k===41?(e.consume(k),h--,v):k===null||k===32||k===40||_c(k)?n(k):(e.consume(k),k===92?w:v)}function w(k){return k===40||k===41||k===92?(e.consume(k),v):v(k)}}function Kx(e,t,n,r,i,s){const o=this;let c=0,d;return p;function p(b){return e.enter(r),e.enter(i),e.consume(b),e.exit(i),e.enter(s),h}function h(b){return c>999||b===null||b===91||b===93&&!d||b===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?n(b):b===93?(e.exit(s),e.enter(i),e.consume(b),e.exit(i),e.exit(r),t):ot(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),m(b))}function m(b){return b===null||b===91||b===93||ot(b)||c++>999?(e.exit("chunkString"),h(b)):(e.consume(b),d||(d=!kt(b)),b===92?g:m)}function g(b){return b===91||b===92||b===93?(e.consume(b),c++,m):m(b)}}function Yx(e,t,n,r,i,s){let o;return c;function c(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),o=g===40?41:g,d):n(g)}function d(g){return g===o?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(s),p(g))}function p(g){return g===o?(e.exit(s),d(o)):g===null?n(g):ot(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),At(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(g))}function h(g){return g===o||g===null||ot(g)?(e.exit("chunkString"),p(g)):(e.consume(g),g===92?m:h)}function m(g){return g===o||g===92?(e.consume(g),h):h(g)}}function bo(e,t){let n;return r;function r(i){return ot(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):kt(i)?At(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const OT={name:"definition",tokenize:FT},MT={partial:!0,tokenize:LT};function FT(e,t,n){const r=this;let i;return s;function s(b){return e.enter("definition"),o(b)}function o(b){return Kx.call(r,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function c(b){return i=Mr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),b===58?(e.enter("definitionMarker"),e.consume(b),e.exit("definitionMarker"),d):n(b)}function d(b){return Vt(b)?bo(e,p)(b):p(b)}function p(b){return Gx(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function h(b){return e.attempt(MT,m,m)(b)}function m(b){return kt(b)?At(e,g,"whitespace")(b):g(b)}function g(b){return b===null||ot(b)?(e.exit("definition"),r.parser.defined.push(i),t(b)):n(b)}}function LT(e,t,n){return r;function r(c){return Vt(c)?bo(e,i)(c):n(c)}function i(c){return Yx(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function s(c){return kt(c)?At(e,o,"whitespace")(c):o(c)}function o(c){return c===null||ot(c)?t(c):n(c)}}const PT={name:"hardBreakEscape",tokenize:zT};function zT(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return ot(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const $T={name:"headingAtx",resolve:BT,tokenize:UT};function BT(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},hr(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function UT(e,t,n){let r=0;return i;function i(h){return e.enter("atxHeading"),s(h)}function s(h){return e.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(e.consume(h),o):h===null||Vt(h)?(e.exit("atxHeadingSequence"),c(h)):n(h)}function c(h){return h===35?(e.enter("atxHeadingSequence"),d(h)):h===null||ot(h)?(e.exit("atxHeading"),t(h)):kt(h)?At(e,c,"whitespace")(h):(e.enter("atxHeadingText"),p(h))}function d(h){return h===35?(e.consume(h),d):(e.exit("atxHeadingSequence"),c(h))}function p(h){return h===null||h===35||Vt(h)?(e.exit("atxHeadingText"),c(h)):(e.consume(h),p)}}const HT=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dy=["pre","script","style","textarea"],qT={concrete:!0,name:"htmlFlow",resolveTo:GT,tokenize:KT},VT={partial:!0,tokenize:ZT},WT={partial:!0,tokenize:YT};function GT(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function KT(e,t,n){const r=this;let i,s,o,c,d;return p;function p(A){return h(A)}function h(A){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(A),m}function m(A){return A===33?(e.consume(A),g):A===47?(e.consume(A),s=!0,v):A===63?(e.consume(A),i=3,r.interrupt?t:P):Wn(A)?(e.consume(A),o=String.fromCharCode(A),w):n(A)}function g(A){return A===45?(e.consume(A),i=2,b):A===91?(e.consume(A),i=5,c=0,x):Wn(A)?(e.consume(A),i=4,r.interrupt?t:P):n(A)}function b(A){return A===45?(e.consume(A),r.interrupt?t:P):n(A)}function x(A){const te="CDATA[";return A===te.charCodeAt(c++)?(e.consume(A),c===te.length?r.interrupt?t:F:x):n(A)}function v(A){return Wn(A)?(e.consume(A),o=String.fromCharCode(A),w):n(A)}function w(A){if(A===null||A===47||A===62||Vt(A)){const te=A===47,ce=o.toLowerCase();return!te&&!s&&dy.includes(ce)?(i=1,r.interrupt?t(A):F(A)):HT.includes(o.toLowerCase())?(i=6,te?(e.consume(A),k):r.interrupt?t(A):F(A)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):s?C(A):T(A))}return A===45||Pn(A)?(e.consume(A),o+=String.fromCharCode(A),w):n(A)}function k(A){return A===62?(e.consume(A),r.interrupt?t:F):n(A)}function C(A){return kt(A)?(e.consume(A),C):j(A)}function T(A){return A===47?(e.consume(A),j):A===58||A===95||Wn(A)?(e.consume(A),D):kt(A)?(e.consume(A),T):j(A)}function D(A){return A===45||A===46||A===58||A===95||Pn(A)?(e.consume(A),D):I(A)}function I(A){return A===61?(e.consume(A),L):kt(A)?(e.consume(A),I):T(A)}function L(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),d=A,O):kt(A)?(e.consume(A),L):B(A)}function O(A){return A===d?(e.consume(A),d=null,z):A===null||ot(A)?n(A):(e.consume(A),O)}function B(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||Vt(A)?I(A):(e.consume(A),B)}function z(A){return A===47||A===62||kt(A)?T(A):n(A)}function j(A){return A===62?(e.consume(A),q):n(A)}function q(A){return A===null||ot(A)?F(A):kt(A)?(e.consume(A),q):n(A)}function F(A){return A===45&&i===2?(e.consume(A),se):A===60&&i===1?(e.consume(A),ne):A===62&&i===4?(e.consume(A),M):A===63&&i===3?(e.consume(A),P):A===93&&i===5?(e.consume(A),J):ot(A)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(VT,U,G)(A)):A===null||ot(A)?(e.exit("htmlFlowData"),G(A)):(e.consume(A),F)}function G(A){return e.check(WT,_,U)(A)}function _(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),H}function H(A){return A===null||ot(A)?G(A):(e.enter("htmlFlowData"),F(A))}function se(A){return A===45?(e.consume(A),P):F(A)}function ne(A){return A===47?(e.consume(A),o="",Z):F(A)}function Z(A){if(A===62){const te=o.toLowerCase();return dy.includes(te)?(e.consume(A),M):F(A)}return Wn(A)&&o.length<8?(e.consume(A),o+=String.fromCharCode(A),Z):F(A)}function J(A){return A===93?(e.consume(A),P):F(A)}function P(A){return A===62?(e.consume(A),M):A===45&&i===2?(e.consume(A),P):F(A)}function M(A){return A===null||ot(A)?(e.exit("htmlFlowData"),U(A)):(e.consume(A),M)}function U(A){return e.exit("htmlFlow"),t(A)}}function YT(e,t,n){const r=this;return i;function i(o){return ot(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function ZT(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(qo,t,n)}}const XT={name:"htmlText",tokenize:QT};function QT(e,t,n){const r=this;let i,s,o;return c;function c(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),d}function d(P){return P===33?(e.consume(P),p):P===47?(e.consume(P),I):P===63?(e.consume(P),T):Wn(P)?(e.consume(P),B):n(P)}function p(P){return P===45?(e.consume(P),h):P===91?(e.consume(P),s=0,x):Wn(P)?(e.consume(P),C):n(P)}function h(P){return P===45?(e.consume(P),b):n(P)}function m(P){return P===null?n(P):P===45?(e.consume(P),g):ot(P)?(o=m,ne(P)):(e.consume(P),m)}function g(P){return P===45?(e.consume(P),b):m(P)}function b(P){return P===62?se(P):P===45?g(P):m(P)}function x(P){const M="CDATA[";return P===M.charCodeAt(s++)?(e.consume(P),s===M.length?v:x):n(P)}function v(P){return P===null?n(P):P===93?(e.consume(P),w):ot(P)?(o=v,ne(P)):(e.consume(P),v)}function w(P){return P===93?(e.consume(P),k):v(P)}function k(P){return P===62?se(P):P===93?(e.consume(P),k):v(P)}function C(P){return P===null||P===62?se(P):ot(P)?(o=C,ne(P)):(e.consume(P),C)}function T(P){return P===null?n(P):P===63?(e.consume(P),D):ot(P)?(o=T,ne(P)):(e.consume(P),T)}function D(P){return P===62?se(P):T(P)}function I(P){return Wn(P)?(e.consume(P),L):n(P)}function L(P){return P===45||Pn(P)?(e.consume(P),L):O(P)}function O(P){return ot(P)?(o=O,ne(P)):kt(P)?(e.consume(P),O):se(P)}function B(P){return P===45||Pn(P)?(e.consume(P),B):P===47||P===62||Vt(P)?z(P):n(P)}function z(P){return P===47?(e.consume(P),se):P===58||P===95||Wn(P)?(e.consume(P),j):ot(P)?(o=z,ne(P)):kt(P)?(e.consume(P),z):se(P)}function j(P){return P===45||P===46||P===58||P===95||Pn(P)?(e.consume(P),j):q(P)}function q(P){return P===61?(e.consume(P),F):ot(P)?(o=q,ne(P)):kt(P)?(e.consume(P),q):z(P)}function F(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,G):ot(P)?(o=F,ne(P)):kt(P)?(e.consume(P),F):(e.consume(P),_)}function G(P){return P===i?(e.consume(P),i=void 0,H):P===null?n(P):ot(P)?(o=G,ne(P)):(e.consume(P),G)}function _(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||Vt(P)?z(P):(e.consume(P),_)}function H(P){return P===47||P===62||Vt(P)?z(P):n(P)}function se(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function ne(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),Z}function Z(P){return kt(P)?At(e,J,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):J(P)}function J(P){return e.enter("htmlTextData"),o(P)}}const Qf={name:"labelEnd",resolveAll:nD,resolveTo:rD,tokenize:aD},JT={tokenize:iD},eD={tokenize:sD},tD={tokenize:oD};function nD(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&hr(e,0,e.length,n),e}function rD(e,t){let n=e.length,r=0,i,s,o,c;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const d={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},h={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return c=[["enter",d,t],["enter",p,t]],c=kr(c,e.slice(s+1,s+r+3)),c=kr(c,[["enter",h,t]]),c=kr(c,Jc(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),c=kr(c,[["exit",h,t],e[o-2],e[o-1],["exit",p,t]]),c=kr(c,e.slice(o+1)),c=kr(c,[["exit",d,t]]),hr(e,s,e.length,c),e}function aD(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return c;function c(g){return s?s._inactive?m(g):(o=r.parser.defined.includes(Mr(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):n(g)}function d(g){return g===40?e.attempt(JT,h,o?h:m)(g):g===91?e.attempt(eD,h,o?p:m)(g):o?h(g):m(g)}function p(g){return e.attempt(tD,h,m)(g)}function h(g){return t(g)}function m(g){return s._balanced=!0,n(g)}}function iD(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),i}function i(m){return Vt(m)?bo(e,s)(m):s(m)}function s(m){return m===41?h(m):Gx(e,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Vt(m)?bo(e,d)(m):h(m)}function c(m){return n(m)}function d(m){return m===34||m===39||m===40?Yx(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):h(m)}function p(m){return Vt(m)?bo(e,h)(m):h(m)}function h(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function sD(e,t,n){const r=this;return i;function i(c){return Kx.call(r,e,s,o,"reference","referenceMarker","referenceString")(c)}function s(c){return r.parser.defined.includes(Mr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function o(c){return n(c)}}function oD(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const lD={name:"labelStartImage",resolveAll:Qf.resolveAll,tokenize:cD};function cD(e,t,n){const r=this;return i;function i(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),s}function s(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),o):n(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const uD={name:"labelStartLink",resolveAll:Qf.resolveAll,tokenize:dD};function dD(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const lp={name:"lineEnding",tokenize:pD};function pD(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),At(e,t,"linePrefix")}}const xc={name:"thematicBreak",tokenize:fD};function fD(e,t,n){let r=0,i;return s;function s(p){return e.enter("thematicBreak"),o(p)}function o(p){return i=p,c(p)}function c(p){return p===i?(e.enter("thematicBreakSequence"),d(p)):r>=3&&(p===null||ot(p))?(e.exit("thematicBreak"),t(p)):n(p)}function d(p){return p===i?(e.consume(p),r++,d):(e.exit("thematicBreakSequence"),kt(p)?At(e,c,"whitespace")(p):c(p))}}const er={continuation:{tokenize:bD},exit:vD,name:"list",tokenize:gD},hD={partial:!0,tokenize:xD},mD={partial:!0,tokenize:yD};function gD(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return c;function c(b){const x=r.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||b===r.containerState.marker:nf(b)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),b===42||b===45?e.check(xc,n,p)(b):p(b);if(!r.interrupt||b===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(b)}return n(b)}function d(b){return nf(b)&&++o<10?(e.consume(b),d):(!r.interrupt||o<2)&&(r.containerState.marker?b===r.containerState.marker:b===41||b===46)?(e.exit("listItemValue"),p(b)):n(b)}function p(b){return e.enter("listItemMarker"),e.consume(b),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||b,e.check(qo,r.interrupt?n:h,e.attempt(hD,g,m))}function h(b){return r.containerState.initialBlankLine=!0,s++,g(b)}function m(b){return kt(b)?(e.enter("listItemPrefixWhitespace"),e.consume(b),e.exit("listItemPrefixWhitespace"),g):n(b)}function g(b){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(b)}}function bD(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(qo,i,s);function i(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,At(e,t,"listItemIndent",r.containerState.size+1)(c)}function s(c){return r.containerState.furtherBlankLines||!kt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(mD,t,o)(c))}function o(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,At(e,e.attempt(er,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function yD(e,t,n){const r=this;return At(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function vD(e){e.exit(this.containerState.type)}function xD(e,t,n){const r=this;return At(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!kt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const py={name:"setextUnderline",resolveTo:wD,tokenize:ED};function wD(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function ED(e,t,n){const r=this;let i;return s;function s(p){let h=r.events.length,m;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){m=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),i=p,o(p)):n(p)}function o(p){return e.enter("setextHeadingLineSequence"),c(p)}function c(p){return p===i?(e.consume(p),c):(e.exit("setextHeadingLineSequence"),kt(p)?At(e,d,"lineSuffix")(p):d(p))}function d(p){return p===null||ot(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const kD={tokenize:ND};function ND(e){const t=this,n=e.attempt(qo,r,e.attempt(this.parser.constructs.flowInitial,i,At(e,e.attempt(this.parser.constructs.flow,i,e.attempt(DT,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const SD={resolveAll:Xx()},CD=Zx("string"),_D=Zx("text");function Zx(e){return{resolveAll:Xx(e==="text"?TD:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,c);return o;function o(h){return p(h)?s(h):c(h)}function c(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),d}function d(h){return p(h)?(n.exit("data"),s(h)):(n.consume(h),d)}function p(h){if(h===null)return!0;const m=i[h];let g=-1;if(m)for(;++g<m.length;){const b=m[g];if(!b.previous||b.previous.call(r,r.previous))return!0}return!1}}}function Xx(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function TD(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,c=0,d;for(;s--;){const p=i[s];if(typeof p=="string"){for(o=p.length;p.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(p===-2)d=!0,c++;else if(p!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const p={type:n===e.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...p.start},r.start.offset===r.end.offset?Object.assign(r,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const DD={42:er,43:er,45:er,48:er,49:er,50:er,51:er,52:er,53:er,54:er,55:er,56:er,57:er,62:Hx},RD={91:OT},AD={[-2]:op,[-1]:op,32:op},ID={35:$T,42:xc,45:[py,xc],60:qT,61:py,95:xc,96:uy,126:uy},jD={38:Vx,92:qx},OD={[-5]:lp,[-4]:lp,[-3]:lp,33:lD,38:Vx,42:rf,60:[uT,XT],91:uD,92:[PT,qx],93:Qf,95:rf,96:kT},MD={null:[rf,SD]},FD={null:[42,95]},LD={null:[]},PD=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:FD,contentInitial:RD,disable:LD,document:DD,flow:ID,flowInitial:AD,insideSpan:MD,string:jD,text:OD},Symbol.toStringTag,{value:"Module"}));function zD(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],c=[];const d={attempt:O(I),check:O(L),consume:C,enter:T,exit:D,interrupt:O(L,{interrupt:!0})},p={code:null,containerState:{},defineSkip:v,events:[],now:x,parser:e,previous:null,sliceSerialize:g,sliceStream:b,write:m};let h=t.tokenize.call(p,d);return t.resolveAll&&s.push(t),p;function m(q){return o=kr(o,q),w(),o[o.length-1]!==null?[]:(B(t,0),p.events=Jc(s,p.events,p),p.events)}function g(q,F){return BD(b(q),F)}function b(q){return $D(o,q)}function x(){const{_bufferIndex:q,_index:F,line:G,column:_,offset:H}=r;return{_bufferIndex:q,_index:F,line:G,column:_,offset:H}}function v(q){i[q.line]=q.column,j()}function w(){let q;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===q&&r._bufferIndex<F.length;)k(F.charCodeAt(r._bufferIndex));else k(F)}}function k(q){h=h(q)}function C(q){ot(q)?(r.line++,r.column=1,r.offset+=q===-3?2:1,j()):q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),p.previous=q}function T(q,F){const G=F||{};return G.type=q,G.start=x(),p.events.push(["enter",G,p]),c.push(G),G}function D(q){const F=c.pop();return F.end=x(),p.events.push(["exit",F,p]),F}function I(q,F){B(q,F.from)}function L(q,F){F.restore()}function O(q,F){return G;function G(_,H,se){let ne,Z,J,P;return Array.isArray(_)?U(_):"tokenize"in _?U([_]):M(_);function M(Ee){return Ue;function Ue(Te){const $e=Te!==null&&Ee[Te],le=Te!==null&&Ee.null,rt=[...Array.isArray($e)?$e:$e?[$e]:[],...Array.isArray(le)?le:le?[le]:[]];return U(rt)(Te)}}function U(Ee){return ne=Ee,Z=0,Ee.length===0?se:A(Ee[Z])}function A(Ee){return Ue;function Ue(Te){return P=z(),J=Ee,Ee.partial||(p.currentConstruct=Ee),Ee.name&&p.parser.constructs.disable.null.includes(Ee.name)?ce():Ee.tokenize.call(F?Object.assign(Object.create(p),F):p,d,te,ce)(Te)}}function te(Ee){return q(J,P),H}function ce(Ee){return P.restore(),++Z<ne.length?A(ne[Z]):se}}}function B(q,F){q.resolveAll&&!s.includes(q)&&s.push(q),q.resolve&&hr(p.events,F,p.events.length-F,q.resolve(p.events.slice(F),p)),q.resolveTo&&(p.events=q.resolveTo(p.events,p))}function z(){const q=x(),F=p.previous,G=p.currentConstruct,_=p.events.length,H=Array.from(c);return{from:_,restore:se};function se(){r=q,p.previous=F,p.currentConstruct=G,p.events.length=_,c=H,j()}}function j(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function $D(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function BD(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function UD(e){const r={constructs:Bx([PD,...(e||{}).extensions||[]]),content:i(rT),defined:[],document:i(iT),flow:i(kD),lazy:{},string:i(CD),text:i(_D)};return r;function i(s){return o;function o(c){return zD(r,s,c)}}}function HD(e){for(;!Wx(e););return e}const fy=/[\0\t\n\r]/g;function qD(){let e=1,t="",n=!0,r;return i;function i(s,o,c){const d=[];let p,h,m,g,b;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),m=0,t="",n&&(s.charCodeAt(0)===65279&&m++,n=void 0);m<s.length;){if(fy.lastIndex=m,p=fy.exec(s),g=p&&p.index!==void 0?p.index:s.length,b=s.charCodeAt(g),!p){t=s.slice(m);break}if(b===10&&m===g&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),m<g&&(d.push(s.slice(m,g)),e+=g-m),b){case 0:{d.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,d.push(-2);e++<h;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}m=g+1}return c&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const VD=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function WD(e){return e.replace(VD,GD)}function GD(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Ux(n.slice(s?2:1),s?16:10)}return Xf(n)||e}const Qx={}.hasOwnProperty;function KD(e,t,n){return typeof t!="string"&&(n=t,t=void 0),YD(n)(HD(UD(n).document().write(qD()(e,t,!0))))}function YD(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(re),autolinkProtocol:z,autolinkEmail:z,atxHeading:s(ge),blockQuote:s(le),characterEscape:z,characterReference:z,codeFenced:s(rt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(rt,o),codeText:s(at,o),codeTextData:z,data:z,codeFlowValue:z,definition:s(wt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(R),hardBreakEscape:s(oe),hardBreakTrailing:s(oe),htmlFlow:s(K,o),htmlFlowData:z,htmlText:s(K,o),htmlTextData:z,image:s(W),label:o,link:s(re),listItem:s(we),listItemValue:g,listOrdered:s(ve,m),listUnordered:s(ve),paragraph:s(de),reference:A,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ge),strong:s(Ce),thematicBreak:s(_e)},exit:{atxHeading:d(),atxHeadingSequence:I,autolink:d(),autolinkEmail:$e,autolinkProtocol:Te,blockQuote:d(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:ce,characterReferenceMarkerNumeric:ce,characterReferenceValue:Ee,characterReference:Ue,codeFenced:d(w),codeFencedFence:v,codeFencedFenceInfo:b,codeFencedFenceMeta:x,codeFlowValue:j,codeIndented:d(k),codeText:d(H),codeTextData:j,data:j,definition:d(),definitionDestinationString:D,definitionLabelString:C,definitionTitleString:T,emphasis:d(),hardBreakEscape:d(F),hardBreakTrailing:d(F),htmlFlow:d(G),htmlFlowData:j,htmlText:d(_),htmlTextData:j,image:d(ne),label:J,labelText:Z,lineEnding:q,link:d(se),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:te,resourceDestinationString:P,resourceTitleString:M,resource:U,setextHeading:d(B),setextHeadingLineSequence:O,setextHeadingText:L,strong:d(),thematicBreak:d()}};Jx(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ie){let xe={type:"root",children:[]};const Ne={stack:[xe],tokenStack:[],config:t,enter:c,exit:p,buffer:o,resume:h,data:n},Ve=[];let ct=-1;for(;++ct<ie.length;)if(ie[ct][1].type==="listOrdered"||ie[ct][1].type==="listUnordered")if(ie[ct][0]==="enter")Ve.push(ct);else{const ht=Ve.pop();ct=i(ie,ht,ct)}for(ct=-1;++ct<ie.length;){const ht=t[ie[ct][0]];Qx.call(ht,ie[ct][1].type)&&ht[ie[ct][1].type].call(Object.assign({sliceSerialize:ie[ct][2].sliceSerialize},Ne),ie[ct][1])}if(Ne.tokenStack.length>0){const ht=Ne.tokenStack[Ne.tokenStack.length-1];(ht[1]||hy).call(Ne,void 0,ht[0])}for(xe.position={start:Ba(ie.length>0?ie[0][1].start:{line:1,column:1,offset:0}),end:Ba(ie.length>0?ie[ie.length-2][1].end:{line:1,column:1,offset:0})},ct=-1;++ct<t.transforms.length;)xe=t.transforms[ct](xe)||xe;return xe}function i(ie,xe,Ne){let Ve=xe-1,ct=-1,ht=!1,sn,ut,un,fn;for(;++Ve<=Ne;){const _t=ie[Ve];switch(_t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_t[0]==="enter"?ct++:ct--,fn=void 0;break}case"lineEndingBlank":{_t[0]==="enter"&&(sn&&!fn&&!ct&&!un&&(un=Ve),fn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fn=void 0}if(!ct&&_t[0]==="enter"&&_t[1].type==="listItemPrefix"||ct===-1&&_t[0]==="exit"&&(_t[1].type==="listUnordered"||_t[1].type==="listOrdered")){if(sn){let bn=Ve;for(ut=void 0;bn--;){const Kt=ie[bn];if(Kt[1].type==="lineEnding"||Kt[1].type==="lineEndingBlank"){if(Kt[0]==="exit")continue;ut&&(ie[ut][1].type="lineEndingBlank",ht=!0),Kt[1].type="lineEnding",ut=bn}else if(!(Kt[1].type==="linePrefix"||Kt[1].type==="blockQuotePrefix"||Kt[1].type==="blockQuotePrefixWhitespace"||Kt[1].type==="blockQuoteMarker"||Kt[1].type==="listItemIndent"))break}un&&(!ut||un<ut)&&(sn._spread=!0),sn.end=Object.assign({},ut?ie[ut][1].start:_t[1].end),ie.splice(ut||Ve,0,["exit",sn,_t[2]]),Ve++,Ne++}if(_t[1].type==="listItemPrefix"){const bn={type:"listItem",_spread:!1,start:Object.assign({},_t[1].start),end:void 0};sn=bn,ie.splice(Ve,0,["enter",bn,_t[2]]),Ve++,Ne++,un=void 0,fn=!0}}}return ie[xe][1]._spread=ht,Ne}function s(ie,xe){return Ne;function Ne(Ve){c.call(this,ie(Ve),Ve),xe&&xe.call(this,Ve)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(ie,xe,Ne){this.stack[this.stack.length-1].children.push(ie),this.stack.push(ie),this.tokenStack.push([xe,Ne||void 0]),ie.position={start:Ba(xe.start),end:void 0}}function d(ie){return xe;function xe(Ne){ie&&ie.call(this,Ne),p.call(this,Ne)}}function p(ie,xe){const Ne=this.stack.pop(),Ve=this.tokenStack.pop();if(Ve)Ve[0].type!==ie.type&&(xe?xe.call(this,ie,Ve[0]):(Ve[1]||hy).call(this,ie,Ve[0]));else throw new Error("Cannot close `"+ie.type+"` ("+go({start:ie.start,end:ie.end})+"): its not open");Ne.position.end=Ba(ie.end)}function h(){return Zf(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(ie){if(this.data.expectingFirstListItemValue){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(ie),10),this.data.expectingFirstListItemValue=void 0}}function b(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=ie}function x(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=ie}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.value=ie.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.value=ie.replace(/(\r?\n|\r)$/g,"")}function C(ie){const xe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.label=xe,Ne.identifier=Mr(this.sliceSerialize(ie)).toLowerCase()}function T(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.title=ie}function D(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.url=ie}function I(ie){const xe=this.stack[this.stack.length-1];if(!xe.depth){const Ne=this.sliceSerialize(ie).length;xe.depth=Ne}}function L(){this.data.setextHeadingSlurpLineEnding=!0}function O(ie){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(ie).codePointAt(0)===61?1:2}function B(){this.data.setextHeadingSlurpLineEnding=void 0}function z(ie){const Ne=this.stack[this.stack.length-1].children;let Ve=Ne[Ne.length-1];(!Ve||Ve.type!=="text")&&(Ve=Oe(),Ve.position={start:Ba(ie.start),end:void 0},Ne.push(Ve)),this.stack.push(Ve)}function j(ie){const xe=this.stack.pop();xe.value+=this.sliceSerialize(ie),xe.position.end=Ba(ie.end)}function q(ie){const xe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ne=xe.children[xe.children.length-1];Ne.position.end=Ba(ie.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(xe.type)&&(z.call(this,ie),j.call(this,ie))}function F(){this.data.atHardBreak=!0}function G(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.value=ie}function _(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.value=ie}function H(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.value=ie}function se(){const ie=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";ie.type+="Reference",ie.referenceType=xe,delete ie.url,delete ie.title}else delete ie.identifier,delete ie.label;this.data.referenceType=void 0}function ne(){const ie=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";ie.type+="Reference",ie.referenceType=xe,delete ie.url,delete ie.title}else delete ie.identifier,delete ie.label;this.data.referenceType=void 0}function Z(ie){const xe=this.sliceSerialize(ie),Ne=this.stack[this.stack.length-2];Ne.label=WD(xe),Ne.identifier=Mr(xe).toLowerCase()}function J(){const ie=this.stack[this.stack.length-1],xe=this.resume(),Ne=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ne.type==="link"){const Ve=ie.children;Ne.children=Ve}else Ne.alt=xe}function P(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.url=ie}function M(){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.title=ie}function U(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function te(ie){const xe=this.resume(),Ne=this.stack[this.stack.length-1];Ne.label=xe,Ne.identifier=Mr(this.sliceSerialize(ie)).toLowerCase(),this.data.referenceType="full"}function ce(ie){this.data.characterReferenceType=ie.type}function Ee(ie){const xe=this.sliceSerialize(ie),Ne=this.data.characterReferenceType;let Ve;Ne?(Ve=Ux(xe,Ne==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ve=Xf(xe);const ct=this.stack[this.stack.length-1];ct.value+=Ve}function Ue(ie){const xe=this.stack.pop();xe.position.end=Ba(ie.end)}function Te(ie){j.call(this,ie);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(ie)}function $e(ie){j.call(this,ie);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(ie)}function le(){return{type:"blockquote",children:[]}}function rt(){return{type:"code",lang:null,meta:null,value:""}}function at(){return{type:"inlineCode",value:""}}function wt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function R(){return{type:"emphasis",children:[]}}function ge(){return{type:"heading",depth:0,children:[]}}function oe(){return{type:"break"}}function K(){return{type:"html",value:""}}function W(){return{type:"image",title:null,url:"",alt:null}}function re(){return{type:"link",title:null,url:"",children:[]}}function ve(ie){return{type:"list",ordered:ie.type==="listOrdered",start:null,spread:ie._spread,children:[]}}function we(ie){return{type:"listItem",spread:ie._spread,checked:null,children:[]}}function de(){return{type:"paragraph",children:[]}}function Ce(){return{type:"strong",children:[]}}function Oe(){return{type:"text",value:""}}function _e(){return{type:"thematicBreak"}}}function Ba(e){return{line:e.line,column:e.column,offset:e.offset}}function Jx(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Jx(e,r):ZD(e,r)}}function ZD(e,t){let n;for(n in t)if(Qx.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function hy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+go({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+go({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+go({start:t.start,end:t.end})+") is still open")}function XD(e){const t=this;t.parser=n;function n(r){return KD(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function QD(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function JD(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function eR(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function tR(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nR(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function rR(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=ys(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,c=e.footnoteCounts.get(r);c===void 0?(c=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,c+=1,e.footnoteCounts.set(r,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,d);const p={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,p),e.applyData(t,p)}function aR(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iR(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function e0(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function sR(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return e0(e,t);const i={src:ys(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function oR(e,t){const n={src:ys(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function lR(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function cR(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return e0(e,t);const i={href:ys(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function uR(e,t){const n={href:ys(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function dR(e,t,n){const r=e.all(t),i=n?pR(n):t0(t),s={},o=[];if(typeof t.checked=="boolean"){const h=r[0];let m;h&&h.type==="element"&&h.tagName==="p"?m=h:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const h=r[c];(i||c!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?o.push(...h.children):o.push(h)}const d=r[r.length-1];d&&(i||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,p),e.applyData(t,p)}function pR(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=t0(n[r])}return t}function t0(e){const t=e.spread;return t??e.children.length>1}function fR(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function hR(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mR(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function gR(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bR(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},c=Wf(t.children[1]),d=Ox(t.children[t.children.length-1]);c&&d&&(o.position={start:c,end:d}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function yR(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,c=o?o.length:t.children.length;let d=-1;const p=[];for(;++d<c;){const m=t.children[d],g={},b=o?o[d]:void 0;b&&(g.align=b);let x={type:"element",tagName:s,properties:g,children:[]};m&&(x.children=e.all(m),e.patch(m,x),x=e.applyData(m,x)),p.push(x)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,h),e.applyData(t,h)}function vR(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const my=9,gy=32;function xR(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(by(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(by(t.slice(i),i>0,!1)),s.join("")}function by(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===my||s===gy;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===my||s===gy;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function wR(e,t){const n={type:"text",value:xR(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ER(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const kR={blockquote:QD,break:JD,code:eR,delete:tR,emphasis:nR,footnoteReference:rR,heading:aR,html:iR,imageReference:sR,image:oR,inlineCode:lR,linkReference:cR,link:uR,listItem:dR,list:fR,paragraph:hR,root:mR,strong:gR,table:bR,tableCell:vR,tableRow:yR,text:wR,thematicBreak:ER,toml:ac,yaml:ac,definition:ac,footnoteDefinition:ac};function ac(){}const n0=-1,eu=0,yo=1,Tc=2,Jf=3,eh=4,th=5,nh=6,r0=7,a0=8,yy=typeof self=="object"?self:globalThis,NR=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case eu:case n0:return n(o,i);case yo:{const c=n([],i);for(const d of o)c.push(r(d));return c}case Tc:{const c=n({},i);for(const[d,p]of o)c[r(d)]=r(p);return c}case Jf:return n(new Date(o),i);case eh:{const{source:c,flags:d}=o;return n(new RegExp(c,d),i)}case th:{const c=n(new Map,i);for(const[d,p]of o)c.set(r(d),r(p));return c}case nh:{const c=n(new Set,i);for(const d of o)c.add(r(d));return c}case r0:{const{name:c,message:d}=o;return n(new yy[c](d),i)}case a0:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return n(new DataView(c),o)}}return n(new yy[s](o),i)};return r},vy=e=>NR(new Map,e)(0),es="",{toString:SR}={},{keys:CR}=Object,lo=e=>{const t=typeof e;if(t!=="object"||!e)return[eu,t];const n=SR.call(e).slice(8,-1);switch(n){case"Array":return[yo,es];case"Object":return[Tc,es];case"Date":return[Jf,es];case"RegExp":return[eh,es];case"Map":return[th,es];case"Set":return[nh,es];case"DataView":return[yo,n]}return n.includes("Array")?[yo,n]:n.includes("Error")?[r0,n]:[Tc,n]},ic=([e,t])=>e===eu&&(t==="function"||t==="symbol"),_R=(e,t,n,r)=>{const i=(o,c)=>{const d=r.push(o)-1;return n.set(c,d),d},s=o=>{if(n.has(o))return n.get(o);let[c,d]=lo(o);switch(c){case eu:{let h=o;switch(d){case"bigint":c=a0,h=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);h=null;break;case"undefined":return i([n0],o)}return i([c,h],o)}case yo:{if(d){let g=o;return d==="DataView"?g=new Uint8Array(o.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(o)),i([d,[...g]],o)}const h=[],m=i([c,h],o);for(const g of o)h.push(s(g));return m}case Tc:{if(d)switch(d){case"BigInt":return i([d,o.toString()],o);case"Boolean":case"Number":case"String":return i([d,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const h=[],m=i([c,h],o);for(const g of CR(o))(e||!ic(lo(o[g])))&&h.push([s(g),s(o[g])]);return m}case Jf:return i([c,o.toISOString()],o);case eh:{const{source:h,flags:m}=o;return i([c,{source:h,flags:m}],o)}case th:{const h=[],m=i([c,h],o);for(const[g,b]of o)(e||!(ic(lo(g))||ic(lo(b))))&&h.push([s(g),s(b)]);return m}case nh:{const h=[],m=i([c,h],o);for(const g of o)(e||!ic(lo(g)))&&h.push(s(g));return m}}const{message:p}=o;return i([c,{name:d,message:p}],o)};return s},xy=(e,{json:t,lossy:n}={})=>{const r=[];return _R(!(t||n),!!t,new Map,r)(e),r},Dc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?vy(xy(e,t)):structuredClone(e):(e,t)=>vy(xy(e,t));function TR(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function DR(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function RR(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||TR,r=e.options.footnoteBackLabel||DR,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[d]);if(!p)continue;const h=e.all(p),m=String(p.identifier).toUpperCase(),g=ys(m.toLowerCase());let b=0;const x=[],v=e.footnoteCounts.get(m);for(;v!==void 0&&++b<=v;){x.length>0&&x.push({type:"text",value:" "});let C=typeof n=="string"?n:n(d,b);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,b),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const w=h[h.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const C=w.children[w.children.length-1];C&&C.type==="text"?C.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...x)}else h.push(...x);const k={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(h,!0)};e.patch(p,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Dc(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const Vo=(function(e){if(e==null)return OR;if(typeof e=="function")return tu(e);if(typeof e=="object")return Array.isArray(e)?AR(e):IR(e);if(typeof e=="string")return jR(e);throw new Error("Expected function, string, or object as test")});function AR(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Vo(e[n]);return tu(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function IR(e){const t=e;return tu(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function jR(e){return tu(t);function t(n){return n&&n.type===e}}function tu(e){return t;function t(n,r,i){return!!(MR(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function OR(){return!0}function MR(e){return e!==null&&typeof e=="object"&&"type"in e}const i0=[],FR=!0,af=!1,LR="skip";function s0(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Vo(i),o=r?-1:1;c(e,void 0,[])();function c(d,p,h){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const b=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(b?"<"+b+">":""))+")"})}return g;function g(){let b=i0,x,v,w;if((!t||s(d,p,h[h.length-1]||void 0))&&(b=PR(n(d,h)),b[0]===af))return b;if("children"in d&&d.children){const k=d;if(k.children&&b[0]!==LR)for(v=(r?k.children.length:-1)+o,w=h.concat(k);v>-1&&v<k.children.length;){const C=k.children[v];if(x=c(C,v,w)(),x[0]===af)return x;v=typeof x[1]=="number"?x[1]:v+o}}return b}}}function PR(e){return Array.isArray(e)?e:typeof e=="number"?[FR,e]:e==null?i0:[e]}function Wo(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),s0(e,s,c,i);function c(d,p){const h=p[p.length-1],m=h?h.children.indexOf(d):void 0;return o(d,m,h)}}const sf={}.hasOwnProperty,zR={};function $R(e,t){const n=t||zR,r=new Map,i=new Map,s=new Map,o={...kR,...n.handlers},c={all:p,applyData:UR,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:d,options:n,patch:BR,wrap:qR};return Wo(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const m=h.type==="definition"?r:i,g=String(h.identifier).toUpperCase();m.has(g)||m.set(g,h)}}),c;function d(h,m){const g=h.type,b=c.handlers[g];if(sf.call(c.handlers,g)&&b)return b(c,h,m);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in h){const{children:v,...w}=h,k=Dc(w);return k.children=c.all(h),k}return Dc(h)}return(c.options.unknownHandler||HR)(c,h,m)}function p(h){const m=[];if("children"in h){const g=h.children;let b=-1;for(;++b<g.length;){const x=c.one(g[b],h);if(x){if(b&&g[b-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=wy(x.value)),!Array.isArray(x)&&x.type==="element")){const v=x.children[0];v&&v.type==="text"&&(v.value=wy(v.value))}Array.isArray(x)?m.push(...x):m.push(x)}}}return m}}function BR(e,t){e.position&&(t.position=D2(e))}function UR(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Dc(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function HR(e,t){const n=t.data||{},r="value"in t&&!(sf.call(n,"hProperties")||sf.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qR(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function wy(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Ey(e,t){const n=$R(e,t),r=n.one(e,void 0),i=RR(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function VR(e,t){return e&&"run"in e?async function(n,r){const i=Ey(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Ey(n,{file:r,...e||t})}}function ky(e){if(e)throw e}var cp,Ny;function WR(){if(Ny)return cp;Ny=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},s=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var h=e.call(p,"constructor"),m=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!h&&!m)return!1;var g;for(g in p);return typeof g>"u"||e.call(p,g)},o=function(p,h){n&&h.name==="__proto__"?n(p,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):p[h.name]=h.newValue},c=function(p,h){if(h==="__proto__")if(e.call(p,h)){if(r)return r(p,h).value}else return;return p[h]};return cp=function d(){var p,h,m,g,b,x,v=arguments[0],w=1,k=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},w=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});w<k;++w)if(p=arguments[w],p!=null)for(h in p)m=c(v,h),g=c(p,h),v!==g&&(C&&g&&(s(g)||(b=i(g)))?(b?(b=!1,x=m&&i(m)?m:[]):x=m&&s(m)?m:{},o(v,{name:h,newValue:d(C,x,g)})):typeof g<"u"&&o(v,{name:h,newValue:g}));return v},cp}var GR=WR();const up=fs(GR);function of(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function KR(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...i);function c(d,...p){const h=e[++s];let m=-1;if(d){o(d);return}for(;++m<i.length;)(p[m]===null||p[m]===void 0)&&(p[m]=i[m]);i=p,h?YR(h,c)(...p):o(null,...p)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function YR(e,t){let n;return r;function r(...o){const c=e.length>o.length;let d;c&&o.push(i);try{d=e.apply(this,o)}catch(p){const h=p;if(c&&n)throw h;return i(h)}c||(d&&d.then&&typeof d.then=="function"?d.then(s,i):d instanceof Error?i(d):s(d))}function i(o,...c){n||(n=!0,t(o,...c))}function s(o){i(null,o)}}const Yr={basename:ZR,dirname:XR,extname:QR,join:JR,sep:"/"};function ZR(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Go(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,c=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),c>-1&&(e.codePointAt(i)===t.codePointAt(c--)?c<0&&(r=i):(c=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function XR(e){if(Go(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function QR(e){Go(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const c=e.codePointAt(t);if(c===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),c===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function JR(...e){let t=-1,n;for(;++t<e.length;)Go(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":eA(n)}function eA(e){Go(e);const t=e.codePointAt(0)===47;let n=tA(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function tA(e,t){let n="",r=0,i=-1,s=0,o=-1,c,d;for(;++o<=e.length;){if(o<e.length)c=e.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else c===46&&s>-1?s++:s=-1}return n}function Go(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const nA={cwd:rA};function rA(){return"/"}function lf(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function aA(e){if(typeof e=="string")e=new URL(e);else if(!lf(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return iA(e)}function iA(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const dp=["history","path","basename","stem","extname","dirname"];class o0{constructor(t){let n;t?lf(t)?n={path:t}:typeof t=="string"||sA(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":nA.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<dp.length;){const s=dp[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)dp.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Yr.basename(this.path):void 0}set basename(t){fp(t,"basename"),pp(t,"basename"),this.path=Yr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Yr.dirname(this.path):void 0}set dirname(t){Sy(this.basename,"dirname"),this.path=Yr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Yr.extname(this.path):void 0}set extname(t){if(pp(t,"extname"),Sy(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Yr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){lf(t)&&(t=aA(t)),fp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Yr.basename(this.path,this.extname):void 0}set stem(t){fp(t,"stem"),pp(t,"stem"),this.path=Yr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new zn(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function pp(e,t){if(e&&e.includes(Yr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Yr.sep+"`")}function fp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Sy(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function sA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const oA=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),lA={}.hasOwnProperty;class rh extends oA{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=KR()}copy(){const t=new rh;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(up(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(gp("data",this.frozen),this.namespace[t]=n,this):lA.call(this.namespace,t)&&this.namespace[t]||void 0:t?(gp("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=sc(t),r=this.parser||this.Parser;return hp("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),hp("process",this.parser||this.Parser),mp("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const c=sc(t),d=r.parse(c);r.run(d,c,function(h,m,g){if(h||!m||!g)return p(h);const b=m,x=r.stringify(b,g);dA(x)?g.value=x:g.result=x,p(h,g)});function p(h,m){h||!m?o(h):s?s(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),hp("processSync",this.parser||this.Parser),mp("processSync",this.compiler||this.Compiler),this.process(t,i),_y("processSync","process",n),r;function i(s,o){n=!0,ky(s),r=o}}run(t,n,r){Cy(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,c){const d=sc(n);i.run(t,d,p);function p(h,m,g){const b=m||t;h?c(h):o?o(b):r(void 0,b,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),_y("runSync","run",r),i;function s(o,c){ky(o),i=c,r=!0}}stringify(t,n){this.freeze();const r=sc(n),i=this.compiler||this.Compiler;return mp("stringify",i),Cy(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(gp("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(p){if(typeof p=="function")d(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[h,...m]=p;d(h,m)}else o(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function o(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(p.plugins),p.settings&&(i.settings=up(!0,i.settings,p.settings))}function c(p){let h=-1;if(p!=null)if(Array.isArray(p))for(;++h<p.length;){const m=p[h];s(m)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function d(p,h){let m=-1,g=-1;for(;++m<r.length;)if(r[m][0]===p){g=m;break}if(g===-1)r.push([p,...h]);else if(h.length>0){let[b,...x]=h;const v=r[g][1];of(v)&&of(b)&&(b=up(!0,v,b)),r[g]=[p,b,...x]}}}}const cA=new rh().freeze();function hp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function mp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function gp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Cy(e){if(!of(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function _y(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function sc(e){return uA(e)?e:new o0(e)}function uA(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function dA(e){return typeof e=="string"||pA(e)}function pA(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const fA="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ty=[],Dy={allowDangerousHtml:!0},hA=/^(https?|ircs?|mailto|xmpp)$/i,mA=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Ci(e){const t=gA(e),n=bA(e);return yA(t.runSync(t.parse(n),n),e)}function gA(e){const t=e.rehypePlugins||Ty,n=e.remarkPlugins||Ty,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Dy}:Dy;return cA().use(XD).use(n).use(VR,r).use(t)}function bA(e){const t=e.children||"",n=new o0;return typeof t=="string"&&(n.value=t),n}function yA(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,o=t.skipHtml,c=t.unwrapDisallowed,d=t.urlTransform||vA;for(const h of mA)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+fA+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Wo(e,p),O2(e,{Fragment:u.Fragment,components:i,ignoreInvalidStyle:!0,jsx:u.jsx,jsxs:u.jsxs,passKeys:!0,passNode:!0});function p(h,m,g){if(h.type==="raw"&&g&&typeof m=="number")return o?g.children.splice(m,1):g.children[m]={type:"text",value:h.value},m;if(h.type==="element"){let b;for(b in sp)if(Object.hasOwn(sp,b)&&Object.hasOwn(h.properties,b)){const x=h.properties[b],v=sp[b];(v===null||v.includes(h.tagName))&&(h.properties[b]=d(String(x||""),b,h))}}if(h.type==="element"){let b=n?!n.includes(h.tagName):s?s.includes(h.tagName):!1;if(!b&&r&&typeof m=="number"&&(b=!r(h,m,g)),b&&g&&typeof m=="number")return c&&h.children?g.children.splice(m,1,...h.children):g.children.splice(m,1),m}}}function vA(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||hA.test(e.slice(0,t))?e:""}function Ry(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function xA(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function wA(e,t,n){const i=Vo((n||{}).ignore||[]),s=EA(t);let o=-1;for(;++o<s.length;)s0(e,"text",c);function c(p,h){let m=-1,g;for(;++m<h.length;){const b=h[m],x=g?g.children:void 0;if(i(b,x?x.indexOf(b):void 0,g))return;g=b}if(g)return d(p,h)}function d(p,h){const m=h[h.length-1],g=s[o][0],b=s[o][1];let x=0;const w=m.children.indexOf(p);let k=!1,C=[];g.lastIndex=0;let T=g.exec(p.value);for(;T;){const D=T.index,I={index:T.index,input:T.input,stack:[...h,p]};let L=b(...T,I);if(typeof L=="string"&&(L=L.length>0?{type:"text",value:L}:void 0),L===!1?g.lastIndex=D+1:(x!==D&&C.push({type:"text",value:p.value.slice(x,D)}),Array.isArray(L)?C.push(...L):L&&C.push(L),x=D+T[0].length,k=!0),!g.global)break;T=g.exec(p.value)}return k?(x<p.value.length&&C.push({type:"text",value:p.value.slice(x)}),m.children.splice(w,1,...C)):C=[p],w+C.length}}function EA(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([kA(i[0]),NA(i[1])])}return t}function kA(e){return typeof e=="string"?new RegExp(xA(e),"g"):e}function NA(e){return typeof e=="function"?e:function(){return e}}const bp="phrasing",yp=["autolink","link","image","label"];function SA(){return{transforms:[IA],enter:{literalAutolink:_A,literalAutolinkEmail:vp,literalAutolinkHttp:vp,literalAutolinkWww:vp},exit:{literalAutolink:AA,literalAutolinkEmail:RA,literalAutolinkHttp:TA,literalAutolinkWww:DA}}}function CA(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bp,notInConstruct:yp},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bp,notInConstruct:yp},{character:":",before:"[ps]",after:"\\/",inConstruct:bp,notInConstruct:yp}]}}function _A(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function vp(e){this.config.enter.autolinkProtocol.call(this,e)}function TA(e){this.config.exit.autolinkProtocol.call(this,e)}function DA(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function RA(e){this.config.exit.autolinkEmail.call(this,e)}function AA(e){this.exit(e)}function IA(e){wA(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,jA],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),OA]],{ignore:["link","linkReference"]})}function jA(e,t,n,r,i){let s="";if(!l0(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!MA(n)))return!1;const o=FA(n+r);if(!o[0])return!1;const c={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function OA(e,t,n,r){return!l0(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function MA(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function FA(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Ry(e,"(");let s=Ry(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function l0(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ki(n)||Qc(n))&&(!t||n!==47)}c0.peek=VA;function LA(){this.buffer()}function PA(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function zA(){this.buffer()}function $A(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function BA(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function UA(e){this.exit(e)}function HA(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function qA(e){this.exit(e)}function VA(){return"["}function c0(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),c=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),c(),o(),s+=i.move("]"),s}function WA(){return{enter:{gfmFootnoteCallString:LA,gfmFootnoteCall:PA,gfmFootnoteDefinitionLabelString:zA,gfmFootnoteDefinition:$A},exit:{gfmFootnoteCallString:BA,gfmFootnoteCall:UA,gfmFootnoteDefinitionLabelString:HA,gfmFootnoteDefinition:qA}}}function GA(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:c0},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const c=s.createTracker(o);let d=c.move("[^");const p=s.enter("footnoteDefinition"),h=s.enter("label");return d+=c.move(s.safe(s.associationId(r),{before:d,after:"]"})),h(),d+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),d+=c.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,c.current()),t?u0:KA))),p(),d}}function KA(e,t,n){return t===0?e:u0(e,t,n)}function u0(e,t,n){return(n?"":"    ")+e}const YA=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];d0.peek=eI;function ZA(){return{canContainEols:["delete"],enter:{strikethrough:QA},exit:{strikethrough:JA}}}function XA(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:YA}],handlers:{delete:d0}}}function QA(e){this.enter({type:"delete",children:[]},e)}function JA(e){this.exit(e)}function d0(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function eI(){return"~"}function tI(e){return e.length}function nI(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||tI,s=[],o=[],c=[],d=[];let p=0,h=-1;for(;++h<e.length;){const v=[],w=[];let k=-1;for(e[h].length>p&&(p=e[h].length);++k<e[h].length;){const C=rI(e[h][k]);if(n.alignDelimiters!==!1){const T=i(C);w[k]=T,(d[k]===void 0||T>d[k])&&(d[k]=T)}v.push(C)}o[h]=v,c[h]=w}let m=-1;if(typeof r=="object"&&"length"in r)for(;++m<p;)s[m]=Ay(r[m]);else{const v=Ay(r);for(;++m<p;)s[m]=v}m=-1;const g=[],b=[];for(;++m<p;){const v=s[m];let w="",k="";v===99?(w=":",k=":"):v===108?w=":":v===114&&(k=":");let C=n.alignDelimiters===!1?1:Math.max(1,d[m]-w.length-k.length);const T=w+"-".repeat(C)+k;n.alignDelimiters!==!1&&(C=w.length+C+k.length,C>d[m]&&(d[m]=C),b[m]=C),g[m]=T}o.splice(1,0,g),c.splice(1,0,b),h=-1;const x=[];for(;++h<o.length;){const v=o[h],w=c[h];m=-1;const k=[];for(;++m<p;){const C=v[m]||"";let T="",D="";if(n.alignDelimiters!==!1){const I=d[m]-(w[m]||0),L=s[m];L===114?T=" ".repeat(I):L===99?I%2?(T=" ".repeat(I/2+.5),D=" ".repeat(I/2-.5)):(T=" ".repeat(I/2),D=T):D=" ".repeat(I)}n.delimiterStart!==!1&&!m&&k.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||m)&&k.push(" "),n.alignDelimiters!==!1&&k.push(T),k.push(C),n.alignDelimiters!==!1&&k.push(D),n.padding!==!1&&k.push(" "),(n.delimiterEnd!==!1||m!==p-1)&&k.push("|")}x.push(n.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return x.join(`
`)}function rI(e){return e==null?"":String(e)}function Ay(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function aI(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),iI);return i(),o}function iI(e,t,n){return">"+(n?"":" ")+e}function sI(e,t){return Iy(e,t.inConstruct,!0)&&!Iy(e,t.notInConstruct,!1)}function Iy(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function jy(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&sI(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function oI(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+t.length,r=n.indexOf(t,i);return o}function lI(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function cI(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function uI(e,t,n,r){const i=cI(n),s=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(lI(e,n)){const m=n.enter("codeIndented"),g=n.indentLines(s,dI);return m(),g}const c=n.createTracker(r),d=i.repeat(Math.max(oI(s,i)+1,3)),p=n.enter("codeFenced");let h=c.move(d);if(e.lang){const m=n.enter(`codeFencedLang${o}`);h+=c.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...c.current()})),m()}if(e.lang&&e.meta){const m=n.enter(`codeFencedMeta${o}`);h+=c.move(" "),h+=c.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...c.current()})),m()}return h+=c.move(`
`),s&&(h+=c.move(s+`
`)),h+=c.move(d),p(),h}function dI(e,t,n){return(n?"":"    ")+e}function ah(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function pI(e,t,n,r){const i=ah(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let c=n.enter("label");const d=n.createTracker(r);let p=d.move("[");return p+=d.move(n.safe(n.associationId(e),{before:p,after:"]",...d.current()})),p+=d.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),p+=d.move("<"),p+=d.move(n.safe(e.url,{before:p,after:">",...d.current()})),p+=d.move(">")):(c=n.enter("destinationRaw"),p+=d.move(n.safe(e.url,{before:p,after:e.title?" ":`
`,...d.current()}))),c(),e.title&&(c=n.enter(`title${s}`),p+=d.move(" "+i),p+=d.move(n.safe(e.title,{before:p,after:i,...d.current()})),p+=d.move(i),c()),o(),p}function fI(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Ro(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Rc(e,t,n){const r=ps(e),i=ps(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}p0.peek=hI;function p0(e,t,n,r){const i=fI(n),s=n.enter("emphasis"),o=n.createTracker(r),c=o.move(i);let d=o.move(n.containerPhrasing(e,{after:i,before:c,...o.current()}));const p=d.charCodeAt(0),h=Rc(r.before.charCodeAt(r.before.length-1),p,i);h.inside&&(d=Ro(p)+d.slice(1));const m=d.charCodeAt(d.length-1),g=Rc(r.after.charCodeAt(0),m,i);g.inside&&(d=d.slice(0,-1)+Ro(m));const b=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:h.outside},c+d+b}function hI(e,t,n){return n.options.emphasis||"*"}function mI(e,t){let n=!1;return Wo(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,af}),!!((!e.depth||e.depth<3)&&Zf(e)&&(t.options.setext||n))}function gI(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(mI(e,n)){const h=n.enter("headingSetext"),m=n.enter("phrasing"),g=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return m(),h(),g+`
`+(i===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}const o="#".repeat(i),c=n.enter("headingAtx"),d=n.enter("phrasing");s.move(o+" ");let p=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(p)&&(p=Ro(p.charCodeAt(0))+p.slice(1)),p=p?o+" "+p:o,n.options.closeAtx&&(p+=" "+o),d(),c(),p}f0.peek=bI;function f0(e){return e.value||""}function bI(){return"<"}h0.peek=yI;function h0(e,t,n,r){const i=ah(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let c=n.enter("label");const d=n.createTracker(r);let p=d.move("![");return p+=d.move(n.safe(e.alt,{before:p,after:"]",...d.current()})),p+=d.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),p+=d.move("<"),p+=d.move(n.safe(e.url,{before:p,after:">",...d.current()})),p+=d.move(">")):(c=n.enter("destinationRaw"),p+=d.move(n.safe(e.url,{before:p,after:e.title?" ":")",...d.current()}))),c(),e.title&&(c=n.enter(`title${s}`),p+=d.move(" "+i),p+=d.move(n.safe(e.title,{before:p,after:i,...d.current()})),p+=d.move(i),c()),p+=d.move(")"),o(),p}function yI(){return"!"}m0.peek=vI;function m0(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const c=n.createTracker(r);let d=c.move("![");const p=n.safe(e.alt,{before:d,after:"]",...c.current()});d+=c.move(p+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return o(),n.stack=h,s(),i==="full"||!p||p!==m?d+=c.move(m+"]"):i==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function vI(){return"!"}g0.peek=xI;function g0(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],c=n.compilePattern(o);let d;if(o.atBreak)for(;d=c.exec(r);){let p=d.index;r.charCodeAt(p)===10&&r.charCodeAt(p-1)===13&&p--,r=r.slice(0,p)+" "+r.slice(d.index+1)}}return i+r+i}function xI(){return"`"}function b0(e,t){const n=Zf(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}y0.peek=wI;function y0(e,t,n,r){const i=ah(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let c,d;if(b0(e,n)){const h=n.stack;n.stack=[],c=n.enter("autolink");let m=o.move("<");return m+=o.move(n.containerPhrasing(e,{before:m,after:">",...o.current()})),m+=o.move(">"),c(),n.stack=h,m}c=n.enter("link"),d=n.enter("label");let p=o.move("[");return p+=o.move(n.containerPhrasing(e,{before:p,after:"](",...o.current()})),p+=o.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=o.move("<"),p+=o.move(n.safe(e.url,{before:p,after:">",...o.current()})),p+=o.move(">")):(d=n.enter("destinationRaw"),p+=o.move(n.safe(e.url,{before:p,after:e.title?" ":")",...o.current()}))),d(),e.title&&(d=n.enter(`title${s}`),p+=o.move(" "+i),p+=o.move(n.safe(e.title,{before:p,after:i,...o.current()})),p+=o.move(i),d()),p+=o.move(")"),c(),p}function wI(e,t,n){return b0(e,n)?"<":"["}v0.peek=EI;function v0(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const c=n.createTracker(r);let d=c.move("[");const p=n.containerPhrasing(e,{before:d,after:"]",...c.current()});d+=c.move(p+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return o(),n.stack=h,s(),i==="full"||!p||p!==m?d+=c.move(m+"]"):i==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function EI(){return"["}function ih(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function kI(e){const t=ih(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function NI(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function x0(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function SI(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?NI(n):ih(n);const c=e.ordered?o==="."?")":".":kI(n);let d=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),x0(n)===o&&h){let m=-1;for(;++m<e.children.length;){const g=e.children[m];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(o=c),n.bulletCurrent=o;const p=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),p}function CI(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function _I(e,t,n,r){const i=CI(n);let s=n.bulletCurrent||ih(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const c=n.createTracker(r);c.move(s+" ".repeat(o-s.length)),c.shift(o);const d=n.enter("listItem"),p=n.indentLines(n.containerFlow(e,c.current()),h);return d(),p;function h(m,g,b){return g?(b?"":" ".repeat(o))+m:(b?s:s+" ".repeat(o-s.length))+m}}function TI(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),i(),o}const DI=Vo(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function RI(e,t,n,r){return(e.children.some(function(o){return DI(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function AI(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}w0.peek=II;function w0(e,t,n,r){const i=AI(n),s=n.enter("strong"),o=n.createTracker(r),c=o.move(i+i);let d=o.move(n.containerPhrasing(e,{after:i,before:c,...o.current()}));const p=d.charCodeAt(0),h=Rc(r.before.charCodeAt(r.before.length-1),p,i);h.inside&&(d=Ro(p)+d.slice(1));const m=d.charCodeAt(d.length-1),g=Rc(r.after.charCodeAt(0),m,i);g.inside&&(d=d.slice(0,-1)+Ro(m));const b=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:g.outside,before:h.outside},c+d+b}function II(e,t,n){return n.options.strong||"*"}function jI(e,t,n,r){return n.safe(e.value,r)}function OI(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function MI(e,t,n){const r=(x0(n)+(n.options.ruleSpaces?" ":"")).repeat(OI(n));return n.options.ruleSpaces?r.slice(0,-1):r}const E0={blockquote:aI,break:jy,code:uI,definition:pI,emphasis:p0,hardBreak:jy,heading:gI,html:f0,image:h0,imageReference:m0,inlineCode:g0,link:y0,linkReference:v0,list:SI,listItem:_I,paragraph:TI,root:RI,strong:w0,text:jI,thematicBreak:MI};function FI(){return{enter:{table:LI,tableData:Oy,tableHeader:Oy,tableRow:zI},exit:{codeText:$I,table:PI,tableData:xp,tableHeader:xp,tableRow:xp}}}function LI(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function PI(e){this.exit(e),this.data.inTable=void 0}function zI(e){this.enter({type:"tableRow",children:[]},e)}function xp(e){this.exit(e)}function Oy(e){this.enter({type:"tableCell",children:[]},e)}function $I(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,BI));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function BI(e,t){return t==="|"?t:e}function UI(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:o,tableCell:d,tableRow:c}};function o(b,x,v,w){return p(h(b,v,w),b.align)}function c(b,x,v,w){const k=m(b,v,w),C=p([k]);return C.slice(0,C.indexOf(`
`))}function d(b,x,v,w){const k=v.enter("tableCell"),C=v.enter("phrasing"),T=v.containerPhrasing(b,{...w,before:s,after:s});return C(),k(),T}function p(b,x){return nI(b,{align:x,alignDelimiters:r,padding:n,stringLength:i})}function h(b,x,v){const w=b.children;let k=-1;const C=[],T=x.enter("table");for(;++k<w.length;)C[k]=m(w[k],x,v);return T(),C}function m(b,x,v){const w=b.children;let k=-1;const C=[],T=x.enter("tableRow");for(;++k<w.length;)C[k]=d(w[k],b,x,v);return T(),C}function g(b,x,v){let w=E0.inlineCode(b,x,v);return v.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function HI(){return{exit:{taskListCheckValueChecked:My,taskListCheckValueUnchecked:My,paragraph:VI}}}function qI(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:WI}}}function My(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function VI(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,o;for(;++s<i.length;){const c=i[s];if(c.type==="paragraph"){o=c;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function WI(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",c=n.createTracker(r);s&&c.move(o);let d=E0.listItem(e,t,n,{...r,...c.current()});return s&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),d;function p(h){return h+o}}function GI(){return[SA(),WA(),ZA(),FI(),HI()]}function KI(e){return{extensions:[CA(),GA(e),XA(),UI(e),qI()]}}const YI={tokenize:tj,partial:!0},k0={tokenize:nj,partial:!0},N0={tokenize:rj,partial:!0},S0={tokenize:aj,partial:!0},ZI={tokenize:ij,partial:!0},C0={name:"wwwAutolink",tokenize:JI,previous:T0},_0={name:"protocolAutolink",tokenize:ej,previous:D0},va={name:"emailAutolink",tokenize:QI,previous:R0},ea={};function XI(){return{text:ea}}let mi=48;for(;mi<123;)ea[mi]=va,mi++,mi===58?mi=65:mi===91&&(mi=97);ea[43]=va;ea[45]=va;ea[46]=va;ea[95]=va;ea[72]=[va,_0];ea[104]=[va,_0];ea[87]=[va,C0];ea[119]=[va,C0];function QI(e,t,n){const r=this;let i,s;return o;function o(m){return!cf(m)||!R0.call(r,r.previous)||sh(r.events)?n(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(m))}function c(m){return cf(m)?(e.consume(m),c):m===64?(e.consume(m),d):n(m)}function d(m){return m===46?e.check(ZI,h,p)(m):m===45||m===95||Pn(m)?(s=!0,e.consume(m),d):h(m)}function p(m){return e.consume(m),i=!0,d}function h(m){return s&&i&&Wn(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):n(m)}}function JI(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!T0.call(r,r.previous)||sh(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(YI,e.attempt(k0,e.attempt(N0,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function ej(e,t,n){const r=this;let i="",s=!1;return o;function o(m){return(m===72||m===104)&&D0.call(r,r.previous)&&!sh(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(m),e.consume(m),c):n(m)}function c(m){if(Wn(m)&&i.length<5)return i+=String.fromCodePoint(m),e.consume(m),c;if(m===58){const g=i.toLowerCase();if(g==="http"||g==="https")return e.consume(m),d}return n(m)}function d(m){return m===47?(e.consume(m),s?p:(s=!0,d)):n(m)}function p(m){return m===null||_c(m)||Vt(m)||ki(m)||Qc(m)?n(m):e.attempt(k0,e.attempt(N0,h),n)(m)}function h(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function tj(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function nj(e,t,n){let r,i,s;return o;function o(p){return p===46||p===95?e.check(S0,d,c)(p):p===null||Vt(p)||ki(p)||p!==45&&Qc(p)?d(p):(s=!0,e.consume(p),o)}function c(p){return p===95?r=!0:(i=r,r=void 0),e.consume(p),o}function d(p){return i||r||!s?n(p):t(p)}}function rj(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(S0,t,s)(o):o===null||Vt(o)||ki(o)?t(o):(e.consume(o),i)}function s(o){return o===41&&r++,e.consume(o),i}}function aj(e,t,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),r):c===38?(e.consume(c),s):c===93?(e.consume(c),i):c===60||c===null||Vt(c)||ki(c)?t(c):n(c)}function i(c){return c===null||c===40||c===91||Vt(c)||ki(c)?t(c):r(c)}function s(c){return Wn(c)?o(c):n(c)}function o(c){return c===59?(e.consume(c),r):Wn(c)?(e.consume(c),o):n(c)}}function ij(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return Pn(s)?n(s):t(s)}}function T0(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Vt(e)}function D0(e){return!Wn(e)}function R0(e){return!(e===47||cf(e))}function cf(e){return e===43||e===45||e===46||e===95||Pn(e)}function sh(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const sj={tokenize:hj,partial:!0};function oj(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:dj,continuation:{tokenize:pj},exit:fj}},text:{91:{name:"gfmFootnoteCall",tokenize:uj},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:lj,resolveTo:cj}}}}function lj(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const d=r.events[i][1];if(d.type==="labelImage"){o=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return c;function c(d){if(!o||!o._balanced)return n(d);const p=Mr(r.sliceSerialize({start:o.end,end:r.now()}));return p.codePointAt(0)!==94||!s.includes(p.slice(1))?n(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function cj(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},c=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...c),e}function uj(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return c;function c(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),d}function d(m){return m!==94?n(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(m){if(s>999||m===93&&!o||m===null||m===91||Vt(m))return n(m);if(m===93){e.exit("chunkString");const g=e.exit("gfmFootnoteCallString");return i.includes(Mr(r.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(m)}return Vt(m)||(o=!0),s++,e.consume(m),m===92?h:p}function h(m){return m===91||m===92||m===93?(e.consume(m),s++,p):p(m)}}function dj(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,c;return d;function d(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(x)}function h(x){if(o>999||x===93&&!c||x===null||x===91||Vt(x))return n(x);if(x===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=Mr(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return Vt(x)||(c=!0),o++,e.consume(x),x===92?m:h}function m(x){return x===91||x===92||x===93?(e.consume(x),o++,h):h(x)}function g(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),i.includes(s)||i.push(s),At(e,b,"gfmFootnoteDefinitionWhitespace")):n(x)}function b(x){return t(x)}}function pj(e,t,n){return e.check(qo,t,e.attempt(sj,t,n))}function fj(e){e.exit("gfmFootnoteDefinition")}function hj(e,t,n){const r=this;return At(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function mj(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,c){let d=-1;for(;++d<o.length;)if(o[d][0]==="enter"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._close){let p=d;for(;p--;)if(o[p][0]==="exit"&&o[p][1].type==="strikethroughSequenceTemporary"&&o[p][1]._open&&o[d][1].end.offset-o[d][1].start.offset===o[p][1].end.offset-o[p][1].start.offset){o[d][1].type="strikethroughSequence",o[p][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[p][1].start),end:Object.assign({},o[d][1].end)},m={type:"strikethroughText",start:Object.assign({},o[p][1].end),end:Object.assign({},o[d][1].start)},g=[["enter",h,c],["enter",o[p][1],c],["exit",o[p][1],c],["enter",m,c]],b=c.parser.constructs.insideSpan.null;b&&hr(g,g.length,0,Jc(b,o.slice(p+1,d),c)),hr(g,g.length,0,[["exit",m,c],["enter",o[d][1],c],["exit",o[d][1],c],["exit",h,c]]),hr(o,p-1,d-p+3,g),d=p+g.length-2;break}}for(d=-1;++d<o.length;)o[d][1].type==="strikethroughSequenceTemporary"&&(o[d][1].type="data");return o}function s(o,c,d){const p=this.previous,h=this.events;let m=0;return g;function g(x){return p===126&&h[h.length-1][1].type!=="characterEscape"?d(x):(o.enter("strikethroughSequenceTemporary"),b(x))}function b(x){const v=ps(p);if(x===126)return m>1?d(x):(o.consume(x),m++,b);if(m<2&&!n)return d(x);const w=o.exit("strikethroughSequenceTemporary"),k=ps(x);return w._open=!k||k===2&&!!v,w._close=!v||v===2&&!!k,c(x)}}}class gj{constructor(){this.map=[]}add(t,n,r){bj(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function bj(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function yj(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function vj(){return{flow:{null:{name:"table",tokenize:xj,resolveAll:wj}}}}function xj(e,t,n){const r=this;let i=0,s=0,o;return c;function c(j){let q=r.events.length-1;for(;q>-1;){const _=r.events[q][1].type;if(_==="lineEnding"||_==="linePrefix")q--;else break}const F=q>-1?r.events[q][1].type:null,G=F==="tableHead"||F==="tableRow"?L:d;return G===L&&r.parser.lazy[r.now().line]?n(j):G(j)}function d(j){return e.enter("tableHead"),e.enter("tableRow"),p(j)}function p(j){return j===124||(o=!0,s+=1),h(j)}function h(j){return j===null?n(j):ot(j)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),b):n(j):kt(j)?At(e,h,"whitespace")(j):(s+=1,o&&(o=!1,i+=1),j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),o=!0,h):(e.enter("data"),m(j)))}function m(j){return j===null||j===124||Vt(j)?(e.exit("data"),h(j)):(e.consume(j),j===92?g:m)}function g(j){return j===92||j===124?(e.consume(j),m):m(j)}function b(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(j):(e.enter("tableDelimiterRow"),o=!1,kt(j)?At(e,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):x(j))}function x(j){return j===45||j===58?w(j):j===124?(o=!0,e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),v):I(j)}function v(j){return kt(j)?At(e,w,"whitespace")(j):w(j)}function w(j){return j===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),k):j===45?(s+=1,k(j)):j===null||ot(j)?D(j):I(j)}function k(j){return j===45?(e.enter("tableDelimiterFiller"),C(j)):I(j)}function C(j){return j===45?(e.consume(j),C):j===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(j),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T(j))}function T(j){return kt(j)?At(e,D,"whitespace")(j):D(j)}function D(j){return j===124?x(j):j===null||ot(j)?!o||i!==s?I(j):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(j)):I(j)}function I(j){return n(j)}function L(j){return e.enter("tableRow"),O(j)}function O(j){return j===124?(e.enter("tableCellDivider"),e.consume(j),e.exit("tableCellDivider"),O):j===null||ot(j)?(e.exit("tableRow"),t(j)):kt(j)?At(e,O,"whitespace")(j):(e.enter("data"),B(j))}function B(j){return j===null||j===124||Vt(j)?(e.exit("data"),O(j)):(e.consume(j),j===92?z:B)}function z(j){return j===92||j===124?(e.consume(j),B):B(j)}}function wj(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],c=!1,d=0,p,h,m;const g=new gj;for(;++n<e.length;){const b=e[n],x=b[1];b[0]==="enter"?x.type==="tableHead"?(c=!1,d!==0&&(Fy(g,t,d,p,h),h=void 0,d=0),p={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",p,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,m=void 0,s=[0,0,0,0],o=[0,n+1,0,0],c&&(c=!1,h={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},g.add(n,0,[["enter",h,t]])),i=x.type==="tableDelimiterRow"?2:h?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],m=oc(g,t,s,i,void 0,m),s=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],m=oc(g,t,s,i,void 0,m)),s=o,o=[s[1],n,0,0])):x.type==="tableHead"?(c=!0,d=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(d=n,s[1]!==0?(o[0]=o[1],m=oc(g,t,s,i,n,m)):o[1]!==0&&(m=oc(g,t,o,i,n,m)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(d!==0&&Fy(g,t,d,p,h),g.consume(t.events),n=-1;++n<t.events.length;){const b=t.events[n];b[0]==="enter"&&b[1].type==="table"&&(b[1]._align=yj(t.events,n))}return e}function oc(e,t,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(s.end=Object.assign({},ns(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const d=ns(t.events,n[1]);if(s={type:o,start:Object.assign({},d),end:Object.assign({},d)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const p=ns(t.events,n[2]),h=ns(t.events,n[3]),m={type:c,start:Object.assign({},p),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",m,t]]),r!==2){const g=t.events[n[2]],b=t.events[n[3]];if(g[1].end=Object.assign({},b[1].end),g[1].type="chunkText",g[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,v=n[3]-n[2]-1;e.add(x,v,[])}}e.add(n[3]+1,0,[["exit",m,t]])}return i!==void 0&&(s.end=Object.assign({},ns(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function Fy(e,t,n,r,i){const s=[],o=ns(t.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function ns(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Ej={name:"tasklistCheck",tokenize:Nj};function kj(){return{text:{91:Ej}}}function Nj(e,t,n){const r=this;return i;function i(d){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),s)}function s(d){return Vt(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),o):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),o):n(d)}function o(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):n(d)}function c(d){return ot(d)?t(d):kt(d)?e.check({tokenize:Sj},t,n)(d):n(d)}}function Sj(e,t,n){return At(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function Cj(e){return Bx([XI(),oj(),mj(e),vj(),kj()])}const _j={};function _i(e){const t=this,n=e||_j,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Cj(n)),s.push(GI()),o.push(KI(n))}const Tj={root:zN,table_roll:Zr,template_roll:Ya,template_ref:Ya,entry_select:VN,expression:qv,dice_roll:NN,math_eval:Sf,variable_access:Kc,placeholder_access:yN,conditional:DN,multi_roll:$N,instance:Bo,composite_select:Uo,collection_merge:kN,capture_multi_roll:$o,capture_access:Rf,collect:Vc},Dj={root:"text-primary",table_roll:"text-amber-400",template_roll:"text-blue-400",template_ref:"text-blue-300",entry_select:"text-green-400",expression:"text-gray-400",dice_roll:"text-purple-400",math_eval:"text-cyan-400",variable_access:"text-pink-400",placeholder_access:"text-orange-400",conditional:"text-red-400",multi_roll:"text-indigo-400",instance:"text-teal-400",composite_select:"text-yellow-400",collection_merge:"text-lime-400",capture_multi_roll:"text-rose-400",capture_access:"text-sky-400",collect:"text-emerald-400"};function A0(e){const t=[e.id];for(const n of e.children)t.push(...A0(n));return t}const oh=N.memo(function({trace:t,onClose:n}){const[r,i]=N.useState(new Set([t.root.id])),[s,o]=N.useState(null),c=N.useCallback(m=>{i(g=>{const b=new Set(g);return b.has(m)?b.delete(m):b.add(m),b})},[]),d=N.useCallback(m=>{o(g=>g===m?null:m)},[]),p=N.useCallback(()=>{const m=A0(t.root);i(new Set(m))},[t.root]),h=N.useCallback(()=>{i(new Set([t.root.id]))},[t.root.id]);return u.jsxs("div",{className:"border border-border/50 rounded-xl bg-background/50 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-muted/30",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Po,{className:"w-4 h-4 text-primary"}),u.jsx("span",{className:"font-medium",children:"Execution Trace"}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.stats.nodeCount," ops, ",t.totalTime,"ms)"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:p,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Expand All"}),u.jsx("button",{onClick:h,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Collapse"}),u.jsx("button",{onClick:n,className:"p-1 hover:bg-accent rounded transition-colors",children:u.jsx(cn,{className:"w-4 h-4"})})]})]}),u.jsx("div",{className:"max-h-[400px] overflow-auto p-2",children:u.jsx(Rj,{node:t.root,depth:0,expandedNodes:r,onToggle:c,selectedNodeId:s,onSelect:d})}),u.jsx("div",{className:"px-4 py-2 border-t border-border/50 bg-muted/30 text-xs text-muted-foreground",children:u.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.stats.diceRolled>0&&u.jsxs("span",{children:["Dice: ",t.stats.diceRolled]}),t.stats.tablesAccessed.length>0&&u.jsxs("span",{children:["Tables: ",t.stats.tablesAccessed.length]}),t.stats.variablesAccessed.length>0&&u.jsxs("span",{children:["Variables: ",t.stats.variablesAccessed.length]}),u.jsxs("span",{children:["Depth: ",t.stats.maxDepth]})]})})]})}),Rj=N.memo(function e({node:t,depth:n,expandedNodes:r,onToggle:i,selectedNodeId:s,onSelect:o}){var x,v;const c=r.has(t.id),d=s===t.id,p=t.children.length>0,h=Tj[t.type],m=Dj[t.type],g=w=>{w.stopPropagation(),o(t.id)},b=w=>{w.stopPropagation(),p&&i(t.id)};return u.jsxs("div",{style:{marginLeft:n*16},children:[u.jsxs("div",{className:`
          flex items-center gap-2 py-1 px-2 rounded cursor-pointer
          hover:bg-accent transition-colors
          ${d?"bg-primary/10 border-l-2 border-primary":""}
        `,onClick:g,children:[p?u.jsx(rr,{className:`w-3 h-3 transition-transform flex-shrink-0 hover:text-primary ${c?"rotate-90":""}`,onClick:b}):u.jsx("span",{className:"w-3 flex-shrink-0"}),u.jsx(h,{className:`w-4 h-4 flex-shrink-0 ${m}`}),u.jsx("span",{className:"text-sm font-mono truncate",title:t.label,children:t.label}),t.output.value&&u.jsxs("span",{className:"text-xs text-muted-foreground ml-auto truncate max-w-[300px]",title:String(t.output.value),children:[""," ",t.type==="dice_roll"&&((x=t.metadata)==null?void 0:x.type)==="dice"?u.jsxs("span",{children:[u.jsxs("span",{className:"text-purple-400",children:["[",t.metadata.rolls.join(", "),"]"]}),t.metadata.kept.length!==t.metadata.rolls.length&&u.jsxs("span",{className:"text-green-400",children:[" keep [",t.metadata.kept.join(", "),"]"]}),u.jsxs("span",{children:[" = ",t.output.value]})]}):String(t.output.value)]}),t.duration!==void 0&&t.duration>0&&u.jsxs("span",{className:"text-xs text-muted-foreground/50 flex-shrink-0",children:[t.duration,"ms"]})]}),d&&u.jsxs("div",{style:{marginLeft:20},className:"mt-1 mb-2 p-3 bg-muted/50 rounded-lg text-xs space-y-2 border border-border/50",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground font-medium",children:"Label: "}),u.jsx("span",{className:"font-mono break-all",children:t.label})]}),t.output.value&&u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground font-medium",children:"Output: "}),t.type==="dice_roll"&&((v=t.metadata)==null?void 0:v.type)==="dice"?u.jsxs("span",{className:"font-mono",children:[u.jsxs("span",{className:"text-purple-400",children:["[",t.metadata.rolls.join(", "),"]"]}),t.metadata.kept.length!==t.metadata.rolls.length&&u.jsxs("span",{className:"text-green-400",children:[" keep [",t.metadata.kept.join(", "),"]"]}),t.metadata.modifier&&u.jsxs("span",{className:"text-cyan-400",children:[" ",t.metadata.modifier.operator,t.metadata.modifier.value]}),u.jsxs("span",{children:[" = ",t.output.value]})]}):u.jsx("span",{className:"font-mono break-all",children:String(t.output.value)})]}),t.input.raw&&u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground font-medium",children:"Input: "}),u.jsx("span",{className:"font-mono break-all",children:t.input.raw})]}),t.type&&u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground font-medium",children:"Type: "}),u.jsx("span",{className:m,children:t.type})]})]}),c&&u.jsxs(u.Fragment,{children:[u.jsx(Aj,{node:t,depth:n}),t.children.map(w=>u.jsx(e,{node:w,depth:n+1,expandedNodes:r,onToggle:i,selectedNodeId:s,onSelect:o},w.id))]})]})}),Aj=N.memo(function({node:t,depth:n}){if(!t.metadata)return null;const r=(n+1)*16+12;switch(t.metadata.type){case"dice":return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 font-mono text-muted-foreground",children:[u.jsxs("span",{className:"text-purple-400/70",children:["[",t.metadata.rolls.join(", "),"]"]}),t.metadata.kept.length!==t.metadata.rolls.length&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),u.jsxs("span",{className:"text-green-400/70",children:["keep [",t.metadata.kept.join(", "),"]"]})]}),t.metadata.modifier&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),u.jsxs("span",{children:[t.metadata.kept.reduce((s,o)=>s+o,0)," ",t.metadata.modifier.operator," ",t.metadata.modifier.value]})]}),u.jsxs("span",{className:"text-muted-foreground/70 ml-1",children:["= ",t.metadata.kept.reduce((s,o)=>s+o,0),t.metadata.modifier&&(t.metadata.modifier.operator==="+"?t.metadata.kept.reduce((s,o)=>s+o,0)+t.metadata.modifier.value:t.metadata.modifier.operator==="-"?t.metadata.kept.reduce((s,o)=>s+o,0)-t.metadata.modifier.value:t.metadata.kept.reduce((s,o)=>s+o,0)*t.metadata.modifier.value)!==t.output.value&&` = ${t.output.value}`]})]});case"entry_select":const i=(t.metadata.probability*100).toFixed(1);return u.jsx("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground space-y-0.5",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{children:["Weight: ",t.metadata.selectedWeight,"/",t.metadata.totalWeight]}),u.jsx("span",{className:"text-muted-foreground/50",children:"|"}),u.jsxs("span",{children:[i,"% chance"]}),u.jsx("span",{className:"text-muted-foreground/50",children:"|"}),u.jsxs("span",{children:[t.metadata.poolSize," entries"]}),t.metadata.unique&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground/50",children:"|"}),u.jsx("span",{className:"text-amber-400/70",children:"unique"})]})]})});case"variable":return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[u.jsxs("span",{className:"text-pink-400/70",children:["$",t.metadata.name]}),u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),u.jsxs("span",{children:['"',t.output.value,'"']}),u.jsxs("span",{className:"text-muted-foreground/50 ml-2",children:["(",t.metadata.source,")"]})]});case"placeholder":return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[u.jsxs("span",{className:"text-orange-400/70",children:["@",t.metadata.name,t.metadata.property&&`.${t.metadata.property}`]}),u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),u.jsx("span",{children:t.metadata.found?`"${t.output.value}"`:"(not found)"})]});case"conditional":return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[u.jsx("span",{className:"text-red-400/70",children:"when:"}),u.jsx("span",{className:"ml-1",children:t.metadata.when}),u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),u.jsx("span",{className:t.metadata.matched?"text-green-400":"text-red-400/50",children:t.metadata.matched?"matched":"not matched"}),t.metadata.matched&&t.metadata.action&&u.jsxs("span",{className:"text-muted-foreground/70 ml-1",children:["(",t.metadata.action,")"]})]});case"composite_select":{const s=t.metadata;return u.jsx("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.sources.map((o,c)=>u.jsxs("span",{children:[u.jsx("span",{className:o.tableId===s.selectedTableId?"text-yellow-400":"",children:o.tableId}),u.jsxs("span",{className:"text-muted-foreground/50",children:["(",(o.probability*100).toFixed(0),"%)"]}),c<s.sources.length-1&&u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"|"})]},o.tableId))})})}case"multi_roll":return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[u.jsxs("span",{children:[t.metadata.count,"x ",t.metadata.tableId]}),t.metadata.unique&&u.jsx("span",{className:"text-amber-400/70 ml-2",children:"unique"}),u.jsxs("span",{className:"text-muted-foreground/50 ml-2",children:['(sep: "',t.metadata.separator,'")']})]});case"instance":return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[u.jsxs("span",{className:"text-teal-400/70",children:["#",t.metadata.name]}),u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),u.jsx("span",{children:t.metadata.cached?"(cached)":"(new roll)"})]});case"collection_merge":return u.jsx("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:u.jsxs("span",{children:[t.metadata.sourceTables.length," tables, ",t.metadata.totalEntries," entries, weight: ",t.metadata.totalWeight]})});case"capture_multi_roll":{const s=t.metadata;return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsxs("span",{className:"text-rose-400/70",children:["$",s.captureVar]}),u.jsx("span",{className:"text-muted-foreground/50",children:"="}),u.jsxs("span",{children:[s.count,"x ",s.tableId]}),s.unique&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground/50",children:"|"}),u.jsx("span",{className:"text-amber-400/70",children:"unique"})]}),s.silent&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground/50",children:"|"}),u.jsx("span",{className:"text-muted-foreground/50",children:"silent"})]})]}),s.capturedItems.length>0&&u.jsxs("div",{className:"pl-2 border-l border-border/50",children:[s.capturedItems.slice(0,5).map((o,c)=>u.jsxs("div",{className:"truncate",children:[u.jsxs("span",{className:"text-muted-foreground/50",children:["[",c,"]"]}),u.jsxs("span",{className:"ml-1",children:['"',o.value,'"']}),Object.keys(o.sets).length>0&&u.jsxs("span",{className:"text-muted-foreground/50 ml-1",children:["(",Object.keys(o.sets).join(", "),")"]})]},c)),s.capturedItems.length>5&&u.jsxs("div",{className:"text-muted-foreground/50",children:["... +",s.capturedItems.length-5," more"]})]})]})}case"capture_access":{const s=t.metadata;return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[u.jsxs("span",{className:"text-sky-400/70",children:["$",s.varName]}),s.index!==void 0&&u.jsxs("span",{className:"text-sky-400/70",children:["[",s.index,"]"]}),s.property&&s.property!=="value"&&u.jsxs("span",{className:"text-sky-400/70",children:[".",s.property]}),u.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),u.jsx("span",{children:s.found?`"${t.output.value}"`:"(not found)"}),s.totalItems!==void 0&&u.jsxs("span",{className:"text-muted-foreground/50 ml-2",children:["(",s.totalItems," items)"]})]})}case"collect":{const s=t.metadata;return u.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[u.jsxs("span",{className:"text-emerald-400/70",children:["collect: $",s.varName,".",s.property]}),s.unique&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground/50",children:"|"}),u.jsx("span",{className:"text-amber-400/70",children:"unique"})]}),u.jsxs("span",{className:"text-muted-foreground/50",children:['(sep: "',s.separator,'")']})]}),u.jsxs("div",{className:"pl-2 border-l border-border/50",children:[u.jsx("span",{className:"text-muted-foreground/50",children:"values: "}),u.jsxs("span",{children:["[",s.allValues.slice(0,10).map(o=>`"${o}"`).join(", "),"]"]}),s.allValues.length>10&&u.jsxs("span",{className:"text-muted-foreground/50",children:[" +",s.allValues.length-10," more"]}),s.unique&&s.resultValues.length!==s.allValues.length&&u.jsxs("div",{children:[u.jsx("span",{className:"text-muted-foreground/50",children:" deduped: "}),u.jsxs("span",{children:["[",s.resultValues.slice(0,10).map(o=>`"${o}"`).join(", "),"]"]})]})]})]})}default:return null}}),I0=N.memo(function({captures:t,onClose:n}){const[r,i]=N.useState(new Set(Object.keys(t))),s=c=>{i(d=>{const p=new Set(d);return p.has(c)?p.delete(c):p.add(c),p})},o=Object.keys(t);return u.jsxs("div",{className:"border border-border/50 rounded-xl bg-background/50 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-muted/30",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx($o,{className:"w-4 h-4 text-rose-400"}),u.jsx("span",{className:"font-medium",children:"Capture Variables"}),u.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",o.length," variable",o.length!==1?"s":"",")"]})]}),u.jsx("button",{onClick:n,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Close"})]}),u.jsx("div",{className:"max-h-[300px] overflow-auto p-2 space-y-1",children:o.map(c=>u.jsx(Ij,{name:c,variable:t[c],isExpanded:r.has(c),onToggle:()=>s(c)},c))})]})}),Ij=N.memo(function({name:t,variable:n,isExpanded:r,onToggle:i}){return u.jsxs("div",{className:"rounded-lg border border-border/30 overflow-hidden",children:[u.jsxs("button",{onClick:i,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-accent transition-colors text-left",children:[u.jsx(rr,{className:`w-3 h-3 transition-transform flex-shrink-0 ${r?"rotate-90":""}`}),u.jsxs("span",{className:"text-rose-400 font-mono text-sm",children:["$",t]}),u.jsxs("span",{className:"text-xs text-muted-foreground ml-auto flex items-center gap-1",children:[u.jsx(Bo,{className:"w-3 h-3"}),n.count," item",n.count!==1?"s":""]})]}),r&&u.jsx("div",{className:"px-3 pb-3 space-y-2",children:n.items.map((s,o)=>u.jsx(jj,{item:s,index:o},o))})]})}),jj=N.memo(function({item:t,index:n}){const[r,i]=N.useState(!1),s=Object.keys(t.sets);return u.jsx("div",{className:"pl-4 border-l-2 border-border/50",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsxs("span",{className:"text-sky-400/70 font-mono text-xs flex-shrink-0",children:["[",n,"]"]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"text-sm font-mono truncate",title:t.value,children:['"',t.value,'"']}),s.length>0&&u.jsxs("button",{onClick:()=>i(!r),className:"text-xs text-muted-foreground hover:text-foreground mt-1 flex items-center gap-1",children:[u.jsx(Rf,{className:"w-3 h-3"}),r?"Hide":"Show"," ",s.length," set",s.length!==1?"s":""]}),r&&s.length>0&&u.jsx("div",{className:"mt-2 space-y-1 text-xs",children:s.map(o=>u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsxs("span",{className:"text-orange-400/70",children:["@",o,":"]}),u.jsxs("span",{className:"text-muted-foreground truncate",title:t.sets[o],children:['"',t.sets[o],'"']})]},o))})]})]})})}),Oj=N.memo(function({result:t,itemName:n,isRolling:r,error:i,onReroll:s,onShowDescriptions:o}){const[c,d]=N.useState(!1),[p,h]=N.useState(!1),[m,g]=N.useState(!1),b=(t==null?void 0:t.captures)&&Object.keys(t.captures).length>0,x=b?Object.keys(t.captures).length:0,v=(t==null?void 0:t.descriptions)&&t.descriptions.length>0,w=v?t.descriptions.length:0,k=N.useCallback(async()=>{if(t!=null&&t.text)try{await navigator.clipboard.writeText(t.text),g(!0),setTimeout(()=>g(!1),2e3)}catch(C){console.error("Failed to copy:",C)}},[t==null?void 0:t.text]);return i?u.jsx("div",{className:"mx-4 mt-4 p-4 rounded-xl border border-destructive/20 bg-destructive/5",children:u.jsx("p",{className:"text-destructive text-center",children:i})}):t?u.jsxs("div",{className:"mx-4 mt-4 p-5 rounded-xl card-elevated card-mint border animate-slide-up",children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"icon-container icon-mint",children:u.jsx(ma,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-lg",children:"Result"}),n&&u.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("button",{className:`p-2.5 rounded-xl transition-colors ${m?"text-green-500":"hover:bg-accent"}`,title:m?"Copied!":"Copy to clipboard",onClick:k,children:m?u.jsx(ga,{className:"h-5 w-5"}):u.jsx(Cf,{className:"h-5 w-5"})}),u.jsx("button",{className:"p-2.5 rounded-xl hover:bg-accent transition-colors",title:"Re-roll",onClick:s,disabled:r,children:u.jsx(Mf,{className:`h-5 w-5 ${r?"animate-spin":""}`})})]})]}),u.jsx("div",{className:"prose-roll overflow-x-auto",children:u.jsx(Ci,{remarkPlugins:[_i],children:t.text})}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[v&&u.jsxs("button",{onClick:()=>o(t.descriptions,n||void 0),className:"text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all text-amber-400 border-amber-400/40 bg-amber-400/10 hover:bg-amber-400/20",children:[u.jsx(Pr,{className:"w-4 h-4"}),"View Descriptions",u.jsxs("span",{className:"text-amber-300/60 text-xs",children:["(",w,")"]})]}),t.trace&&u.jsxs("button",{onClick:()=>d(!c),className:`
              text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all
              ${c?"text-primary border-primary/40 bg-primary/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"}
            `,children:[u.jsx(Po,{className:"w-4 h-4"}),c?"Hide":"Show"," Trace",u.jsxs("span",{className:"text-muted-foreground/60 text-xs",children:["(",t.trace.stats.nodeCount," ops)"]})]}),c&&b&&u.jsxs("button",{onClick:()=>h(!p),className:`
              text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all
              ${p?"text-rose-400 border-rose-400/40 bg-rose-400/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"}
            `,children:[u.jsx($o,{className:"w-4 h-4"}),p?"Hide":"Show"," Captures",u.jsxs("span",{className:"text-muted-foreground/60 text-xs",children:["(",x," var",x!==1?"s":"",")"]})]})]}),c&&t.trace&&u.jsx("div",{className:"mt-4",children:u.jsx(oh,{trace:t.trace,onClose:()=>d(!1)})}),c&&p&&b&&u.jsx("div",{className:"mt-4",children:u.jsx(I0,{captures:t.captures,onClose:()=>h(!1)})})]}):null}),Mj=N.memo(function({history:t,currentRollId:n,onPin:r,onDelete:i,onClearHistory:s,onShowDescriptions:o}){const[c,d]=N.useState(new Set),p=N.useMemo(()=>(n?t.filter(b=>b.id!==n):t).slice(0,50),[t,n]),h=n?t.filter(g=>g.id!==n).length:t.length;N.useEffect(()=>{const g=new Set(t.map(b=>b.id));d(b=>{const x=new Set([...b].filter(v=>g.has(v)));return x.size!==b.size?x:b})},[t]);const m=N.useCallback(g=>{d(b=>{const x=new Set(b);return x.has(g)?x.delete(g):x.add(g),x})},[]);return u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/5 flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"icon-container icon-lavender p-1.5",children:u.jsx(gb,{className:"h-4 w-4"})}),u.jsx("h2",{className:"text-lg font-semibold",children:"History"}),u.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",h,")"]})]}),h>0&&u.jsx("button",{onClick:()=>s(!0),className:"text-xs px-2.5 py-1.5 rounded-lg hover:bg-white/5 text-muted-foreground hover:text-foreground transition-colors",children:"Clear (keep pinned)"})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:p.length>0?p.map((g,b)=>{var x;return u.jsxs("div",{className:me("p-4 rounded-xl border transition-all duration-300 animate-slide-up",g.pinned?"border-primary/30 card-elevated card-mint":"border-white/5 hover:border-white/10 bg-white/[0.02]"),style:{animationDelay:`${b*.02}s`},children:[u.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[u.jsx("div",{className:"flex-1 min-w-0",children:u.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[u.jsx("span",{children:w_(g.timestamp)}),(g.tableId||g.templateId)&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-white/20",children:""}),u.jsx("span",{className:"truncate",children:g.tableId||g.templateId})]})]})}),u.jsxs("div",{className:"flex gap-1 shrink-0",children:[u.jsx("button",{onClick:()=>r(g.id,!g.pinned),className:me("p-1.5 rounded-lg transition-all",g.pinned?"text-primary bg-primary/10":"hover:bg-white/5 text-muted-foreground hover:text-foreground"),title:g.pinned?"Unpin":"Pin",children:g.pinned?u.jsx(LN,{className:"h-4 w-4"}):u.jsx(PN,{className:"h-4 w-4"})}),u.jsx("button",{onClick:()=>i(g.id),className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors text-muted-foreground hover:text-destructive",title:"Delete",children:u.jsx(zr,{className:"h-4 w-4"})})]})]}),u.jsx("div",{className:"prose-roll text-foreground/90 overflow-x-auto",children:u.jsx(Ci,{remarkPlugins:[_i],children:g.result.text})}),(((x=g.result.descriptions)==null?void 0:x.length)||g.result.trace)&&u.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[g.result.descriptions&&g.result.descriptions.length>0&&u.jsxs("button",{onClick:()=>o(g.result.descriptions,g.tableId||g.templateId||void 0),className:"text-xs flex items-center gap-1.5 px-2.5 py-1 rounded-lg border transition-all text-amber-400 border-amber-400/40 bg-amber-400/10 hover:bg-amber-400/20",children:[u.jsx(Pr,{className:"w-3.5 h-3.5"}),"View Descriptions",u.jsxs("span",{className:"text-amber-300/60",children:["(",g.result.descriptions.length,")"]})]}),g.result.trace&&u.jsxs("button",{onClick:()=>m(g.id),className:me("text-xs flex items-center gap-1.5 px-2.5 py-1 rounded-lg border transition-all",c.has(g.id)?"text-primary border-primary/40 bg-primary/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"),children:[u.jsx(Po,{className:"w-3.5 h-3.5"}),c.has(g.id)?"Hide":"Show"," Trace",u.jsxs("span",{className:"text-muted-foreground/60",children:["(",g.result.trace.stats.nodeCount," ops)"]})]})]}),c.has(g.id)&&g.result.trace&&u.jsx("div",{className:"mt-3",children:u.jsx(oh,{trace:g.result.trace,onClose:()=>m(g.id)})})]},g.id)}):u.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center mb-4",children:u.jsx(gb,{className:"h-6 w-6 text-muted-foreground/50"})}),u.jsx("p",{className:"text-muted-foreground",children:"Your roll history will appear here"})]})})]})}),Fj=N.memo(function({descriptions:t,isOpen:n,onClose:r,sourceLabel:i}){const[s,o]=N.useState(()=>new Set),c=N.useRef(null);N.useEffect(()=>{t&&t.length===1?o(new Set([0])):o(new Set)},[t]),N.useEffect(()=>{if(!n)return;const b=x=>{x.key==="Escape"&&r()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n,r]),N.useEffect(()=>{n&&c.current&&c.current.focus()},[n]);const d=N.useCallback(b=>{o(x=>{const v=new Set(x);return v.has(b)?v.delete(b):v.add(b),v})},[]),p=N.useCallback(()=>{t&&o(new Set(t.map((b,x)=>x)))},[t]),h=N.useCallback(()=>{o(new Set)},[]),m=t?s.size===t.length:!1,g=s.size===0;return!t||t.length===0?null:u.jsxs(u.Fragment,{children:[u.jsx("div",{className:me("fixed inset-0 z-40 bg-black/40 backdrop-blur-sm transition-opacity duration-300",n?"opacity-100":"opacity-0 pointer-events-none"),onClick:r,"aria-hidden":"true"}),u.jsx("div",{ref:c,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":"Descriptions",className:me("fixed top-0 right-0 z-50 h-full w-full sm:w-[420px] max-w-full","transform transition-transform duration-300 ease-out","outline-none",n?"translate-x-0":"translate-x-full"),children:u.jsxs("div",{className:me("h-full flex flex-col overflow-hidden","border-l","dark:border-amber-900/30","dark:bg-gradient-to-b dark:from-stone-900 dark:via-stone-900 dark:to-stone-950","dark:shadow-[-8px_0_32px_rgba(0,0,0,0.5)]","border-amber-300","bg-[#fef7ed]","shadow-[-8px_0_32px_rgba(0,0,0,0.15)]","before:absolute before:inset-0 before:opacity-[0.02] before:pointer-events-none","before:bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIGZpbGw9IiNmZmYiLz48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiBmaWxsPSIjMDAwIi8+PC9zdmc+')]"),children:[u.jsxs("div",{className:me("flex items-center justify-between px-4 py-3 flex-shrink-0","border-b","dark:border-amber-900/20","dark:bg-gradient-to-r dark:from-amber-950/40 dark:via-transparent dark:to-amber-950/40","border-amber-200","bg-amber-100"),children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:me("p-2 rounded-lg","dark:bg-amber-500/10 dark:border-amber-500/20","dark:shadow-[0_0_12px_rgba(245,158,11,0.15)]","bg-amber-500/20 border border-amber-500/30","shadow-[0_0_12px_rgba(245,158,11,0.1)]"),children:u.jsx(Pr,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),u.jsxs("div",{children:[u.jsx("h2",{className:me("text-base font-semibold tracking-wide","text-amber-900 dark:text-amber-100/90"),children:"Descriptions"}),u.jsxs("p",{className:"text-[11px] text-amber-700/60 dark:text-amber-200/40 font-medium tracking-wider uppercase",children:[t.length," ",t.length===1?"entry":"entries",i&&u.jsxs("span",{className:"ml-1.5",children:["from ",i]})]})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[t.length>1&&u.jsxs("button",{onClick:m?h:p,className:me("flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs","text-amber-700/50 hover:text-amber-700/80 dark:text-amber-200/50 dark:hover:text-amber-200/80","hover:bg-amber-500/10 transition-colors duration-200"),title:m?"Collapse all":"Expand all",children:[m||g?u.jsx(Hv,{className:"w-4 h-4"}):u.jsx(Uv,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:m?"Collapse":"Expand"})]}),u.jsx("button",{onClick:r,className:me("p-2 rounded-lg","text-amber-700/40 hover:text-amber-700/80 dark:text-amber-200/40 dark:hover:text-amber-200/80","hover:bg-amber-500/10 transition-colors duration-200"),title:"Close (Esc)",children:u.jsx(cn,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-2 scroll-smooth",children:t.map((b,x)=>u.jsx(Lj,{description:b,isExpanded:s.has(x),onToggle:()=>d(x),index:x},`${b.tableId}-${x}`))})]})})]})}),Lj=N.memo(function({description:t,isExpanded:n,onToggle:r,index:i}){const[s,o]=N.useState(!1),c=N.useCallback(async d=>{d.stopPropagation();try{await navigator.clipboard.writeText(t.description),o(!0),setTimeout(()=>o(!1),2e3)}catch(p){console.error("Failed to copy:",p)}},[t.description]);return u.jsxs("div",{className:me("rounded-lg overflow-hidden transition-all duration-300","border",n?"dark:border-amber-600/30 dark:bg-gradient-to-br dark:from-amber-950/50 dark:to-stone-900/80 border-amber-300 bg-amber-50":"dark:border-stone-700/40 dark:bg-stone-800/50 dark:hover:bg-stone-800/70 dark:hover:border-stone-600/50 border-amber-200 bg-white hover:bg-amber-50 hover:border-amber-300"),style:{animationDelay:`${i*50}ms`},children:[u.jsxs("button",{onClick:r,className:me("w-full flex items-start gap-3 px-3 py-2.5 text-left","transition-colors duration-200"),children:[u.jsx(rr,{className:me("w-4 h-4 mt-0.5 flex-shrink-0 transition-transform duration-300",n?"rotate-90 text-amber-600 dark:text-amber-400":"text-amber-400 dark:text-stone-500")}),u.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:u.jsx("span",{className:me("inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold","tracking-wider uppercase","dark:bg-amber-500/15 dark:text-amber-300/80 dark:border-amber-500/20","bg-amber-500/20 text-amber-700 border border-amber-500/30"),children:t.tableName})}),u.jsx("p",{className:me("text-sm leading-snug",n?"text-amber-900 dark:text-stone-100":"text-amber-800 dark:text-stone-300",!n&&"line-clamp-2"),children:t.rolledValue})]})]}),u.jsx("div",{className:me("grid transition-all duration-300 ease-out",n?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:u.jsx("div",{className:"overflow-hidden",children:u.jsxs("div",{className:me("px-3 pb-3 pt-1 ml-7","border-l-2 border-amber-500/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-amber-500/30 to-transparent"}),u.jsx("span",{className:"text-amber-600/50 dark:text-amber-500/40 text-[10px] font-serif italic",children:"lore"}),u.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-amber-500/30 to-transparent"}),u.jsx("button",{onClick:c,className:me("p-1 rounded transition-colors duration-200",s?"text-green-500 dark:text-green-400":"text-amber-400 hover:text-amber-600 dark:text-stone-500 dark:hover:text-amber-300 hover:bg-amber-500/10"),title:s?"Copied!":"Copy description",children:s?u.jsx(ga,{className:"w-3.5 h-3.5"}):u.jsx(Vv,{className:"w-3.5 h-3.5"})})]}),u.jsx("div",{className:"prose-description text-[13px]",children:u.jsx(Ci,{remarkPlugins:[_i],children:t.description})})]})})})]})}),Pj=N.memo(function({selectedItem:t,currentResult:n,isRolling:r,rollError:i,canRoll:s,history:o,onRoll:c,onPin:d,onDelete:p,onClearHistory:h}){const[m,g]=N.useState(null),b=N.useCallback((w,k)=>{g({descriptions:w,sourceLabel:k})},[]),x=N.useCallback(()=>{g(null)},[]),v=N.useMemo(()=>{if(!n||o.length===0)return null;const w=o[0];return(w==null?void 0:w.result.text)===n.text&&w.id!=null?w.id:null},[n,o]);return u.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(i2,{selectedItem:t,isRolling:r,canRoll:s,onRoll:c})}),u.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto",children:[u.jsx(Oj,{result:n,itemName:(t==null?void 0:t.name)||null,isRolling:r,error:i,onReroll:c,onShowDescriptions:b}),u.jsx(Mj,{history:o,currentRollId:v,onPin:d,onDelete:p,onClearHistory:h,onShowDescriptions:b})]}),u.jsx(Fj,{descriptions:(m==null?void 0:m.descriptions)||null,isOpen:m!==null,onClose:x,sourceLabel:m==null?void 0:m.sourceLabel})]})});function zj({item:e,onClose:t,onRoll:n}){const[r,i]=N.useState(5),[s,o]=N.useState(!1),[c,d]=N.useState([]),[p,h]=N.useState(!1),m=N.useRef(null);N.useEffect(()=>{var v,w;(v=m.current)==null||v.focus(),(w=m.current)==null||w.select()},[]),N.useEffect(()=>{const v=w=>{w.key==="Escape"&&t()};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[t]);const g=N.useCallback(async()=>{if(!(s||r<1)){o(!0),d([]);try{const v=await n(r);d(v)}finally{o(!1)}}},[r,s,n]),b=N.useCallback(async()=>{if(c.length!==0)try{await navigator.clipboard.writeText(c.join(`

`)),h(!0),setTimeout(()=>h(!1),2e3)}catch(v){console.error("Failed to copy:",v)}},[c]),x=v=>{v.key==="Enter"&&!s&&g()};return nr.createPortal(u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:u.jsxs("div",{className:me("bg-background border border-border rounded-lg shadow-xl","w-full max-w-lg mx-4 max-h-[80vh] flex flex-col","animate-fade-in"),onClick:v=>v.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Bo,{className:"w-5 h-5 text-primary"}),u.jsx("h2",{className:"text-lg font-semibold",children:"Roll Multiple"})]}),u.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-accent text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:u.jsx(cn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[u.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Roll on ",u.jsx("span",{className:"font-medium text-foreground",children:e.name})," multiple times."]}),u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("label",{htmlFor:"roll-count",className:"text-sm font-medium",children:"Number of rolls:"}),u.jsx("input",{ref:m,id:"roll-count",type:"number",min:1,max:100,value:r,onChange:v=>i(Math.min(100,Math.max(1,parseInt(v.target.value)||1))),onKeyDown:x,className:me("w-20 px-3 py-1.5 rounded-md border border-border bg-background","text-sm text-center","focus:outline-none focus:ring-2 focus:ring-primary/50")}),u.jsx("button",{onClick:g,disabled:s||r<1,className:me("px-4 py-1.5 rounded-md text-sm font-medium","bg-primary text-primary-foreground","hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed","flex items-center gap-2"),children:s?u.jsxs(u.Fragment,{children:[u.jsx(ba,{className:"w-4 h-4 animate-spin"}),"Rolling..."]}):"Roll"})]}),c.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[c.length," results"]}),u.jsx("button",{onClick:b,className:me("flex items-center gap-1.5 px-2 py-1 rounded text-xs","hover:bg-accent transition-colors",p?"text-green-500":"text-muted-foreground"),children:p?u.jsxs(u.Fragment,{children:[u.jsx(ga,{className:"w-3.5 h-3.5"}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(Cf,{className:"w-3.5 h-3.5"}),"Copy All"]})})]}),u.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-auto",children:c.map((v,w)=>u.jsxs("div",{className:me("p-3 rounded-md bg-muted/50 border border-border/50","text-sm"),children:[u.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:[w+1,"."]}),v]},w))})]})]}),u.jsx("div",{className:"px-4 py-3 border-t border-border flex justify-end",children:u.jsx("button",{onClick:t,className:me("px-4 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:"Close"})})]})}),document.body)}function $j({item:e,collectionId:t,onClose:n}){const r=an(h=>h.getTableList),i=an(h=>h.getTemplateList),s=an(h=>h.getCollection),o=N.useMemo(()=>e.type==="template"?i(t).find(m=>m.id===e.id):r(t).find(m=>m.id===e.id),[e,t,r,i]),c=N.useMemo(()=>s(t),[t,s]);N.useEffect(()=>{const h=m=>{m.key==="Escape"&&n()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n]);const d=e.type!=="template",p=d&&o&&"type"in o?o.type:"simple";return nr.createPortal(u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:n,children:u.jsxs("div",{className:me("bg-background border border-border rounded-lg shadow-xl","w-full max-w-md mx-4 max-h-[80vh] flex flex-col","animate-fade-in"),onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ei,{className:"w-5 h-5 text-primary"}),u.jsx("h2",{className:"text-lg font-semibold",children:"Details"})]}),u.jsx("button",{onClick:n,className:"p-1.5 rounded-md hover:bg-accent text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:u.jsx(cn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4 flex-1 overflow-auto space-y-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Hf,{type:e.type==="template"?"template":p||"simple",className:"w-6 h-6 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-lg font-semibold",children:e.name}),u.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:e.type==="template"?"Template":`${p||"Simple"} Table`})]}),e.hidden&&u.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:[u.jsx(Co,{className:"w-3 h-3"}),"Hidden"]})]}),e.description&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[u.jsx(Ya,{className:"w-3.5 h-3.5"}),"Description"]}),u.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:e.description})]}),e.tags&&e.tags.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[u.jsx(qN,{className:"w-3.5 h-3.5"}),"Tags"]}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.tags.map(h=>u.jsx("span",{className:"px-2 py-1 text-xs rounded-md bg-primary/10 text-primary",children:h},h))})]}),d&&e.entryCount!==void 0&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[u.jsx(Bo,{className:"w-3.5 h-3.5"}),"Entries"]}),u.jsx("span",{className:"text-sm",children:e.entryCount})]}),c&&u.jsxs("div",{className:"pt-2 border-t border-border/50",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:[u.jsx(Uo,{className:"w-3.5 h-3.5"}),"Collection"]}),u.jsx("p",{className:"text-sm",children:c.name}),c.namespace&&u.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-0.5",children:c.namespace})]})]}),u.jsx("div",{className:"px-4 py-3 border-t border-border flex justify-end",children:u.jsx("button",{onClick:n,className:me("px-4 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:"Close"})})]})}),document.body)}N.memo(function({descriptions:t,onClose:n}){const[r,i]=N.useState(()=>t.length===1?new Set([0]):new Set),s=N.useCallback(h=>{i(m=>{const g=new Set(m);return g.has(h)?g.delete(h):g.add(h),g})},[]),o=N.useCallback(()=>{i(new Set(t.map((h,m)=>m)))},[t]),c=N.useCallback(()=>{i(new Set)},[]),d=r.size===t.length,p=r.size===0;return u.jsxs("div",{className:me("relative overflow-hidden rounded-xl","border border-amber-900/30","bg-gradient-to-b from-stone-900/95 via-stone-900/90 to-stone-950/95","shadow-[0_4px_24px_rgba(0,0,0,0.4),inset_0_1px_0_rgba(255,255,255,0.03)]","before:absolute before:inset-0 before:opacity-[0.015] before:pointer-events-none","before:bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIGZpbGw9IiNmZmYiLz48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiBmaWxsPSIjMDAwIi8+PC9zdmc+')]"),children:[u.jsxs("div",{className:me("flex items-center justify-between px-4 py-3","border-b border-amber-900/20","bg-gradient-to-r from-amber-950/40 via-transparent to-amber-950/40"),children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:me("p-1.5 rounded-lg","bg-amber-500/10 border border-amber-500/20","shadow-[0_0_12px_rgba(245,158,11,0.15)]"),children:u.jsx(Pr,{className:"w-4 h-4 text-amber-400"})}),u.jsxs("div",{children:[u.jsx("h3",{className:me("text-sm font-semibold tracking-wide","text-amber-100/90"),children:"Descriptions"}),u.jsxs("p",{className:"text-[10px] text-amber-200/40 font-medium tracking-wider uppercase",children:[t.length," ",t.length===1?"entry":"entries"]})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsxs("button",{onClick:d?c:o,className:me("flex items-center gap-1.5 px-2 py-1 rounded-md text-xs","text-amber-200/50 hover:text-amber-200/80","hover:bg-amber-500/10 transition-colors duration-200"),title:d?"Collapse all":"Expand all",children:[d||p?u.jsx(Hv,{className:"w-3.5 h-3.5"}):u.jsx(Uv,{className:"w-3.5 h-3.5"}),u.jsx("span",{className:"hidden sm:inline",children:d?"Collapse":"Expand"})]}),u.jsx("button",{onClick:n,className:me("p-1.5 rounded-md","text-amber-200/40 hover:text-amber-200/80","hover:bg-amber-500/10 transition-colors duration-200"),title:"Close",children:u.jsx(cn,{className:"w-4 h-4"})})]})]}),u.jsx("div",{className:"max-h-[400px] overflow-auto p-3 space-y-2 scroll-smooth",children:t.map((h,m)=>u.jsx(Bj,{description:h,isExpanded:r.has(m),onToggle:()=>s(m),index:m},`${h.tableId}-${m}`))})]})});const Bj=N.memo(function({description:t,isExpanded:n,onToggle:r,index:i}){return u.jsxs("div",{className:me("rounded-lg overflow-hidden transition-all duration-300","border",n?"border-amber-600/30 bg-gradient-to-br from-amber-950/40 to-stone-950/60":"border-stone-700/30 bg-stone-800/30 hover:bg-stone-800/50 hover:border-stone-600/40"),style:{animationDelay:`${i*50}ms`},children:[u.jsxs("button",{onClick:r,className:me("w-full flex items-start gap-3 px-3 py-2.5 text-left","transition-colors duration-200"),children:[u.jsx(rr,{className:me("w-4 h-4 mt-0.5 flex-shrink-0 transition-transform duration-300",n?"rotate-90 text-amber-400":"text-stone-500")}),u.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[u.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:u.jsx("span",{className:me("inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold","tracking-wider uppercase","bg-amber-500/15 text-amber-300/80 border border-amber-500/20"),children:t.tableName})}),u.jsx("p",{className:me("text-sm leading-snug",n?"text-stone-100":"text-stone-300",!n&&"line-clamp-2"),children:t.rolledValue})]})]}),u.jsx("div",{className:me("grid transition-all duration-300 ease-out",n?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:u.jsx("div",{className:"overflow-hidden",children:u.jsxs("div",{className:me("px-3 pb-3 pt-1 ml-7","border-l-2 border-amber-500/30"),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-amber-500/30 to-transparent"}),u.jsx("span",{className:"text-amber-500/40 text-[10px] font-serif italic",children:"lore"}),u.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-amber-500/30 to-transparent"})]}),u.jsx("div",{className:me("prose prose-sm prose-invert max-w-none","prose-p:text-stone-300 prose-p:leading-relaxed prose-p:my-2","prose-strong:text-amber-200 prose-strong:font-semibold","prose-em:text-stone-200 prose-em:font-serif prose-em:not-italic","prose-ul:my-2 prose-li:text-stone-300 prose-li:marker:text-amber-500/50","prose-ol:my-2","prose-headings:text-amber-100 prose-headings:font-medium","prose-a:text-amber-400 prose-a:no-underline hover:prose-a:underline","prose-blockquote:border-l-amber-500/40 prose-blockquote:bg-stone-800/30","prose-blockquote:text-stone-400 prose-blockquote:not-italic prose-blockquote:py-1","prose-code:text-amber-300 prose-code:bg-stone-800/50 prose-code:px-1 prose-code:rounded","prose-pre:bg-stone-900/80 prose-pre:border prose-pre:border-stone-700/50","[&_p:first-child]:mt-0 [&_p:last-child]:mb-0","text-[13px]"),children:u.jsx(Ci,{remarkPlugins:[_i],children:t.description})})]})})})]})});function Ly(){const[e]=fN(),t=hs(),n=e.get("collection")||void 0;Nx();const r=Ft(Z=>Z.setExpandedCollectionId),i=Ft(Z=>Z.setEditorActiveTab),s=Ft(Z=>Z.setEditorSelectedItemId);N.useEffect(()=>{n&&r(n)},[n,r]);const[o,c]=N.useState(null),[d,p]=N.useState(null),[h,m]=N.useState(null),{currentResult:g,isRolling:b,rollError:x,history:v,rollOnTable:w,rollOnTemplate:k,pinResult:C,deleteHistoryItem:T,clearHistory:D}=E_(n),I=an(Z=>Z.getTableList),L=an(Z=>Z.getTemplateList),O=N.useMemo(()=>{if(!o)return null;const{item:Z,collectionId:J}=o;if(Z.type==="template"){const M=L(J).find(U=>U.id===Z.id);if(M)return{id:M.id,name:M.name,type:"template",description:M.description,tags:M.tags}}else{const M=I(J).find(U=>U.id===Z.id);if(M)return{id:M.id,name:M.name,type:"table",tableType:M.type,description:M.description,tags:M.tags,hidden:M.hidden,entryCount:M.entryCount}}return Z},[o,I,L]),B=o!==null,z=N.useCallback(async()=>{if(!B||b||!o)return;const{item:Z,collectionId:J}=o;Z.type==="template"?await k(J,Z.id):await w(J,Z.id)},[B,b,o,w,k]),j=N.useCallback((Z,J)=>{c({item:Z,collectionId:J})},[]),q=N.useCallback(async(Z,J)=>{c({item:Z,collectionId:J}),Z.type==="template"?await k(J,Z.id):await w(J,Z.id)},[w,k]),F=N.useCallback((Z,J)=>{i(Z.type==="template"?"templates":"tables"),s(Z.id),t(`/editor/${J}`)},[t,i,s]),G=N.useCallback(async(Z,J)=>{c({item:Z,collectionId:J});let P;if(Z.type==="template"?P=await k(J,Z.id):P=await w(J,Z.id),P!=null&&P.text)try{await navigator.clipboard.writeText(P.text)}catch(M){console.error("Failed to copy to clipboard:",M)}},[w,k]),_=N.useCallback((Z,J)=>{p({item:Z,collectionId:J})},[]),H=N.useCallback((Z,J)=>{m({item:Z,collectionId:J})},[]),se=N.useMemo(()=>[{key:"Space",handler:()=>z(),description:"Roll"},{key:"Enter",handler:()=>z(),description:"Roll"}],[z]);Sx({shortcuts:se});const ne=(o==null?void 0:o.item.id)||null;return u.jsxs("div",{className:"h-[calc(100vh-4rem)]",children:[u.jsx(j_,{leftPanel:({onMobileClose:Z})=>u.jsx(r2,{selectedItemId:ne,onSelectItem:j,onRollItem:q,onEditItem:F,onCopyResult:G,onRollMultiple:_,onViewDetails:H,onMobileClose:Z}),rightPanel:u.jsx(Pj,{selectedItem:O,currentResult:g,isRolling:b,rollError:x,canRoll:B,history:v,onRoll:z,onPin:C,onDelete:T,onClearHistory:D})}),d&&u.jsx(zj,{item:d.item,collectionId:d.collectionId,onClose:()=>p(null),onRoll:async Z=>{const{item:J,collectionId:P}=d,M=[];for(let U=0;U<Z;U++){let A;J.type==="template"?A=await k(P,J.id):A=await w(P,J.id),A!=null&&A.text&&M.push(A.text)}return M}}),h&&u.jsx($j,{item:h.item,collectionId:h.collectionId,onClose:()=>m(null)})]})}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uj(e){if(Array.isArray(e))return e}function Hj(e,t,n){return(t=Zj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qj(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,o,c=[],d=!0,p=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(d=(r=s.call(n)).done)&&(c.push(r.value),c.length!==t);d=!0);}catch(h){p=!0,i=h}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw i}}return c}}function Vj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zy(Object(n),!0).forEach(function(r){Hj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wj(e,t){if(e==null)return{};var n,r,i=Gj(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Gj(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Kj(e,t){return Uj(e)||qj(e,t)||Xj(e,t)||Vj()}function Yj(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zj(e){var t=Yj(e,"string");return typeof t=="symbol"?t:t+""}function Xj(e,t){if(e){if(typeof e=="string")return Py(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Py(e,t):void 0}}function Qj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function By(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Uy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?By(Object(n),!0).forEach(function(r){Qj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):By(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(i,s){return s(i)},r)}}function fo(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return t.apply(n,[].concat(i,c))}}}function Ac(e){return{}.toString.call(e).includes("Object")}function eO(e){return!Object.keys(e).length}function Ao(e){return typeof e=="function"}function tO(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nO(e,t){return Ac(t)||Ga("changeType"),Object.keys(t).some(function(n){return!tO(e,n)})&&Ga("changeField"),t}function rO(e){Ao(e)||Ga("selectorType")}function aO(e){Ao(e)||Ac(e)||Ga("handlerType"),Ac(e)&&Object.values(e).some(function(t){return!Ao(t)})&&Ga("handlersType")}function iO(e){e||Ga("initialIsRequired"),Ac(e)||Ga("initialType"),eO(e)&&Ga("initialContent")}function sO(e,t){throw new Error(e[t]||e.default)}var oO={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Ga=fo(sO)(oO),lc={changes:nO,selector:rO,handler:aO,initial:iO};function lO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lc.initial(e),lc.handler(t);var n={current:e},r=fo(dO)(n,t),i=fo(uO)(n),s=fo(lc.changes)(e),o=fo(cO)(n);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return lc.selector(p),p(n.current)}function d(p){Jj(r,i,s,o)(p)}return[c,d]}function cO(e,t){return Ao(t)?t(e.current):t}function uO(e,t){return e.current=Uy(Uy({},e.current),t),t}function dO(e,t,n){return Ao(t)?t(e.current):Object.keys(n).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,e.current[r])}),n}var pO={create:lO},fO={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function hO(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return t.apply(n,[].concat(i,c))}}}function mO(e){return{}.toString.call(e).includes("Object")}function gO(e){return e||Hy("configIsRequired"),mO(e)||Hy("configType"),e.urls?(bO(),{paths:{vs:e.urls.monacoBase}}):e}function bO(){console.warn(j0.deprecation)}function yO(e,t){throw new Error(e[t]||e.default)}var j0={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Hy=hO(yO)(j0),vO={config:gO},xO=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,o){return o(s)},i)}};function O0(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],O0(e[n],t[n]))}),$y($y({},e),t)}var wO={type:"cancelation",msg:"operation is manually canceled"};function wp(e){var t=!1,n=new Promise(function(r,i){e.then(function(s){return t?i(wO):r(s)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var EO=["monaco"],kO=pO.create({config:fO,isInitialized:!1,resolve:null,reject:null,monaco:null}),M0=Kj(kO,2),Ko=M0[0],nu=M0[1];function NO(e){var t=vO.config(e),n=t.monaco,r=Wj(t,EO);nu(function(i){return{config:O0(i.config,r),monaco:n}})}function SO(){var e=Ko(function(t){var n=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!e.isInitialized){if(nu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),wp(Ep);if(window.monaco&&window.monaco.editor)return F0(window.monaco),e.resolve(window.monaco),wp(Ep);xO(CO,TO)(DO)}return wp(Ep)}function CO(e){return document.body.appendChild(e)}function _O(e){var t=document.createElement("script");return e&&(t.src=e),t}function TO(e){var t=Ko(function(r){var i=r.config,s=r.reject;return{config:i,reject:s}}),n=_O("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function DO(){var e=Ko(function(n){var r=n.config,i=n.resolve,s=n.reject;return{config:r,resolve:i,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){var r=n.m||n;F0(r),e.resolve(r)},function(n){e.reject(n)})}function F0(e){Ko().monaco||nu({monaco:e})}function RO(){return Ko(function(e){var t=e.monaco;return t})}var Ep=new Promise(function(e,t){return nu({resolve:e,reject:t})}),L0={config:NO,init:SO,__getMonacoInstance:RO},AO={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},kp=AO,IO={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},jO=IO;function OO({children:e}){return Qt.createElement("div",{style:jO.container},e)}var MO=OO,FO=MO;function LO({width:e,height:t,isEditorReady:n,loading:r,_ref:i,className:s,wrapperProps:o}){return Qt.createElement("section",{style:{...kp.wrapper,width:e,height:t},...o},!n&&Qt.createElement(FO,null,r),Qt.createElement("div",{ref:i,style:{...kp.fullWidth,...!n&&kp.hide},className:s}))}var PO=LO,P0=N.memo(PO);function zO(e){N.useEffect(e,[])}var z0=zO;function $O(e,t,n=!0){let r=N.useRef(!0);N.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var fr=$O;function vo(){}function is(e,t,n,r){return BO(e,r)||UO(e,t,n,r)}function BO(e,t){return e.editor.getModel($0(e,t))}function UO(e,t,n,r){return e.editor.createModel(t,n,r?$0(e,r):void 0)}function $0(e,t){return e.Uri.parse(t)}function HO({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:d=!1,theme:p="light",loading:h="Loading...",options:m={},height:g="100%",width:b="100%",className:x,wrapperProps:v={},beforeMount:w=vo,onMount:k=vo}){let[C,T]=N.useState(!1),[D,I]=N.useState(!0),L=N.useRef(null),O=N.useRef(null),B=N.useRef(null),z=N.useRef(k),j=N.useRef(w),q=N.useRef(!1);z0(()=>{let H=L0.init();return H.then(se=>(O.current=se)&&I(!1)).catch(se=>(se==null?void 0:se.type)!=="cancelation"&&console.error("Monaco initialization: error:",se)),()=>L.current?_():H.cancel()}),fr(()=>{if(L.current&&O.current){let H=L.current.getOriginalEditor(),se=is(O.current,e||"",r||n||"text",s||"");se!==H.getModel()&&H.setModel(se)}},[s],C),fr(()=>{if(L.current&&O.current){let H=L.current.getModifiedEditor(),se=is(O.current,t||"",i||n||"text",o||"");se!==H.getModel()&&H.setModel(se)}},[o],C),fr(()=>{let H=L.current.getModifiedEditor();H.getOption(O.current.editor.EditorOption.readOnly)?H.setValue(t||""):t!==H.getValue()&&(H.executeEdits("",[{range:H.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),H.pushUndoStop())},[t],C),fr(()=>{var H,se;(se=(H=L.current)==null?void 0:H.getModel())==null||se.original.setValue(e||"")},[e],C),fr(()=>{let{original:H,modified:se}=L.current.getModel();O.current.editor.setModelLanguage(H,r||n||"text"),O.current.editor.setModelLanguage(se,i||n||"text")},[n,r,i],C),fr(()=>{var H;(H=O.current)==null||H.editor.setTheme(p)},[p],C),fr(()=>{var H;(H=L.current)==null||H.updateOptions(m)},[m],C);let F=N.useCallback(()=>{var ne;if(!O.current)return;j.current(O.current);let H=is(O.current,e||"",r||n||"text",s||""),se=is(O.current,t||"",i||n||"text",o||"");(ne=L.current)==null||ne.setModel({original:H,modified:se})},[n,t,i,e,r,s,o]),G=N.useCallback(()=>{var H;!q.current&&B.current&&(L.current=O.current.editor.createDiffEditor(B.current,{automaticLayout:!0,...m}),F(),(H=O.current)==null||H.editor.setTheme(p),T(!0),q.current=!0)},[m,p,F]);N.useEffect(()=>{C&&z.current(L.current,O.current)},[C]),N.useEffect(()=>{!D&&!C&&G()},[D,C,G]);function _(){var se,ne,Z,J;let H=(se=L.current)==null?void 0:se.getModel();c||((ne=H==null?void 0:H.original)==null||ne.dispose()),d||((Z=H==null?void 0:H.modified)==null||Z.dispose()),(J=L.current)==null||J.dispose()}return Qt.createElement(P0,{width:b,height:g,isEditorReady:C,loading:h,_ref:B,className:x,wrapperProps:v})}var qO=HO;N.memo(qO);function VO(e){let t=N.useRef();return N.useEffect(()=>{t.current=e},[e]),t.current}var WO=VO,cc=new Map;function GO({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:i,path:s,theme:o="light",line:c,loading:d="Loading...",options:p={},overrideServices:h={},saveViewState:m=!0,keepCurrentModel:g=!1,width:b="100%",height:x="100%",className:v,wrapperProps:w={},beforeMount:k=vo,onMount:C=vo,onChange:T,onValidate:D=vo}){let[I,L]=N.useState(!1),[O,B]=N.useState(!0),z=N.useRef(null),j=N.useRef(null),q=N.useRef(null),F=N.useRef(C),G=N.useRef(k),_=N.useRef(),H=N.useRef(r),se=WO(s),ne=N.useRef(!1),Z=N.useRef(!1);z0(()=>{let M=L0.init();return M.then(U=>(z.current=U)&&B(!1)).catch(U=>(U==null?void 0:U.type)!=="cancelation"&&console.error("Monaco initialization: error:",U)),()=>j.current?P():M.cancel()}),fr(()=>{var U,A,te,ce;let M=is(z.current,e||r||"",t||i||"",s||n||"");M!==((U=j.current)==null?void 0:U.getModel())&&(m&&cc.set(se,(A=j.current)==null?void 0:A.saveViewState()),(te=j.current)==null||te.setModel(M),m&&((ce=j.current)==null||ce.restoreViewState(cc.get(s))))},[s],I),fr(()=>{var M;(M=j.current)==null||M.updateOptions(p)},[p],I),fr(()=>{!j.current||r===void 0||(j.current.getOption(z.current.editor.EditorOption.readOnly)?j.current.setValue(r):r!==j.current.getValue()&&(Z.current=!0,j.current.executeEdits("",[{range:j.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),j.current.pushUndoStop(),Z.current=!1))},[r],I),fr(()=>{var U,A;let M=(U=j.current)==null?void 0:U.getModel();M&&i&&((A=z.current)==null||A.editor.setModelLanguage(M,i))},[i],I),fr(()=>{var M;c!==void 0&&((M=j.current)==null||M.revealLine(c))},[c],I),fr(()=>{var M;(M=z.current)==null||M.editor.setTheme(o)},[o],I);let J=N.useCallback(()=>{var M;if(!(!q.current||!z.current)&&!ne.current){G.current(z.current);let U=s||n,A=is(z.current,r||e||"",t||i||"",U||"");j.current=(M=z.current)==null?void 0:M.editor.create(q.current,{model:A,automaticLayout:!0,...p},h),m&&j.current.restoreViewState(cc.get(U)),z.current.editor.setTheme(o),c!==void 0&&j.current.revealLine(c),L(!0),ne.current=!0}},[e,t,n,r,i,s,p,h,m,o,c]);N.useEffect(()=>{I&&F.current(j.current,z.current)},[I]),N.useEffect(()=>{!O&&!I&&J()},[O,I,J]),H.current=r,N.useEffect(()=>{var M,U;I&&T&&((M=_.current)==null||M.dispose(),_.current=(U=j.current)==null?void 0:U.onDidChangeModelContent(A=>{Z.current||T(j.current.getValue(),A)}))},[I,T]),N.useEffect(()=>{if(I){let M=z.current.editor.onDidChangeMarkers(U=>{var te;let A=(te=j.current.getModel())==null?void 0:te.uri;if(A&&U.find(ce=>ce.path===A.path)){let ce=z.current.editor.getModelMarkers({resource:A});D==null||D(ce)}});return()=>{M==null||M.dispose()}}return()=>{}},[I,D]);function P(){var M,U;(M=_.current)==null||M.dispose(),g?m&&cc.set(s,j.current.saveViewState()):(U=j.current.getModel())==null||U.dispose(),j.current.dispose()}return Qt.createElement(P0,{width:b,height:x,isEditorReady:I,loading:d,_ref:q,className:v,wrapperProps:w})}var KO=GO,YO=N.memo(KO),ZO=YO;const XO="http://json-schema.org/draft-07/schema#",QO="https://rolldeo.com/schemas/random-table-spec-v1.0.json",JO="Random Table JSON Template Specification v1.0",eM="A JSON schema for configurable random table generators supporting weighted tables, composite tables, template-based text generation, mathematical operations, conditional logic, multi-level table inheritance, external file references, and generation-time shared variables.",tM="object",nM=["metadata","tables"],rM=!1,aM={metadata:{$ref:"#/$defs/metadata"},imports:{type:"array",description:"Array of external file imports for modular content organization. Imports are resolved before any table or template processing.",items:{$ref:"#/$defs/import"}},tables:{type:"array",description:"Array of table definitions. At least one table is required. Tables can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).",minItems:1,items:{$ref:"#/$defs/table"}},templates:{type:"array",description:"Array of text generation pattern templates that combine multiple tables and operations using {{...}} syntax.",items:{$ref:"#/$defs/template"}},conditionals:{type:"array",description:"Array of conditional logic rules applied after primary generation based on rolled results.",items:{$ref:"#/$defs/conditional"}},variables:{$ref:"#/$defs/variables"},shared:{$ref:"#/$defs/shared"}},iM=JSON.parse(`{"metadata":{"type":"object","title":"Metadata Object","description":"Contains information about the file itself and global engine configuration.","required":["name","namespace","version","specVersion"],"additionalProperties":false,"properties":{"name":{"type":"string","description":"Name of the table collection","minLength":1,"examples":["Fantasy Treasure Generator","Sci-Fi Name Generator"]},"namespace":{"type":"string","description":"Unique namespace to prevent collisions. Use dot-separated segments (e.g., 'fantasy.core', 'scifi.names').","pattern":"^[a-zA-Z_][a-zA-Z0-9_]*(\\\\.[a-zA-Z_][a-zA-Z0-9_]*)*$","minLength":1,"examples":["fantasy.core","publisher.product.module"]},"version":{"type":"string","description":"Semantic version number for this file (e.g., '1.0.0', '2.1.0-beta').","pattern":"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+(-[a-zA-Z0-9.]+)?(\\\\+[a-zA-Z0-9.]+)?$","examples":["1.0.0","2.1.0","1.0.0-beta.1"]},"specVersion":{"type":"string","description":"The specification version this file conforms to. Must be '1.0' for this schema.","const":"1.0"},"author":{"type":"string","description":"Author name or organization"},"description":{"type":"string","description":"Markdown-formatted description of the collection"},"instructions":{"type":"string","description":"Usage instructions in Markdown format"},"tags":{"$ref":"#/$defs/tagsArray"},"created":{"type":"string","description":"ISO 8601 date-time string for creation date","format":"date-time"},"updated":{"type":"string","description":"ISO 8601 date-time string for last update","format":"date-time"},"source":{"$ref":"#/$defs/metadataSource"},"rights":{"$ref":"#/$defs/rights"},"maxRecursionDepth":{"type":"integer","description":"Maximum depth for nested table/template references. Prevents infinite loops from circular references.","default":50,"minimum":1,"examples":[25,50,100]},"maxExplodingDice":{"type":"integer","description":"Maximum number of times exploding dice (!) can re-roll.","default":100,"minimum":1,"examples":[50,100]},"maxInheritanceDepth":{"type":"integer","description":"Maximum depth for inheritance chains. For example, C extends B extends A has depth 2.","default":5,"minimum":1,"examples":[3,5,10]},"uniqueOverflowBehavior":{"type":"string","description":"Behavior when unique selection requests more entries than available.","enum":["stop","cycle","error"],"default":"stop"}}},"metadataSource":{"type":"object","title":"Source Attribution","description":"Optional properties for tracking content origin and licensing at the file level.","additionalProperties":false,"properties":{"book":{"type":"string","description":"Name of the source book or product"},"publisher":{"type":"string","description":"Publisher name"},"isbn":{"type":"string","description":"ISBN if applicable"},"url":{"type":"string","description":"URL to product page or official source","format":"uri"},"license":{"type":"string","description":"License under which content is used","examples":["OGL 1.0a","CC BY 4.0","Original","CC BY-NC-SA 4.0"]},"copyright":{"oneOf":[{"type":"string","description":"Simple copyright notice string"},{"$ref":"#/$defs/structuredCopyright"}],"description":"Copyright notice (string or structured object)"}}},"structuredCopyright":{"type":"object","title":"Structured Copyright","description":"Detailed copyright information for publishers","additionalProperties":false,"properties":{"year":{"type":"string","description":"Copyright year or range (e.g., '2024' or '2020-2024')","pattern":"^\\\\d{4}(-\\\\d{4})?$","examples":["2024","2020-2024"]},"holder":{"type":"string","description":"Legal entity name that holds the copyright"},"notice":{"type":"string","description":"Full copyright notice text","examples":[" 2024 Example Games LLC. All rights reserved."]}}},"rights":{"type":"object","title":"Rights & Permissions","description":"Intellectual property rights, usage permissions, and legal contact information for content protection.","additionalProperties":false,"properties":{"type":{"type":"string","description":"Content classification type","enum":["proprietary","open-content","fan-content","licensed"]},"official":{"type":"boolean","description":"Whether this is official publisher content (vs. fan-made)","default":false},"productIdentity":{"type":"array","description":"List of Product Identity elements (names, characters, logos, etc.) that are protected","items":{"type":"string"},"examples":[["Kobold Press","Tome of Beasts","All creature names and descriptions"]]},"trademarks":{"type":"array","description":"Trademark notices for protected marks","items":{"type":"string"},"examples":[["Kobold Press","Tome of Beasts"]]},"compatibilityNotice":{"type":"string","description":"Required compatibility/non-affiliation statement","examples":["Compatible with 5th Edition fantasy roleplaying. Not affiliated with or endorsed by Wizards of the Coast."]},"permissions":{"$ref":"#/$defs/rightsPermissions"},"contact":{"$ref":"#/$defs/rightsContact"},"termsUrl":{"type":"string","description":"URL to full terms of use","format":"uri"},"communityPolicyUrl":{"type":"string","description":"URL to fan content/community use policy","format":"uri"}}},"rightsPermissions":{"type":"object","title":"Usage Permissions","description":"Explicit permissions for how the content may be used","additionalProperties":false,"properties":{"commercialUse":{"type":"boolean","description":"Whether content may be used in commercial products","default":false},"modification":{"type":"boolean","description":"Whether content may be modified or adapted","default":false},"redistribution":{"type":"boolean","description":"Whether content may be redistributed","default":false},"derivativeWorks":{"type":"boolean","description":"Whether derivative works may be created","default":false},"attributionRequired":{"type":"boolean","description":"Whether attribution is required when using content","default":true}}},"rightsContact":{"type":"object","title":"Legal Contact Information","description":"Contact information for licensing and legal inquiries","additionalProperties":false,"properties":{"licensing":{"type":"string","description":"Email or URL for licensing inquiries"},"dmca":{"type":"string","description":"DMCA agent contact for takedown requests"},"general":{"type":"string","description":"General legal contact"}}},"tableSource":{"type":"object","title":"Table Source Attribution","description":"Source attribution for a specific table, useful when combining content from multiple sources.","additionalProperties":false,"properties":{"book":{"type":"string","description":"Source book name"},"page":{"oneOf":[{"type":"integer","description":"Single page number","minimum":1},{"type":"string","description":"Page range","pattern":"^\\\\d+(-\\\\d+)?$","examples":["47","47-49","123-125"]}],"description":"Page number or range (e.g., 47 or '47-49')"},"section":{"type":"string","description":"Section or chapter name"},"url":{"type":"string","description":"Direct URL to source if available online","format":"uri"},"license":{"type":"string","description":"License for this specific table (overrides file-level license)"}}},"import":{"type":"object","title":"Import Definition","description":"References tables, templates, and variables from an external JSON file.","required":["path","alias"],"additionalProperties":false,"properties":{"path":{"type":"string","description":"Relative path (e.g., './creatures/undead.json'), parent directory path (e.g., '../shared/core.json'), or absolute URL (e.g., 'https://rolldeo.com/tables.json').","minLength":1,"examples":["./creatures/undead.json","../shared/core.json","https://rolldeo.com/tables/v2/core.json"]},"alias":{"type":"string","description":"Local alias for referencing imported content. Must be unique within the file. Cannot contain periods.","pattern":"^[a-zA-Z_][a-zA-Z0-9_]*$","minLength":1,"examples":["undead","core","loot"]},"description":{"type":"string","description":"Human-readable description of what this import provides"}}},"table":{"type":"object","title":"Table Definition","description":"A table definition. Can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).","required":["id","name","type"],"allOf":[{"properties":{"id":{"type":"string","description":"Unique identifier for the table within the namespace. Cannot contain periods. Cannot be a reserved word.","pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$","minLength":1},"name":{"type":"string","description":"Display name for the table","minLength":1},"type":{"type":"string","description":"Table type: 'simple' for weighted entries, 'composite' for selecting from source tables, 'collection' for merging multiple tables.","enum":["simple","composite","collection"]},"description":{"type":"string","description":"Markdown-formatted description"},"tags":{"$ref":"#/$defs/tagsArray"},"hidden":{"type":"boolean","description":"If true, table won't appear in user-facing lists. Still fully accessible to templates and other tables.","default":false},"extends":{"type":"string","description":"ID of table to inherit from. Supports 'alias.tableId' for imported tables and 'namespace.tableId' for namespaced tables.","minLength":1,"examples":["baseTreasure","loot.baseTreasure","fantasy.core.weapons"]},"defaultSets":{"$ref":"#/$defs/setsObject"},"resultType":{"$ref":"#/$defs/resultType"},"source":{"$ref":"#/$defs/tableSource"},"shared":{"$ref":"#/$defs/tableShared"}}},{"oneOf":[{"$ref":"#/$defs/simpleTable"},{"$ref":"#/$defs/compositeTable"},{"$ref":"#/$defs/collectionTable"}]}]},"simpleTable":{"type":"object","title":"Simple Table","description":"A basic table with weighted entries. The most common table type, optimized for ease of data entry.","properties":{"type":{"const":"simple"},"entries":{"type":"array","description":"Array of table entries with values and optional weights/ranges","minItems":1,"items":{"$ref":"#/$defs/entry"}}},"required":["entries"]},"compositeTable":{"type":"object","title":"Composite Table","description":"Selects which source table to roll on using weighted probability, then rolls once on that table. Use when you want weighted selection between different tables.","properties":{"type":{"const":"composite"},"sources":{"type":"array","description":"Array of source tables to select from, with optional weights","minItems":1,"items":{"$ref":"#/$defs/compositeSource"}}},"required":["sources"]},"collectionTable":{"type":"object","title":"Collection Table","description":"Merges all entries from multiple tables into a single unified pool. Use for combining related tables (e.g., 'Swords' + 'Axes' + 'Polearms' = 'All Melee Weapons').","properties":{"type":{"const":"collection"},"collections":{"type":"array","description":"Array of table IDs to combine. Supports 'alias.tableId' and 'namespace.tableId' syntax.","minItems":1,"items":{"type":"string","description":"Table ID reference to include in the collection","minLength":1},"examples":[["swords","axes","polearms"],["core.commonItems","expansion.rareItems"]]}},"required":["collections"]},"compositeSource":{"type":"object","title":"Composite Source","description":"A source table reference for composite tables with optional weight.","required":["tableId"],"additionalProperties":false,"properties":{"tableId":{"type":"string","description":"ID of the table to pull from. Supports 'alias.tableId' and 'namespace.tableId' syntax.","minLength":1},"weight":{"type":"number","description":"Relative weight for selecting this source. Weight of 0 disables this source from random selection.","minimum":0,"default":1}}},"entry":{"type":"object","title":"Table Entry","description":"A single entry in a simple table. Normally requires a value. When overriding an inherited entry (via 'id' in an extended table), 'value' becomes optional - only 'id' plus the properties you want to change are needed. Can optionally specify weight OR range (not both). If neither specified, defaults to weight: 1.","properties":{"id":{"type":"string","description":"Unique ID within this table. Required for inheritance overrides. If omitted, auto-generated as {tableId}{NNN}.","pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"value":{"type":"string","description":"The output text. Supports Markdown formatting and {{...}} template syntax for nested evaluation, dice rolls, math expressions, table references, roll captures ({{N*table >> $var}}), capture access ({{$var[0].@prop}}), and property aggregation ({{collect:$var.@prop}})."},"weight":{"type":"number","description":"Relative probability weight. Must be 0 or greater. Weight of 0 disables the entry from random selection but preserves it for inheritance. Mutually exclusive with 'range'.","minimum":0,"default":1},"range":{"$ref":"#/$defs/rangeArray"},"description":{"type":"string","description":"Markdown description for documentation/UI purposes"},"tags":{"$ref":"#/$defs/tagsArray"},"sets":{"$ref":"#/$defs/setsObject"},"assets":{"$ref":"#/$defs/assetsObject"},"resultType":{"$ref":"#/$defs/resultType"}},"additionalProperties":false,"allOf":[{"not":{"required":["weight","range"]}},{"if":{"not":{"required":["id"]}},"then":{"required":["value"]}}]},"rangeArray":{"type":"array","title":"Range","description":"A two-element inclusive range for dice-roll style tables (e.g., [1, 5] means numbers 1-5, weight = 5). Mutually exclusive with 'weight'. Converted to weight as: weight = (range[1] - range[0]) + 1.","items":{"type":"integer","minimum":0},"minItems":2,"maxItems":2,"examples":[[1,50],[51,75],[76,100]]},"setsObject":{"type":"object","title":"Sets (Placeholder Values)","description":"Key-value pairs that set placeholder values (accessible via @key syntax) when this entry is selected. Merges with and overrides table's defaultSets.","additionalProperties":{"type":"string"},"examples":[{"size":"large","terrain":"forest"},{"hp":"{{dice:4d8+12}}","ac":"16"}]},"assetsObject":{"type":"object","title":"Assets","description":"Key-value pairs mapping asset types to file paths or URLs. Common keys: image, token, thumbnail, portrait, sound, music, handout, statblock.","additionalProperties":{"type":"string","description":"Asset path: relative path, absolute URL, or data URI"},"examples":[{"image":"images/goblin.png","token":"tokens/goblin.webp"},{"portrait":"https://cdn.rolldeo.com/orc.jpg"}]},"template":{"type":"object","title":"Template Definition","description":"A text generation pattern that combines multiple tables and operations using {{...}} syntax.","required":["id","name","pattern"],"additionalProperties":false,"properties":{"id":{"type":"string","description":"Unique identifier for the template. Cannot be a reserved word.","pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$","minLength":1},"name":{"type":"string","description":"Display name for the template","minLength":1},"pattern":{"type":"string","description":"Template pattern string. Use {{tableId}} for table rolls, {{dice:XdY}} for dice, {{$var}} for variables, {{@placeholder}} for placeholders, {{math:expr}} for math, {{N*table >> $var}} for captures, {{$var[0].@prop}} for capture access, {{collect:$var.@prop}} for aggregation. Supports Markdown."},"description":{"type":"string","description":"Markdown description of the template"},"tags":{"$ref":"#/$defs/tagsArray"},"resultType":{"$ref":"#/$defs/resultType"},"shared":{"$ref":"#/$defs/tableShared"}}},"conditional":{"type":"object","title":"Conditional Rule","description":"Applies logic based on rolled results. Evaluated after primary generation.","required":["when","action","value"],"additionalProperties":false,"properties":{"when":{"type":"string","description":"Condition expression. Supports comparisons (==, !=, >, <, >=, <=, contains, matches) and logical operators (&&, ||, !). Use @placeholder.property for entry values, $variable for variables.","minLength":1,"examples":["@size.value == 'large'","@race.value == 'elf' && @class.value == 'mage'","$setting != 'modern'","@name.value contains 'the'"]},"action":{"type":"string","description":"Action to perform when condition is true: append (add to end), prepend (add to start), replace (replace target), setVariable (set a variable).","enum":["append","prepend","replace","setVariable"]},"target":{"type":"string","description":"Required for 'replace' and 'setVariable' actions. For 'append'/'prepend', defaults to current output.","minLength":1},"value":{"type":"string","description":"Value to apply. May contain template syntax ({{...}}) for dynamic content. Supports Markdown."},"tags":{"$ref":"#/$defs/tagsArray"}},"allOf":[{"if":{"properties":{"action":{"enum":["replace","setVariable"]}},"required":["action"]},"then":{"required":["target"]}}]},"variables":{"type":"object","title":"Static Variables","description":"Static global variables loaded at engine initialization. Referenced using {{$variableName}}. Evaluated once at file load time. For generation-time values, use 'shared' instead.","additionalProperties":{"type":"string"},"propertyNames":{"pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"examples":[{"defaultSeparator":", ","setting":"fantasy","campaignYear":"1247"}]},"shared":{"type":"object","title":"Shared Variables (Generation-Time)","description":"Generation-time variables evaluated once at the start of each generation and remain constant throughout that run. Referenced using {{$variableName}}. Evaluated in declaration order. Cannot forward-reference other shared variables.","additionalProperties":{"type":"string"},"propertyNames":{"pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"examples":[{"monsterCount":"{{dice:2d4}}","leaderType":"{{eliteMonsterTable}}","totalThreat":"{{math:$monsterCount + 5}}"}]},"tableShared":{"type":"object","title":"Table/Template Shared Variables","description":"Table or template-level shared variables evaluated lazily when rolled. Cannot shadow document-level shared or static variables. Propagate to nested table references. Referenced using {{$variableName}}.","additionalProperties":{"type":"string"},"propertyNames":{"pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"examples":[{"threatLevel":"{{dice:1d6}}","monsterCount":"{{math:$threatLevel + 2}}"}]},"resultType":{"type":"string","title":"Result Type","description":"Classification of output type. Case-insensitive, user-definable. Common values: creature, npc, faction, item, loot, location, encounter, event, hook, complication, name, trait, effect, environment, ability, description, rumor, dialogue, statistic, number, currency, time, weather. Custom types should use namespace conventions (e.g., 'publisher/category/type').","examples":["creature","item","location","encounter","description","starships/cruiser","wh40k/regiment"]},"tagsArray":{"type":"array","title":"Tags","description":"Tags for categorization, organization, filtering, and searching","items":{"type":"string","minLength":1},"default":[],"examples":[["fantasy","treasure","loot"],["encounters","combat","wilderness"]]}}`),sM={$schema:XO,$id:QO,title:JO,description:eM,type:tM,required:nM,additionalProperties:rM,properties:aM,$defs:iM};function oM({value:e,onChange:t,onValidationChange:n,readOnly:r=!1,height:i=500,filename:s="table-collection.json"}){const o=N.useRef(null),c=N.useRef(null),{theme:d}=Ft(),p=N.useCallback((m,g)=>{o.current=m,c.current=g,g.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://rolldeo.com/schemas/random-table-spec-v1.0.json",fileMatch:["*"],schema:sM}],allowComments:!1,schemaValidation:"error",enableSchemaRequest:!1});const b=m.getModel();if(b){const x=()=>{const w=g.editor.getModelMarkers({resource:b.uri}).map(k=>({line:k.startLineNumber,column:k.startColumn,message:k.message,severity:k.severity===g.MarkerSeverity.Error?"error":k.severity===g.MarkerSeverity.Warning?"warning":"info"}));n==null||n(w)};b.onDidChangeContent(()=>{setTimeout(x,100)}),setTimeout(x,100)}m.focus()},[n]),h=N.useCallback(m=>{m!==void 0&&t(m)},[t]);return N.useEffect(()=>{c.current&&c.current.editor.setTheme(d==="dark"?"vs-dark":"vs")},[d]),u.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[u.jsxs("div",{className:"bg-muted px-4 py-2 text-sm font-medium border-b flex items-center justify-between",children:[u.jsx("span",{children:s}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Random Table Spec v1.0"})]}),u.jsx(ZO,{height:i,language:"json",value:e,onChange:h,onMount:p,theme:d==="dark"?"vs-dark":"vs",loading:u.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-muted-foreground",children:[u.jsx(ba,{className:"h-5 w-5 animate-spin"}),u.jsx("span",{children:"Loading editor..."})]}),options:{minimap:{enabled:!1},fontSize:14,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',lineNumbers:"on",wordWrap:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,formatOnPaste:!0,formatOnType:!0,readOnly:r,folding:!0,bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0},quickSuggestions:{other:!0,comments:!1,strings:!0},suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",snippetSuggestions:"inline"}})]})}function uc(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch{return e}}function lM({value:e,onChange:t,errors:n={}}){var k,C,T,D,I,L,O,B,z,j,q,F,G,_,H,se,ne,Z,J,P,M,U,A,te,ce,Ee,Ue,Te,$e;const[r,i]=N.useState(!!e.source),[s,o]=N.useState(!!e.rights),[c,d]=N.useState(typeof((k=e.source)==null?void 0:k.copyright)=="object"),p=N.useCallback((le,rt)=>{t({...e,[le]:rt})},[e,t]),h=N.useCallback((le,rt)=>{t({...e,source:{...e.source||{},[le]:rt}})},[e,t]),m=N.useCallback((le,rt)=>{var wt;const at=typeof((wt=e.source)==null?void 0:wt.copyright)=="object"?e.source.copyright:{};t({...e,source:{...e.source||{},copyright:{...at,[le]:rt}}})},[e,t]),g=N.useCallback((le,rt)=>{t({...e,rights:{...e.rights||{},[le]:rt}})},[e,t]),b=N.useCallback((le,rt)=>{var at;t({...e,rights:{...e.rights||{},permissions:{...((at=e.rights)==null?void 0:at.permissions)||{},[le]:rt}}})},[e,t]),x=N.useCallback((le,rt)=>{var at;t({...e,rights:{...e.rights||{},contact:{...((at=e.rights)==null?void 0:at.contact)||{},[le]:rt}}})},[e,t]),v=()=>{var le;return(le=e.source)!=null&&le.copyright?typeof e.source.copyright=="string"?e.source.copyright:e.source.copyright.notice||"":""},w=()=>{var le;return(le=e.source)!=null&&le.copyright?typeof e.source.copyright=="object"?e.source.copyright:{notice:e.source.copyright}:{}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsx(zt,{label:"Name",required:!0,error:n.name,description:"Display name for this collection",children:u.jsx("input",{type:"text",value:e.name||"",onChange:le=>p("name",le.target.value),placeholder:"My Table Collection",className:me("w-full p-2 border rounded-md bg-background",n.name&&"border-destructive")})}),u.jsx(zt,{label:"Namespace",required:!0,error:n.namespace,description:"Unique identifier (e.g., fantasy.core)",children:u.jsx("input",{type:"text",value:e.namespace||"",onChange:le=>p("namespace",le.target.value),placeholder:"myproject.tables",className:me("w-full p-2 border rounded-md bg-background",n.namespace&&"border-destructive")})}),u.jsx(zt,{label:"Version",required:!0,error:n.version,description:"Semantic version (e.g., 1.0.0)",children:u.jsx("input",{type:"text",value:e.version||"",onChange:le=>p("version",le.target.value),placeholder:"1.0.0",className:me("w-full p-2 border rounded-md bg-background",n.version&&"border-destructive")})}),u.jsx(zt,{label:"Author",description:"Your name or organization",children:u.jsx("input",{type:"text",value:e.author||"",onChange:le=>p("author",le.target.value),placeholder:"Your Name",className:"w-full p-2 border rounded-md bg-background"})})]}),u.jsx(zt,{label:"Description",description:"Markdown-formatted description of this collection",children:u.jsx("textarea",{value:e.description||"",onChange:le=>p("description",le.target.value),placeholder:"A collection of random tables for...",rows:3,className:"w-full p-2 border rounded-md bg-background resize-y"})}),u.jsx(zt,{label:"Instructions",description:"Usage instructions in Markdown format",children:u.jsx("textarea",{value:e.instructions||"",onChange:le=>p("instructions",le.target.value),placeholder:"How to use these tables...",rows:3,className:"w-full p-2 border rounded-md bg-background resize-y"})}),u.jsx(zt,{label:"Tags",description:"Categorization tags (press Enter to add)",children:u.jsx(Np,{value:e.tags||[],onChange:le=>p("tags",le),placeholder:"Add a tag..."})}),u.jsxs("details",{className:"border rounded-lg",children:[u.jsx("summary",{className:"px-4 py-2 cursor-pointer font-medium hover:bg-accent/50 rounded-lg",children:"Advanced Settings"}),u.jsxs("div",{className:"p-4 border-t space-y-4",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsx(zt,{label:"Max Recursion Depth",description:"Limit for nested table references",children:u.jsx("input",{type:"number",value:e.maxRecursionDepth??50,onChange:le=>p("maxRecursionDepth",le.target.value?parseInt(le.target.value,10):void 0),min:1,className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"Max Exploding Dice",description:"Limit for exploding dice re-rolls",children:u.jsx("input",{type:"number",value:e.maxExplodingDice??100,onChange:le=>p("maxExplodingDice",le.target.value?parseInt(le.target.value,10):void 0),min:1,className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"Max Inheritance Depth",description:"Limit for inheritance chains",children:u.jsx("input",{type:"number",value:e.maxInheritanceDepth??5,onChange:le=>p("maxInheritanceDepth",le.target.value?parseInt(le.target.value,10):void 0),min:1,className:"w-full p-2 border rounded-md bg-background"})})]}),u.jsx(zt,{label:"Unique Overflow Behavior",description:"What to do when unique selection exceeds available entries",children:u.jsxs("select",{value:e.uniqueOverflowBehavior||"stop",onChange:le=>p("uniqueOverflowBehavior",le.target.value),className:"w-full p-2 border rounded-md bg-background",children:[u.jsx("option",{value:"stop",children:"Stop (return fewer results)"}),u.jsx("option",{value:"cycle",children:"Cycle (allow duplicates)"}),u.jsx("option",{value:"error",children:"Error (throw exception)"})]})})]})]}),u.jsxs("details",{className:"border rounded-lg",open:r,onToggle:le=>i(le.target.open),children:[u.jsx("summary",{className:"px-4 py-2 cursor-pointer font-medium hover:bg-accent/50 rounded-lg",children:"Source Attribution"}),u.jsxs("div",{className:"p-4 border-t space-y-4",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsx(zt,{label:"Book",description:"Source book name",children:u.jsx("input",{type:"text",value:((C=e.source)==null?void 0:C.book)||"",onChange:le=>h("book",le.target.value),placeholder:"Core Rulebook",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"Publisher",description:"Publisher name",children:u.jsx("input",{type:"text",value:((T=e.source)==null?void 0:T.publisher)||"",onChange:le=>h("publisher",le.target.value),placeholder:"Publisher Name",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"ISBN",description:"ISBN if applicable",children:u.jsx("input",{type:"text",value:((D=e.source)==null?void 0:D.isbn)||"",onChange:le=>h("isbn",le.target.value),placeholder:"978-0-123456-78-9",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"URL",description:"URL to source",children:u.jsx("input",{type:"url",value:((I=e.source)==null?void 0:I.url)||"",onChange:le=>h("url",le.target.value),placeholder:"https://...",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"License",description:"Content license",children:u.jsx("input",{type:"text",value:((L=e.source)==null?void 0:L.license)||"",onChange:le=>h("license",le.target.value),placeholder:"CC BY 4.0",className:"w-full p-2 border rounded-md bg-background"})})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("span",{className:"text-sm font-medium",children:"Copyright"}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[u.jsx("input",{type:"checkbox",checked:c,onChange:le=>{var rt;d(le.target.checked),!le.target.checked&&typeof((rt=e.source)==null?void 0:rt.copyright)=="object"&&h("copyright",e.source.copyright.notice||"")},className:"rounded"}),"Structured format"]})]}),c?u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsx(zt,{label:"Year",description:"e.g., 2024 or 2020-2024",children:u.jsx("input",{type:"text",value:w().year||"",onChange:le=>m("year",le.target.value),placeholder:"2024",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"Holder",description:"Legal entity name",children:u.jsx("input",{type:"text",value:w().holder||"",onChange:le=>m("holder",le.target.value),placeholder:"Example Games LLC",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"Notice",description:"Full copyright text",children:u.jsx("input",{type:"text",value:w().notice||"",onChange:le=>m("notice",le.target.value),placeholder:" 2024 Example Games LLC",className:"w-full p-2 border rounded-md bg-background"})})]}):u.jsx(zt,{label:"",description:"Simple copyright notice",children:u.jsx("input",{type:"text",value:v(),onChange:le=>h("copyright",le.target.value),placeholder:" 2024 Author Name. All rights reserved.",className:"w-full p-2 border rounded-md bg-background"})})]})]})]}),u.jsxs("details",{className:"border rounded-lg",open:s,onToggle:le=>o(le.target.open),children:[u.jsx("summary",{className:"px-4 py-2 cursor-pointer font-medium hover:bg-accent/50 rounded-lg",children:"Rights & Permissions"}),u.jsxs("div",{className:"p-4 border-t space-y-6",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsx(zt,{label:"Content Type",description:"How is this content classified?",children:u.jsxs("select",{value:((O=e.rights)==null?void 0:O.type)||"",onChange:le=>g("type",le.target.value||void 0),className:"w-full p-2 border rounded-md bg-background",children:[u.jsx("option",{value:"",children:"Not specified"}),u.jsx("option",{value:"proprietary",children:"Proprietary (all rights reserved)"}),u.jsx("option",{value:"open-content",children:"Open Content (OGL, CC, etc.)"}),u.jsx("option",{value:"fan-content",children:"Fan Content (community policy)"}),u.jsx("option",{value:"licensed",children:"Licensed (third-party license)"})]})}),u.jsx(zt,{label:"Official Content",description:"Is this official publisher content?",children:u.jsx("div",{className:"flex items-center gap-3 h-10",children:u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"checkbox",checked:((B=e.rights)==null?void 0:B.official)||!1,onChange:le=>g("official",le.target.checked),className:"rounded"}),u.jsx("span",{className:"text-sm",children:"This is official publisher content"})]})})})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsx(zt,{label:"Product Identity",description:"Protected names, characters, logos (press Enter to add)",children:u.jsx(Np,{value:((z=e.rights)==null?void 0:z.productIdentity)||[],onChange:le=>g("productIdentity",le),placeholder:"Add protected element..."})}),u.jsx(zt,{label:"Trademarks",description:"Trademark notices (press Enter to add)",children:u.jsx(Np,{value:((j=e.rights)==null?void 0:j.trademarks)||[],onChange:le=>g("trademarks",le),placeholder:"Add trademark..."})})]}),u.jsx(zt,{label:"Compatibility Notice",description:"Required non-affiliation statement",children:u.jsx("textarea",{value:((q=e.rights)==null?void 0:q.compatibilityNotice)||"",onChange:le=>g("compatibilityNotice",le.target.value),placeholder:"Compatible with 5th Edition fantasy roleplaying. Not affiliated with or endorsed by...",rows:2,className:"w-full p-2 border rounded-md bg-background resize-y"})}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-3",children:"Usage Permissions"}),u.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[u.jsx(co,{label:"Commercial Use",description:"May be used in commercial products",checked:((G=(F=e.rights)==null?void 0:F.permissions)==null?void 0:G.commercialUse)||!1,onChange:le=>b("commercialUse",le)}),u.jsx(co,{label:"Modification",description:"May be modified or adapted",checked:((H=(_=e.rights)==null?void 0:_.permissions)==null?void 0:H.modification)||!1,onChange:le=>b("modification",le)}),u.jsx(co,{label:"Redistribution",description:"May be redistributed",checked:((ne=(se=e.rights)==null?void 0:se.permissions)==null?void 0:ne.redistribution)||!1,onChange:le=>b("redistribution",le)}),u.jsx(co,{label:"Derivative Works",description:"Derivative works may be created",checked:((J=(Z=e.rights)==null?void 0:Z.permissions)==null?void 0:J.derivativeWorks)||!1,onChange:le=>b("derivativeWorks",le)}),u.jsx(co,{label:"Attribution Required",description:"Must credit the copyright holder",checked:((M=(P=e.rights)==null?void 0:P.permissions)==null?void 0:M.attributionRequired)??!0,onChange:le=>b("attributionRequired",le)})]})]}),u.jsxs("div",{className:"border-t pt-4",children:[u.jsx("h4",{className:"text-sm font-medium mb-3",children:"Legal Contact"}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsx(zt,{label:"Licensing",description:"For licensing inquiries",children:u.jsx("input",{type:"text",value:((A=(U=e.rights)==null?void 0:U.contact)==null?void 0:A.licensing)||"",onChange:le=>x("licensing",le.target.value),placeholder:"licensing@example.com",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"DMCA",description:"For takedown requests",children:u.jsx("input",{type:"text",value:((ce=(te=e.rights)==null?void 0:te.contact)==null?void 0:ce.dmca)||"",onChange:le=>x("dmca",le.target.value),placeholder:"dmca@example.com",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"General",description:"General legal contact",children:u.jsx("input",{type:"text",value:((Ue=(Ee=e.rights)==null?void 0:Ee.contact)==null?void 0:Ue.general)||"",onChange:le=>x("general",le.target.value),placeholder:"legal@example.com",className:"w-full p-2 border rounded-md bg-background"})})]})]}),u.jsx("div",{className:"border-t pt-4",children:u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsx(zt,{label:"Terms URL",description:"Link to full terms of use",children:u.jsx("input",{type:"url",value:((Te=e.rights)==null?void 0:Te.termsUrl)||"",onChange:le=>g("termsUrl",le.target.value),placeholder:"https://example.com/terms",className:"w-full p-2 border rounded-md bg-background"})}),u.jsx(zt,{label:"Community Policy URL",description:"Link to fan content policy",children:u.jsx("input",{type:"url",value:(($e=e.rights)==null?void 0:$e.communityPolicyUrl)||"",onChange:le=>g("communityPolicyUrl",le.target.value),placeholder:"https://example.com/community-use",className:"w-full p-2 border rounded-md bg-background"})})]})})]})]})]})}function zt({label:e,required:t,error:n,description:r,children:i}){return u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-1",children:[e,t&&u.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),i,r&&!n&&u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r}),n&&u.jsx("p",{className:"text-xs text-destructive mt-1",children:n})]})}function Np({value:e,onChange:t,placeholder:n}){const[r,i]=N.useState(""),s=N.useCallback(d=>{const p=d.trim().toLowerCase();p&&!e.includes(p)&&t([...e,p]),i("")},[e,t]),o=N.useCallback(d=>{t(e.filter((p,h)=>h!==d))},[e,t]),c=N.useCallback(d=>{d.key==="Enter"?(d.preventDefault(),s(r)):d.key==="Backspace"&&!r&&e.length>0&&o(e.length-1)},[r,e,s,o]);return u.jsx("div",{className:"border rounded-md bg-background p-2",children:u.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((d,p)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-sm bg-primary/10 text-primary rounded-full",children:[d,u.jsx("button",{type:"button",onClick:()=>o(p),className:"hover:bg-primary/20 rounded-full p-0.5",children:u.jsx(cn,{className:"h-3 w-3"})})]},d)),u.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),onKeyDown:c,onBlur:()=>r&&s(r),placeholder:e.length===0?n:"",className:"flex-1 min-w-[100px] bg-transparent outline-none text-sm"})]})})}function co({label:e,description:t,checked:n,onChange:r}){return u.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg border hover:bg-accent/30 cursor-pointer transition-colors",children:[u.jsx("input",{type:"checkbox",checked:n,onChange:i=>r(i.target.checked),className:"mt-0.5 rounded"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium",children:e}),u.jsx("div",{className:"text-xs text-muted-foreground",children:t})]})]})}function B0(e){return me("inline-result-expression px-1 py-0.5 rounded cursor-help transition-colors",{dice:"bg-purple-500/15 text-purple-600 dark:text-purple-400 hover:bg-purple-500/25",math:"bg-green-500/15 text-green-600 dark:text-green-400 hover:bg-green-500/25",table:"bg-blue-500/15 text-blue-600 dark:text-blue-400 hover:bg-blue-500/25",template:"bg-blue-500/15 text-blue-600 dark:text-blue-400 hover:bg-blue-500/25",variable:"bg-orange-500/15 text-orange-600 dark:text-orange-400 hover:bg-orange-500/25",placeholder:"bg-pink-500/15 text-pink-600 dark:text-pink-400 hover:bg-pink-500/25",again:"bg-cyan-500/15 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-500/25",unique:"bg-yellow-500/15 text-yellow-600 dark:text-yellow-400 hover:bg-yellow-500/25",capture:"bg-rose-500/15 text-rose-600 dark:text-rose-400 hover:bg-rose-500/25",collect:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400 hover:bg-emerald-500/25",unknown:"bg-gray-500/15 text-gray-600 dark:text-gray-400 hover:bg-gray-500/25"}[e])}function U0(e){return{dice:"Dice Roll",math:"Math",table:"Table",template:"Template",variable:"Variable",placeholder:"Placeholder",again:"Re-roll",unique:"Unique",capture:"Capture",collect:"Collect",unknown:"Expression"}[e]}const Ic="",Io="",jc="";function cM(e){const t=[];let n="";for(const r of e)if(r.type==="literal")n+=r.text;else{const i=t.length;t.push({text:r.text,type:r.expressionType||"unknown",original:r.originalExpression||""}),n+=`${Ic}${i}${jc}${r.text}${Io}`}return{text:n,expressions:t}}function uM(e,t,n){const r=[];let i=e,s=0;for(;i.length>0;){const o=i.indexOf(Ic);if(o===-1){i&&r.push(i);break}o>0&&r.push(i.slice(0,o));const c=i.indexOf(jc,o),d=i.indexOf(Io,c);if(c===-1||d===-1){r.push(i.slice(o));break}const p=i.slice(o+Ic.length,c),h=parseInt(p,10),m=i.slice(c+jc.length,d);if(!isNaN(h)&&t[h]){const g=t[h],b=B0(g.type),x=U0(g.type),v=g.original?`${x}: ${g.original}`:x;r.push(u.jsx("span",{className:b,title:v,children:m},`${n}-expr-${s++}`))}else r.push(m);i=i.slice(d+Io.length)}return r}function Ha(e,t,n){if(typeof e=="string"){const r=uM(e,t,n);return r.length===1?r[0]:u.jsx(u.Fragment,{children:r})}return Array.isArray(e)?e.map((r,i)=>Ha(r,t,`${n}-${i}`)):e}const dM=N.memo(function({segment:t,index:n}){if(t.type==="literal")return u.jsx("span",{className:"whitespace-pre-wrap",children:t.text},n);const r=B0(t.expressionType||"unknown"),i=U0(t.expressionType||"unknown"),s=t.originalExpression?`${i}: ${t.originalExpression}`:i;return u.jsx("span",{className:r,title:s,children:t.text},n)}),H0=N.memo(function({segments:t,className:n,enableMarkdown:r=!0}){const{text:i,expressions:s}=N.useMemo(()=>cM(t),[t]),o=N.useMemo(()=>{const c=t.map(d=>d.text).join("");return/[*_#`\[\]|>-]|\n/.test(c)},[t]);return t.length===0?u.jsx("div",{className:me("text-sm text-muted-foreground italic whitespace-pre-wrap",n),children:"Empty result"}):r&&o?u.jsx("div",{className:me("prose-roll overflow-x-auto",n),children:u.jsx(Ci,{remarkPlugins:[_i],components:{p:({children:c})=>u.jsx("p",{children:Ha(c,s,"p")}),li:({children:c})=>u.jsx("li",{children:Ha(c,s,"li")}),td:({children:c})=>u.jsx("td",{children:Ha(c,s,"td")}),th:({children:c})=>u.jsx("th",{children:Ha(c,s,"th")}),strong:({children:c})=>u.jsx("strong",{children:Ha(c,s,"strong")}),em:({children:c})=>u.jsx("em",{children:Ha(c,s,"em")}),blockquote:({children:c})=>u.jsx("blockquote",{children:Ha(c,s,"blockquote")}),code:({className:c,children:d,...p})=>{let h=typeof d=="string"?d:String(d??"");const m=new RegExp(`${Ic}\\d+${jc}([^${Io[0]}]*)${Io}`,"g");return h=h.replace(m,"$1"),u.jsx("code",{className:c,...p,children:h})}},children:i})}):u.jsx("div",{className:me("text-sm whitespace-pre-wrap break-words leading-relaxed",n),children:t.map((c,d)=>u.jsx(dM,{segment:c,index:d},d))})});function pM(e){return e.startsWith("dice:")?"text-purple-600 dark:text-purple-400":e.startsWith("math:")?"text-green-600 dark:text-green-400":e.startsWith("collect:")?"text-emerald-600 dark:text-emerald-400":e.includes(" >> $")||e.includes(">>$")?"text-rose-600 dark:text-rose-400":e.startsWith("$")?"text-orange-600 dark:text-orange-400":e.startsWith("@")?"text-pink-600 dark:text-pink-400":e==="again"||e.endsWith("*again")?"text-cyan-600 dark:text-cyan-400":e.startsWith("unique:")?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}function fM(e){const t=[];let n=0;const r=/\{\{([^}]+)\}\}/g;let i;for(;(i=r.exec(e))!==null;){i.index>n&&t.push(u.jsx("span",{className:"whitespace-pre-wrap",children:e.slice(n,i.index)},`text-${n}`));const s=i[1],o=pM(s);t.push(u.jsx("span",{className:o,children:i[0]},`expr-${i.index}`)),n=i.index+i[0].length}return n<e.length&&t.push(u.jsx("span",{className:"whitespace-pre-wrap",children:e.slice(n)},`text-${n}`)),t.length>0?t:e}const hM=N.memo(N.forwardRef(function({value:t,onChange:n,placeholder:r,minHeight:i=120,id:s},o){const c=N.useRef(null),d=N.useRef(null),[p,h]=N.useState(i),m=N.useCallback(()=>{c.current&&d.current&&(d.current.scrollTop=c.current.scrollTop,d.current.scrollLeft=c.current.scrollLeft)},[]),g=N.useCallback(()=>{c.current&&h(c.current.offsetHeight)},[]),b=N.useCallback(w=>{n(w.target.value),requestAnimationFrame(g)},[n,g]),x=N.useCallback(w=>{const k=c.current;if(!k)return;const C=k.selectionStart,T=k.selectionEnd,D=t.slice(0,C)+w+t.slice(T);n(D),requestAnimationFrame(()=>{k.focus(),k.setSelectionRange(C+w.length,C+w.length)})},[t,n]),v=N.useCallback(()=>{var w;(w=c.current)==null||w.focus()},[]);return N.useImperativeHandle(o,()=>({insertAtCursor:x,focus:v}),[x,v]),N.useEffect(()=>{const w=c.current;if(!w)return;g();const k=new ResizeObserver(()=>{g(),m()});return k.observe(w),()=>{k.disconnect()}},[g,m]),N.useEffect(()=>{m()},[t,m]),u.jsxs("div",{className:"relative font-mono text-sm",children:[u.jsx("div",{ref:d,className:me("absolute top-0 left-0 right-0 whitespace-pre-wrap break-words","p-3 border border-transparent rounded-md","pointer-events-none overflow-hidden","leading-normal"),style:{height:`${p}px`},"aria-hidden":"true",children:t?fM(t):u.jsx("span",{className:"text-muted-foreground/50",children:r})}),u.jsx("textarea",{ref:c,id:s,value:t,onChange:b,onScroll:m,placeholder:"",className:me("relative w-full resize-y bg-transparent","outline-none border rounded-md p-3","border-input focus:border-ring focus:ring-1 focus:ring-ring","leading-normal","editable-pattern-textarea"),style:{minHeight:`${i}px`,color:"transparent",caretColor:"hsl(var(--foreground))"},spellCheck:!1})]})})),mM=N.memo(function({showTrace:t,onToggleTrace:n,showCaptures:r,onToggleCaptures:i,onReroll:s,isEvaluating:o,traceNodeCount:c=0,captureCount:d=0,hasTrace:p,hasCaptures:h}){return u.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:s,disabled:o,className:me("text-sm flex items-center gap-1.5 px-3 py-1.5 rounded-lg border transition-all","text-muted-foreground border-border/50 hover:border-border hover:bg-accent","disabled:opacity-50 disabled:cursor-not-allowed","active:scale-95"),title:"Re-roll preview (evaluate again)",children:[u.jsx(jf,{className:me("w-4 h-4",o&&"animate-spin")}),"Re-roll"]}),p&&u.jsxs("button",{type:"button",onClick:n,className:me("text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all",t?"text-primary border-primary/40 bg-primary/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"),children:[u.jsx(Po,{className:"w-4 h-4"}),t?"Hide":"Show"," Trace",c>0&&u.jsxs("span",{className:"text-muted-foreground/60 text-xs",children:["(",c," ops)"]})]}),t&&h&&u.jsxs("button",{type:"button",onClick:i,className:me("text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all",r?"text-rose-400 border-rose-400/40 bg-rose-400/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"),children:[u.jsx($o,{className:"w-4 h-4"}),r?"Hide":"Show"," Captures",u.jsxs("span",{className:"text-muted-foreground/60 text-xs",children:["(",d," var",d!==1?"s":"",")"]})]}),o&&u.jsx("span",{className:"text-xs text-muted-foreground",children:"Evaluating..."})]})});function gM(e){return e?e.stats.nodeCount:0}function bM(e){if(!e)return[];const t=[],n=e.root.children;let r=0;for(;r<n.length;){const i=n[r];if(i.type==="placeholder_access"&&i.metadata){const s=i.metadata;if((s.resolvedToTable||s.resolvedToTemplate)&&r+1<n.length){t.push(String(n[r+1].output.value)),r+=2;continue}}t.push(String(i.output.value)),r++}return t}function yM(e){switch(e.type){case"dice":return"dice";case"math":return"math";case"variable":return"variable";case"placeholder":return"placeholder";case"again":return"again";case"multiRoll":return"table";case"table":return"table";case"instance":return"table";case"captureMultiRoll":return"capture";case"captureAccess":return"variable";case"collect":return"collect";default:return"unknown"}}function qy(e){const t=e.trim();return t.startsWith("collect:")?"collect":t.includes(" >> $")||t.includes(">>$")?"capture":t.startsWith("dice:")?"dice":t.startsWith("math:")?"math":t.startsWith("$")?"variable":t.startsWith("@")?"placeholder":t==="again"||t.endsWith("*again")?"again":t.startsWith("unique:")?"unique":(/^\d+\*/.test(t),"table")}function lh(e,t,n={}){const{enableTrace:r=!0,debounceMs:i=300,sharedVariables:s}=n,{engine:o}=an(),[c,d]=N.useState(null),[p,h]=N.useState(!1),[m,g]=N.useState(0),b=N.useRef(null),x=N.useRef(0),v=N.useCallback((D,I,L,O)=>{const B=[];if(I.length===0)return D.length>0&&B.push({type:"literal",text:D,startInPattern:0,endInPattern:D.length}),B;const z=bM(L),j=z.length===0&&O;let q=0;for(let F=0;F<I.length;F++){const G=I[F];if(G.start>q){const se=D.slice(q,G.start);B.push({type:"literal",text:se,startInPattern:q,endInPattern:G.start})}let _="",H="unknown";try{const se=vx(G.expression);H=yM(se)}catch{H=qy(G.expression)}F<z.length?(_=z[F],_===""&&(_="[empty]")):j&&F===0&&I.length===1?_=O||"[empty]":z.length>0&&F>=z.length?_="[?]":_=`[${G.expression}]`,B.push({type:"expression",text:_,originalExpression:G.raw,expressionType:H,startInPattern:G.start,endInPattern:G.end}),q=G.end}if(q<D.length){const F=D.slice(q);B.push({type:"literal",text:F,startInPattern:q,endInPattern:D.length})}return B},[]),w=N.useCallback(()=>{const D=++x.current;if(!e){d({segments:[],fullText:"",trace:null,captures:null,error:null}),h(!1);return}if(!t||!o.hasCollection(t)){const I=mo(e),L=v(e,I,null,"");d({segments:L,fullText:e,trace:null,captures:null,error:null}),h(!1);return}h(!0);try{const I=o.evaluateRawPattern(e,t,{enableTrace:r,shared:s});if(D!==x.current)return;const L=mo(e),O=I.trace??null,B=v(e,L,O,I.text);d({segments:B,fullText:I.text,trace:O,captures:I.captures??null,error:null})}catch(I){if(D!==x.current)return;const L=I instanceof Error?I.message:"Evaluation failed",O=mo(e),B=[];let z=0;for(const j of O)j.start>z&&B.push({type:"literal",text:e.slice(z,j.start),startInPattern:z,endInPattern:j.start}),B.push({type:"expression",text:"[error]",originalExpression:j.raw,expressionType:qy(j.expression),startInPattern:j.start,endInPattern:j.end}),z=j.end;z<e.length&&B.push({type:"literal",text:e.slice(z),startInPattern:z,endInPattern:e.length}),d({segments:B,fullText:"",trace:null,captures:null,error:L})}finally{D===x.current&&h(!1)}},[e,t,o,r,s,v]),k=N.useCallback(()=>{g(D=>D+1)},[]);N.useEffect(()=>(b.current&&clearTimeout(b.current),i>0?(h(!0),b.current=setTimeout(()=>{w()},i)):w(),()=>{b.current&&clearTimeout(b.current)}),[e,t,m,r,s]);const C=N.useMemo(()=>gM((c==null?void 0:c.trace)??null),[c==null?void 0:c.trace]),T=N.useMemo(()=>c!=null&&c.captures?Object.keys(c.captures).length:0,[c==null?void 0:c.captures]);return{result:c,isEvaluating:p,reroll:k,traceNodeCount:C,captureCount:T}}const q0=N.memo(N.forwardRef(function({pattern:t,onChange:n,collectionId:r,placeholder:i="Enter your pattern using {{...}} syntax",minHeight:s=120,sharedVariables:o,hidePreviewWhenEmpty:c=!1,hideLabel:d=!1},p){const h=N.useRef(null);N.useImperativeHandle(p,()=>({insertAtCursor:q=>{var F;return(F=h.current)==null?void 0:F.insertAtCursor(q)},focus:()=>{var q;return(q=h.current)==null?void 0:q.focus()}}));const[m,g]=N.useState(!1),[b,x]=N.useState(!1),{result:v,isEvaluating:w,reroll:k,traceNodeCount:C,captureCount:T}=lh(t,r,{enableTrace:!0,debounceMs:300,sharedVariables:o}),D=!!(v!=null&&v.trace),I=T>0,L=!!(v!=null&&v.error),O=!!(v!=null&&v.segments.some(q=>q.type==="expression")),B=N.useCallback(()=>{g(q=>!q),m&&x(!1)},[m]),z=N.useCallback(()=>{x(q=>!q)},[]),j=!c||O;return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[!d&&u.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Pattern ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx(hM,{ref:h,value:t,onChange:n,placeholder:i,minHeight:s}),!d&&u.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Use ","{{tableId}}"," for table references, ","{{dice:XdY}}"," for dice,"," ","{{math:expr}}"," for math, ","{{$var}}"," for variables,"," ","{{3*table >> $var}}"," for captures"]})]}),j&&u.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-3 border border-border/50",children:[u.jsxs("div",{className:"flex items-start justify-between gap-4",children:[u.jsx("h4",{className:"text-sm font-medium",children:"Preview Result"}),u.jsx(mM,{showTrace:m,onToggleTrace:B,showCaptures:b,onToggleCaptures:z,onReroll:k,isEvaluating:w,traceNodeCount:C,captureCount:T,hasTrace:D,hasCaptures:I})]}),L&&u.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 border border-destructive/30 rounded-md",children:[u.jsx(qc,{className:"w-4 h-4 text-destructive mt-0.5 flex-shrink-0"}),u.jsx("div",{className:"text-sm text-destructive",children:v==null?void 0:v.error})]}),!r&&O?u.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-background/50 rounded border border-border/30",children:"Save the collection to enable live preview evaluation."}):v!=null&&v.segments&&v.segments.length>0?u.jsx("div",{className:"p-3 bg-background/50 rounded border border-border/30",children:u.jsx(H0,{segments:v.segments})}):u.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-background/50 rounded border border-border/30",children:t?"Empty result":"Enter a pattern to see preview"}),m&&(v==null?void 0:v.trace)&&u.jsx("div",{className:"mt-4",children:u.jsx(oh,{trace:v.trace,onClose:()=>g(!1)})}),m&&b&&(v==null?void 0:v.captures)&&u.jsx("div",{className:"mt-4",children:u.jsx(I0,{captures:v.captures,onClose:()=>x(!1)})})]})]})}));function vM({entry:e,onChange:t,onDelete:n,onAddEntry:r,index:i,isDragging:s,canDelete:o=!0,collectionId:c,autoFocus:d=!1}){var O,B,z;const[p,h]=N.useState(!1),[m,g]=N.useState(!1),[b,x]=N.useState(e.range?"range":"weight"),v=N.useRef(null);N.useEffect(()=>{d&&v.current&&v.current.focus()},[d]);const w=N.useMemo(()=>mo(e.value).length>0,[e.value]),{result:k,reroll:C}=lh(m?e.value:"",c,{enableTrace:!1,debounceMs:200}),T=N.useCallback((j,q)=>{const F={...e,[j]:q};(q===void 0||q==="")&&delete F[j],t(F)},[e,t]),D=N.useCallback(j=>{if(x(j),j==="weight"){const q={...e};delete q.range,q.weight=1,t(q)}else{const q={...e};delete q.weight,q.range=[1,1],t(q)}},[e,t]),I=N.useCallback((j,q)=>{const F=[...e.range||[1,1]];F[j]=q,T("range",F)},[e.range,T]),L=N.useCallback(j=>{j.key==="Enter"&&e.value.trim()&&r&&(j.preventDefault(),r())},[e.value,r]);return u.jsxs("div",{className:me("border rounded-lg transition-shadow",s&&"shadow-lg bg-background"),children:[u.jsxs("div",{className:"flex items-center gap-2 p-3",children:[u.jsx("button",{type:"button",onClick:()=>h(!p),className:"p-1 hover:bg-accent rounded",children:p?u.jsx(Fr,{className:"h-4 w-4"}):u.jsx(rr,{className:"h-4 w-4"})}),u.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:["#",i+1]}),u.jsx("input",{ref:v,type:"text",value:e.value,onChange:j=>T("value",j.target.value),onKeyDown:L,placeholder:"Entry value (supports {{...}} templates)",className:"flex-1 p-2 border rounded-md bg-background text-sm"}),u.jsxs("div",{className:"flex items-center gap-2",children:[b==="weight"?u.jsx("input",{type:"number",value:e.weight??1,onChange:j=>T("weight",j.target.value?parseFloat(j.target.value):1),min:0,step:.1,className:"w-16 p-2 border rounded-md bg-background text-sm text-center",title:"Weight"}):u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"number",value:((O=e.range)==null?void 0:O[0])??1,onChange:j=>I(0,parseInt(j.target.value,10)||1),min:1,className:"w-12 p-2 border rounded-md bg-background text-sm text-center",title:"Range start"}),u.jsx("span",{className:"text-muted-foreground",children:"-"}),u.jsx("input",{type:"number",value:((B=e.range)==null?void 0:B[1])??1,onChange:j=>I(1,parseInt(j.target.value,10)||1),min:((z=e.range)==null?void 0:z[0])??1,className:"w-12 p-2 border rounded-md bg-background text-sm text-center",title:"Range end"})]}),w&&c&&u.jsx("button",{type:"button",onClick:()=>g(!m),className:me("p-2 rounded transition-colors",m?"bg-primary/10 text-primary":"hover:bg-accent text-muted-foreground"),title:m?"Hide preview":"Show preview",children:m?u.jsx(Co,{className:"h-4 w-4"}):u.jsx(Wv,{className:"h-4 w-4"})}),u.jsx("button",{type:"button",onClick:n,disabled:!o,className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-current",title:o?"Delete entry":"Cannot delete the last entry",children:u.jsx(zr,{className:"h-4 w-4"})})]})]}),m&&(k==null?void 0:k.segments)&&k.segments.length>0&&u.jsx("div",{className:"px-3 pb-3",children:u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded border border-border/50",children:[u.jsx("div",{className:"flex-1 text-sm",children:u.jsx(H0,{segments:k.segments})}),u.jsx("button",{type:"button",onClick:C,className:"p-1 hover:bg-accent rounded text-muted-foreground hover:text-foreground transition-colors",title:"Re-roll",children:u.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),p&&u.jsxs("div",{className:"border-t p-4 space-y-4 bg-muted/30",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Entry ID"}),u.jsx("input",{type:"text",value:e.id||"",onChange:j=>T("id",j.target.value||void 0),placeholder:"Auto-generated if empty",className:"w-full p-2 border rounded-md bg-background text-sm"}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required for inheritance overrides"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Weight Mode"}),u.jsxs("div",{className:"flex border rounded-md overflow-hidden",children:[u.jsx("button",{type:"button",onClick:()=>D("weight"),className:me("flex-1 px-3 py-2 text-sm transition-colors",b==="weight"?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Weight"}),u.jsx("button",{type:"button",onClick:()=>D("range"),className:me("flex-1 px-3 py-2 text-sm transition-colors",b==="range"?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Range"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),u.jsx(q0,{pattern:e.description||"",onChange:j=>T("description",j||void 0),collectionId:c,placeholder:"Optional description (Markdown and patterns supported)",minHeight:60,hidePreviewWhenEmpty:!0,hideLabel:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Result Type"}),u.jsx("input",{type:"text",value:e.resultType||"",onChange:j=>T("resultType",j.target.value||void 0),placeholder:"creature, item, location, etc.",className:"w-full p-2 border rounded-md bg-background text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sets (Placeholder Values)"}),u.jsx(Vy,{value:e.sets||{},onChange:j=>T("sets",Object.keys(j).length>0?j:void 0),keyPlaceholder:"Key (@key)",valuePlaceholder:"Value"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Assets"}),u.jsx(Vy,{value:e.assets||{},onChange:j=>T("assets",Object.keys(j).length>0?j:void 0),keyPlaceholder:"Type (image, token, etc.)",valuePlaceholder:"Path or URL"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags"}),u.jsx(xM,{value:e.tags||[],onChange:j=>T("tags",j.length>0?j:void 0)})]})]})]})}function Vy({value:e,onChange:t,keyPlaceholder:n="Key",valuePlaceholder:r="Value"}){const i=Object.entries(e),[s,o]=N.useState(""),[c,d]=N.useState(""),p=N.useCallback(()=>{s.trim()&&c.trim()&&(t({...e,[s.trim()]:c.trim()}),o(""),d(""))},[e,t,s,c]),h=N.useCallback(g=>{const b={...e};delete b[g],t(b)},[e,t]),m=N.useCallback((g,b,x)=>{const v={};for(const[w,k]of Object.entries(e))w===g?b.trim()&&(v[b.trim()]=x):v[w]=k;t(v)},[e,t]);return u.jsxs("div",{className:"space-y-2",children:[i.map(([g,b])=>u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:g,onChange:x=>m(g,x.target.value,b),className:"flex-1 p-2 border rounded-md bg-background text-sm",placeholder:n}),u.jsx("input",{type:"text",value:b,onChange:x=>m(g,g,x.target.value),className:"flex-1 p-2 border rounded-md bg-background text-sm",placeholder:r}),u.jsx("button",{type:"button",onClick:()=>h(g),className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded",children:u.jsx(cn,{className:"h-4 w-4"})})]},g)),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:s,onChange:g=>o(g.target.value),onKeyDown:g=>g.key==="Enter"&&p(),className:"flex-1 p-2 border rounded-md bg-background text-sm",placeholder:n}),u.jsx("input",{type:"text",value:c,onChange:g=>d(g.target.value),onKeyDown:g=>g.key==="Enter"&&p(),className:"flex-1 p-2 border rounded-md bg-background text-sm",placeholder:r}),u.jsx("button",{type:"button",onClick:p,disabled:!s.trim()||!c.trim(),className:"px-3 py-2 text-sm border rounded-md hover:bg-accent disabled:opacity-50",children:"Add"})]})]})}function xM({value:e,onChange:t}){const[n,r]=N.useState(""),i=N.useCallback(o=>{const c=o.trim().toLowerCase();c&&!e.includes(c)&&t([...e,c]),r("")},[e,t]),s=N.useCallback(o=>{t(e.filter((c,d)=>d!==o))},[e,t]);return u.jsx("div",{className:"border rounded-md bg-background p-2",children:u.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((o,c)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-sm bg-primary/10 text-primary rounded-full",children:[o,u.jsx("button",{type:"button",onClick:()=>s(c),className:"hover:bg-primary/20 rounded-full p-0.5",children:u.jsx(cn,{className:"h-3 w-3"})})]},o)),u.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),i(n)):o.key==="Backspace"&&!n&&e.length>0&&s(e.length-1)},onBlur:()=>n&&i(n),placeholder:e.length===0?"Add tags...":"",className:"flex-1 min-w-[100px] bg-transparent outline-none text-sm"})]})})}function Oc({value:e,onChange:t,keyPlaceholder:n="Key",valuePlaceholder:r="Value",keyPattern:i,keyError:s,valueSupportsExpressions:o,collectionId:c}){const d=Object.entries(e),[p,h]=N.useState(""),[m,g]=N.useState(""),[b,x]=N.useState(null),v=N.useCallback(D=>i?new RegExp(i).test(D):!0,[i]),w=N.useCallback(()=>{const D=p.trim();if(D){if(!v(D)){x(s||"Invalid key format");return}if(e[D]!==void 0){x("Key already exists");return}t({...e,[D]:m}),h(""),g(""),x(null)}},[e,t,p,m,v,s]),k=N.useCallback(D=>{const I={...e};delete I[D],t(I)},[e,t]),C=N.useCallback((D,I)=>{t({...e,[D]:I})},[e,t]),T=N.useCallback((D,I)=>{const L=I.trim();if(!L||L===D||!v(L)||e[L]!==void 0)return;const O={};for(const[B,z]of Object.entries(e))B===D?O[L]=z:O[B]=z;t(O)},[e,t,v]);return u.jsxs("div",{className:"space-y-3",children:[d.length===0&&u.jsx("div",{className:"text-sm text-muted-foreground text-center py-4 border-2 border-dashed rounded-lg",children:"No variables defined. Add one below."}),d.map(([D,I])=>u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:"flex-1",children:u.jsx("input",{type:"text",value:D,onChange:L=>T(D,L.target.value),className:"w-full p-2 border rounded-md bg-background text-sm font-mono",placeholder:n})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("input",{type:"text",value:I,onChange:L=>C(D,L.target.value),className:"w-full p-2 border rounded-md bg-background text-sm",placeholder:r}),o&&I.includes("{{")&&u.jsx(wM,{value:I,collectionId:c})]}),u.jsx("button",{type:"button",onClick:()=>k(D),className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors",title:"Delete variable",children:u.jsx(zr,{className:"h-4 w-4"})})]},D)),u.jsxs("div",{className:"pt-2 border-t space-y-2",children:[u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:"flex-1",children:u.jsx("input",{type:"text",value:p,onChange:D=>{h(D.target.value),x(null)},onKeyDown:D=>D.key==="Enter"&&w(),className:"w-full p-2 border rounded-md bg-background text-sm font-mono",placeholder:n})}),u.jsx("div",{className:"flex-1",children:u.jsx("input",{type:"text",value:m,onChange:D=>g(D.target.value),onKeyDown:D=>D.key==="Enter"&&w(),className:"w-full p-2 border rounded-md bg-background text-sm",placeholder:r})}),u.jsxs("button",{type:"button",onClick:w,disabled:!p.trim(),className:"flex items-center gap-1.5 px-3 py-2 text-sm border rounded-md hover:bg-accent transition-colors disabled:opacity-50",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add"]})]}),b&&u.jsx("p",{className:"text-xs text-destructive",children:b})]}),o&&u.jsxs("div",{className:"text-xs text-muted-foreground p-3 bg-muted/30 rounded-lg",children:[u.jsx("strong",{children:"Tip:"})," Shared variables support expressions like"," ",u.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"{{dice:2d6}}"}),","," ",u.jsx("code",{className:"px-1 py-0.5 bg-muted rounded",children:"{{math:$var + 5}}"}),", or table references. They're evaluated in order, so later variables can reference earlier ones."]})]})}function wM({value:e,collectionId:t}){const{result:n,reroll:r,isEvaluating:i}=lh(e,t,{enableTrace:!1,debounceMs:300});if(!t)return u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Expression detected (save to preview)"});const s=i?"...":n!=null&&n.error?n.error:(n==null?void 0:n.fullText)||"...",o=(n==null?void 0:n.error)!=null;return u.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[u.jsxs("span",{className:me("text-xs",o?"text-destructive":"text-muted-foreground"),children:[" ",s]}),u.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),r()},className:"p-0.5 rounded hover:bg-accent transition-colors",title:"Re-roll expression",children:u.jsx(jf,{className:me("w-3 h-3 text-muted-foreground",i&&"animate-spin")})})]})}function EM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const ru=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function ch(e){return"nodeType"in e}function ir(e){var t,n;return e?vs(e)?e:ch(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function uh(e){const{Document:t}=ir(e);return e instanceof t}function Yo(e){return vs(e)?!1:e instanceof ir(e).HTMLElement}function V0(e){return e instanceof ir(e).SVGElement}function xs(e){return e?vs(e)?e.document:ch(e)?uh(e)?e:Yo(e)||V0(e)?e.ownerDocument:document:document:document}const Xr=ru?N.useLayoutEffect:N.useEffect;function dh(e){const t=N.useRef(e);return Xr(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function kM(){const e=N.useRef(null),t=N.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=N.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function jo(e,t){t===void 0&&(t=[e]);const n=N.useRef(e);return Xr(()=>{n.current!==e&&(n.current=e)},t),n}function Zo(e,t){const n=N.useRef();return N.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Mc(e){const t=dh(e),n=N.useRef(null),r=N.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function uf(e){const t=N.useRef();return N.useEffect(()=>{t.current=e},[e]),t.current}let Sp={};function Xo(e,t){return N.useMemo(()=>{if(t)return t;const n=Sp[e]==null?0:Sp[e]+1;return Sp[e]=n,e+"-"+n},[e,t])}function W0(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const c=Object.entries(o);for(const[d,p]of c){const h=s[d];h!=null&&(s[d]=h+e*p)}return s},{...t})}}const us=W0(1),Oo=W0(-1);function NM(e){return"clientX"in e&&"clientY"in e}function ph(e){if(!e)return!1;const{KeyboardEvent:t}=ir(e.target);return t&&e instanceof t}function SM(e){if(!e)return!1;const{TouchEvent:t}=ir(e.target);return t&&e instanceof t}function df(e){if(SM(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return NM(e)?{x:e.clientX,y:e.clientY}:null}const Mo=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Mo.Translate.toString(e),Mo.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Wy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function CM(e){return e.matches(Wy)?e:e.querySelector(Wy)}const _M={display:"none"};function TM(e){let{id:t,value:n}=e;return Qt.createElement("div",{id:t,style:_M},n)}function DM(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Qt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function RM(){const[e,t]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const G0=N.createContext(null);function AM(e){const t=N.useContext(G0);N.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function IM(){const[e]=N.useState(()=>new Set),t=N.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[N.useCallback(r=>{let{type:i,event:s}=r;e.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,s)})},[e]),t]}const jM={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},OM={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function MM(e){let{announcements:t=OM,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=jM}=e;const{announce:s,announcement:o}=RM(),c=Xo("DndLiveRegion"),[d,p]=N.useState(!1);if(N.useEffect(()=>{p(!0)},[]),AM(N.useMemo(()=>({onDragStart(m){let{active:g}=m;s(t.onDragStart({active:g}))},onDragMove(m){let{active:g,over:b}=m;t.onDragMove&&s(t.onDragMove({active:g,over:b}))},onDragOver(m){let{active:g,over:b}=m;s(t.onDragOver({active:g,over:b}))},onDragEnd(m){let{active:g,over:b}=m;s(t.onDragEnd({active:g,over:b}))},onDragCancel(m){let{active:g,over:b}=m;s(t.onDragCancel({active:g,over:b}))}}),[s,t])),!d)return null;const h=Qt.createElement(Qt.Fragment,null,Qt.createElement(TM,{id:r,value:i.draggable}),Qt.createElement(DM,{id:c,announcement:o}));return n?nr.createPortal(h,n):h}var xn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(xn||(xn={}));function Fc(){}function Gy(e,t){return N.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function FM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Lr=Object.freeze({x:0,y:0});function K0(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Y0(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function LM(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ky(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function Z0(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Yy(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const PM=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Yy(t,t.left,t.top),s=[];for(const o of r){const{id:c}=o,d=n.get(c);if(d){const p=K0(Yy(d),i);s.push({id:c,data:{droppableContainer:o,value:p}})}}return s.sort(Y0)},zM=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Ky(t),s=[];for(const o of r){const{id:c}=o,d=n.get(c);if(d){const p=Ky(d),h=i.reduce((g,b,x)=>g+K0(p[x],b),0),m=Number((h/4).toFixed(4));s.push({id:c,data:{droppableContainer:o,value:m}})}}return s.sort(Y0)};function $M(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),o=i-r,c=s-n;if(r<i&&n<s){const d=t.width*t.height,p=e.width*e.height,h=o*c,m=h/(d+p-h);return Number(m.toFixed(4))}return 0}const BM=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:o}=s,c=n.get(o);if(c){const d=$M(c,t);d>0&&i.push({id:o,data:{droppableContainer:s,value:d}})}}return i.sort(LM)};function UM(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function X0(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Lr}function HM(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,c)=>({...o,top:o.top+e*c.y,bottom:o.bottom+e*c.y,left:o.left+e*c.x,right:o.right+e*c.x}),{...n})}}const qM=HM(1);function VM(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function WM(e,t,n){const r=VM(t);if(!r)return e;const{scaleX:i,scaleY:s,x:o,y:c}=r,d=e.left-o-(1-i)*parseFloat(n),p=e.top-c-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,m=s?e.height/s:e.height;return{width:h,height:m,top:p,right:d+h,bottom:p+m,left:d}}const GM={ignoreTransform:!1};function ws(e,t){t===void 0&&(t=GM);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:h}=ir(e).getComputedStyle(e);p&&(n=WM(n,p,h))}const{top:r,left:i,width:s,height:o,bottom:c,right:d}=n;return{top:r,left:i,width:s,height:o,bottom:c,right:d}}function Zy(e){return ws(e,{ignoreTransform:!0})}function KM(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function YM(e,t){return t===void 0&&(t=ir(e).getComputedStyle(e)),t.position==="fixed"}function ZM(e,t){t===void 0&&(t=ir(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function au(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(uh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Yo(i)||V0(i)||n.includes(i))return n;const s=ir(e).getComputedStyle(i);return i!==e&&ZM(i,s)&&n.push(i),YM(i,s)?n:r(i.parentNode)}return e?r(e):n}function Q0(e){const[t]=au(e,1);return t??null}function Cp(e){return!ru||!e?null:vs(e)?e:ch(e)?uh(e)||e===xs(e).scrollingElement?window:Yo(e)?e:null:null}function J0(e){return vs(e)?e.scrollX:e.scrollLeft}function ew(e){return vs(e)?e.scrollY:e.scrollTop}function pf(e){return{x:J0(e),y:ew(e)}}var _n;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(_n||(_n={}));function tw(e){return!ru||!e?!1:e===document.scrollingElement}function nw(e){const t={x:0,y:0},n=tw(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:c,maxScroll:r,minScroll:t}}const XM={x:.2,y:.2};function QM(e,t,n,r,i){let{top:s,left:o,right:c,bottom:d}=n;r===void 0&&(r=10),i===void 0&&(i=XM);const{isTop:p,isBottom:h,isLeft:m,isRight:g}=nw(e),b={x:0,y:0},x={x:0,y:0},v={height:t.height*i.y,width:t.width*i.x};return!p&&s<=t.top+v.height?(b.y=_n.Backward,x.y=r*Math.abs((t.top+v.height-s)/v.height)):!h&&d>=t.bottom-v.height&&(b.y=_n.Forward,x.y=r*Math.abs((t.bottom-v.height-d)/v.height)),!g&&c>=t.right-v.width?(b.x=_n.Forward,x.x=r*Math.abs((t.right-v.width-c)/v.width)):!m&&o<=t.left+v.width&&(b.x=_n.Backward,x.x=r*Math.abs((t.left+v.width-o)/v.width)),{direction:b,speed:x}}function JM(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function rw(e){return e.reduce((t,n)=>us(t,pf(n)),Lr)}function e5(e){return e.reduce((t,n)=>t+J0(n),0)}function t5(e){return e.reduce((t,n)=>t+ew(n),0)}function n5(e,t){if(t===void 0&&(t=ws),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);Q0(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const r5=[["x",["left","right"],e5],["y",["top","bottom"],t5]];class fh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=au(n),i=rw(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,o,c]of r5)for(const d of o)Object.defineProperty(this,d,{get:()=>{const p=c(r),h=i[s]-p;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class xo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function a5(e){const{EventTarget:t}=ir(e);return e instanceof t?e:xs(e)}function _p(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Er;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Er||(Er={}));function Xy(e){e.preventDefault()}function i5(e){e.stopPropagation()}var Dt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Dt||(Dt={}));const aw={start:[Dt.Space,Dt.Enter],cancel:[Dt.Esc],end:[Dt.Space,Dt.Enter,Dt.Tab]},s5=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Dt.Right:return{...n,x:n.x+25};case Dt.Left:return{...n,x:n.x-25};case Dt.Down:return{...n,y:n.y+25};case Dt.Up:return{...n,y:n.y-25}}};class hh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new xo(xs(n)),this.windowListeners=new xo(ir(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&n5(r),n(Lr)}handleKeyDown(t){if(ph(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=aw,coordinateGetter:o=s5,scrollBehavior:c="smooth"}=i,{code:d}=t;if(s.end.includes(d)){this.handleEnd(t);return}if(s.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:p}=r.current,h=p?{x:p.left,y:p.top}:Lr;this.referenceCoordinates||(this.referenceCoordinates=h);const m=o(t,{active:n,context:r.current,currentCoordinates:h});if(m){const g=Oo(m,h),b={x:0,y:0},{scrollableAncestors:x}=r.current;for(const v of x){const w=t.code,{isTop:k,isRight:C,isLeft:T,isBottom:D,maxScroll:I,minScroll:L}=nw(v),O=JM(v),B={x:Math.min(w===Dt.Right?O.right-O.width/2:O.right,Math.max(w===Dt.Right?O.left:O.left+O.width/2,m.x)),y:Math.min(w===Dt.Down?O.bottom-O.height/2:O.bottom,Math.max(w===Dt.Down?O.top:O.top+O.height/2,m.y))},z=w===Dt.Right&&!C||w===Dt.Left&&!T,j=w===Dt.Down&&!D||w===Dt.Up&&!k;if(z&&B.x!==m.x){const q=v.scrollLeft+g.x,F=w===Dt.Right&&q<=I.x||w===Dt.Left&&q>=L.x;if(F&&!g.y){v.scrollTo({left:q,behavior:c});return}F?b.x=v.scrollLeft-q:b.x=w===Dt.Right?v.scrollLeft-I.x:v.scrollLeft-L.x,b.x&&v.scrollBy({left:-b.x,behavior:c});break}else if(j&&B.y!==m.y){const q=v.scrollTop+g.y,F=w===Dt.Down&&q<=I.y||w===Dt.Up&&q>=L.y;if(F&&!g.x){v.scrollTo({top:q,behavior:c});return}F?b.y=v.scrollTop-q:b.y=w===Dt.Down?v.scrollTop-I.y:v.scrollTop-L.y,b.y&&v.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(t,us(Oo(m,this.referenceCoordinates),b))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}hh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=aw,onActivation:i}=t,{active:s}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const c=s.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Qy(e){return!!(e&&"distance"in e)}function Jy(e){return!!(e&&"delay"in e)}class mh{constructor(t,n,r){var i;r===void 0&&(r=a5(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:o}=s;this.props=t,this.events=n,this.document=xs(o),this.documentListeners=new xo(this.document),this.listeners=new xo(r),this.windowListeners=new xo(ir(o)),this.initialCoordinates=(i=df(s))!=null?i:Lr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.DragStart,Xy),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),this.windowListeners.add(Er.ContextMenu,Xy),this.documentListeners.add(Er.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Jy(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qy(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Er.Click,i5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Er.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:c}}=s;if(!i)return;const d=(n=df(t))!=null?n:Lr,p=Oo(i,d);if(!r&&c){if(Qy(c)){if(c.tolerance!=null&&_p(p,c.tolerance))return this.handleCancel();if(_p(p,c.distance))return this.handleStart()}if(Jy(c)&&_p(p,c.tolerance))return this.handleCancel();this.handlePending(c,p);return}t.cancelable&&t.preventDefault(),o(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Dt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const o5={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gh extends mh{constructor(t){const{event:n}=t,r=xs(n.target);super(t,o5,r)}}gh.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const l5={move:{name:"mousemove"},end:{name:"mouseup"}};var ff;(function(e){e[e.RightClick=2]="RightClick"})(ff||(ff={}));class c5 extends mh{constructor(t){super(t,l5,xs(t.event.target))}}c5.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===ff.RightClick?!1:(r==null||r({event:n}),!0)}}];const Tp={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class u5 extends mh{constructor(t){super(t,Tp)}static setup(){return window.addEventListener(Tp.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Tp.move.name,t)};function t(){}}}u5.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var wo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(wo||(wo={}));var Lc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lc||(Lc={}));function d5(e){let{acceleration:t,activator:n=wo.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:c=Lc.TreeOrder,pointerCoordinates:d,scrollableAncestors:p,scrollableAncestorRects:h,delta:m,threshold:g}=e;const b=f5({delta:m,disabled:!s}),[x,v]=kM(),w=N.useRef({x:0,y:0}),k=N.useRef({x:0,y:0}),C=N.useMemo(()=>{switch(n){case wo.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case wo.DraggableRect:return i}},[n,i,d]),T=N.useRef(null),D=N.useCallback(()=>{const L=T.current;if(!L)return;const O=w.current.x*k.current.x,B=w.current.y*k.current.y;L.scrollBy(O,B)},[]),I=N.useMemo(()=>c===Lc.TreeOrder?[...p].reverse():p,[c,p]);N.useEffect(()=>{if(!s||!p.length||!C){v();return}for(const L of I){if((r==null?void 0:r(L))===!1)continue;const O=p.indexOf(L),B=h[O];if(!B)continue;const{direction:z,speed:j}=QM(L,B,C,t,g);for(const q of["x","y"])b[q][z[q]]||(j[q]=0,z[q]=0);if(j.x>0||j.y>0){v(),T.current=L,x(D,o),w.current=j,k.current=z;return}}w.current={x:0,y:0},k.current={x:0,y:0},v()},[t,D,r,v,s,o,JSON.stringify(C),JSON.stringify(b),x,p,I,h,JSON.stringify(g)])}const p5={x:{[_n.Backward]:!1,[_n.Forward]:!1},y:{[_n.Backward]:!1,[_n.Forward]:!1}};function f5(e){let{delta:t,disabled:n}=e;const r=uf(t);return Zo(i=>{if(n||!r||!i)return p5;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[_n.Backward]:i.x[_n.Backward]||s.x===-1,[_n.Forward]:i.x[_n.Forward]||s.x===1},y:{[_n.Backward]:i.y[_n.Backward]||s.y===-1,[_n.Forward]:i.y[_n.Forward]||s.y===1}}},[n,t,r])}function h5(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Zo(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function m5(e,t){return N.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...s]},[]),[e,t])}var Fo;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Fo||(Fo={}));var hf;(function(e){e.Optimized="optimized"})(hf||(hf={}));const ev=new Map;function g5(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,o]=N.useState(null),{frequency:c,measure:d,strategy:p}=i,h=N.useRef(e),m=w(),g=jo(m),b=N.useCallback(function(k){k===void 0&&(k=[]),!g.current&&o(C=>C===null?k:C.concat(k.filter(T=>!C.includes(T))))},[g]),x=N.useRef(null),v=Zo(k=>{if(m&&!n)return ev;if(!k||k===ev||h.current!==e||s!=null){const C=new Map;for(let T of e){if(!T)continue;if(s&&s.length>0&&!s.includes(T.id)&&T.rect.current){C.set(T.id,T.rect.current);continue}const D=T.node.current,I=D?new fh(d(D),D):null;T.rect.current=I,I&&C.set(T.id,I)}return C}return k},[e,s,n,m,d]);return N.useEffect(()=>{h.current=e},[e]),N.useEffect(()=>{m||b()},[n,m]),N.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),N.useEffect(()=>{m||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{b(),x.current=null},c))},[c,m,b,...r]),{droppableRects:v,measureDroppableContainers:b,measuringScheduled:s!=null};function w(){switch(p){case Fo.Always:return!1;case Fo.BeforeDragging:return n;default:return!n}}}function iw(e,t){return Zo(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function b5(e,t){return iw(e,t)}function y5(e){let{callback:t,disabled:n}=e;const r=dh(t),i=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return N.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function iu(e){let{callback:t,disabled:n}=e;const r=dh(t),i=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return N.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function v5(e){return new fh(ws(e),e)}function tv(e,t,n){t===void 0&&(t=v5);const[r,i]=N.useState(null);function s(){i(d=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=d??n)!=null?p:null}const h=t(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const o=y5({callback(d){if(e)for(const p of d){const{type:h,target:m}=p;if(h==="childList"&&m instanceof HTMLElement&&m.contains(e)){s();break}}}}),c=iu({callback:s});return Xr(()=>{s(),e?(c==null||c.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[e]),r}function x5(e){const t=iw(e);return X0(e,t)}const nv=[];function w5(e){const t=N.useRef(e),n=Zo(r=>e?r&&r!==nv&&e&&t.current&&e.parentNode===t.current.parentNode?r:au(e):nv,[e]);return N.useEffect(()=>{t.current=e},[e]),n}function E5(e){const[t,n]=N.useState(null),r=N.useRef(e),i=N.useCallback(s=>{const o=Cp(s.target);o&&n(c=>c?(c.set(o,pf(o)),new Map(c)):null)},[]);return N.useEffect(()=>{const s=r.current;if(e!==s){o(s);const c=e.map(d=>{const p=Cp(d);return p?(p.addEventListener("scroll",i,{passive:!0}),[p,pf(p)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),r.current=e}return()=>{o(e),o(s)};function o(c){c.forEach(d=>{const p=Cp(d);p==null||p.removeEventListener("scroll",i)})}},[i,e]),N.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,o)=>us(s,o),Lr):rw(e):Lr,[e,t])}function rv(e,t){t===void 0&&(t=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},t),N.useEffect(()=>{const r=e!==Lr;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Oo(e,n.current):Lr}function k5(e){N.useEffect(()=>{if(!ru)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function N5(e,t){return N.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,t)},n},{}),[e,t])}function sw(e){return N.useMemo(()=>e?KM(e):null,[e])}const av=[];function S5(e,t){t===void 0&&(t=ws);const[n]=e,r=sw(n?ir(n):null),[i,s]=N.useState(av);function o(){s(()=>e.length?e.map(d=>tw(d)?r:new fh(t(d),d)):av)}const c=iu({callback:o});return Xr(()=>{c==null||c.disconnect(),o(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),i}function C5(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Yo(t)?t:e}function _5(e){let{measure:t}=e;const[n,r]=N.useState(null),i=N.useCallback(p=>{for(const{target:h}of p)if(Yo(h)){r(m=>{const g=t(h);return m?{...m,width:g.width,height:g.height}:g});break}},[t]),s=iu({callback:i}),o=N.useCallback(p=>{const h=C5(p);s==null||s.disconnect(),h&&(s==null||s.observe(h)),r(h?t(h):null)},[t,s]),[c,d]=Mc(o);return N.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const T5=[{sensor:gh,options:{}},{sensor:hh,options:{}}],D5={current:{}},wc={draggable:{measure:Zy},droppable:{measure:Zy,strategy:Fo.WhileDragging,frequency:hf.Optimized},dragOverlay:{measure:ws}};class Eo extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const R5={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Eo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:wc,measureDroppableContainers:Fc,windowRect:null,measuringScheduled:!1},A5={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fc,draggableNodes:new Map,over:null,measureDroppableContainers:Fc},su=N.createContext(A5),ow=N.createContext(R5);function I5(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Eo}}}function j5(e,t){switch(t.type){case xn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xn.DragEnd:case xn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xn.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Eo(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case xn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new Eo(e.droppable.containers);return o.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case xn.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Eo(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function O5(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=N.useContext(su),s=uf(r),o=uf(n==null?void 0:n.id);return N.useEffect(()=>{if(!t&&!r&&s&&o!=null){if(!ph(s)||document.activeElement===s.target)return;const c=i.get(o);if(!c)return;const{activatorNode:d,node:p}=c;if(!d.current&&!p.current)return;requestAnimationFrame(()=>{for(const h of[d.current,p.current]){if(!h)continue;const m=CM(h);if(m){m.focus();break}}})}},[r,t,i,o,s]),null}function M5(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function F5(e){return N.useMemo(()=>({draggable:{...wc.draggable,...e==null?void 0:e.draggable},droppable:{...wc.droppable,...e==null?void 0:e.droppable},dragOverlay:{...wc.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function L5(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=N.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Xr(()=>{if(!o&&!c||!t){s.current=!1;return}if(s.current||!r)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const h=n(p),m=X0(h,r);if(o||(m.x=0),c||(m.y=0),s.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const g=Q0(p);g&&g.scrollBy({top:m.y,left:m.x})}},[t,o,c,r,n])}const lw=N.createContext({...Lr,scaleX:1,scaleY:1});var qa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qa||(qa={}));const P5=N.memo(function(t){var n,r,i,s;let{id:o,accessibility:c,autoScroll:d=!0,children:p,sensors:h=T5,collisionDetection:m=BM,measuring:g,modifiers:b,...x}=t;const v=N.useReducer(j5,void 0,I5),[w,k]=v,[C,T]=IM(),[D,I]=N.useState(qa.Uninitialized),L=D===qa.Initialized,{draggable:{active:O,nodes:B,translate:z},droppable:{containers:j}}=w,q=O!=null?B.get(O):null,F=N.useRef({initial:null,translated:null}),G=N.useMemo(()=>{var Nt;return O!=null?{id:O,data:(Nt=q==null?void 0:q.data)!=null?Nt:D5,rect:F}:null},[O,q]),_=N.useRef(null),[H,se]=N.useState(null),[ne,Z]=N.useState(null),J=jo(x,Object.values(x)),P=Xo("DndDescribedBy",o),M=N.useMemo(()=>j.getEnabled(),[j]),U=F5(g),{droppableRects:A,measureDroppableContainers:te,measuringScheduled:ce}=g5(M,{dragging:L,dependencies:[z.x,z.y],config:U.droppable}),Ee=h5(B,O),Ue=N.useMemo(()=>ne?df(ne):null,[ne]),Te=Tn(),$e=b5(Ee,U.draggable.measure);L5({activeNode:O!=null?B.get(O):null,config:Te.layoutShiftCompensation,initialRect:$e,measure:U.draggable.measure});const le=tv(Ee,U.draggable.measure,$e),rt=tv(Ee?Ee.parentElement:null),at=N.useRef({activatorEvent:null,active:null,activeNode:Ee,collisionRect:null,collisions:null,droppableRects:A,draggableNodes:B,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),wt=j.getNodeFor((n=at.current.over)==null?void 0:n.id),R=_5({measure:U.dragOverlay.measure}),ge=(r=R.nodeRef.current)!=null?r:Ee,oe=L?(i=R.rect)!=null?i:le:null,K=!!(R.nodeRef.current&&R.rect),W=x5(K?null:le),re=sw(ge?ir(ge):null),ve=w5(L?wt??Ee:null),we=S5(ve),de=M5(b,{transform:{x:z.x-W.x,y:z.y-W.y,scaleX:1,scaleY:1},activatorEvent:ne,active:G,activeNodeRect:le,containerNodeRect:rt,draggingNodeRect:oe,over:at.current.over,overlayNodeRect:R.rect,scrollableAncestors:ve,scrollableAncestorRects:we,windowRect:re}),Ce=Ue?us(Ue,z):null,Oe=E5(ve),_e=rv(Oe),ie=rv(Oe,[le]),xe=us(de,_e),Ne=oe?qM(oe,de):null,Ve=G&&Ne?m({active:G,collisionRect:Ne,droppableRects:A,droppableContainers:M,pointerCoordinates:Ce}):null,ct=Z0(Ve,"id"),[ht,sn]=N.useState(null),ut=K?de:us(de,ie),un=UM(ut,(s=ht==null?void 0:ht.rect)!=null?s:null,le),fn=N.useRef(null),_t=N.useCallback((Nt,Pt)=>{let{sensor:X,options:ye}=Pt;if(_.current==null)return;const Re=B.get(_.current);if(!Re)return;const Ke=Nt.nativeEvent,bt=new X({active:_.current,activeNode:Re,event:Ke,options:ye,context:at,onAbort(Le){if(!B.get(Le))return;const{onDragAbort:Q}=J.current,ue={id:Le};Q==null||Q(ue),C({type:"onDragAbort",event:ue})},onPending(Le,V,Q,ue){if(!B.get(Le))return;const{onDragPending:Ie}=J.current,Be={id:Le,constraint:V,initialCoordinates:Q,offset:ue};Ie==null||Ie(Be),C({type:"onDragPending",event:Be})},onStart(Le){const V=_.current;if(V==null)return;const Q=B.get(V);if(!Q)return;const{onDragStart:ue}=J.current,be={activatorEvent:Ke,active:{id:V,data:Q.data,rect:F}};nr.unstable_batchedUpdates(()=>{ue==null||ue(be),I(qa.Initializing),k({type:xn.DragStart,initialCoordinates:Le,active:V}),C({type:"onDragStart",event:be}),se(fn.current),Z(Ke)})},onMove(Le){k({type:xn.DragMove,coordinates:Le})},onEnd:It(xn.DragEnd),onCancel:It(xn.DragCancel)});fn.current=bt;function It(Le){return async function(){const{active:Q,collisions:ue,over:be,scrollAdjustedTranslate:Ie}=at.current;let Be=null;if(Q&&Ie){const{cancelDrop:tt}=J.current;Be={activatorEvent:Ke,active:Q,collisions:ue,delta:Ie,over:be},Le===xn.DragEnd&&typeof tt=="function"&&await Promise.resolve(tt(Be))&&(Le=xn.DragCancel)}_.current=null,nr.unstable_batchedUpdates(()=>{k({type:Le}),I(qa.Uninitialized),sn(null),se(null),Z(null),fn.current=null;const tt=Le===xn.DragEnd?"onDragEnd":"onDragCancel";if(Be){const He=J.current[tt];He==null||He(Be),C({type:tt,event:Be})}})}}},[B]),bn=N.useCallback((Nt,Pt)=>(X,ye)=>{const Re=X.nativeEvent,Ke=B.get(ye);if(_.current!==null||!Ke||Re.dndKit||Re.defaultPrevented)return;const bt={active:Ke};Nt(X,Pt.options,bt)===!0&&(Re.dndKit={capturedBy:Pt.sensor},_.current=ye,_t(X,Pt))},[B,_t]),Kt=m5(h,bn);k5(h),Xr(()=>{le&&D===qa.Initializing&&I(qa.Initialized)},[le,D]),N.useEffect(()=>{const{onDragMove:Nt}=J.current,{active:Pt,activatorEvent:X,collisions:ye,over:Re}=at.current;if(!Pt||!X)return;const Ke={active:Pt,activatorEvent:X,collisions:ye,delta:{x:xe.x,y:xe.y},over:Re};nr.unstable_batchedUpdates(()=>{Nt==null||Nt(Ke),C({type:"onDragMove",event:Ke})})},[xe.x,xe.y]),N.useEffect(()=>{const{active:Nt,activatorEvent:Pt,collisions:X,droppableContainers:ye,scrollAdjustedTranslate:Re}=at.current;if(!Nt||_.current==null||!Pt||!Re)return;const{onDragOver:Ke}=J.current,bt=ye.get(ct),It=bt&&bt.rect.current?{id:bt.id,rect:bt.rect.current,data:bt.data,disabled:bt.disabled}:null,Le={active:Nt,activatorEvent:Pt,collisions:X,delta:{x:Re.x,y:Re.y},over:It};nr.unstable_batchedUpdates(()=>{sn(It),Ke==null||Ke(Le),C({type:"onDragOver",event:Le})})},[ct]),Xr(()=>{at.current={activatorEvent:ne,active:G,activeNode:Ee,collisionRect:Ne,collisions:Ve,droppableRects:A,draggableNodes:B,draggingNode:ge,draggingNodeRect:oe,droppableContainers:j,over:ht,scrollableAncestors:ve,scrollAdjustedTranslate:xe},F.current={initial:oe,translated:Ne}},[G,Ee,Ve,Ne,B,ge,oe,A,j,ht,ve,xe]),d5({...Te,delta:z,draggingRect:Ne,pointerCoordinates:Ce,scrollableAncestors:ve,scrollableAncestorRects:we});const $n=N.useMemo(()=>({active:G,activeNode:Ee,activeNodeRect:le,activatorEvent:ne,collisions:Ve,containerNodeRect:rt,dragOverlay:R,draggableNodes:B,droppableContainers:j,droppableRects:A,over:ht,measureDroppableContainers:te,scrollableAncestors:ve,scrollableAncestorRects:we,measuringConfiguration:U,measuringScheduled:ce,windowRect:re}),[G,Ee,le,ne,Ve,rt,R,B,j,A,ht,te,ve,we,U,ce,re]),sr=N.useMemo(()=>({activatorEvent:ne,activators:Kt,active:G,activeNodeRect:le,ariaDescribedById:{draggable:P},dispatch:k,draggableNodes:B,over:ht,measureDroppableContainers:te}),[ne,Kt,G,le,k,P,B,ht,te]);return Qt.createElement(G0.Provider,{value:T},Qt.createElement(su.Provider,{value:sr},Qt.createElement(ow.Provider,{value:$n},Qt.createElement(lw.Provider,{value:un},p)),Qt.createElement(O5,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Qt.createElement(MM,{...c,hiddenTextDescribedById:P}));function Tn(){const Nt=(H==null?void 0:H.autoScrollEnabled)===!1,Pt=typeof d=="object"?d.enabled===!1:d===!1,X=L&&!Nt&&!Pt;return typeof d=="object"?{...d,enabled:X}:{enabled:X}}}),z5=N.createContext(null),iv="button",$5="Draggable";function B5(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Xo($5),{activators:o,activatorEvent:c,active:d,activeNodeRect:p,ariaDescribedById:h,draggableNodes:m,over:g}=N.useContext(su),{role:b=iv,roleDescription:x="draggable",tabIndex:v=0}=i??{},w=(d==null?void 0:d.id)===t,k=N.useContext(w?lw:z5),[C,T]=Mc(),[D,I]=Mc(),L=N5(o,t),O=jo(n);Xr(()=>(m.set(t,{id:t,key:s,node:C,activatorNode:D,data:O}),()=>{const z=m.get(t);z&&z.key===s&&m.delete(t)}),[m,t]);const B=N.useMemo(()=>({role:b,tabIndex:v,"aria-disabled":r,"aria-pressed":w&&b===iv?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,b,v,w,x,h.draggable]);return{active:d,activatorEvent:c,activeNodeRect:p,attributes:B,isDragging:w,listeners:r?void 0:L,node:C,over:g,setNodeRef:T,setActivatorNodeRef:I,transform:k}}function U5(){return N.useContext(ow)}const H5="Droppable",q5={timeout:25};function V5(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Xo(H5),{active:o,dispatch:c,over:d,measureDroppableContainers:p}=N.useContext(su),h=N.useRef({disabled:n}),m=N.useRef(!1),g=N.useRef(null),b=N.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:w}={...q5,...i},k=jo(v??r),C=N.useCallback(()=>{if(!m.current){m.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{p(Array.isArray(k.current)?k.current:[k.current]),b.current=null},w)},[w]),T=iu({callback:C,disabled:x||!o}),D=N.useCallback((B,z)=>{T&&(z&&(T.unobserve(z),m.current=!1),B&&T.observe(B))},[T]),[I,L]=Mc(D),O=jo(t);return N.useEffect(()=>{!T||!I.current||(T.disconnect(),m.current=!1,T.observe(I.current))},[I,T]),N.useEffect(()=>(c({type:xn.RegisterDroppable,element:{id:r,key:s,disabled:n,node:I,rect:g,data:O}}),()=>c({type:xn.UnregisterDroppable,key:s,id:r})),[r]),N.useEffect(()=>{n!==h.current.disabled&&(c({type:xn.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,c]),{active:o,rect:g,isOver:(d==null?void 0:d.id)===r,node:I,over:d,setNodeRef:L}}function bh(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function W5(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function dc(e){return e!==null&&e>=0}function G5(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function K5(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const cw=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=bh(t,r,n),o=t[i],c=s[i];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},pc={scaleX:1,scaleY:1},Y5=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=e;const c=(t=s[n])!=null?t:r;if(!c)return null;if(i===n){const p=s[o];return p?{x:0,y:n<o?p.top+p.height-(c.top+c.height):p.top-c.top,...pc}:null}const d=Z5(s,i,n);return i>n&&i<=o?{x:0,y:-c.height-d,...pc}:i<n&&i>=o?{x:0,y:c.height+d,...pc}:{x:0,y:0,...pc}};function Z5(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const uw="Sortable",dw=Qt.createContext({activeIndex:-1,containerId:uw,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:cw,disabled:{draggable:!1,droppable:!1}});function X5(e){let{children:t,id:n,items:r,strategy:i=cw,disabled:s=!1}=e;const{active:o,dragOverlay:c,droppableRects:d,over:p,measureDroppableContainers:h}=U5(),m=Xo(uw,n),g=c.rect!==null,b=N.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),x=o!=null,v=o?b.indexOf(o.id):-1,w=p?b.indexOf(p.id):-1,k=N.useRef(b),C=!G5(b,k.current),T=w!==-1&&v===-1||C,D=K5(s);Xr(()=>{C&&x&&h(b)},[C,b,x,h]),N.useEffect(()=>{k.current=b},[b]);const I=N.useMemo(()=>({activeIndex:v,containerId:m,disabled:D,disableTransforms:T,items:b,overIndex:w,useDragOverlay:g,sortedRects:W5(b,d),strategy:i}),[v,m,D.draggable,D.droppable,T,b,w,d,g,i]);return Qt.createElement(dw.Provider,{value:I},t)}const Q5=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return bh(n,r,i).indexOf(t)},J5=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:c,previousContainerId:d,transition:p}=e;return!p||!r||c!==s&&i===o?!1:n?!0:o!==i&&t===d},e4={duration:200,easing:"ease"},pw="transform",t4=Mo.Transition.toString({property:pw,duration:0,easing:"linear"}),n4={roleDescription:"sortable"};function r4(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,o]=N.useState(null),c=N.useRef(n);return Xr(()=>{if(!t&&n!==c.current&&r.current){const d=i.current;if(d){const p=ws(r.current,{ignoreTransform:!0}),h={x:d.left-p.left,y:d.top-p.top,scaleX:d.width/p.width,scaleY:d.height/p.height};(h.x||h.y)&&o(h)}}n!==c.current&&(c.current=n)},[t,n,r,i]),N.useEffect(()=>{s&&o(null)},[s]),s}function a4(e){let{animateLayoutChanges:t=J5,attributes:n,disabled:r,data:i,getNewIndex:s=Q5,id:o,strategy:c,resizeObserverConfig:d,transition:p=e4}=e;const{items:h,containerId:m,activeIndex:g,disabled:b,disableTransforms:x,sortedRects:v,overIndex:w,useDragOverlay:k,strategy:C}=N.useContext(dw),T=i4(r,b),D=h.indexOf(o),I=N.useMemo(()=>({sortable:{containerId:m,index:D,items:h},...i}),[m,i,D,h]),L=N.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:O,node:B,isOver:z,setNodeRef:j}=V5({id:o,data:I,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...d}}),{active:q,activatorEvent:F,activeNodeRect:G,attributes:_,setNodeRef:H,listeners:se,isDragging:ne,over:Z,setActivatorNodeRef:J,transform:P}=B5({id:o,data:I,attributes:{...n4,...n},disabled:T.draggable}),M=EM(j,H),U=!!q,A=U&&!x&&dc(g)&&dc(w),te=!k&&ne,ce=te&&A?P:null,Ue=A?ce??(c??C)({rects:v,activeNodeRect:G,activeIndex:g,overIndex:w,index:D}):null,Te=dc(g)&&dc(w)?s({id:o,items:h,activeIndex:g,overIndex:w}):D,$e=q==null?void 0:q.id,le=N.useRef({activeId:$e,items:h,newIndex:Te,containerId:m}),rt=h!==le.current.items,at=t({active:q,containerId:m,isDragging:ne,isSorting:U,id:o,index:D,items:h,newIndex:le.current.newIndex,previousItems:le.current.items,previousContainerId:le.current.containerId,transition:p,wasDragging:le.current.activeId!=null}),wt=r4({disabled:!at,index:D,node:B,rect:O});return N.useEffect(()=>{U&&le.current.newIndex!==Te&&(le.current.newIndex=Te),m!==le.current.containerId&&(le.current.containerId=m),h!==le.current.items&&(le.current.items=h)},[U,Te,m,h]),N.useEffect(()=>{if($e===le.current.activeId)return;if($e!=null&&le.current.activeId==null){le.current.activeId=$e;return}const ge=setTimeout(()=>{le.current.activeId=$e},50);return()=>clearTimeout(ge)},[$e]),{active:q,activeIndex:g,attributes:_,data:I,rect:O,index:D,newIndex:Te,items:h,isOver:z,isSorting:U,isDragging:ne,listeners:se,node:B,overIndex:w,over:Z,setNodeRef:M,setActivatorNodeRef:J,setDroppableNodeRef:j,setDraggableNodeRef:H,transform:wt??Ue,transition:R()};function R(){if(wt||rt&&le.current.newIndex===D)return t4;if(!(te&&!ph(F)||!p)&&(U||at))return Mo.Transition.toString({...p,property:pw})}}function i4(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Pc(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const s4=[Dt.Down,Dt.Right,Dt.Up,Dt.Left],o4=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:c}}=t;if(s4.includes(e.code)){if(e.preventDefault(),!n||!r)return;const d=[];s.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const g=i.get(m.id);if(g)switch(e.code){case Dt.Down:r.top<g.top&&d.push(m);break;case Dt.Up:r.top>g.top&&d.push(m);break;case Dt.Left:r.left>g.left&&d.push(m);break;case Dt.Right:r.left<g.left&&d.push(m);break}});const p=zM({collisionRect:r,droppableRects:i,droppableContainers:d});let h=Z0(p,"id");if(h===(o==null?void 0:o.id)&&p.length>1&&(h=p[1].id),h!=null){const m=s.get(n.id),g=s.get(h),b=g?i.get(g.id):null,x=g==null?void 0:g.node.current;if(x&&b&&m&&g){const w=au(x).some((L,O)=>c[O]!==L),k=fw(m,g),C=l4(m,g),T=w||!k?{x:0,y:0}:{x:C?r.width-b.width:0,y:C?r.height-b.height:0},D={x:b.left,y:b.top};return T.x&&T.y?D:Oo(D,T)}}}};function fw(e,t){return!Pc(e)||!Pc(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function l4(e,t){return!Pc(e)||!Pc(t)||!fw(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function c4({items:e,getItemId:t,onReorder:n,children:r}){const i=FM(Gy(gh,{activationConstraint:{distance:8}}),Gy(hh,{coordinateGetter:o4})),s=N.useCallback(c=>{const{active:d,over:p}=c;if(p&&d.id!==p.id){const h=e.findIndex(g=>t(g)===d.id),m=e.findIndex(g=>t(g)===p.id);h!==-1&&m!==-1&&n(bh(e,h,m))}},[e,t,n]),o=e.map(t);return u.jsx(P5,{sensors:i,collisionDetection:PM,onDragEnd:s,children:u.jsx(X5,{items:o,strategy:Y5,children:r})})}function u4({id:e,children:t,className:n,handleClassName:r}){const{attributes:i,listeners:s,setNodeRef:o,transform:c,transition:d,isDragging:p}=a4({id:e}),h={transform:Mo.Transform.toString(c),transition:d};return u.jsx("div",{ref:o,style:h,className:me("relative",p&&"z-50 opacity-90 shadow-lg",n),children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx("button",{type:"button",className:me("flex-shrink-0 p-1.5 mt-2 rounded cursor-grab active:cursor-grabbing","text-muted-foreground/40 hover:text-muted-foreground hover:bg-accent/50","transition-colors touch-none",r),...i,...s,"aria-label":"Drag to reorder",children:u.jsx(RN,{className:"h-4 w-4"})}),u.jsx("div",{className:"flex-1 min-w-0",children:t})]})})}function d4({table:e,onChange:t,onDelete:n,availableTableIds:r,defaultExpanded:i=!1,collectionId:s}){const[o,c]=N.useState(i);N.useEffect(()=>{i&&c(!0)},[i]);const d=N.useCallback((h,m)=>{t({...e,[h]:m})},[e,t]),p=N.useCallback(h=>{if(h===e.type)return;const m={id:e.id,name:e.name,type:h,description:e.description,tags:e.tags,hidden:e.hidden,defaultSets:e.defaultSets,resultType:e.resultType};let g;h==="simple"?g={...m,type:"simple",entries:[{value:"New entry"}]}:h==="composite"?g={...m,type:"composite",sources:[{tableId:""}]}:g={...m,type:"collection",collections:[]},t(g)},[e,t]);return u.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[u.jsxs("div",{className:me("flex items-center gap-3 p-4 cursor-pointer hover:bg-accent/50 transition-colors",o&&"border-b"),onClick:()=>c(!o),children:[o?u.jsx(Fr,{className:"h-5 w-5 text-muted-foreground"}):u.jsx(rr,{className:"h-5 w-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium truncate",children:e.name||"Untitled Table"}),u.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-muted text-muted-foreground",children:e.type}),e.hidden&&u.jsx("span",{title:"Hidden",children:u.jsx(Co,{className:"h-4 w-4 text-muted-foreground"})})]}),u.jsx("span",{className:"text-sm text-muted-foreground",children:e.id})]}),u.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),n()},className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors",title:"Delete table",children:u.jsx(zr,{className:"h-4 w-4"})})]}),o&&u.jsxs("div",{className:"p-4 space-y-6",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Table ID ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx("input",{type:"text",value:e.id,onChange:h=>d("id",h.target.value),placeholder:"uniqueTableId",className:"w-full p-2 border rounded-md bg-background text-sm"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Name ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx("input",{type:"text",value:e.name,onChange:h=>d("name",h.target.value),placeholder:"Table Name",className:"w-full p-2 border rounded-md bg-background text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),u.jsxs("select",{value:e.type,onChange:h=>p(h.target.value),className:"w-full p-2 border rounded-md bg-background text-sm",children:[u.jsx("option",{value:"simple",children:"Simple (Weighted Entries)"}),u.jsx("option",{value:"composite",children:"Composite (Select Table)"}),u.jsx("option",{value:"collection",children:"Collection (Merge Tables)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Result Type"}),u.jsx("input",{type:"text",value:e.resultType||"",onChange:h=>d("resultType",h.target.value||void 0),placeholder:"creature, item, etc.",className:"w-full p-2 border rounded-md bg-background text-sm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),u.jsx("textarea",{value:e.description||"",onChange:h=>d("description",h.target.value||void 0),placeholder:"Table description (Markdown supported)",rows:2,className:"w-full p-2 border rounded-md bg-background text-sm resize-y"})]}),u.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"checkbox",checked:e.hidden||!1,onChange:h=>d("hidden",h.target.checked||void 0),className:"rounded border-gray-300"}),u.jsxs("span",{className:"flex items-center gap-1",children:[e.hidden?u.jsx(Co,{className:"h-4 w-4"}):u.jsx(Wv,{className:"h-4 w-4"}),"Hidden from UI"]})]}),e.type==="simple"&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-sm",children:"Extends:"}),u.jsxs("select",{value:e.extends||"",onChange:h=>d("extends",h.target.value||void 0),className:"p-2 border rounded-md bg-background text-sm",children:[u.jsx("option",{value:"",children:"None"}),r.filter(h=>h!==e.id).map(h=>u.jsx("option",{value:h,children:h},h))]})]})]}),u.jsxs("details",{className:"border rounded-lg",children:[u.jsx("summary",{className:"px-4 py-3 cursor-pointer hover:bg-accent/50 transition-colors list-none",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium text-sm",children:"Shared Variables"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"}),u.jsxs("div",{className:"group relative",children:[u.jsx(Ei,{className:"h-4 w-4 text-muted-foreground cursor-help"}),u.jsx("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:"Table-level shared variables are evaluated lazily when this table is rolled, not when the document loads. They propagate to any nested table references. Cannot shadow document-level variables."})]})]})}),u.jsxs("div",{className:"p-4 border-t space-y-3",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Variables evaluated when this table is rolled. Available to nested table references."}),u.jsx(Oc,{value:e.shared||{},onChange:h=>d("shared",Object.keys(h).length>0?h:void 0),keyPlaceholder:"Variable name",valuePlaceholder:"Value (supports {{dice:}}, {{math:}}, etc.)",keyPattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only",valueSupportsExpressions:!0,collectionId:s})]})]}),e.type==="simple"&&u.jsx(p4,{table:e,onChange:t,collectionId:s}),e.type==="composite"&&u.jsx(f4,{table:e,onChange:t,availableTableIds:r}),e.type==="collection"&&u.jsx(h4,{table:e,onChange:t,availableTableIds:r})]})]})}function p4({table:e,onChange:t,collectionId:n}){const[r,i]=N.useState(null);N.useEffect(()=>{if(r!==null){const h=setTimeout(()=>i(null),100);return()=>clearTimeout(h)}},[r]);const s=N.useCallback(()=>{const h=e.entries.length;t({...e,entries:[...e.entries,{value:""}]}),i(h)},[e,t]),o=N.useCallback((h,m)=>{const g=[...e.entries];g[h]=m,t({...e,entries:g})},[e,t]),c=N.useCallback(h=>{e.entries.length<=1||t({...e,entries:e.entries.filter((m,g)=>g!==h)})},[e,t]),d=N.useCallback(h=>{t({...e,entries:h})},[e,t]),p=N.useCallback((h,m)=>h.id||`entry-${m}`,[]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"font-medium",children:["Entries (",e.entries.length,")"]}),u.jsxs("button",{type:"button",onClick:s,className:"flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md hover:bg-accent transition-colors",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add Entry"]})]}),u.jsx(c4,{items:e.entries,getItemId:h=>p(h,e.entries.indexOf(h)),onReorder:d,children:u.jsx("div",{className:"space-y-2",children:e.entries.map((h,m)=>u.jsx(u4,{id:p(h,m),children:u.jsx(vM,{entry:h,onChange:g=>o(m,g),onDelete:()=>c(m),onAddEntry:s,index:m,canDelete:e.entries.length>1,collectionId:n,autoFocus:r===m})},p(h,m)))})})]})}function f4({table:e,onChange:t,availableTableIds:n}){const r=N.useCallback(()=>{t({...e,sources:[...e.sources,{tableId:"",weight:1}]})},[e,t]),i=N.useCallback((o,c)=>{const d=[...e.sources];d[o]=c,t({...e,sources:d})},[e,t]),s=N.useCallback(o=>{e.sources.length<=1||t({...e,sources:e.sources.filter((c,d)=>d!==o)})},[e,t]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"font-medium",children:["Source Tables (",e.sources.length,")"]}),u.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md hover:bg-accent transition-colors",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add Source"]})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Composite tables select one source table based on weight, then roll on that table."}),u.jsx("div",{className:"space-y-2",children:e.sources.map((o,c)=>u.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[u.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:["#",c+1]}),u.jsxs("select",{value:o.tableId,onChange:d=>i(c,{...o,tableId:d.target.value}),className:"flex-1 p-2 border rounded-md bg-background text-sm",children:[u.jsx("option",{value:"",children:"Select a table..."}),n.filter(d=>d!==e.id).map(d=>u.jsx("option",{value:d,children:d},d))]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("label",{className:"text-sm text-muted-foreground",children:"Weight:"}),u.jsx("input",{type:"number",value:o.weight??1,onChange:d=>i(c,{...o,weight:parseFloat(d.target.value)||1}),min:0,step:.1,className:"w-16 p-2 border rounded-md bg-background text-sm text-center"})]}),u.jsx("button",{type:"button",onClick:()=>s(c),disabled:e.sources.length<=1,className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",children:u.jsx(zr,{className:"h-4 w-4"})})]},c))})]})}function h4({table:e,onChange:t,availableTableIds:n}){const r=N.useCallback(()=>{t({...e,collections:[...e.collections,""]})},[e,t]),i=N.useCallback((o,c)=>{const d=[...e.collections];d[o]=c,t({...e,collections:d})},[e,t]),s=N.useCallback(o=>{e.collections.length<=1||t({...e,collections:e.collections.filter((c,d)=>d!==o)})},[e,t]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"font-medium",children:["Collected Tables (",e.collections.length,")"]}),u.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md hover:bg-accent transition-colors",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add Table"]})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Collection tables merge all entries from multiple tables into a single pool."}),u.jsx("div",{className:"space-y-2",children:e.collections.map((o,c)=>u.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[u.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:["#",c+1]}),u.jsxs("select",{value:o,onChange:d=>i(c,d.target.value),className:"flex-1 p-2 border rounded-md bg-background text-sm",children:[u.jsx("option",{value:"",children:"Select a table..."}),n.filter(d=>d!==e.id).map(d=>u.jsx("option",{value:d,children:d},d))]}),u.jsx("button",{type:"button",onClick:()=>s(c),disabled:e.collections.length<=1,className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",children:u.jsx(zr,{className:"h-4 w-4"})})]},c))})]})}const m4=[{id:"dice",label:"Dice Roll",insertText:"{{dice:2d6}}",group:"syntax",icon:Sr,description:"Roll dice (e.g., 2d6, 1d20+5)"},{id:"math",label:"Math Expression",insertText:"{{math:1 + 2}}",group:"syntax",icon:Sf,description:"Calculate math expressions"},{id:"variable",label:"Variable Reference",insertText:"{{$variableName}}",group:"syntax",icon:Kc,description:"Reference a shared variable"},{id:"again",label:"Re-roll (Again)",insertText:"{{again}}",group:"syntax",icon:Mf,description:"Re-roll the previous value"}];function g4({availableTableIds:e,availableTemplateIds:t,onInsert:n,buttonClassName:r}){const[i,s]=N.useState(!1),[o,c]=N.useState(""),[d,p]=N.useState(0),h=N.useRef(null),m=N.useRef(null),g=N.useRef(null),[b,x]=N.useState({top:0,left:0}),v=N.useMemo(()=>{const z=e.map(q=>({id:`table-${q}`,label:q,insertText:`{{${q}}}`,group:"tables",icon:Zr})),j=t.map(q=>({id:`template-${q}`,label:q,insertText:`{{${q}}}`,group:"templates",icon:ma}));return[...z,...j,...m4]},[e,t]),w=N.useMemo(()=>{if(!o.trim())return v;const z=o.toLowerCase();return v.filter(j=>{var q;return j.label.toLowerCase().includes(z)||((q=j.description)==null?void 0:q.toLowerCase().includes(z))})},[v,o]),k=N.useMemo(()=>{const z={tables:[],templates:[],syntax:[]};return w.forEach(j=>{z[j.group].push(j)}),z},[w]);N.useEffect(()=>{if(i&&h.current){const z=h.current.getBoundingClientRect();x({top:z.bottom+4,left:z.left}),setTimeout(()=>{var j;return(j=g.current)==null?void 0:j.focus()},0)}},[i]),N.useEffect(()=>{i||(c(""),p(0))},[i]),N.useEffect(()=>{const z=j=>{m.current&&!m.current.contains(j.target)&&h.current&&!h.current.contains(j.target)&&s(!1)};if(i)return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[i]);const C=N.useCallback(z=>{switch(z.key){case"ArrowDown":z.preventDefault(),p(j=>Math.min(j+1,w.length-1));break;case"ArrowUp":z.preventDefault(),p(j=>Math.max(j-1,0));break;case"Enter":z.preventDefault(),w[d]&&(n(w[d].insertText),s(!1));break;case"Escape":z.preventDefault(),s(!1);break}},[w,d,n]),T=N.useCallback(z=>{n(z.insertText),s(!1)},[n]),D=(z,j,q)=>j.length===0?null:u.jsxs("div",{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 bg-muted/30",children:z}),j.map((F,G)=>{const _=F.icon,H=q+G;return u.jsxs("button",{className:me("w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors",H===d?"bg-primary/10 text-primary":"hover:bg-accent/50"),onClick:()=>T(F),onMouseEnter:()=>p(H),children:[u.jsx(_,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium truncate",children:F.label}),F.description&&u.jsx("div",{className:"text-xs text-muted-foreground truncate",children:F.description})]}),u.jsx("code",{className:"text-xs text-muted-foreground/60 font-mono truncate max-w-[100px]",children:F.insertText})]},F.id)})]},z);let I=0;const L=I;I+=k.tables.length;const O=I;I+=k.templates.length;const B=I;return u.jsxs(u.Fragment,{children:[u.jsxs("button",{ref:h,type:"button",onClick:()=>s(!i),className:me("flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-lg border transition-colors","hover:bg-accent hover:border-border",i&&"bg-accent border-border",r),title:"Insert table or syntax reference",children:[u.jsx(Nr,{className:"h-3.5 w-3.5"}),"Insert"]}),i&&nr.createPortal(u.jsxs("div",{ref:m,className:"fixed z-50 w-72 bg-popover border border-border/50 rounded-xl shadow-xl overflow-hidden animate-fade-in",style:{top:b.top,left:b.left},onKeyDown:C,children:[u.jsx("div",{className:"p-2 border-b border-border/30",children:u.jsxs("div",{className:"relative",children:[u.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),u.jsx("input",{ref:g,type:"text",value:o,onChange:z=>{c(z.target.value),p(0)},placeholder:"Search tables, templates...",className:"w-full pl-9 pr-3 py-2 text-sm bg-background border border-border/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]})}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:w.length===0?u.jsx("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground",children:"No matches found"}):u.jsxs(u.Fragment,{children:[D("Tables",k.tables,L),D("Templates",k.templates,O),D("Syntax",k.syntax,B)]})}),u.jsx("div",{className:"px-3 py-2 border-t border-border/30 bg-muted/30",children:u.jsxs("p",{className:"text-xs text-muted-foreground/70",children:[u.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:""})," navigate",u.jsx("span",{className:"mx-2",children:""}),u.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Enter"})," insert",u.jsx("span",{className:"mx-2",children:""}),u.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Esc"})," close"]})})]}),document.body)]})}function b4({template:e,onChange:t,onDelete:n,availableTableIds:r,availableTemplateIds:i=[],defaultExpanded:s=!1,collectionId:o}){const[c,d]=N.useState(s),p=N.useRef(null);N.useEffect(()=>{s&&d(!0)},[s]);const h=N.useCallback((g,b)=>{t({...e,[g]:b})},[e,t]),m=N.useCallback(g=>{p.current?p.current.insertAtCursor(g):h("pattern",(e.pattern||"")+g)},[e.pattern,h]);return u.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[u.jsxs("div",{className:me("flex items-center gap-3 p-4 cursor-pointer hover:bg-accent/50 transition-colors",c&&"border-b"),onClick:()=>d(!c),children:[c?u.jsx(Fr,{className:"h-5 w-5 text-muted-foreground"}):u.jsx(rr,{className:"h-5 w-5 text-muted-foreground"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium truncate",children:e.name||"Untitled Template"}),u.jsx("span",{className:"text-sm text-muted-foreground",children:e.id})]}),u.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),n()},className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors",title:"Delete template",children:u.jsx(zr,{className:"h-4 w-4"})})]}),c&&u.jsxs("div",{className:"p-4 space-y-4",children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Template ID ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx("input",{type:"text",value:e.id,onChange:g=>h("id",g.target.value),placeholder:"uniqueTemplateId",className:"w-full p-2 border rounded-md bg-background text-sm"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Name ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx("input",{type:"text",value:e.name,onChange:g=>h("name",g.target.value),placeholder:"Template Name",className:"w-full p-2 border rounded-md bg-background text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Result Type"}),u.jsx("input",{type:"text",value:e.resultType||"",onChange:g=>h("resultType",g.target.value||void 0),placeholder:"encounter, description, etc.",className:"w-full p-2 border rounded-md bg-background text-sm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),u.jsx("input",{type:"text",value:e.description||"",onChange:g=>h("description",g.target.value||void 0),placeholder:"Template description",className:"w-full p-2 border rounded-md bg-background text-sm"})]}),u.jsxs("details",{className:"border rounded-lg",children:[u.jsx("summary",{className:"px-4 py-3 cursor-pointer hover:bg-accent/50 transition-colors list-none",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-medium text-sm",children:"Shared Variables"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"}),u.jsxs("div",{className:"group relative",children:[u.jsx(Ei,{className:"h-4 w-4 text-muted-foreground cursor-help"}),u.jsx("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:"Template-level shared variables are evaluated lazily when this template is rolled, not when the document loads. They propagate to any nested table references. Cannot shadow document-level variables."})]})]})}),u.jsxs("div",{className:"p-4 border-t space-y-3",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Variables evaluated when this template is rolled. Available to nested table references."}),u.jsx(Oc,{value:e.shared||{},onChange:g=>h("shared",Object.keys(g).length>0?g:void 0),keyPlaceholder:"Variable name",valuePlaceholder:"Value (supports {{dice:}}, {{math:}}, etc.)",keyPattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only",valueSupportsExpressions:!0,collectionId:o})]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium",children:"Pattern & Preview"}),u.jsx(g4,{availableTableIds:r,availableTemplateIds:i.filter(g=>g!==e.id),onInsert:m})]}),u.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[u.jsx(Gr,{icon:u.jsx(Zr,{className:"h-3.5 w-3.5"}),label:"Table",title:"Insert table reference",onClick:()=>{const g=r.length>0?r[0]:"tableId";m(`{{${g}}}`)}}),u.jsx(Gr,{icon:u.jsx(Sr,{className:"h-3.5 w-3.5"}),label:"Dice",title:"Insert dice roll",onClick:()=>m("{{dice:2d6}}")}),u.jsx(Gr,{icon:u.jsx(Sf,{className:"h-3.5 w-3.5"}),label:"Math",title:"Insert math expression",onClick:()=>m("{{math:1 + 2}}")}),u.jsx(Gr,{icon:u.jsx(Kc,{className:"h-3.5 w-3.5"}),label:"Variable",title:"Insert variable reference",onClick:()=>m("{{$variableName}}")}),u.jsx(Gr,{icon:u.jsx(jf,{className:"h-3.5 w-3.5"}),label:"Again",title:"Insert re-roll reference",onClick:()=>m("{{again}}")}),u.jsx(Gr,{label:"@placeholder",title:"Insert placeholder reference",onClick:()=>m("{{@placeholderName}}")}),u.jsx(Gr,{label:"unique:N",title:"Insert unique selection",onClick:()=>{const g=r.length>0?r[0]:"tableId";m(`{{unique:3:${g}}}`)}}),u.jsx("span",{className:"w-px h-4 bg-border mx-1"}),u.jsx(Gr,{icon:u.jsx($o,{className:"h-3.5 w-3.5"}),label:"Capture",title:"Insert capture multi-roll (stores results in variable)",onClick:()=>{const g=r.length>0?r[0]:"tableId";m(`{{3*${g} >> $items}}`)}}),u.jsx(Gr,{icon:u.jsx(Rf,{className:"h-3.5 w-3.5"}),label:"$var[n]",title:"Insert capture access (get item by index)",onClick:()=>m("{{$items[0]}}")}),u.jsx(Gr,{icon:u.jsx(Vc,{className:"h-3.5 w-3.5"}),label:"collect:",title:"Insert collect expression (aggregate property from captures)",onClick:()=>m("{{collect:$items.@value|unique}}")})]}),u.jsx(q0,{ref:p,pattern:e.pattern||"",onChange:g=>h("pattern",g),collectionId:o,availableTableIds:r,availableTemplateIds:i.filter(g=>g!==e.id),sharedVariables:e.shared})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags"}),u.jsx(y4,{value:e.tags||[],onChange:g=>h("tags",g.length>0?g:void 0)})]})]})]})}function Gr({icon:e,label:t,title:n,onClick:r}){return u.jsxs("button",{type:"button",onClick:r,title:n,className:"flex items-center gap-1.5 px-2.5 py-1 text-xs border rounded-md hover:bg-accent transition-colors",children:[e,t]})}function y4({value:e,onChange:t}){const[n,r]=N.useState(""),i=N.useCallback(o=>{const c=o.trim().toLowerCase();c&&!e.includes(c)&&t([...e,c]),r("")},[e,t]),s=N.useCallback(o=>{t(e.filter((c,d)=>d!==o))},[e,t]);return u.jsx("div",{className:"border rounded-md bg-background p-2",children:u.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((o,c)=>u.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-sm bg-primary/10 text-primary rounded-full",children:[o,u.jsx("button",{type:"button",onClick:()=>s(c),className:"hover:bg-primary/20 rounded-full p-0.5",children:u.jsx(cn,{className:"h-3 w-3"})})]},o)),u.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),i(n)):o.key==="Backspace"&&!n&&e.length>0&&s(e.length-1)},onBlur:()=>n&&i(n),placeholder:e.length===0?"Add tags...":"",className:"flex-1 min-w-[100px] bg-transparent outline-none text-sm"})]})})}function v4({variables:e,shared:t,onVariablesChange:n,onSharedChange:r,collectionId:i}){return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{className:"border rounded-lg",children:[u.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"font-medium",children:"Static Variables"}),u.jsxs("div",{className:"group relative",children:[u.jsx(Ei,{className:"h-4 w-4 text-muted-foreground cursor-help"}),u.jsxs("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:["Static variables are evaluated once when the collection is loaded. Use them for constants like settings, separators, or campaign-specific values. Reference with ","{{$variableName}}","."]})]})]}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Constants loaded at initialization. Reference with ","{{$name}}","."]})]}),u.jsx("div",{className:"p-4",children:u.jsx(Oc,{value:e,onChange:n,keyPlaceholder:"Variable name",valuePlaceholder:"Value (text only)",keyPattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only"})})]}),u.jsxs("section",{className:"border rounded-lg",children:[u.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"font-medium",children:"Shared Variables"}),u.jsxs("div",{className:"group relative",children:[u.jsx(Ei,{className:"h-4 w-4 text-muted-foreground cursor-help"}),u.jsx("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:"Shared variables are evaluated once at the start of each generation and remain constant for that run. Great for rolling shared values that multiple tables reference. Cannot forward-reference other shared variables."})]})]}),u.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Evaluated once per generation. Supports dice and expressions."})]}),u.jsx("div",{className:"p-4",children:u.jsx(Oc,{value:t,onChange:r,keyPlaceholder:"Variable name",valuePlaceholder:"Value (supports {{dice:}}, {{math:}}, etc.)",keyPattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only",valueSupportsExpressions:!0,collectionId:i})})]})]})}function Dp({title:e,icon:t,count:n,isExpanded:r,onToggle:i,onAdd:s,children:o,accentColor:c}){const d={mint:"text-[hsl(var(--mint))]",lavender:"text-[hsl(var(--lavender))]",amber:"text-[hsl(var(--amber))]"};return u.jsxs("div",{className:"border-b border-border/30 last:border-b-0",children:[u.jsxs("div",{className:"group w-full flex items-center gap-2 px-3 py-2.5 text-sm font-medium hover:bg-accent/50 transition-colors",children:[u.jsxs("button",{onClick:i,className:"flex items-center gap-2 flex-1 text-left",children:[r?u.jsx(Fr,{className:"h-3.5 w-3.5 text-muted-foreground"}):u.jsx(rr,{className:"h-3.5 w-3.5 text-muted-foreground"}),u.jsx(t,{className:me("h-4 w-4",d[c])}),u.jsx("span",{className:"flex-1 text-left",children:e}),u.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 py-0.5 rounded-full",children:n})]}),u.jsx("button",{onClick:s,className:"p-1 hover:bg-primary/10 rounded transition-colors opacity-0 group-hover:opacity-100 hover:opacity-100",title:`Add ${e.toLowerCase().slice(0,-1)}`,children:u.jsx(Nr,{className:"h-3.5 w-3.5 text-muted-foreground hover:text-primary"})})]}),r&&u.jsx("div",{className:"pb-2 animate-slide-up",children:o})]})}function Rp({label:e,id:t,isSelected:n,onClick:r,onDelete:i,canDelete:s=!0}){return u.jsxs("div",{className:me("group flex items-center gap-2 px-3 py-1.5 mx-2 rounded-lg text-sm cursor-pointer transition-all",n?"bg-primary/10 text-primary":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"),onClick:r,children:[u.jsx("span",{className:"flex-1 truncate",title:e,children:e}),u.jsx("span",{className:"text-xs text-muted-foreground/60 font-mono truncate max-w-[60px]",title:t,children:t}),s&&i&&u.jsx("button",{onClick:o=>{o.stopPropagation(),i()},className:"p-1 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded transition-all",title:"Delete",children:u.jsx(zr,{className:"h-3 w-3 text-destructive"})})]})}function x4({document:e,isCollapsed:t,onToggleCollapse:n,onNavigate:r,onAddImport:i,onAddTable:s,onAddTemplate:o,onDeleteImport:c,onDeleteTable:d,onDeleteTemplate:p,selectedItemId:h}){const[m,g]=N.useState({includes:!0,tables:!0,templates:!0}),[b,x]=N.useState(""),[v,w]=N.useState("all"),k=N.useCallback(z=>{g(j=>({...j,[z]:!j[z]}))},[]),C=e.imports||[],T=e.tables,D=e.templates||[],I=N.useMemo(()=>{const z=b.toLowerCase().trim(),j=_=>!z||_.toLowerCase().includes(z),q=C.filter(_=>j(_.alias)||j(_.path)),F=T.filter(_=>j(_.name)||j(_.id)),G=D.filter(_=>j(_.name)||j(_.id));return{imports:v==="all"||v==="includes"?q:[],tables:v==="all"||v==="tables"?F:[],templates:v==="all"||v==="templates"?G:[]}},[C,T,D,b,v]),L=b.length>0||v!=="all",O=I.imports.length+I.tables.length+I.templates.length,B=N.useCallback(()=>{x(""),w("all")},[]);return t?u.jsxs("div",{className:"w-12 border-r border-border/50 bg-card/30 flex flex-col items-center py-3 gap-2",children:[u.jsx("button",{onClick:n,className:"p-2 hover:bg-accent rounded-lg transition-colors",title:"Expand sidebar",children:u.jsx(MN,{className:"h-4 w-4 text-muted-foreground"})}),u.jsx("div",{className:"w-6 h-px bg-border/50 my-1"}),u.jsx("button",{onClick:()=>r("tables"),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:`Tables (${T.length})`,children:u.jsx(Zr,{className:"h-4 w-4 text-[hsl(var(--mint))]"})}),u.jsx("button",{onClick:()=>r("templates"),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:`Templates (${D.length})`,children:u.jsx(ma,{className:"h-4 w-4 text-[hsl(var(--lavender))]"})}),u.jsx("button",{onClick:()=>r("metadata"),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:"Includes",children:u.jsx(os,{className:"h-4 w-4 text-[hsl(var(--amber))]"})})]}):u.jsxs("div",{className:"w-64 border-r border-border/50 bg-card/30 flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5 border-b border-border/30",children:[u.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Explorer"}),u.jsx("button",{onClick:n,className:"p-1.5 hover:bg-accent rounded-lg transition-colors",title:"Collapse sidebar",children:u.jsx(ON,{className:"h-4 w-4 text-muted-foreground"})})]}),u.jsxs("div",{className:"px-3 py-2.5 border-b border-border/30 space-y-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(ms,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),u.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),placeholder:"Search...",className:me("w-full pl-8 pr-8 py-1.5 text-sm rounded-lg","bg-background/50 border border-border/50","focus:outline-none focus:border-primary/50 focus:ring-1 focus:ring-primary/20","placeholder:text-muted-foreground/50 transition-all")}),b&&u.jsx("button",{onClick:()=>x(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 hover:bg-accent rounded transition-colors",title:"Clear search",children:u.jsx(cn,{className:"h-3.5 w-3.5 text-muted-foreground"})})]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:["all","tables","templates","includes"].map(z=>{const j=v===z,q={all:null,includes:os,tables:Zr,templates:ma},F={all:"",includes:"text-[hsl(var(--amber))]",tables:"text-[hsl(var(--mint))]",templates:"text-[hsl(var(--lavender))]"},G=q[z],_=z==="all"?C.length+T.length+D.length:z==="includes"?C.length:z==="tables"?T.length:D.length;return u.jsxs("button",{onClick:()=>w(z),className:me("flex items-center gap-1 px-2 py-0.5 text-xs rounded-full border transition-all",j?"bg-primary/10 border-primary/30 text-primary":"border-border/50 text-muted-foreground hover:border-border hover:bg-accent/50"),children:[G&&u.jsx(G,{className:me("h-3 w-3",j?"":F[z])}),u.jsx("span",{className:"capitalize",children:z}),u.jsxs("span",{className:"text-muted-foreground/60",children:["(",_,")"]})]},z)})}),L&&u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("span",{className:"text-muted-foreground",children:[O," result",O!==1?"s":""]}),u.jsx("button",{onClick:B,className:"text-primary hover:underline",children:"Clear filters"})]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[(v==="all"||v==="includes")&&u.jsx(Dp,{title:"Includes",icon:os,count:I.imports.length,isExpanded:m.includes,onToggle:()=>k("includes"),onAdd:i,accentColor:"amber",children:I.imports.length===0?u.jsx("p",{className:"px-5 py-2 text-xs text-muted-foreground/70 italic",children:L?"No matches":"No imports yet"}):I.imports.map(z=>{const j=C.indexOf(z);return u.jsx(Rp,{label:z.alias,id:z.path.split("/").pop()||z.path,isSelected:h===`import-${j}`,onClick:()=>r("metadata",`import-${j}`),onDelete:c?()=>c(j):void 0},`import-${j}`)})}),(v==="all"||v==="tables")&&u.jsx(Dp,{title:"Tables",icon:Zr,count:I.tables.length,isExpanded:m.tables,onToggle:()=>k("tables"),onAdd:s,accentColor:"mint",children:I.tables.length===0?u.jsx("p",{className:"px-5 py-2 text-xs text-muted-foreground/70 italic",children:L?"No matches":"No tables yet"}):I.tables.map(z=>{const j=T.indexOf(z);return u.jsx(Rp,{label:z.name,id:z.id,isSelected:h===z.id,onClick:()=>r("tables",z.id),onDelete:d?()=>d(j):void 0,canDelete:T.length>1},z.id)})}),(v==="all"||v==="templates")&&u.jsx(Dp,{title:"Templates",icon:ma,count:I.templates.length,isExpanded:m.templates,onToggle:()=>k("templates"),onAdd:o,accentColor:"lavender",children:I.templates.length===0?u.jsx("p",{className:"px-5 py-2 text-xs text-muted-foreground/70 italic",children:L?"No matches":"No templates yet"}):I.templates.map(z=>{const j=D.indexOf(z);return u.jsx(Rp,{label:z.name,id:z.id,isSelected:h===z.id,onClick:()=>r("templates",z.id),onDelete:p?()=>p(j):void 0},z.id)})})]})]})}function w4({activeTab:e,onTabChange:t,tableCounts:n}){const r=[{id:"metadata",label:"Metadata",icon:_o},{id:"tables",label:"Tables",icon:Zr,count:n.tables},{id:"templates",label:"Templates",icon:ma,count:n.templates},{id:"variables",label:"Variables",icon:Kc},{id:"json",label:"JSON",icon:qv}];return u.jsx("div",{className:"border-b border-border/50 bg-card/50 backdrop-blur-sm sticky top-0 z-10",children:u.jsx("nav",{className:"flex gap-1 px-2 pt-2","aria-label":"Editor tabs",children:r.map(i=>{const s=e===i.id,o=i.icon;return u.jsxs("button",{onClick:()=>t(i.id),className:me("group relative flex items-center gap-2 px-4 py-2.5 text-sm font-medium rounded-t-xl transition-all duration-200",s?"bg-background text-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),"aria-selected":s,role:"tab",children:[u.jsx(o,{className:me("h-4 w-4 transition-colors",s?"text-primary":"text-muted-foreground group-hover:text-foreground")}),u.jsx("span",{children:i.label}),i.count!==void 0&&i.count>0&&u.jsx("span",{className:me("px-1.5 py-0.5 text-xs rounded-full transition-colors",s?"bg-primary/15 text-primary":"bg-muted text-muted-foreground group-hover:bg-primary/10 group-hover:text-primary"),children:i.count}),s&&u.jsx("span",{className:"absolute bottom-0 left-2 right-2 h-0.5 bg-primary rounded-full"})]},i.id)})})})}function E4({value:e,onChange:t,availableCollections:n,placeholder:r="Select collection or enter URL...",hasError:i=!1}){const[s,o]=N.useState(!1),[c,d]=N.useState(""),[p,h]=N.useState(0),m=N.useRef(null),g=N.useRef(null),b=N.useRef(null),[x,v]=N.useState({top:0,left:0,width:0}),w=N.useMemo(()=>n.map(q=>({id:q.id,name:q.name,namespace:q.namespace,isPreloaded:q.isPreloaded,tableCount:q.tableCount})),[n]),k=N.useMemo(()=>{if(!c.trim())return w;const q=c.toLowerCase();return w.filter(F=>F.name.toLowerCase().includes(q)||F.namespace.toLowerCase().includes(q))},[w,c]),C=N.useMemo(()=>{const q=[],F=[];return k.forEach(G=>{G.isPreloaded?q.push(G):F.push(G)}),{preloaded:q,user:F}},[k]),T=N.useMemo(()=>w.find(q=>q.namespace===e),[w,e]);N.useEffect(()=>{if(s&&b.current){const q=b.current.getBoundingClientRect();v({top:q.bottom+4,left:q.left,width:q.width})}},[s]),N.useEffect(()=>{h(0)},[c]),N.useEffect(()=>{const q=F=>{g.current&&!g.current.contains(F.target)&&b.current&&!b.current.contains(F.target)&&(o(!1),d(""))};if(s)return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[s]);const D=N.useCallback(q=>{switch(q.key){case"ArrowDown":q.preventDefault(),s?h(F=>Math.min(F+1,k.length-1)):o(!0);break;case"ArrowUp":q.preventDefault(),h(F=>Math.max(F-1,0));break;case"Enter":q.preventDefault(),s&&k[p]&&I(k[p]);break;case"Escape":q.preventDefault(),o(!1),d("");break;case"Tab":o(!1),d("");break}},[s,k,p]),I=N.useCallback(q=>{t(q.namespace),o(!1),d("")},[t]),L=q=>{const F=q.target.value;d(F),t(F),s||o(!0)},O=()=>{o(!0),d(e)},B=(q,F,G)=>F.length===0?null:u.jsxs("div",{children:[u.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 bg-muted/30",children:q}),F.map((_,H)=>{const se=G+H,ne=_.namespace===e;return u.jsxs("button",{type:"button",className:me("w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors",se===p?"bg-primary/10 text-primary":"hover:bg-accent/50"),onClick:()=>I(_),onMouseEnter:()=>h(se),children:[u.jsx(Wc,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-medium truncate",children:_.name}),u.jsx("div",{className:"text-xs text-muted-foreground truncate font-mono",children:_.namespace})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-xs text-muted-foreground/60",children:[_.tableCount," tables"]}),ne&&u.jsx(ga,{className:"h-4 w-4 text-primary"})]})]},_.id)})]},q),z=0,j=C.preloaded.length;return u.jsxs("div",{ref:b,className:"relative",children:[u.jsxs("div",{className:"relative",children:[u.jsx("input",{ref:m,type:"text",value:s?c:e,onChange:L,onFocus:O,onKeyDown:D,placeholder:r,className:me("w-full px-3 py-2 pr-8 text-sm rounded-lg border bg-background transition-colors font-mono text-xs","focus:outline-none focus:ring-2 focus:ring-primary/50",i?"border-destructive/50 focus:border-destructive":"border-border/50 focus:border-primary")}),u.jsx("button",{type:"button",onClick:()=>{var q;o(!s),s||(d(e),(q=m.current)==null||q.focus())},className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 hover:bg-accent rounded transition-colors",children:u.jsx(Fr,{className:me("h-4 w-4 text-muted-foreground transition-transform",s&&"rotate-180")})}),T&&!s&&u.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2",children:u.jsx(ga,{className:"h-4 w-4 text-green-500"})})]}),s&&nr.createPortal(u.jsxs("div",{ref:g,className:"fixed z-50 bg-popover border border-border/50 rounded-xl shadow-xl overflow-hidden animate-fade-in",style:{top:x.top,left:x.left,width:x.width,minWidth:280},children:[u.jsx("div",{className:"px-3 py-2 border-b border-border/30 bg-muted/20",children:u.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[u.jsx(ms,{className:"h-3 w-3"}),u.jsx("span",{children:"Type to search or enter a URL"})]})}),u.jsx("div",{className:"max-h-64 overflow-y-auto",children:k.length===0?u.jsx("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground",children:c.trim()?"No matching collections":"No collections available"}):u.jsxs(u.Fragment,{children:[B("Preloaded",C.preloaded,z),B("Your Collections",C.user,j)]})}),u.jsx("div",{className:"px-3 py-2 border-t border-border/30 bg-muted/30",children:u.jsxs("p",{className:"text-xs text-muted-foreground/70",children:[u.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:""})," navigate",u.jsx("span",{className:"mx-2",children:""}),u.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Enter"})," select",u.jsx("span",{className:"mx-2",children:""}),u.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Esc"})," close"]})})]}),document.body)]})}function k4({import_:e,index:t,onChange:n,onDelete:r,availableCollections:i}){const s=!e.path.trim()||!e.alias.trim(),o=e.alias.includes("."),c=N.useCallback((d,p)=>{n(t,{...e,[d]:p})},[e,t,n]);return u.jsxs("div",{className:me("group border rounded-xl p-4 transition-all hover:border-border",s||o?"border-destructive/50 bg-destructive/5":"border-border/50 bg-card/50"),children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:me("p-2 rounded-lg",s||o?"bg-destructive/10":"bg-[hsl(var(--amber)/0.1)]"),children:u.jsx(os,{className:me("h-4 w-4",s||o?"text-destructive":"text-[hsl(var(--amber))]")})}),u.jsxs("div",{className:"flex-1 space-y-3",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:["Alias ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx("input",{type:"text",value:e.alias,onChange:d=>c("alias",d.target.value),placeholder:"myCollection",className:me("w-full px-3 py-2 text-sm rounded-lg border bg-background transition-colors","focus:outline-none focus:ring-2 focus:ring-primary/50",o||!e.alias.trim()?"border-destructive/50 focus:border-destructive":"border-border/50 focus:border-primary")}),o&&u.jsxs("p",{className:"mt-1 text-xs text-destructive flex items-center gap-1",children:[u.jsx(qc,{className:"h-3 w-3"}),"Alias cannot contain dots"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:["Path ",u.jsx("span",{className:"text-destructive",children:"*"})]}),u.jsx(E4,{value:e.path,onChange:d=>c("path",d),availableCollections:i,placeholder:"Select collection or enter URL...",hasError:!e.path.trim()})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:["Description ",u.jsx("span",{className:"text-muted-foreground/50",children:"(optional)"})]}),u.jsx("input",{type:"text",value:e.description||"",onChange:d=>c("description",d.target.value||void 0),placeholder:"What does this import provide?",className:"w-full px-3 py-2 text-sm rounded-lg border border-border/50 bg-background transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]})]}),u.jsx("button",{onClick:()=>r(t),className:"p-2 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded-lg transition-all",title:"Delete import",children:u.jsx(zr,{className:"h-4 w-4 text-destructive"})})]}),e.alias.trim()&&!o&&u.jsx("div",{className:"mt-3 pt-3 border-t border-border/30",children:u.jsxs("p",{className:"text-xs text-muted-foreground",children:["Use as:"," ",u.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-[hsl(var(--amber))]",children:`{{${e.alias}.tableId}}`})]})})]})}function N4({imports:e,onChange:t,currentNamespace:n}){const r=an(c=>c.collections),i=N.useMemo(()=>{const c=Array.from(r.values());return n?c.filter(d=>d.namespace!==n):c},[r,n]),s=N.useCallback((c,d)=>{const p=[...e];p[c]=d,t(p)},[e,t]),o=N.useCallback(c=>{t(e.filter((d,p)=>p!==c))},[e,t]);return e.length===0?u.jsxs("div",{className:"border-2 border-dashed rounded-xl p-6 text-center",children:[u.jsx(os,{className:"h-8 w-8 text-muted-foreground/40 mx-auto mb-3"}),u.jsx("p",{className:"text-muted-foreground",children:"No imports yet"}),u.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Import external collections to reference their tables"})]}):u.jsx("div",{className:"space-y-3",children:e.map((c,d)=>u.jsx(k4,{import_:c,index:d,onChange:s,onDelete:o,availableCollections:i},d))})}function S4(e){return e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/[\u2013\u2014\u2212]/g,"-").replace(/[\u2018\u2019\u201A]/g,"'").replace(/[\u201C\u201D\u201E]/g,'"').replace(/\ufb01/g,"fi").replace(/\ufb02/g,"fl").replace(/\ufb03/g,"ffi").replace(/\ufb04/g,"ffl").replace(/\ufb00/g,"ff").replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g," ").replace(/[^\S\n]+/g," ").replace(/\n+/g," ").trim()}function C4(e){const n=e.replace(/[^a-zA-Z0-9\s]/g,"").split(/\s+/).filter(r=>r.length>0);return n.length===0?"table":n.map((r,i)=>{const s=r.toLowerCase();return i===0?s:s.charAt(0).toUpperCase()+s.slice(1)}).join("")}function _4(e){const t=[/^(?:1)?d(%|100)\s+/i,/^(?:1)?d(\d+)\s+/i];let n=null,r=e;for(const p of t){const h=e.match(p);if(h){const m=h[1];m==="%"?n=100:n=parseInt(m,10),r=e.slice(h[0].length);break}}const i=/(?:^|\s)(\d+(?:-\d+)?)\s/,s=r.match(i);let o,c;if(s&&s.index!==void 0){const p=s.index;o=r.slice(0,p).trim(),c=r.slice(p).trim()}else o=r.trim(),c="";n&&o.includes(`d${n}`)&&(o=o.replace(new RegExp(`d${n}`,"gi"),"").replace(/\s+/g," ").trim());const d=o.split(/\s+/);if(d.length>=2){const p=Math.floor(d.length/2),h=d.slice(0,p).join(" "),m=d.slice(p,p*2).join(" ");h===m&&(o=h)}return{dieType:n,tableName:o||"Untitled Table",remainingText:c||r}}function T4(e,t){const n=[],r=[],i=/(\d+)-(\d+)\s+/g,s=[...e.matchAll(i)];if(s.length>0){for(let p=0;p<s.length;p++){const h=s[p];let m=parseInt(h[1],10),g=parseInt(h[2],10);(h[2]==="00"||g===0)&&(g=100),(h[1]==="00"||m===0)&&(m=100);const b=h.index+h[0].length,x=p<s.length-1?s[p+1].index:e.length,v=e.slice(b,x).trim();v&&r.push({rangeStart:m,rangeEnd:g,value:v})}return r.sort((p,h)=>p.rangeStart-h.rangeStart),{entries:r,warnings:n}}const o=/(?:^|\s)(\d+)\s+(?=[A-Za-z"'])/g,c=[...e.matchAll(o)];if(c.length>0){const p=c.map(g=>parseInt(g[1],10)),h=p.every((g,b)=>b===0||g===p[b-1]+1),m=[];for(let g=0;g<c.length;g++){const b=c[g];let x=parseInt(b[1],10);b[1]==="00"&&(x=100);const v=b.index+b[0].length,w=g<c.length-1?c[g+1].index:e.length,k=e.slice(v,w).trim();k&&m.push({num:x,value:k,index:b.index})}!h&&m.length>2&&(n.push("Detected non-sequential numbers - attempting to reorder (may be multi-column PDF)"),m.sort((g,b)=>g.num-b.num));for(const g of m)r.push({rangeStart:g.num,rangeEnd:g.num,value:g.value});return{entries:r,warnings:n}}const d=e.split(/\.\s+/).map(p=>p.trim()).filter(p=>p.length>0);if(d.length>1){n.push("No numbers detected - splitting by sentences and using equal weights");for(let p=0;p<d.length;p++)r.push({rangeStart:p+1,rangeEnd:p+1,value:d[p].replace(/\.$/,"").trim()});return{entries:r,warnings:n}}return n.push("Could not parse entries - returning text as single entry"),r.push({rangeStart:1,rangeEnd:1,value:e.trim()}),{entries:r,warnings:n}}function D4(e,t){const n=[],r=[],i=[...e].sort((o,c)=>o.rangeStart-c.rangeStart);let s=0;for(const o of i)o.rangeStart>s+1&&s>0&&n.push(`Gap detected in ranges: ${s+1} to ${o.rangeStart-1}`),o.rangeStart<=s&&s>0&&n.push(`Overlapping ranges detected at ${o.rangeStart} (previous ended at ${s})`),s=o.rangeEnd;for(const o of i){const c={value:o.value};o.rangeStart!==o.rangeEnd||t?c.range=[o.rangeStart,o.rangeEnd]:c.weight=1,r.push(c)}return{entries:r,warnings:n}}function R4(e,t={}){const n=[],r=[];if(!e||typeof e!="string")return{success:!1,errors:["No text provided"],warnings:[]};const i=S4(e);if(!i)return{success:!1,errors:["Text is empty after normalization"],warnings:[]};const s=_4(i),o=s.tableName==="Untitled Table"&&t.defaultTableName?t.defaultTableName:s.tableName,c=T4(s.remainingText||i);if(n.push(...c.warnings),c.entries.length===0)return{success:!1,errors:["No entries could be extracted from text"],warnings:n};const d=D4(c.entries,s.dieType);return n.push(...d.warnings),{success:!0,table:{id:C4(o),name:o,type:"simple",entries:d.entries},warnings:n,errors:r}}function A4({isOpen:e,onClose:t,onImport:n}){const[r,i]=N.useState("input"),[s,o]=N.useState(""),[c,d]=N.useState(null),[p,h]=N.useState(null),m=N.useRef(null);N.useEffect(()=>{e||(i("input"),o(""),d(null),h(null))},[e]),N.useEffect(()=>{e&&r==="input"&&setTimeout(()=>{var T;return(T=m.current)==null?void 0:T.focus()},100)},[e,r]),N.useEffect(()=>{if(!e)return;const T=D=>{D.key==="Escape"&&t()};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,t]);const g=N.useCallback(()=>{const T=R4(s);d(T),T.success&&T.table?h({...T.table}):h(null),i("preview")},[s]),b=N.useCallback(()=>{p&&(n(p),t())},[p,n,t]),x=N.useCallback(()=>{i("input"),d(null),h(null)},[]),v=N.useCallback((T,D,I)=>{if(!p)return;const L=[...p.entries],O={...L[T]};D==="value"?O.value=I:D==="range"&&(O.range=I),L[T]=O,h({...p,entries:L})},[p]),w=N.useCallback((T,D,I)=>{if(!p)return;const L=[...p.entries],O={...L[T]},B=O.range||[1,1];D==="start"?O.range=[I,B[1]]:O.range=[B[0],I],L[T]=O,h({...p,entries:L})},[p]),k=N.useCallback(()=>{if(!p)return;const T=p.entries[p.entries.length-1],I=((T==null?void 0:T.range)||[0,0])[1]+1,L={value:"New entry",range:[I,I]};h({...p,entries:[...p.entries,L]})},[p]),C=N.useCallback(T=>{if(!p||p.entries.length<=1)return;const D=p.entries.filter((I,L)=>L!==T);h({...p,entries:D})},[p]);return e?nr.createPortal(u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:u.jsxs("div",{className:me("bg-background border border-border rounded-lg shadow-xl","w-full max-w-2xl mx-4 max-h-[85vh] flex flex-col","animate-fade-in"),onClick:T=>T.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Gv,{className:"w-5 h-5 text-primary"}),u.jsx("h2",{className:"text-lg font-semibold",children:"Import Table"}),u.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-500 font-medium",children:"BETA"})]}),u.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-accent text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:u.jsx(cn,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[r==="input"&&u.jsx(I4,{rawText:s,onChange:o,textareaRef:m}),r==="preview"&&u.jsx(j4,{result:c,editedTable:p,onUpdateTable:h,onUpdateEntry:v,onUpdateEntryRange:w,onAddEntry:k,onRemoveEntry:C})]}),u.jsx("div",{className:"px-4 py-3 border-t border-border flex justify-between",children:r==="preview"?u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:x,className:me("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:[u.jsx(bN,{className:"w-4 h-4"}),"Back"]}),u.jsxs("button",{onClick:b,disabled:!p,className:me("flex items-center gap-1.5 px-4 py-1.5 rounded-md text-sm font-medium","bg-primary text-primary-foreground","hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:[u.jsx(ga,{className:"w-4 h-4"}),"Import Table"]})]}):u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:t,className:me("px-3 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:"Cancel"}),u.jsx("button",{onClick:g,disabled:!s.trim(),className:me("px-4 py-1.5 rounded-md text-sm font-medium","bg-primary text-primary-foreground","hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:"Parse Text"})]})})]})}),document.body):null}function I4({rawText:e,onChange:t,textareaRef:n}){return u.jsxs("div",{className:"space-y-4",children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Paste text copied from a PDF or other source. The importer will attempt to detect the table format automatically."}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{htmlFor:"raw-text",className:"text-sm font-medium",children:"Raw Table Text"}),u.jsx("textarea",{ref:n,id:"raw-text",value:e,onChange:r=>t(r.target.value),placeholder:`d6 Random Encounters
1 Wandering merchant
2 Pack of wolves
3 Mysterious stranger
4 Abandoned campsite
5 Hidden treasure
6 Ancient ruins`,className:me("w-full h-64 p-3 rounded-md border border-border bg-background","text-sm font-mono resize-y","placeholder:text-muted-foreground/50","focus:outline-none focus:ring-2 focus:ring-primary/50")})]}),u.jsxs("details",{className:"text-sm",children:[u.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground transition-colors",children:"Supported formats"}),u.jsxs("ul",{className:"mt-2 space-y-1 text-muted-foreground pl-4 list-disc",children:[u.jsx("li",{children:'d6/d20 tables: "d6 Table Name 1 Entry 2 Entry..."'}),u.jsx("li",{children:'d100 with ranges: "d100 Name 1-30 Entry 31-60 Entry..."'}),u.jsx("li",{children:"Multi-column PDF copies (will attempt to reorder)"}),u.jsx("li",{children:"No numbers: Entries separated by periods"}),u.jsx("li",{children:'Note: "00" is interpreted as 100'})]})]})]})}function j4({result:e,editedTable:t,onUpdateTable:n,onUpdateEntry:r,onUpdateEntryRange:i,onAddEntry:s,onRemoveEntry:o}){return e?e.success?t?u.jsxs("div",{className:"space-y-4",children:[e.warnings.length>0&&u.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx(Wa,{className:"w-4 h-4 text-amber-500"}),u.jsx("h4",{className:"text-sm font-medium text-amber-500",children:"Warnings"})]}),u.jsx("ul",{className:"text-xs space-y-0.5 text-amber-500/80",children:e.warnings.map((c,d)=>u.jsx("li",{children:c},d))})]}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{htmlFor:"table-id",className:"text-sm font-medium",children:"Table ID"}),u.jsx("input",{id:"table-id",type:"text",value:t.id,onChange:c=>n({...t,id:c.target.value}),className:me("w-full px-3 py-1.5 rounded-md border border-border bg-background","text-sm font-mono","focus:outline-none focus:ring-2 focus:ring-primary/50")})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("label",{htmlFor:"table-name",className:"text-sm font-medium",children:"Table Name"}),u.jsx("input",{id:"table-name",type:"text",value:t.name,onChange:c=>n({...t,name:c.target.value}),className:me("w-full px-3 py-1.5 rounded-md border border-border bg-background","text-sm","focus:outline-none focus:ring-2 focus:ring-primary/50")})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium",children:["Entries (",t.entries.length,")"]}),u.jsxs("button",{onClick:s,className:me("flex items-center gap-1 px-2 py-1 rounded text-xs","hover:bg-accent transition-colors text-muted-foreground"),children:[u.jsx(Nr,{className:"w-3.5 h-3.5"}),"Add Entry"]})]}),u.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-auto pr-1",children:t.entries.map((c,d)=>{var p,h;return u.jsxs("div",{className:me("flex items-start gap-2 p-2 rounded-md bg-muted/50 border border-border/50"),children:[u.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[u.jsx("input",{type:"number",value:((p=c.range)==null?void 0:p[0])??d+1,onChange:m=>i(d,"start",parseInt(m.target.value)||1),className:me("w-12 px-1.5 py-1 rounded border border-border bg-background","text-xs text-center","focus:outline-none focus:ring-1 focus:ring-primary/50")}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"-"}),u.jsx("input",{type:"number",value:((h=c.range)==null?void 0:h[1])??d+1,onChange:m=>i(d,"end",parseInt(m.target.value)||1),className:me("w-12 px-1.5 py-1 rounded border border-border bg-background","text-xs text-center","focus:outline-none focus:ring-1 focus:ring-primary/50")})]}),u.jsx("input",{type:"text",value:c.value,onChange:m=>r(d,"value",m.target.value),className:me("flex-1 px-2 py-1 rounded border border-border bg-background","text-sm","focus:outline-none focus:ring-1 focus:ring-primary/50")}),u.jsx("button",{onClick:()=>o(d),disabled:t.entries.length<=1,className:me("p-1 rounded hover:bg-accent transition-colors flex-shrink-0","text-muted-foreground hover:text-destructive","disabled:opacity-30 disabled:cursor-not-allowed"),"aria-label":"Remove entry",children:u.jsx(zr,{className:"w-4 h-4"})})]},d)})})]})]}):u.jsx("div",{className:"text-sm text-muted-foreground",children:"No table to display."}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/20",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(Wa,{className:"w-5 h-5 text-destructive"}),u.jsx("h3",{className:"font-medium text-destructive",children:"Parse Errors"})]}),u.jsx("ul",{className:"text-sm space-y-1 text-destructive/80",children:e.errors.map((c,d)=>u.jsx("li",{children:c},d))})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Go back and edit the text, then try parsing again."})]}):u.jsx("div",{className:"text-sm text-muted-foreground",children:"No results to display."})}function O4({document:e,jsonContent:t,onDocumentChange:n,onJsonChange:r,onValidationChange:i,syncToJson:s,collectionId:o}){var J,P,M,U;const c=Ft(A=>A.editorActiveTab),d=Ft(A=>A.setEditorActiveTab),p=Ft(A=>A.editorSidebarCollapsed),h=Ft(A=>A.setEditorSidebarCollapsed),m=Ft(A=>A.editorSelectedItemId),g=Ft(A=>A.setEditorSelectedItemId),b=N.useRef(null),[x,v]=N.useState(!1);N.useEffect(()=>{if(m&&b.current){const A=b.current.querySelector(`[data-item-id="${m}"]`);A&&A.scrollIntoView({behavior:"smooth",block:"start"})}},[m]);const w=N.useMemo(()=>e.tables.map(A=>A.id),[e.tables]),k=N.useMemo(()=>(e.templates||[]).map(A=>A.id),[e.templates]),C=N.useCallback(A=>{const te={...e,metadata:A};n(te),s(te)},[e,n,s]),T=N.useCallback(A=>{const te={...e,imports:A.length>0?A:void 0};n(te),s(te)},[e,n,s]),D=N.useCallback(A=>{const te={...e,tables:A};n(te),s(te)},[e,n,s]),I=N.useCallback(A=>{const te={...e,templates:A.length>0?A:void 0};n(te),s(te)},[e,n,s]),L=N.useCallback(A=>{const te={...e,variables:Object.keys(A).length>0?A:void 0};n(te),s(te)},[e,n,s]),O=N.useCallback(A=>{const te={...e,shared:Object.keys(A).length>0?A:void 0};n(te),s(te)},[e,n,s]),B=N.useCallback(()=>{const A=e.imports||[],te={path:"",alias:`import${A.length+1}`};T([...A,te]),d("metadata")},[e.imports,T]),z=N.useCallback(()=>{const A=`table${e.tables.length+1}`,te={id:A,name:"New Table",type:"simple",entries:[{value:"New entry"}]};D([...e.tables,te]),d("tables"),g(A)},[e.tables,D]),j=N.useCallback(A=>{const te=e.tables.map(Te=>Te.id);let ce=A.id,Ee=1;for(;te.includes(ce);)ce=`${A.id}${Ee++}`;const Ue={...A,id:ce};D([...e.tables,Ue]),d("tables"),g(ce)},[e.tables,D]),q=N.useCallback(()=>{const A=e.templates||[],te=`template${A.length+1}`,ce={id:te,name:"New Template",pattern:"You encounter {{example}}!"};I([...A,ce]),d("templates"),g(te)},[e.templates,I]),F=N.useCallback(A=>{const te=e.imports||[];T(te.filter((ce,Ee)=>Ee!==A))},[e.imports,T]),G=N.useCallback(A=>{if(e.tables.length<=1){alert("Cannot delete the last table. A collection must have at least one table.");return}D(e.tables.filter((te,ce)=>ce!==A))},[e.tables,D]),_=N.useCallback(A=>{const te=e.templates||[];I(te.filter((ce,Ee)=>Ee!==A))},[e.templates,I]),H=N.useCallback((A,te)=>{const ce=[...e.tables];ce[A]=te,D(ce)},[e.tables,D]),se=N.useCallback((A,te)=>{const ce=[...e.templates||[]];ce[A]=te,I(ce)},[e.templates,I]),ne=N.useCallback((A,te)=>{d(A),te&&g(te)},[]),Z={tables:e.tables.length,templates:((J=e.templates)==null?void 0:J.length)||0};return u.jsxs("div",{className:"flex h-[calc(100vh-12rem)] border rounded-2xl overflow-hidden bg-background",children:[u.jsx(x4,{document:e,isCollapsed:p,onToggleCollapse:()=>h(!p),onNavigate:ne,onAddImport:B,onAddTable:z,onAddTemplate:q,onDeleteImport:F,onDeleteTable:G,onDeleteTemplate:_,selectedItemId:m??void 0}),u.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[u.jsx(w4,{activeTab:c,onTabChange:d,tableCounts:Z}),u.jsxs("div",{ref:b,className:"flex-1 overflow-y-auto p-6",children:[c==="metadata"&&u.jsxs("div",{className:"space-y-8 animate-fade-in",children:[u.jsxs("section",{children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Collection Metadata"}),u.jsx(lM,{value:e.metadata,onChange:C})]}),u.jsxs("section",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h2",{className:"text-lg font-semibold",children:"Includes"}),u.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add Import"]})]}),u.jsx(N4,{imports:e.imports||[],onChange:T,currentNamespace:e.metadata.namespace})]})]}),c==="tables"&&u.jsxs("div",{className:"space-y-4 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-lg font-semibold",children:["Tables (",e.tables.length,")"]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[u.jsx(Gv,{className:"h-4 w-4"}),"Import Table",u.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-500 font-medium",children:"BETA"})]}),u.jsxs("button",{onClick:z,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add Table"]})]})]}),u.jsx("div",{className:"space-y-4",children:e.tables.map((A,te)=>u.jsx("div",{"data-item-id":A.id,children:u.jsx(d4,{table:A,onChange:ce=>H(te,ce),onDelete:()=>G(te),availableTableIds:w,defaultExpanded:m===A.id||e.tables.length===1,collectionId:o})},`table-${te}`))})]}),c==="templates"&&u.jsxs("div",{className:"space-y-4 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h2",{className:"text-lg font-semibold",children:["Templates (",((P=e.templates)==null?void 0:P.length)||0,")"]}),u.jsxs("button",{onClick:q,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[u.jsx(Nr,{className:"h-4 w-4"}),"Add Template"]})]}),(((M=e.templates)==null?void 0:M.length)||0)>0?u.jsx("div",{className:"space-y-4",children:(U=e.templates)==null?void 0:U.map((A,te)=>{var ce;return u.jsx("div",{"data-item-id":A.id,children:u.jsx(b4,{template:A,onChange:Ee=>se(te,Ee),onDelete:()=>_(te),availableTableIds:w,availableTemplateIds:k,defaultExpanded:m===A.id||(((ce=e.templates)==null?void 0:ce.length)||0)===1,collectionId:o})},`template-${te}`)})}):u.jsxs("div",{className:"border-2 border-dashed rounded-xl p-8 text-center text-muted-foreground",children:[u.jsx("p",{children:'No templates yet. Click "Add Template" to create one.'}),u.jsxs("p",{className:"text-sm mt-2",children:["Templates combine multiple tables using patterns like"," ",u.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:"{{tableId}}"})]})]})]}),c==="variables"&&u.jsxs("div",{className:"animate-fade-in",children:[u.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables"}),u.jsx(v4,{variables:e.variables||{},shared:e.shared||{},onVariablesChange:L,onSharedChange:O,collectionId:o})]}),c==="json"&&u.jsx("div",{className:"animate-fade-in h-full flex flex-col",children:u.jsx(oM,{value:t,onChange:r,onValidationChange:i,height:"calc(100vh - 20rem)",filename:`${e.metadata.namespace||"untitled"}.json`})})]})]}),u.jsx(A4,{isOpen:x,onClose:()=>v(!1),onImport:j})]})}function M4({currentCollectionId:e,isDirty:t=!1,onSwitchAttempt:n}){const r=hs(),{collections:i,getAllCollections:s}=an(),[o,c]=N.useState(!1),[d,p]=N.useState(""),[h,m]=N.useState(-1),g=N.useRef(null),b=N.useRef(null),x=N.useRef(null),v=e?i.get(e):null,{preloaded:w,userCreated:k,imported:C}=N.useMemo(()=>{const B=s();return{preloaded:B.filter(z=>z.source==="preloaded"),userCreated:B.filter(z=>z.source==="user"),imported:B.filter(z=>z.source==="file"||z.source==="zip")}},[s,i]),T=N.useMemo(()=>{const B=d.toLowerCase().trim(),z=j=>!B||j.name.toLowerCase().includes(B)||j.namespace.toLowerCase().includes(B)||j.tags.some(q=>q.toLowerCase().includes(B));return{preloaded:w.filter(z),userCreated:k.filter(z),imported:C.filter(z)}},[w,k,C,d]),D=N.useMemo(()=>{const B=[];return B.push({type:"new"}),T.userCreated.forEach(z=>B.push({type:"collection",data:z})),T.imported.forEach(z=>B.push({type:"collection",data:z})),T.preloaded.forEach(z=>B.push({type:"collection",data:z})),B},[T]);N.useEffect(()=>{const B=z=>{g.current&&!g.current.contains(z.target)&&(c(!1),p(""),m(-1))};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),N.useEffect(()=>{o&&b.current&&b.current.focus()},[o]),N.useEffect(()=>{var B;h>=0&&x.current&&((B=x.current.querySelectorAll("[data-item]")[h])==null||B.scrollIntoView({block:"nearest"}))},[h]);const I=N.useCallback(B=>{n&&!n(B)||(c(!1),p(""),m(-1),B===null?r("/editor",{state:{intent:"new"}}):B!==e&&r(`/editor/${B}`))},[r,e,n]),L=N.useCallback(B=>{if(!o){(B.key==="Enter"||B.key===" "||B.key==="ArrowDown")&&(B.preventDefault(),c(!0));return}switch(B.key){case"Escape":B.preventDefault(),c(!1),p(""),m(-1);break;case"ArrowDown":B.preventDefault(),m(z=>Math.min(z+1,D.length-1));break;case"ArrowUp":B.preventDefault(),m(z=>Math.max(z-1,0));break;case"Enter":if(B.preventDefault(),h>=0&&h<D.length){const z=D[h];I(z.type==="new"?null:z.data.id)}break}},[o,h,D,I]),O=w.length+k.length+C.length;return u.jsxs("div",{ref:g,className:"relative",children:[u.jsxs("button",{type:"button",onClick:()=>c(!o),onKeyDown:L,className:me("group flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200","border border-border/50 hover:border-border hover:bg-accent/50","focus:outline-none focus:ring-2 focus:ring-primary/30",o&&"border-primary/50 bg-accent/50 ring-2 ring-primary/20"),children:[u.jsx("div",{className:me("flex items-center justify-center w-8 h-8 rounded-lg transition-colors",v?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:v?v.source==="preloaded"?u.jsx(Pr,{className:"w-4 h-4"}):u.jsx(Ya,{className:"w-4 h-4"}):u.jsx(Nr,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[u.jsx("span",{className:"text-sm font-semibold truncate max-w-[200px]",children:(v==null?void 0:v.name)||"New Collection"}),u.jsxs("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:[(v==null?void 0:v.namespace)||"Untitled",t&&u.jsx("span",{className:"ml-1.5 text-amber-500 dark:text-amber-400",children:" unsaved"})]})]}),u.jsx(Fr,{className:me("w-4 h-4 text-muted-foreground transition-transform duration-200",o&&"rotate-180")})]}),o&&u.jsxs("div",{className:me("absolute top-full left-0 mt-2 w-80 z-50","bg-popover border border-border rounded-2xl shadow-xl","animate-slide-up overflow-hidden"),style:{boxShadow:"0 10px 40px -10px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 0, 0, 0.05)"},children:[u.jsxs("div",{className:"p-3 border-b border-border/50",children:[u.jsxs("div",{className:"relative",children:[u.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),u.jsx("input",{ref:b,type:"text",value:d,onChange:B=>{p(B.target.value),m(0)},onKeyDown:L,placeholder:"Search collections...",className:me("w-full pl-9 pr-4 py-2 text-sm rounded-lg","bg-muted/50 border border-transparent","placeholder:text-muted-foreground","focus:outline-none focus:border-primary/30 focus:bg-background")})]}),u.jsxs("div",{className:"flex items-center justify-between mt-2 px-1",children:[u.jsxs("span",{className:"text-xs text-muted-foreground",children:[O," collection",O!==1?"s":""]}),u.jsx("span",{className:"text-xs text-muted-foreground",children:" navigate   select"})]})]}),u.jsxs("div",{ref:x,className:"max-h-80 overflow-y-auto py-2",onKeyDown:L,children:[u.jsx("div",{className:"px-2 mb-1",children:u.jsxs("button",{type:"button","data-item":!0,onClick:()=>I(null),className:me("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-primary/10",h===0&&"bg-primary/10",!e&&"bg-primary/5 ring-1 ring-primary/20"),children:[u.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10 text-primary",children:u.jsx(Nr,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex flex-col items-start",children:[u.jsx("span",{className:"text-sm font-medium",children:"New Collection"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"Create from scratch"})]})]})}),T.userCreated.length>0&&u.jsx(Ap,{label:"Your Collections",icon:u.jsx(Ya,{className:"w-3.5 h-3.5"}),collections:T.userCreated,currentId:e,focusedIndex:h,startIndex:1,onSelect:I}),T.imported.length>0&&u.jsx(Ap,{label:"Imported",icon:u.jsx(Kv,{className:"w-3.5 h-3.5"}),collections:T.imported,currentId:e,focusedIndex:h,startIndex:1+T.userCreated.length,onSelect:I}),T.preloaded.length>0&&u.jsx(Ap,{label:"Built-in Examples",icon:u.jsx(If,{className:"w-3.5 h-3.5"}),collections:T.preloaded,currentId:e,focusedIndex:h,startIndex:1+T.userCreated.length+T.imported.length,onSelect:I}),D.length===1&&d&&u.jsx("div",{className:"px-4 py-8 text-center",children:u.jsxs("p",{className:"text-sm text-muted-foreground",children:['No collections match "',d,'"']})})]})]})]})}function Ap({label:e,icon:t,collections:n,currentId:r,focusedIndex:i,startIndex:s,onSelect:o}){return u.jsxs("div",{className:"mb-1",children:[u.jsxs("div",{className:"flex items-center gap-2 px-4 py-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:[t,e,u.jsxs("span",{className:"text-muted-foreground/60",children:["(",n.length,")"]})]}),u.jsx("div",{className:"px-2 space-y-0.5",children:n.map((c,d)=>{const p=s+d,h=c.id===r,m=i===p;return u.jsxs("button",{type:"button","data-item":!0,onClick:()=>o(c.id),className:me("w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-all duration-150","hover:bg-accent/80",m&&"bg-accent/80",h&&"bg-primary/5 ring-1 ring-primary/20"),children:[u.jsx("div",{className:me("flex items-center justify-center w-8 h-8 rounded-lg transition-colors",h?"bg-primary/15 text-primary":"bg-muted/80 text-muted-foreground"),children:c.source==="preloaded"?u.jsx(Pr,{className:"w-4 h-4"}):u.jsx(Ya,{className:"w-4 h-4"})}),u.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:me("text-sm font-medium truncate",h&&"text-primary"),children:c.name}),h&&u.jsx(ga,{className:"w-3.5 h-3.5 text-primary flex-shrink-0"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[u.jsx("span",{className:"truncate",children:c.namespace}),u.jsxs("span",{className:"flex-shrink-0",children:[" ",c.tableCount," table",c.tableCount!==1?"s":""]})]})]})]},c.id)})})]})}const F4=`# Syntax Quick Reference

## Table References

| Syntax | Description |
|--------|-------------|
| \`{{tableName}}\` | Roll once on table |
| \`{{alias.tableName}}\` | Roll on table from imported file |
| \`{{namespace.tableName}}\` | Roll on namespaced table |
| \`{{3*tableName}}\` | Roll 3 times |
| \`{{3*unique*tableName}}\` | Roll 3 times, no duplicates |
| \`{{3*tableName\\|", "}}\` | Roll 3 times, custom separator |
| \`{{tableName#instance}}\` | Named instance |
| \`{{$count*tableName}}\` | Use shared variable as count |

## Roll Again

*In entry values only*

| Syntax | Description |
|--------|-------------|
| \`{{again}}\` | Roll once more on this table |
| \`{{2*again}}\` | Roll 2 more times |
| \`{{2*unique*again}}\` | Roll 2 more times, no duplicates |
| \`{{dice:1d4*again}}\` | Roll 1d4 times on this table |

## Dice

| Syntax | Description |
|--------|-------------|
| \`{{dice:3d6}}\` | Roll 3d6 |
| \`{{dice:4d6k3}}\` | Roll 4d6, keep highest 3 |
| \`{{dice:2d6kl1}}\` | Roll 2d6, keep lowest 1 |
| \`{{dice:1d6!}}\` | Exploding d6 |
| \`{{dice:2d8+5}}\` | Roll 2d8, add 5 |
| \`{{dice:1d4*tableName}}\` | Roll 1d4, roll that many times on table |

## Math Expressions

| Syntax | Description |
|--------|-------------|
| \`{{math:$a + $b}}\` | Add two variables |
| \`{{math:$a - $b}}\` | Subtract variables |
| \`{{math:$a * $b}}\` | Multiply variables |
| \`{{math:$a / $b}}\` | Integer division (rounds toward zero) |
| \`{{math:($a + $b) * 2}}\` | Grouping with parentheses |
| \`{{math:dice:2d6 + $mod}}\` | Inline dice with variable |
| \`{{math:@hd * 4 + 10}}\` | Using placeholders |

## Variables & Placeholders

| Syntax | Description |
|--------|-------------|
| \`{{$variableName}}\` | Static or shared variable |
| \`{{$alias.variableName}}\` | Variable from imported file |
| \`{{@placeholder.property}}\` | Placeholder property |

## Roll Capture

| Syntax | Description |
|--------|-------------|
| \`{{3*table >> $var}}\` | Capture 3 rolls into $var |
| \`{{3*unique*table >> $var}}\` | Capture 3 unique rolls |
| \`{{$n*table >> $var}}\` | Variable count capture |
| \`{{dice:1d4*table >> $var}}\` | Dice count capture |
| \`{{3*table >> $var\\|silent}}\` | Capture without output |
| \`{{3*table >> $var\\|", "}}\` | Capture with custom separator |

## Capture Access

| Syntax | Description |
|--------|-------------|
| \`{{$var}}\` | All values (comma-separated) |
| \`{{$var\\|"; "}}\` | All values (custom separator) |
| \`{{$var.count}}\` | Number of items captured |
| \`{{$var[0]}}\` | First item's value |
| \`{{$var[-1]}}\` | Last item's value |
| \`{{$var[0].@prop}}\` | First item's @prop from sets |

## Property Aggregation

| Syntax | Description |
|--------|-------------|
| \`{{collect:$var.value}}\` | All values |
| \`{{collect:$var.@prop}}\` | All @prop values |
| \`{{collect:$var.@prop\\|", "}}\` | Custom separator |
| \`{{collect:$var.@prop\\|unique}}\` | Deduplicated |
| \`{{collect:$var.@prop\\|unique\\|", "}}\` | Deduplicated with separator |

## Shared Block

\`\`\`json
"shared": {
  "count": "{{dice:2d4}}",
  "total": "{{math:$count + 5}}",
  "damage": "{{math:dice:1d8 + $strMod}}"
}
\`\`\`

## Imports

\`\`\`json
"imports": [
  { "path": "./file.json", "alias": "name" }
]
\`\`\`

Reference with: \`{{name.tableId}}\`

## Entry Options

### Ranges
| Syntax | Description |
|--------|-------------|
| \`"range": [1, 50]\` | Equivalent to weight 50 |
| \`"range": [51, 75]\` | Equivalent to weight 25 |
| \`"range": [99, 100]\` | Equivalent to weight 2 |

### Weights
| Syntax | Description |
|--------|-------------|
| \`"weight": 0\` | Disables entry (won't be rolled) |
| \`"weight": 1\` | Default weight |

### Assets
\`\`\`json
"assets": {
  "image": "path/to/image.png",
  "token": "path/to/token.webp"
}
\`\`\`

### Tags
\`\`\`json
"tags": ["category", "subcategory", "keyword"]
\`\`\`

## Result Type

| Property | Description |
|----------|-------------|
| \`"resultType": "creature"\` | On tables, entries, templates |

- Case-insensitive, user-definable
- Precedence: Entry > Table > Composite
- Template resultType overrides all

## Inheritance

| Syntax | Description |
|--------|-------------|
| \`"extends": "parentTable"\` | Single-level inheritance |
| \`"extends": "alias.table"\` | Cross-file inheritance |

- Multi-level supported (A > B > C)
- Property-level merging
- \`null\` removes inherited property

## Markdown in Values

| Syntax | Description |
|--------|-------------|
| \`**bold**\` | Bold text |
| \`*italic*\` or \`_italic_\` | Italic text |
| \`\` \`code\` \`\` | Inline code |
| \`[text](url)\` | Hyperlink |

## Escaping

| Syntax | Description |
|--------|-------------|
| \`\\{{\` | Literal {{ |
| \`\\}}\` | Literal }} |
| \`\\"\` | Literal " in separator |
`;function L4(){const[e,t]=N.useState(!1);N.useEffect(()=>{if(!e)return;const r=i=>{i.key==="Escape"&&t(!1)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e]),N.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]);const n=N.useCallback(r=>{r.target===r.currentTarget&&t(!1)},[]);return u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>t(!0),className:me("fixed bottom-6 right-6 z-40","w-10 h-10 rounded-full","flex items-center justify-center","text-muted-foreground/50 hover:text-muted-foreground","hover:bg-accent/50","transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"),"aria-label":"Syntax quick reference",title:"Syntax quick reference",children:u.jsx(xN,{className:"w-5 h-5"})}),e&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"help-modal-title",children:u.jsxs("div",{className:me("relative bg-background border rounded-2xl shadow-lg","w-full max-w-2xl max-h-[80vh]","mx-4 flex flex-col","animate-slide-up"),children:[u.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[u.jsx("h2",{id:"help-modal-title",className:"text-lg font-semibold",children:"Quick Reference"}),u.jsx("button",{onClick:()=>t(!1),className:me("p-2 rounded-lg","text-muted-foreground hover:text-foreground","hover:bg-accent","transition-colors"),"aria-label":"Close",children:u.jsx(cn,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:u.jsx("div",{className:"prose-help",children:u.jsx(Ci,{remarkPlugins:[_i],components:{h1:()=>null,h2:({children:r})=>u.jsx("h2",{className:"text-base font-semibold mt-6 mb-3 first:mt-0 text-foreground",children:r}),h3:({children:r})=>u.jsx("h3",{className:"text-sm font-medium mt-4 mb-2 text-foreground",children:r}),table:({children:r})=>u.jsx("div",{className:"overflow-x-auto my-3",children:u.jsx("table",{className:"w-full border-collapse text-sm",children:r})}),thead:({children:r})=>u.jsx("thead",{className:"border-b border-border bg-muted/50",children:r}),th:({children:r})=>u.jsx("th",{className:"px-3 py-2 text-left font-medium text-xs",children:r}),td:({children:r})=>u.jsx("td",{className:"px-3 py-2 border-b border-border/50 text-muted-foreground",children:r}),code:({className:r,children:i,...s})=>r?u.jsx("code",{className:me(r,"text-xs"),...s,children:i}):u.jsx("code",{className:"rounded bg-muted px-1 py-0.5 text-xs font-mono text-primary",...s,children:i}),pre:({children:r})=>u.jsx("pre",{className:"overflow-x-auto rounded-lg bg-muted/50 p-3 text-xs my-3",children:r}),p:({children:r})=>u.jsx("p",{className:"text-sm text-muted-foreground my-2",children:r}),ul:({children:r})=>u.jsx("ul",{className:"list-disc pl-4 space-y-1 my-2 text-sm text-muted-foreground",children:r}),em:({children:r})=>u.jsx("em",{className:"text-muted-foreground not-italic text-xs",children:r})},children:F4})})}),u.jsxs("div",{className:"px-6 py-3 border-t text-xs text-muted-foreground text-center",children:["Press ",u.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-muted font-mono",children:"Esc"})," or click outside to close"]})]})})]})}function hw(e,t,n={}){const{prettyPrint:r=!0,indent:i=2}=n,s=r?JSON.stringify(e,null,i):JSON.stringify(e),o=new Blob([s],{type:"application/json"}),c=URL.createObjectURL(o),d=`${e.metadata.namespace||"collection"}.json`;mw(c,d),URL.revokeObjectURL(c)}async function P4(e,t,n={}){const{prettyPrint:r=!0,indent:i=2}=n,s=new ix;for(const{id:p,document:h}of e){const m=r?JSON.stringify(h,null,i):JSON.stringify(h),g=`${h.metadata.namespace||p}.json`;s.file(g,m)}const o=await s.generateAsync({type:"blob"}),c=URL.createObjectURL(o);mw(c,t||"rolldeo-collections.zip"),URL.revokeObjectURL(c)}function mw(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function z4(e,t,n,r){const i=new Map,s=[],o=new Set,c=[e];for(;c.length>0;){const d=c.shift(),p=d.metadata.namespace;if(!o.has(p)&&(o.add(p),!(!d.imports||d.imports.length===0)))for(const h of d.imports){const m=$4(h.path,n,r);if(m){const g=m.metadata.namespace;!o.has(g)&&!i.has(g)&&(i.set(g,m),c.push(m))}else s.push(h.path)}}return{primary:{id:t||e.metadata.namespace.replace(/\./g,"-"),document:e},dependencies:Array.from(i.entries()).map(([d,p])=>({id:d.replace(/\./g,"-"),document:p})),unresolvedPaths:[...new Set(s)]}}function $4(e,t,n){for(const[i,s]of n)if(s.namespace===e){const o=t.getCollection(i);return o==null?void 0:o.document}const r=t.getCollection(e);if(r)return r.document}function B4({isOpen:e,onClose:t,document:n,collectionId:r}){const i=an(C=>C.engine),s=an(C=>C.collections),[o,c]=N.useState("choice"),[d,p]=N.useState(null),[h,m]=N.useState([]),[g,b]=N.useState(0),x=N.useMemo(()=>n.imports||[],[n.imports]),v=N.useCallback(()=>{c("choice"),p(null),m([]),b(0),t()},[t]),w=N.useCallback(()=>{hw(n),v()},[n,v]),k=N.useCallback(async()=>{c("resolving"),p(null);try{await new Promise(I=>setTimeout(I,100));const C=z4(n,r,i,s);C.unresolvedPaths.length>0&&m(C.unresolvedPaths);const T=[C.primary,...C.dependencies];b(T.length);const D=`${n.metadata.namespace||"collection"}-bundle.zip`;await P4(T,D),c("complete"),setTimeout(()=>{v()},1500)}catch(C){p(C instanceof Error?C.message:"Export failed"),c("choice")}},[n,r,i,s,v]);return e?u.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[u.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm animate-fade-in",onClick:o==="choice"?v:void 0,"aria-hidden":"true"}),u.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"export-dialog-title",className:"relative card-elevated border border-white/10 max-w-md w-full mx-4 animate-slide-up",children:[o==="choice"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"icon-container icon-amber",children:u.jsx(If,{className:"h-5 w-5"})}),u.jsx("h2",{id:"export-dialog-title",className:"text-lg font-semibold",children:"Export with Dependencies?"})]}),u.jsx("button",{onClick:v,className:"p-2 rounded-xl hover:bg-white/5 transition-colors","aria-label":"Close dialog",children:u.jsx(cn,{className:"h-5 w-5"})})]}),u.jsxs("div",{className:"p-5 space-y-4",children:[u.jsxs("p",{className:"text-muted-foreground",children:["This collection references ",x.length," external collection",x.length!==1?"s":"",". Would you like to include them in the export?"]}),u.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:x.map(C=>u.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5",children:[u.jsx(os,{className:"h-4 w-4 text-[hsl(var(--amber))] shrink-0"}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"font-medium text-sm truncate",children:C.alias}),u.jsx("p",{className:"text-xs text-muted-foreground truncate",children:C.path})]})]},C.alias))}),d&&u.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-destructive/10 border border-destructive/20",children:[u.jsx(Wa,{className:"h-4 w-4 text-destructive shrink-0"}),u.jsx("p",{className:"text-sm text-destructive",children:d})]})]}),u.jsxs("div",{className:"p-5 border-t border-white/5 flex gap-3",children:[u.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 border border-border/50 rounded-xl hover:bg-accent transition-colors",children:"Export Only This"}),u.jsxs("button",{onClick:k,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[u.jsx(zo,{className:"h-4 w-4"}),"Include Dependencies"]})]})]}),o==="resolving"&&u.jsx("div",{className:"p-8",children:u.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(ba,{className:"h-12 w-12 animate-spin text-primary"}),u.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-muted-foreground",children:"Resolving dependencies..."}),u.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"This may take a moment for larger collections"})]})]})}),o==="complete"&&u.jsx("div",{className:"p-8",children:u.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[u.jsx("div",{className:"icon-container icon-mint",children:u.jsx(Bp,{className:"h-8 w-8"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"font-semibold text-mint",children:"Export Complete!"}),u.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[g," collection",g!==1?"s":""," ","exported"]}),h.length>0&&u.jsxs("p",{className:"text-sm text-amber-500 mt-2",children:[h.length," import",h.length!==1?"s":""," could not be resolved"]})]})]})})]})]}):null}const U4=()=>({metadata:{name:"",namespace:"",version:"1.0.0",specVersion:"1.0"},tables:[{id:"example",name:"Example Table",type:"simple",entries:[{value:"First result"},{value:"Second result"}]}]});function sv(){const{collectionId:e}=Dk(),t=hs(),n=Qr(),{getCollectionDocument:r,saveCollection:i,collections:s,isInitialized:o}=an(),c=Ft(A=>A.lastEditorCollectionId),d=Ft(A=>A.setLastEditorCollectionId),[p,h]=N.useState(null),[m,g]=N.useState(""),[b,x]=N.useState(""),[v,w]=N.useState(!1),[k,C]=N.useState(!1),[T,D]=N.useState(null),[I,L]=N.useState(!1),[O,B]=N.useState([]),[z,j]=N.useState(!0),[q,F]=N.useState(!1),G=!e,_=n.state,H=(_==null?void 0:_.intent)==="new";N.useEffect(()=>{o&&(H||!e&&c&&s.has(c)&&t(`/editor/${c}`,{replace:!0}))},[e,c,s,o,t,H]),N.useEffect(()=>{if(o){if(j(!0),e){const A=r(e);if(A){h(A);const te=uc(JSON.stringify(A));g(te),x(te),d(e)}else t("/editor",{replace:!0})}else{const A=U4();h(A);const te=uc(JSON.stringify(A));g(te),x(te)}j(!1)}},[e,o,r,t,d]),N.useEffect(()=>{w(m!==b)},[m,b]);const se=zk(v),ne=N.useCallback(A=>{const te=uc(JSON.stringify(A));g(te)},[]),Z=N.useCallback(A=>{h(A)},[]),J=N.useCallback(A=>{g(A);try{const te=JSON.parse(A);h(te)}catch{}},[]),P=N.useCallback(A=>{B(A)},[]),M=N.useCallback(async()=>{if(p){if(!p.metadata.name.trim()){D("Name is required");return}if(!p.metadata.namespace.trim()){D("Namespace is required");return}if(O.some(A=>A.severity==="error")){D("Please fix validation errors before saving");return}C(!0),D(null),L(!1);try{const A=e||p.metadata.namespace.replace(/\./g,"-");if(!e&&s.has(A)){D(`A collection with ID "${A}" already exists. Use a different namespace.`),C(!1);return}await i(A,p,"user");const te=uc(JSON.stringify(p));x(te),g(te),L(!0),setTimeout(()=>L(!1),2e3),e||t(`/editor/${A}`,{replace:!0})}catch(A){D(A instanceof Error?A.message:"Failed to save")}finally{C(!1)}}},[p,e,s,i,t,O]),U=N.useCallback(()=>{p&&(p.imports&&p.imports.length>0?F(!0):hw(p))},[p]);return N.useEffect(()=>{const A=te=>{(te.metaKey||te.ctrlKey)&&te.key==="s"&&(te.preventDefault(),M())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[M]),z||!o?u.jsx("div",{className:"flex items-center justify-center h-64",children:u.jsx(ba,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):p?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("h1",{className:"text-2xl font-bold",children:G?"Create Collection":"Edit Collection"}),u.jsx(M4,{currentCollectionId:e,isDirty:v})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[O.length>0&&u.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[O.filter(A=>A.severity==="error").length>0&&u.jsxs("span",{className:"text-destructive flex items-center gap-1",children:[u.jsx(cn,{className:"h-4 w-4"}),O.filter(A=>A.severity==="error").length," errors"]}),O.filter(A=>A.severity==="warning").length>0&&u.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[u.jsx(Wa,{className:"h-4 w-4"}),O.filter(A=>A.severity==="warning").length," warnings"]})]}),I&&u.jsxs("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[u.jsx(ga,{className:"h-4 w-4"}),"Saved"]}),T&&u.jsxs("span",{className:"flex items-center gap-1 text-sm text-destructive",children:[u.jsx(Wa,{className:"h-4 w-4"}),T]}),u.jsxs("button",{onClick:M,disabled:k||!v,className:me("flex items-center gap-2 px-4 py-2 rounded-xl transition-all font-medium",v?"bg-primary text-primary-foreground hover:bg-primary/90":"border border-border/50 hover:bg-accent",k&&"opacity-50 cursor-not-allowed"),children:[k?u.jsx(ba,{className:"h-4 w-4 animate-spin"}):u.jsx(BN,{className:"h-4 w-4"}),"Save",v&&!k&&u.jsx("span",{className:"text-xs opacity-70",children:"(unsaved)"})]}),u.jsxs("button",{onClick:U,disabled:!p,className:"flex items-center gap-2 px-4 py-2 border border-border/50 rounded-xl hover:bg-accent transition-colors disabled:opacity-50",children:[u.jsx(zo,{className:"h-4 w-4"}),"Export"]})]})]}),u.jsx(O4,{document:p,jsonContent:m,onDocumentChange:Z,onJsonChange:J,onValidationChange:P,syncToJson:ne,collectionId:e}),u.jsx(L4,{}),se.state==="blocked"&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-background border rounded-2xl p-6 max-w-md w-full mx-4 space-y-4 animate-slide-up",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-xl",children:u.jsx(Wa,{className:"h-6 w-6 text-yellow-600"})}),u.jsx("h2",{className:"text-lg font-semibold",children:"Unsaved Changes"})]}),u.jsx("p",{className:"text-muted-foreground",children:"You have unsaved changes. Are you sure you want to leave? Your changes will be lost."}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{onClick:()=>{var A;return(A=se.reset)==null?void 0:A.call(se)},className:"px-4 py-2 border rounded-xl hover:bg-accent transition-colors",children:"Stay"}),u.jsx("button",{onClick:()=>{var A;return(A=se.proceed)==null?void 0:A.call(se)},className:"px-4 py-2 bg-destructive text-destructive-foreground rounded-xl hover:bg-destructive/90 transition-colors",children:"Leave"})]})]})}),q&&p&&u.jsx(B4,{isOpen:q,onClose:()=>F(!1),document:p,collectionId:e})]}):u.jsx("div",{className:"text-center py-12",children:u.jsx("p",{className:"text-muted-foreground",children:"Failed to load document"})})}const H4=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,q4=Object.hasOwnProperty;class V4{constructor(){this.occurrences,this.reset()}slug(t,n){const r=this;let i=W4(t,n===!0);const s=i;for(;q4.call(r.occurrences,i);)r.occurrences[s]++,i=s+"-"+r.occurrences[s];return r.occurrences[i]=0,i}reset(){this.occurrences=Object.create(null)}}function W4(e,t){return typeof e!="string"?"":(t||(e=e.toLowerCase()),e.replace(H4,"").replace(/ /g,"-"))}function G4(e){const t=e.type==="element"?e.tagName.toLowerCase():"",n=t.length===2&&t.charCodeAt(0)===104?t.charCodeAt(1):0;return n>48&&n<55?n-48:void 0}function K4(e){return"children"in e?gw(e):"value"in e?e.value:""}function Y4(e){return e.type==="text"?e.value:"children"in e?gw(e):""}function gw(e){let t=-1;const n=[];for(;++t<e.children.length;)n[t]=Y4(e.children[t]);return n.join("")}const Z4={},ov=new V4;function X4(e){const n=(e||Z4).prefix||"";return function(r){ov.reset(),Wo(r,"element",function(i){G4(i)&&!i.properties.id&&(i.properties.id=n+ov.slug(K4(i)))})}}const lv=(function(e,t,n){const r=Vo(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),Ti=(function(e){if(e==null)return e3;if(typeof e=="string")return J4(e);if(typeof e=="object")return Q4(e);if(typeof e=="function")return yh(e);throw new Error("Expected function, string, or array as `test`")});function Q4(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ti(e[n]);return yh(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function J4(e){return yh(t);function t(n){return n.tagName===e}}function yh(e){return t;function t(n,r,i){return!!(t3(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function e3(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function t3(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const cv=/\n/g,uv=/[\t ]+/g,mf=Ti("br"),dv=Ti(c3),n3=Ti("p"),pv=Ti("tr"),r3=Ti(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",l3,u3]),bw=Ti(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function a3(e,t){const n=t||{},r="children"in e?e.children:[],i=bw(e),s=xw(e,{whitespace:n.whitespace||"normal"}),o=[];(e.type==="text"||e.type==="comment")&&o.push(...vw(e,{breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<r.length;)o.push(...yw(r[c],e,{whitespace:s,breakBefore:c?void 0:i,breakAfter:c<r.length-1?mf(r[c+1]):i}));const d=[];let p;for(c=-1;++c<o.length;){const h=o[c];typeof h=="number"?p!==void 0&&h>p&&(p=h):h&&(p!==void 0&&p>-1&&d.push(`
`.repeat(p)||" "),p=-1,d.push(h))}return d.join("")}function yw(e,t,n){return e.type==="element"?i3(e,t,n):e.type==="text"?n.whitespace==="normal"?vw(e,n):s3(e):[]}function i3(e,t,n){const r=xw(e,n),i=e.children||[];let s=-1,o=[];if(r3(e))return o;let c,d;for(mf(e)||pv(e)&&lv(t,e,pv)?d=`
`:n3(e)?(c=2,d=2):bw(e)&&(c=1,d=1);++s<i.length;)o=o.concat(yw(i[s],e,{whitespace:r,breakBefore:s?void 0:c,breakAfter:s<i.length-1?mf(i[s+1]):d}));return dv(e)&&lv(t,e,dv)&&o.push("	"),c&&o.unshift(c),d&&o.push(d),o}function vw(e,t){const n=String(e.value),r=[],i=[];let s=0;for(;s<=n.length;){cv.lastIndex=s;const d=cv.exec(n),p=d&&"index"in d?d.index:n.length;r.push(o3(n.slice(s,p).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?t.breakBefore:!0,p===n.length?t.breakAfter:!0)),s=p+1}let o=-1,c;for(;++o<r.length;)r[o].charCodeAt(r[o].length-1)===8203||o<r.length-1&&r[o+1].charCodeAt(0)===8203?(i.push(r[o]),c=void 0):r[o]?(typeof c=="number"&&i.push(c),i.push(r[o]),c=0):(o===0||o===r.length-1)&&i.push(0);return i}function s3(e){return[String(e.value)]}function o3(e,t,n){const r=[];let i=0,s;for(;i<e.length;){uv.lastIndex=i;const o=uv.exec(e);s=o?o.index:e.length,!i&&!s&&o&&!t&&r.push(""),i!==s&&r.push(e.slice(i,s)),i=o?s+o[0].length:s}return i!==s&&!n&&r.push(""),r.join(" ")}function xw(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function l3(e){return!!(e.properties||{}).hidden}function c3(e){return e.tagName==="td"||e.tagName==="th"}function u3(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function d3(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},p={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},h={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(p,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},b=t.optional(i)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],w=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],k=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],D={type:v,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:w},I={className:"function.dispatch",relevance:0,keywords:{_hint:k},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},L=[I,m,c,n,e.C_BLOCK_COMMENT_MODE,h,p],O={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:D,contains:L.concat([{begin:/\(/,end:/\)/,keywords:D,contains:L.concat(["self"]),relevance:0}]),relevance:0},B={className:"function",begin:"("+o+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:D,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:D,relevance:0},{begin:b,returnBegin:!0,contains:[g],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[p,h]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,p,h,c,{begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,p,h,c]}]},c,n,e.C_BLOCK_COMMENT_MODE,m]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:D,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(O,B,I,L,[m,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:D,contains:["self",c]},{begin:e.IDENT_RE+"::",keywords:D},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function p3(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=d3(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function f3(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const i={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},s=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},c={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,i]};i.contains.push(c);const d={match:/\\"/},p={className:"string",begin:/'/,end:/'/},h={match:/\\'/},m={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},g=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],b=e.SHEBANG({binary:`(${g.join("|")})`,relevance:10}),x={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},v=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],w=["true","false"],k={match:/(\/[a-z._-]+)+/},C=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],T=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],D=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],I=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:v,literal:w,built_in:[...C,...T,"set","shopt",...D,...I]},contains:[b,e.SHEBANG(),x,m,s,o,k,c,d,p,h,n]}}function h3(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},p={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},h={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(p,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},b=t.optional(i)+e.IDENT_RE+"\\s*\\(",w={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},k=[m,c,n,e.C_BLOCK_COMMENT_MODE,h,p],C={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:w,contains:k.concat([{begin:/\(/,end:/\)/,keywords:w,contains:k.concat(["self"]),relevance:0}]),relevance:0},T={begin:"("+o+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:w,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:w,relevance:0},{begin:b,returnBegin:!0,contains:[e.inherit(g,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,p,h,c,{begin:/\(/,end:/\)/,keywords:w,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,p,h,c]}]},c,n,e.C_BLOCK_COMMENT_MODE,m]};return{name:"C",aliases:["h"],keywords:w,disableAutodetect:!0,illegal:"</",contains:[].concat(C,T,k,[m,{begin:e.IDENT_RE+"::",keywords:w},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:m,strings:p,keywords:w}}}function m3(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},p={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},h={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(p,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},g={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},b=t.optional(i)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],v=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],w=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],k=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],D={type:v,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:w},I={className:"function.dispatch",relevance:0,keywords:{_hint:k},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},L=[I,m,c,n,e.C_BLOCK_COMMENT_MODE,h,p],O={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:D,contains:L.concat([{begin:/\(/,end:/\)/,keywords:D,contains:L.concat(["self"]),relevance:0}]),relevance:0},B={className:"function",begin:"("+o+"[\\*&\\s]+)+"+b,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:D,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:D,relevance:0},{begin:b,returnBegin:!0,contains:[g],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[p,h]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,p,h,c,{begin:/\(/,end:/\)/,keywords:D,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,p,h,c]}]},c,n,e.C_BLOCK_COMMENT_MODE,m]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:D,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(O,B,I,L,[m,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:D,contains:["self",c]},{begin:e.IDENT_RE+"::",keywords:D},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function g3(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],i=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],s=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:i.concat(s),built_in:t,literal:r},c=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},p={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},h={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},m=e.inherit(h,{illegal:/\n/}),g={className:"subst",begin:/\{/,end:/\}/,keywords:o},b=e.inherit(g,{illegal:/\n/}),x={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,b]},v={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]},w=e.inherit(v,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},b]});g.contains=[v,x,h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.C_BLOCK_COMMENT_MODE],b.contains=[w,x,m,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const k={variants:[p,v,x,h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},C={begin:"<",end:">",contains:[{beginKeywords:"in out"},c]},T=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",D={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},k,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},c,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[c,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[c,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+T+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,C],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[k,d,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},D]}}const b3=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),y3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],v3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],x3=[...y3,...v3],w3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),E3=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),k3=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),N3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function S3(e){const t=e.regex,n=b3(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},i="and or not only",s=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",c=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+E3.join("|")+")"},{begin:":(:)?("+k3.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+N3.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...c,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...c,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:w3.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...c,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+x3.join("|")+")\\b"}]}}function C3(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function _3(e){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function T3(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function D3(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},s={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},c={begin:/\[/,end:/\]/,contains:[r,s,i,o,n,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,p=/"(\\"|[^"])*"/,h=/'[^']*'/,m=t.either(d,p,h),g=t.concat(m,"(\\s*\\.\\s*",m,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:g,className:"attr",starts:{end:/$/,contains:[r,c,s,i,o,n]}}]}}var rs="[0-9](_*[0-9])*",fc=`\\.(${rs})`,hc="[0-9a-fA-F](_*[0-9a-fA-F])*",fv={className:"number",variants:[{begin:`(\\b(${rs})((${fc})|\\.)?|(${fc}))[eE][+-]?(${rs})[fFdD]?\\b`},{begin:`\\b(${rs})((${fc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${fc})[fFdD]?\\b`},{begin:`\\b(${rs})[fFdD]\\b`},{begin:`\\b0[xX]((${hc})\\.?|(${hc})?\\.(${hc}))[pP][+-]?(${rs})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${hc})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function ww(e,t,n){return n===-1?"":e.replace(t,r=>ww(e,t,n-1))}function R3(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+ww("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),d={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},p={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},h={className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:d,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:d,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,fv,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},fv,p]}}const hv="[A-Za-z$_][0-9A-Za-z$_]*",A3=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],I3=["true","false","null","undefined","NaN","Infinity"],Ew=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],kw=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Nw=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],j3=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],O3=[].concat(Nw,Ew,kw);function M3(e){const t=e.regex,n=(Z,{after:J})=>{const P="</"+Z[0].slice(1);return Z.input.indexOf(P,J)!==-1},r=hv,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Z,J)=>{const P=Z[0].length+Z.index,M=Z.input[P];if(M==="<"||M===","){J.ignoreMatch();return}M===">"&&(n(Z,{after:P})||J.ignoreMatch());let U;const A=Z.input.substring(P);if(U=A.match(/^\s*=/)){J.ignoreMatch();return}if((U=A.match(/^\s+extends\s+/))&&U.index===0){J.ignoreMatch();return}}},c={$pattern:hv,keyword:A3,literal:I3,built_in:O3,"variable.language":j3},d="[0-9](_?[0-9])*",p=`\\.(${d})`,h="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${h})((${p})|\\.)?|(${p}))[eE][+-]?(${d})\\b`},{begin:`\\b(${h})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},g={className:"subst",begin:"\\$\\{",end:"\\}",keywords:c,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,g]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},T=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,w,{match:/\$\d+/},m];g.contains=T.concat({begin:/\{/,end:/\}/,keywords:c,contains:["self"].concat(T)});const D=[].concat(C,g.contains),I=D.concat([{begin:/(\s*)\(/,end:/\)/,keywords:c,contains:["self"].concat(D)}]),L={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:I},O={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},B={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Ew,...kw]}},z={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},j={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[L],illegal:/%/},q={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(Z){return t.concat("(?!",Z.join("|"),")")}const G={match:t.concat(/\b/,F([...Nw,"super","import"].map(Z=>`${Z}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},_={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},H={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},L]},se="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ne={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(se)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[L]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:c,exports:{PARAMS_CONTAINS:I,CLASS_REFERENCE:B},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),z,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,w,C,{match:/\$\d+/},m,B,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ne,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:se,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:I}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},j,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[L,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},_,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[L]},G,q,O,H,{match:/\$[(.]/}]}}function F3(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],i={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,i,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var as="[0-9](_*[0-9])*",mc=`\\.(${as})`,gc="[0-9a-fA-F](_*[0-9a-fA-F])*",L3={className:"number",variants:[{begin:`(\\b(${as})((${mc})|\\.)?|(${mc}))[eE][+-]?(${as})[fFdD]?\\b`},{begin:`\\b(${as})((${mc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${mc})[fFdD]?\\b`},{begin:`\\b(${as})[fFdD]\\b`},{begin:`\\b0[xX]((${gc})\\.?|(${gc})?\\.(${gc}))[pP][+-]?(${as})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${gc})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function P3(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},s={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[s,i]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,s,i]}]};i.contains.push(o);const c={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},d={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(o,{className:"string"}),"self"]}]},p=L3,h=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),m={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},g=m;return g.variants[1].contains=[m],m.variants[1].contains=[g],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,h,n,r,c,d,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[m,e.C_LINE_COMMENT_MODE,h],relevance:0},e.C_LINE_COMMENT_MODE,h,c,d,o,e.C_NUMBER_MODE]},h]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},c,d]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},p]}}const z3=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),$3=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],B3=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],U3=[...$3,...B3],H3=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Sw=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Cw=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),q3=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),V3=Sw.concat(Cw).sort().reverse();function W3(e){const t=z3(e),n=V3,r="and or not only",i="[\\w-]+",s="("+i+"|@\\{"+i+"\\})",o=[],c=[],d=function(T){return{className:"string",begin:"~?"+T+".*?"+T}},p=function(T,D,I){return{className:T,begin:D,relevance:I}},h={$pattern:/[a-z-]+/,keyword:r,attribute:H3.join(" ")},m={begin:"\\(",end:"\\)",contains:c,keywords:h,relevance:0};c.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,d("'"),d('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,m,p("variable","@@?"+i,10),p("variable","@\\{"+i+"\\}"),p("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const g=c.concat({begin:/\{/,end:/\}/,contains:o}),b={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(c)},x={begin:s+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+q3.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:c}}]},v={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:h,returnEnd:!0,contains:c,relevance:0}},w={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:g}},k={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:s,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,b,p("keyword","all\\b"),p("variable","@\\{"+i+"\\}"),{begin:"\\b("+U3.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,p("selector-tag",s,0),p("selector-id","#"+s),p("selector-class","\\."+s,0),p("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Sw.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Cw.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:g},{begin:"!important"},t.FUNCTION_DISPATCH]},C={begin:i+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[k]};return o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,v,w,C,x,k,b,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function G3(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},i=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function K3(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},i={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},s={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,i,s,o]}}function Y3(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},c=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,c,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},p={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},h={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},m=e.inherit(p,{contains:[]}),g=e.inherit(h,{contains:[]});p.contains.push(g),h.contains.push(m);let b=[n,d];return[p,h,m,g].forEach(k=>{k.contains=k.contains.concat(b)}),b=b.concat(p,h),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:b},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:b}]}]},n,s,p,h,{className:"quote",begin:"^>\\s+",contains:b,end:"$"},i,r,d,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function Z3(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,c={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:c,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function X3(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:n.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},o={begin:/->\{/,end:/\}/},c={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[c]},p={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},h=[e.BACKSLASH_ESCAPE,s,d],m=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],g=(v,w,k="\\1")=>{const C=k==="\\1"?k:t.concat(k,w);return t.concat(t.concat("(?:",v,")"),w,/(?:\\.|[^\\\/])*?/,C,/(?:\\.|[^\\\/])*?/,k,r)},b=(v,w,k)=>t.concat(t.concat("(?:",v,")"),w,/(?:\\.|[^\\\/])*?/,k,r),x=[d,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:h,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},p,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:g("s|tr|y",t.either(...m,{capture:!0}))},{begin:g("s|tr|y","\\(","\\)")},{begin:g("s|tr|y","\\[","\\]")},{begin:g("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:b("(?:m|qr)?",/\//,/\//)},{begin:b("m|qr",t.either(...m,{capture:!0}),/\1/)},{begin:b("m|qr",/\(/,/\)/)},{begin:b("m|qr",/\[/,/\]/)},{begin:b("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,c]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,c,p]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=x,o.contains=x,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:x}}function Q3(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),i=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),s=t.concat(/[A-Z]+/,n),o={scope:"variable",match:"\\$+"+r},c={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},d={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},p=e.inherit(e.APOS_STRING_MODE,{illegal:null}),h=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(d)}),m={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(d),"on:begin":(_,H)=>{H.data._beginMatch=_[1]||_[2]},"on:end":(_,H)=>{H.data._beginMatch!==_[1]&&H.ignoreMatch()}},g=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),b=`[ 	
]`,x={scope:"string",variants:[h,p,m,g]},v={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},w=["false","null","true"],k=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],C=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],D={keyword:k,literal:(_=>{const H=[];return _.forEach(se=>{H.push(se),se.toLowerCase()===se?H.push(se.toUpperCase()):H.push(se.toLowerCase())}),H})(w),built_in:C},I=_=>_.map(H=>H.replace(/\|\d+$/,"")),L={variants:[{match:[/new/,t.concat(b,"+"),t.concat("(?!",I(C).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},O=t.concat(r,"\\b(?!\\()"),B={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),O],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,t.concat(/::/,t.lookahead(/(?!class\b)/)),O],scope:{1:"title.class",3:"variable.constant"}},{match:[i,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},z={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},j={relevance:0,begin:/\(/,end:/\)/,keywords:D,contains:[z,o,B,e.C_BLOCK_COMMENT_MODE,x,v,L]},q={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",I(k).join("\\b|"),"|",I(C).join("\\b|"),"\\b)"),r,t.concat(b,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[j]};j.contains.push(q);const F=[z,B,e.C_BLOCK_COMMENT_MODE,x,v,L],G={begin:t.concat(/#\[\s*\\?/,t.either(i,s)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:w,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:w,keyword:["new","array"]},contains:["self",...F]},...F,{scope:"meta",variants:[{match:i},{match:s}]}]};return{case_insensitive:!1,keywords:D,contains:[G,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},c,{scope:"variable.language",match:/\$this\b/},o,q,B,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},L,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:D,contains:["self",G,o,B,e.C_BLOCK_COMMENT_MODE,x,v]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},x,v]}}function J3(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function eF(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function tF(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],c={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},p={className:"subst",begin:/\{/,end:/\}/,keywords:c,illegal:/#/},h={begin:/\{\{/,relevance:0},m={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d,h,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d,h,p]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,h,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,h,p]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},g="[0-9](_?[0-9])*",b=`(\\b(${g}))?\\.(${g})|\\b(${g})\\.`,x=`\\b|${r.join("|")}`,v={className:"number",relevance:0,variants:[{begin:`(\\b(${g})|(${b}))[eE][+-]?(${g})[jJ]?(?=${x})`},{begin:`(${b})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${g})[jJ](?=${x})`}]},w={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:c,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},k={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:["self",d,v,m,e.HASH_COMMENT_MODE]}]};return p.contains=[m,v,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:c,illegal:/(<\/|\?)|=>/,contains:[d,v,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,w,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[k]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[v,k,m]}]}}function nF(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function rF(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,s=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[s,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:s},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function aF(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=t.concat(r,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},c={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},p=[e.COMMENT("#","$",{contains:[c]}),e.COMMENT("^=begin","^=end",{contains:[c],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],h={className:"subst",begin:/#\{/,end:/\}/,keywords:o},m={className:"string",contains:[e.BACKSLASH_ESCAPE,h],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,h]})]}]},g="[1-9](_?[0-9])*|0",b="[0-9](_?[0-9])*",x={className:"number",relevance:0,variants:[{begin:`\\b(${g})(\\.(${b}))?([eE][+-]?(${b})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},v={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},L=[m,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:o},{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[v]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[m,{begin:n}],relevance:0},x,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,h],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,p),relevance:0}].concat(d,p);h.contains=L,v.contains=L;const j=[{begin:/^\s*=>/,starts:{end:"$",contains:L}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:L}}];return p.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(j).concat(p).concat(L)}}function iF(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),i=t.concat(n,e.IDENT_RE),s={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,t.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",c=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],p=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],h=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:h,keyword:c,literal:d,built_in:p},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:p,type:h}},{className:"punctuation",begin:"->"},s]}}const sF=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),oF=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],lF=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],cF=[...oF,...lF],uF=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),dF=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),pF=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),fF=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function hF(e){const t=sF(e),n=pF,r=dF,i="@[a-z-]+",s="and or not only",c={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+cF.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},c,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+fF.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,c,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:i,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:uF.join(" ")},contains:[{begin:i,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},c,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function mF(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function gF(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},s=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],c=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],p=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],h=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],m=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],g=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],b=h,x=[...p,...d].filter(I=>!h.includes(I)),v={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},w={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},k={match:t.concat(/\b/,t.either(...b),/\s*\(/),relevance:0,keywords:{built_in:b}};function C(I){return t.concat(/\b/,t.either(...I.map(L=>L.replace(/\s+/,"\\s+"))),/\b/)}const T={scope:"keyword",match:C(g),relevance:0};function D(I,{exceptions:L,when:O}={}){const B=O;return L=L||[],I.map(z=>z.match(/\|\d+$/)||L.includes(z)?z:B(z)?`${z}|0`:z)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:D(x,{when:I=>I.length<3}),literal:s,type:c,built_in:m},contains:[{scope:"type",match:C(o)},T,k,v,r,i,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,w]}}function _w(e){return e?typeof e=="string"?e:e.source:null}function uo(e){return Ut("(?=",e,")")}function Ut(...e){return e.map(n=>_w(n)).join("")}function bF(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Vn(...e){return"("+(bF(e).capture?"":"?:")+e.map(r=>_w(r)).join("|")+")"}const vh=e=>Ut(/\b/,e,/\w$/.test(e)?/\b/:/\B/),yF=["Protocol","Type"].map(vh),mv=["init","self"].map(vh),vF=["Any","Self"],Ip=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],gv=["false","nil","true"],xF=["assignment","associativity","higherThan","left","lowerThan","none","right"],wF=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],bv=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Tw=Vn(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Dw=Vn(Tw,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),jp=Ut(Tw,Dw,"*"),Rw=Vn(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),zc=Vn(Rw,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),Kr=Ut(Rw,zc,"*"),bc=Ut(/[A-Z]/,zc,"*"),EF=["attached","autoclosure",Ut(/convention\(/,Vn("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Ut(/objc\(/,Kr,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],kF=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function NF(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],i={match:[/\./,Vn(...yF,...mv)],className:{2:"keyword"}},s={match:Ut(/\./,Vn(...Ip)),relevance:0},o=Ip.filter(oe=>typeof oe=="string").concat(["_|0"]),c=Ip.filter(oe=>typeof oe!="string").concat(vF).map(vh),d={variants:[{className:"keyword",match:Vn(...c,...mv)}]},p={$pattern:Vn(/\b\w+/,/#\w+/),keyword:o.concat(wF),literal:gv},h=[i,s,d],m={match:Ut(/\./,Vn(...bv)),relevance:0},g={className:"built_in",match:Ut(/\b/,Vn(...bv),/(?=\()/)},b=[m,g],x={match:/->/,relevance:0},v={className:"operator",relevance:0,variants:[{match:jp},{match:`\\.(\\.|${Dw})+`}]},w=[x,v],k="([0-9]_*)+",C="([0-9a-fA-F]_*)+",T={className:"number",relevance:0,variants:[{match:`\\b(${k})(\\.(${k}))?([eE][+-]?(${k}))?\\b`},{match:`\\b0x(${C})(\\.(${C}))?([pP][+-]?(${k}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},D=(oe="")=>({className:"subst",variants:[{match:Ut(/\\/,oe,/[0\\tnr"']/)},{match:Ut(/\\/,oe,/u\{[0-9a-fA-F]{1,8}\}/)}]}),I=(oe="")=>({className:"subst",match:Ut(/\\/,oe,/[\t ]*(?:[\r\n]|\r\n)/)}),L=(oe="")=>({className:"subst",label:"interpol",begin:Ut(/\\/,oe,/\(/),end:/\)/}),O=(oe="")=>({begin:Ut(oe,/"""/),end:Ut(/"""/,oe),contains:[D(oe),I(oe),L(oe)]}),B=(oe="")=>({begin:Ut(oe,/"/),end:Ut(/"/,oe),contains:[D(oe),L(oe)]}),z={className:"string",variants:[O(),O("#"),O("##"),O("###"),B(),B("#"),B("##"),B("###")]},j=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],q={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:j},F=oe=>{const K=Ut(oe,/\//),W=Ut(/\//,oe);return{begin:K,end:W,contains:[...j,{scope:"comment",begin:`#(?!.*${W})`,end:/$/}]}},G={scope:"regexp",variants:[F("###"),F("##"),F("#"),q]},_={match:Ut(/`/,Kr,/`/)},H={className:"variable",match:/\$\d+/},se={className:"variable",match:`\\$${zc}+`},ne=[_,H,se],Z={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:kF,contains:[...w,T,z]}]}},J={scope:"keyword",match:Ut(/@/,Vn(...EF),uo(Vn(/\(/,/\s+/)))},P={scope:"meta",match:Ut(/@/,Kr)},M=[Z,J,P],U={match:uo(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Ut(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,zc,"+")},{className:"type",match:bc,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Ut(/\s+&\s+/,uo(bc)),relevance:0}]},A={begin:/</,end:/>/,keywords:p,contains:[...r,...h,...M,x,U]};U.contains.push(A);const te={match:Ut(Kr,/\s*:/),keywords:"_|0",relevance:0},ce={begin:/\(/,end:/\)/,relevance:0,keywords:p,contains:["self",te,...r,G,...h,...b,...w,T,z,...ne,...M,U]},Ee={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,U]},Ue={begin:Vn(uo(Ut(Kr,/\s*:/)),uo(Ut(Kr,/\s+/,Kr,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:Kr}]},Te={begin:/\(/,end:/\)/,keywords:p,contains:[Ue,...r,...h,...w,T,z,...M,U,ce],endsParent:!0,illegal:/["']/},$e={match:[/(func|macro)/,/\s+/,Vn(_.match,Kr,jp)],className:{1:"keyword",3:"title.function"},contains:[Ee,Te,t],illegal:[/\[/,/%/]},le={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Ee,Te,t],illegal:/\[|%/},rt={match:[/operator/,/\s+/,jp],className:{1:"keyword",3:"title"}},at={begin:[/precedencegroup/,/\s+/,bc],className:{1:"keyword",3:"title"},contains:[U],keywords:[...xF,...gv],end:/}/},wt={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},R={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ge={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,Kr,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:p,contains:[Ee,...h,{begin:/:/,end:/\{/,keywords:p,contains:[{scope:"title.class.inherited",match:bc},...h],relevance:0}]};for(const oe of z.variants){const K=oe.contains.find(re=>re.label==="interpol");K.keywords=p;const W=[...h,...b,...w,T,z,...ne];K.contains=[...W,{begin:/\(/,end:/\)/,contains:["self",...W]}]}return{name:"Swift",keywords:p,contains:[...r,$e,le,wt,R,ge,rt,at,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},G,...h,...b,...w,T,z,...ne,...M,U,ce]}}const $c="[A-Za-z$_][0-9A-Za-z$_]*",Aw=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Iw=["true","false","null","undefined","NaN","Infinity"],jw=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Ow=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Mw=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Fw=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Lw=[].concat(Mw,jw,Ow);function SF(e){const t=e.regex,n=(Z,{after:J})=>{const P="</"+Z[0].slice(1);return Z.input.indexOf(P,J)!==-1},r=$c,i={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Z,J)=>{const P=Z[0].length+Z.index,M=Z.input[P];if(M==="<"||M===","){J.ignoreMatch();return}M===">"&&(n(Z,{after:P})||J.ignoreMatch());let U;const A=Z.input.substring(P);if(U=A.match(/^\s*=/)){J.ignoreMatch();return}if((U=A.match(/^\s+extends\s+/))&&U.index===0){J.ignoreMatch();return}}},c={$pattern:$c,keyword:Aw,literal:Iw,built_in:Lw,"variable.language":Fw},d="[0-9](_?[0-9])*",p=`\\.(${d})`,h="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${h})((${p})|\\.)?|(${p}))[eE][+-]?(${d})\\b`},{begin:`\\b(${h})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},g={className:"subst",begin:"\\$\\{",end:"\\}",keywords:c,contains:[]},b={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"css"}},v={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,g],subLanguage:"graphql"}},w={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,g]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},T=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,w,{match:/\$\d+/},m];g.contains=T.concat({begin:/\{/,end:/\}/,keywords:c,contains:["self"].concat(T)});const D=[].concat(C,g.contains),I=D.concat([{begin:/(\s*)\(/,end:/\)/,keywords:c,contains:["self"].concat(D)}]),L={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:I},O={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},B={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...jw,...Ow]}},z={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},j={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[L],illegal:/%/},q={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(Z){return t.concat("(?!",Z.join("|"),")")}const G={match:t.concat(/\b/,F([...Mw,"super","import"].map(Z=>`${Z}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},_={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},H={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},L]},se="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",ne={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(se)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[L]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:c,exports:{PARAMS_CONTAINS:I,CLASS_REFERENCE:B},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),z,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,b,x,v,w,C,{match:/\$\d+/},m,B,{scope:"attr",match:r+t.lookahead(":"),relevance:0},ne,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:se,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:I}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i.begin,end:i.end},{match:s},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},j,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[L,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},_,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[L]},G,q,O,H,{match:/\$[(.]/}]}}function CF(e){const t=e.regex,n=SF(e),r=$c,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],s={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[n.exports.CLASS_REFERENCE]},c={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],p={$pattern:$c,keyword:Aw.concat(d),literal:Iw,built_in:Lw.concat(i),"variable.language":Fw},h={className:"meta",begin:"@"+r},m=(v,w,k)=>{const C=v.contains.findIndex(T=>T.label===w);if(C===-1)throw new Error("can not find mode to replace");v.contains.splice(C,1,k)};Object.assign(n.keywords,p),n.exports.PARAMS_CONTAINS.push(h);const g=n.contains.find(v=>v.scope==="attr"),b=Object.assign({},g,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,g,b]),n.contains=n.contains.concat([h,s,o,b]),m(n,"shebang",e.SHEBANG()),m(n,"use_strict",c);const x=n.contains.find(v=>v.label==="func.def");return x.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function _F(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,s=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,c=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:t.concat(/# */,t.either(s,i),/ *#/)},{begin:t.concat(/# */,c,/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,t.either(s,i),/ +/,t.either(o,c),/ *#/)}]},p={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},h={className:"label",begin:/^\w+:/},m=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),g=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,d,p,h,m,g,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[g]}]}}function TF(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],i={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},s={className:"variable",begin:/\$[\w_]+/},o={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},c={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},p={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},s,o,i,e.QUOTE_STRING_MODE,d,p,c]}}function DF(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(s,{begin:/\(/,end:/\)/}),c=e.inherit(e.APOS_STRING_MODE,{className:"string"}),d=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),p={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,d,c,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,o,d,c]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[p],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[p],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:p}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function RF(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,i]},c=e.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),g={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},b={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},x={begin:/\{/,end:/\}/,contains:[b],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[b],illegal:"\\n",relevance:0},w=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},g,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},x,v,s,o],k=[...w];return k.pop(),k.push(c),b.contains=k,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:w}}const AF={arduino:p3,bash:f3,c:h3,cpp:m3,csharp:g3,css:S3,diff:C3,go:_3,graphql:T3,ini:D3,java:R3,javascript:M3,json:F3,kotlin:P3,less:W3,lua:G3,makefile:K3,markdown:Y3,objectivec:Z3,perl:X3,php:Q3,"php-template":J3,plaintext:eF,python:tF,"python-repl":nF,r:rF,ruby:aF,rust:iF,scss:hF,shell:mF,sql:gF,swift:NF,typescript:CF,vbnet:_F,wasm:TF,xml:DF,yaml:RF};var Op,yv;function IF(){if(yv)return Op;yv=1;function e(X){return X instanceof Map?X.clear=X.delete=X.set=function(){throw new Error("map is read-only")}:X instanceof Set&&(X.add=X.clear=X.delete=function(){throw new Error("set is read-only")}),Object.freeze(X),Object.getOwnPropertyNames(X).forEach(ye=>{const Re=X[ye],Ke=typeof Re;(Ke==="object"||Ke==="function")&&!Object.isFrozen(Re)&&e(Re)}),X}class t{constructor(ye){ye.data===void 0&&(ye.data={}),this.data=ye.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(X){return X.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(X,...ye){const Re=Object.create(null);for(const Ke in X)Re[Ke]=X[Ke];return ye.forEach(function(Ke){for(const bt in Ke)Re[bt]=Ke[bt]}),Re}const i="</span>",s=X=>!!X.scope,o=(X,{prefix:ye})=>{if(X.startsWith("language:"))return X.replace("language:","language-");if(X.includes(".")){const Re=X.split(".");return[`${ye}${Re.shift()}`,...Re.map((Ke,bt)=>`${Ke}${"_".repeat(bt+1)}`)].join(" ")}return`${ye}${X}`};class c{constructor(ye,Re){this.buffer="",this.classPrefix=Re.classPrefix,ye.walk(this)}addText(ye){this.buffer+=n(ye)}openNode(ye){if(!s(ye))return;const Re=o(ye.scope,{prefix:this.classPrefix});this.span(Re)}closeNode(ye){s(ye)&&(this.buffer+=i)}value(){return this.buffer}span(ye){this.buffer+=`<span class="${ye}">`}}const d=(X={})=>{const ye={children:[]};return Object.assign(ye,X),ye};class p{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ye){this.top.children.push(ye)}openNode(ye){const Re=d({scope:ye});this.add(Re),this.stack.push(Re)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ye){return this.constructor._walk(ye,this.rootNode)}static _walk(ye,Re){return typeof Re=="string"?ye.addText(Re):Re.children&&(ye.openNode(Re),Re.children.forEach(Ke=>this._walk(ye,Ke)),ye.closeNode(Re)),ye}static _collapse(ye){typeof ye!="string"&&ye.children&&(ye.children.every(Re=>typeof Re=="string")?ye.children=[ye.children.join("")]:ye.children.forEach(Re=>{p._collapse(Re)}))}}class h extends p{constructor(ye){super(),this.options=ye}addText(ye){ye!==""&&this.add(ye)}startScope(ye){this.openNode(ye)}endScope(){this.closeNode()}__addSublanguage(ye,Re){const Ke=ye.root;Re&&(Ke.scope=`language:${Re}`),this.add(Ke)}toHTML(){return new c(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function m(X){return X?typeof X=="string"?X:X.source:null}function g(X){return v("(?=",X,")")}function b(X){return v("(?:",X,")*")}function x(X){return v("(?:",X,")?")}function v(...X){return X.map(Re=>m(Re)).join("")}function w(X){const ye=X[X.length-1];return typeof ye=="object"&&ye.constructor===Object?(X.splice(X.length-1,1),ye):{}}function k(...X){return"("+(w(X).capture?"":"?:")+X.map(Ke=>m(Ke)).join("|")+")"}function C(X){return new RegExp(X.toString()+"|").exec("").length-1}function T(X,ye){const Re=X&&X.exec(ye);return Re&&Re.index===0}const D=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function I(X,{joinWith:ye}){let Re=0;return X.map(Ke=>{Re+=1;const bt=Re;let It=m(Ke),Le="";for(;It.length>0;){const V=D.exec(It);if(!V){Le+=It;break}Le+=It.substring(0,V.index),It=It.substring(V.index+V[0].length),V[0][0]==="\\"&&V[1]?Le+="\\"+String(Number(V[1])+bt):(Le+=V[0],V[0]==="("&&Re++)}return Le}).map(Ke=>`(${Ke})`).join(ye)}const L=/\b\B/,O="[a-zA-Z]\\w*",B="[a-zA-Z_]\\w*",z="\\b\\d+(\\.\\d+)?",j="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",q="\\b(0b[01]+)",F="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",G=(X={})=>{const ye=/^#![ ]*\//;return X.binary&&(X.begin=v(ye,/.*\b/,X.binary,/\b.*/)),r({scope:"meta",begin:ye,end:/$/,relevance:0,"on:begin":(Re,Ke)=>{Re.index!==0&&Ke.ignoreMatch()}},X)},_={begin:"\\\\[\\s\\S]",relevance:0},H={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[_]},se={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[_]},ne={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Z=function(X,ye,Re={}){const Ke=r({scope:"comment",begin:X,end:ye,contains:[]},Re);Ke.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const bt=k("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Ke.contains.push({begin:v(/[ ]+/,"(",bt,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Ke},J=Z("//","$"),P=Z("/\\*","\\*/"),M=Z("#","$"),U={scope:"number",begin:z,relevance:0},A={scope:"number",begin:j,relevance:0},te={scope:"number",begin:q,relevance:0},ce={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[_,{begin:/\[/,end:/\]/,relevance:0,contains:[_]}]},Ee={scope:"title",begin:O,relevance:0},Ue={scope:"title",begin:B,relevance:0},Te={begin:"\\.\\s*"+B,relevance:0};var le=Object.freeze({__proto__:null,APOS_STRING_MODE:H,BACKSLASH_ESCAPE:_,BINARY_NUMBER_MODE:te,BINARY_NUMBER_RE:q,COMMENT:Z,C_BLOCK_COMMENT_MODE:P,C_LINE_COMMENT_MODE:J,C_NUMBER_MODE:A,C_NUMBER_RE:j,END_SAME_AS_BEGIN:function(X){return Object.assign(X,{"on:begin":(ye,Re)=>{Re.data._beginMatch=ye[1]},"on:end":(ye,Re)=>{Re.data._beginMatch!==ye[1]&&Re.ignoreMatch()}})},HASH_COMMENT_MODE:M,IDENT_RE:O,MATCH_NOTHING_RE:L,METHOD_GUARD:Te,NUMBER_MODE:U,NUMBER_RE:z,PHRASAL_WORDS_MODE:ne,QUOTE_STRING_MODE:se,REGEXP_MODE:ce,RE_STARTERS_RE:F,SHEBANG:G,TITLE_MODE:Ee,UNDERSCORE_IDENT_RE:B,UNDERSCORE_TITLE_MODE:Ue});function rt(X,ye){X.input[X.index-1]==="."&&ye.ignoreMatch()}function at(X,ye){X.className!==void 0&&(X.scope=X.className,delete X.className)}function wt(X,ye){ye&&X.beginKeywords&&(X.begin="\\b("+X.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",X.__beforeBegin=rt,X.keywords=X.keywords||X.beginKeywords,delete X.beginKeywords,X.relevance===void 0&&(X.relevance=0))}function R(X,ye){Array.isArray(X.illegal)&&(X.illegal=k(...X.illegal))}function ge(X,ye){if(X.match){if(X.begin||X.end)throw new Error("begin & end are not supported with match");X.begin=X.match,delete X.match}}function oe(X,ye){X.relevance===void 0&&(X.relevance=1)}const K=(X,ye)=>{if(!X.beforeMatch)return;if(X.starts)throw new Error("beforeMatch cannot be used with starts");const Re=Object.assign({},X);Object.keys(X).forEach(Ke=>{delete X[Ke]}),X.keywords=Re.keywords,X.begin=v(Re.beforeMatch,g(Re.begin)),X.starts={relevance:0,contains:[Object.assign(Re,{endsParent:!0})]},X.relevance=0,delete Re.beforeMatch},W=["of","and","for","in","not","or","if","then","parent","list","value"],re="keyword";function ve(X,ye,Re=re){const Ke=Object.create(null);return typeof X=="string"?bt(Re,X.split(" ")):Array.isArray(X)?bt(Re,X):Object.keys(X).forEach(function(It){Object.assign(Ke,ve(X[It],ye,It))}),Ke;function bt(It,Le){ye&&(Le=Le.map(V=>V.toLowerCase())),Le.forEach(function(V){const Q=V.split("|");Ke[Q[0]]=[It,we(Q[0],Q[1])]})}}function we(X,ye){return ye?Number(ye):de(X)?0:1}function de(X){return W.includes(X.toLowerCase())}const Ce={},Oe=X=>{console.error(X)},_e=(X,...ye)=>{console.log(`WARN: ${X}`,...ye)},ie=(X,ye)=>{Ce[`${X}/${ye}`]||(console.log(`Deprecated as of ${X}. ${ye}`),Ce[`${X}/${ye}`]=!0)},xe=new Error;function Ne(X,ye,{key:Re}){let Ke=0;const bt=X[Re],It={},Le={};for(let V=1;V<=ye.length;V++)Le[V+Ke]=bt[V],It[V+Ke]=!0,Ke+=C(ye[V-1]);X[Re]=Le,X[Re]._emit=It,X[Re]._multi=!0}function Ve(X){if(Array.isArray(X.begin)){if(X.skip||X.excludeBegin||X.returnBegin)throw Oe("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),xe;if(typeof X.beginScope!="object"||X.beginScope===null)throw Oe("beginScope must be object"),xe;Ne(X,X.begin,{key:"beginScope"}),X.begin=I(X.begin,{joinWith:""})}}function ct(X){if(Array.isArray(X.end)){if(X.skip||X.excludeEnd||X.returnEnd)throw Oe("skip, excludeEnd, returnEnd not compatible with endScope: {}"),xe;if(typeof X.endScope!="object"||X.endScope===null)throw Oe("endScope must be object"),xe;Ne(X,X.end,{key:"endScope"}),X.end=I(X.end,{joinWith:""})}}function ht(X){X.scope&&typeof X.scope=="object"&&X.scope!==null&&(X.beginScope=X.scope,delete X.scope)}function sn(X){ht(X),typeof X.beginScope=="string"&&(X.beginScope={_wrap:X.beginScope}),typeof X.endScope=="string"&&(X.endScope={_wrap:X.endScope}),Ve(X),ct(X)}function ut(X){function ye(Le,V){return new RegExp(m(Le),"m"+(X.case_insensitive?"i":"")+(X.unicodeRegex?"u":"")+(V?"g":""))}class Re{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(V,Q){Q.position=this.position++,this.matchIndexes[this.matchAt]=Q,this.regexes.push([Q,V]),this.matchAt+=C(V)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const V=this.regexes.map(Q=>Q[1]);this.matcherRe=ye(I(V,{joinWith:"|"}),!0),this.lastIndex=0}exec(V){this.matcherRe.lastIndex=this.lastIndex;const Q=this.matcherRe.exec(V);if(!Q)return null;const ue=Q.findIndex((Ie,Be)=>Be>0&&Ie!==void 0),be=this.matchIndexes[ue];return Q.splice(0,ue),Object.assign(Q,be)}}class Ke{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(V){if(this.multiRegexes[V])return this.multiRegexes[V];const Q=new Re;return this.rules.slice(V).forEach(([ue,be])=>Q.addRule(ue,be)),Q.compile(),this.multiRegexes[V]=Q,Q}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(V,Q){this.rules.push([V,Q]),Q.type==="begin"&&this.count++}exec(V){const Q=this.getMatcher(this.regexIndex);Q.lastIndex=this.lastIndex;let ue=Q.exec(V);if(this.resumingScanAtSamePosition()&&!(ue&&ue.index===this.lastIndex)){const be=this.getMatcher(0);be.lastIndex=this.lastIndex+1,ue=be.exec(V)}return ue&&(this.regexIndex+=ue.position+1,this.regexIndex===this.count&&this.considerAll()),ue}}function bt(Le){const V=new Ke;return Le.contains.forEach(Q=>V.addRule(Q.begin,{rule:Q,type:"begin"})),Le.terminatorEnd&&V.addRule(Le.terminatorEnd,{type:"end"}),Le.illegal&&V.addRule(Le.illegal,{type:"illegal"}),V}function It(Le,V){const Q=Le;if(Le.isCompiled)return Q;[at,ge,sn,K].forEach(be=>be(Le,V)),X.compilerExtensions.forEach(be=>be(Le,V)),Le.__beforeBegin=null,[wt,R,oe].forEach(be=>be(Le,V)),Le.isCompiled=!0;let ue=null;return typeof Le.keywords=="object"&&Le.keywords.$pattern&&(Le.keywords=Object.assign({},Le.keywords),ue=Le.keywords.$pattern,delete Le.keywords.$pattern),ue=ue||/\w+/,Le.keywords&&(Le.keywords=ve(Le.keywords,X.case_insensitive)),Q.keywordPatternRe=ye(ue,!0),V&&(Le.begin||(Le.begin=/\B|\b/),Q.beginRe=ye(Q.begin),!Le.end&&!Le.endsWithParent&&(Le.end=/\B|\b/),Le.end&&(Q.endRe=ye(Q.end)),Q.terminatorEnd=m(Q.end)||"",Le.endsWithParent&&V.terminatorEnd&&(Q.terminatorEnd+=(Le.end?"|":"")+V.terminatorEnd)),Le.illegal&&(Q.illegalRe=ye(Le.illegal)),Le.contains||(Le.contains=[]),Le.contains=[].concat(...Le.contains.map(function(be){return fn(be==="self"?Le:be)})),Le.contains.forEach(function(be){It(be,Q)}),Le.starts&&It(Le.starts,V),Q.matcher=bt(Q),Q}if(X.compilerExtensions||(X.compilerExtensions=[]),X.contains&&X.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return X.classNameAliases=r(X.classNameAliases||{}),It(X)}function un(X){return X?X.endsWithParent||un(X.starts):!1}function fn(X){return X.variants&&!X.cachedVariants&&(X.cachedVariants=X.variants.map(function(ye){return r(X,{variants:null},ye)})),X.cachedVariants?X.cachedVariants:un(X)?r(X,{starts:X.starts?r(X.starts):null}):Object.isFrozen(X)?r(X):X}var _t="11.11.1";class bn extends Error{constructor(ye,Re){super(ye),this.name="HTMLInjectionError",this.html=Re}}const Kt=n,$n=r,sr=Symbol("nomatch"),Tn=7,Nt=function(X){const ye=Object.create(null),Re=Object.create(null),Ke=[];let bt=!0;const It="Could not find the language '{}', did you forget to load/include a language module?",Le={disableAutodetect:!0,name:"Plain text",contains:[]};let V={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:h};function Q(Ae){return V.noHighlightRe.test(Ae)}function ue(Ae){let Me=Ae.className+" ";Me+=Ae.parentNode?Ae.parentNode.className:"";const Je=V.languageDetectRe.exec(Me);if(Je){const mt=wn(Je[1]);return mt||(_e(It.replace("{}",Je[1])),_e("Falling back to no-highlight mode for this block.",Ae)),mt?Je[1]:"no-highlight"}return Me.split(/\s+/).find(mt=>Q(mt)||wn(mt))}function be(Ae,Me,Je){let mt="",qt="";typeof Me=="object"?(mt=Ae,Je=Me.ignoreIllegals,qt=Me.language):(ie("10.7.0","highlight(lang, code, ...args) has been deprecated."),ie("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),qt=Ae,mt=Me),Je===void 0&&(Je=!0);const gt={code:mt,language:qt};Bn("before:highlight",gt);const Dn=gt.result?gt.result:Ie(gt.language,gt.code,Je);return Dn.code=gt.code,Bn("after:highlight",Dn),Dn}function Ie(Ae,Me,Je,mt){const qt=Object.create(null);function gt(ze,Ze){return ze.keywords[Ze]}function Dn(){if(!ft.keywords){dn.addText($t);return}let ze=0;ft.keywordPatternRe.lastIndex=0;let Ze=ft.keywordPatternRe.exec($t),lt="";for(;Ze;){lt+=$t.substring(ze,Ze.index);const Tt=mr.case_insensitive?Ze[0].toLowerCase():Ze[0],on=gt(ft,Tt);if(on){const[En,uu]=on;if(dn.addText(lt),lt="",qt[Tt]=(qt[Tt]||0)+1,qt[Tt]<=Tn&&(ti+=uu),En.startsWith("_"))lt+=Ze[0];else{const Jo=mr.classNameAliases[En]||En;Un(Ze[0],Jo)}}else lt+=Ze[0];ze=ft.keywordPatternRe.lastIndex,Ze=ft.keywordPatternRe.exec($t)}lt+=$t.substring(ze),dn.addText(lt)}function ta(){if($t==="")return;let ze=null;if(typeof ft.subLanguage=="string"){if(!ye[ft.subLanguage]){dn.addText($t);return}ze=Ie(ft.subLanguage,$t,!0,Ns[ft.subLanguage]),Ns[ft.subLanguage]=ze._top}else ze=tt($t,ft.subLanguage.length?ft.subLanguage:null);ft.relevance>0&&(ti+=ze.relevance),dn.__addSublanguage(ze._emitter,ze.language)}function Rn(){ft.subLanguage!=null?ta():Dn(),$t=""}function Un(ze,Ze){ze!==""&&(dn.startScope(Ze),dn.addText(ze),dn.endScope())}function Ja(ze,Ze){let lt=1;const Tt=Ze.length-1;for(;lt<=Tt;){if(!ze._emit[lt]){lt++;continue}const on=mr.classNameAliases[ze[lt]]||ze[lt],En=Ze[lt];on?Un(En,on):($t=En,Dn(),$t=""),lt++}}function xa(ze,Ze){return ze.scope&&typeof ze.scope=="string"&&dn.openNode(mr.classNameAliases[ze.scope]||ze.scope),ze.beginScope&&(ze.beginScope._wrap?(Un($t,mr.classNameAliases[ze.beginScope._wrap]||ze.beginScope._wrap),$t=""):ze.beginScope._multi&&(Ja(ze.beginScope,Ze),$t="")),ft=Object.create(ze,{parent:{value:ft}}),ft}function ei(ze,Ze,lt){let Tt=T(ze.endRe,lt);if(Tt){if(ze["on:end"]){const on=new t(ze);ze["on:end"](Ze,on),on.isMatchIgnored&&(Tt=!1)}if(Tt){for(;ze.endsParent&&ze.parent;)ze=ze.parent;return ze}}if(ze.endsWithParent)return ei(ze.parent,Ze,lt)}function lu(ze){return ft.matcher.regexIndex===0?($t+=ze[0],1):(ka=!0,0)}function cu(ze){const Ze=ze[0],lt=ze.rule,Tt=new t(lt),on=[lt.__beforeBegin,lt["on:begin"]];for(const En of on)if(En&&(En(ze,Tt),Tt.isMatchIgnored))return lu(Ze);return lt.skip?$t+=Ze:(lt.excludeBegin&&($t+=Ze),Rn(),!lt.returnBegin&&!lt.excludeBegin&&($t=Ze)),xa(lt,ze),lt.returnBegin?0:Ze.length}function Es(ze){const Ze=ze[0],lt=Me.substring(ze.index),Tt=ei(ft,ze,lt);if(!Tt)return sr;const on=ft;ft.endScope&&ft.endScope._wrap?(Rn(),Un(Ze,ft.endScope._wrap)):ft.endScope&&ft.endScope._multi?(Rn(),Ja(ft.endScope,ze)):on.skip?$t+=Ze:(on.returnEnd||on.excludeEnd||($t+=Ze),Rn(),on.excludeEnd&&($t=Ze));do ft.scope&&dn.closeNode(),!ft.skip&&!ft.subLanguage&&(ti+=ft.relevance),ft=ft.parent;while(ft!==Tt.parent);return Tt.starts&&xa(Tt.starts,ze),on.returnEnd?0:Ze.length}function Qo(){const ze=[];for(let Ze=ft;Ze!==mr;Ze=Ze.parent)Ze.scope&&ze.unshift(Ze.scope);ze.forEach(Ze=>dn.openNode(Ze))}let wa={};function Ea(ze,Ze){const lt=Ze&&Ze[0];if($t+=ze,lt==null)return Rn(),0;if(wa.type==="begin"&&Ze.type==="end"&&wa.index===Ze.index&&lt===""){if($t+=Me.slice(Ze.index,Ze.index+1),!bt){const Tt=new Error(`0 width match regex (${Ae})`);throw Tt.languageName=Ae,Tt.badRule=wa.rule,Tt}return 1}if(wa=Ze,Ze.type==="begin")return cu(Ze);if(Ze.type==="illegal"&&!Je){const Tt=new Error('Illegal lexeme "'+lt+'" for mode "'+(ft.scope||"<unnamed>")+'"');throw Tt.mode=ft,Tt}else if(Ze.type==="end"){const Tt=Es(Ze);if(Tt!==sr)return Tt}if(Ze.type==="illegal"&&lt==="")return $t+=`
`,1;if(ni>1e5&&ni>Ze.index*3)throw new Error("potential infinite loop, way more iterations than matches");return $t+=lt,lt.length}const mr=wn(Ae);if(!mr)throw Oe(It.replace("{}",Ae)),new Error('Unknown language: "'+Ae+'"');const ks=ut(mr);let jt="",ft=mt||ks;const Ns={},dn=new V.__emitter(V);Qo();let $t="",ti=0,Br=0,ni=0,ka=!1;try{if(mr.__emitTokens)mr.__emitTokens(Me,dn);else{for(ft.matcher.considerAll();;){ni++,ka?ka=!1:ft.matcher.considerAll(),ft.matcher.lastIndex=Br;const ze=ft.matcher.exec(Me);if(!ze)break;const Ze=Me.substring(Br,ze.index),lt=Ea(Ze,ze);Br=ze.index+lt}Ea(Me.substring(Br))}return dn.finalize(),jt=dn.toHTML(),{language:Ae,value:jt,relevance:ti,illegal:!1,_emitter:dn,_top:ft}}catch(ze){if(ze.message&&ze.message.includes("Illegal"))return{language:Ae,value:Kt(Me),illegal:!0,relevance:0,_illegalBy:{message:ze.message,index:Br,context:Me.slice(Br-100,Br+100),mode:ze.mode,resultSoFar:jt},_emitter:dn};if(bt)return{language:Ae,value:Kt(Me),illegal:!1,relevance:0,errorRaised:ze,_emitter:dn,_top:ft};throw ze}}function Be(Ae){const Me={value:Kt(Ae),illegal:!1,relevance:0,_top:Le,_emitter:new V.__emitter(V)};return Me._emitter.addText(Ae),Me}function tt(Ae,Me){Me=Me||V.languages||Object.keys(ye);const Je=Be(Ae),mt=Me.filter(wn).filter(Gn).map(Rn=>Ie(Rn,Ae,!1));mt.unshift(Je);const qt=mt.sort((Rn,Un)=>{if(Rn.relevance!==Un.relevance)return Un.relevance-Rn.relevance;if(Rn.language&&Un.language){if(wn(Rn.language).supersetOf===Un.language)return 1;if(wn(Un.language).supersetOf===Rn.language)return-1}return 0}),[gt,Dn]=qt,ta=gt;return ta.secondBest=Dn,ta}function He(Ae,Me,Je){const mt=Me&&Re[Me]||Je;Ae.classList.add("hljs"),Ae.classList.add(`language-${mt}`)}function Ye(Ae){let Me=null;const Je=ue(Ae);if(Q(Je))return;if(Bn("before:highlightElement",{el:Ae,language:Je}),Ae.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Ae);return}if(Ae.children.length>0&&(V.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Ae)),V.throwUnescapedHTML))throw new bn("One of your code blocks includes unescaped HTML.",Ae.innerHTML);Me=Ae;const mt=Me.textContent,qt=Je?be(mt,{language:Je,ignoreIllegals:!0}):tt(mt);Ae.innerHTML=qt.value,Ae.dataset.highlighted="yes",He(Ae,Je,qt.language),Ae.result={language:qt.language,re:qt.relevance,relevance:qt.relevance},qt.secondBest&&(Ae.secondBest={language:qt.secondBest.language,relevance:qt.secondBest.relevance}),Bn("after:highlightElement",{el:Ae,result:qt,text:mt})}function We(Ae){V=$n(V,Ae)}const Ge=()=>{Jt(),ie("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function pt(){Jt(),ie("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let xt=!1;function Jt(){function Ae(){Jt()}if(document.readyState==="loading"){xt||window.addEventListener("DOMContentLoaded",Ae,!1),xt=!0;return}document.querySelectorAll(V.cssSelector).forEach(Ye)}function Lt(Ae,Me){let Je=null;try{Je=Me(X)}catch(mt){if(Oe("Language definition for '{}' could not be registered.".replace("{}",Ae)),bt)Oe(mt);else throw mt;Je=Le}Je.name||(Je.name=Ae),ye[Ae]=Je,Je.rawDefinition=Me.bind(null,X),Je.aliases&&$r(Je.aliases,{languageName:Ae})}function St(Ae){delete ye[Ae];for(const Me of Object.keys(Re))Re[Me]===Ae&&delete Re[Me]}function Ht(){return Object.keys(ye)}function wn(Ae){return Ae=(Ae||"").toLowerCase(),ye[Ae]||ye[Re[Ae]]}function $r(Ae,{languageName:Me}){typeof Ae=="string"&&(Ae=[Ae]),Ae.forEach(Je=>{Re[Je.toLowerCase()]=Me})}function Gn(Ae){const Me=wn(Ae);return Me&&!Me.disableAutodetect}function Rt(Ae){Ae["before:highlightBlock"]&&!Ae["before:highlightElement"]&&(Ae["before:highlightElement"]=Me=>{Ae["before:highlightBlock"](Object.assign({block:Me.el},Me))}),Ae["after:highlightBlock"]&&!Ae["after:highlightElement"]&&(Ae["after:highlightElement"]=Me=>{Ae["after:highlightBlock"](Object.assign({block:Me.el},Me))})}function Qa(Ae){Rt(Ae),Ke.push(Ae)}function Cr(Ae){const Me=Ke.indexOf(Ae);Me!==-1&&Ke.splice(Me,1)}function Bn(Ae,Me){const Je=Ae;Ke.forEach(function(mt){mt[Je]&&mt[Je](Me)})}function _r(Ae){return ie("10.7.0","highlightBlock will be removed entirely in v12.0"),ie("10.7.0","Please use highlightElement now."),Ye(Ae)}Object.assign(X,{highlight:be,highlightAuto:tt,highlightAll:Jt,highlightElement:Ye,highlightBlock:_r,configure:We,initHighlighting:Ge,initHighlightingOnLoad:pt,registerLanguage:Lt,unregisterLanguage:St,listLanguages:Ht,getLanguage:wn,registerAliases:$r,autoDetection:Gn,inherit:$n,addPlugin:Qa,removePlugin:Cr}),X.debugMode=function(){bt=!1},X.safeMode=function(){bt=!0},X.versionString=_t,X.regex={concat:v,lookahead:g,either:k,optional:x,anyNumberOfTimes:b};for(const Ae in le)typeof le[Ae]=="object"&&e(le[Ae]);return Object.assign(X,le),X},Pt=Nt({});return Pt.newInstance=()=>Nt({}),Op=Pt,Pt.HighlightJS=Pt,Pt.default=Pt,Op}var jF=IF();const OF=fs(jF),vv={},MF="hljs-";function FF(e){const t=OF.newInstance();return e&&s(e),{highlight:n,highlightAuto:r,listLanguages:i,register:s,registerAlias:o,registered:c};function n(d,p,h){const m=h||vv,g=typeof m.prefix=="string"?m.prefix:MF;if(!t.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");t.configure({__emitter:LF,classPrefix:g});const b=t.highlight(p,{ignoreIllegals:!0,language:d});if(b.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:b.errorRaised});const x=b._emitter.root,v=x.data;return v.language=b.language,v.relevance=b.relevance,x}function r(d,p){const m=(p||vv).subset||i();let g=-1,b=0,x;for(;++g<m.length;){const v=m[g];if(!t.getLanguage(v))continue;const w=n(v,d,p);w.data&&w.data.relevance!==void 0&&w.data.relevance>b&&(b=w.data.relevance,x=w)}return x||{type:"root",children:[],data:{language:void 0,relevance:b}}}function i(){return t.listLanguages()}function s(d,p){if(typeof d=="string")t.registerLanguage(d,p);else{let h;for(h in d)Object.hasOwn(d,h)&&t.registerLanguage(h,d[h])}}function o(d,p){if(typeof d=="string")t.registerAliases(typeof p=="string"?p:[...p],{languageName:d});else{let h;for(h in d)if(Object.hasOwn(d,h)){const m=d[h];t.registerAliases(typeof m=="string"?m:[...m],{languageName:h})}}}function c(d){return!!t.getLanguage(d)}}class LF{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],i=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:i}):r.children.push(...i)}openNode(t){const n=this,r=t.split(".").map(function(o,c){return c?o+"_".repeat(c):n.options.classPrefix+o}),i=this.stack[this.stack.length-1],s={type:"element",tagName:"span",properties:{className:r},children:[]};i.children.push(s),this.stack.push(s)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const PF={};function zF(e){const t=e||PF,n=t.aliases,r=t.detect||!1,i=t.languages||AF,s=t.plainText,o=t.prefix,c=t.subset;let d="hljs";const p=FF(i);if(n&&p.registerAlias(n),o){const h=o.indexOf("-");d=h===-1?o:o.slice(0,h)}return function(h,m){Wo(h,"element",function(g,b,x){if(g.tagName!=="code"||!x||x.type!=="element"||x.tagName!=="pre")return;const v=$F(g);if(v===!1||!v&&!r||v&&s&&s.includes(v))return;Array.isArray(g.properties.className)||(g.properties.className=[]),g.properties.className.includes(d)||g.properties.className.unshift(d);const w=a3(g,{whitespace:"pre"});let k;try{k=v?p.highlight(v,w,{prefix:o}):p.highlightAuto(w,{prefix:o,subset:c})}catch(C){const T=C;if(v&&/Unknown language/.test(T.message)){m.message("Cannot highlight as `"+v+"`, its not registered",{ancestors:[x,g],cause:T,place:g.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw T}!v&&k.data&&k.data.language&&g.properties.className.push("language-"+k.data.language),k.children.length>0&&(g.children=k.children)})}}function $F(e){const t=e.properties.className;let n=-1;if(!Array.isArray(t))return;let r;for(;++n<t.length;){const i=String(t[n]);if(i==="no-highlight"||i==="nohighlight")return!1;!r&&i.slice(0,5)==="lang-"&&(r=i.slice(5)),!r&&i.slice(0,9)==="language-"&&(r=i.slice(9))}return r}function BF({content:e,className:t}){return u.jsx("div",{className:me("prose-guide",t),children:u.jsx(Ci,{remarkPlugins:[_i],rehypePlugins:[X4,zF],components:{h1:({children:n,id:r})=>u.jsxs("h1",{id:r,className:"scroll-mt-24 group",children:[n,r&&u.jsx(Mp,{id:r})]}),h2:({children:n,id:r})=>u.jsxs("h2",{id:r,className:"scroll-mt-24 group",children:[n,r&&u.jsx(Mp,{id:r})]}),h3:({children:n,id:r})=>u.jsxs("h3",{id:r,className:"scroll-mt-24 group",children:[n,r&&u.jsx(Mp,{id:r})]}),pre:({children:n})=>u.jsx("pre",{className:"overflow-x-auto rounded-lg bg-[#1e1e1e] p-4 text-sm",children:n}),code:({className:n,children:r,...i})=>n?u.jsx("code",{className:n,...i,children:r}):u.jsx("code",{className:"rounded bg-muted px-1.5 py-0.5 text-sm font-mono text-primary",...i,children:r}),table:({children:n})=>u.jsx("div",{className:"overflow-x-auto my-6",children:u.jsx("table",{className:"w-full border-collapse text-sm",children:n})}),thead:({children:n})=>u.jsx("thead",{className:"border-b border-border bg-muted/50",children:n}),th:({children:n})=>u.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:n}),td:({children:n})=>u.jsx("td",{className:"px-4 py-3 border-b border-border/50",children:n}),a:({href:n,children:r})=>u.jsx("a",{href:n,className:"text-primary hover:text-primary/80 underline underline-offset-2 transition-colors",target:n!=null&&n.startsWith("http")?"_blank":void 0,rel:n!=null&&n.startsWith("http")?"noopener noreferrer":void 0,children:r}),blockquote:({children:n})=>u.jsx("blockquote",{className:"border-l-4 border-primary/30 pl-4 italic text-muted-foreground my-4",children:n}),ul:({children:n})=>u.jsx("ul",{className:"list-disc pl-6 space-y-2 my-4",children:n}),ol:({children:n})=>u.jsx("ol",{className:"list-decimal pl-6 space-y-2 my-4",children:n}),hr:()=>u.jsx("hr",{className:"my-8 border-border"}),strong:({children:n})=>u.jsx("strong",{className:"font-semibold",children:n})},children:e})})}function Mp({id:e}){return u.jsx("a",{href:`#${e}`,className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-primary","aria-label":"Link to this section",children:"#"})}function UF(e){const t=[],n=/^(#{1,3})\s+(.+)$/gm;let r;for(;(r=n.exec(e))!==null;){const i=r[1].length,s=r[2].trim(),o=s.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();t.push({id:o,text:s,level:i})}return t}const ss=[{id:"quickstart",label:"Getting Started",path:"/guide/quickstart",icon:Of,description:"Learn the basics"},{id:"using-rolldeo",label:"Using Rolldeo",path:"/guide/using-rolldeo",icon:Af,description:"Site features guide"},{id:"spec",label:"Full Specification",path:"/guide/spec",icon:Tf,description:"Complete reference"},{id:"schema",label:"Schema Reference",path:"/guide/schema",icon:_f,description:"JSON schema docs"}];function xv({headings:e=[],isCollapsed:t=!1,onToggleCollapse:n}){const r=Qr(),[i,s]=N.useState("");return N.useEffect(()=>{if(e.length===0)return;const o=new IntersectionObserver(c=>{c.forEach(d=>{d.isIntersecting&&s(d.target.id)})},{rootMargin:"-100px 0px -80% 0px"});return e.forEach(c=>{const d=document.getElementById(c.id);d&&o.observe(d)}),()=>o.disconnect()},[e]),u.jsxs("aside",{className:me("sticky top-24 h-fit max-h-[calc(100vh-8rem)] overflow-y-auto","border-r border-border/50 pr-4",t&&"hidden md:block"),children:[u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(Pr,{className:"h-4 w-4 text-primary"}),u.jsx("span",{className:"text-sm font-semibold",children:"Guide"})]}),u.jsx("nav",{className:"space-y-1",children:ss.map(o=>{const c=o.icon,d=r.pathname===o.path;return u.jsxs(Ln,{to:o.path,className:me("flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",d?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[u.jsx(c,{className:"h-4 w-4"}),u.jsx("span",{children:o.label})]},o.id)})})]}),e.length>0&&u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(rr,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm font-semibold",children:"On this page"})]}),u.jsx("nav",{className:"space-y-1",children:e.map(o=>u.jsx("a",{href:`#${o.id}`,onClick:c=>{c.preventDefault();const d=document.getElementById(o.id);d&&(d.scrollIntoView({behavior:"smooth"}),s(o.id))},className:me("block py-1.5 text-sm transition-colors",o.level===1&&"pl-0 font-medium",o.level===2&&"pl-3",o.level===3&&"pl-6 text-xs",i===o.id?"text-primary":"text-muted-foreground hover:text-foreground"),children:o.text},o.id))})]})]})}function ou({title:e,content:t,children:n}){const r=Qr(),[i,s]=N.useState(!1),o=N.useMemo(()=>UF(t),[t]),c=ss.find(d=>r.pathname===d.path);return u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>s(!i),className:"fixed bottom-20 right-4 z-50 md:hidden p-3 rounded-full bg-primary text-primary-foreground shadow-lg","aria-label":"Toggle table of contents",children:i?u.jsx(cn,{className:"h-5 w-5"}):u.jsx(Zv,{className:"h-5 w-5"})}),i&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>s(!1)}),u.jsx("div",{className:me("fixed inset-y-0 left-0 z-50 w-72 bg-background p-6 transform transition-transform md:hidden",i?"translate-x-0":"-translate-x-full"),children:u.jsx(xv,{headings:o})}),u.jsxs("div",{className:"flex gap-8",children:[u.jsx("div",{className:"hidden md:block w-56 flex-shrink-0",children:u.jsx(xv,{headings:o})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("nav",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[u.jsx(Ln,{to:"/guide",className:"hover:text-foreground transition-colors",children:"Guide"}),u.jsx(rr,{className:"h-4 w-4"}),u.jsx("span",{className:"text-foreground font-medium",children:e})]}),c&&u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:c.label}),u.jsx("p",{className:"text-lg text-muted-foreground",children:c.description})]}),u.jsx(BF,{content:t}),n,u.jsx(HF,{})]})]})]})}function HF(){const e=Qr(),t=ss.findIndex(i=>i.path===e.pathname),n=t>0?ss[t-1]:null,r=t<ss.length-1?ss[t+1]:null;return!n&&!r?null:u.jsxs("div",{className:"flex justify-between items-center mt-12 pt-8 border-t border-border",children:[n?u.jsxs(Ln,{to:n.path,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[u.jsx(rr,{className:"h-4 w-4 rotate-180"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Previous"}),u.jsx("div",{className:"font-medium",children:n.label})]})]}):u.jsx("div",{}),r&&u.jsxs(Ln,{to:r.path,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors text-right",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Next"}),u.jsx("div",{className:"font-medium",children:r.label})]}),u.jsx(rr,{className:"h-4 w-4"})]})]})}function Bc({filename:e,content:t,mimeType:n,label:r,variant:i="secondary",className:s}){const o=()=>{const c=new Blob([t],{type:n}),d=URL.createObjectURL(c),p=document.createElement("a");p.href=d,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(d)};return u.jsxs("button",{onClick:o,className:me("flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all",i==="primary"?"bg-primary text-primary-foreground hover:bg-primary/90":"border border-border hover:bg-accent",s),children:[u.jsx(zo,{className:"h-4 w-4"}),r]})}const gf=`# Random Table JSON Template Specification v1.0

---

## Overview

This specification defines a JSON template format for creating configurable random table generators. The format supports simple weighted tables, composite tables, template-based text generation, mathematical operations, conditional logic, multi-level table inheritance, external file references, and generation-time shared variables.

---

## Table of Contents

1. [File Structure](#file-structure)
2. [Metadata Object](#1-metadata-object)
3. [Imports Array](#2-imports-array)
4. [Tables Array](#3-tables-array)
5. [Templates Array](#4-templates-array)
6. [Template Pattern Syntax](#5-template-pattern-syntax)
7. [Conditionals Array](#6-conditionals-array)
8. [Variables Object](#7-variables-object)
9. [Shared Block](#8-shared-block)
10. [Placeholder System](#9-placeholder-system)
11. [Table Inheritance](#10-table-inheritance)
12. [ResultType System](#11-resulttype-system)
13. [Markdown Support](#12-markdown-support)
14. [Complete Example](#13-complete-example)
15. [Processing Order](#14-processing-order)
16. [Validation Rules](#15-validation-rules)
17. [Error Handling](#16-error-handling)

---

## File Structure

\`\`\`json
{
  "metadata": { ... },
  "imports": [ ... ],
  "tables": [ ... ],
  "templates": [ ... ],
  "conditionals": [ ... ],
  "variables": { ... },
  "shared": { ... }
}
\`\`\`

All top-level properties except \`metadata\` and \`tables\` are optional. A minimal valid file requires only \`metadata\` and at least one table.

---

## 1. Metadata Object

Contains information about the file itself and global engine configuration.

### 1.1 Required Properties

| Property | Type | Description |
|----------|------|-------------|
| name | string | Name of the table collection |
| namespace | string | Unique namespace (e.g., \`fantasy.core\`) to prevent collisions |
| version | string | Semantic version number (e.g., \`1.0.1\`) |
| specVersion | string | The specification version this file conforms to (e.g., \`1.0\`) |

### 1.2 Optional Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| author | string | - | Author name or organization |
| description | string | - | Markdown-formatted description |
| instructions | string | - | Usage instructions in Markdown |
| tags | string[] | \`[]\` | Tags for categorizing the collection |
| created | string | - | ISO 8601 date string |
| updated | string | - | ISO 8601 date string |

### 1.3 Source Attribution

Optional properties for tracking content origin and licensing.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| source.book | string | - | Name of the source book or product |
| source.publisher | string | - | Publisher name |
| source.isbn | string | - | ISBN if applicable |
| source.url | string | - | URL to product page or official source |
| source.license | string | - | License under which content is used (e.g., \`OGL 1.0a\`, \`CC BY 4.0\`, \`Original\`) |
| source.copyright | string \\| object | - | Copyright notice (string for simple notice, or structured object) |

#### 1.3.1 Structured Copyright Object

When more detailed copyright information is needed, \`source.copyright\` can be an object:

| Property | Type | Description |
|----------|------|-------------|
| copyright.year | string | Copyright year or range (e.g., \`"2024"\` or \`"2020-2024"\`) |
| copyright.holder | string | Legal entity name that holds the copyright |
| copyright.notice | string | Full copyright notice text |

**Example:**

\`\`\`json
"source": {
  "copyright": {
    "year": "2024",
    "holder": "Open Design LLC",
    "notice": " 2024 Open Design LLC. All rights reserved."
  }
}
\`\`\`

### 1.4 Rights & Permissions

Optional properties for declaring intellectual property rights, usage permissions, and legal contact information. These fields help publishers protect their content while making licensing terms clear to users.

> **Note:** While this specification is open source (CC0), content created using this format remains the intellectual property of its respective copyright holders. These fields provide a standardized way to communicate ownership and usage terms.

#### 1.4.1 Rights Declaration

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| rights.type | string | - | Content classification: \`"proprietary"\`, \`"open-content"\`, \`"fan-content"\`, or \`"licensed"\` |
| rights.official | boolean | \`false\` | Whether this is official publisher content (vs. fan-made) |
| rights.productIdentity | string[] | \`[]\` | List of Product Identity elements (names, characters, logos, etc.) |
| rights.trademarks | string[] | \`[]\` | Trademark notices (e.g., \`"Rolldeo Press"\`, \`"Tome of Rolldeo"\`) |
| rights.compatibilityNotice | string | - | Required compatibility/non-affiliation statement |

**Rights Type Values:**

| Value | Description |
|-------|-------------|
| \`proprietary\` | Fully owned content with all rights reserved |
| \`open-content\` | Content released under an open license (OGL, CC, etc.) |
| \`fan-content\` | Fan-created content using publisher's IP under community policy |
| \`licensed\` | Third-party content used under license agreement |

#### 1.4.2 Usage Permissions

Explicit permissions for how the content may be used. All default to \`false\` if \`rights\` is specified but permissions are omitted.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| rights.permissions.commercialUse | boolean | \`false\` | Whether content may be used in commercial products |
| rights.permissions.modification | boolean | \`false\` | Whether content may be modified or adapted |
| rights.permissions.redistribution | boolean | \`false\` | Whether content may be redistributed |
| rights.permissions.derivativeWorks | boolean | \`false\` | Whether derivative works may be created |
| rights.permissions.attributionRequired | boolean | \`true\` | Whether attribution is required when using content |

#### 1.4.3 Legal Contact

| Property | Type | Description |
|----------|------|-------------|
| rights.contact.licensing | string | Email or URL for licensing inquiries |
| rights.contact.dmca | string | DMCA agent contact for takedown requests |
| rights.contact.general | string | General legal contact |

#### 1.4.4 Terms & Policies

| Property | Type | Description |
|----------|------|-------------|
| rights.termsUrl | string | URL to full terms of use |
| rights.communityPolicyUrl | string | URL to fan content/community use policy |

**Complete Rights Example:**

\`\`\`json
"rights": {
  "type": "proprietary",
  "official": true,
  "productIdentity": [
    "Rolldeo",
    "Rolldeo Tables Collection",
    "All table names and unique entry descriptions"
  ],
  "trademarks": [
    "Rolldeo",
    "Rolldeo Tables"
  ],
  "compatibilityNotice": "Created for use with the Rolldeo random table roller. Compatible with any system-agnostic tabletop gaming.",
  "permissions": {
    "commercialUse": false,
    "modification": true,
    "redistribution": false,
    "derivativeWorks": true,
    "attributionRequired": true
  },
  "contact": {
    "licensing": "licensing@rolldeo.com",
    "dmca": "dmca@rolldeo.com"
  },
  "termsUrl": "https://rolldeo.com/terms",
  "communityPolicyUrl": "https://rolldeo.com/community-use"
}
\`\`\`

### 1.5 Engine Configuration

These optional properties control engine behavior for this file.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| maxRecursionDepth | integer | \`50\` | Maximum depth for nested table/template references. Prevents infinite loops from circular references. |
| maxExplodingDice | integer | \`100\` | Maximum number of times exploding dice can re-roll. |
| maxInheritanceDepth | integer | \`5\` | Maximum depth for inheritance chains (e.g., C extends B extends A = depth 2). |
| uniqueOverflowBehavior | string | \`"stop"\` | Behavior when unique selection requests more entries than available. One of: \`"stop"\` (return what's available), \`"cycle"\` (restart from full pool), \`"error"\` (throw error). |

**Example:**

\`\`\`json
{
  "metadata": {
    "name": "Fantasy Treasure Generator",
    "namespace": "fantasy.treasure",
    "version": "2.1.0",
    "specVersion": "1.0",
    "author": "Rolldeo Games",
    "description": "A comprehensive treasure generation system for fantasy RPGs.",
    "tags": ["fantasy", "treasure", "loot", "rewards"],
    "source": {
      "book": "Ultimate Treasure Guide",
      "publisher": "Example Games",
      "isbn": "978-1-234567-89-0",
      "license": "CC BY 4.0",
      "url": "https://example-games.com/treasure-guide",
      "copyright": {
        "year": "2024",
        "holder": "Rolldeo Games LLC",
        "notice": " 2024 Rolldeo Games LLC. All rights reserved."
      }
    },
    "rights": {
      "type": "open-content",
      "official": true,
      "permissions": {
        "commercialUse": true,
        "modification": true,
        "redistribution": true,
        "derivativeWorks": true,
        "attributionRequired": true
      },
      "contact": {
        "licensing": "licensing@rolldeo-games.com"
      },
      "termsUrl": "https://rolldeo.com/license"
    },
    "maxRecursionDepth": 25,
    "maxExplodingDice": 50,
    "maxInheritanceDepth": 5,
    "uniqueOverflowBehavior": "stop"
  }
}
\`\`\`

---

## 2. Imports Array

The \`imports\` array allows you to reference tables, templates, and variables from external JSON files. This enables modular content organization, shared libraries, and large-scale content management.

### 2.1 Import Object Properties

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| path | string | Yes | Relative path or URL to the external JSON file |
| alias | string | Yes | Local alias used to reference content from this import. **Must be unique within the file.** |
| description | string | No | Human-readable description of what this import provides |

### 2.2 Path Resolution

Paths can be specified in several formats:

| Format           | Example                                         | Description                             |
| ---------------- | ----------------------------------------------- | --------------------------------------- |
| Relative path    | \`"./creatures/undead.json"\`                     | Relative to the current file's location |
| Parent directory | \`"../shared/core.json"\`                         | Navigate up directory tree              |
| Absolute URL     | \`"https://rolldeo.com/tables/v2/monsters.json"\` | Remote file (requires network access)   |

**Security Note:** Implementations SHOULD restrict remote URLs to HTTPS and MAY implement allowlists for permitted domains.

### 2.3 Referencing Imported Content

Once imported, content is referenced using the alias as a prefix:

| Reference Type | Syntax | Example |
|----------------|--------|---------|
| Table | \`{{alias.tableId}}\` | \`{{undead.skeletons}}\` |
| Template | \`{{alias.templateId}}\` | \`{{core.npcDescription}}\` |
| Variable | \`{{$alias.variableName}}\` | \`{{$shared.defaultCurrency}}\` |
| Inheritance | \`"extends": "alias.tableId"\` | \`"extends": "core.baseTreasure"\` |

### 2.4 Import Behavior

**Namespace Isolation:** Imported content retains its original namespace for provenance tracking, but is accessed locally via the alias. This prevents collisions when importing multiple files that might share table IDs.

**Transitive Imports:** If File A imports File B, and File B imports File C, File A does NOT automatically have access to File C's content. Each file must explicitly declare its own imports.

**Load Order:** Imports are resolved before any table or template processing. Circular imports (File A imports File B which imports File A) MUST be detected and rejected at load time.

**Shared Block Isolation:** The \`shared\` block from imported files is evaluated, but variables won't be available to any other templates or tables.

**Example:**

\`\`\`json
{
  "metadata": {
    "name": "Complete Dungeon Generator",
    "namespace": "mydungeon.complete",
    "version": "1.0.0",
    "specVersion": "1.0"
  },
  "imports": [
    {
      "path": "./creatures/undead.json",
      "alias": "undead",
      "description": "Undead creature tables from the creature compendium"
    },
    {
      "path": "./creatures/beasts.json",
      "alias": "beasts",
      "description": "Beast and animal tables"
    },
    {
      "path": "../shared/treasure.json",
      "alias": "loot",
      "description": "Shared treasure generation tables"
    },
    {
      "path": "https://rolldeo.com/tables/core-v2.json",
      "alias": "core",
      "description": "Publisher's official core tables"
    }
  ],
  "tables": [
    {
      "id": "dungeonEncounter",
      "name": "Dungeon Encounter",
      "type": "composite",
      "resultType": "encounter",
      "sources": [
        { "tableId": "undead.allUndead", "weight": 3 },
        { "tableId": "beasts.dungeonBeasts", "weight": 2 },
        { "tableId": "localTraps", "weight": 1 }
      ]
    },
    {
      "id": "localTraps",
      "name": "Local Trap Table",
      "type": "simple",
      "resultType": "encounter",
      "entries": [
        { "value": "Pit trap" },
        { "value": "Poison dart" }
      ]
    }
  ],
  "templates": [
    {
      "id": "roomDescription",
      "name": "Room Description",
      "resultType": "description",
      "pattern": "This room contains {{dungeonEncounter}}. There is also {{loot.minorTreasure}}."
    }
  ]
}
\`\`\`

### 2.5 Import Validation

Implementations MUST validate:

- All \`path\` values resolve to valid, accessible files
- All \`alias\` values are unique within the importing file
- No circular import chains exist
- Referenced content (\`alias.tableId\`) exists in the imported file
- Imported files conform to a compatible specification version
- All inheritance chains are resolvable (see Section 10)

**Error on Missing Import:** If an imported file cannot be loaded, the entire file MUST fail to load with a clear error message identifying the problematic import.

---

## 3. Tables Array

Each table object can be one of three types: **simple**, **composite**, or **collection**.

### 3.1 Common Table Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| id | string | Yes | - | Unique identifier for the table (local scope). **Must not contain periods (\`.\`)** |
| name | string | Yes | - | Display name for the table |
| type | string | Yes | - | One of: \`"simple"\`, \`"composite"\`, \`"collection"\` |
| description | string | No | - | Markdown-formatted description |
| tags | string[] | No | \`[]\` | Tags for organization and searching |
| hidden | boolean | No | \`false\` | If \`true\`, table won't appear in user-facing lists. **Note:** Hidden tables remain fully accessible to templates and other tables; this is purely UI guidance. |
| extends | string | No | - | ID of table to inherit from (supports \`alias.tableId\` and \`namespace.tableId\` syntax). See Section 10 for multi-level inheritance. |
| defaultSets | object | No | \`{}\` | Default key-value pairs applied to all entries in this table (see Section 3.8) |
| resultType | string | No | - | Classification of output type (see Section 11). Case-insensitive. |
| shared | object | No | \`{}\` | Table-level shared variables evaluated lazily when rolled (see Section 8.8) |

### 3.2 Table Source Attribution

Tables can include their own source attribution to track where specific tables originated, particularly useful when a file combines content from multiple sources.

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| source.book | string | No | Source book name |
| source.page | integer/string | No | Page number or range (e.g., \`47\` or \`"47-49"\`) |
| source.section | string | No | Section or chapter name |
| source.url | string | No | Direct URL to source if available online |
| source.license | string | No | License for this specific table (overrides file-level) |

**Example:**

\`\`\`json
{
  "id": "wanderingMonsters",
  "name": "Wandering Monsters",
  "type": "simple",
  "tags": ["encounters", "monsters", "wilderness"],
  "resultType": "creature",
  "source": {
    "book": "Monster Manual",
    "page": 147,
    "section": "Random Encounters"
  },
  "entries": [ ... ]
}
\`\`\`

### 3.3 Simple Table

A basic table with weighted entries. This is the most common table type and is optimized for ease of data entry.

**Additional Properties:**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| entries | Entry[] | Yes | Array of table entries |

**Entry Object:**

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| id | string | No | Auto-generated | Unique ID within this table. **Required for inheritance overrides.** |
| value | string | Yes | - | The output text. Supports Markdown formatting and may contain template syntax for nested evaluation. |
| weight | number | No* | \`1\` | Relative probability weight. Must be \`0\` or greater. A weight of \`0\` disables the entry (see Section 3.4). |
| range | [number, number] | No* | - | A two-element array specifying an inclusive range (e.g., \`[1, 5]\`). Converted to weight automatically (see Section 3.4). |
| description | string | No | - | Markdown description (for documentation/UI) |
| tags | string[] | No | \`[]\` | Tags for this specific entry |
| sets | object | No | \`{}\` | Key-value pairs that set placeholder values when this entry is selected. Merges with and overrides \`defaultSets\`. |
| assets | object | No | \`{}\` | Key-value pairs mapping asset types to file paths or URLs (see Section 3.5). |
| resultType | string | No | - | Override the table's resultType for this specific entry. Case-insensitive. |

*\\* An entry must have either \`weight\` OR \`range\`, but not both. If neither is specified, \`weight\` defaults to \`1\`.*

**Auto-Generated Entry IDs:**

When an entry does not specify an \`id\`, the engine automatically generates one using the pattern \`{tableId}{NNN}\` where \`NNN\` is a zero-padded three-digit ordinal (001-999). For example, the third entry in a table with \`id: "meleeWeapons"\` receives the auto-generated ID \`meleeWeapons003\`.

Auto-generated IDs are:
- Stable within a single file version (same entry always gets same ID)
- Suitable for internal engine use and logging
- **NOT valid for inheritance overrides** (use explicit IDs instead)

**Example (Minimal):**

\`\`\`json
{
  "id": "weaponType",
  "name": "Weapon Type",
  "type": "simple",
  "resultType": "item",
  "entries": [
    { "value": "sword" },
    { "value": "axe" },
    { "value": "spear" },
    { "value": "dagger" }
  ]
}
\`\`\`

**Example (With Weights, IDs, and ResultType Override):**

\`\`\`json
{
  "id": "treasureContents",
  "name": "Treasure Contents",
  "type": "simple",
  "resultType": "item",
  "tags": ["treasure", "loot"],
  "entries": [
    { "id": "gold", "value": "gold coins", "weight": 3 },
    { "id": "gems", "value": "precious gems", "weight": 2 },
    { "id": "potion", "value": "healing potion", "weight": 1 },
    { "id": "mimic", "value": "**It's a Mimic!**", "weight": 0.5, "resultType": "creature" }
  ]
}
\`\`\`

### 3.4 Range Syntax and Weight Conversion

The \`range\` property provides convenient syntax for tables that use traditional dice-roll ranges (e.g., "1-5: Goblin, 6-10: Orc"). Ranges are automatically converted to weights during parsing.

**Conversion Formula:**

\`\`\`
weight = (range[1] - range[0]) + 1
\`\`\`

| Range | Calculated Weight | Explanation |
|-------|-------------------|-------------|
| \`[1, 5]\` | 5 | Numbers 1, 2, 3, 4, 5 |
| \`[6, 10]\` | 5 | Numbers 6, 7, 8, 9, 10 |
| \`[11, 11]\` | 1 | Single number 11 |
| \`[12, 20]\` | 9 | Numbers 12 through 20 |

**Flexibility Features:**

The range system is intentionally forgiving to accommodate various table designs:

- **Gaps are allowed:** Ranges don't need to be continuous. A table with ranges \`[1, 3]\` and \`[7, 10]\` is validit simply means numbers 4-6 have no entries.
- **Overlaps are allowed:** If two entries have overlapping ranges (e.g., \`[1, 5]\` and \`[4, 8]\`), both entries receive their full calculated weight. This can be useful for "critical hit" style tables where certain results trigger multiple outcomes.
- **Zero-width ranges:** A range like \`[5, 5]\` is valid and equals weight 1.
- **Mixing with weights:** While a single entry cannot have both \`range\` and \`weight\`, different entries in the same table may use different systems.

**Example (d100 Encounter Table):**

\`\`\`json
{
  "id": "wildernessEncounter",
  "name": "Wilderness Encounter (d100)",
  "type": "simple",
  "resultType": "encounter",
  "description": "Roll d100 for a random wilderness encounter",
  "tags": ["encounters", "wilderness", "d100"],
  "entries": [
    { "value": "Nothing eventful", "range": [1, 30] },
    { "value": "Merchant caravan", "range": [31, 45], "resultType": "npc" },
    { "value": "{{dice:1d4+1}} wolves", "range": [46, 60], "resultType": "creature" },
    { "value": "Bandits demand toll", "range": [61, 75], "resultType": "encounter" },
    { "value": "Traveling adventurers", "range": [76, 85], "resultType": "npc" },
    { "value": "{{beasts.rareCreature}}", "range": [86, 95] },
    { "value": "**Dragon sighting!**", "range": [96, 100], "resultType": "creature" }
  ]
}
\`\`\`

**Weight of Zero:**

A \`weight\` of \`0\` is valid and effectively **disables** the entry from being randomly selected. The entry:
- Still exists in the table structure
- Can be referenced by ID for inheritance overrides
- Can be accessed programmatically
- Will NEVER be selected by random rolls

This is particularly useful for:
- Disabling parent entries in child tables via inheritance
- Temporarily removing entries without deleting them
- Creating "template" entries that are referenced but not rolled

**Example (Disabling via Weight):**

\`\`\`json
{
  "id": "customLoot",
  "name": "Custom Loot Table",
  "type": "simple",
  "extends": "core.standardLoot",
  "entries": [
    { "id": "cursedItem", "weight": 0, "value": "Cursed Ring" },
    { "id": "newItem", "value": "Enchanted Amulet", "weight": 2 }
  ]
}
\`\`\`

### 3.5 Entry Assets

The \`assets\` property allows entries to reference associated media files such as images, tokens, audio, or other resources. This enables integration with virtual tabletops, character sheets, and multimedia applications.

**Assets Object:**

The \`assets\` object uses arbitrary string keys to identify asset types. This flexibility allows different applications to define their own asset conventions.

| Common Key | Typical Use |
|------------|-------------|
| \`image\` | Primary illustration or artwork |
| \`token\` | VTT token image |
| \`thumbnail\` | Small preview image |
| \`portrait\` | Character portrait |
| \`sound\` | Sound effect or ambient audio |
| \`music\` | Background music track |
| \`handout\` | Player handout document |
| \`statblock\` | Reference to stat block file |

**Value Format:**

Asset values can be:
- **Relative paths:** \`"images/goblin.png"\` (relative to the JSON file)
- **Absolute URLs:** \`"https://cdn.rolldeo.com/tokens/goblin.webp"\`
- **Data URIs:** \`"data:image/png;base64,..."\` (for embedded small assets)

**Inheritance Behavior:** When a child entry overrides a parent entry, \`assets\` are deep-merged. Child assets override matching keys; unspecified keys are inherited from the parent.

**Example:**

\`\`\`json
{
  "id": "goblin",
  "value": "Goblin",
  "weight": 3,
  "resultType": "creature",
  "tags": ["humanoid", "low-level", "common"],
  "sets": {
    "creatureType": "humanoid",
    "challengeRating": "1/4"
  },
  "assets": {
    "image": "images/creatures/goblin.png",
    "token": "tokens/goblin_token.webp",
    "portrait": "portraits/goblin_portrait.jpg",
    "sound": "sounds/goblin_cackle.mp3",
    "statblock": "statblocks/goblin.json"
  }
}
\`\`\`

### 3.6 Composite Table

Selects which source table to roll on using weighted probability, then rolls once on that table. Use composite tables when you want weighted selection *between* different tables.

**When to Use:** Composite tables are ideal when you need to select from categorically different pools. For example, a "Random Encounter" table might weight toward "Common Creatures" 70% of the time, "Uncommon Creatures" 25%, and "Rare Creatures" 5%.

**Additional Properties:**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| sources | Source[] | Yes | Array of source tables to select from |

**Source Object:**

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| tableId | string | Yes | - | ID of the table to pull from (supports \`alias.tableId\` and \`namespace.tableId\`) |
| weight | number | No | \`1\` | Relative weight for selecting this source. Must be \`0\` or greater. Weight of \`0\` disables this source. |

**ResultType Behavior:** When rolling on a composite table:
1. If the selected entry has a \`resultType\`, use it
2. Else if the selected source table has a \`resultType\`, use it
3. Else if the composite table has a \`resultType\`, use it
4. Else resultType is undefined

**Example:**

\`\`\`json
{
  "id": "randomEncounter",
  "name": "Random Encounter",
  "type": "composite",
  "resultType": "encounter",
  "tags": ["encounters", "combat", "exploration"],
  "sources": [
    { "tableId": "commonCreatures", "weight": 7 },
    { "tableId": "uncommonCreatures", "weight": 2.5 },
    { "tableId": "rareCreatures", "weight": 0.5 },
    { "tableId": "undead.allUndead", "weight": 0 }
  ]
}
\`\`\`

### 3.7 Collection Table

Merges all entries from multiple tables into a single unified pool. The resulting table contains every entry from every source table, preserving original weights and entry IDs.

**When to Use:** Collection tables are for combining related tables into one master table. For example, combining "Swords", "Axes", and "Polearms" tables into an "All Melee Weapons" table.

**Additional Properties:**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| collections | string[] | Yes | Array of table IDs to combine (supports \`alias.tableId\` and \`namespace.tableId\`) |

**Entry ID Collision Handling:** If multiple source tables contain entries with the same \`id\`, entries are prefixed with their source table ID (e.g., \`swords.longsword\`, \`axes.battleaxe\`). Weights are preserved from the original entries.

**Example:**

\`\`\`json
{
  "id": "allMeleeWeapons",
  "name": "All Melee Weapons",
  "type": "collection",
  "resultType": "item",
  "tags": ["equipment", "weapons", "melee", "combined"],
  "collections": ["swords", "axes", "polearms", "exotic.weapons"]
}
\`\`\`

### 3.8 Default Sets

The \`defaultSets\` property allows you to define placeholder values that apply to all entries in a table. Individual entries can override these defaults using their own \`sets\` property.

**Merge Behavior:** Entry-level \`sets\` are merged with \`defaultSets\`. If both define the same key, the entry-level value takes precedence.

**Inheritance Behavior:** When a table extends another, \`defaultSets\` are deep-merged through the inheritance chain. Child tables' \`defaultSets\` override matching keys from ancestors.

**Example:**

\`\`\`json
{
  "id": "forestCreatures",
  "name": "Forest Creatures",
  "type": "simple",
  "resultType": "creature",
  "tags": ["creatures", "forest", "wilderness"],
  "defaultSets": {
    "terrain": "forest",
    "climate": "temperate"
  },
  "entries": [
    { "value": "Wolf", "sets": { "size": "medium" }, "tags": ["beast", "predator"] },
    { "value": "Bear", "sets": { "size": "large" }, "tags": ["beast", "predator"] },
    { "value": "Snow Owl", "sets": { "size": "small", "climate": "cold" }, "tags": ["beast", "bird"] }
  ]
}
\`\`\`

**Resulting placeholder values when each entry is selected:**

| Entry | @terrain | @climate | @size |
|-------|----------|----------|-------|
| Wolf | forest | temperate | medium |
| Bear | forest | temperate | large |
| Snow Owl | forest | cold | small |

---

## 4. Templates Array

Templates define text generation patterns that combine multiple tables and operations.

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| id | string | Yes | Unique identifier |
| name | string | Yes | Display name |
| pattern | string | Yes | Template pattern string (see Section 5). Supports Markdown. |
| description | string | No | Markdown description |
| tags | string[] | No | Tags for organization and filtering |
| resultType | string | No | Classification of output type. Overrides any resultTypes from tables used within the template. Case-insensitive. |
| shared | object | No | Template-level shared variables evaluated lazily when rolled (see Section 8.8) |

**Example:**

\`\`\`json
{
  "id": "treasureDescription",
  "name": "Treasure Description",
  "resultType": "description",
  "tags": ["treasure", "description", "loot"],
  "pattern": "You find **{{dice:2d6*10}} gold pieces** and _{{itemTable}}_."
}
\`\`\`

---

## 5. Template Pattern Syntax

Templates use double curly braces \`{{}}\` for dynamic content. To include literal \`{{\` or \`}}\` in output, escape them as \`\\{{\` and \`\\}}\`.

### 5.1 Syntax Reference

The following table lists all supported operations in order of parsing priority:

| Syntax                        | Description                                    | Example                       |
| ----------------------------- | ---------------------------------------------- | ----------------------------- |
| \`{{tableId}}\`                 | Roll once on specified table                   | \`{{treasureTable}}\`           |
| \`{{alias.tableId}}\`           | Roll on table from imported file               | \`{{loot.minorTreasure}}\`      |
| \`{{namespace.tableId}}\`       | Roll on table from specific namespace          | \`{{fantasy.core.treasure}}\`   |
| \`{{again}}\`                   | Roll once more on the current table            | \`{{again}}\`                   |
| \`{{N*again}}\`                 | Roll N times on the current table              | \`{{2*again}}\`                 |
| \`{{N*unique*again}}\`          | Roll N times on current table, no duplicates   | \`{{3*unique*again}}\`          |
| \`{{dice:XdY}}\`                | Standard dice roll                             | \`{{dice:3d6}}\`                |
| \`{{dice:XdY+Z}}\`              | Dice with arithmetic                           | \`{{dice:2d8+3}}\`              |
| \`{{dice:XdY-Z}}\`              | Dice with subtraction                          | \`{{dice:2d8-1}}\`              |
| \`{{dice:XdY*Z}}\`              | Dice with multiplication                       | \`{{dice:2d6*10}}\`             |
| \`{{dice:XdYkH}}\`              | Keep highest H dice                            | \`{{dice:4d6k3}}\`              |
| \`{{dice:XdYkL}}\`              | Keep lowest L dice                             | \`{{dice:2d20kl1}}\`            |
| \`{{dice:XdY!}}\`               | Exploding dice (max value re-rolls)            | \`{{dice:1d6!}}\`               |
| \`{{dice:XdY!+Z}}\`             | Exploding dice with modifier                   | \`{{dice:1d6!+2}}\`             |
| \`{{N*tableId}}\`               | Roll N times (with replacement)                | \`{{3*itemTable}}\`             |
| \`{{N*unique*tableId}}\`        | Roll N times (no duplicates)                   | \`{{3*unique*itemTable}}\`      |
| \`{{dice:XdY*tableId}}\`        | Roll dice for count, then roll that many times | \`{{dice:1d4*treasureTable}}\`  |
| \`{{N*tableId\\|"sep"}}\`        | Multiple rolls with custom separator           | \`{{3*nameTable\\|", "}}\`       |
| \`{{N*unique*tableId\\|"sep"}}\` | Unique rolls with custom separator             | \`{{3*unique*items\\|" and "}}\` |
| \`{{tableId#instance}}\`        | Named instance for conditional references      | \`{{weapon#primary}}\`          |
| \`{{$variableName}}\`           | Reference a stored variable (static or shared) | \`{{$playerRace}}\`             |
| \`{{$alias.variableName}}\`     | Reference a variable from imported file        | \`{{$core.defaultCurrency}}\`   |
| \`{{@placeholder.property}}\`   | Lookup property from placeholder context       | \`{{@size.buildingCount}}\`     |
| \`{{$var*tableId}}\`            | Use shared variable as roll count              | \`{{$monsterCount*creatures}}\` |
| \`{{$var*unique*tableId}}\`     | Use shared variable for unique roll count      | \`{{$count*unique*loot}}\`      |
| \`{{N*table >> $var}}\`         | Capture N roll results into variable           | \`{{3*items >> $loot}}\`        |
| \`{{N*unique*table >> $var}}\`  | Capture N unique rolls into variable           | \`{{3*unique*items >> $loot}}\` |
| \`{{N*table >> $var\\|silent}}\` | Capture without output                         | \`{{3*items >> $loot\\|silent}}\`|
| \`{{$var[N]}}\`                 | Access captured item by index (0-based)        | \`{{$loot[0]}}\`                |
| \`{{$var[N].@prop}}\`           | Access captured item's sets property           | \`{{$loot[0].@enemy}}\`         |
| \`{{$var.count}}\`              | Get count of captured items                    | \`{{$loot.count}}\`             |
| \`{{collect:$var.@prop}}\`      | Aggregate property across all captured items   | \`{{collect:$loot.@enemy}}\`    |
| \`{{collect:$var.@prop\\|unique}}\` | Aggregate with deduplication               | \`{{collect:$loot.@enemy\\|unique}}\` |

### 5.2 The \`again\` Keyword

The \`again\` keyword enables "roll again" mechanics within a table entry's value. When processed, it rolls on the same table that contains the current entry.

**Self-Reference Safety:** When \`again\` is used, the entry containing it is automatically excluded from subsequent rolls to prevent infinite loops. This exclusion applies only to the immediate reroll chain, not to future independent rolls on the same table.

**Syntax Variants:**

| Syntax | Description |
|--------|-------------|
| \`{{again}}\` | Roll once more on this table |
| \`{{N*again}}\` | Roll N times on this table |
| \`{{N*unique*again}}\` | Roll N times, no duplicates (excluding self) |
| \`{{again\\|"sep"}}\` | Roll again with custom separator |
| \`{{N*again\\|"sep"}}\` | Roll N times with custom separator |
| \`{{dice:XdY*again}}\` | Roll dice for count, then roll that many times |

**Example: Wild Magic Surge Table**

\`\`\`json
{
  "id": "wildMagic",
  "name": "Wild Magic Surge",
  "type": "simple",
  "resultType": "effect",
  "tags": ["magic", "wild-magic", "chaos"],
  "entries": [
    { "value": "You can fly for 1 minute", "tags": ["beneficial", "movement"] },
    { "value": "Your skin turns bright blue for 24 hours", "tags": ["cosmetic"] },
    { "value": "You cast *fireball* centered on yourself", "tags": ["harmful", "fire"] },
    { "value": "**Double surge!** {{2*unique*again|\\" AND \\"}}", "tags": ["meta", "double"] },
    { "value": "Nothing happens", "weight": 2, "tags": ["null"] }
  ]
}
\`\`\`

**Possible output for "Double surge!":**
> **Double surge!** You can fly for 1 minute AND Your skin turns bright blue for 24 hours

### 5.3 Dice Notation

All dice operations must be prefixed with \`dice:\` to distinguish them from table references.

| Notation | Description |
|----------|-------------|
| \`XdY\` | Roll X dice with Y sides |
| \`+Z\`, \`-Z\`, \`*Z\` | Add, subtract, or multiply result by Z |
| \`kN\` or \`khN\` | Keep highest N dice |
| \`klN\` | Keep lowest N dice |
| \`!\` | Exploding (rolls of max value roll again, up to \`maxExplodingDice\`) |

**Examples:**
- \`{{dice:3d6}}\`  Roll 3d6 (result: 3-18)
- \`{{dice:4d6k3}}\`  Roll 4d6, keep highest 3
- \`{{dice:2d10+5}}\`  Roll 2d10, add 5
- \`{{dice:1d6!}}\`  Roll 1d6, 6s explode

### 5.4 Math Expressions

Use the \`math:\` prefix to perform arithmetic operations. Math expressions can combine variables, placeholders, literal numbers, and inline dice rolls.

#### 5.4.1 Basic Syntax

| Component | Syntax | Example |
|-----------|--------|---------|
| Literal integers | \`N\` | \`5\`, \`-3\`, \`100\` |
| Variables | \`$varName\` | \`$baseValue\`, \`$bonus\` |
| Imported variables | \`$alias.varName\` | \`$core.multiplier\` |
| Placeholders | \`@placeholder.property\` | \`@creature.hitDice\` |
| Inline dice | \`dice:XdY...\` | \`dice:2d6\`, \`dice:1d4+1\` |

#### 5.4.2 Operators

| Operator | Description | Precedence |
|----------|-------------|------------|
| \`(\` \`)\` | Grouping | Highest |
| \`*\` | Multiplication | High |
| \`/\` | Integer division (rounds toward zero) | High |
| \`+\` | Addition | Low |
| \`-\` | Subtraction | Low |

Operators of equal precedence are evaluated left to right.

#### 5.4.3 Examples

**Simple variable arithmetic:**
\`\`\`
{{math:$base + $bonus}}
{{math:$price * $quantity}}
{{math:$total / 2}}
\`\`\`

**With grouping:**
\`\`\`
{{math:($strength - 10) / 2}}            D&D-style ability modifier
{{math:($base + $bonus) * $multiplier}}
\`\`\`

**With inline dice:**
\`\`\`
{{math:dice:2d6 + $strMod}}              Damage roll with modifier
{{math:dice:1d20 + $attackBonus}}        Attack roll
{{math:$level * dice:1d8 + $conMod}}     Hit points per level
\`\`\`

**With placeholders:**
\`\`\`
{{math:@creature.hd * 4 + 10}}           Calculate HP from hit dice
{{math:@item.basePrice * $markup}}       Dynamic pricing
\`\`\`

**Complex TTRPG calculations:**
\`\`\`
{{math:(dice:4d6k3 - 10) / 2}}           Roll stats, calculate modifier
{{math:$proficiencyBonus + @weapon.attackMod + $strMod}}
\`\`\`

#### 5.4.4 Type Coercion and Errors

- **Non-numeric values** coerce to \`0\` with a logged warning
- **Division by zero** evaluates to \`0\` with a logged warning
- **All results are integers**decimal results are rounded toward zero
- Inline dice are rolled once when the math expression is evaluated

#### 5.4.5 Where Math Expressions Can Be Used

| Context | Example |
|---------|---------|
| Shared block values | \`"damage": "{{math:dice:2d6 + $strMod}}"\` |
| Template patterns | \`"You deal {{math:$baseDamage + $bonus}} damage."\` |
| Entry values | \`"{{math:@creature.count * 10}} gold pieces"\` |
| Conditional values | \`"value": "{{math:$current + 5}}"\` |

### 5.5 Multiple Rolls

Use the \`*\` operator to roll multiple times on a table.

| Syntax | Behavior |
|--------|----------|
| \`{{3*table}}\` | Roll 3 times, results joined by \`, \` (default) |
| \`{{3*unique*table}}\` | Roll 3 times, no duplicates |
| \`{{dice:1d4*table}}\` | Roll 1d4 to determine count, then roll that many times |
| \`{{3*table\\|" and "}}\` | Roll 3 times, join with \` and \` |
| \`{{$count*table}}\` | Use shared variable as count (must resolve to integer) |

**Separator Syntax:** Separators must be enclosed in double quotes after a pipe character. To include a literal double quote in the separator, escape it as \`\\"\`.

**Variable as Count:** When using a shared variable as a roll count:
- The variable must resolve to a number
- Non-integer values are rounded down (toward zero)
- Values  0 result in zero rolls (empty string output)
- Non-numeric values are coerced; coercion failure results in 0

### 5.6 Unique Constraint Logic

When using \`{{N*unique*tableId}}\`:

1. A temporary pool is created containing all table entries with weight > 0.
2. Each selection removes that entry from the pool.
3. Weights apply to each successive draw from the remaining pool.
4. If N exceeds total available entries, behavior follows \`uniqueOverflowBehavior\` in metadata:
   - \`"stop"\` (default): Return all available entries
   - \`"cycle"\`: Refill pool and continue
   - \`"error"\`: Throw an error

### 5.7 Instance References

Use \`#\` to create named instances for later conditional logic:

\`\`\`
{{weapon#primary}} and {{weapon#secondary}}
\`\`\`

This rolls on \`weapon\` twice, storing results as \`primary\` and \`secondary\` instances that can be referenced in conditionals.

### 5.8 Variables and Placeholders

**Variables** (\`$\`) reference values from the global \`variables\` object (static), the \`shared\` block (generation-time), imported file variables, or values set by conditionals:

\`\`\`
{{$defaultCurrency}}
{{$core.standardSeparator}}
{{$monsterCount}}
\`\`\`

**Lookup Order:** When resolving \`{{$name}}\`:
1. Check shared scope (generation-time variables)
2. Check static variable scope (file-level variables)
3. If not found and within a conditional's when-clause: treat as \`false\`
4. Otherwise: throw \`REFERENCE_ERROR\`

**Placeholders** (\`@\`) reference contextual values set by previously rolled entries via their \`sets\` property:

\`\`\`
{{@race.nameTable}}
\`\`\`

See Section 9 for details on the placeholder system.

### 5.9 Roll Capture System

The Roll Capture System enables capturing multiple roll results for later aggregation and individual access. This allows combining properties from multiple independent table rolls into unified lists.

#### 5.9.1 Capture Declaration

Use the \`>>\` operator to capture roll results into a named variable:

| Syntax | Description |
|--------|-------------|
| \`{{N*table >> $var}}\` | Roll N times, capture results into \`$var\` |
| \`{{N*unique*table >> $var}}\` | Roll N unique times, capture into \`$var\` |
| \`{{$count*table >> $var}}\` | Use shared variable for roll count |
| \`{{dice:XdY*table >> $var}}\` | Use dice roll for count |

**Output Control:**

| Syntax | Description |
|--------|-------------|
| \`{{3*table >> $var}}\` | Outputs joined values, creates capture |
| \`{{3*table >> $var\\|"; "}}\` | Outputs with custom separator, creates capture |
| \`{{3*table >> $var\\|silent}}\` | No output, only creates capture |

**Data Model:** A capture variable stores an ordered array of captured items:

\`\`\`typescript
interface CaptureItem {
  value: string;           // The resolved output text from the roll
  sets: Record<string, string>;  // The merged sets (defaultSets + entry sets), fully resolved
}

interface CaptureVariable {
  items: CaptureItem[];
  count: number;           // items.length
}
\`\`\`

#### 5.9.2 Capture Variable Access

**Basic Access:**

| Syntax | Returns | Example |
|--------|---------|---------|
| \`{{$var}}\` | All raw values, comma-separated | \`"palace, mansion, fortress"\` |
| \`{{$var\\|"sep"}}\` | All raw values, custom separator | \`"palace; mansion; fortress"\` |
| \`{{$var.count}}\` | Number of captured items (integer) | \`3\` |

**Indexed Access (0-based):**

| Syntax | Returns | Example |
|--------|---------|---------|
| \`{{$var[0]}}\` | Raw value of first item | \`"palace"\` |
| \`{{$var[1]}}\` | Raw value of second item | \`"mansion"\` |
| \`{{$var[-1]}}\` | Raw value of last item | \`"fortress"\` |
| \`{{$var[0].value}}\` | Explicit raw value access | \`"palace"\` |
| \`{{$var[0].@enemy}}\` | The \`enemy\` sets property from first item | \`"mad scientist"\` |

**Out-of-bounds behavior:** Returns empty string with engine warning.

#### 5.9.3 Property Aggregation (collect)

The \`collect:\` prefix aggregates a specific property across all captured items:

| Syntax | Returns |
|--------|---------|
| \`{{collect:$var.value}}\` | All raw values (equivalent to \`{{$var}}\`) |
| \`{{collect:$var.@prop}}\` | All values of \`@prop\` from each item, comma-separated |
| \`{{collect:$var.@prop\\|"sep"}}\` | Same, with custom separator |
| \`{{collect:$var.@prop\\|unique}}\` | Deduplicated values, comma-separated |
| \`{{collect:$var.@prop\\|unique\\|"sep"}}\` | Deduplicated values, custom separator |

**Missing property behavior:** If an item doesn't have the requested property, it contributes an empty string to the collection.

#### 5.9.4 Example

\`\`\`json
{
  "templates": [
    {
      "id": "fullSetting",
      "name": "Full Campaign Setting",
      "pattern": "## Settings\\n{{dice:1d3+1*unique*settingIdeas >> $ideas}}\\n\\n## Enemies\\n{{collect:$ideas.@enemy}}\\n\\n## Allies\\n{{collect:$ideas.@ally}}"
    }
  ]
}
\`\`\`

**Sample Output:**

\`\`\`markdown
## Settings
A crumbling palace, A haunted manor, An icy fortress

## Enemies
mad scientist, vengeful spirit, frost giant

## Allies
disgraced noble, ghostly guardian, arctic ranger
\`\`\`

#### 5.9.5 Capture Scope and Rules

1. **Generation Scope:** Capture variables exist in generation scope (same as shared variables)
2. **Persistence:** They persist for the entire generation run, then are discarded
3. **Namespace:** Capture variable names share namespace with shared variables (no conflicts allowed)
4. **Forward References:** A capture variable must be declared before it can be accessed
5. **Overwrite Behavior:** If a capture variable name is reused, the second capture overwrites the first (with warning)

---

## 6. Conditionals Array

Conditionals apply logic based on rolled results.

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| when | string | Yes | Condition expression (see 6.1) |
| action | string | Yes | One of: \`"append"\`, \`"prepend"\`, \`"replace"\`, \`"setVariable"\` |
| target | string | Conditional | Required for \`"replace"\` and \`"setVariable"\`. For \`"append"\`/\`"prepend"\`, defaults to current output. |
| value | string | Yes | Value to apply (may contain template syntax). Supports Markdown. |
| tags | string[] | No | Tags for organization |

**Example:**

\`\`\`json
{
  "when": "@size.value == 'large'",
  "action": "append",
  "value": " _This settlement has a defensive wall._",
  "tags": ["settlement", "fortification"]
}
\`\`\`

### 6.1 Condition Expression Syntax

**Comparison Operators:**

| Operator   | Description              | Example                            |
| ---------- | ------------------------ | ---------------------------------- |
| \`==\`       | Equals                   | \`@race.value == 'elf'\`             |
| \`!=\`       | Not equals               | \`$setting != 'modern'\`             |
| \`>\`        | Greater than (numeric)   | \`@size.buildings > 10\`             |
| \`<\`        | Less than (numeric)      | \`dice:result < 5\`                  |
| \`>=\`       | Greater than or equal    | \`@level.value >= 3\`                |
| \`<=\`       | Less than or equal       | \`@age.years <= 100\`                |
| \`contains\` | String contains          | \`@name.value contains 'the'\`       |
| \`matches\`  | Regex match (ECMAScript) | \`@code.value matches '^[A-Z]{3}$'\` |

**Logical Operators:**

| Operator | Description | Example |
|----------|-------------|---------|
| \`&&\` | Logical AND | \`@race.value == 'elf' && @class.value == 'mage'\` |
| \`\\|\\|\` | Logical OR | \`@size.value == 'small' \\|\\| @size.value == 'tiny'\` |
| \`!\` | Logical NOT | \`!(@hidden.value == true)\` |
| \`()\` | Grouping | \`(@a == 1 \\|\\| @b == 2) && @c == 3\` |

**Variable Handling in Conditions:**
- If a \`$variable\` referenced in a when-clause is not in scope (neither static nor shared), the condition evaluates to \`false\` without throwing an error
- This allows optional conditional logic based on variables that may or may not be defined

**Type Coercion:** Numeric comparisons (\`>\`, \`<\`, \`>=\`, \`<=\`) convert operands to numbers. If conversion fails, the comparison returns \`false\`.

---

## 7. Variables Object

Static global variables that are loaded at engine initialization and can be referenced throughout templates using \`{{$variableName}}\`.

\`\`\`json
"variables": {
  "defaultSeparator": ", ",
  "setting": "fantasy",
  "campaignYear": "1247"
}
\`\`\`

**Static Nature:** Variables are evaluated once at file load time. They should contain static, non-generative values. While dice expressions and table references are technically permitted, they will be resolved once at load timenot per generation.

**Recommendation:** For values that should be re-evaluated each generation, use the \`shared\` block instead (see Section 8).

Variable names must:
- Start with a letter
- Contain only letters, numbers, and underscores
- Not conflict with reserved words (see Section 15)
- Not duplicate variable names from imported files

**Important:** Variable names and placeholder names exist in separate namespaces. A variable \`$race\` and a placeholder \`@race\` are distinct and do not conflict.

---

## 8. Shared Block

The \`shared\` block defines generation-time variables that are evaluated once at the start of each generation and remain constant throughout that generation run.

### 8.1 Purpose

Shared variables solve the problem of needing consistent values across a single generation. For example, if you roll for "number of monsters" and want to use that same number multiple times in a template, shared variables ensure consistency.

### 8.2 Shared Object Structure

\`\`\`json
"shared": {
  "monsterCount": "{{dice:2d4}}",
  "leaderType": "{{eliteMonsterTable}}",
  "totalThreat": "{{math:$monsterCount + 5}}"
}
\`\`\`

### 8.3 Evaluation Rules

1. **Order-dependent:** Shared variables are evaluated in declaration order
2. **Once per generation:** Each shared value is resolved exactly once at generation start
3. **Forward reference prohibition:** A shared variable cannot reference another shared variable that appears later in the declaration
4. **Static variable shadowing:** A shared variable cannot have the same name as a static variable (error at generation start)
5. **Imported shared isolation:** The \`shared\` block from imported files is NOT evaluated; only the entry-point file's shared block is processed

### 8.4 Supported Expressions

| Expression Type           | Example                            | Result Type   |
| ------------------------- | ---------------------------------- | ------------- |
| Dice expression           | \`"{{dice:2d6}}"\`                   | Integer       |
| Table roll                | \`"{{monsterTable}}"\`               | String        |
| Prior shared reference    | \`"{{$previousVar}}"\`               | Inherits type |
| Static variable reference | \`"{{$staticVar}}"\`                 | Inherits type |
| Math expression           | \`"{{math:$a + $b}}"\`               | Integer       |
| Math with inline dice     | \`"{{math:dice:2d6 + $modifier}}"\` | Integer       |

### 8.5 Math Expressions in Shared Block

Use the \`{{math:...}}\` syntax for arithmetic operations. This explicit syntax eliminates ambiguity and provides full expression support.

**Basic arithmetic:**
\`\`\`json
"shared": {
  "baseMonsters": "{{dice:2d6}}",
  "eliteMonsters": "{{dice:1d4}}",
  "totalMonsters": "{{math:$baseMonsters + $eliteMonsters}}",
  "treasureValue": "{{math:$totalMonsters * 10}}"
}
\`\`\`

If \`baseMonsters\` resolves to \`7\` and \`eliteMonsters\` resolves to \`3\`:
- \`totalMonsters\` = \`{{math:7 + 3}}\`  \`10\`
- \`treasureValue\` = \`{{math:10 * 10}}\`  \`100\`

**With grouping and inline dice:**
\`\`\`json
"shared": {
  "strength": "{{dice:4d6k3}}",
  "strMod": "{{math:($strength - 10) / 2}}",
  "meleeDamage": "{{math:dice:1d8 + $strMod}}"
}
\`\`\`

**TTRPG Examples:**

| Use Case | Expression |
|----------|------------|
| Ability modifier | \`"{{math:($abilityScore - 10) / 2}}"\` |
| Attack bonus | \`"{{math:$proficiency + $strMod}}"\` |
| Damage with modifier | \`"{{math:dice:2d6 + $strMod}}"\` |
| Scaled encounter | \`"{{math:$partyLevel * 2 + dice:1d4}}"\` |
| Gold reward | \`"{{math:$challengeRating * 50 + dice:2d6*10}}"\` |
| HP calculation | \`"{{math:$level * (dice:1d10 + $conMod)}}"\` |

See Section 5.4 for complete math expression syntax and operator details.

### 8.6 Using Shared Variables

Shared variables are referenced with the \`$\` prefix, just like static variables:

\`\`\`json
{
  "pattern": "You encounter {{$monsterCount}} {{creatures}}. They carry {{$monsterCount*unique*treasure|\\", \\"}}."
}
\`\`\`

**As Roll Multiplier:** When used as \`{{$var*tableId}}\`:
- The variable must resolve to a number
- Non-integer values are rounded down
- Values  0 result in zero rolls (empty string)

### 8.7 Example: Complete Shared Usage

\`\`\`json
{
  "metadata": {
    "name": "Encounter Generator",
    "namespace": "encounter.gen",
    "version": "1.0.0",
    "specVersion": "1.0"
  },
  "shared": {
    "encounterSize": "{{dice:2d4}}",
    "creatureType": "{{creatureCategory}}",
    "lootMultiplier": "{{math:$encounterSize / 2}}",
    "totalXP": "{{math:$encounterSize * 50 + dice:2d6*10}}"
  },
  "tables": [
    {
      "id": "creatureCategory",
      "name": "Creature Category",
      "type": "simple",
      "entries": [
        { "value": "goblins" },
        { "value": "orcs" },
        { "value": "undead" }
      ]
    }
  ],
  "templates": [
    {
      "id": "encounter",
      "name": "Random Encounter",
      "resultType": "encounter",
      "pattern": "You encounter {{$encounterSize}} {{$creatureType}}. They have {{$lootMultiplier*treasureTable|\\", \\"}} treasure items worth {{math:$totalXP / 10}} gold."
    }
  ]
}
\`\`\`

### 8.8 Table/Template-Level Shared Variables

In addition to document-level shared variables, you can define \`shared\` on individual tables and templates. These are evaluated **lazily** - only when that specific table or template is rolled.

#### 8.8.1 Syntax

\`\`\`json
{
  "tables": [
    {
      "id": "scaledEncounter",
      "name": "Scaled Encounter",
      "type": "simple",
      "shared": {
        "threatLevel": "{{dice:1d6}}",
        "monsterCount": "{{math:$threatLevel + 2}}"
      },
      "entries": [
        { "value": "{{$monsterCount}} goblins attack!" },
        { "value": "A band of {{$monsterCount}} orcs approaches." }
      ]
    }
  ],
  "templates": [
    {
      "id": "dynamicEncounter",
      "name": "Dynamic Encounter",
      "shared": {
        "partyLevel": "{{dice:1d10}}",
        "dangerModifier": "{{math:$partyLevel / 2}}"
      },
      "pattern": "Danger level {{math:$dangerModifier + dice:1d6}}: {{encounterTable}}"
    }
  ]
}
\`\`\`

#### 8.8.2 Evaluation Rules

1. **Lazy Evaluation**: Table/template-level shared variables are only evaluated when that specific table or template is rolled - not at generation start
2. **Order-Dependent**: Within a \`shared\` block, later variables can reference earlier ones
3. **Propagation**: Shared variables propagate to nested table references - if table A defines \`$foo\` and references table B, table B can use \`$foo\`
4. **Document-Level Precedence**: Document-level shared variables take precedence. Attempting to shadow a document-level shared variable throws an error
5. **No Static Shadowing**: Table/template-level shared cannot shadow static variables

#### 8.8.3 Inheritance from Parent Tables

When a table with \`shared\` is referenced by another table that also defines \`shared\`:
- The parent's shared variables are evaluated first (since it's rolled first)
- If the child table defines a variable with the same name, it is skipped (parent wins)
- This allows tables to work both standalone and when nested

\`\`\`json
{
  "tables": [
    {
      "id": "parentTable",
      "type": "simple",
      "shared": { "count": "{{dice:1d4}}" },
      "entries": [{ "value": "{{$count}} items from {{childTable}}" }]
    },
    {
      "id": "childTable",
      "type": "simple",
      "shared": { "count": "{{dice:1d6}}" },
      "entries": [{ "value": "{{$count}} things" }]
    }
  ]
}
\`\`\`

When rolling \`parentTable\`:
1. \`$count\` is set to 1d4 result (e.g., 3)
2. \`childTable\` is rolled - its \`shared.count\` is skipped since \`$count\` already exists
3. Child entry uses the parent's \`$count\` value (3)

When rolling \`childTable\` directly:
1. \`$count\` is set to 1d6 result (e.g., 5)
2. Entry uses 5

---

## 9. Placeholder System

Placeholders enable dynamic behavior based on previously rolled results. When an entry is selected, its \`sets\` property (merged with any \`defaultSets\` from the table, and inherited values if applicable) populates a placeholder context that subsequent operations can reference.

### 9.1 Setting Placeholder Values

In a table entry, use \`sets\` to define key-value pairs:

\`\`\`json
{
  "id": "elfEntry",
  "value": "elf",
  "tags": ["playable", "fey"],
  "sets": {
    "race": "elf",
    "nameTable": "elfNames",
    "lifespan": "750"
  }
}
\`\`\`

When this entry is selected, three placeholder properties become available: \`@race\`, which returns \`"elf"\`, and \`@nameTable\`, \`@lifespan\` with their respective values.

### 9.2 Using Placeholder Values

Reference placeholders in templates using \`@placeholder.property\` syntax:

\`\`\`
A {{dice:1d100+{{@race.lifespan}}}} year old {{@race.value}}
\`\`\`

**Dynamic Table Selection:**

Placeholders can specify which table to roll on:

\`\`\`json
{
  "pattern": "Named {{@race.nameTable}}"
}
\`\`\`

If \`@race.nameTable\` equals \`"elfNames"\`, this rolls on the \`elfNames\` table.

### 9.3 Placeholder vs Variable Separation

| Prefix | Source | Syntax | Example |
|--------|--------|--------|---------|
| \`$\` | Static variables, shared variables, or \`setVariable\` action | \`{{$varName}}\` | \`{{$setting}}\` |
| \`@\` | Entry \`sets\` property (merged with \`defaultSets\` and inherited) | \`{{@placeholder.property}}\` | \`{{@race.nameTable}}\` |

This separation prevents naming collisions and clarifies the source of each value.

---

## 10. Table Inheritance

Tables can extend other tables using the \`extends\` property. The child table inherits all entries from the parent, then applies its own modifications.

### 10.1 Basic Inheritance

\`\`\`json
{
  "id": "basicLoot",
  "type": "simple",
  "tags": ["loot", "base"],
  "entries": [
    { "id": "gold", "value": "Copper coins", "weight": 5 },
    { "id": "silver", "value": "Silver coins", "weight": 3 }
  ]
}
\`\`\`

\`\`\`json
{
  "id": "richLoot",
  "extends": "basicLoot",
  "type": "simple",
  "tags": ["loot", "wealthy"],
  "entries": [
    { "id": "gold", "value": "Gold coins", "weight": 2 },
    { "id": "gems", "value": "Precious gems", "weight": 1 }
  ]
}
\`\`\`

**Result for \`richLoot\`:**
- \`gold\`: "Gold coins" (weight 2)  *overridden*
- \`silver\`: "Silver coins" (weight 3)  *inherited*
- \`gems\`: "Precious gems" (weight 1)  *added*

### 10.2 Multi-Level Inheritance

Tables can form inheritance chains where Table C extends Table B, which extends Table A.

\`\`\`json
{
  "id": "baseTreasure",
  "type": "simple",
  "defaultSets": { "rarity": "common" },
  "entries": [
    { "id": "copper", "value": "Copper coins", "weight": 5 },
    { "id": "silver", "value": "Silver coins", "weight": 3 },
    { "id": "gold", "value": "Gold coins", "weight": 1 }
  ]
}
\`\`\`

\`\`\`json
{
  "id": "mediumTreasure",
  "extends": "baseTreasure",
  "type": "simple",
  "defaultSets": { "rarity": "uncommon" },
  "entries": [
    { "id": "copper", "weight": 3 },
    { "id": "gems", "value": "Gemstones", "weight": 2 }
  ]
}
\`\`\`

\`\`\`json
{
  "id": "largeTreasure",
  "extends": "mediumTreasure",
  "type": "simple",
  "defaultSets": { "rarity": "rare", "quality": "fine" },
  "entries": [
    { "id": "copper", "weight": 0 },
    { "id": "gold", "value": "Platinum coins", "weight": 3 },
    { "id": "artifacts", "value": "Ancient artifact", "weight": 1 }
  ]
}
\`\`\`

**Resolution for \`largeTreasure\`:**

| Entry ID | Value | Weight | Source |
|----------|-------|--------|--------|
| copper | "Copper coins" | 0 | Value from baseTreasure, weight overridden by largeTreasure (disabled) |
| silver | "Silver coins" | 3 | Fully inherited from baseTreasure |
| gold | "Platinum coins" | 3 | Value and weight overridden by largeTreasure |
| gems | "Gemstones" | 2 | Inherited from mediumTreasure |
| artifacts | "Ancient artifact" | 1 | Added by largeTreasure |

**DefaultSets Resolution:**
Deep-merged from oldest ancestor to child: \`{ "rarity": "rare", "quality": "fine" }\`

### 10.3 Property-Level Inheritance

When overriding an entry, only explicitly specified properties are replaced. Unspecified properties are inherited from the nearest ancestor that defines them.

\`\`\`json
// Parent
{
  "id": "goblin",
  "value": "Goblin",
  "weight": 3,
  "description": "A small green creature",
  "assets": { "image": "goblin.png", "token": "goblin_token.png" },
  "sets": { "hp": "7", "ac": "15" }
}

// Child override
{
  "id": "goblin",
  "weight": 5,
  "assets": { "image": "goblin_elite.png" }
}
\`\`\`

**Resulting entry:**
\`\`\`json
{
  "id": "goblin",
  "value": "Goblin",              // inherited
  "weight": 5,                     // overridden
  "description": "A small green creature",  // inherited
  "assets": { 
    "image": "goblin_elite.png",   // overridden
    "token": "goblin_token.png"    // inherited (deep merge)
  },
  "sets": { "hp": "7", "ac": "15" }  // inherited
}
\`\`\`

**Explicit Removal:** To remove an inherited property, set it to \`null\`:

\`\`\`json
{
  "id": "goblin",
  "description": null,   // removes the description
  "sets": null           // removes all sets
}
\`\`\`

### 10.4 Inheritance Rules

1. **Explicit IDs required:** Only entries with explicit \`id\` values can be overridden. Attempting to override an entry without an ID produces a parse-time error.

2. **Single parent:** A table can only extend one other table (no diamond inheritance). Use collection tables for combining multiple sources.

3. **Depth limit:** Inheritance chains are limited by \`maxInheritanceDepth\` (default: 5). Exceeding this produces a parse-time error.

4. **Topmost wins:** The child table's values always take precedence. In a chain ABC, C's values override both B and A, even if B didn't override A.

5. **No circular inheritance:** If Table A extends Table B, Table B cannot extend Table A (directly or indirectly).

6. **Tags not inherited:** Each table defines its own tags. Child tables do not inherit parent tags.

7. **ResultType not inherited:** Each table defines its own resultType.

8. **Cross-file inheritance:** Tables can extend tables from imported files using \`alias.tableId\` syntax.

### 10.5 Cross-File and Cross-Namespace Inheritance

Tables can extend tables from imported files or other namespaces:

\`\`\`json
{
  "id": "customTreasure",
  "extends": "loot.baseTreasure",
  "type": "simple",
  "entries": [ ... ]
}
\`\`\`

\`\`\`json
{
  "id": "customTreasure",
  "extends": "fantasy.core.baseTreasure",
  "type": "simple",
  "entries": [ ... ]
}
\`\`\`

**Validation:** All ancestors in an inheritance chain must be resolvable at file load time. If any ancestor table is missing (file not imported, table doesn't exist), the engine must produce a clear error:

\`\`\`
INHERITANCE_ERROR in table 'customTreasure':
  Cannot resolve parent 'loot.baseTreasure'.
  The import alias 'loot' is defined, but table 'baseTreasure' was not found.
\`\`\`

---

## 11. ResultType System

The \`resultType\` field provides semantic classification of output, enabling consuming applications to handle different result types appropriately.

### 11.1 Properties

- **Optional:** ResultType is not required on any element
- **Case-insensitive:** \`"Creature"\`, \`"creature"\`, and \`"CREATURE"\` are equivalent
- **User-definable:** Any string value is valid; namespaced values are encouraged for custom types
- **Not inherited:** ResultType is not inherited through table inheritance chains

### 11.2 Default Types

The following types are recommended as a baseline vocabulary:

| Type | Description |
|------|-------------|
| \`creature\` | A monster, animal, or other creature |
| \`npc\` | A non-player character |
| \`faction\` | An organization, guild, or group |
| \`item\` | Equipment, treasure, or objects |
| \`loot\` | Treasure hauls or reward packages |
| \`location\` | Places, dungeons, or areas |
| \`encounter\` | Combat or exploration encounters |
| \`event\` | Things that happen, occurrences |
| \`hook\` | Plot hooks or adventure seeds |
| \`complication\` | Obstacles or problems |
| \`name\` | Character, place, or thing names |
| \`trait\` | Personality traits, features, or characteristics |
| \`effect\` | Spell effects, conditions, or outcomes |
| \`environment\` | Weather, terrain, or atmosphere |
| \`ability\` | Skills, powers, or capabilities |
| \`description\` | Narrative text or flavor |
| \`rumor\` | Information, gossip, or lore |
| \`dialogue\` | Speech or conversation |
| \`statistic\` | Numbers, stats, or metrics |
| \`number\` | Pure numeric output |
| \`currency\` | Money or value amounts |
| \`time\` | Durations or timestamps |
| \`weather\` | Weather conditions |

### 11.3 Custom Types

Publishers may define their own types using namespace conventions:

\`\`\`json
"resultType": "starships/cruiser"
"resultType": "wh40k/regiment"
"resultType": "buildings/al-kazir/trade"
\`\`\`

### 11.4 Precedence Rules

**For Simple Tables:**
1. Entry's \`resultType\` (if defined)
2. Table's \`resultType\` (if defined)
3. Undefined

**For Composite Tables:**
1. Selected entry's \`resultType\` (if defined)
2. Selected source table's \`resultType\` (if defined)
3. Composite table's \`resultType\` (if defined)
4. Undefined

**For Templates:**
1. Template's \`resultType\` (always used if defined)
2. Undefined (template resultType is never inherited from tables used within)

### 11.5 Engine Handling

ResultType is metadata for consuming applications. The engine:
- MUST include resultType in output when defined
- MUST NOT interpret or act upon resultType values
- MUST normalize case (lowercase recommended)

---

## 12. Markdown Support

The specification supports Markdown formatting in specific fields to enable rich text output.

### 12.1 Markdown-Enabled Fields

| Location | Field | Markdown Support |
|----------|-------|------------------|
| Metadata | \`description\` | Yes |
| Metadata | \`instructions\` | Yes |
| Table | \`description\` | Yes |
| Entry | \`value\` | Yes |
| Entry | \`description\` | Yes |
| Template | \`pattern\` | Yes |
| Template | \`description\` | Yes |
| Conditional | \`value\` | Yes |

### 12.2 Supported Markdown Syntax

Implementations SHOULD support at minimum:

| Syntax | Renders As |
|--------|------------|
| \`**bold**\` | **bold** |
| \`*italic*\` or \`_italic_\` | *italic* |
| \`***bold italic***\` | ***bold italic*** |
| \`\` \`code\` \`\` | \`code\` |
| \`[link text](url)\` | Hyperlink |
| \`- item\` or \`* item\` | Bullet list |
| \`1. item\` | Numbered list |

Implementations MAY support additional Markdown features such as headers, tables, and blockquotes.

### 12.3 Markdown in Template Output

When template syntax is embedded within Markdown, the template is resolved first, then Markdown is rendered:

\`\`\`json
{
  "pattern": "You find a **{{weaponType}}** worth _{{dice:2d6*10}} gold pieces_."
}
\`\`\`

**Resolved output:** \`You find a **sword** worth _70 gold pieces_.\`

**Rendered:** You find a **sword** worth *70 gold pieces*.

### 12.4 Escaping Markdown

To output literal Markdown characters, use standard Markdown escaping with backslashes:

\`\`\`json
{
  "value": "The price is 5\\\\*10 = 50 gold"
}
\`\`\`

**Output:** The price is 5\\*10 = 50 gold

---

## 13. Complete Example

\`\`\`json
{
  "metadata": {
    "name": "Fantasy Town Generator",
    "namespace": "fantasy.towns",
    "version": "2.2.0",
    "specVersion": "1.0",
    "author": "Game Master",
    "description": "Generates random fantasy town descriptions with **dynamic features** based on settlement size.",
    "tags": ["fantasy", "towns", "settlements", "worldbuilding"],
    "source": {
      "book": "Worldbuilder's Handbook",
      "publisher": "Example Games",
      "page": "45-52",
      "license": "CC BY 4.0"
    },
    "maxRecursionDepth": 30,
    "maxExplodingDice": 50,
    "maxInheritanceDepth": 5
  },
  "imports": [
    {
      "path": "./shared/names.json",
      "alias": "names",
      "description": "Shared name generation tables"
    }
  ],
  "variables": {
    "defaultSeparator": ", ",
    "era": "medieval"
  },
  "shared": {
    "featureCount": "{{dice:1d3+1}}",
    "populationModifier": "{{dice:1d20-10}}"
  },
  "tables": [
    {
      "id": "townSize",
      "name": "Town Size",
      "type": "simple",
      "resultType": "location",
      "tags": ["settlement", "size", "population"],
      "source": {
        "page": 47
      },
      "entries": [
        {
          "id": "hamlet",
          "value": "tiny hamlet",
          "range": [1, 50],
          "tags": ["tiny", "rural"],
          "sets": {
            "size": "tiny",
            "buildingCount": "{{dice:1d4+2}}",
            "population": "{{dice:2d6*10}}"
          },
          "assets": {
            "image": "images/hamlet.png",
            "token": "tokens/settlement_tiny.webp"
          }
        },
        {
          "id": "village",
          "value": "small village",
          "range": [51, 80],
          "tags": ["small", "rural"],
          "sets": {
            "size": "small",
            "buildingCount": "{{dice:2d6+5}}",
            "population": "{{dice:4d6*10}}"
          },
          "assets": {
            "image": "images/village.png",
            "token": "tokens/settlement_small.webp"
          }
        },
        {
          "id": "town",
          "value": "bustling town",
          "range": [81, 100],
          "tags": ["medium", "urban"],
          "sets": {
            "size": "medium",
            "buildingCount": "{{dice:3d6+10}}",
            "population": "{{dice:2d6*100}}"
          },
          "assets": {
            "image": "images/town.png",
            "token": "tokens/settlement_medium.webp"
          }
        }
      ]
    },
    {
      "id": "features",
      "name": "Town Features",
      "type": "simple",
      "resultType": "location",
      "tags": ["settlement", "features", "buildings"],
      "source": {
        "page": 48
      },
      "defaultSets": {
        "featureType": "building"
      },
      "entries": [
        { "value": "a lively tavern", "weight": 2, "tags": ["social", "tavern"] },
        { "value": "a skilled smithy", "weight": 1.5, "tags": ["commerce", "crafting"] },
        { "value": "a small shrine", "weight": 1, "sets": { "featureType": "religious" }, "tags": ["religious"] },
        { "value": "an open-air market", "weight": 1.5, "tags": ["commerce", "market"] },
        { "value": "a central well", "weight": 1, "sets": { "featureType": "infrastructure" }, "tags": ["infrastructure"] },
        { "value": "a grain mill", "weight": 0.5, "tags": ["industry", "food"] },
        { "value": "**multiple features:** {{2*unique*again|\\" and \\"}}", "weight": 0.5, "tags": ["meta", "multiple"] }
      ]
    },
    {
      "id": "sizeBasedFeatures",
      "name": "Size-Appropriate Features",
      "type": "simple",
      "hidden": true,
      "resultType": "description",
      "tags": ["settlement", "fortification", "internal"],
      "entries": [
        { "value": "surrounded by a wooden palisade", "tags": ["defense", "wall"] },
        { "value": "patrolled by a town guard", "tags": ["defense", "guards"] }
      ]
    }
  ],
  "templates": [
    {
      "id": "townDescription",
      "name": "Town Description",
      "resultType": "description",
      "tags": ["settlement", "description", "main"],
      "pattern": "A **{{townSize}}** called {{names.townName}} with approximately _{{math:@size.population + $populationModifier}} residents_ and {{@size.buildingCount}} buildings. Notable features include {{$featureCount*unique*features|\\" and \\"}}."
    }
  ],
  "conditionals": [
    {
      "when": "@size.size == 'medium'",
      "action": "append",
      "value": " The town is {{sizeBasedFeatures}}.",
      "tags": ["settlement", "medium-size"]
    }
  ]
}
\`\`\`

**Sample Output:**
> A **bustling town** called Millbrook with approximately *807 residents* and 21 buildings. Notable features include an open-air market and a lively tavern and a skilled smithy. The town is surrounded by a wooden palisade.

**Result metadata:**
\`\`\`json
{
  "text": "A **bustling town** called Millbrook...",
  "resultType": "description"
}
\`\`\`

---

## 14. Processing Order

### 14.1 Engine Instantiation (File Loading)

\`\`\`
1.  PARSE primary JSON file
2.  VALIDATE JSON structure (schema validation)
3.  EXTRACT metadata
    3a. Read maxRecursionDepth (default: 50)
    3b. Read maxExplodingDice (default: 100)
    3c. Read maxInheritanceDepth (default: 5)
    3d. Read uniqueOverflowBehavior (default: "stop")
    
4.  PROCESS imports (in declaration order)
    FOR each import:
        4a. Resolve path (relative/absolute/URL)
        4b. Load and parse imported file
        4c. Recursively process that file's imports (depth-first)
        4d. CHECK for circular imports  ERROR if detected
        4e. Register imported content under alias
    END FOR
    
5.  LOAD static variables into global scope
    FOR each file (imports first, then primary):
        5a. Read "variables" object
        5b. CHECK for duplicate variable names  ERROR if collision
        5c. Store values literally (no resolution at load time)
    END FOR
    
6.  BUILD table registry
    FOR each file:
        6a. Register all tables by id
        6b. Register with namespace prefix
        6c. Register with import alias prefix (if imported)
    END FOR
    
7.  RESOLVE inheritance chains
    FOR each table with "extends":
        7a. Build ancestor chain (child  parent  grandparent  ...)
        7b. CHECK depth against maxInheritanceDepth  ERROR if exceeded
        7c. CHECK for circular inheritance  ERROR if detected
        7d. CHECK all ancestors exist  ERROR with specific missing table
        7e. CHECK all overriding entries have explicit IDs  ERROR if not
        7f. PRE-COMPUTE merged entries (optional optimization):
            - Start with oldest ancestor's entries
            - Apply each descendant's entries in order
            - For matching IDs: merge properties (child overrides parent)
            - For new IDs: add to pool
            - Deep-merge defaultSets at each level
    END FOR
    
8.  VALIDATE references
    FOR each table, template, conditional:
        8a. Parse all {{tableId}} references
        8b. CHECK each referenced table exists  ERROR if not
        8c. CHECK each {{$variable}} exists in static scope  WARN if not
    END FOR
    
9.  REGISTER templates and conditionals
    9a. Index templates by id
    9b. Index conditionals for pattern matching
    
10. ENGINE READY
\`\`\`

### 14.2 Generation (Per-Request)

\`\`\`
1.  INITIALIZE generation context
    1a. Create empty placeholder context (@)
    1b. Create empty shared variable scope
    1c. Initialize recursion depth counter = 0
    1d. Initialize used-entry tracking (for unique constraints)
    
2.  EVALUATE shared block (if present in entry-point file)
    FOR each shared variable (in declaration order):
        2a. CHECK if variable name exists in static scope  ERROR if shadows
        2b. CHECK if variable name already in shared scope  ERROR if duplicate
        2c. PARSE the value expression
        2d. RESOLVE all {{...}} expressions within the value (including {{math:...}})
        2e. CHECK for forward references to undeclared shared  ERROR
        2f. STORE result in shared scope (integer for math/dice, string otherwise)
    END FOR
    
3.  RESOLVE entry point
    IF template requested:
         GO TO step 5 (Template Evaluation)
    IF table requested:
         GO TO step 4 (Table Roll)
    
4.  TABLE ROLL
    4a. RESOLVE inheritance (if extends)
        - Get pre-computed merged entries, OR
        - Compute merge on-demand using ancestor chain
    4b. BUILD effective entry pool
        - Include all entries with weight > 0
        - Apply unique constraints if applicable
    4c. CHECK pool not empty  handle per uniqueOverflowBehavior
    4d. CALCULATE total weight of pool
    4e. GENERATE random number [0, totalWeight)
    4f. SELECT entry based on weight distribution
    4g. PROCESS entry sets
        - Deep-merge: ancestor defaultSets  table defaultSets  entry sets
        - Store in placeholder context under @
    4h. DETERMINE resultType
        - Use entry.resultType if defined
        - Else use table.resultType if defined
        - Else undefined
    4i. PROCESS entry value  GO TO step 6 (Expression Resolution)
    4j. RETURN resolved value + resultType + assets
    
5.  TEMPLATE EVALUATION
    5a. GET template pattern string
    5b. DETERMINE resultType (from template.resultType, overrides all)
    5c. PROCESS pattern  GO TO step 6 (Expression Resolution)
    5d. RETURN resolved pattern + resultType
    
6.  EXPRESSION RESOLUTION (for any string containing {{...}})
    6a. PARSE string for {{...}} blocks (left-to-right)
    FOR each {{...}} block:
        6b. IDENTIFY expression type:
            
            {{again}} or {{N*again}} or {{N*unique*again}}:
                - CHECK this is within an entry value  ERROR if not
                - Mark current entry as excluded
                - Roll on current table N times (or dice result times)
                - Apply unique constraint if specified
                - Join results with separator (default ", ")
                
            {{dice:XdY...}}:
                - Parse dice notation
                - Roll dice
                - Apply modifiers (kH, kL, !, +, -, *)
                - Return integer result
                
            {{math:expression}}:
                - PARSE expression for components:
                  * Literals: integers (positive or negative)
                  * Variables: $varName  resolve from shared/static scope
                  * Placeholders: @placeholder.property  resolve from context
                  * Inline dice: dice:XdY...  roll and substitute result
                  * Operators: +, -, *, /
                  * Grouping: ( )
                - EVALUATE expression with standard precedence:
                  1. Parentheses (innermost first)
                  2. * and / (left to right)
                  3. + and - (left to right)
                - HANDLE errors:
                  * Division by zero  0 with warning
                  * Non-numeric coercion  0 with warning
                - Return integer result (round toward zero)
                
            {{$variableName}}:
                - CHECK shared scope first
                - THEN check static variable scope
                - IF in conditional when-clause and not found  treat as false
                - ELSE if not found  ERROR: undefined variable
                - Return value
                
            {{@placeholder.property}}:
                - Lookup in placeholder context
                - Return value or empty string if not set
                
            {{$var*tableId}} or {{$var*unique*tableId}}:
                - Resolve $var to integer (round down if needed)
                - If value  0  return empty string
                - Roll on table that many times
                - Apply unique constraint if specified
                - Join with separator
                
            {{N*tableId}} or {{N*unique*tableId}}:
                - Resolve N (literal or dice result)
                - Roll on table N times
                - Apply unique constraint if specified
                - Join with separator
                - INCREMENT recursion depth  CHECK against max
                
            {{tableId}} (simple reference):
                - Roll once on table  GO TO step 4
                - INCREMENT recursion depth  CHECK against max
                
            {{tableId#instanceName}}:
                - Roll on table
                - Store result under instance name for conditionals
                - Return result
                
        6c. SUBSTITUTE resolved value into string
    END FOR
    6d. RETURN fully resolved string
    
7.  CONDITIONAL EVALUATION (after primary generation)
    FOR each conditional (in declaration order):
        7a. EVALUATE when-clause:
            - Resolve all variable/placeholder references
            - Undefined variables in when-clause  treat as false
            - Apply comparison operators
            - Apply logical operators (&&, ||, !)
            - RESULT: boolean
        7b. IF when-clause is true:
            SWITCH action:
                "append":  Append value to current output
                "prepend": Prepend value to current output
                "replace": Replace target with value
                "setVariable": 
                    - Evaluate value expression
                    - Store in shared scope
            END SWITCH
            - RESOLVE value using step 6 if contains {{...}}
    END FOR
    
8.  FINALIZE OUTPUT
    8a. COMPILE final resolved string
    8b. ATTACH resultType (from entry/table/template hierarchy)
    8c. ATTACH assets (from selected entry, if any)
    8d. OPTIONALLY attach generation metadata
    8e. RETURN generation result
\`\`\`

### 14.3 Context Cleanup

\`\`\`
1.  DISCARD generation context
    1a. Clear placeholder context
    1b. Clear shared variable scope
    1c. Clear recursion tracking
    1d. Clear unique-entry tracking
    
2.  RETAIN
    2a. Static variable scope (persists for engine lifetime)
    2b. Table registry (persists for engine lifetime)
    2c. Pre-computed inheritance merges (persists for engine lifetime)
    
3.  READY for next generation request
\`\`\`

---

## 15. Validation Rules

Implementations must enforce these validation rules.

### 15.1 Identifier Rules

| Identifier Type | Rules |
|-----------------|-------|
| Table ID | Required. Unique within namespace. **Must not contain periods (\`.\`)**. Alphanumeric plus underscore. Cannot start with a digit. |
| Entry ID | Optional. If provided, must be unique within table. Alphanumeric plus underscore. **Required for inheritance overrides.** |
| Variable Name | Alphanumeric plus underscore. Cannot start with a digit. Unique across all loaded files. |
| Shared Variable Name | Alphanumeric plus underscore. Cannot start with a digit. Cannot shadow static variables. |
| Namespace | Dot-separated segments. Each segment alphanumeric plus underscore. |
| Import Alias | Required for imports. Unique within file. Alphanumeric plus underscore. Cannot start with a digit. **Must not contain periods (\`.\`)**. |

### 15.2 Auto-Generated ID Format

When entry \`id\` is omitted:
- Format: \`{tableId}{NNN}\` where \`NNN\` is zero-padded ordinal (001-999)
- First entry: \`{tableId}001\`, second: \`{tableId}002\`, etc.
- Maximum 999 entries per table for auto-ID (entries beyond 999 require explicit IDs)
- Auto-IDs are generated at parse time and remain stable for that file version
- **Auto-IDs cannot be used for inheritance overrides**

### 15.3 Reserved Words

The following cannot be used as table IDs, variable names, import aliases, or entry IDs:

\`dice\`, \`unique\`, \`again\`, \`true\`, \`false\`, \`null\`, \`and\`, \`or\`, \`not\`, \`contains\`, \`matches\`, \`shared\`, \`math\`

### 15.4 Weight and Range Validation

**Weight:**
- Must be a non-negative number (\`0\` or greater)
- Decimals are permitted
- Negative values are invalid and must produce a validation error
- A weight of \`0\` is valid but disables the entry from random selection

**Range:**
- Must be a two-element array of integers
- First element must be less than or equal to second element
- Both elements must be non-negative
- An entry cannot have both \`weight\` and \`range\` properties
- Range is converted to weight using formula: \`weight = (range[1] - range[0]) + 1\`

### 15.5 Reference Validation

- All \`tableId\` references must resolve to an existing table (local, imported via alias, or namespaced)
- All \`extends\` references must resolve to an existing table of the same type
- All import \`path\` values must resolve to accessible files
- All import \`alias\` values must be unique within the file
- Circular inheritance must be detected and rejected
- Circular imports must be detected and rejected
- Static variable references (\`$name\`) should warn if undefined at parse time
- Shared variable forward references must error at generation time
- \`{{again}}\` is only valid within entry \`value\` fields, not in templates

### 15.6 Math Expression Validation

Math expressions (\`{{math:...}}\`) must be validated for:

- **Balanced parentheses:** Every \`(\` must have a matching \`)\`
- **Valid operators:** Only \`+\`, \`-\`, \`*\`, \`/\` are permitted between operands
- **Valid operands:** Integers, \`$variable\`, \`@placeholder.property\`, or \`dice:XdY...\`
- **No empty expressions:** \`{{math:}}\` is invalid
- **No consecutive operators:** \`{{math:$a + + $b}}\` is invalid (except unary minus for negative literals)

**Runtime validation:**
- Division by zero returns \`0\` with a warning
- Non-numeric values coerce to \`0\` with a warning
- Variables and placeholders must resolve to values (unresolved  error or \`0\` depending on context)

### 15.7 Inheritance Validation

- Inheritance depth must not exceed \`maxInheritanceDepth\`
- All entries being overridden must have explicit IDs in both parent and child
- Circular inheritance chains must be detected and rejected at load time
- Missing ancestor tables must produce clear error messages identifying the missing table
- Type mismatch (extending a composite from a simple) must be rejected

### 15.8 Circular Reference Detection

The engine must detect and reject:

- **Import cycles:** File A imports File B, which imports File A
- **Inheritance cycles:** Table A extends Table B, which extends Table A
- **Template cycles:** Template A references Template B, which references Template A
- **Entry value cycles:** Entry value contains reference that eventually references itself
- **Shared variable cycles:** Shared variable A references shared variable B which references A

Detection should occur at load time (for imports, inheritance, templates) or generation start (for shared variables). The error must identify the cycle path.

**Note:** \`{{again}}\` is explicitly protected from infinite loops by automatically excluding the triggering entry.

### 15.9 Dice Notation Validation

Dice expressions must match the pattern:

\`\`\`
dice:(\\d+)d(\\d+)(kl?\\d+)?(!)?([+\\-*]\\d+)?
\`\`\`

Invalid dice notation must produce a parse error with the invalid expression highlighted.

### 15.10 Schema Validation Summary

| Field | Type | Constraints |
|-------|------|-------------|
| \`metadata.name\` | string | Required, non-empty |
| \`metadata.namespace\` | string | Required, valid namespace format |
| \`metadata.version\` | string | Required, semver format recommended |
| \`metadata.specVersion\` | string | Required, must be \`"1.0"\` |
| \`metadata.maxRecursionDepth\` | integer | Optional, default \`50\`, minimum \`1\` |
| \`metadata.maxExplodingDice\` | integer | Optional, default \`100\`, minimum \`1\` |
| \`metadata.maxInheritanceDepth\` | integer | Optional, default \`5\`, minimum \`1\` |
| \`metadata.source\` | object | Optional |
| \`metadata.tags\` | string[] | Optional |
| \`import.path\` | string | Required |
| \`import.alias\` | string | Required, unique within file |
| \`table.id\` | string | Required, no periods, unique in namespace |
| \`table.type\` | string | Required, one of: \`simple\`, \`composite\`, \`collection\` |
| \`table.resultType\` | string | Optional, case-insensitive |
| \`table.source\` | object | Optional |
| \`table.defaultSets\` | object | Optional |
| \`table.tags\` | string[] | Optional |
| \`entry.id\` | string | Optional (required for inheritance), unique within table |
| \`entry.value\` | string | Required |
| \`entry.weight\` | number | Optional, default \`1\`, must be >= \`0\` |
| \`entry.range\` | [int, int] | Optional, mutually exclusive with weight |
| \`entry.resultType\` | string | Optional, case-insensitive |
| \`entry.tags\` | string[] | Optional |
| \`entry.assets\` | object | Optional |
| \`source.weight\` | number | Optional, default \`1\`, must be >= \`0\` |
| \`template.resultType\` | string | Optional, case-insensitive |
| \`template.tags\` | string[] | Optional |
| \`conditional.tags\` | string[] | Optional |
| \`shared.*\` | string | Values must be valid expressions |
| \`variables.*\` | string | Static values, resolved at load time |

---

## 16. Error Handling

Implementations should handle errors gracefully with clear messages.

### 16.1 Error Categories

| Error Type | Cause | Recommended Behavior |
|------------|-------|----------------------|
| \`VALIDATION_ERROR\` | Invalid JSON structure or field values | Reject file at load time |
| \`IMPORT_ERROR\` | Cannot load imported file | Reject file at load time |
| \`IMPORT_CYCLE\` | Circular import chain detected | Reject file at load time |
| \`INHERITANCE_ERROR\` | Missing ancestor, cycle, or depth exceeded | Reject file at load time |
| \`INHERITANCE_ID_ERROR\` | Override attempted on entry without explicit ID | Reject file at load time |
| \`REFERENCE_ERROR\` | Unknown table, variable, or placeholder | Return error marker or throw |
| \`CIRCULAR_REFERENCE\` | Detected cycle in templates or shared variables | Reject or return error marker |
| \`RECURSION_LIMIT\` | Exceeded \`maxRecursionDepth\` | Return partial result with error marker |
| \`PARSE_ERROR\` | Malformed template syntax | Return error marker with position |
| \`UNIQUE_OVERFLOW\` | More unique selections than entries | Follow \`uniqueOverflowBehavior\` setting |
| \`INVALID_AGAIN\` | \`{{again}}\` used outside of entry value | Parse error |
| \`INVALID_RANGE\` | Range array malformed or invalid | Reject file at load time |
| \`WEIGHT_RANGE_CONFLICT\` | Entry has both weight and range | Reject file at load time |
| \`SHARED_FORWARD_REF\` | Shared variable references undeclared shared | Error at generation start |
| \`SHARED_SHADOW\` | Shared variable name matches static variable | Error at generation start |
| \`MATH_SYNTAX_ERROR\` | Malformed math expression (unbalanced parens, invalid operator) | Return error marker with position |
| \`DIVISION_BY_ZERO\` | Division by zero in math expression | Return 0 with warning |
| \`COERCION_FAILURE\` | Non-numeric string in math expression | Coerce to 0 with warning |

### 16.2 Error Message Format

Error messages should include:
- Error type
- Location (file, import alias, table ID, entry ID, template ID, line/column if applicable)
- Description of the problem
- Suggestion for resolution (when possible)

**Examples:**

\`\`\`
INHERITANCE_ERROR in table 'epicTreasure':
  Inheritance depth (6) exceeds maxInheritanceDepth (5).
  Chain: epicTreasure  largeTreasure  mediumTreasure  
         smallTreasure  baseTreasure  coreLoot
  Consider flattening the inheritance chain or increasing maxInheritanceDepth.
\`\`\`

\`\`\`
INHERITANCE_ID_ERROR in table 'customMonsters':
  Cannot override entry at position 3 in parent table 'baseMonsters'.
  The parent entry does not have an explicit ID.
  Add an 'id' property to the parent entry to enable override.
\`\`\`

\`\`\`
SHARED_FORWARD_REF in shared block:
  Variable 'totalCount' references '$bonusCount' which is declared later.
  Move 'bonusCount' declaration before 'totalCount'.
\`\`\`

\`\`\`
MATH_SYNTAX_ERROR in template 'damageCalculation':
  Unbalanced parentheses in expression: {{math:($base + $bonus * 2}}
  Position: column 34
  Add closing parenthesis to complete the expression.
\`\`\`

### 16.3 Graceful Degradation

When possible, the engine should:
- Continue processing other valid content
- Mark errors inline rather than failing entirely
- Log warnings for non-critical issues (e.g., unused variables, division by zero)
- Provide partial results with error markers for recoverable errors

---

## Appendix A: Quick Reference Card

\`\`\`
TABLE REFERENCES
  {{tableName}}              Roll once on table
  {{alias.tableName}}        Roll on table from imported file
  {{namespace.tableName}}    Roll on namespaced table
  {{3*tableName}}            Roll 3 times
  {{3*unique*tableName}}     Roll 3 times, no duplicates
  {{3*tableName|", "}}       Roll 3 times, custom separator
  {{tableName#instance}}     Named instance
  {{$count*tableName}}       Use shared variable as count

ROLL AGAIN (in entry values only)
  {{again}}                  Roll once more on this table
  {{2*again}}                Roll 2 more times
  {{2*unique*again}}         Roll 2 more times, no duplicates
  {{dice:1d4*again}}         Roll 1d4 times on this table

DICE
  {{dice:3d6}}               Roll 3d6
  {{dice:4d6k3}}             Roll 4d6, keep highest 3
  {{dice:2d6kl1}}            Roll 2d6, keep lowest 1
  {{dice:1d6!}}              Exploding d6
  {{dice:2d8+5}}             Roll 2d8, add 5
  {{dice:1d4*tableName}}     Roll 1d4, roll that many times on table

MATH EXPRESSIONS
  {{math:$a + $b}}           Add two variables
  {{math:$a - $b}}           Subtract variables
  {{math:$a * $b}}           Multiply variables
  {{math:$a / $b}}           Integer division (rounds toward zero)
  {{math:($a + $b) * 2}}     Grouping with parentheses
  {{math:dice:2d6 + $mod}}   Inline dice with variable
  {{math:@hd * 4 + 10}}      Using placeholders

VARIABLES & PLACEHOLDERS
  {{$variableName}}          Static or shared variable
  {{$alias.variableName}}    Variable from imported file
  {{@placeholder.property}}  Placeholder property

ROLL CAPTURE
  {{3*table >> $var}}        Capture 3 rolls into $var
  {{3*unique*table >> $var}} Capture 3 unique rolls
  {{$n*table >> $var}}       Variable count capture
  {{dice:1d4*table >> $var}} Dice count capture
  {{3*table >> $var|silent}} Capture without output
  {{3*table >> $var|", "}}   Capture with custom separator

CAPTURE ACCESS
  {{$var}}                   All values (comma-separated)
  {{$var|"; "}}              All values (custom separator)
  {{$var.count}}             Number of items captured
  {{$var[0]}}                First item's value
  {{$var[-1]}}               Last item's value
  {{$var[0].@prop}}          First item's @prop from sets

PROPERTY AGGREGATION
  {{collect:$var.value}}     All values
  {{collect:$var.@prop}}     All @prop values
  {{collect:$var.@prop|", "}} Custom separator
  {{collect:$var.@prop|unique}} Deduplicated
  {{collect:$var.@prop|unique|", "}} Deduplicated with separator

SHARED BLOCK
  "shared": {
    "count": "{{dice:2d4}}",
    "total": "{{math:$count + 5}}",
    "damage": "{{math:dice:1d8 + $strMod}}"
  }

IMPORTS
  imports: [
    { "path": "./file.json", "alias": "name" }
  ]
  {{name.tableId}}           Reference imported table

RANGES (in entries)
  "range": [1, 50]           Equivalent to weight 50
  "range": [51, 75]          Equivalent to weight 25
  "range": [99, 100]         Equivalent to weight 2

RESULTTYPE
  "resultType": "creature"   On tables, entries, templates
  Case-insensitive, user-definable
  Entry  Table  Composite (precedence)
  Template resultType overrides all

INHERITANCE
  "extends": "parentTable"   Single-level
  "extends": "alias.table"   Cross-file
  Multi-level supported (ABC)
  Property-level merging
  Null removes inherited property

ASSETS (in entries)
  "assets": {
    "image": "path/to/image.png",
    "token": "path/to/token.webp"
  }

WEIGHT SPECIAL VALUES
  "weight": 0                Disables entry (won't be rolled)
  "weight": 1                Default weight

TAGS (on any object)
  "tags": ["category", "subcategory", "keyword"]

MARKDOWN (in value fields)
  **bold**                   Bold text
  *italic* or _italic_       Italic text
  \`code\`                     Inline code
  [text](url)                Hyperlink

ESCAPING
  \\{{                        Literal {{
  \\}}                        Literal }}
  \\"                         Literal " in separator
\`\`\`

---

## Appendix B: TTRPG Math Expression Patterns

Common math expression patterns for tabletop RPG generators:

### Character Statistics

\`\`\`json
"shared": {
  "strength": "{{dice:4d6k3}}",
  "strMod": "{{math:($strength - 10) / 2}}",
  "proficiencyBonus": "{{math:($level - 1) / 4 + 2}}",
  "attackBonus": "{{math:$proficiencyBonus + $strMod}}"
}
\`\`\`

### Combat Calculations

\`\`\`json
"shared": {
  "baseDamage": "{{math:dice:1d8 + $strMod}}",
  "critDamage": "{{math:dice:2d8 + $strMod}}",
  "armorClass": "{{math:10 + $dexMod + @armor.bonus}}",
  "initiative": "{{math:dice:1d20 + $dexMod}}"
}
\`\`\`

### Encounter Scaling

\`\`\`json
"shared": {
  "partyLevel": "{{$inputLevel}}",
  "enemyCount": "{{math:$partySize + dice:1d4 - 2}}",
  "bossHP": "{{math:$partyLevel * 15 + dice:4d10}}",
  "xpReward": "{{math:$enemyCount * 50 * $partyLevel}}"
}
\`\`\`

### Treasure and Economy

\`\`\`json
"shared": {
  "baseGold": "{{math:dice:2d6 * 10}}",
  "levelMultiplier": "{{math:$dungeonLevel * $dungeonLevel}}",
  "totalGold": "{{math:$baseGold * $levelMultiplier}}",
  "gemValue": "{{math:dice:1d6 * 50 + 25}}"
}
\`\`\`

### Template Usage Examples

\`\`\`json
{
  "pattern": "The {{creatureType}} attacks with a {{math:dice:1d20 + $attackBonus}} to hit, dealing {{math:dice:$damageDice + $strMod}} damage on a hit."
}
\`\`\`

\`\`\`json
{
  "pattern": "You find a chest containing {{math:$baseGold + dice:3d6}} gold pieces and {{$gemCount*gems|\\", \\"}}."
}
\`\`\`

### Entry Value Examples

\`\`\`json
{
  "value": "A band of {{math:dice:2d4 + $partySize}} goblins",
  "sets": {
    "count": "{{math:dice:2d4 + $partySize}}",
    "totalXP": "{{math:@count * 50}}"
  }
}
\`\`\`

---

## Appendix C: Default ResultTypes

The following resultType values are recommended as a common vocabulary:

\`\`\`
creature    - Monsters, animals, beings
npc         - Non-player characters  
faction     - Organizations, groups
item        - Equipment, objects
loot        - Treasure packages
location    - Places, areas
encounter   - Combat/exploration events
event       - Occurrences, happenings
hook        - Plot hooks, adventure seeds
complication - Obstacles, problems
name        - Names for anything
trait       - Characteristics, features
effect      - Spell effects, conditions
environment - Weather, terrain
ability     - Skills, powers
description - Narrative text
rumor       - Information, lore
dialogue    - Speech, conversation
statistic   - Numbers, metrics
number      - Pure numeric output
currency    - Money, values
time        - Durations, timestamps
weather     - Weather conditions
\`\`\`

Custom types should use namespace conventions: \`"publisher/category/type"\`

---

## License

This specification is released under the **CC0 1.0 Universal** (Public Domain) license.

You are free to:
- **Use**  Copy, modify, and distribute this specification
- **Build**  Create your own implementations, tools, or engines
- **Share**  Include this specification in your own projects

No attribution required, though it's always appreciated.

[View Full License](https://creativecommons.org/publicdomain/zero/1.0/)

### Content Ownership Notice

**Important:** While this specification format is public domain, the creative content within files conforming to this specification remains the intellectual property of its respective copyright holders.

- The open nature of this format **does not** grant any license to use, copy, or distribute the content contained within individual table files
- Publishers and content creators retain full copyright over their tables, entries, descriptions, and other creative works
- Always check the \`source\` and \`rights\` metadata fields to understand usage permissions for specific content
- When in doubt, contact the content's copyright holder for licensing information

This specification provides standardized fields (\`rights\`, \`source.copyright\`, \`permissions\`) specifically to help content creators communicate their ownership and terms clearly.

---

## Source Code

The Rolldeo application is open source under the **Apache License 2.0**.

- **GitHub Repository**: [https://github.com/RolldeoDev/rolldeo](https://github.com/RolldeoDev/rolldeo)
- **Report Issues**: [https://github.com/RolldeoDev/rolldeo/issues](https://github.com/RolldeoDev/rolldeo/issues)
- **Official Website**: [https://rolldeo.com](https://rolldeo.com)

---
`,Uc=`{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rolldeo.com/schemas/random-table-spec-v1.0.json",
  "title": "Random Table JSON Template Specification v1.0",
  "description": "A JSON schema for configurable random table generators supporting weighted tables, composite tables, template-based text generation, mathematical operations, conditional logic, multi-level table inheritance, external file references, and generation-time shared variables.",
  "type": "object",
  "required": ["metadata", "tables"],
  "additionalProperties": false,
  "properties": {
    "metadata": {
      "$ref": "#/$defs/metadata"
    },
    "imports": {
      "type": "array",
      "description": "Array of external file imports for modular content organization. Imports are resolved before any table or template processing.",
      "items": {
        "$ref": "#/$defs/import"
      }
    },
    "tables": {
      "type": "array",
      "description": "Array of table definitions. At least one table is required. Tables can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/table"
      }
    },
    "templates": {
      "type": "array",
      "description": "Array of text generation pattern templates that combine multiple tables and operations using {{...}} syntax.",
      "items": {
        "$ref": "#/$defs/template"
      }
    },
    "conditionals": {
      "type": "array",
      "description": "Array of conditional logic rules applied after primary generation based on rolled results.",
      "items": {
        "$ref": "#/$defs/conditional"
      }
    },
    "variables": {
      "$ref": "#/$defs/variables"
    },
    "shared": {
      "$ref": "#/$defs/shared"
    }
  },
  "$defs": {
    "metadata": {
      "type": "object",
      "title": "Metadata Object",
      "description": "Contains information about the file itself and global engine configuration.",
      "required": ["name", "namespace", "version", "specVersion"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the table collection",
          "minLength": 1,
          "examples": ["Fantasy Treasure Generator", "Sci-Fi Name Generator"]
        },
        "namespace": {
          "type": "string",
          "description": "Unique namespace to prevent collisions. Use dot-separated segments (e.g., 'fantasy.core', 'scifi.names').",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*(\\\\.[a-zA-Z_][a-zA-Z0-9_]*)*$",
          "minLength": 1,
          "examples": ["fantasy.core", "publisher.product.module"]
        },
        "version": {
          "type": "string",
          "description": "Semantic version number for this file (e.g., '1.0.0', '2.1.0-beta').",
          "pattern": "^\\\\d+\\\\.\\\\d+\\\\.\\\\d+(-[a-zA-Z0-9.]+)?(\\\\+[a-zA-Z0-9.]+)?$",
          "examples": ["1.0.0", "2.1.0", "1.0.0-beta.1"]
        },
        "specVersion": {
          "type": "string",
          "description": "The specification version this file conforms to. Must be '1.0' for this schema.",
          "const": "1.0"
        },
        "author": {
          "type": "string",
          "description": "Author name or organization"
        },
        "description": {
          "type": "string",
          "description": "Markdown-formatted description of the collection"
        },
        "instructions": {
          "type": "string",
          "description": "Usage instructions in Markdown format"
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        },
        "created": {
          "type": "string",
          "description": "ISO 8601 date-time string for creation date",
          "format": "date-time"
        },
        "updated": {
          "type": "string",
          "description": "ISO 8601 date-time string for last update",
          "format": "date-time"
        },
        "source": {
          "$ref": "#/$defs/metadataSource"
        },
        "rights": {
          "$ref": "#/$defs/rights"
        },
        "maxRecursionDepth": {
          "type": "integer",
          "description": "Maximum depth for nested table/template references. Prevents infinite loops from circular references.",
          "default": 50,
          "minimum": 1,
          "examples": [25, 50, 100]
        },
        "maxExplodingDice": {
          "type": "integer",
          "description": "Maximum number of times exploding dice (!) can re-roll.",
          "default": 100,
          "minimum": 1,
          "examples": [50, 100]
        },
        "maxInheritanceDepth": {
          "type": "integer",
          "description": "Maximum depth for inheritance chains. For example, C extends B extends A has depth 2.",
          "default": 5,
          "minimum": 1,
          "examples": [3, 5, 10]
        },
        "uniqueOverflowBehavior": {
          "type": "string",
          "description": "Behavior when unique selection requests more entries than available.",
          "enum": ["stop", "cycle", "error"],
          "default": "stop"
        }
      }
    },
    "metadataSource": {
      "type": "object",
      "title": "Source Attribution",
      "description": "Optional properties for tracking content origin and licensing at the file level.",
      "additionalProperties": false,
      "properties": {
        "book": {
          "type": "string",
          "description": "Name of the source book or product"
        },
        "publisher": {
          "type": "string",
          "description": "Publisher name"
        },
        "isbn": {
          "type": "string",
          "description": "ISBN if applicable"
        },
        "url": {
          "type": "string",
          "description": "URL to product page or official source",
          "format": "uri"
        },
        "license": {
          "type": "string",
          "description": "License under which content is used",
          "examples": ["OGL 1.0a", "CC BY 4.0", "Original", "CC BY-NC-SA 4.0"]
        },
        "copyright": {
          "oneOf": [
            {
              "type": "string",
              "description": "Simple copyright notice string"
            },
            {
              "$ref": "#/$defs/structuredCopyright"
            }
          ],
          "description": "Copyright notice (string or structured object)"
        }
      }
    },
    "structuredCopyright": {
      "type": "object",
      "title": "Structured Copyright",
      "description": "Detailed copyright information for publishers",
      "additionalProperties": false,
      "properties": {
        "year": {
          "type": "string",
          "description": "Copyright year or range (e.g., '2024' or '2020-2024')",
          "pattern": "^\\\\d{4}(-\\\\d{4})?$",
          "examples": ["2024", "2020-2024"]
        },
        "holder": {
          "type": "string",
          "description": "Legal entity name that holds the copyright"
        },
        "notice": {
          "type": "string",
          "description": "Full copyright notice text",
          "examples": [" 2024 Example Games LLC. All rights reserved."]
        }
      }
    },
    "rights": {
      "type": "object",
      "title": "Rights & Permissions",
      "description": "Intellectual property rights, usage permissions, and legal contact information for content protection.",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "description": "Content classification type",
          "enum": ["proprietary", "open-content", "fan-content", "licensed"]
        },
        "official": {
          "type": "boolean",
          "description": "Whether this is official publisher content (vs. fan-made)",
          "default": false
        },
        "productIdentity": {
          "type": "array",
          "description": "List of Product Identity elements (names, characters, logos, etc.) that are protected",
          "items": {
            "type": "string"
          },
          "examples": [["Kobold Press", "Tome of Beasts", "All creature names and descriptions"]]
        },
        "trademarks": {
          "type": "array",
          "description": "Trademark notices for protected marks",
          "items": {
            "type": "string"
          },
          "examples": [["Kobold Press", "Tome of Beasts"]]
        },
        "compatibilityNotice": {
          "type": "string",
          "description": "Required compatibility/non-affiliation statement",
          "examples": ["Compatible with 5th Edition fantasy roleplaying. Not affiliated with or endorsed by Wizards of the Coast."]
        },
        "permissions": {
          "$ref": "#/$defs/rightsPermissions"
        },
        "contact": {
          "$ref": "#/$defs/rightsContact"
        },
        "termsUrl": {
          "type": "string",
          "description": "URL to full terms of use",
          "format": "uri"
        },
        "communityPolicyUrl": {
          "type": "string",
          "description": "URL to fan content/community use policy",
          "format": "uri"
        }
      }
    },
    "rightsPermissions": {
      "type": "object",
      "title": "Usage Permissions",
      "description": "Explicit permissions for how the content may be used",
      "additionalProperties": false,
      "properties": {
        "commercialUse": {
          "type": "boolean",
          "description": "Whether content may be used in commercial products",
          "default": false
        },
        "modification": {
          "type": "boolean",
          "description": "Whether content may be modified or adapted",
          "default": false
        },
        "redistribution": {
          "type": "boolean",
          "description": "Whether content may be redistributed",
          "default": false
        },
        "derivativeWorks": {
          "type": "boolean",
          "description": "Whether derivative works may be created",
          "default": false
        },
        "attributionRequired": {
          "type": "boolean",
          "description": "Whether attribution is required when using content",
          "default": true
        }
      }
    },
    "rightsContact": {
      "type": "object",
      "title": "Legal Contact Information",
      "description": "Contact information for licensing and legal inquiries",
      "additionalProperties": false,
      "properties": {
        "licensing": {
          "type": "string",
          "description": "Email or URL for licensing inquiries"
        },
        "dmca": {
          "type": "string",
          "description": "DMCA agent contact for takedown requests"
        },
        "general": {
          "type": "string",
          "description": "General legal contact"
        }
      }
    },
    "tableSource": {
      "type": "object",
      "title": "Table Source Attribution",
      "description": "Source attribution for a specific table, useful when combining content from multiple sources.",
      "additionalProperties": false,
      "properties": {
        "book": {
          "type": "string",
          "description": "Source book name"
        },
        "page": {
          "oneOf": [
            {
              "type": "integer",
              "description": "Single page number",
              "minimum": 1
            },
            {
              "type": "string",
              "description": "Page range",
              "pattern": "^\\\\d+(-\\\\d+)?$",
              "examples": ["47", "47-49", "123-125"]
            }
          ],
          "description": "Page number or range (e.g., 47 or '47-49')"
        },
        "section": {
          "type": "string",
          "description": "Section or chapter name"
        },
        "url": {
          "type": "string",
          "description": "Direct URL to source if available online",
          "format": "uri"
        },
        "license": {
          "type": "string",
          "description": "License for this specific table (overrides file-level license)"
        }
      }
    },
    "import": {
      "type": "object",
      "title": "Import Definition",
      "description": "References tables, templates, and variables from an external JSON file.",
      "required": ["path", "alias"],
      "additionalProperties": false,
      "properties": {
        "path": {
          "type": "string",
          "description": "Relative path (e.g., './creatures/undead.json'), parent directory path (e.g., '../shared/core.json'), or absolute URL (e.g., 'https://rolldeo.com/tables.json').",
          "minLength": 1,
          "examples": ["./creatures/undead.json", "../shared/core.json", "https://rolldeo.com/tables/v2/core.json"]
        },
        "alias": {
          "type": "string",
          "description": "Local alias for referencing imported content. Must be unique within the file. Cannot contain periods.",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*$",
          "minLength": 1,
          "examples": ["undead", "core", "loot"]
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of what this import provides"
        }
      }
    },
    "table": {
      "type": "object",
      "title": "Table Definition",
      "description": "A table definition. Can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).",
      "required": ["id", "name", "type"],
      "allOf": [
        {
          "properties": {
            "id": {
              "type": "string",
              "description": "Unique identifier for the table within the namespace. Cannot contain periods. Cannot be a reserved word.",
              "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$",
              "minLength": 1
            },
            "name": {
              "type": "string",
              "description": "Display name for the table",
              "minLength": 1
            },
            "type": {
              "type": "string",
              "description": "Table type: 'simple' for weighted entries, 'composite' for selecting from source tables, 'collection' for merging multiple tables.",
              "enum": ["simple", "composite", "collection"]
            },
            "description": {
              "type": "string",
              "description": "Markdown-formatted description"
            },
            "tags": {
              "$ref": "#/$defs/tagsArray"
            },
            "hidden": {
              "type": "boolean",
              "description": "If true, table won't appear in user-facing lists. Still fully accessible to templates and other tables.",
              "default": false
            },
            "extends": {
              "type": "string",
              "description": "ID of table to inherit from. Supports 'alias.tableId' for imported tables and 'namespace.tableId' for namespaced tables.",
              "minLength": 1,
              "examples": ["baseTreasure", "loot.baseTreasure", "fantasy.core.weapons"]
            },
            "defaultSets": {
              "$ref": "#/$defs/setsObject"
            },
            "resultType": {
              "$ref": "#/$defs/resultType"
            },
            "source": {
              "$ref": "#/$defs/tableSource"
            },
            "shared": {
              "$ref": "#/$defs/tableShared"
            }
          }
        },
        {
          "oneOf": [
            {
              "$ref": "#/$defs/simpleTable"
            },
            {
              "$ref": "#/$defs/compositeTable"
            },
            {
              "$ref": "#/$defs/collectionTable"
            }
          ]
        }
      ]
    },
    "simpleTable": {
      "type": "object",
      "title": "Simple Table",
      "description": "A basic table with weighted entries. The most common table type, optimized for ease of data entry.",
      "properties": {
        "type": {
          "const": "simple"
        },
        "entries": {
          "type": "array",
          "description": "Array of table entries with values and optional weights/ranges",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/entry"
          }
        }
      },
      "required": ["entries"]
    },
    "compositeTable": {
      "type": "object",
      "title": "Composite Table",
      "description": "Selects which source table to roll on using weighted probability, then rolls once on that table. Use when you want weighted selection between different tables.",
      "properties": {
        "type": {
          "const": "composite"
        },
        "sources": {
          "type": "array",
          "description": "Array of source tables to select from, with optional weights",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/compositeSource"
          }
        }
      },
      "required": ["sources"]
    },
    "collectionTable": {
      "type": "object",
      "title": "Collection Table",
      "description": "Merges all entries from multiple tables into a single unified pool. Use for combining related tables (e.g., 'Swords' + 'Axes' + 'Polearms' = 'All Melee Weapons').",
      "properties": {
        "type": {
          "const": "collection"
        },
        "collections": {
          "type": "array",
          "description": "Array of table IDs to combine. Supports 'alias.tableId' and 'namespace.tableId' syntax.",
          "minItems": 1,
          "items": {
            "type": "string",
            "description": "Table ID reference to include in the collection",
            "minLength": 1
          },
          "examples": [["swords", "axes", "polearms"], ["core.commonItems", "expansion.rareItems"]]
        }
      },
      "required": ["collections"]
    },
    "compositeSource": {
      "type": "object",
      "title": "Composite Source",
      "description": "A source table reference for composite tables with optional weight.",
      "required": ["tableId"],
      "additionalProperties": false,
      "properties": {
        "tableId": {
          "type": "string",
          "description": "ID of the table to pull from. Supports 'alias.tableId' and 'namespace.tableId' syntax.",
          "minLength": 1
        },
        "weight": {
          "type": "number",
          "description": "Relative weight for selecting this source. Weight of 0 disables this source from random selection.",
          "minimum": 0,
          "default": 1
        }
      }
    },
    "entry": {
      "type": "object",
      "title": "Table Entry",
      "description": "A single entry in a simple table. Normally requires a value. When overriding an inherited entry (via 'id' in an extended table), 'value' becomes optional - only 'id' plus the properties you want to change are needed. Can optionally specify weight OR range (not both). If neither specified, defaults to weight: 1.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique ID within this table. Required for inheritance overrides. If omitted, auto-generated as {tableId}{NNN}.",
          "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
        },
        "value": {
          "type": "string",
          "description": "The output text. Supports Markdown formatting and {{...}} template syntax for nested evaluation, dice rolls, math expressions, table references, roll captures ({{N*table >> $var}}), capture access ({{$var[0].@prop}}), and property aggregation ({{collect:$var.@prop}})."
        },
        "weight": {
          "type": "number",
          "description": "Relative probability weight. Must be 0 or greater. Weight of 0 disables the entry from random selection but preserves it for inheritance. Mutually exclusive with 'range'.",
          "minimum": 0,
          "default": 1
        },
        "range": {
          "$ref": "#/$defs/rangeArray"
        },
        "description": {
          "type": "string",
          "description": "Markdown description for documentation/UI purposes"
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        },
        "sets": {
          "$ref": "#/$defs/setsObject"
        },
        "assets": {
          "$ref": "#/$defs/assetsObject"
        },
        "resultType": {
          "$ref": "#/$defs/resultType"
        }
      },
      "additionalProperties": false,
      "allOf": [
        {
          "not": {
            "required": ["weight", "range"]
          }
        },
        {
          "if": {
            "not": {
              "required": ["id"]
            }
          },
          "then": {
            "required": ["value"]
          }
        }
      ]
    },
    "rangeArray": {
      "type": "array",
      "title": "Range",
      "description": "A two-element inclusive range for dice-roll style tables (e.g., [1, 5] means numbers 1-5, weight = 5). Mutually exclusive with 'weight'. Converted to weight as: weight = (range[1] - range[0]) + 1.",
      "items": {
        "type": "integer",
        "minimum": 0
      },
      "minItems": 2,
      "maxItems": 2,
      "examples": [[1, 50], [51, 75], [76, 100]]
    },
    "setsObject": {
      "type": "object",
      "title": "Sets (Placeholder Values)",
      "description": "Key-value pairs that set placeholder values (accessible via @key syntax) when this entry is selected. Merges with and overrides table's defaultSets.",
      "additionalProperties": {
        "type": "string"
      },
      "examples": [{"size": "large", "terrain": "forest"}, {"hp": "{{dice:4d8+12}}", "ac": "16"}]
    },
    "assetsObject": {
      "type": "object",
      "title": "Assets",
      "description": "Key-value pairs mapping asset types to file paths or URLs. Common keys: image, token, thumbnail, portrait, sound, music, handout, statblock.",
      "additionalProperties": {
        "type": "string",
        "description": "Asset path: relative path, absolute URL, or data URI"
      },
      "examples": [{"image": "images/goblin.png", "token": "tokens/goblin.webp"}, {"portrait": "https://cdn.rolldeo.com/orc.jpg"}]
    },
    "template": {
      "type": "object",
      "title": "Template Definition",
      "description": "A text generation pattern that combines multiple tables and operations using {{...}} syntax.",
      "required": ["id", "name", "pattern"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the template. Cannot be a reserved word.",
          "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "description": "Display name for the template",
          "minLength": 1
        },
        "pattern": {
          "type": "string",
          "description": "Template pattern string. Use {{tableId}} for table rolls, {{dice:XdY}} for dice, {{$var}} for variables, {{@placeholder}} for placeholders, {{math:expr}} for math, {{N*table >> $var}} for captures, {{$var[0].@prop}} for capture access, {{collect:$var.@prop}} for aggregation. Supports Markdown."
        },
        "description": {
          "type": "string",
          "description": "Markdown description of the template"
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        },
        "resultType": {
          "$ref": "#/$defs/resultType"
        },
        "shared": {
          "$ref": "#/$defs/tableShared"
        }
      }
    },
    "conditional": {
      "type": "object",
      "title": "Conditional Rule",
      "description": "Applies logic based on rolled results. Evaluated after primary generation.",
      "required": ["when", "action", "value"],
      "additionalProperties": false,
      "properties": {
        "when": {
          "type": "string",
          "description": "Condition expression. Supports comparisons (==, !=, >, <, >=, <=, contains, matches) and logical operators (&&, ||, !). Use @placeholder.property for entry values, $variable for variables.",
          "minLength": 1,
          "examples": ["@size.value == 'large'", "@race.value == 'elf' && @class.value == 'mage'", "$setting != 'modern'", "@name.value contains 'the'"]
        },
        "action": {
          "type": "string",
          "description": "Action to perform when condition is true: append (add to end), prepend (add to start), replace (replace target), setVariable (set a variable).",
          "enum": ["append", "prepend", "replace", "setVariable"]
        },
        "target": {
          "type": "string",
          "description": "Required for 'replace' and 'setVariable' actions. For 'append'/'prepend', defaults to current output.",
          "minLength": 1
        },
        "value": {
          "type": "string",
          "description": "Value to apply. May contain template syntax ({{...}}) for dynamic content. Supports Markdown."
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "action": { "enum": ["replace", "setVariable"] }
            },
            "required": ["action"]
          },
          "then": {
            "required": ["target"]
          }
        }
      ]
    },
    "variables": {
      "type": "object",
      "title": "Static Variables",
      "description": "Static global variables loaded at engine initialization. Referenced using {{$variableName}}. Evaluated once at file load time. For generation-time values, use 'shared' instead.",
      "additionalProperties": {
        "type": "string"
      },
      "propertyNames": {
        "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
      },
      "examples": [{"defaultSeparator": ", ", "setting": "fantasy", "campaignYear": "1247"}]
    },
    "shared": {
      "type": "object",
      "title": "Shared Variables (Generation-Time)",
      "description": "Generation-time variables evaluated once at the start of each generation and remain constant throughout that run. Referenced using {{$variableName}}. Evaluated in declaration order. Cannot forward-reference other shared variables.",
      "additionalProperties": {
        "type": "string"
      },
      "propertyNames": {
        "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
      },
      "examples": [{"monsterCount": "{{dice:2d4}}", "leaderType": "{{eliteMonsterTable}}", "totalThreat": "{{math:$monsterCount + 5}}"}]
    },
    "tableShared": {
      "type": "object",
      "title": "Table/Template Shared Variables",
      "description": "Table or template-level shared variables evaluated lazily when rolled. Cannot shadow document-level shared or static variables. Propagate to nested table references. Referenced using {{$variableName}}.",
      "additionalProperties": {
        "type": "string"
      },
      "propertyNames": {
        "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
      },
      "examples": [{"threatLevel": "{{dice:1d6}}", "monsterCount": "{{math:$threatLevel + 2}}"}]
    },
    "resultType": {
      "type": "string",
      "title": "Result Type",
      "description": "Classification of output type. Case-insensitive, user-definable. Common values: creature, npc, faction, item, loot, location, encounter, event, hook, complication, name, trait, effect, environment, ability, description, rumor, dialogue, statistic, number, currency, time, weather. Custom types should use namespace conventions (e.g., 'publisher/category/type').",
      "examples": ["creature", "item", "location", "encounter", "description", "starships/cruiser", "wh40k/regiment"]
    },
    "tagsArray": {
      "type": "array",
      "title": "Tags",
      "description": "Tags for categorization, organization, filtering, and searching",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "default": [],
      "examples": [["fantasy", "treasure", "loot"], ["encounters", "combat", "wilderness"]]
    }
  }
}
`,qF=[{id:"quickstart",title:"Getting Started",description:"Learn the basics of random tables in under 10 minutes. Create your first table, add weights, roll dice, and more.",icon:Of,path:"/guide/quickstart",color:"mint",tags:["Beginner","10 min read"]},{id:"using-rolldeo",title:"Using Rolldeo",description:"Master the Library, Roller, and Editor. Learn how to import collections, roll on tables, and create your own.",icon:Af,path:"/guide/using-rolldeo",color:"lavender",tags:["App Guide","Features"]},{id:"spec",title:"Full Specification",description:"Complete reference for the Random Table JSON Spec v1.0. Covers all features including imports, inheritance, and conditionals.",icon:Tf,path:"/guide/spec",color:"amber",tags:["Reference","Advanced"]},{id:"schema",title:"Schema Reference",description:"JSON Schema documentation for validation. Use this to validate your table files and understand the exact structure.",icon:_f,path:"/guide/schema",color:"rose",tags:["JSON Schema","Validation"]}],VF={mint:{icon:"bg-[hsl(var(--mint)/0.15)] text-[hsl(var(--mint))]",border:"hover:border-[hsl(var(--mint)/0.3)]",tag:"bg-[hsl(var(--mint)/0.1)] text-[hsl(var(--mint))]"},lavender:{icon:"bg-[hsl(var(--lavender)/0.15)] text-[hsl(var(--lavender))]",border:"hover:border-[hsl(var(--lavender)/0.3)]",tag:"bg-[hsl(var(--lavender)/0.1)] text-[hsl(var(--lavender))]"},amber:{icon:"bg-[hsl(var(--amber)/0.15)] text-[hsl(var(--amber))]",border:"hover:border-[hsl(var(--amber)/0.3)]",tag:"bg-[hsl(var(--amber)/0.1)] text-[hsl(var(--amber))]"},rose:{icon:"bg-[hsl(var(--rose)/0.15)] text-[hsl(var(--rose))]",border:"hover:border-[hsl(var(--rose)/0.3)]",tag:"bg-[hsl(var(--rose)/0.1)] text-[hsl(var(--rose))]"}};function WF(){const[e,t]=N.useState(!1),[n,r]=N.useState(!1);return u.jsxs("div",{className:"space-y-12",children:[u.jsxs("section",{className:"text-center space-y-6 py-8",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium animate-fade-in",children:[u.jsx(Pr,{className:"h-4 w-4"}),"Documentation"]}),u.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight animate-slide-up",children:["Rolldeo",u.jsx("br",{}),u.jsx("span",{className:"gradient-text",children:"Guide"})]}),u.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto animate-slide-up stagger-1",children:"Everything you need to create, roll, and share random tables. From quick tutorials to complete specifications."})]}),u.jsx("section",{className:"grid gap-6 md:grid-cols-2",children:qF.map((i,s)=>{const o=i.icon,c=VF[i.color];return u.jsx(Ln,{to:i.path,className:`
                group card-elevated p-6 border border-border/50
                ${c.border}
                transition-all duration-300 hover:shadow-lg
                animate-slide-up
              `,style:{animationDelay:`${(s+2)*.1}s`},children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`p-3 rounded-xl ${c.icon}`,children:u.jsx(o,{className:"h-6 w-6"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("h2",{className:"text-xl font-bold group-hover:text-primary transition-colors",children:i.title}),u.jsx(Bv,{className:"h-4 w-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all text-primary"})]}),u.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed mb-4",children:i.description}),u.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map(d=>u.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${c.tag}`,children:d},d))})]})]})},i.id)})}),u.jsx("section",{className:"card-elevated border border-border/50 p-8 animate-slide-up stagger-4",children:u.jsxs("div",{className:"text-center space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(Gc,{className:"h-6 w-6 text-primary"}),u.jsx("h2",{className:"text-xl font-bold",children:"Open Source & Free to Use"})]}),u.jsxs("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:["Rolldeo is open source. The Random Table Specification and JSON Schema are released under ",u.jsx("strong",{className:"text-foreground",children:"CC0 (Public Domain)"}),"  use them freely to build your own tools, engines, or table collections without any restrictions."]}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-muted/50 border border-border/50",children:[u.jsx("span",{className:"text-sm text-muted-foreground",children:"Application:"}),u.jsx("a",{href:"https://www.apache.org/licenses/LICENSE-2.0",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-primary hover:underline",children:"Apache 2.0"})]}),u.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-muted/50 border border-border/50",children:[u.jsx("span",{className:"text-sm text-muted-foreground",children:"Spec & Schema:"}),u.jsx("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-primary hover:underline",children:"CC0 Public Domain"})]})]}),u.jsx("div",{className:"pt-2",children:u.jsxs("a",{href:"https://github.com/RolldeoDev/rolldeo",target:"_blank",rel:"noopener noreferrer",className:"btn-primary inline-flex items-center gap-2",children:[u.jsx(Df,{className:"h-4 w-4"}),"View on GitHub"]})})]})}),u.jsx("section",{className:"card-elevated border border-border/50 p-8 animate-slide-up stagger-5",children:u.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[u.jsxs("div",{className:"text-center md:text-left",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx(zo,{className:"h-5 w-5 text-primary"}),u.jsx("h2",{className:"text-xl font-bold",children:"Download Specification Files"})]}),u.jsx("p",{className:"text-muted-foreground",children:"Get the complete spec markdown and JSON schema for offline use or integration with your tools."})]}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[u.jsx(Bc,{filename:"randomTableSpecV1.md",content:gf,mimeType:"text/markdown",label:"Spec (Markdown)"}),u.jsx(Bc,{filename:"random-table-spec-v1.0.json",content:Uc,mimeType:"application/json",label:"Schema (JSON)",variant:"primary"})]})]})}),u.jsx("section",{className:"card-elevated border border-border/50 p-8 animate-slide-up stagger-6",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[u.jsx(If,{className:"h-5 w-5 text-primary"}),u.jsx("h2",{className:"text-xl font-bold",children:"Download Pre-built Examples"})]}),u.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Complete example packs demonstrating every feature in the specification. Import them into Rolldeo, study the code, and remix them for your own projects."})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:[u.jsx("div",{className:"p-4 bg-amber-500/5 border-b border-border/50",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-500",children:u.jsx(HN,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Fantasy Toolkit"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Dungeon crawling adventures"})]})]}),u.jsx("a",{href:"/guide/examples/fantasyExample.zip",download:!0,className:"btn-primary text-sm px-4 py-2",children:"Download"})]})}),u.jsxs("div",{className:"p-4",children:[u.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full",children:[u.jsx(Fr,{className:`h-4 w-4 transition-transform ${e?"rotate-180":""}`}),e?"Hide contents":"Show contents"]}),e&&u.jsxs("div",{className:"mt-4 space-y-3 text-sm animate-fade-in",children:[u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Monsters.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Creatures from common beasts to legendary dragons. Demonstrates weights, sets, defaultSets, collection/composite types, hidden helper tables, and templates."})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Treasure.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Loot including coins, gems, weapons, and magic items. Demonstrates dice expressions, shared variables, table references, gem quality modifiers, and cursed items."})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Environments.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Dungeons, taverns, wilderness, and urban locations. Demonstrates multiple rolls, unique selections, custom separators, and location atmosphere."})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Encounters.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Combat, social, and quest encounters. Demonstrates imports, composite tables, NPC generation, quest hooks, and encounter twists."})]})]})]})]}),u.jsxs("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:[u.jsx("div",{className:"p-4 bg-cyan-500/5 border-b border-border/50",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-cyan-500/10 text-cyan-500",children:u.jsx(Of,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold",children:"Sci-Fi Worldbuilding"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Space exploration system"})]})]}),u.jsx("a",{href:"/guide/examples/sciFiExample.zip",download:!0,className:"btn-primary text-sm px-4 py-2",children:"Download"})]})}),u.jsxs("div",{className:"p-4",children:[u.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full",children:[u.jsx(Fr,{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`}),n?"Hide contents":"Show contents"]}),n&&u.jsxs("div",{className:"mt-4 space-y-3 text-sm animate-fade-in",children:[u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Aliens.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Alien species with physical and cultural traits. Demonstrates conditionals, template-level shared variables, capture syntax, and species naming."})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Ships.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Starships from fighters to battleships. Demonstrates ranges (d100 style), extends inheritance, ship systems, and fleet generation with captures."})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Planets.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Planets with environments, resources, and hazards. Demonstrates imports, star classification, colonization status, native life, and multi-world comparison."})]}),u.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[u.jsx("div",{className:"font-medium mb-1",children:"Encounters.json"}),u.jsx("p",{className:"text-muted-foreground text-xs",children:"Space encounters combining all modules. Demonstrates multiple imports, complex captures, combat/peaceful variants, and full scenario generation."})]})]})]})]})]})]})}),u.jsxs("section",{className:"grid gap-4 md:grid-cols-3 animate-slide-up",children:[u.jsx(Fp,{icon:u.jsx(ma,{className:"h-5 w-5"}),title:"Start Simple",description:"Begin with the Quickstart guide to learn the basics before diving into advanced features."}),u.jsx(Fp,{icon:u.jsx(Tf,{className:"h-5 w-5"}),title:"Use the Editor",description:"The built-in editor validates your tables in real-time against the JSON schema."}),u.jsx(Fp,{icon:u.jsx(_f,{className:"h-5 w-5"}),title:"Schema Validation",description:"Import the JSON schema into your IDE for autocomplete and validation while editing."})]})]})}function Fp({icon:e,title:t,description:n}){return u.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/30",children:[u.jsx("div",{className:"flex items-center gap-2 mb-2 text-primary",children:e}),u.jsx("h3",{className:"font-semibold mb-1",children:t}),u.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}const GF=`# Random Table Quickstart Guide

Get up and running with random tables in under 10 minutes.

---

## Your First Table

Every random table file needs two things: **metadata** (information about the file) and at least one **table**. Here's the simplest possible example:

\`\`\`json
{
  "metadata": {
    "name": "My First Table",
    "namespace": "myproject.demo",
    "version": "1.0.0",
    "specVersion": "1.0"
  },
  "tables": [
    {
      "id": "loot",
      "name": "What's in the Chest?",
      "type": "simple",
      "entries": [
        { "value": "Gold coins" },
        { "value": "A rusty dagger" },
        { "value": "Empty!" },
        { "value": "A rolled-up map" }
      ]
    }
  ]
}
\`\`\`

Save this as a \`.json\` file and load it into your roller engine. Each entry has an equal chance of being selected (25% each).

---

## Adding Weights

Want some results to appear more often? Add \`weight\` to your entries:

\`\`\`json
"entries": [
  { "value": "Gold coins", "weight": 4 },
  { "value": "A rusty dagger", "weight": 2 },
  { "value": "Empty!", "weight": 3 },
  { "value": "A rolled-up map", "weight": 1 }
]
\`\`\`

Higher weight = more likely. In this example:
- Gold coins: 40% (4 out of 10)
- Empty: 30% (3 out of 10)  
- Rusty dagger: 20% (2 out of 10)
- Map: 10% (1 out of 10)

**Tip:** If you don't specify a weight, it defaults to 1.

---

## Rolling Dice

Use \`{{dice:XdY}}\` to roll dice inside your results:

\`\`\`json
{ "value": "{{dice:2d6*10}} gold pieces" }
\`\`\`

This rolls 2d6 and multiplies by 10, giving you results like "70 gold pieces" or "120 gold pieces".

**Common dice patterns:**

| Syntax | What it does |
|--------|--------------|
| \`{{dice:1d20}}\` | Roll a d20 |
| \`{{dice:3d6}}\` | Roll 3d6 |
| \`{{dice:2d6+5}}\` | Roll 2d6, add 5 |
| \`{{dice:4d6k3}}\` | Roll 4d6, keep highest 3 |
| \`{{dice:1d6!}}\` | Exploding d6 (6s roll again) |

---

## Referencing Other Tables

Tables can reference each other using \`{{tableName}}\`:

\`\`\`json
{
  "tables": [
    {
      "id": "treasure",
      "name": "Treasure",
      "type": "simple",
      "entries": [
        { "value": "A {{weaponType}} worth {{dice:2d6*10}} gold" },
        { "value": "{{dice:3d6}} gems" },
        { "value": "Nothing valuable" }
      ]
    },
    {
      "id": "weaponType",
      "name": "Weapon Type",
      "type": "simple",
      "entries": [
        { "value": "sword" },
        { "value": "axe" },
        { "value": "spear" }
      ]
    }
  ]
}
\`\`\`

Rolling on "treasure" might give you: "A sword worth 80 gold"

---

## Multiple Rolls

Need multiple results from the same table? Use \`{{N*tableName}}\`:

\`\`\`json
{ "value": "You find: {{3*itemTable}}" }
\`\`\`

This rolls three times on \`itemTable\`, giving results like: "You find: gold ring, silver bracelet, emerald"

**Want unique results?** Add \`unique\`:

\`\`\`json
{ "value": "{{3*unique*itemTable}}" }
\`\`\`

This ensures no duplicates.

**Custom separators:**

\`\`\`json
{ "value": "{{3*itemTable|\\" and \\"}}" }
\`\`\`

Result: "gold ring and silver bracelet and emerald"

---

## Using Ranges (d100 Tables)

If you're converting traditional tables with ranges like "01-30: Goblin", use the \`range\` property:

\`\`\`json
"entries": [
  { "value": "Goblin", "range": [1, 30] },
  { "value": "Orc", "range": [31, 60] },
  { "value": "Troll", "range": [61, 85] },
  { "value": "Dragon!", "range": [86, 100] }
]
\`\`\`

The engine automatically converts ranges to weightsyou don't need to do any math.

---

## Templates: Combining Multiple Tables

Templates let you create complex outputs that pull from multiple tables:

\`\`\`json
{
  "templates": [
    {
      "id": "npcDescription",
      "name": "NPC Generator",
      "pattern": "A {{npcRace}} {{npcOccupation}} with {{npcTrait}} and {{npcTrait}}."
    }
  ]
}
\`\`\`

Result: "A dwarf blacksmith with a loud laugh and a missing finger."

---

## Variables: Reusing Values

Sometimes you need the same random value to appear multiple times. Use the \`shared\` block:

\`\`\`json
{
  "shared": {
    "creatureCount": "{{dice:2d4}}"
  },
  "templates": [
    {
      "id": "encounter",
      "pattern": "You see {{$creatureCount}} goblins. If you fight, you'll face all {{$creatureCount}} of them."
    }
  ]
}
\`\`\`

The \`$\` prefix references a variable. The dice are rolled once when generation starts, then that value is used everywhere.

---

## Quick Reference

| What you want | Syntax |
|---------------|--------|
| Roll on a table | \`{{tableName}}\` |
| Roll dice | \`{{dice:3d6}}\` |
| Roll multiple times | \`{{3*tableName}}\` |
| Unique results | \`{{3*unique*tableName}}\` |
| Use a variable | \`{{$variableName}}\` |
| Custom separator | \`{{3*tableName\\|" and "}}\` |

---

## What's Next?

This guide covers the basics. The full specification includes:

- **Imports:** Split tables across multiple files
- **Inheritance:** Create table variations without duplicating entries
- **Conditionals:** Add logic based on rolled results
- **Placeholders:** Pass data between tables dynamically
- **ResultTypes:** Classify outputs for different handling
- **Assets:** Attach images, tokens, and sounds to entries

See the [Random Table JSON Template Specification v1.0](./randomTableSpecV1.md) for complete documentation.

---

## Complete Starter Example

Here's a ready-to-use file you can copy and modify:

\`\`\`json
{
  "metadata": {
    "name": "Dungeon Loot Tables",
    "namespace": "myproject.loot",
    "version": "1.0.0",
    "specVersion": "1.0",
    "author": "Your Name",
    "description": "Random loot for dungeon exploration"
  },
  "shared": {
    "lootQuality": "{{qualityRoll}}"
  },
  "tables": [
    {
      "id": "qualityRoll",
      "name": "Loot Quality",
      "type": "simple",
      "entries": [
        { "value": "poor", "weight": 3 },
        { "value": "average", "weight": 5 },
        { "value": "good", "weight": 2 }
      ]
    },
    {
      "id": "chestContents",
      "name": "Chest Contents",
      "type": "simple",
      "entries": [
        { "value": "{{dice:2d6*10}} gold pieces", "weight": 4 },
        { "value": "A {{$lootQuality}} {{weaponType}}", "weight": 3 },
        { "value": "{{dice:1d4}} healing potions", "weight": 2 },
        { "value": "**Mimic!** It attacks!", "weight": 1 }
      ]
    },
    {
      "id": "weaponType",
      "name": "Weapon Type",
      "type": "simple",
      "entries": [
        { "value": "longsword" },
        { "value": "battle axe" },
        { "value": "shortbow" },
        { "value": "warhammer" },
        { "value": "dagger" }
      ]
    }
  ],
  "templates": [
    {
      "id": "lootHaul",
      "name": "Complete Loot Description",
      "pattern": "Inside the chest you find: {{2*unique*chestContents|\\" and \\"}}."
    }
  ]
}
\`\`\`

**Sample outputs:**
- "Inside the chest you find: 80 gold pieces and A good longsword."
- "Inside the chest you find: 2 healing potions and **Mimic!** It attacks!."
- "Inside the chest you find: A average battle axe and 50 gold pieces."

---

## Example Downloads

Ready to see these concepts in action? Download these comprehensive example packs:

### [fantasyExample.zip](./examples/fantasyExample.zip)

A complete high fantasy toolkit for dungeon crawling adventures:

| File | Description | Features Demonstrated |
|------|-------------|----------------------|
| **Monsters.json** | Creatures from common beasts to legendary dragons | Weights, \`sets\`, \`defaultSets\`, \`type: collection\`, \`type: composite\`, hidden helper tables, templates |
| **Treasure.json** | Loot including coins, gems, weapons, and magic items | Dice expressions, shared variables, table references, gem quality modifiers, cursed items |
| **Environments.json** | Dungeons, taverns, wilderness, and urban locations | Multiple rolls, unique selections, custom separators, location atmosphere |
| **Encounters.json** | Combat, social, and quest encounters | Imports, composite tables, NPC generation, quest hooks, encounter twists |

### [sciFiExample.zip](./examples/sciFiExample.zip)

A comprehensive sci-fi worldbuilding system for space exploration:

| File | Description | Features Demonstrated |
|------|-------------|----------------------|
| **Aliens.json** | Alien species with physical and cultural traits | \`conditionals\`, template-level shared variables, capture syntax, species naming |
| **Ships.json** | Starships from fighters to battleships | Ranges (d100 style), \`extends\` inheritance, ship systems, fleet generation with captures |
| **Planets.json** | Planets with environments, resources, and hazards | Imports, star classification, colonization status, native life, multi-world comparison |
| **Encounters.json** | Space encounters combining all modules | Multiple imports, complex captures, combat/peaceful variants, full scenario generation |

These examples demonstrate **every feature** in the specification, from basic tables to advanced captures and conditionals. Import them, study them, remix them!

---

## Happy Creating!

Whether you're crafting treasure hoards for a fantasy dungeon, generating alien species for a space opera, or building something entirely your own - Rolldeo is here to help bring randomness and creativity to your games.

Download the examples, experiment with the syntax, and let the dice decide the rest. May your rolls be ever in your favor!
`;function KF(){return u.jsx(ou,{title:"Getting Started",content:GF})}function YF(){return u.jsxs(ou,{title:"Full Specification",content:gf,children:[u.jsx("div",{className:"mt-12 p-6 rounded-xl bg-muted/30 border border-border/30",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-1",children:"Download Specification"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Get the complete specification for offline reference."})]}),u.jsx(Bc,{filename:"randomTableSpecV1.md",content:gf,mimeType:"text/markdown",label:"Download Markdown",variant:"primary"})]})}),u.jsx("div",{className:"mt-8 p-6 rounded-xl bg-primary/5 border border-primary/20",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(Gc,{className:"h-5 w-5 text-primary mt-0.5"}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-1",children:"CC0 Public Domain"}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["This specification is released under"," ",u.jsx("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"CC0 1.0 Universal"}),". Use it freely to build your own tools and engines."]})]})]}),u.jsxs("a",{href:"https://github.com/RolldeoDev/rolldeo",target:"_blank",rel:"noopener noreferrer",className:"btn-secondary flex items-center gap-2 whitespace-nowrap",children:[u.jsx(Df,{className:"h-4 w-4"}),"View Source"]})]})})]})}const Ec=JSON.parse(Uc),ZF=`
# JSON Schema Reference

The Random Table JSON Schema provides validation for your table collection files. Use this schema with your IDE or validation tools to ensure your files are correctly formatted.

## Schema Info

- **$schema**: ${Ec.$schema}
- **$id**: ${Ec.$id||"N/A"}
- **Title**: ${Ec.title||"Random Table Collection"}

## Using the Schema

### In VS Code

Add this to your \`.vscode/settings.json\`:

\`\`\`json
{
  "json.schemas": [
    {
      "fileMatch": ["*.table.json", "*-tables.json"],
      "url": "https://rolldeo.com/schemas/random-table-spec-v1.0.json"
    }
  ]
}
\`\`\`

### In JSON Files

Add a \`$schema\` property to your JSON files:

\`\`\`json
{
  "$schema": "https://rolldeo.com/schemas/random-table-spec-v1.0.json",
  "metadata": { ... },
  "tables": [ ... ]
}
\`\`\`

## Schema Structure

The schema defines the following top-level properties:

| Property | Required | Description |
|----------|----------|-------------|
| \`metadata\` | Yes | Collection metadata (name, namespace, version) |
| \`imports\` | No | External file imports |
| \`tables\` | Yes | Array of table definitions |
| \`templates\` | No | Template patterns for complex outputs |
| \`conditionals\` | No | Post-processing conditionals |
| \`variables\` | No | Static variables |
| \`shared\` | No | Lazy-evaluated shared variables |

---

## Full Schema

Below is the complete JSON Schema. Click "Copy" to copy it to your clipboard or download for local use.

## License

This schema is released under **CC0 1.0 Universal** (Public Domain). You are free to use, modify, and distribute it without restriction.
`;function XF(){const[e,t]=N.useState(!1),n=async()=>{await navigator.clipboard.writeText(Uc),t(!0),setTimeout(()=>t(!1),2e3)};return u.jsxs(ou,{title:"Schema Reference",content:ZF,children:[u.jsxs("div",{className:"mt-8",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[u.jsx(_o,{className:"h-4 w-4"}),u.jsx("span",{children:"random-table-spec-v1.0.json"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:n,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg border border-border hover:bg-accent transition-colors",children:e?u.jsxs(u.Fragment,{children:[u.jsx(ga,{className:"h-4 w-4 text-green-500"}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(Vv,{className:"h-4 w-4"}),"Copy"]})}),u.jsx(Bc,{filename:"random-table-spec-v1.0.json",content:Uc,mimeType:"application/json",label:"Download",variant:"primary"})]})]}),u.jsx("div",{className:"relative",children:u.jsx("pre",{className:"overflow-x-auto rounded-lg bg-[#1e1e1e] p-4 text-sm max-h-[600px] overflow-y-auto",children:u.jsx("code",{className:"language-json text-gray-300",children:JSON.stringify(Ec,null,2)})})})]}),u.jsxs("div",{className:"mt-12 p-6 rounded-xl bg-muted/30 border border-border/30",children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Related Resources"}),u.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[u.jsxs(Ln,{to:"/guide/spec",className:"flex items-center gap-3 p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[u.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-500",children:u.jsx(_o,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:"Full Specification"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:"Human-readable documentation"})]})]}),u.jsxs("a",{href:"https://github.com/RolldeoDev/rolldeo",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[u.jsx("div",{className:"p-2 rounded-lg bg-[hsl(var(--mint)/0.1)] text-[hsl(var(--mint))]",children:u.jsx(Df,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:"GitHub Repository"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:"View source code and contribute"})]})]}),u.jsxs("a",{href:"https://json-schema.org/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[u.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:u.jsx(SN,{className:"h-5 w-5"})}),u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:"JSON Schema Docs"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:"Learn more about JSON Schema"})]})]})]})]}),u.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-primary/5 border border-primary/20 flex items-center gap-3",children:[u.jsx(Gc,{className:"h-5 w-5 text-primary flex-shrink-0"}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["This schema is released under"," ",u.jsx("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"CC0 1.0 Universal (Public Domain)"}),". Use it freely in your own projects."]})]})]})}const QF=`# Using Rolldeo

A complete guide to all the features in Rolldeo - your random table companion.

---

## Overview

Rolldeo is a web application for creating, managing, and rolling on random tables. Whether you're a game master generating encounters, a writer seeking inspiration, or a developer building procedural content, Rolldeo provides the tools you need.

### Key Features

- **Library**: Browse, import, and manage your table collections
- **Roller**: Roll on tables with full history and result tracking
- **Editor**: Create and edit collections with real-time validation
- **Offline Support**: Works without an internet connection (PWA)

---

## The Library

The Library is your central hub for managing table collections.

### Browsing Collections

When you open the Library, you'll see all available collections organized into:

- **Built-in Collections**: Pre-loaded example tables to get you started
- **Your Collections**: Tables you've created or imported

Each collection card shows:
- Collection name and description
- Number of tables and templates
- Tags for quick filtering

### Importing Collections

You can import table collections in several ways:

1. **Drag and Drop**: Drop \`.json\` files or \`.zip\` archives directly onto the upload area
2. **Click to Browse**: Click the upload area to select files from your computer
3. **Multiple Files**: Import several collections at once from a zip archive

**Supported formats:**
- Single \`.json\` files following the Random Table Spec
- \`.zip\` archives containing multiple JSON files

### Managing Collections

- **View**: Click a collection to see its tables and templates
- **Edit**: Click the edit button to modify a collection
- **Delete**: Remove collections you no longer need (built-in collections cannot be deleted)
- **Export**: Download any collection as a JSON file

---

## The Roller

The Roller is where you generate random results from your tables.

### Selecting a Table

1. Use the left panel to browse available tables
2. Collections are grouped and expandable
3. Click any table to select it for rolling
4. Templates appear in a separate section

### Rolling

Once you've selected a table:

1. Click the **Roll** button (or press \`Enter\`)
2. The result appears in the main panel
3. Each roll is added to your history

### Understanding Results

Results can include:
- **Plain text**: Simple string results
- **Dice expressions**: Automatically rolled (e.g., "2d6" becomes "7")
- **Nested table references**: Results from other tables
- **Formatted text**: Bold, italic, and other markdown formatting

### Roll History

Your roll history is preserved during your session:

- See all previous results with timestamps
- Results are color-coded by source table
- Click any history item to see full details
- Clear history with the trash button

### Favorites

Mark frequently-used tables as favorites:

1. Click the star icon next to any table
2. Favorites appear at the top of the table list
3. Quickly access your most-used tables

---

## The Editor

Create and modify table collections with the visual editor.

### Creating a New Collection

1. Click **Editor** in the navigation
2. You start with a blank collection template
3. Fill in the metadata (name, namespace, version)
4. Add tables, templates, and more

### Editor Tabs

The editor is organized into tabs:

| Tab | Purpose |
|-----|---------|
| **Metadata** | Collection info and imports |
| **Tables** | Define your random tables |
| **Templates** | Create complex output patterns |
| **Variables** | Set static and shared variables |
| **JSON** | View and edit raw JSON |

### Working with Tables

#### Creating Tables

1. Go to the **Tables** tab
2. Click **Add Table**
3. Choose a table type (Simple is most common)
4. Fill in the table details

#### Table Types

- **Simple**: Basic weighted entries
- **Composite**: Combines entries from multiple sources
- **Collection**: Groups entries from imported files

#### Adding Entries

Each entry can have:
- **Value**: The result text (supports \`{{expressions}}\`)
- **Weight**: How likely this entry is to be selected
- **Range**: Alternative to weight for d100-style tables
- **Description**: Optional notes about the entry
- **Tags**: Categorization labels

#### Drag and Drop

Reorder entries by dragging:
1. Grab the drag handle () on any entry
2. Drag to the new position
3. Release to drop

### Working with Templates

Templates combine multiple tables into complex outputs.

#### Creating Templates

1. Go to the **Templates** tab
2. Click **Add Template**
3. Write your pattern using \`{{tableName}}\` syntax

#### Pattern Syntax

Use these expressions in your patterns:

| Syntax | Description |
|--------|-------------|
| \`{{tableName}}\` | Roll on a table |
| \`{{dice:2d6}}\` | Roll dice |
| \`{{math:1+2}}\` | Calculate math |
| \`{{$variable}}\` | Use a variable |
| \`{{3*tableName}}\` | Roll multiple times |
| \`{{3*table >> $var}}\` | Capture rolls into variable |
| \`{{$var[0]}}\` | Access first captured item |
| \`{{$var[0].@prop}}\` | Access captured item's property |
| \`{{collect:$var.@prop}}\` | Aggregate property from all captured items |

#### Insert Helper

Use the **Insert** dropdown to easily add references:
1. Click the dropdown next to the pattern field
2. Search for tables or templates
3. Click to insert at cursor position

#### Live Preview

The pattern preview shows:
- **Pattern**: Your raw template with syntax highlighting
- **Result**: A sample evaluation (click **Re-roll** to regenerate)

### JSON View

The JSON tab provides direct access to the collection data:

- **Syntax Highlighting**: Color-coded JSON
- **Schema Validation**: Real-time error checking
- **Format**: Auto-formats on paste
- **Sync**: Changes sync with visual editors

### Saving and Exporting

- **Save**: Press \`Ctrl+S\` or click **Save** to store your collection
- **Export**: Download as a \`.json\` file for sharing or backup
- **Unsaved Changes**: A warning appears if you try to leave with unsaved changes

---

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| \`Ctrl+S\` / \`Cmd+S\` | Save (in Editor) |
| \`Enter\` | Roll (in Roller) |
| \`Escape\` | Close dialogs |

---

## Tips & Tricks

### For Game Masters

1. **Create themed sets**: Organize tables by campaign or setting
2. **Use templates**: Build encounter generators that combine multiple tables
3. **Leverage variables**: Keep values consistent across rolls (e.g., enemy count)

### For Developers

1. **Use the JSON schema**: Import it into your IDE for autocomplete
2. **Validate before import**: The editor catches errors in real-time
3. **Export and version**: Download collections regularly for backup

### For Writers

1. **Build prompt generators**: Combine character, setting, and conflict tables
2. **Create name generators**: Use weighted entries for cultural distributions
3. **Chain tables**: Reference one table from another for complex results

---

## Troubleshooting

### Import Errors

If a file fails to import:
- Check that it's valid JSON (use a JSON validator)
- Ensure it follows the Random Table Spec
- Look for missing required fields (metadata, tables)

### Roll Errors

If a roll fails:
- Check for circular references (Table A  Table B  Table A)
- Verify table IDs match exactly (case-sensitive)
- Look for typos in \`{{expressions}}\`

### Editor Issues

If the editor behaves unexpectedly:
- Try switching to JSON view and back
- Check the validation errors panel
- Refresh the page if needed (changes save automatically)

---

## Getting Help

- **Quickstart Guide**: Learn the basics in 10 minutes
- **Full Specification**: Complete reference documentation
- **Schema Reference**: JSON validation schema
- **Report Issues**: [GitHub Issues](https://github.com/RolldeoDev/rolldeo/issues)

---

## Open Source

Rolldeo is open source software:

- **Source Code**: [GitHub Repository](https://github.com/RolldeoDev/rolldeo)
- **Application License**: [Apache 2.0](https://www.apache.org/licenses/LICENSE-2.0)
- **Spec & Schema License**: [CC0 Public Domain](https://creativecommons.org/publicdomain/zero/1.0/)

The Random Table Specification and JSON Schema are released under CC0 (Public Domain)  use them freely to build your own tools, engines, or table collections.

Happy rolling! 
`;function JF(){return u.jsx(ou,{title:"Using Rolldeo",content:QF})}function eL(){const e=an(t=>t.initialize);return N.useEffect(()=>{e()},[e]),N.useEffect(()=>{MS()},[]),null}const tL=Qk([{path:"/",element:u.jsx(BS,{}),children:[{index:!0,element:u.jsx(x_,{})},{path:"library",element:u.jsx(__,{})},{path:"roll",element:u.jsx(Ly,{})},{path:"roll/:collectionId/:tableId",element:u.jsx(Ly,{})},{path:"editor",element:u.jsx(sv,{})},{path:"editor/:collectionId",element:u.jsx(sv,{})},{path:"guide",element:u.jsx(WF,{})},{path:"guide/quickstart",element:u.jsx(KF,{})},{path:"guide/spec",element:u.jsx(YF,{})},{path:"guide/schema",element:u.jsx(XF,{})},{path:"guide/using-rolldeo",element:u.jsx(JF,{})}]}]);SE.createRoot(document.getElementById("root")).render(u.jsx(N.StrictMode,{children:u.jsx(CS,{children:u.jsxs(PS,{children:[u.jsx(eL,{}),u.jsx(oN,{router:tL}),u.jsx(_S,{}),u.jsx(TS,{})]})})}));
