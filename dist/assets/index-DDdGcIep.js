var DC=Object.defineProperty;var jC=(e,t,n)=>t in e?DC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Rn=(e,t,n)=>jC(e,typeof t!="symbol"?t+"":t,n);function ax(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ta(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rp={exports:{}},Do={},Ip={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function AC(){if(sy)return Ct;sy=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function k(M,F,B){this.props=M,this.context=F,this.refs=y,this.updater=B||g}k.prototype.isReactComponent={},k.prototype.setState=function(M,F){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,F,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=k.prototype;function C(M,F,B){this.props=M,this.context=F,this.refs=y,this.updater=B||g}var T=C.prototype=new N;T.constructor=C,x(T,k.prototype),T.isPureReactComponent=!0;var j=Array.isArray,D=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(M,F,B){var le,pe={},de=null,je=null;if(F!=null)for(le in F.ref!==void 0&&(je=F.ref),F.key!==void 0&&(de=""+F.key),F)D.call(F,le)&&!I.hasOwnProperty(le)&&(pe[le]=F[le]);var ye=arguments.length-2;if(ye===1)pe.children=B;else if(1<ye){for(var Te=Array(ye),Ie=0;Ie<ye;Ie++)Te[Ie]=arguments[Ie+2];pe.children=Te}if(M&&M.defaultProps)for(le in ye=M.defaultProps,ye)pe[le]===void 0&&(pe[le]=ye[le]);return{$$typeof:e,type:M,key:de,ref:je,props:pe,_owner:_.current}}function z(M,F){return{$$typeof:e,type:M.type,key:F,ref:M.ref,props:M.props,_owner:M._owner}}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function q(M){var F={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(B){return F[B]})}var $=/\/+/g;function G(M,F){return typeof M=="object"&&M!==null&&M.key!=null?q(""+M.key):F.toString(36)}function E(M,F,B,le,pe){var de=typeof M;(de==="undefined"||de==="boolean")&&(M=null);var je=!1;if(M===null)je=!0;else switch(de){case"string":case"number":je=!0;break;case"object":switch(M.$$typeof){case e:case t:je=!0}}if(je)return je=M,pe=pe(je),M=le===""?"."+G(je,0):le,j(pe)?(B="",M!=null&&(B=M.replace($,"$&/")+"/"),E(pe,F,B,"",function(Ie){return Ie})):pe!=null&&(P(pe)&&(pe=z(pe,B+(!pe.key||je&&je.key===pe.key?"":(""+pe.key).replace($,"$&/")+"/")+M)),F.push(pe)),1;if(je=0,le=le===""?".":le+":",j(M))for(var ye=0;ye<M.length;ye++){de=M[ye];var Te=le+G(de,ye);je+=E(de,F,B,Te,pe)}else if(Te=v(M),typeof Te=="function")for(M=Te.call(M),ye=0;!(de=M.next()).done;)de=de.value,Te=le+G(de,ye++),je+=E(de,F,B,Te,pe);else if(de==="object")throw F=String(M),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return je}function L(M,F,B){if(M==null)return M;var le=[],pe=0;return E(M,le,"","",function(de){return F.call(B,de,pe++)}),le}function Z(M){if(M._status===-1){var F=M._result;F=F(),F.then(function(B){(M._status===0||M._status===-1)&&(M._status=1,M._result=B)},function(B){(M._status===0||M._status===-1)&&(M._status=2,M._result=B)}),M._status===-1&&(M._status=0,M._result=F)}if(M._status===1)return M._result.default;throw M._result}var X={current:null},K={transition:null},ee={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:K,ReactCurrentOwner:_};function U(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:L,forEach:function(M,F,B){L(M,function(){F.apply(this,arguments)},B)},count:function(M){var F=0;return L(M,function(){F++}),F},toArray:function(M){return L(M,function(F){return F})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ct.Component=k,Ct.Fragment=n,Ct.Profiler=a,Ct.PureComponent=C,Ct.StrictMode=r,Ct.Suspense=d,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Ct.act=U,Ct.cloneElement=function(M,F,B){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var le=x({},M.props),pe=M.key,de=M.ref,je=M._owner;if(F!=null){if(F.ref!==void 0&&(de=F.ref,je=_.current),F.key!==void 0&&(pe=""+F.key),M.type&&M.type.defaultProps)var ye=M.type.defaultProps;for(Te in F)D.call(F,Te)&&!I.hasOwnProperty(Te)&&(le[Te]=F[Te]===void 0&&ye!==void 0?ye[Te]:F[Te])}var Te=arguments.length-2;if(Te===1)le.children=B;else if(1<Te){ye=Array(Te);for(var Ie=0;Ie<Te;Ie++)ye[Ie]=arguments[Ie+2];le.children=ye}return{$$typeof:e,type:M.type,key:pe,ref:de,props:le,_owner:je}},Ct.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:i,_context:M},M.Consumer=M},Ct.createElement=R,Ct.createFactory=function(M){var F=R.bind(null,M);return F.type=M,F},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(M){return{$$typeof:c,render:M}},Ct.isValidElement=P,Ct.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:Z}},Ct.memo=function(M,F){return{$$typeof:p,type:M,compare:F===void 0?null:F}},Ct.startTransition=function(M){var F=K.transition;K.transition={};try{M()}finally{K.transition=F}},Ct.unstable_act=U,Ct.useCallback=function(M,F){return X.current.useCallback(M,F)},Ct.useContext=function(M){return X.current.useContext(M)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(M){return X.current.useDeferredValue(M)},Ct.useEffect=function(M,F){return X.current.useEffect(M,F)},Ct.useId=function(){return X.current.useId()},Ct.useImperativeHandle=function(M,F,B){return X.current.useImperativeHandle(M,F,B)},Ct.useInsertionEffect=function(M,F){return X.current.useInsertionEffect(M,F)},Ct.useLayoutEffect=function(M,F){return X.current.useLayoutEffect(M,F)},Ct.useMemo=function(M,F){return X.current.useMemo(M,F)},Ct.useReducer=function(M,F,B){return X.current.useReducer(M,F,B)},Ct.useRef=function(M){return X.current.useRef(M)},Ct.useState=function(M){return X.current.useState(M)},Ct.useSyncExternalStore=function(M,F,B){return X.current.useSyncExternalStore(M,F,B)},Ct.useTransition=function(){return X.current.useTransition()},Ct.version="18.3.1",Ct}var oy;function Rm(){return oy||(oy=1,Ip.exports=AC()),Ip.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function _C(){if(ly)return Do;ly=1;var e=Rm(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(c,d,p){var h,m={},v=null,g=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(g=d.ref);for(h in d)r.call(d,h)&&!i.hasOwnProperty(h)&&(m[h]=d[h]);if(c&&c.defaultProps)for(h in d=c.defaultProps,d)m[h]===void 0&&(m[h]=d[h]);return{$$typeof:t,type:c,key:v,ref:g,props:m,_owner:a.current}}return Do.Fragment=n,Do.jsx=o,Do.jsxs=o,Do}var cy;function RC(){return cy||(cy=1,Rp.exports=_C()),Rp.exports}var s=RC(),w=Rm();const Ot=Ta(w),IC=ax({__proto__:null,default:Ot},[w]);var Ic={},$p={exports:{}},dr={},Mp={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function $C(){return uy||(uy=1,(function(e){function t(K,ee){var U=K.length;K.push(ee);e:for(;0<U;){var M=U-1>>>1,F=K[M];if(0<a(F,ee))K[M]=ee,K[U]=F,U=M;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ee=K[0],U=K.pop();if(U!==ee){K[0]=U;e:for(var M=0,F=K.length,B=F>>>1;M<B;){var le=2*(M+1)-1,pe=K[le],de=le+1,je=K[de];if(0>a(pe,U))de<F&&0>a(je,pe)?(K[M]=je,K[de]=U,M=de):(K[M]=pe,K[le]=U,M=le);else if(de<F&&0>a(je,U))K[M]=je,K[de]=U,M=de;else break e}}return ee}function a(K,ee){var U=K.sortIndex-ee.sortIndex;return U!==0?U:K.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],p=[],h=1,m=null,v=3,g=!1,x=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(K){for(var ee=n(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=K)r(p),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(p)}}function j(K){if(y=!1,T(K),!x)if(n(d)!==null)x=!0,Z(D);else{var ee=n(p);ee!==null&&X(j,ee.startTime-K)}}function D(K,ee){x=!1,y&&(y=!1,N(R),R=-1),g=!0;var U=v;try{for(T(ee),m=n(d);m!==null&&(!(m.expirationTime>ee)||K&&!q());){var M=m.callback;if(typeof M=="function"){m.callback=null,v=m.priorityLevel;var F=M(m.expirationTime<=ee);ee=e.unstable_now(),typeof F=="function"?m.callback=F:m===n(d)&&r(d),T(ee)}else r(d);m=n(d)}if(m!==null)var B=!0;else{var le=n(p);le!==null&&X(j,le.startTime-ee),B=!1}return B}finally{m=null,v=U,g=!1}}var _=!1,I=null,R=-1,z=5,P=-1;function q(){return!(e.unstable_now()-P<z)}function $(){if(I!==null){var K=e.unstable_now();P=K;var ee=!0;try{ee=I(!0,K)}finally{ee?G():(_=!1,I=null)}}else _=!1}var G;if(typeof C=="function")G=function(){C($)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,L=E.port2;E.port1.onmessage=$,G=function(){L.postMessage(null)}}else G=function(){k($,0)};function Z(K){I=K,_||(_=!0,G())}function X(K,ee){R=k(function(){K(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,Z(D))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(K){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var U=v;v=ee;try{return K()}finally{v=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,ee){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var U=v;v=K;try{return ee()}finally{v=U}},e.unstable_scheduleCallback=function(K,ee,U){var M=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?M+U:M):U=M,K){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=U+F,K={id:h++,callback:ee,priorityLevel:K,startTime:U,expirationTime:F,sortIndex:-1},U>M?(K.sortIndex=U,t(p,K),n(d)===null&&K===n(p)&&(y?(N(R),R=-1):y=!0,X(j,U-M))):(K.sortIndex=F,t(d,K),x||g||(x=!0,Z(D))),K},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(K){var ee=v;return function(){var U=v;v=ee;try{return K.apply(this,arguments)}finally{v=U}}}})(Fp)),Fp}var dy;function MC(){return dy||(dy=1,Mp.exports=$C()),Mp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function FC(){if(py)return dr;py=1;var e=Rm(),t=MC();function n(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function i(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(a[l]=u,l=0;l<u.length;l++)r.add(u[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function v(l){return d.call(m,l)?!0:d.call(h,l)?!1:p.test(l)?m[l]=!0:(h[l]=!0,!1)}function g(l,u,f,b){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return b?!1:f!==null?!f.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function x(l,u,f,b){if(u===null||typeof u>"u"||g(l,u,f,b))return!0;if(b)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function y(l,u,f,b,S,A,H){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=b,this.attributeNamespace=S,this.mustUseProperty=f,this.propertyName=l,this.type=u,this.sanitizeURL=A,this.removeEmptyString=H}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){k[l]=new y(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];k[u]=new y(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){k[l]=new y(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){k[l]=new y(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){k[l]=new y(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){k[l]=new y(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){k[l]=new y(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){k[l]=new y(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){k[l]=new y(l,5,!1,l.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function C(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(N,C);k[u]=new y(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(N,C);k[u]=new y(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(N,C);k[u]=new y(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){k[l]=new y(l,1,!1,l.toLowerCase(),null,!1,!1)}),k.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){k[l]=new y(l,1,!1,l.toLowerCase(),null,!0,!0)});function T(l,u,f,b){var S=k.hasOwnProperty(u)?k[u]:null;(S!==null?S.type!==0:b||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(x(u,f,S,b)&&(f=null),b||S===null?v(u)&&(f===null?l.removeAttribute(u):l.setAttribute(u,""+f)):S.mustUseProperty?l[S.propertyName]=f===null?S.type===3?!1:"":f:(u=S.attributeName,b=S.attributeNamespace,f===null?l.removeAttribute(u):(S=S.type,f=S===3||S===4&&f===!0?"":""+f,b?l.setAttributeNS(b,u,f):l.setAttribute(u,f))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),_=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),K=Symbol.iterator;function ee(l){return l===null||typeof l!="object"?null:(l=K&&l[K]||l["@@iterator"],typeof l=="function"?l:null)}var U=Object.assign,M;function F(l){if(M===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);M=u&&u[1]||""}return`
`+M+l}var B=!1;function le(l,u){if(!l||B)return"";B=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(be){var b=be}Reflect.construct(l,[],u)}else{try{u.call()}catch(be){b=be}l.call(u.prototype)}else{try{throw Error()}catch(be){b=be}l()}}catch(be){if(be&&b&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),A=b.stack.split(`
`),H=S.length-1,Q=A.length-1;1<=H&&0<=Q&&S[H]!==A[Q];)Q--;for(;1<=H&&0<=Q;H--,Q--)if(S[H]!==A[Q]){if(H!==1||Q!==1)do if(H--,Q--,0>Q||S[H]!==A[Q]){var ie=`
`+S[H].replace(" at new "," at ");return l.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",l.displayName)),ie}while(1<=H&&0<=Q);break}}}finally{B=!1,Error.prepareStackTrace=f}return(l=l?l.displayName||l.name:"")?F(l):""}function pe(l){switch(l.tag){case 5:return F(l.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return l=le(l.type,!1),l;case 11:return l=le(l.type.render,!1),l;case 1:return l=le(l.type,!0),l;default:return""}}function de(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case I:return"Fragment";case _:return"Portal";case z:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case E:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case q:return(l.displayName||"Context")+".Consumer";case P:return(l._context.displayName||"Context")+".Provider";case $:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case L:return u=l.displayName||null,u!==null?u:de(l.type)||"Memo";case Z:u=l._payload,l=l._init;try{return de(l(u))}catch{}}return null}function je(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(u);case 8:return u===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ye(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Te(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ie(l){var u=Te(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),b=""+l[u];if(!l.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var S=f.get,A=f.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return S.call(this)},set:function(H){b=""+H,A.call(this,H)}}),Object.defineProperty(l,u,{enumerable:f.enumerable}),{getValue:function(){return b},setValue:function(H){b=""+H},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function ve(l){l._valueTracker||(l._valueTracker=Ie(l))}function qe(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),b="";return l&&(b=Te(l)?l.checked?"true":"false":l.value),l=b,l!==f?(u.setValue(l),!0):!1}function st(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function O(l,u){var f=u.checked;return U({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??l._wrapperState.initialChecked})}function xe(l,u){var f=u.defaultValue==null?"":u.defaultValue,b=u.checked!=null?u.checked:u.defaultChecked;f=ye(u.value!=null?u.value:f),l._wrapperState={initialChecked:b,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function te(l,u){u=u.checked,u!=null&&T(l,"checked",u,!1)}function V(l,u){te(l,u);var f=ye(u.value),b=u.type;if(f!=null)b==="number"?(f===0&&l.value===""||l.value!=f)&&(l.value=""+f):l.value!==""+f&&(l.value=""+f);else if(b==="submit"||b==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?se(l,u.type,f):u.hasOwnProperty("defaultValue")&&se(l,u.type,ye(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function W(l,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var b=u.type;if(!(b!=="submit"&&b!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,f||u===l.value||(l.value=u),l.defaultValue=u}f=l.name,f!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,f!==""&&(l.name=f)}function se(l,u,f){(u!=="number"||st(l.ownerDocument)!==l)&&(f==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+f&&(l.defaultValue=""+f))}var ke=Array.isArray;function Se(l,u,f,b){if(l=l.options,u){u={};for(var S=0;S<f.length;S++)u["$"+f[S]]=!0;for(f=0;f<l.length;f++)S=u.hasOwnProperty("$"+l[f].value),l[f].selected!==S&&(l[f].selected=S),S&&b&&(l[f].defaultSelected=!0)}else{for(f=""+ye(f),u=null,S=0;S<l.length;S++){if(l[S].value===f){l[S].selected=!0,b&&(l[S].defaultSelected=!0);return}u!==null||l[S].disabled||(u=l[S])}u!==null&&(u.selected=!0)}}function ue(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function _e(l,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(n(92));if(ke(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),f=u}l._wrapperState={initialValue:ye(f)}}function oe(l,u){var f=ye(u.value),b=ye(u.defaultValue);f!=null&&(f=""+f,f!==l.value&&(l.value=f),u.defaultValue==null&&l.defaultValue!==f&&(l.defaultValue=f)),b!=null&&(l.defaultValue=""+b)}function me(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function ae(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function we(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?ae(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var De,He=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,b,S){MSApp.execUnsafeLocalFunction(function(){return l(u,f,b,S)})}:l})(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(De=De||document.createElement("div"),De.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=De.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function pt(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var vt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dn=["Webkit","ms","Moz","O"];Object.keys(vt).forEach(function(l){dn.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),vt[u]=vt[l]})});function ht(l,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||vt.hasOwnProperty(l)&&vt[l]?(""+u).trim():u+"px"}function mn(l,u){l=l.style;for(var f in u)if(u.hasOwnProperty(f)){var b=f.indexOf("--")===0,S=ht(f,u[f],b);f==="float"&&(f="cssFloat"),b?l.setProperty(f,S):l[f]=S}}var yn=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(l,u){if(u){if(yn[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function kn(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qt=null;function Kn(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var vr=null,Mn=null,Et=null;function Bt(l){if(l=ho(l)){if(typeof vr!="function")throw Error(n(280));var u=l.stateNode;u&&(u=Gl(u),vr(l.stateNode,l.type,u))}}function ne(l){Mn?Et?Et.push(l):Et=[l]:Mn=l}function Ce(){if(Mn){var l=Mn,u=Et;if(Et=Mn=null,Bt(l),u)for(l=0;l<u.length;l++)Bt(u[l])}}function Me(l,u){return l(u)}function Ze(){}var wt=!1;function $t(l,u,f){if(wt)return l(u,f);wt=!0;try{return Me(l,u,f)}finally{wt=!1,(Mn!==null||Et!==null)&&(Ze(),Ce())}}function Be(l,u){var f=l.stateNode;if(f===null)return null;var b=Gl(f);if(b===null)return null;f=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var Y=!1;if(c)try{var re={};Object.defineProperty(re,"passive",{get:function(){Y=!0}}),window.addEventListener("test",re,re),window.removeEventListener("test",re,re)}catch{Y=!1}function he(l,u,f,b,S,A,H,Q,ie){var be=Array.prototype.slice.call(arguments,3);try{u.apply(f,be)}catch(Re){this.onError(Re)}}var Ne=!1,Oe=null,We=!1,at=null,Ve={onError:function(l){Ne=!0,Oe=l}};function Qe(l,u,f,b,S,A,H,Q,ie){Ne=!1,Oe=null,he.apply(Ve,arguments)}function Ke(l,u,f,b,S,A,H,Q,ie){if(Qe.apply(this,arguments),Ne){if(Ne){var be=Oe;Ne=!1,Oe=null}else throw Error(n(198));We||(We=!0,at=be)}}function Ye(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function ft(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function Nt(l){if(Ye(l)!==l)throw Error(n(188))}function tn(l){var u=l.alternate;if(!u){if(u=Ye(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,b=u;;){var S=f.return;if(S===null)break;var A=S.alternate;if(A===null){if(b=S.return,b!==null){f=b;continue}break}if(S.child===A.child){for(A=S.child;A;){if(A===f)return Nt(S),l;if(A===b)return Nt(S),u;A=A.sibling}throw Error(n(188))}if(f.return!==b.return)f=S,b=A;else{for(var H=!1,Q=S.child;Q;){if(Q===f){H=!0,f=S,b=A;break}if(Q===b){H=!0,b=S,f=A;break}Q=Q.sibling}if(!H){for(Q=A.child;Q;){if(Q===f){H=!0,f=A,b=S;break}if(Q===b){H=!0,b=A,f=S;break}Q=Q.sibling}if(!H)throw Error(n(189))}}if(f.alternate!==b)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function Lt(l){return l=tn(l),l!==null?Tt(l):null}function Tt(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=Tt(l);if(u!==null)return u;l=l.sibling}return null}var Vt=t.unstable_scheduleCallback,Tn=t.unstable_cancelCallback,ea=t.unstable_shouldYield,ir=t.unstable_requestPaint,Rt=t.unstable_now,hi=t.unstable_getCurrentPriorityLevel,zr=t.unstable_ImmediatePriority,Yn=t.unstable_UserBlockingPriority,Br=t.unstable_NormalPriority,Fe=t.unstable_LowPriority,Le=t.unstable_IdlePriority,tt=null,yt=null;function Gt(l){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(tt,l,void 0,(l.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:On,Fn=Math.log,ma=Math.LN2;function On(l){return l>>>=0,l===0?32:31-(Fn(l)/ma|0)|0}var Zn=64,mi=4194304;function Ia(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function fi(l,u){var f=l.pendingLanes;if(f===0)return 0;var b=0,S=l.suspendedLanes,A=l.pingedLanes,H=f&268435455;if(H!==0){var Q=H&~S;Q!==0?b=Ia(Q):(A&=H,A!==0&&(b=Ia(A)))}else H=f&~S,H!==0?b=Ia(H):A!==0&&(b=Ia(A));if(b===0)return 0;if(u!==0&&u!==b&&(u&S)===0&&(S=b&-b,A=u&-u,S>=A||S===16&&(A&4194240)!==0))return u;if((b&4)!==0&&(b|=f&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=b;0<u;)f=31-bt(u),S=1<<f,b|=l[f],u&=~S;return b}function td(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nd(l,u){for(var f=l.suspendedLanes,b=l.pingedLanes,S=l.expirationTimes,A=l.pendingLanes;0<A;){var H=31-bt(A),Q=1<<H,ie=S[H];ie===-1?((Q&f)===0||(Q&b)!==0)&&(S[H]=td(Q,u)):ie<=u&&(l.expiredLanes|=Q),A&=~Q}}function Ys(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function _l(){var l=Zn;return Zn<<=1,(Zn&4194240)===0&&(Zn=64),l}function $a(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function Ma(l,u,f){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-bt(u),l[u]=f}function Tr(l,u){var f=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var b=l.eventTimes;for(l=l.expirationTimes;0<f;){var S=31-bt(f),A=1<<S;u[S]=0,b[S]=-1,l[S]=-1,f&=~A}}function Zs(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var b=31-bt(f),S=1<<b;S&u|l[b]&u&&(l[b]|=u),f&=~S}}var Mt=0;function gt(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Qs,fn,Ht,gi,ta,vi=!1,Fa=[],Ue=null,Je=null,ut=null,At=new Map,pn=new Map,Dn=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rl(l,u){switch(l){case"focusin":case"focusout":Ue=null;break;case"dragenter":case"dragleave":Je=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":At.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":pn.delete(u.pointerId)}}function Js(l,u,f,b,S,A){return l===null||l.nativeEvent!==A?(l={blockedOn:u,domEventName:f,eventSystemFlags:b,nativeEvent:A,targetContainers:[S]},u!==null&&(u=ho(u),u!==null&&fn(u)),l):(l.eventSystemFlags|=b,u=l.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),l)}function Qk(l,u,f,b,S){switch(u){case"focusin":return Ue=Js(Ue,l,u,f,b,S),!0;case"dragenter":return Je=Js(Je,l,u,f,b,S),!0;case"mouseover":return ut=Js(ut,l,u,f,b,S),!0;case"pointerover":var A=S.pointerId;return At.set(A,Js(At.get(A)||null,l,u,f,b,S)),!0;case"gotpointercapture":return A=S.pointerId,pn.set(A,Js(pn.get(A)||null,l,u,f,b,S)),!0}return!1}function qf(l){var u=yi(l.target);if(u!==null){var f=Ye(u);if(f!==null){if(u=f.tag,u===13){if(u=ft(f),u!==null){l.blockedOn=u,ta(l.priority,function(){Ht(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Il(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=id(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(f===null){f=l.nativeEvent;var b=new f.constructor(f.type,f);Qt=b,f.target.dispatchEvent(b),Qt=null}else return u=ho(f),u!==null&&fn(u),l.blockedOn=f,!1;u.shift()}return!0}function Wf(l,u,f){Il(l)&&f.delete(u)}function Jk(){vi=!1,Ue!==null&&Il(Ue)&&(Ue=null),Je!==null&&Il(Je)&&(Je=null),ut!==null&&Il(ut)&&(ut=null),At.forEach(Wf),pn.forEach(Wf)}function Xs(l,u){l.blockedOn===u&&(l.blockedOn=null,vi||(vi=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jk)))}function eo(l){function u(S){return Xs(S,l)}if(0<Fa.length){Xs(Fa[0],l);for(var f=1;f<Fa.length;f++){var b=Fa[f];b.blockedOn===l&&(b.blockedOn=null)}}for(Ue!==null&&Xs(Ue,l),Je!==null&&Xs(Je,l),ut!==null&&Xs(ut,l),At.forEach(u),pn.forEach(u),f=0;f<Dn.length;f++)b=Dn[f],b.blockedOn===l&&(b.blockedOn=null);for(;0<Dn.length&&(f=Dn[0],f.blockedOn===null);)qf(f),f.blockedOn===null&&Dn.shift()}var Qi=j.ReactCurrentBatchConfig,$l=!0;function Xk(l,u,f,b){var S=Mt,A=Qi.transition;Qi.transition=null;try{Mt=1,ad(l,u,f,b)}finally{Mt=S,Qi.transition=A}}function eN(l,u,f,b){var S=Mt,A=Qi.transition;Qi.transition=null;try{Mt=4,ad(l,u,f,b)}finally{Mt=S,Qi.transition=A}}function ad(l,u,f,b){if($l){var S=id(l,u,f,b);if(S===null)kd(l,u,b,Ml,f),Rl(l,b);else if(Qk(S,l,u,f,b))b.stopPropagation();else if(Rl(l,b),u&4&&-1<rd.indexOf(l)){for(;S!==null;){var A=ho(S);if(A!==null&&Qs(A),A=id(l,u,f,b),A===null&&kd(l,u,b,Ml,f),A===S)break;S=A}S!==null&&b.stopPropagation()}else kd(l,u,b,null,f)}}var Ml=null;function id(l,u,f,b){if(Ml=null,l=Kn(b),l=yi(l),l!==null)if(u=Ye(l),u===null)l=null;else if(f=u.tag,f===13){if(l=ft(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return Ml=l,null}function Vf(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hi()){case zr:return 1;case Yn:return 4;case Br:case Fe:return 16;case Le:return 536870912;default:return 16}default:return 16}}var Oa=null,sd=null,Fl=null;function Gf(){if(Fl)return Fl;var l,u=sd,f=u.length,b,S="value"in Oa?Oa.value:Oa.textContent,A=S.length;for(l=0;l<f&&u[l]===S[l];l++);var H=f-l;for(b=1;b<=H&&u[f-b]===S[A-b];b++);return Fl=S.slice(l,1<b?1-b:void 0)}function Ol(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Pl(){return!0}function Kf(){return!1}function yr(l){function u(f,b,S,A,H){this._reactName=f,this._targetInst=S,this.type=b,this.nativeEvent=A,this.target=H,this.currentTarget=null;for(var Q in l)l.hasOwnProperty(Q)&&(f=l[Q],this[Q]=f?f(A):A[Q]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Pl:Kf,this.isPropagationStopped=Kf,this}return U(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),u}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},od=yr(Ji),to=U({},Ji,{view:0,detail:0}),tN=yr(to),ld,cd,no,Ll=U({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==no&&(no&&l.type==="mousemove"?(ld=l.screenX-no.screenX,cd=l.screenY-no.screenY):cd=ld=0,no=l),ld)},movementY:function(l){return"movementY"in l?l.movementY:cd}}),Yf=yr(Ll),nN=U({},Ll,{dataTransfer:0}),rN=yr(nN),aN=U({},to,{relatedTarget:0}),ud=yr(aN),iN=U({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),sN=yr(iN),oN=U({},Ji,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),lN=yr(oN),cN=U({},Ji,{data:0}),Zf=yr(cN),uN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hN(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=pN[l])?!!u[l]:!1}function dd(){return hN}var mN=U({},to,{key:function(l){if(l.key){var u=uN[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ol(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?dN[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(l){return l.type==="keypress"?Ol(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ol(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),fN=yr(mN),gN=U({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qf=yr(gN),vN=U({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),yN=yr(vN),bN=U({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),wN=yr(bN),xN=U({},Ll,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),kN=yr(xN),NN=[9,13,27,32],pd=c&&"CompositionEvent"in window,ro=null;c&&"documentMode"in document&&(ro=document.documentMode);var CN=c&&"TextEvent"in window&&!ro,Jf=c&&(!pd||ro&&8<ro&&11>=ro),Xf=" ",eg=!1;function tg(l,u){switch(l){case"keyup":return NN.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Xi=!1;function SN(l,u){switch(l){case"compositionend":return ng(u);case"keypress":return u.which!==32?null:(eg=!0,Xf);case"textInput":return l=u.data,l===Xf&&eg?null:l;default:return null}}function EN(l,u){if(Xi)return l==="compositionend"||!pd&&tg(l,u)?(l=Gf(),Fl=sd=Oa=null,Xi=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Jf&&u.locale!=="ko"?null:u.data;default:return null}}var TN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rg(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!TN[l.type]:u==="textarea"}function ag(l,u,f,b){ne(b),u=ql(u,"onChange"),0<u.length&&(f=new od("onChange","change",null,f,b),l.push({event:f,listeners:u}))}var ao=null,io=null;function DN(l){kg(l,0)}function zl(l){var u=as(l);if(qe(u))return l}function jN(l,u){if(l==="change")return u}var ig=!1;if(c){var hd;if(c){var md="oninput"in document;if(!md){var sg=document.createElement("div");sg.setAttribute("oninput","return;"),md=typeof sg.oninput=="function"}hd=md}else hd=!1;ig=hd&&(!document.documentMode||9<document.documentMode)}function og(){ao&&(ao.detachEvent("onpropertychange",lg),io=ao=null)}function lg(l){if(l.propertyName==="value"&&zl(io)){var u=[];ag(u,io,l,Kn(l)),$t(DN,u)}}function AN(l,u,f){l==="focusin"?(og(),ao=u,io=f,ao.attachEvent("onpropertychange",lg)):l==="focusout"&&og()}function _N(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return zl(io)}function RN(l,u){if(l==="click")return zl(u)}function IN(l,u){if(l==="input"||l==="change")return zl(u)}function $N(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Ur=typeof Object.is=="function"?Object.is:$N;function so(l,u){if(Ur(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),b=Object.keys(u);if(f.length!==b.length)return!1;for(b=0;b<f.length;b++){var S=f[b];if(!d.call(u,S)||!Ur(l[S],u[S]))return!1}return!0}function cg(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ug(l,u){var f=cg(l);l=0;for(var b;f;){if(f.nodeType===3){if(b=l+f.textContent.length,l<=u&&b>=u)return{node:f,offset:u-l};l=b}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=cg(f)}}function dg(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?dg(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function pg(){for(var l=window,u=st();u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=st(l.document)}return u}function fd(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function MN(l){var u=pg(),f=l.focusedElem,b=l.selectionRange;if(u!==f&&f&&f.ownerDocument&&dg(f.ownerDocument.documentElement,f)){if(b!==null&&fd(f)){if(u=b.start,l=b.end,l===void 0&&(l=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(l,f.value.length);else if(l=(u=f.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var S=f.textContent.length,A=Math.min(b.start,S);b=b.end===void 0?A:Math.min(b.end,S),!l.extend&&A>b&&(S=b,b=A,A=S),S=ug(f,A);var H=ug(f,b);S&&H&&(l.rangeCount!==1||l.anchorNode!==S.node||l.anchorOffset!==S.offset||l.focusNode!==H.node||l.focusOffset!==H.offset)&&(u=u.createRange(),u.setStart(S.node,S.offset),l.removeAllRanges(),A>b?(l.addRange(u),l.extend(H.node,H.offset)):(u.setEnd(H.node,H.offset),l.addRange(u)))}}for(u=[],l=f;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)l=u[f],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var FN=c&&"documentMode"in document&&11>=document.documentMode,es=null,gd=null,oo=null,vd=!1;function hg(l,u,f){var b=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;vd||es==null||es!==st(b)||(b=es,"selectionStart"in b&&fd(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),oo&&so(oo,b)||(oo=b,b=ql(gd,"onSelect"),0<b.length&&(u=new od("onSelect","select",null,u,f),l.push({event:u,listeners:b}),u.target=es)))}function Bl(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var ts={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionend:Bl("Transition","TransitionEnd")},yd={},mg={};c&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function Ul(l){if(yd[l])return yd[l];if(!ts[l])return l;var u=ts[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in mg)return yd[l]=u[f];return l}var fg=Ul("animationend"),gg=Ul("animationiteration"),vg=Ul("animationstart"),yg=Ul("transitionend"),bg=new Map,wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(l,u){bg.set(l,u),i(u,[l])}for(var bd=0;bd<wg.length;bd++){var wd=wg[bd],ON=wd.toLowerCase(),PN=wd[0].toUpperCase()+wd.slice(1);Pa(ON,"on"+PN)}Pa(fg,"onAnimationEnd"),Pa(gg,"onAnimationIteration"),Pa(vg,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(yg,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LN=new Set("cancel close invalid load scroll toggle".split(" ").concat(lo));function xg(l,u,f){var b=l.type||"unknown-event";l.currentTarget=f,Ke(b,u,void 0,l),l.currentTarget=null}function kg(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var b=l[f],S=b.event;b=b.listeners;e:{var A=void 0;if(u)for(var H=b.length-1;0<=H;H--){var Q=b[H],ie=Q.instance,be=Q.currentTarget;if(Q=Q.listener,ie!==A&&S.isPropagationStopped())break e;xg(S,Q,be),A=ie}else for(H=0;H<b.length;H++){if(Q=b[H],ie=Q.instance,be=Q.currentTarget,Q=Q.listener,ie!==A&&S.isPropagationStopped())break e;xg(S,Q,be),A=ie}}}if(We)throw l=at,We=!1,at=null,l}function Jt(l,u){var f=u[Dd];f===void 0&&(f=u[Dd]=new Set);var b=l+"__bubble";f.has(b)||(Ng(u,l,2,!1),f.add(b))}function xd(l,u,f){var b=0;u&&(b|=4),Ng(f,l,b,u)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function co(l){if(!l[Hl]){l[Hl]=!0,r.forEach(function(f){f!=="selectionchange"&&(LN.has(f)||xd(f,!1,l),xd(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Hl]||(u[Hl]=!0,xd("selectionchange",!1,u))}}function Ng(l,u,f,b){switch(Vf(u)){case 1:var S=Xk;break;case 4:S=eN;break;default:S=ad}f=S.bind(null,u,f,l),S=void 0,!Y||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),b?S!==void 0?l.addEventListener(u,f,{capture:!0,passive:S}):l.addEventListener(u,f,!0):S!==void 0?l.addEventListener(u,f,{passive:S}):l.addEventListener(u,f,!1)}function kd(l,u,f,b,S){var A=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var H=b.tag;if(H===3||H===4){var Q=b.stateNode.containerInfo;if(Q===S||Q.nodeType===8&&Q.parentNode===S)break;if(H===4)for(H=b.return;H!==null;){var ie=H.tag;if((ie===3||ie===4)&&(ie=H.stateNode.containerInfo,ie===S||ie.nodeType===8&&ie.parentNode===S))return;H=H.return}for(;Q!==null;){if(H=yi(Q),H===null)return;if(ie=H.tag,ie===5||ie===6){b=A=H;continue e}Q=Q.parentNode}}b=b.return}$t(function(){var be=A,Re=Kn(f),$e=[];e:{var Ae=bg.get(l);if(Ae!==void 0){var Ge=od,et=l;switch(l){case"keypress":if(Ol(f)===0)break e;case"keydown":case"keyup":Ge=fN;break;case"focusin":et="focus",Ge=ud;break;case"focusout":et="blur",Ge=ud;break;case"beforeblur":case"afterblur":Ge=ud;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=Yf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=rN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=yN;break;case fg:case gg:case vg:Ge=sN;break;case yg:Ge=wN;break;case"scroll":Ge=tN;break;case"wheel":Ge=kN;break;case"copy":case"cut":case"paste":Ge=lN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=Qf}var rt=(u&4)!==0,gn=!rt&&l==="scroll",fe=rt?Ae!==null?Ae+"Capture":null:Ae;rt=[];for(var ce=be,ge;ce!==null;){ge=ce;var ze=ge.stateNode;if(ge.tag===5&&ze!==null&&(ge=ze,fe!==null&&(ze=Be(ce,fe),ze!=null&&rt.push(uo(ce,ze,ge)))),gn)break;ce=ce.return}0<rt.length&&(Ae=new Ge(Ae,et,null,f,Re),$e.push({event:Ae,listeners:rt}))}}if((u&7)===0){e:{if(Ae=l==="mouseover"||l==="pointerover",Ge=l==="mouseout"||l==="pointerout",Ae&&f!==Qt&&(et=f.relatedTarget||f.fromElement)&&(yi(et)||et[fa]))break e;if((Ge||Ae)&&(Ae=Re.window===Re?Re:(Ae=Re.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ge?(et=f.relatedTarget||f.toElement,Ge=be,et=et?yi(et):null,et!==null&&(gn=Ye(et),et!==gn||et.tag!==5&&et.tag!==6)&&(et=null)):(Ge=null,et=be),Ge!==et)){if(rt=Yf,ze="onMouseLeave",fe="onMouseEnter",ce="mouse",(l==="pointerout"||l==="pointerover")&&(rt=Qf,ze="onPointerLeave",fe="onPointerEnter",ce="pointer"),gn=Ge==null?Ae:as(Ge),ge=et==null?Ae:as(et),Ae=new rt(ze,ce+"leave",Ge,f,Re),Ae.target=gn,Ae.relatedTarget=ge,ze=null,yi(Re)===be&&(rt=new rt(fe,ce+"enter",et,f,Re),rt.target=ge,rt.relatedTarget=gn,ze=rt),gn=ze,Ge&&et)t:{for(rt=Ge,fe=et,ce=0,ge=rt;ge;ge=ns(ge))ce++;for(ge=0,ze=fe;ze;ze=ns(ze))ge++;for(;0<ce-ge;)rt=ns(rt),ce--;for(;0<ge-ce;)fe=ns(fe),ge--;for(;ce--;){if(rt===fe||fe!==null&&rt===fe.alternate)break t;rt=ns(rt),fe=ns(fe)}rt=null}else rt=null;Ge!==null&&Cg($e,Ae,Ge,rt,!1),et!==null&&gn!==null&&Cg($e,gn,et,rt,!0)}}e:{if(Ae=be?as(be):window,Ge=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Ae.type==="file")var it=jN;else if(rg(Ae))if(ig)it=IN;else{it=_N;var ot=AN}else(Ge=Ae.nodeName)&&Ge.toLowerCase()==="input"&&(Ae.type==="checkbox"||Ae.type==="radio")&&(it=RN);if(it&&(it=it(l,be))){ag($e,it,f,Re);break e}ot&&ot(l,Ae,be),l==="focusout"&&(ot=Ae._wrapperState)&&ot.controlled&&Ae.type==="number"&&se(Ae,"number",Ae.value)}switch(ot=be?as(be):window,l){case"focusin":(rg(ot)||ot.contentEditable==="true")&&(es=ot,gd=be,oo=null);break;case"focusout":oo=gd=es=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,hg($e,f,Re);break;case"selectionchange":if(FN)break;case"keydown":case"keyup":hg($e,f,Re)}var lt;if(pd)e:{switch(l){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Xi?tg(l,f)&&(mt="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(mt="onCompositionStart");mt&&(Jf&&f.locale!=="ko"&&(Xi||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Xi&&(lt=Gf()):(Oa=Re,sd="value"in Oa?Oa.value:Oa.textContent,Xi=!0)),ot=ql(be,mt),0<ot.length&&(mt=new Zf(mt,l,null,f,Re),$e.push({event:mt,listeners:ot}),lt?mt.data=lt:(lt=ng(f),lt!==null&&(mt.data=lt)))),(lt=CN?SN(l,f):EN(l,f))&&(be=ql(be,"onBeforeInput"),0<be.length&&(Re=new Zf("onBeforeInput","beforeinput",null,f,Re),$e.push({event:Re,listeners:be}),Re.data=lt))}kg($e,u)})}function uo(l,u,f){return{instance:l,listener:u,currentTarget:f}}function ql(l,u){for(var f=u+"Capture",b=[];l!==null;){var S=l,A=S.stateNode;S.tag===5&&A!==null&&(S=A,A=Be(l,f),A!=null&&b.unshift(uo(l,A,S)),A=Be(l,u),A!=null&&b.push(uo(l,A,S))),l=l.return}return b}function ns(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Cg(l,u,f,b,S){for(var A=u._reactName,H=[];f!==null&&f!==b;){var Q=f,ie=Q.alternate,be=Q.stateNode;if(ie!==null&&ie===b)break;Q.tag===5&&be!==null&&(Q=be,S?(ie=Be(f,A),ie!=null&&H.unshift(uo(f,ie,Q))):S||(ie=Be(f,A),ie!=null&&H.push(uo(f,ie,Q)))),f=f.return}H.length!==0&&l.push({event:u,listeners:H})}var zN=/\r\n?/g,BN=/\u0000|\uFFFD/g;function Sg(l){return(typeof l=="string"?l:""+l).replace(zN,`
`).replace(BN,"")}function Wl(l,u,f){if(u=Sg(u),Sg(l)!==u&&f)throw Error(n(425))}function Vl(){}var Nd=null,Cd=null;function Sd(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Ed=typeof setTimeout=="function"?setTimeout:void 0,UN=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,HN=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(l){return Eg.resolve(null).then(l).catch(qN)}:Ed;function qN(l){setTimeout(function(){throw l})}function Td(l,u){var f=u,b=0;do{var S=f.nextSibling;if(l.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"){if(b===0){l.removeChild(S),eo(u);return}b--}else f!=="$"&&f!=="$?"&&f!=="$!"||b++;f=S}while(f);eo(u)}function La(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function Tg(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return l;u--}else f==="/$"&&u++}l=l.previousSibling}return null}var rs=Math.random().toString(36).slice(2),na="__reactFiber$"+rs,po="__reactProps$"+rs,fa="__reactContainer$"+rs,Dd="__reactEvents$"+rs,WN="__reactListeners$"+rs,VN="__reactHandles$"+rs;function yi(l){var u=l[na];if(u)return u;for(var f=l.parentNode;f;){if(u=f[fa]||f[na]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=Tg(l);l!==null;){if(f=l[na])return f;l=Tg(l)}return u}l=f,f=l.parentNode}return null}function ho(l){return l=l[na]||l[fa],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function as(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(n(33))}function Gl(l){return l[po]||null}var jd=[],is=-1;function za(l){return{current:l}}function Xt(l){0>is||(l.current=jd[is],jd[is]=null,is--)}function Yt(l,u){is++,jd[is]=l.current,l.current=u}var Ba={},Bn=za(Ba),sr=za(!1),bi=Ba;function ss(l,u){var f=l.type.contextTypes;if(!f)return Ba;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===u)return b.__reactInternalMemoizedMaskedChildContext;var S={},A;for(A in f)S[A]=u[A];return b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=S),S}function or(l){return l=l.childContextTypes,l!=null}function Kl(){Xt(sr),Xt(Bn)}function Dg(l,u,f){if(Bn.current!==Ba)throw Error(n(168));Yt(Bn,u),Yt(sr,f)}function jg(l,u,f){var b=l.stateNode;if(u=u.childContextTypes,typeof b.getChildContext!="function")return f;b=b.getChildContext();for(var S in b)if(!(S in u))throw Error(n(108,je(l)||"Unknown",S));return U({},f,b)}function Yl(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ba,bi=Bn.current,Yt(Bn,l),Yt(sr,sr.current),!0}function Ag(l,u,f){var b=l.stateNode;if(!b)throw Error(n(169));f?(l=jg(l,u,bi),b.__reactInternalMemoizedMergedChildContext=l,Xt(sr),Xt(Bn),Yt(Bn,l)):Xt(sr),Yt(sr,f)}var ga=null,Zl=!1,Ad=!1;function _g(l){ga===null?ga=[l]:ga.push(l)}function GN(l){Zl=!0,_g(l)}function Ua(){if(!Ad&&ga!==null){Ad=!0;var l=0,u=Mt;try{var f=ga;for(Mt=1;l<f.length;l++){var b=f[l];do b=b(!0);while(b!==null)}ga=null,Zl=!1}catch(S){throw ga!==null&&(ga=ga.slice(l+1)),Vt(zr,Ua),S}finally{Mt=u,Ad=!1}}return null}var os=[],ls=0,Ql=null,Jl=0,Dr=[],jr=0,wi=null,va=1,ya="";function xi(l,u){os[ls++]=Jl,os[ls++]=Ql,Ql=l,Jl=u}function Rg(l,u,f){Dr[jr++]=va,Dr[jr++]=ya,Dr[jr++]=wi,wi=l;var b=va;l=ya;var S=32-bt(b)-1;b&=~(1<<S),f+=1;var A=32-bt(u)+S;if(30<A){var H=S-S%5;A=(b&(1<<H)-1).toString(32),b>>=H,S-=H,va=1<<32-bt(u)+S|f<<S|b,ya=A+l}else va=1<<A|f<<S|b,ya=l}function _d(l){l.return!==null&&(xi(l,1),Rg(l,1,0))}function Rd(l){for(;l===Ql;)Ql=os[--ls],os[ls]=null,Jl=os[--ls],os[ls]=null;for(;l===wi;)wi=Dr[--jr],Dr[jr]=null,ya=Dr[--jr],Dr[jr]=null,va=Dr[--jr],Dr[jr]=null}var br=null,wr=null,nn=!1,Hr=null;function Ig(l,u){var f=Ir(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=l,u=l.deletions,u===null?(l.deletions=[f],l.flags|=16):u.push(f)}function $g(l,u){switch(l.tag){case 5:var f=l.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,br=l,wr=La(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,br=l,wr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=wi!==null?{id:va,overflow:ya}:null,l.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=Ir(18,null,null,0),f.stateNode=u,f.return=l,l.child=f,br=l,wr=null,!0):!1;default:return!1}}function Id(l){return(l.mode&1)!==0&&(l.flags&128)===0}function $d(l){if(nn){var u=wr;if(u){var f=u;if(!$g(l,u)){if(Id(l))throw Error(n(418));u=La(f.nextSibling);var b=br;u&&$g(l,u)?Ig(b,f):(l.flags=l.flags&-4097|2,nn=!1,br=l)}}else{if(Id(l))throw Error(n(418));l.flags=l.flags&-4097|2,nn=!1,br=l}}}function Mg(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;br=l}function Xl(l){if(l!==br)return!1;if(!nn)return Mg(l),nn=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!Sd(l.type,l.memoizedProps)),u&&(u=wr)){if(Id(l))throw Fg(),Error(n(418));for(;u;)Ig(l,u),u=La(u.nextSibling)}if(Mg(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"){if(u===0){wr=La(l.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}l=l.nextSibling}wr=null}}else wr=br?La(l.stateNode.nextSibling):null;return!0}function Fg(){for(var l=wr;l;)l=La(l.nextSibling)}function cs(){wr=br=null,nn=!1}function Md(l){Hr===null?Hr=[l]:Hr.push(l)}var KN=j.ReactCurrentBatchConfig;function mo(l,u,f){if(l=f.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var b=f.stateNode}if(!b)throw Error(n(147,l));var S=b,A=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===A?u.ref:(u=function(H){var Q=S.refs;H===null?delete Q[A]:Q[A]=H},u._stringRef=A,u)}if(typeof l!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,l))}return l}function ec(l,u){throw l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function Og(l){var u=l._init;return u(l._payload)}function Pg(l){function u(fe,ce){if(l){var ge=fe.deletions;ge===null?(fe.deletions=[ce],fe.flags|=16):ge.push(ce)}}function f(fe,ce){if(!l)return null;for(;ce!==null;)u(fe,ce),ce=ce.sibling;return null}function b(fe,ce){for(fe=new Map;ce!==null;)ce.key!==null?fe.set(ce.key,ce):fe.set(ce.index,ce),ce=ce.sibling;return fe}function S(fe,ce){return fe=Za(fe,ce),fe.index=0,fe.sibling=null,fe}function A(fe,ce,ge){return fe.index=ge,l?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<ce?(fe.flags|=2,ce):ge):(fe.flags|=2,ce)):(fe.flags|=1048576,ce)}function H(fe){return l&&fe.alternate===null&&(fe.flags|=2),fe}function Q(fe,ce,ge,ze){return ce===null||ce.tag!==6?(ce=Ep(ge,fe.mode,ze),ce.return=fe,ce):(ce=S(ce,ge),ce.return=fe,ce)}function ie(fe,ce,ge,ze){var it=ge.type;return it===I?Re(fe,ce,ge.props.children,ze,ge.key):ce!==null&&(ce.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===Z&&Og(it)===ce.type)?(ze=S(ce,ge.props),ze.ref=mo(fe,ce,ge),ze.return=fe,ze):(ze=Cc(ge.type,ge.key,ge.props,null,fe.mode,ze),ze.ref=mo(fe,ce,ge),ze.return=fe,ze)}function be(fe,ce,ge,ze){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ge.containerInfo||ce.stateNode.implementation!==ge.implementation?(ce=Tp(ge,fe.mode,ze),ce.return=fe,ce):(ce=S(ce,ge.children||[]),ce.return=fe,ce)}function Re(fe,ce,ge,ze,it){return ce===null||ce.tag!==7?(ce=ji(ge,fe.mode,ze,it),ce.return=fe,ce):(ce=S(ce,ge),ce.return=fe,ce)}function $e(fe,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ce=Ep(""+ce,fe.mode,ge),ce.return=fe,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case D:return ge=Cc(ce.type,ce.key,ce.props,null,fe.mode,ge),ge.ref=mo(fe,null,ce),ge.return=fe,ge;case _:return ce=Tp(ce,fe.mode,ge),ce.return=fe,ce;case Z:var ze=ce._init;return $e(fe,ze(ce._payload),ge)}if(ke(ce)||ee(ce))return ce=ji(ce,fe.mode,ge,null),ce.return=fe,ce;ec(fe,ce)}return null}function Ae(fe,ce,ge,ze){var it=ce!==null?ce.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return it!==null?null:Q(fe,ce,""+ge,ze);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case D:return ge.key===it?ie(fe,ce,ge,ze):null;case _:return ge.key===it?be(fe,ce,ge,ze):null;case Z:return it=ge._init,Ae(fe,ce,it(ge._payload),ze)}if(ke(ge)||ee(ge))return it!==null?null:Re(fe,ce,ge,ze,null);ec(fe,ge)}return null}function Ge(fe,ce,ge,ze,it){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return fe=fe.get(ge)||null,Q(ce,fe,""+ze,it);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case D:return fe=fe.get(ze.key===null?ge:ze.key)||null,ie(ce,fe,ze,it);case _:return fe=fe.get(ze.key===null?ge:ze.key)||null,be(ce,fe,ze,it);case Z:var ot=ze._init;return Ge(fe,ce,ge,ot(ze._payload),it)}if(ke(ze)||ee(ze))return fe=fe.get(ge)||null,Re(ce,fe,ze,it,null);ec(ce,ze)}return null}function et(fe,ce,ge,ze){for(var it=null,ot=null,lt=ce,mt=ce=0,_n=null;lt!==null&&mt<ge.length;mt++){lt.index>mt?(_n=lt,lt=null):_n=lt.sibling;var Pt=Ae(fe,lt,ge[mt],ze);if(Pt===null){lt===null&&(lt=_n);break}l&&lt&&Pt.alternate===null&&u(fe,lt),ce=A(Pt,ce,mt),ot===null?it=Pt:ot.sibling=Pt,ot=Pt,lt=_n}if(mt===ge.length)return f(fe,lt),nn&&xi(fe,mt),it;if(lt===null){for(;mt<ge.length;mt++)lt=$e(fe,ge[mt],ze),lt!==null&&(ce=A(lt,ce,mt),ot===null?it=lt:ot.sibling=lt,ot=lt);return nn&&xi(fe,mt),it}for(lt=b(fe,lt);mt<ge.length;mt++)_n=Ge(lt,fe,mt,ge[mt],ze),_n!==null&&(l&&_n.alternate!==null&&lt.delete(_n.key===null?mt:_n.key),ce=A(_n,ce,mt),ot===null?it=_n:ot.sibling=_n,ot=_n);return l&&lt.forEach(function(Qa){return u(fe,Qa)}),nn&&xi(fe,mt),it}function rt(fe,ce,ge,ze){var it=ee(ge);if(typeof it!="function")throw Error(n(150));if(ge=it.call(ge),ge==null)throw Error(n(151));for(var ot=it=null,lt=ce,mt=ce=0,_n=null,Pt=ge.next();lt!==null&&!Pt.done;mt++,Pt=ge.next()){lt.index>mt?(_n=lt,lt=null):_n=lt.sibling;var Qa=Ae(fe,lt,Pt.value,ze);if(Qa===null){lt===null&&(lt=_n);break}l&&lt&&Qa.alternate===null&&u(fe,lt),ce=A(Qa,ce,mt),ot===null?it=Qa:ot.sibling=Qa,ot=Qa,lt=_n}if(Pt.done)return f(fe,lt),nn&&xi(fe,mt),it;if(lt===null){for(;!Pt.done;mt++,Pt=ge.next())Pt=$e(fe,Pt.value,ze),Pt!==null&&(ce=A(Pt,ce,mt),ot===null?it=Pt:ot.sibling=Pt,ot=Pt);return nn&&xi(fe,mt),it}for(lt=b(fe,lt);!Pt.done;mt++,Pt=ge.next())Pt=Ge(lt,fe,mt,Pt.value,ze),Pt!==null&&(l&&Pt.alternate!==null&&lt.delete(Pt.key===null?mt:Pt.key),ce=A(Pt,ce,mt),ot===null?it=Pt:ot.sibling=Pt,ot=Pt);return l&&lt.forEach(function(TC){return u(fe,TC)}),nn&&xi(fe,mt),it}function gn(fe,ce,ge,ze){if(typeof ge=="object"&&ge!==null&&ge.type===I&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case D:e:{for(var it=ge.key,ot=ce;ot!==null;){if(ot.key===it){if(it=ge.type,it===I){if(ot.tag===7){f(fe,ot.sibling),ce=S(ot,ge.props.children),ce.return=fe,fe=ce;break e}}else if(ot.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===Z&&Og(it)===ot.type){f(fe,ot.sibling),ce=S(ot,ge.props),ce.ref=mo(fe,ot,ge),ce.return=fe,fe=ce;break e}f(fe,ot);break}else u(fe,ot);ot=ot.sibling}ge.type===I?(ce=ji(ge.props.children,fe.mode,ze,ge.key),ce.return=fe,fe=ce):(ze=Cc(ge.type,ge.key,ge.props,null,fe.mode,ze),ze.ref=mo(fe,ce,ge),ze.return=fe,fe=ze)}return H(fe);case _:e:{for(ot=ge.key;ce!==null;){if(ce.key===ot)if(ce.tag===4&&ce.stateNode.containerInfo===ge.containerInfo&&ce.stateNode.implementation===ge.implementation){f(fe,ce.sibling),ce=S(ce,ge.children||[]),ce.return=fe,fe=ce;break e}else{f(fe,ce);break}else u(fe,ce);ce=ce.sibling}ce=Tp(ge,fe.mode,ze),ce.return=fe,fe=ce}return H(fe);case Z:return ot=ge._init,gn(fe,ce,ot(ge._payload),ze)}if(ke(ge))return et(fe,ce,ge,ze);if(ee(ge))return rt(fe,ce,ge,ze);ec(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ce!==null&&ce.tag===6?(f(fe,ce.sibling),ce=S(ce,ge),ce.return=fe,fe=ce):(f(fe,ce),ce=Ep(ge,fe.mode,ze),ce.return=fe,fe=ce),H(fe)):f(fe,ce)}return gn}var us=Pg(!0),Lg=Pg(!1),tc=za(null),nc=null,ds=null,Fd=null;function Od(){Fd=ds=nc=null}function Pd(l){var u=tc.current;Xt(tc),l._currentValue=u}function Ld(l,u,f){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===f)break;l=l.return}}function ps(l,u){nc=l,Fd=ds=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(lr=!0),l.firstContext=null)}function Ar(l){var u=l._currentValue;if(Fd!==l)if(l={context:l,memoizedValue:u,next:null},ds===null){if(nc===null)throw Error(n(308));ds=l,nc.dependencies={lanes:0,firstContext:l}}else ds=ds.next=l;return u}var ki=null;function zd(l){ki===null?ki=[l]:ki.push(l)}function zg(l,u,f,b){var S=u.interleaved;return S===null?(f.next=f,zd(u)):(f.next=S.next,S.next=f),u.interleaved=f,ba(l,b)}function ba(l,u){l.lanes|=u;var f=l.alternate;for(f!==null&&(f.lanes|=u),f=l,l=l.return;l!==null;)l.childLanes|=u,f=l.alternate,f!==null&&(f.childLanes|=u),f=l,l=l.return;return f.tag===3?f.stateNode:null}var Ha=!1;function Bd(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bg(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function wa(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function qa(l,u,f){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(Ft&2)!==0){var S=b.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),b.pending=u,ba(l,f)}return S=b.interleaved,S===null?(u.next=u,zd(b)):(u.next=S.next,S.next=u),b.interleaved=u,ba(l,f)}function rc(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var b=u.lanes;b&=l.pendingLanes,f|=b,u.lanes=f,Zs(l,f)}}function Ug(l,u){var f=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,f===b)){var S=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var H={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};A===null?S=A=H:A=A.next=H,f=f.next}while(f!==null);A===null?S=A=u:A=A.next=u}else S=A=u;f={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:A,shared:b.shared,effects:b.effects},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}function ac(l,u,f,b){var S=l.updateQueue;Ha=!1;var A=S.firstBaseUpdate,H=S.lastBaseUpdate,Q=S.shared.pending;if(Q!==null){S.shared.pending=null;var ie=Q,be=ie.next;ie.next=null,H===null?A=be:H.next=be,H=ie;var Re=l.alternate;Re!==null&&(Re=Re.updateQueue,Q=Re.lastBaseUpdate,Q!==H&&(Q===null?Re.firstBaseUpdate=be:Q.next=be,Re.lastBaseUpdate=ie))}if(A!==null){var $e=S.baseState;H=0,Re=be=ie=null,Q=A;do{var Ae=Q.lane,Ge=Q.eventTime;if((b&Ae)===Ae){Re!==null&&(Re=Re.next={eventTime:Ge,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var et=l,rt=Q;switch(Ae=u,Ge=f,rt.tag){case 1:if(et=rt.payload,typeof et=="function"){$e=et.call(Ge,$e,Ae);break e}$e=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=rt.payload,Ae=typeof et=="function"?et.call(Ge,$e,Ae):et,Ae==null)break e;$e=U({},$e,Ae);break e;case 2:Ha=!0}}Q.callback!==null&&Q.lane!==0&&(l.flags|=64,Ae=S.effects,Ae===null?S.effects=[Q]:Ae.push(Q))}else Ge={eventTime:Ge,lane:Ae,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Re===null?(be=Re=Ge,ie=$e):Re=Re.next=Ge,H|=Ae;if(Q=Q.next,Q===null){if(Q=S.shared.pending,Q===null)break;Ae=Q,Q=Ae.next,Ae.next=null,S.lastBaseUpdate=Ae,S.shared.pending=null}}while(!0);if(Re===null&&(ie=$e),S.baseState=ie,S.firstBaseUpdate=be,S.lastBaseUpdate=Re,u=S.shared.interleaved,u!==null){S=u;do H|=S.lane,S=S.next;while(S!==u)}else A===null&&(S.shared.lanes=0);Si|=H,l.lanes=H,l.memoizedState=$e}}function Hg(l,u,f){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var b=l[u],S=b.callback;if(S!==null){if(b.callback=null,b=f,typeof S!="function")throw Error(n(191,S));S.call(b)}}}var fo={},ra=za(fo),go=za(fo),vo=za(fo);function Ni(l){if(l===fo)throw Error(n(174));return l}function Ud(l,u){switch(Yt(vo,u),Yt(go,l),Yt(ra,fo),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:we(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=we(u,l)}Xt(ra),Yt(ra,u)}function hs(){Xt(ra),Xt(go),Xt(vo)}function qg(l){Ni(vo.current);var u=Ni(ra.current),f=we(u,l.type);u!==f&&(Yt(go,l),Yt(ra,f))}function Hd(l){go.current===l&&(Xt(ra),Xt(go))}var ln=za(0);function ic(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var qd=[];function Wd(){for(var l=0;l<qd.length;l++)qd[l]._workInProgressVersionPrimary=null;qd.length=0}var sc=j.ReactCurrentDispatcher,Vd=j.ReactCurrentBatchConfig,Ci=0,cn=null,Nn=null,jn=null,oc=!1,yo=!1,bo=0,YN=0;function Un(){throw Error(n(321))}function Gd(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!Ur(l[f],u[f]))return!1;return!0}function Kd(l,u,f,b,S,A){if(Ci=A,cn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,sc.current=l===null||l.memoizedState===null?XN:eC,l=f(b,S),yo){A=0;do{if(yo=!1,bo=0,25<=A)throw Error(n(301));A+=1,jn=Nn=null,u.updateQueue=null,sc.current=tC,l=f(b,S)}while(yo)}if(sc.current=uc,u=Nn!==null&&Nn.next!==null,Ci=0,jn=Nn=cn=null,oc=!1,u)throw Error(n(300));return l}function Yd(){var l=bo!==0;return bo=0,l}function aa(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?cn.memoizedState=jn=l:jn=jn.next=l,jn}function _r(){if(Nn===null){var l=cn.alternate;l=l!==null?l.memoizedState:null}else l=Nn.next;var u=jn===null?cn.memoizedState:jn.next;if(u!==null)jn=u,Nn=l;else{if(l===null)throw Error(n(310));Nn=l,l={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},jn===null?cn.memoizedState=jn=l:jn=jn.next=l}return jn}function wo(l,u){return typeof u=="function"?u(l):u}function Zd(l){var u=_r(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var b=Nn,S=b.baseQueue,A=f.pending;if(A!==null){if(S!==null){var H=S.next;S.next=A.next,A.next=H}b.baseQueue=S=A,f.pending=null}if(S!==null){A=S.next,b=b.baseState;var Q=H=null,ie=null,be=A;do{var Re=be.lane;if((Ci&Re)===Re)ie!==null&&(ie=ie.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),b=be.hasEagerState?be.eagerState:l(b,be.action);else{var $e={lane:Re,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ie===null?(Q=ie=$e,H=b):ie=ie.next=$e,cn.lanes|=Re,Si|=Re}be=be.next}while(be!==null&&be!==A);ie===null?H=b:ie.next=Q,Ur(b,u.memoizedState)||(lr=!0),u.memoizedState=b,u.baseState=H,u.baseQueue=ie,f.lastRenderedState=b}if(l=f.interleaved,l!==null){S=l;do A=S.lane,cn.lanes|=A,Si|=A,S=S.next;while(S!==l)}else S===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function Qd(l){var u=_r(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var b=f.dispatch,S=f.pending,A=u.memoizedState;if(S!==null){f.pending=null;var H=S=S.next;do A=l(A,H.action),H=H.next;while(H!==S);Ur(A,u.memoizedState)||(lr=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),f.lastRenderedState=A}return[A,b]}function Wg(){}function Vg(l,u){var f=cn,b=_r(),S=u(),A=!Ur(b.memoizedState,S);if(A&&(b.memoizedState=S,lr=!0),b=b.queue,Jd(Yg.bind(null,f,b,l),[l]),b.getSnapshot!==u||A||jn!==null&&jn.memoizedState.tag&1){if(f.flags|=2048,xo(9,Kg.bind(null,f,b,S,u),void 0,null),An===null)throw Error(n(349));(Ci&30)!==0||Gg(f,u,S)}return S}function Gg(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=cn.updateQueue,u===null?(u={lastEffect:null,stores:null},cn.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function Kg(l,u,f,b){u.value=f,u.getSnapshot=b,Zg(u)&&Qg(l)}function Yg(l,u,f){return f(function(){Zg(u)&&Qg(l)})}function Zg(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!Ur(l,f)}catch{return!0}}function Qg(l){var u=ba(l,1);u!==null&&Gr(u,l,1,-1)}function Jg(l){var u=aa();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:l},u.queue=l,l=l.dispatch=JN.bind(null,cn,l),[u.memoizedState,l]}function xo(l,u,f,b){return l={tag:l,create:u,destroy:f,deps:b,next:null},u=cn.updateQueue,u===null?(u={lastEffect:null,stores:null},cn.updateQueue=u,u.lastEffect=l.next=l):(f=u.lastEffect,f===null?u.lastEffect=l.next=l:(b=f.next,f.next=l,l.next=b,u.lastEffect=l)),l}function Xg(){return _r().memoizedState}function lc(l,u,f,b){var S=aa();cn.flags|=l,S.memoizedState=xo(1|u,f,void 0,b===void 0?null:b)}function cc(l,u,f,b){var S=_r();b=b===void 0?null:b;var A=void 0;if(Nn!==null){var H=Nn.memoizedState;if(A=H.destroy,b!==null&&Gd(b,H.deps)){S.memoizedState=xo(u,f,A,b);return}}cn.flags|=l,S.memoizedState=xo(1|u,f,A,b)}function ev(l,u){return lc(8390656,8,l,u)}function Jd(l,u){return cc(2048,8,l,u)}function tv(l,u){return cc(4,2,l,u)}function nv(l,u){return cc(4,4,l,u)}function rv(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function av(l,u,f){return f=f!=null?f.concat([l]):null,cc(4,4,rv.bind(null,u,l),f)}function Xd(){}function iv(l,u){var f=_r();u=u===void 0?null:u;var b=f.memoizedState;return b!==null&&u!==null&&Gd(u,b[1])?b[0]:(f.memoizedState=[l,u],l)}function sv(l,u){var f=_r();u=u===void 0?null:u;var b=f.memoizedState;return b!==null&&u!==null&&Gd(u,b[1])?b[0]:(l=l(),f.memoizedState=[l,u],l)}function ov(l,u,f){return(Ci&21)===0?(l.baseState&&(l.baseState=!1,lr=!0),l.memoizedState=f):(Ur(f,u)||(f=_l(),cn.lanes|=f,Si|=f,l.baseState=!0),u)}function ZN(l,u){var f=Mt;Mt=f!==0&&4>f?f:4,l(!0);var b=Vd.transition;Vd.transition={};try{l(!1),u()}finally{Mt=f,Vd.transition=b}}function lv(){return _r().memoizedState}function QN(l,u,f){var b=Ka(l);if(f={lane:b,action:f,hasEagerState:!1,eagerState:null,next:null},cv(l))uv(u,f);else if(f=zg(l,u,f,b),f!==null){var S=Jn();Gr(f,l,b,S),dv(f,u,b)}}function JN(l,u,f){var b=Ka(l),S={lane:b,action:f,hasEagerState:!1,eagerState:null,next:null};if(cv(l))uv(u,S);else{var A=l.alternate;if(l.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var H=u.lastRenderedState,Q=A(H,f);if(S.hasEagerState=!0,S.eagerState=Q,Ur(Q,H)){var ie=u.interleaved;ie===null?(S.next=S,zd(u)):(S.next=ie.next,ie.next=S),u.interleaved=S;return}}catch{}finally{}f=zg(l,u,S,b),f!==null&&(S=Jn(),Gr(f,l,b,S),dv(f,u,b))}}function cv(l){var u=l.alternate;return l===cn||u!==null&&u===cn}function uv(l,u){yo=oc=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function dv(l,u,f){if((f&4194240)!==0){var b=u.lanes;b&=l.pendingLanes,f|=b,u.lanes=f,Zs(l,f)}}var uc={readContext:Ar,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},XN={readContext:Ar,useCallback:function(l,u){return aa().memoizedState=[l,u===void 0?null:u],l},useContext:Ar,useEffect:ev,useImperativeHandle:function(l,u,f){return f=f!=null?f.concat([l]):null,lc(4194308,4,rv.bind(null,u,l),f)},useLayoutEffect:function(l,u){return lc(4194308,4,l,u)},useInsertionEffect:function(l,u){return lc(4,2,l,u)},useMemo:function(l,u){var f=aa();return u=u===void 0?null:u,l=l(),f.memoizedState=[l,u],l},useReducer:function(l,u,f){var b=aa();return u=f!==void 0?f(u):u,b.memoizedState=b.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},b.queue=l,l=l.dispatch=QN.bind(null,cn,l),[b.memoizedState,l]},useRef:function(l){var u=aa();return l={current:l},u.memoizedState=l},useState:Jg,useDebugValue:Xd,useDeferredValue:function(l){return aa().memoizedState=l},useTransition:function(){var l=Jg(!1),u=l[0];return l=ZN.bind(null,l[1]),aa().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,f){var b=cn,S=aa();if(nn){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),An===null)throw Error(n(349));(Ci&30)!==0||Gg(b,u,f)}S.memoizedState=f;var A={value:f,getSnapshot:u};return S.queue=A,ev(Yg.bind(null,b,A,l),[l]),b.flags|=2048,xo(9,Kg.bind(null,b,A,f,u),void 0,null),f},useId:function(){var l=aa(),u=An.identifierPrefix;if(nn){var f=ya,b=va;f=(b&~(1<<32-bt(b)-1)).toString(32)+f,u=":"+u+"R"+f,f=bo++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=YN++,u=":"+u+"r"+f.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},eC={readContext:Ar,useCallback:iv,useContext:Ar,useEffect:Jd,useImperativeHandle:av,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:sv,useReducer:Zd,useRef:Xg,useState:function(){return Zd(wo)},useDebugValue:Xd,useDeferredValue:function(l){var u=_r();return ov(u,Nn.memoizedState,l)},useTransition:function(){var l=Zd(wo)[0],u=_r().memoizedState;return[l,u]},useMutableSource:Wg,useSyncExternalStore:Vg,useId:lv,unstable_isNewReconciler:!1},tC={readContext:Ar,useCallback:iv,useContext:Ar,useEffect:Jd,useImperativeHandle:av,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:sv,useReducer:Qd,useRef:Xg,useState:function(){return Qd(wo)},useDebugValue:Xd,useDeferredValue:function(l){var u=_r();return Nn===null?u.memoizedState=l:ov(u,Nn.memoizedState,l)},useTransition:function(){var l=Qd(wo)[0],u=_r().memoizedState;return[l,u]},useMutableSource:Wg,useSyncExternalStore:Vg,useId:lv,unstable_isNewReconciler:!1};function qr(l,u){if(l&&l.defaultProps){u=U({},u),l=l.defaultProps;for(var f in l)u[f]===void 0&&(u[f]=l[f]);return u}return u}function ep(l,u,f,b){u=l.memoizedState,f=f(b,u),f=f==null?u:U({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var dc={isMounted:function(l){return(l=l._reactInternals)?Ye(l)===l:!1},enqueueSetState:function(l,u,f){l=l._reactInternals;var b=Jn(),S=Ka(l),A=wa(b,S);A.payload=u,f!=null&&(A.callback=f),u=qa(l,A,S),u!==null&&(Gr(u,l,S,b),rc(u,l,S))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var b=Jn(),S=Ka(l),A=wa(b,S);A.tag=1,A.payload=u,f!=null&&(A.callback=f),u=qa(l,A,S),u!==null&&(Gr(u,l,S,b),rc(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=Jn(),b=Ka(l),S=wa(f,b);S.tag=2,u!=null&&(S.callback=u),u=qa(l,S,b),u!==null&&(Gr(u,l,b,f),rc(u,l,b))}};function pv(l,u,f,b,S,A,H){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,A,H):u.prototype&&u.prototype.isPureReactComponent?!so(f,b)||!so(S,A):!0}function hv(l,u,f){var b=!1,S=Ba,A=u.contextType;return typeof A=="object"&&A!==null?A=Ar(A):(S=or(u)?bi:Bn.current,b=u.contextTypes,A=(b=b!=null)?ss(l,S):Ba),u=new u(f,A),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=dc,l.stateNode=u,u._reactInternals=l,b&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=A),u}function mv(l,u,f,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,b),u.state!==l&&dc.enqueueReplaceState(u,u.state,null)}function tp(l,u,f,b){var S=l.stateNode;S.props=f,S.state=l.memoizedState,S.refs={},Bd(l);var A=u.contextType;typeof A=="object"&&A!==null?S.context=Ar(A):(A=or(u)?bi:Bn.current,S.context=ss(l,A)),S.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(ep(l,u,A,f),S.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&dc.enqueueReplaceState(S,S.state,null),ac(l,f,S,b),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}function ms(l,u){try{var f="",b=u;do f+=pe(b),b=b.return;while(b);var S=f}catch(A){S=`
Error generating stack: `+A.message+`
`+A.stack}return{value:l,source:u,stack:S,digest:null}}function np(l,u,f){return{value:l,source:null,stack:f??null,digest:u??null}}function rp(l,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var nC=typeof WeakMap=="function"?WeakMap:Map;function fv(l,u,f){f=wa(-1,f),f.tag=3,f.payload={element:null};var b=u.value;return f.callback=function(){yc||(yc=!0,yp=b),rp(l,u)},f}function gv(l,u,f){f=wa(-1,f),f.tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var S=u.value;f.payload=function(){return b(S)},f.callback=function(){rp(l,u)}}var A=l.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(f.callback=function(){rp(l,u),typeof b!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var H=u.stack;this.componentDidCatch(u.value,{componentStack:H!==null?H:""})}),f}function vv(l,u,f){var b=l.pingCache;if(b===null){b=l.pingCache=new nC;var S=new Set;b.set(u,S)}else S=b.get(u),S===void 0&&(S=new Set,b.set(u,S));S.has(f)||(S.add(f),l=gC.bind(null,l,u,f),u.then(l,l))}function yv(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function bv(l,u,f,b,S){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=wa(-1,1),u.tag=2,qa(f,u,1))),f.lanes|=1),l):(l.flags|=65536,l.lanes=S,l)}var rC=j.ReactCurrentOwner,lr=!1;function Qn(l,u,f,b){u.child=l===null?Lg(u,null,f,b):us(u,l.child,f,b)}function wv(l,u,f,b,S){f=f.render;var A=u.ref;return ps(u,S),b=Kd(l,u,f,b,A,S),f=Yd(),l!==null&&!lr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,xa(l,u,S)):(nn&&f&&_d(u),u.flags|=1,Qn(l,u,b,S),u.child)}function xv(l,u,f,b,S){if(l===null){var A=f.type;return typeof A=="function"&&!Sp(A)&&A.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=A,kv(l,u,A,b,S)):(l=Cc(f.type,null,b,u,u.mode,S),l.ref=u.ref,l.return=u,u.child=l)}if(A=l.child,(l.lanes&S)===0){var H=A.memoizedProps;if(f=f.compare,f=f!==null?f:so,f(H,b)&&l.ref===u.ref)return xa(l,u,S)}return u.flags|=1,l=Za(A,b),l.ref=u.ref,l.return=u,u.child=l}function kv(l,u,f,b,S){if(l!==null){var A=l.memoizedProps;if(so(A,b)&&l.ref===u.ref)if(lr=!1,u.pendingProps=b=A,(l.lanes&S)!==0)(l.flags&131072)!==0&&(lr=!0);else return u.lanes=l.lanes,xa(l,u,S)}return ap(l,u,f,b,S)}function Nv(l,u,f){var b=u.pendingProps,S=b.children,A=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(gs,xr),xr|=f;else{if((f&1073741824)===0)return l=A!==null?A.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Yt(gs,xr),xr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=A!==null?A.baseLanes:f,Yt(gs,xr),xr|=b}else A!==null?(b=A.baseLanes|f,u.memoizedState=null):b=f,Yt(gs,xr),xr|=b;return Qn(l,u,S,f),u.child}function Cv(l,u){var f=u.ref;(l===null&&f!==null||l!==null&&l.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function ap(l,u,f,b,S){var A=or(f)?bi:Bn.current;return A=ss(u,A),ps(u,S),f=Kd(l,u,f,b,A,S),b=Yd(),l!==null&&!lr?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,xa(l,u,S)):(nn&&b&&_d(u),u.flags|=1,Qn(l,u,f,S),u.child)}function Sv(l,u,f,b,S){if(or(f)){var A=!0;Yl(u)}else A=!1;if(ps(u,S),u.stateNode===null)hc(l,u),hv(u,f,b),tp(u,f,b,S),b=!0;else if(l===null){var H=u.stateNode,Q=u.memoizedProps;H.props=Q;var ie=H.context,be=f.contextType;typeof be=="object"&&be!==null?be=Ar(be):(be=or(f)?bi:Bn.current,be=ss(u,be));var Re=f.getDerivedStateFromProps,$e=typeof Re=="function"||typeof H.getSnapshotBeforeUpdate=="function";$e||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Q!==b||ie!==be)&&mv(u,H,b,be),Ha=!1;var Ae=u.memoizedState;H.state=Ae,ac(u,b,H,S),ie=u.memoizedState,Q!==b||Ae!==ie||sr.current||Ha?(typeof Re=="function"&&(ep(u,f,Re,b),ie=u.memoizedState),(Q=Ha||pv(u,f,Q,b,Ae,ie,be))?($e||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(u.flags|=4194308)):(typeof H.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=ie),H.props=b,H.state=ie,H.context=be,b=Q):(typeof H.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{H=u.stateNode,Bg(l,u),Q=u.memoizedProps,be=u.type===u.elementType?Q:qr(u.type,Q),H.props=be,$e=u.pendingProps,Ae=H.context,ie=f.contextType,typeof ie=="object"&&ie!==null?ie=Ar(ie):(ie=or(f)?bi:Bn.current,ie=ss(u,ie));var Ge=f.getDerivedStateFromProps;(Re=typeof Ge=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(Q!==$e||Ae!==ie)&&mv(u,H,b,ie),Ha=!1,Ae=u.memoizedState,H.state=Ae,ac(u,b,H,S);var et=u.memoizedState;Q!==$e||Ae!==et||sr.current||Ha?(typeof Ge=="function"&&(ep(u,f,Ge,b),et=u.memoizedState),(be=Ha||pv(u,f,be,b,Ae,et,ie)||!1)?(Re||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(b,et,ie),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(b,et,ie)),typeof H.componentDidUpdate=="function"&&(u.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof H.componentDidUpdate!="function"||Q===l.memoizedProps&&Ae===l.memoizedState||(u.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&Ae===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=et),H.props=b,H.state=et,H.context=ie,b=be):(typeof H.componentDidUpdate!="function"||Q===l.memoizedProps&&Ae===l.memoizedState||(u.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&Ae===l.memoizedState||(u.flags|=1024),b=!1)}return ip(l,u,f,b,A,S)}function ip(l,u,f,b,S,A){Cv(l,u);var H=(u.flags&128)!==0;if(!b&&!H)return S&&Ag(u,f,!1),xa(l,u,A);b=u.stateNode,rC.current=u;var Q=H&&typeof f.getDerivedStateFromError!="function"?null:b.render();return u.flags|=1,l!==null&&H?(u.child=us(u,l.child,null,A),u.child=us(u,null,Q,A)):Qn(l,u,Q,A),u.memoizedState=b.state,S&&Ag(u,f,!0),u.child}function Ev(l){var u=l.stateNode;u.pendingContext?Dg(l,u.pendingContext,u.pendingContext!==u.context):u.context&&Dg(l,u.context,!1),Ud(l,u.containerInfo)}function Tv(l,u,f,b,S){return cs(),Md(S),u.flags|=256,Qn(l,u,f,b),u.child}var sp={dehydrated:null,treeContext:null,retryLane:0};function op(l){return{baseLanes:l,cachePool:null,transitions:null}}function Dv(l,u,f){var b=u.pendingProps,S=ln.current,A=!1,H=(u.flags&128)!==0,Q;if((Q=H)||(Q=l!==null&&l.memoizedState===null?!1:(S&2)!==0),Q?(A=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(S|=1),Yt(ln,S&1),l===null)return $d(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(H=b.children,l=b.fallback,A?(b=u.mode,A=u.child,H={mode:"hidden",children:H},(b&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=H):A=Sc(H,b,0,null),l=ji(l,b,f,null),A.return=u,l.return=u,A.sibling=l,u.child=A,u.child.memoizedState=op(f),u.memoizedState=sp,l):lp(u,H));if(S=l.memoizedState,S!==null&&(Q=S.dehydrated,Q!==null))return aC(l,u,H,b,Q,S,f);if(A){A=b.fallback,H=u.mode,S=l.child,Q=S.sibling;var ie={mode:"hidden",children:b.children};return(H&1)===0&&u.child!==S?(b=u.child,b.childLanes=0,b.pendingProps=ie,u.deletions=null):(b=Za(S,ie),b.subtreeFlags=S.subtreeFlags&14680064),Q!==null?A=Za(Q,A):(A=ji(A,H,f,null),A.flags|=2),A.return=u,b.return=u,b.sibling=A,u.child=b,b=A,A=u.child,H=l.child.memoizedState,H=H===null?op(f):{baseLanes:H.baseLanes|f,cachePool:null,transitions:H.transitions},A.memoizedState=H,A.childLanes=l.childLanes&~f,u.memoizedState=sp,b}return A=l.child,l=A.sibling,b=Za(A,{mode:"visible",children:b.children}),(u.mode&1)===0&&(b.lanes=f),b.return=u,b.sibling=null,l!==null&&(f=u.deletions,f===null?(u.deletions=[l],u.flags|=16):f.push(l)),u.child=b,u.memoizedState=null,b}function lp(l,u){return u=Sc({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function pc(l,u,f,b){return b!==null&&Md(b),us(u,l.child,null,f),l=lp(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function aC(l,u,f,b,S,A,H){if(f)return u.flags&256?(u.flags&=-257,b=np(Error(n(422))),pc(l,u,H,b)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(A=b.fallback,S=u.mode,b=Sc({mode:"visible",children:b.children},S,0,null),A=ji(A,S,H,null),A.flags|=2,b.return=u,A.return=u,b.sibling=A,u.child=b,(u.mode&1)!==0&&us(u,l.child,null,H),u.child.memoizedState=op(H),u.memoizedState=sp,A);if((u.mode&1)===0)return pc(l,u,H,null);if(S.data==="$!"){if(b=S.nextSibling&&S.nextSibling.dataset,b)var Q=b.dgst;return b=Q,A=Error(n(419)),b=np(A,b,void 0),pc(l,u,H,b)}if(Q=(H&l.childLanes)!==0,lr||Q){if(b=An,b!==null){switch(H&-H){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(b.suspendedLanes|H))!==0?0:S,S!==0&&S!==A.retryLane&&(A.retryLane=S,ba(l,S),Gr(b,l,S,-1))}return Cp(),b=np(Error(n(421))),pc(l,u,H,b)}return S.data==="$?"?(u.flags|=128,u.child=l.child,u=vC.bind(null,l),S._reactRetry=u,null):(l=A.treeContext,wr=La(S.nextSibling),br=u,nn=!0,Hr=null,l!==null&&(Dr[jr++]=va,Dr[jr++]=ya,Dr[jr++]=wi,va=l.id,ya=l.overflow,wi=u),u=lp(u,b.children),u.flags|=4096,u)}function jv(l,u,f){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),Ld(l.return,u,f)}function cp(l,u,f,b,S){var A=l.memoizedState;A===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:f,tailMode:S}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=b,A.tail=f,A.tailMode=S)}function Av(l,u,f){var b=u.pendingProps,S=b.revealOrder,A=b.tail;if(Qn(l,u,b.children,f),b=ln.current,(b&2)!==0)b=b&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&jv(l,f,u);else if(l.tag===19)jv(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(Yt(ln,b),(u.mode&1)===0)u.memoizedState=null;else switch(S){case"forwards":for(f=u.child,S=null;f!==null;)l=f.alternate,l!==null&&ic(l)===null&&(S=f),f=f.sibling;f=S,f===null?(S=u.child,u.child=null):(S=f.sibling,f.sibling=null),cp(u,!1,S,f,A);break;case"backwards":for(f=null,S=u.child,u.child=null;S!==null;){if(l=S.alternate,l!==null&&ic(l)===null){u.child=S;break}l=S.sibling,S.sibling=f,f=S,S=l}cp(u,!0,f,null,A);break;case"together":cp(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function hc(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function xa(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Si|=u.lanes,(f&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=Za(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=Za(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function iC(l,u,f){switch(u.tag){case 3:Ev(u),cs();break;case 5:qg(u);break;case 1:or(u.type)&&Yl(u);break;case 4:Ud(u,u.stateNode.containerInfo);break;case 10:var b=u.type._context,S=u.memoizedProps.value;Yt(tc,b._currentValue),b._currentValue=S;break;case 13:if(b=u.memoizedState,b!==null)return b.dehydrated!==null?(Yt(ln,ln.current&1),u.flags|=128,null):(f&u.child.childLanes)!==0?Dv(l,u,f):(Yt(ln,ln.current&1),l=xa(l,u,f),l!==null?l.sibling:null);Yt(ln,ln.current&1);break;case 19:if(b=(f&u.childLanes)!==0,(l.flags&128)!==0){if(b)return Av(l,u,f);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Yt(ln,ln.current),b)break;return null;case 22:case 23:return u.lanes=0,Nv(l,u,f)}return xa(l,u,f)}var _v,up,Rv,Iv;_v=function(l,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)l.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},up=function(){},Rv=function(l,u,f,b){var S=l.memoizedProps;if(S!==b){l=u.stateNode,Ni(ra.current);var A=null;switch(f){case"input":S=O(l,S),b=O(l,b),A=[];break;case"select":S=U({},S,{value:void 0}),b=U({},b,{value:void 0}),A=[];break;case"textarea":S=ue(l,S),b=ue(l,b),A=[];break;default:typeof S.onClick!="function"&&typeof b.onClick=="function"&&(l.onclick=Vl)}jt(f,b);var H;f=null;for(be in S)if(!b.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var Q=S[be];for(H in Q)Q.hasOwnProperty(H)&&(f||(f={}),f[H]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(a.hasOwnProperty(be)?A||(A=[]):(A=A||[]).push(be,null));for(be in b){var ie=b[be];if(Q=S!=null?S[be]:void 0,b.hasOwnProperty(be)&&ie!==Q&&(ie!=null||Q!=null))if(be==="style")if(Q){for(H in Q)!Q.hasOwnProperty(H)||ie&&ie.hasOwnProperty(H)||(f||(f={}),f[H]="");for(H in ie)ie.hasOwnProperty(H)&&Q[H]!==ie[H]&&(f||(f={}),f[H]=ie[H])}else f||(A||(A=[]),A.push(be,f)),f=ie;else be==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,Q=Q?Q.__html:void 0,ie!=null&&Q!==ie&&(A=A||[]).push(be,ie)):be==="children"?typeof ie!="string"&&typeof ie!="number"||(A=A||[]).push(be,""+ie):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(a.hasOwnProperty(be)?(ie!=null&&be==="onScroll"&&Jt("scroll",l),A||Q===ie||(A=[])):(A=A||[]).push(be,ie))}f&&(A=A||[]).push("style",f);var be=A;(u.updateQueue=be)&&(u.flags|=4)}},Iv=function(l,u,f,b){f!==b&&(u.flags|=4)};function ko(l,u){if(!nn)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var b=null;f!==null;)f.alternate!==null&&(b=f),f=f.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Hn(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,b=0;if(u)for(var S=l.child;S!==null;)f|=S.lanes|S.childLanes,b|=S.subtreeFlags&14680064,b|=S.flags&14680064,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)f|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=b,l.childLanes=f,u}function sC(l,u,f){var b=u.pendingProps;switch(Rd(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(u),null;case 1:return or(u.type)&&Kl(),Hn(u),null;case 3:return b=u.stateNode,hs(),Xt(sr),Xt(Bn),Wd(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(l===null||l.child===null)&&(Xl(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Hr!==null&&(xp(Hr),Hr=null))),up(l,u),Hn(u),null;case 5:Hd(u);var S=Ni(vo.current);if(f=u.type,l!==null&&u.stateNode!=null)Rv(l,u,f,b,S),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!b){if(u.stateNode===null)throw Error(n(166));return Hn(u),null}if(l=Ni(ra.current),Xl(u)){b=u.stateNode,f=u.type;var A=u.memoizedProps;switch(b[na]=u,b[po]=A,l=(u.mode&1)!==0,f){case"dialog":Jt("cancel",b),Jt("close",b);break;case"iframe":case"object":case"embed":Jt("load",b);break;case"video":case"audio":for(S=0;S<lo.length;S++)Jt(lo[S],b);break;case"source":Jt("error",b);break;case"img":case"image":case"link":Jt("error",b),Jt("load",b);break;case"details":Jt("toggle",b);break;case"input":xe(b,A),Jt("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!A.multiple},Jt("invalid",b);break;case"textarea":_e(b,A),Jt("invalid",b)}jt(f,A),S=null;for(var H in A)if(A.hasOwnProperty(H)){var Q=A[H];H==="children"?typeof Q=="string"?b.textContent!==Q&&(A.suppressHydrationWarning!==!0&&Wl(b.textContent,Q,l),S=["children",Q]):typeof Q=="number"&&b.textContent!==""+Q&&(A.suppressHydrationWarning!==!0&&Wl(b.textContent,Q,l),S=["children",""+Q]):a.hasOwnProperty(H)&&Q!=null&&H==="onScroll"&&Jt("scroll",b)}switch(f){case"input":ve(b),W(b,A,!0);break;case"textarea":ve(b),me(b);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(b.onclick=Vl)}b=S,u.updateQueue=b,b!==null&&(u.flags|=4)}else{H=S.nodeType===9?S:S.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=ae(f)),l==="http://www.w3.org/1999/xhtml"?f==="script"?(l=H.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof b.is=="string"?l=H.createElement(f,{is:b.is}):(l=H.createElement(f),f==="select"&&(H=l,b.multiple?H.multiple=!0:b.size&&(H.size=b.size))):l=H.createElementNS(l,f),l[na]=u,l[po]=b,_v(l,u,!1,!1),u.stateNode=l;e:{switch(H=kn(f,b),f){case"dialog":Jt("cancel",l),Jt("close",l),S=b;break;case"iframe":case"object":case"embed":Jt("load",l),S=b;break;case"video":case"audio":for(S=0;S<lo.length;S++)Jt(lo[S],l);S=b;break;case"source":Jt("error",l),S=b;break;case"img":case"image":case"link":Jt("error",l),Jt("load",l),S=b;break;case"details":Jt("toggle",l),S=b;break;case"input":xe(l,b),S=O(l,b),Jt("invalid",l);break;case"option":S=b;break;case"select":l._wrapperState={wasMultiple:!!b.multiple},S=U({},b,{value:void 0}),Jt("invalid",l);break;case"textarea":_e(l,b),S=ue(l,b),Jt("invalid",l);break;default:S=b}jt(f,S),Q=S;for(A in Q)if(Q.hasOwnProperty(A)){var ie=Q[A];A==="style"?mn(l,ie):A==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&He(l,ie)):A==="children"?typeof ie=="string"?(f!=="textarea"||ie!=="")&&pt(l,ie):typeof ie=="number"&&pt(l,""+ie):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(a.hasOwnProperty(A)?ie!=null&&A==="onScroll"&&Jt("scroll",l):ie!=null&&T(l,A,ie,H))}switch(f){case"input":ve(l),W(l,b,!1);break;case"textarea":ve(l),me(l);break;case"option":b.value!=null&&l.setAttribute("value",""+ye(b.value));break;case"select":l.multiple=!!b.multiple,A=b.value,A!=null?Se(l,!!b.multiple,A,!1):b.defaultValue!=null&&Se(l,!!b.multiple,b.defaultValue,!0);break;default:typeof S.onClick=="function"&&(l.onclick=Vl)}switch(f){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Hn(u),null;case 6:if(l&&u.stateNode!=null)Iv(l,u,l.memoizedProps,b);else{if(typeof b!="string"&&u.stateNode===null)throw Error(n(166));if(f=Ni(vo.current),Ni(ra.current),Xl(u)){if(b=u.stateNode,f=u.memoizedProps,b[na]=u,(A=b.nodeValue!==f)&&(l=br,l!==null))switch(l.tag){case 3:Wl(b.nodeValue,f,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Wl(b.nodeValue,f,(l.mode&1)!==0)}A&&(u.flags|=4)}else b=(f.nodeType===9?f:f.ownerDocument).createTextNode(b),b[na]=u,u.stateNode=b}return Hn(u),null;case 13:if(Xt(ln),b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(nn&&wr!==null&&(u.mode&1)!==0&&(u.flags&128)===0)Fg(),cs(),u.flags|=98560,A=!1;else if(A=Xl(u),b!==null&&b.dehydrated!==null){if(l===null){if(!A)throw Error(n(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[na]=u}else cs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Hn(u),A=!1}else Hr!==null&&(xp(Hr),Hr=null),A=!0;if(!A)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=f,u):(b=b!==null,b!==(l!==null&&l.memoizedState!==null)&&b&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(ln.current&1)!==0?Cn===0&&(Cn=3):Cp())),u.updateQueue!==null&&(u.flags|=4),Hn(u),null);case 4:return hs(),up(l,u),l===null&&co(u.stateNode.containerInfo),Hn(u),null;case 10:return Pd(u.type._context),Hn(u),null;case 17:return or(u.type)&&Kl(),Hn(u),null;case 19:if(Xt(ln),A=u.memoizedState,A===null)return Hn(u),null;if(b=(u.flags&128)!==0,H=A.rendering,H===null)if(b)ko(A,!1);else{if(Cn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(H=ic(l),H!==null){for(u.flags|=128,ko(A,!1),b=H.updateQueue,b!==null&&(u.updateQueue=b,u.flags|=4),u.subtreeFlags=0,b=f,f=u.child;f!==null;)A=f,l=b,A.flags&=14680066,H=A.alternate,H===null?(A.childLanes=0,A.lanes=l,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=H.childLanes,A.lanes=H.lanes,A.child=H.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=H.memoizedProps,A.memoizedState=H.memoizedState,A.updateQueue=H.updateQueue,A.type=H.type,l=H.dependencies,A.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),f=f.sibling;return Yt(ln,ln.current&1|2),u.child}l=l.sibling}A.tail!==null&&Rt()>vs&&(u.flags|=128,b=!0,ko(A,!1),u.lanes=4194304)}else{if(!b)if(l=ic(H),l!==null){if(u.flags|=128,b=!0,f=l.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),ko(A,!0),A.tail===null&&A.tailMode==="hidden"&&!H.alternate&&!nn)return Hn(u),null}else 2*Rt()-A.renderingStartTime>vs&&f!==1073741824&&(u.flags|=128,b=!0,ko(A,!1),u.lanes=4194304);A.isBackwards?(H.sibling=u.child,u.child=H):(f=A.last,f!==null?f.sibling=H:u.child=H,A.last=H)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=Rt(),u.sibling=null,f=ln.current,Yt(ln,b?f&1|2:f&1),u):(Hn(u),null);case 22:case 23:return Np(),b=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==b&&(u.flags|=8192),b&&(u.mode&1)!==0?(xr&1073741824)!==0&&(Hn(u),u.subtreeFlags&6&&(u.flags|=8192)):Hn(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function oC(l,u){switch(Rd(u),u.tag){case 1:return or(u.type)&&Kl(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return hs(),Xt(sr),Xt(Bn),Wd(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return Hd(u),null;case 13:if(Xt(ln),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));cs()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Xt(ln),null;case 4:return hs(),null;case 10:return Pd(u.type._context),null;case 22:case 23:return Np(),null;case 24:return null;default:return null}}var mc=!1,qn=!1,lC=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function fs(l,u){var f=l.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(b){hn(l,u,b)}else f.current=null}function dp(l,u,f){try{f()}catch(b){hn(l,u,b)}}var $v=!1;function cC(l,u){if(Nd=$l,l=pg(),fd(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var b=f.getSelection&&f.getSelection();if(b&&b.rangeCount!==0){f=b.anchorNode;var S=b.anchorOffset,A=b.focusNode;b=b.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var H=0,Q=-1,ie=-1,be=0,Re=0,$e=l,Ae=null;t:for(;;){for(var Ge;$e!==f||S!==0&&$e.nodeType!==3||(Q=H+S),$e!==A||b!==0&&$e.nodeType!==3||(ie=H+b),$e.nodeType===3&&(H+=$e.nodeValue.length),(Ge=$e.firstChild)!==null;)Ae=$e,$e=Ge;for(;;){if($e===l)break t;if(Ae===f&&++be===S&&(Q=H),Ae===A&&++Re===b&&(ie=H),(Ge=$e.nextSibling)!==null)break;$e=Ae,Ae=$e.parentNode}$e=Ge}f=Q===-1||ie===-1?null:{start:Q,end:ie}}else f=null}f=f||{start:0,end:0}}else f=null;for(Cd={focusedElem:l,selectionRange:f},$l=!1,Xe=u;Xe!==null;)if(u=Xe,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Xe=l;else for(;Xe!==null;){u=Xe;try{var et=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var rt=et.memoizedProps,gn=et.memoizedState,fe=u.stateNode,ce=fe.getSnapshotBeforeUpdate(u.elementType===u.type?rt:qr(u.type,rt),gn);fe.__reactInternalSnapshotBeforeUpdate=ce}break;case 3:var ge=u.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ze){hn(u,u.return,ze)}if(l=u.sibling,l!==null){l.return=u.return,Xe=l;break}Xe=u.return}return et=$v,$v=!1,et}function No(l,u,f){var b=u.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var S=b=b.next;do{if((S.tag&l)===l){var A=S.destroy;S.destroy=void 0,A!==void 0&&dp(u,f,A)}S=S.next}while(S!==b)}}function fc(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&l)===l){var b=f.create;f.destroy=b()}f=f.next}while(f!==u)}}function pp(l){var u=l.ref;if(u!==null){var f=l.stateNode;switch(l.tag){case 5:l=f;break;default:l=f}typeof u=="function"?u(l):u.current=l}}function Mv(l){var u=l.alternate;u!==null&&(l.alternate=null,Mv(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[na],delete u[po],delete u[Dd],delete u[WN],delete u[VN])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Fv(l){return l.tag===5||l.tag===3||l.tag===4}function Ov(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Fv(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function hp(l,u,f){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(l,u):f.insertBefore(l,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(l,f)):(u=f,u.appendChild(l)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Vl));else if(b!==4&&(l=l.child,l!==null))for(hp(l,u,f),l=l.sibling;l!==null;)hp(l,u,f),l=l.sibling}function mp(l,u,f){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(b!==4&&(l=l.child,l!==null))for(mp(l,u,f),l=l.sibling;l!==null;)mp(l,u,f),l=l.sibling}var Pn=null,Wr=!1;function Wa(l,u,f){for(f=f.child;f!==null;)Pv(l,u,f),f=f.sibling}function Pv(l,u,f){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(tt,f)}catch{}switch(f.tag){case 5:qn||fs(f,u);case 6:var b=Pn,S=Wr;Pn=null,Wa(l,u,f),Pn=b,Wr=S,Pn!==null&&(Wr?(l=Pn,f=f.stateNode,l.nodeType===8?l.parentNode.removeChild(f):l.removeChild(f)):Pn.removeChild(f.stateNode));break;case 18:Pn!==null&&(Wr?(l=Pn,f=f.stateNode,l.nodeType===8?Td(l.parentNode,f):l.nodeType===1&&Td(l,f),eo(l)):Td(Pn,f.stateNode));break;case 4:b=Pn,S=Wr,Pn=f.stateNode.containerInfo,Wr=!0,Wa(l,u,f),Pn=b,Wr=S;break;case 0:case 11:case 14:case 15:if(!qn&&(b=f.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){S=b=b.next;do{var A=S,H=A.destroy;A=A.tag,H!==void 0&&((A&2)!==0||(A&4)!==0)&&dp(f,u,H),S=S.next}while(S!==b)}Wa(l,u,f);break;case 1:if(!qn&&(fs(f,u),b=f.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=f.memoizedProps,b.state=f.memoizedState,b.componentWillUnmount()}catch(Q){hn(f,u,Q)}Wa(l,u,f);break;case 21:Wa(l,u,f);break;case 22:f.mode&1?(qn=(b=qn)||f.memoizedState!==null,Wa(l,u,f),qn=b):Wa(l,u,f);break;default:Wa(l,u,f)}}function Lv(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var f=l.stateNode;f===null&&(f=l.stateNode=new lC),u.forEach(function(b){var S=yC.bind(null,l,b);f.has(b)||(f.add(b),b.then(S,S))})}}function Vr(l,u){var f=u.deletions;if(f!==null)for(var b=0;b<f.length;b++){var S=f[b];try{var A=l,H=u,Q=H;e:for(;Q!==null;){switch(Q.tag){case 5:Pn=Q.stateNode,Wr=!1;break e;case 3:Pn=Q.stateNode.containerInfo,Wr=!0;break e;case 4:Pn=Q.stateNode.containerInfo,Wr=!0;break e}Q=Q.return}if(Pn===null)throw Error(n(160));Pv(A,H,S),Pn=null,Wr=!1;var ie=S.alternate;ie!==null&&(ie.return=null),S.return=null}catch(be){hn(S,u,be)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)zv(u,l),u=u.sibling}function zv(l,u){var f=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Vr(u,l),ia(l),b&4){try{No(3,l,l.return),fc(3,l)}catch(rt){hn(l,l.return,rt)}try{No(5,l,l.return)}catch(rt){hn(l,l.return,rt)}}break;case 1:Vr(u,l),ia(l),b&512&&f!==null&&fs(f,f.return);break;case 5:if(Vr(u,l),ia(l),b&512&&f!==null&&fs(f,f.return),l.flags&32){var S=l.stateNode;try{pt(S,"")}catch(rt){hn(l,l.return,rt)}}if(b&4&&(S=l.stateNode,S!=null)){var A=l.memoizedProps,H=f!==null?f.memoizedProps:A,Q=l.type,ie=l.updateQueue;if(l.updateQueue=null,ie!==null)try{Q==="input"&&A.type==="radio"&&A.name!=null&&te(S,A),kn(Q,H);var be=kn(Q,A);for(H=0;H<ie.length;H+=2){var Re=ie[H],$e=ie[H+1];Re==="style"?mn(S,$e):Re==="dangerouslySetInnerHTML"?He(S,$e):Re==="children"?pt(S,$e):T(S,Re,$e,be)}switch(Q){case"input":V(S,A);break;case"textarea":oe(S,A);break;case"select":var Ae=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!A.multiple;var Ge=A.value;Ge!=null?Se(S,!!A.multiple,Ge,!1):Ae!==!!A.multiple&&(A.defaultValue!=null?Se(S,!!A.multiple,A.defaultValue,!0):Se(S,!!A.multiple,A.multiple?[]:"",!1))}S[po]=A}catch(rt){hn(l,l.return,rt)}}break;case 6:if(Vr(u,l),ia(l),b&4){if(l.stateNode===null)throw Error(n(162));S=l.stateNode,A=l.memoizedProps;try{S.nodeValue=A}catch(rt){hn(l,l.return,rt)}}break;case 3:if(Vr(u,l),ia(l),b&4&&f!==null&&f.memoizedState.isDehydrated)try{eo(u.containerInfo)}catch(rt){hn(l,l.return,rt)}break;case 4:Vr(u,l),ia(l);break;case 13:Vr(u,l),ia(l),S=l.child,S.flags&8192&&(A=S.memoizedState!==null,S.stateNode.isHidden=A,!A||S.alternate!==null&&S.alternate.memoizedState!==null||(vp=Rt())),b&4&&Lv(l);break;case 22:if(Re=f!==null&&f.memoizedState!==null,l.mode&1?(qn=(be=qn)||Re,Vr(u,l),qn=be):Vr(u,l),ia(l),b&8192){if(be=l.memoizedState!==null,(l.stateNode.isHidden=be)&&!Re&&(l.mode&1)!==0)for(Xe=l,Re=l.child;Re!==null;){for($e=Xe=Re;Xe!==null;){switch(Ae=Xe,Ge=Ae.child,Ae.tag){case 0:case 11:case 14:case 15:No(4,Ae,Ae.return);break;case 1:fs(Ae,Ae.return);var et=Ae.stateNode;if(typeof et.componentWillUnmount=="function"){b=Ae,f=Ae.return;try{u=b,et.props=u.memoizedProps,et.state=u.memoizedState,et.componentWillUnmount()}catch(rt){hn(b,f,rt)}}break;case 5:fs(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){Hv($e);continue}}Ge!==null?(Ge.return=Ae,Xe=Ge):Hv($e)}Re=Re.sibling}e:for(Re=null,$e=l;;){if($e.tag===5){if(Re===null){Re=$e;try{S=$e.stateNode,be?(A=S.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(Q=$e.stateNode,ie=$e.memoizedProps.style,H=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,Q.style.display=ht("display",H))}catch(rt){hn(l,l.return,rt)}}}else if($e.tag===6){if(Re===null)try{$e.stateNode.nodeValue=be?"":$e.memoizedProps}catch(rt){hn(l,l.return,rt)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===l)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===l)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===l)break e;Re===$e&&(Re=null),$e=$e.return}Re===$e&&(Re=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:Vr(u,l),ia(l),b&4&&Lv(l);break;case 21:break;default:Vr(u,l),ia(l)}}function ia(l){var u=l.flags;if(u&2){try{e:{for(var f=l.return;f!==null;){if(Fv(f)){var b=f;break e}f=f.return}throw Error(n(160))}switch(b.tag){case 5:var S=b.stateNode;b.flags&32&&(pt(S,""),b.flags&=-33);var A=Ov(l);mp(l,A,S);break;case 3:case 4:var H=b.stateNode.containerInfo,Q=Ov(l);hp(l,Q,H);break;default:throw Error(n(161))}}catch(ie){hn(l,l.return,ie)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function uC(l,u,f){Xe=l,Bv(l)}function Bv(l,u,f){for(var b=(l.mode&1)!==0;Xe!==null;){var S=Xe,A=S.child;if(S.tag===22&&b){var H=S.memoizedState!==null||mc;if(!H){var Q=S.alternate,ie=Q!==null&&Q.memoizedState!==null||qn;Q=mc;var be=qn;if(mc=H,(qn=ie)&&!be)for(Xe=S;Xe!==null;)H=Xe,ie=H.child,H.tag===22&&H.memoizedState!==null?qv(S):ie!==null?(ie.return=H,Xe=ie):qv(S);for(;A!==null;)Xe=A,Bv(A),A=A.sibling;Xe=S,mc=Q,qn=be}Uv(l)}else(S.subtreeFlags&8772)!==0&&A!==null?(A.return=S,Xe=A):Uv(l)}}function Uv(l){for(;Xe!==null;){var u=Xe;if((u.flags&8772)!==0){var f=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:qn||fc(5,u);break;case 1:var b=u.stateNode;if(u.flags&4&&!qn)if(f===null)b.componentDidMount();else{var S=u.elementType===u.type?f.memoizedProps:qr(u.type,f.memoizedProps);b.componentDidUpdate(S,f.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var A=u.updateQueue;A!==null&&Hg(u,A,b);break;case 3:var H=u.updateQueue;if(H!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}Hg(u,H,f)}break;case 5:var Q=u.stateNode;if(f===null&&u.flags&4){f=Q;var ie=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&f.focus();break;case"img":ie.src&&(f.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var be=u.alternate;if(be!==null){var Re=be.memoizedState;if(Re!==null){var $e=Re.dehydrated;$e!==null&&eo($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}qn||u.flags&512&&pp(u)}catch(Ae){hn(u,u.return,Ae)}}if(u===l){Xe=null;break}if(f=u.sibling,f!==null){f.return=u.return,Xe=f;break}Xe=u.return}}function Hv(l){for(;Xe!==null;){var u=Xe;if(u===l){Xe=null;break}var f=u.sibling;if(f!==null){f.return=u.return,Xe=f;break}Xe=u.return}}function qv(l){for(;Xe!==null;){var u=Xe;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{fc(4,u)}catch(ie){hn(u,f,ie)}break;case 1:var b=u.stateNode;if(typeof b.componentDidMount=="function"){var S=u.return;try{b.componentDidMount()}catch(ie){hn(u,S,ie)}}var A=u.return;try{pp(u)}catch(ie){hn(u,A,ie)}break;case 5:var H=u.return;try{pp(u)}catch(ie){hn(u,H,ie)}}}catch(ie){hn(u,u.return,ie)}if(u===l){Xe=null;break}var Q=u.sibling;if(Q!==null){Q.return=u.return,Xe=Q;break}Xe=u.return}}var dC=Math.ceil,gc=j.ReactCurrentDispatcher,fp=j.ReactCurrentOwner,Rr=j.ReactCurrentBatchConfig,Ft=0,An=null,bn=null,Ln=0,xr=0,gs=za(0),Cn=0,Co=null,Si=0,vc=0,gp=0,So=null,cr=null,vp=0,vs=1/0,ka=null,yc=!1,yp=null,Va=null,bc=!1,Ga=null,wc=0,Eo=0,bp=null,xc=-1,kc=0;function Jn(){return(Ft&6)!==0?Rt():xc!==-1?xc:xc=Rt()}function Ka(l){return(l.mode&1)===0?1:(Ft&2)!==0&&Ln!==0?Ln&-Ln:KN.transition!==null?(kc===0&&(kc=_l()),kc):(l=Mt,l!==0||(l=window.event,l=l===void 0?16:Vf(l.type)),l)}function Gr(l,u,f,b){if(50<Eo)throw Eo=0,bp=null,Error(n(185));Ma(l,f,b),((Ft&2)===0||l!==An)&&(l===An&&((Ft&2)===0&&(vc|=f),Cn===4&&Ya(l,Ln)),ur(l,b),f===1&&Ft===0&&(u.mode&1)===0&&(vs=Rt()+500,Zl&&Ua()))}function ur(l,u){var f=l.callbackNode;nd(l,u);var b=fi(l,l===An?Ln:0);if(b===0)f!==null&&Tn(f),l.callbackNode=null,l.callbackPriority=0;else if(u=b&-b,l.callbackPriority!==u){if(f!=null&&Tn(f),u===1)l.tag===0?GN(Vv.bind(null,l)):_g(Vv.bind(null,l)),HN(function(){(Ft&6)===0&&Ua()}),f=null;else{switch(gt(b)){case 1:f=zr;break;case 4:f=Yn;break;case 16:f=Br;break;case 536870912:f=Le;break;default:f=Br}f=ey(f,Wv.bind(null,l))}l.callbackPriority=u,l.callbackNode=f}}function Wv(l,u){if(xc=-1,kc=0,(Ft&6)!==0)throw Error(n(327));var f=l.callbackNode;if(ys()&&l.callbackNode!==f)return null;var b=fi(l,l===An?Ln:0);if(b===0)return null;if((b&30)!==0||(b&l.expiredLanes)!==0||u)u=Nc(l,b);else{u=b;var S=Ft;Ft|=2;var A=Kv();(An!==l||Ln!==u)&&(ka=null,vs=Rt()+500,Ti(l,u));do try{mC();break}catch(Q){Gv(l,Q)}while(!0);Od(),gc.current=A,Ft=S,bn!==null?u=0:(An=null,Ln=0,u=Cn)}if(u!==0){if(u===2&&(S=Ys(l),S!==0&&(b=S,u=wp(l,S))),u===1)throw f=Co,Ti(l,0),Ya(l,b),ur(l,Rt()),f;if(u===6)Ya(l,b);else{if(S=l.current.alternate,(b&30)===0&&!pC(S)&&(u=Nc(l,b),u===2&&(A=Ys(l),A!==0&&(b=A,u=wp(l,A))),u===1))throw f=Co,Ti(l,0),Ya(l,b),ur(l,Rt()),f;switch(l.finishedWork=S,l.finishedLanes=b,u){case 0:case 1:throw Error(n(345));case 2:Di(l,cr,ka);break;case 3:if(Ya(l,b),(b&130023424)===b&&(u=vp+500-Rt(),10<u)){if(fi(l,0)!==0)break;if(S=l.suspendedLanes,(S&b)!==b){Jn(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=Ed(Di.bind(null,l,cr,ka),u);break}Di(l,cr,ka);break;case 4:if(Ya(l,b),(b&4194240)===b)break;for(u=l.eventTimes,S=-1;0<b;){var H=31-bt(b);A=1<<H,H=u[H],H>S&&(S=H),b&=~A}if(b=S,b=Rt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*dC(b/1960))-b,10<b){l.timeoutHandle=Ed(Di.bind(null,l,cr,ka),b);break}Di(l,cr,ka);break;case 5:Di(l,cr,ka);break;default:throw Error(n(329))}}}return ur(l,Rt()),l.callbackNode===f?Wv.bind(null,l):null}function wp(l,u){var f=So;return l.current.memoizedState.isDehydrated&&(Ti(l,u).flags|=256),l=Nc(l,u),l!==2&&(u=cr,cr=f,u!==null&&xp(u)),l}function xp(l){cr===null?cr=l:cr.push.apply(cr,l)}function pC(l){for(var u=l;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var b=0;b<f.length;b++){var S=f[b],A=S.getSnapshot;S=S.value;try{if(!Ur(A(),S))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ya(l,u){for(u&=~gp,u&=~vc,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var f=31-bt(u),b=1<<f;l[f]=-1,u&=~b}}function Vv(l){if((Ft&6)!==0)throw Error(n(327));ys();var u=fi(l,0);if((u&1)===0)return ur(l,Rt()),null;var f=Nc(l,u);if(l.tag!==0&&f===2){var b=Ys(l);b!==0&&(u=b,f=wp(l,b))}if(f===1)throw f=Co,Ti(l,0),Ya(l,u),ur(l,Rt()),f;if(f===6)throw Error(n(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Di(l,cr,ka),ur(l,Rt()),null}function kp(l,u){var f=Ft;Ft|=1;try{return l(u)}finally{Ft=f,Ft===0&&(vs=Rt()+500,Zl&&Ua())}}function Ei(l){Ga!==null&&Ga.tag===0&&(Ft&6)===0&&ys();var u=Ft;Ft|=1;var f=Rr.transition,b=Mt;try{if(Rr.transition=null,Mt=1,l)return l()}finally{Mt=b,Rr.transition=f,Ft=u,(Ft&6)===0&&Ua()}}function Np(){xr=gs.current,Xt(gs)}function Ti(l,u){l.finishedWork=null,l.finishedLanes=0;var f=l.timeoutHandle;if(f!==-1&&(l.timeoutHandle=-1,UN(f)),bn!==null)for(f=bn.return;f!==null;){var b=f;switch(Rd(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Kl();break;case 3:hs(),Xt(sr),Xt(Bn),Wd();break;case 5:Hd(b);break;case 4:hs();break;case 13:Xt(ln);break;case 19:Xt(ln);break;case 10:Pd(b.type._context);break;case 22:case 23:Np()}f=f.return}if(An=l,bn=l=Za(l.current,null),Ln=xr=u,Cn=0,Co=null,gp=vc=Si=0,cr=So=null,ki!==null){for(u=0;u<ki.length;u++)if(f=ki[u],b=f.interleaved,b!==null){f.interleaved=null;var S=b.next,A=f.pending;if(A!==null){var H=A.next;A.next=S,b.next=H}f.pending=b}ki=null}return l}function Gv(l,u){do{var f=bn;try{if(Od(),sc.current=uc,oc){for(var b=cn.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}oc=!1}if(Ci=0,jn=Nn=cn=null,yo=!1,bo=0,fp.current=null,f===null||f.return===null){Cn=1,Co=u,bn=null;break}e:{var A=l,H=f.return,Q=f,ie=u;if(u=Ln,Q.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var be=ie,Re=Q,$e=Re.tag;if((Re.mode&1)===0&&($e===0||$e===11||$e===15)){var Ae=Re.alternate;Ae?(Re.updateQueue=Ae.updateQueue,Re.memoizedState=Ae.memoizedState,Re.lanes=Ae.lanes):(Re.updateQueue=null,Re.memoizedState=null)}var Ge=yv(H);if(Ge!==null){Ge.flags&=-257,bv(Ge,H,Q,A,u),Ge.mode&1&&vv(A,be,u),u=Ge,ie=be;var et=u.updateQueue;if(et===null){var rt=new Set;rt.add(ie),u.updateQueue=rt}else et.add(ie);break e}else{if((u&1)===0){vv(A,be,u),Cp();break e}ie=Error(n(426))}}else if(nn&&Q.mode&1){var gn=yv(H);if(gn!==null){(gn.flags&65536)===0&&(gn.flags|=256),bv(gn,H,Q,A,u),Md(ms(ie,Q));break e}}A=ie=ms(ie,Q),Cn!==4&&(Cn=2),So===null?So=[A]:So.push(A),A=H;do{switch(A.tag){case 3:A.flags|=65536,u&=-u,A.lanes|=u;var fe=fv(A,ie,u);Ug(A,fe);break e;case 1:Q=ie;var ce=A.type,ge=A.stateNode;if((A.flags&128)===0&&(typeof ce.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Va===null||!Va.has(ge)))){A.flags|=65536,u&=-u,A.lanes|=u;var ze=gv(A,Q,u);Ug(A,ze);break e}}A=A.return}while(A!==null)}Zv(f)}catch(it){u=it,bn===f&&f!==null&&(bn=f=f.return);continue}break}while(!0)}function Kv(){var l=gc.current;return gc.current=uc,l===null?uc:l}function Cp(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),An===null||(Si&268435455)===0&&(vc&268435455)===0||Ya(An,Ln)}function Nc(l,u){var f=Ft;Ft|=2;var b=Kv();(An!==l||Ln!==u)&&(ka=null,Ti(l,u));do try{hC();break}catch(S){Gv(l,S)}while(!0);if(Od(),Ft=f,gc.current=b,bn!==null)throw Error(n(261));return An=null,Ln=0,Cn}function hC(){for(;bn!==null;)Yv(bn)}function mC(){for(;bn!==null&&!ea();)Yv(bn)}function Yv(l){var u=Xv(l.alternate,l,xr);l.memoizedProps=l.pendingProps,u===null?Zv(l):bn=u,fp.current=null}function Zv(l){var u=l;do{var f=u.alternate;if(l=u.return,(u.flags&32768)===0){if(f=sC(f,u,xr),f!==null){bn=f;return}}else{if(f=oC(f,u),f!==null){f.flags&=32767,bn=f;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Cn=6,bn=null;return}}if(u=u.sibling,u!==null){bn=u;return}bn=u=l}while(u!==null);Cn===0&&(Cn=5)}function Di(l,u,f){var b=Mt,S=Rr.transition;try{Rr.transition=null,Mt=1,fC(l,u,f,b)}finally{Rr.transition=S,Mt=b}return null}function fC(l,u,f,b){do ys();while(Ga!==null);if((Ft&6)!==0)throw Error(n(327));f=l.finishedWork;var S=l.finishedLanes;if(f===null)return null;if(l.finishedWork=null,l.finishedLanes=0,f===l.current)throw Error(n(177));l.callbackNode=null,l.callbackPriority=0;var A=f.lanes|f.childLanes;if(Tr(l,A),l===An&&(bn=An=null,Ln=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||bc||(bc=!0,ey(Br,function(){return ys(),null})),A=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||A){A=Rr.transition,Rr.transition=null;var H=Mt;Mt=1;var Q=Ft;Ft|=4,fp.current=null,cC(l,f),zv(f,l),MN(Cd),$l=!!Nd,Cd=Nd=null,l.current=f,uC(f),ir(),Ft=Q,Mt=H,Rr.transition=A}else l.current=f;if(bc&&(bc=!1,Ga=l,wc=S),A=l.pendingLanes,A===0&&(Va=null),Gt(f.stateNode),ur(l,Rt()),u!==null)for(b=l.onRecoverableError,f=0;f<u.length;f++)S=u[f],b(S.value,{componentStack:S.stack,digest:S.digest});if(yc)throw yc=!1,l=yp,yp=null,l;return(wc&1)!==0&&l.tag!==0&&ys(),A=l.pendingLanes,(A&1)!==0?l===bp?Eo++:(Eo=0,bp=l):Eo=0,Ua(),null}function ys(){if(Ga!==null){var l=gt(wc),u=Rr.transition,f=Mt;try{if(Rr.transition=null,Mt=16>l?16:l,Ga===null)var b=!1;else{if(l=Ga,Ga=null,wc=0,(Ft&6)!==0)throw Error(n(331));var S=Ft;for(Ft|=4,Xe=l.current;Xe!==null;){var A=Xe,H=A.child;if((Xe.flags&16)!==0){var Q=A.deletions;if(Q!==null){for(var ie=0;ie<Q.length;ie++){var be=Q[ie];for(Xe=be;Xe!==null;){var Re=Xe;switch(Re.tag){case 0:case 11:case 15:No(8,Re,A)}var $e=Re.child;if($e!==null)$e.return=Re,Xe=$e;else for(;Xe!==null;){Re=Xe;var Ae=Re.sibling,Ge=Re.return;if(Mv(Re),Re===be){Xe=null;break}if(Ae!==null){Ae.return=Ge,Xe=Ae;break}Xe=Ge}}}var et=A.alternate;if(et!==null){var rt=et.child;if(rt!==null){et.child=null;do{var gn=rt.sibling;rt.sibling=null,rt=gn}while(rt!==null)}}Xe=A}}if((A.subtreeFlags&2064)!==0&&H!==null)H.return=A,Xe=H;else e:for(;Xe!==null;){if(A=Xe,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:No(9,A,A.return)}var fe=A.sibling;if(fe!==null){fe.return=A.return,Xe=fe;break e}Xe=A.return}}var ce=l.current;for(Xe=ce;Xe!==null;){H=Xe;var ge=H.child;if((H.subtreeFlags&2064)!==0&&ge!==null)ge.return=H,Xe=ge;else e:for(H=ce;Xe!==null;){if(Q=Xe,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:fc(9,Q)}}catch(it){hn(Q,Q.return,it)}if(Q===H){Xe=null;break e}var ze=Q.sibling;if(ze!==null){ze.return=Q.return,Xe=ze;break e}Xe=Q.return}}if(Ft=S,Ua(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(tt,l)}catch{}b=!0}return b}finally{Mt=f,Rr.transition=u}}return!1}function Qv(l,u,f){u=ms(f,u),u=fv(l,u,1),l=qa(l,u,1),u=Jn(),l!==null&&(Ma(l,1,u),ur(l,u))}function hn(l,u,f){if(l.tag===3)Qv(l,l,f);else for(;u!==null;){if(u.tag===3){Qv(u,l,f);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Va===null||!Va.has(b))){l=ms(f,l),l=gv(u,l,1),u=qa(u,l,1),l=Jn(),u!==null&&(Ma(u,1,l),ur(u,l));break}}u=u.return}}function gC(l,u,f){var b=l.pingCache;b!==null&&b.delete(u),u=Jn(),l.pingedLanes|=l.suspendedLanes&f,An===l&&(Ln&f)===f&&(Cn===4||Cn===3&&(Ln&130023424)===Ln&&500>Rt()-vp?Ti(l,0):gp|=f),ur(l,u)}function Jv(l,u){u===0&&((l.mode&1)===0?u=1:(u=mi,mi<<=1,(mi&130023424)===0&&(mi=4194304)));var f=Jn();l=ba(l,u),l!==null&&(Ma(l,u,f),ur(l,f))}function vC(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),Jv(l,f)}function yC(l,u){var f=0;switch(l.tag){case 13:var b=l.stateNode,S=l.memoizedState;S!==null&&(f=S.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(u),Jv(l,f)}var Xv;Xv=function(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps||sr.current)lr=!0;else{if((l.lanes&f)===0&&(u.flags&128)===0)return lr=!1,iC(l,u,f);lr=(l.flags&131072)!==0}else lr=!1,nn&&(u.flags&1048576)!==0&&Rg(u,Jl,u.index);switch(u.lanes=0,u.tag){case 2:var b=u.type;hc(l,u),l=u.pendingProps;var S=ss(u,Bn.current);ps(u,f),S=Kd(null,u,b,l,S,f);var A=Yd();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,or(b)?(A=!0,Yl(u)):A=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Bd(u),S.updater=dc,u.stateNode=S,S._reactInternals=u,tp(u,b,l,f),u=ip(null,u,b,!0,A,f)):(u.tag=0,nn&&A&&_d(u),Qn(null,u,S,f),u=u.child),u;case 16:b=u.elementType;e:{switch(hc(l,u),l=u.pendingProps,S=b._init,b=S(b._payload),u.type=b,S=u.tag=wC(b),l=qr(b,l),S){case 0:u=ap(null,u,b,l,f);break e;case 1:u=Sv(null,u,b,l,f);break e;case 11:u=wv(null,u,b,l,f);break e;case 14:u=xv(null,u,b,qr(b.type,l),f);break e}throw Error(n(306,b,""))}return u;case 0:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:qr(b,S),ap(l,u,b,S,f);case 1:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:qr(b,S),Sv(l,u,b,S,f);case 3:e:{if(Ev(u),l===null)throw Error(n(387));b=u.pendingProps,A=u.memoizedState,S=A.element,Bg(l,u),ac(u,b,null,f);var H=u.memoizedState;if(b=H.element,A.isDehydrated)if(A={element:b,isDehydrated:!1,cache:H.cache,pendingSuspenseBoundaries:H.pendingSuspenseBoundaries,transitions:H.transitions},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){S=ms(Error(n(423)),u),u=Tv(l,u,b,f,S);break e}else if(b!==S){S=ms(Error(n(424)),u),u=Tv(l,u,b,f,S);break e}else for(wr=La(u.stateNode.containerInfo.firstChild),br=u,nn=!0,Hr=null,f=Lg(u,null,b,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(cs(),b===S){u=xa(l,u,f);break e}Qn(l,u,b,f)}u=u.child}return u;case 5:return qg(u),l===null&&$d(u),b=u.type,S=u.pendingProps,A=l!==null?l.memoizedProps:null,H=S.children,Sd(b,S)?H=null:A!==null&&Sd(b,A)&&(u.flags|=32),Cv(l,u),Qn(l,u,H,f),u.child;case 6:return l===null&&$d(u),null;case 13:return Dv(l,u,f);case 4:return Ud(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=us(u,null,b,f):Qn(l,u,b,f),u.child;case 11:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:qr(b,S),wv(l,u,b,S,f);case 7:return Qn(l,u,u.pendingProps,f),u.child;case 8:return Qn(l,u,u.pendingProps.children,f),u.child;case 12:return Qn(l,u,u.pendingProps.children,f),u.child;case 10:e:{if(b=u.type._context,S=u.pendingProps,A=u.memoizedProps,H=S.value,Yt(tc,b._currentValue),b._currentValue=H,A!==null)if(Ur(A.value,H)){if(A.children===S.children&&!sr.current){u=xa(l,u,f);break e}}else for(A=u.child,A!==null&&(A.return=u);A!==null;){var Q=A.dependencies;if(Q!==null){H=A.child;for(var ie=Q.firstContext;ie!==null;){if(ie.context===b){if(A.tag===1){ie=wa(-1,f&-f),ie.tag=2;var be=A.updateQueue;if(be!==null){be=be.shared;var Re=be.pending;Re===null?ie.next=ie:(ie.next=Re.next,Re.next=ie),be.pending=ie}}A.lanes|=f,ie=A.alternate,ie!==null&&(ie.lanes|=f),Ld(A.return,f,u),Q.lanes|=f;break}ie=ie.next}}else if(A.tag===10)H=A.type===u.type?null:A.child;else if(A.tag===18){if(H=A.return,H===null)throw Error(n(341));H.lanes|=f,Q=H.alternate,Q!==null&&(Q.lanes|=f),Ld(H,f,u),H=A.sibling}else H=A.child;if(H!==null)H.return=A;else for(H=A;H!==null;){if(H===u){H=null;break}if(A=H.sibling,A!==null){A.return=H.return,H=A;break}H=H.return}A=H}Qn(l,u,S.children,f),u=u.child}return u;case 9:return S=u.type,b=u.pendingProps.children,ps(u,f),S=Ar(S),b=b(S),u.flags|=1,Qn(l,u,b,f),u.child;case 14:return b=u.type,S=qr(b,u.pendingProps),S=qr(b.type,S),xv(l,u,b,S,f);case 15:return kv(l,u,u.type,u.pendingProps,f);case 17:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:qr(b,S),hc(l,u),u.tag=1,or(b)?(l=!0,Yl(u)):l=!1,ps(u,f),hv(u,b,S),tp(u,b,S,f),ip(null,u,b,!0,l,f);case 19:return Av(l,u,f);case 22:return Nv(l,u,f)}throw Error(n(156,u.tag))};function ey(l,u){return Vt(l,u)}function bC(l,u,f,b){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ir(l,u,f,b){return new bC(l,u,f,b)}function Sp(l){return l=l.prototype,!(!l||!l.isReactComponent)}function wC(l){if(typeof l=="function")return Sp(l)?1:0;if(l!=null){if(l=l.$$typeof,l===$)return 11;if(l===L)return 14}return 2}function Za(l,u){var f=l.alternate;return f===null?(f=Ir(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&14680064,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f}function Cc(l,u,f,b,S,A){var H=2;if(b=l,typeof l=="function")Sp(l)&&(H=1);else if(typeof l=="string")H=5;else e:switch(l){case I:return ji(f.children,S,A,u);case R:H=8,S|=8;break;case z:return l=Ir(12,f,u,S|2),l.elementType=z,l.lanes=A,l;case G:return l=Ir(13,f,u,S),l.elementType=G,l.lanes=A,l;case E:return l=Ir(19,f,u,S),l.elementType=E,l.lanes=A,l;case X:return Sc(f,S,A,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case P:H=10;break e;case q:H=9;break e;case $:H=11;break e;case L:H=14;break e;case Z:H=16,b=null;break e}throw Error(n(130,l==null?l:typeof l,""))}return u=Ir(H,f,u,S),u.elementType=l,u.type=b,u.lanes=A,u}function ji(l,u,f,b){return l=Ir(7,l,b,u),l.lanes=f,l}function Sc(l,u,f,b){return l=Ir(22,l,b,u),l.elementType=X,l.lanes=f,l.stateNode={isHidden:!1},l}function Ep(l,u,f){return l=Ir(6,l,null,u),l.lanes=f,l}function Tp(l,u,f){return u=Ir(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function xC(l,u,f,b,S){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$a(0),this.expirationTimes=$a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.identifierPrefix=b,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Dp(l,u,f,b,S,A,H,Q,ie){return l=new xC(l,u,f,Q,ie),u===1?(u=1,A===!0&&(u|=8)):u=0,A=Ir(3,null,null,u),l.current=A,A.stateNode=l,A.memoizedState={element:b,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(A),l}function kC(l,u,f){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:b==null?null:""+b,children:l,containerInfo:u,implementation:f}}function ty(l){if(!l)return Ba;l=l._reactInternals;e:{if(Ye(l)!==l||l.tag!==1)throw Error(n(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(or(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(l.tag===1){var f=l.type;if(or(f))return jg(l,f,u)}return u}function ny(l,u,f,b,S,A,H,Q,ie){return l=Dp(f,b,!0,l,S,A,H,Q,ie),l.context=ty(null),f=l.current,b=Jn(),S=Ka(f),A=wa(b,S),A.callback=u??null,qa(f,A,S),l.current.lanes=S,Ma(l,S,b),ur(l,b),l}function Ec(l,u,f,b){var S=u.current,A=Jn(),H=Ka(S);return f=ty(f),u.context===null?u.context=f:u.pendingContext=f,u=wa(A,H),u.payload={element:l},b=b===void 0?null:b,b!==null&&(u.callback=b),l=qa(S,u,H),l!==null&&(Gr(l,S,H,A),rc(l,S,H)),H}function Tc(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function ry(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function jp(l,u){ry(l,u),(l=l.alternate)&&ry(l,u)}function NC(){return null}var ay=typeof reportError=="function"?reportError:function(l){console.error(l)};function Ap(l){this._internalRoot=l}Dc.prototype.render=Ap.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));Ec(l,u,null,null)},Dc.prototype.unmount=Ap.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;Ei(function(){Ec(null,l,null,null)}),u[fa]=null}};function Dc(l){this._internalRoot=l}Dc.prototype.unstable_scheduleHydration=function(l){if(l){var u=gi();l={blockedOn:null,target:l,priority:u};for(var f=0;f<Dn.length&&u!==0&&u<Dn[f].priority;f++);Dn.splice(f,0,l),f===0&&qf(l)}};function _p(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function jc(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function iy(){}function CC(l,u,f,b,S){if(S){if(typeof b=="function"){var A=b;b=function(){var be=Tc(H);A.call(be)}}var H=ny(u,b,l,0,null,!1,!1,"",iy);return l._reactRootContainer=H,l[fa]=H.current,co(l.nodeType===8?l.parentNode:l),Ei(),H}for(;S=l.lastChild;)l.removeChild(S);if(typeof b=="function"){var Q=b;b=function(){var be=Tc(ie);Q.call(be)}}var ie=Dp(l,0,!1,null,null,!1,!1,"",iy);return l._reactRootContainer=ie,l[fa]=ie.current,co(l.nodeType===8?l.parentNode:l),Ei(function(){Ec(u,ie,f,b)}),ie}function Ac(l,u,f,b,S){var A=f._reactRootContainer;if(A){var H=A;if(typeof S=="function"){var Q=S;S=function(){var ie=Tc(H);Q.call(ie)}}Ec(u,H,l,S)}else H=CC(f,u,l,S,b);return Tc(H)}Qs=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var f=Ia(u.pendingLanes);f!==0&&(Zs(u,f|1),ur(u,Rt()),(Ft&6)===0&&(vs=Rt()+500,Ua()))}break;case 13:Ei(function(){var b=ba(l,1);if(b!==null){var S=Jn();Gr(b,l,1,S)}}),jp(l,1)}},fn=function(l){if(l.tag===13){var u=ba(l,134217728);if(u!==null){var f=Jn();Gr(u,l,134217728,f)}jp(l,134217728)}},Ht=function(l){if(l.tag===13){var u=Ka(l),f=ba(l,u);if(f!==null){var b=Jn();Gr(f,l,u,b)}jp(l,u)}},gi=function(){return Mt},ta=function(l,u){var f=Mt;try{return Mt=l,u()}finally{Mt=f}},vr=function(l,u,f){switch(u){case"input":if(V(l,f),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var b=f[u];if(b!==l&&b.form===l.form){var S=Gl(b);if(!S)throw Error(n(90));qe(b),V(b,S)}}}break;case"textarea":oe(l,f);break;case"select":u=f.value,u!=null&&Se(l,!!f.multiple,u,!1)}},Me=kp,Ze=Ei;var SC={usingClientEntryPoint:!1,Events:[ho,as,Gl,ne,Ce,kp]},To={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EC={bundleType:To.bundleType,version:To.version,rendererPackageName:To.rendererPackageName,rendererConfig:To.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Lt(l),l===null?null:l.stateNode},findFiberByHostInstance:To.findFiberByHostInstance||NC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{tt=_c.inject(EC),yt=_c}catch{}}return dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SC,dr.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(u))throw Error(n(200));return kC(l,u,null,f)},dr.createRoot=function(l,u){if(!_p(l))throw Error(n(299));var f=!1,b="",S=ay;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),u=Dp(l,1,!1,null,null,f,!1,b,S),l[fa]=u.current,co(l.nodeType===8?l.parentNode:l),new Ap(u)},dr.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=Lt(u),l=l===null?null:l.stateNode,l},dr.flushSync=function(l){return Ei(l)},dr.hydrate=function(l,u,f){if(!jc(u))throw Error(n(200));return Ac(null,l,u,!0,f)},dr.hydrateRoot=function(l,u,f){if(!_p(l))throw Error(n(405));var b=f!=null&&f.hydratedSources||null,S=!1,A="",H=ay;if(f!=null&&(f.unstable_strictMode===!0&&(S=!0),f.identifierPrefix!==void 0&&(A=f.identifierPrefix),f.onRecoverableError!==void 0&&(H=f.onRecoverableError)),u=ny(u,null,l,1,f??null,S,!1,A,H),l[fa]=u.current,co(l),b)for(l=0;l<b.length;l++)f=b[l],S=f._getVersion,S=S(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,S]:u.mutableSourceEagerHydrationData.push(f,S);return new Dc(u)},dr.render=function(l,u,f){if(!jc(u))throw Error(n(200));return Ac(null,l,u,!1,f)},dr.unmountComponentAtNode=function(l){if(!jc(l))throw Error(n(40));return l._reactRootContainer?(Ei(function(){Ac(null,null,l,!1,function(){l._reactRootContainer=null,l[fa]=null})}),!0):!1},dr.unstable_batchedUpdates=kp,dr.unstable_renderSubtreeIntoContainer=function(l,u,f,b){if(!jc(f))throw Error(n(200));if(l==null||l._reactInternals===void 0)throw Error(n(38));return Ac(l,u,f,!1,b)},dr.version="18.3.1-next-f1338f8080-20240426",dr}var hy;function ix(){if(hy)return $p.exports;hy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),$p.exports=FC(),$p.exports}var my;function OC(){if(my)return Ic;my=1;var e=ix();return Ic.createRoot=e.createRoot,Ic.hydrateRoot=e.hydrateRoot,Ic}var PC=OC(),un=ix();const LC=Ta(un),zC=ax({__proto__:null,default:LC},[un]);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},an.apply(this,arguments)}var xn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xn||(xn={}));const fy="popstate";function BC(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:c}=r.location;return el("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Ui(a)}return HC(t,n,null,e)}function Dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function UC(){return Math.random().toString(36).substr(2,8)}function gy(e,t){return{usr:e.state,key:e.key,idx:t}}function el(e,t,n,r){return n===void 0&&(n=null),an({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ci(t):t,{state:n,key:t&&t.key||r||UC()})}function Ui(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ci(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function HC(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,c=xn.Pop,d=null,p=h();p==null&&(p=0,o.replaceState(an({},o.state,{idx:p}),""));function h(){return(o.state||{idx:null}).idx}function m(){c=xn.Pop;let k=h(),N=k==null?null:k-p;p=k,d&&d({action:c,location:y.location,delta:N})}function v(k,N){c=xn.Push;let C=el(y.location,k,N);p=h()+1;let T=gy(C,p),j=y.createHref(C);try{o.pushState(T,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(j)}i&&d&&d({action:c,location:y.location,delta:1})}function g(k,N){c=xn.Replace;let C=el(y.location,k,N);p=h();let T=gy(C,p),j=y.createHref(C);o.replaceState(T,"",j),i&&d&&d({action:c,location:y.location,delta:0})}function x(k){let N=a.location.origin!=="null"?a.location.origin:a.location.href,C=typeof k=="string"?k:Ui(k);return C=C.replace(/ $/,"%20"),Dt(N,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,N)}let y={get action(){return c},get location(){return e(a,o)},listen(k){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(fy,m),d=k,()=>{a.removeEventListener(fy,m),d=null}},createHref(k){return t(a,k)},createURL:x,encodeLocation(k){let N=x(k);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:g,go(k){return o.go(k)}};return y}var qt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qt||(qt={}));const qC=new Set(["lazy","caseSensitive","path","id","index","children"]);function WC(e){return e.index===!0}function du(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((a,i)=>{let o=[...n,String(i)],c=typeof a.id=="string"?a.id:o.join("-");if(Dt(a.index!==!0||!a.children,"Cannot specify children on an index route"),Dt(!r[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),WC(a)){let d=an({},a,t(a),{id:c});return r[c]=d,d}else{let d=an({},a,t(a),{id:c,children:void 0});return r[c]=d,a.children&&(d.children=du(a.children,t,o,r)),d}})}function _i(e,t,n){return n===void 0&&(n="/"),nu(e,t,n,!1)}function nu(e,t,n,r){let a=typeof t=="string"?ci(t):t,i=oi(a.pathname||"/",n);if(i==null)return null;let o=sx(e);GC(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let p=aS(i);c=nS(o[d],p,r)}return c}function VC(e,t){let{route:n,pathname:r,params:a}=e;return{id:n.id,pathname:r,params:a,data:t[n.id],handle:n.handle}}function sx(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Dt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=Ea([r,d.relativePath]),h=n.concat(d);i.children&&i.children.length>0&&(Dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),sx(i.children,t,h,p)),!(i.path==null&&!i.index)&&t.push({path:p,score:eS(p,i.index),routesMeta:h})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,o);else for(let d of ox(i.path))a(i,o,d)}),t}function ox(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=ox(r.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function GC(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tS(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KC=/^:[\w-]+$/,YC=3,ZC=2,QC=1,JC=10,XC=-2,vy=e=>e==="*";function eS(e,t){let n=e.split("/"),r=n.length;return n.some(vy)&&(r+=XC),t&&(r+=ZC),n.filter(a=>!vy(a)).reduce((a,i)=>a+(KC.test(i)?YC:i===""?QC:JC),r)}function tS(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function nS(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,a={},i="/",o=[];for(let c=0;c<r.length;++c){let d=r[c],p=c===r.length-1,h=i==="/"?t:t.slice(i.length)||"/",m=yy({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},h),v=d.route;if(!m&&p&&n&&!r[r.length-1].route.index&&(m=yy({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},h)),!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Ea([i,m.pathname]),pathnameBase:lS(Ea([i,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(i=Ea([i,m.pathnameBase]))}return o}function yy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rS(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((p,h,m)=>{let{paramName:v,isOptional:g}=h;if(v==="*"){let y=c[m]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=c[m];return g&&!x?p[v]=void 0:p[v]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:o,pattern:e}}function rS(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Bi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function aS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function oi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const iS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sS=e=>iS.test(e);function oS(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?ci(e):e,i;if(n)if(sS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Bi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=by(n.substring(1),"/"):i=by(n,t)}else i=t;return{pathname:i,search:cS(r),hash:uS(a)}}function by(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Op(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Im(e,t){let n=lx(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $m(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=ci(e):(a=an({},e),Dt(!a.pathname||!a.pathname.includes("?"),Op("?","pathname","search",a)),Dt(!a.pathname||!a.pathname.includes("#"),Op("#","pathname","hash",a)),Dt(!a.search||!a.search.includes("#"),Op("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=n;else{let m=t.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;a.pathname=v.join("/")}c=m>=0?t[m]:"/"}let d=oS(a,c),p=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||h)&&(d.pathname+="/"),d}const Ea=e=>e.join("/").replace(/\/\/+/g,"/"),lS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class pu{constructor(t,n,r,a){a===void 0&&(a=!1),this.status=t,this.statusText=n||"",this.internal=a,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function tl(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cx=["post","put","patch","delete"],dS=new Set(cx),pS=["get",...cx],hS=new Set(pS),mS=new Set([301,302,303,307,308]),fS=new Set([307,308]),Pp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gS={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Cs={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Mm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vS=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),ux="remix-router-transitions";function yS(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Dt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(e.mapRouteProperties)a=e.mapRouteProperties;else if(e.detectErrorBoundary){let Y=e.detectErrorBoundary;a=re=>({hasErrorBoundary:Y(re)})}else a=vS;let i={},o=du(e.routes,a,void 0,i),c,d=e.basename||"/",p=e.dataStrategy||kS,h=e.patchRoutesOnNavigation,m=an({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),v=null,g=new Set,x=null,y=null,k=null,N=e.hydrationData!=null,C=_i(o,e.history.location,d),T=!1,j=null;if(C==null&&!h){let Y=mr(404,{pathname:e.history.location.pathname}),{matches:re,route:he}=Ay(o);C=re,j={[he.id]:Y}}C&&!e.hydrationData&&Ze(C,o,e.history.location.pathname).active&&(C=null);let D;if(C)if(C.some(Y=>Y.route.lazy))D=!1;else if(!C.some(Y=>Y.route.loader))D=!0;else if(m.v7_partialHydration){let Y=e.hydrationData?e.hydrationData.loaderData:null,re=e.hydrationData?e.hydrationData.errors:null;if(re){let he=C.findIndex(Ne=>re[Ne.route.id]!==void 0);D=C.slice(0,he+1).every(Ne=>!Uh(Ne.route,Y,re))}else D=C.every(he=>!Uh(he.route,Y,re))}else D=e.hydrationData!=null;else if(D=!1,C=[],m.v7_partialHydration){let Y=Ze(null,o,e.history.location.pathname);Y.active&&Y.matches&&(T=!0,C=Y.matches)}let _,I={historyAction:e.history.action,location:e.history.location,matches:C,initialized:D,navigation:Pp,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||j,fetchers:new Map,blockers:new Map},R=xn.Pop,z=!1,P,q=!1,$=new Map,G=null,E=!1,L=!1,Z=[],X=new Set,K=new Map,ee=0,U=-1,M=new Map,F=new Set,B=new Map,le=new Map,pe=new Set,de=new Map,je=new Map,ye;function Te(){if(v=e.history.listen(Y=>{let{action:re,location:he,delta:Ne}=Y;if(ye){ye(),ye=void 0;return}Bi(je.size===0||Ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Oe=vr({currentLocation:I.location,nextLocation:he,historyAction:re});if(Oe&&Ne!=null){let We=new Promise(at=>{ye=at});e.history.go(Ne*-1),Kn(Oe,{state:"blocked",location:he,proceed(){Kn(Oe,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),We.then(()=>e.history.go(Ne))},reset(){let at=new Map(I.blockers);at.set(Oe,Cs),qe({blockers:at})}});return}return te(re,he)}),n){FS(t,$);let Y=()=>OS(t,$);t.addEventListener("pagehide",Y),G=()=>t.removeEventListener("pagehide",Y)}return I.initialized||te(xn.Pop,I.location,{initialHydration:!0}),_}function Ie(){v&&v(),G&&G(),g.clear(),P&&P.abort(),I.fetchers.forEach((Y,re)=>vt(re)),I.blockers.forEach((Y,re)=>Qt(re))}function ve(Y){return g.add(Y),()=>g.delete(Y)}function qe(Y,re){re===void 0&&(re={}),I=an({},I,Y);let he=[],Ne=[];m.v7_fetcherPersist&&I.fetchers.forEach((Oe,We)=>{Oe.state==="idle"&&(pe.has(We)?Ne.push(We):he.push(We))}),pe.forEach(Oe=>{!I.fetchers.has(Oe)&&!K.has(Oe)&&Ne.push(Oe)}),[...g].forEach(Oe=>Oe(I,{deletedFetchers:Ne,viewTransitionOpts:re.viewTransitionOpts,flushSync:re.flushSync===!0})),m.v7_fetcherPersist?(he.forEach(Oe=>I.fetchers.delete(Oe)),Ne.forEach(Oe=>vt(Oe))):Ne.forEach(Oe=>pe.delete(Oe))}function st(Y,re,he){var Ne,Oe;let{flushSync:We}=he===void 0?{}:he,at=I.actionData!=null&&I.navigation.formMethod!=null&&Kr(I.navigation.formMethod)&&I.navigation.state==="loading"&&((Ne=Y.state)==null?void 0:Ne._isRedirect)!==!0,Ve;re.actionData?Object.keys(re.actionData).length>0?Ve=re.actionData:Ve=null:at?Ve=I.actionData:Ve=null;let Qe=re.loaderData?Dy(I.loaderData,re.loaderData,re.matches||[],re.errors):I.loaderData,Ke=I.blockers;Ke.size>0&&(Ke=new Map(Ke),Ke.forEach((Nt,tn)=>Ke.set(tn,Cs)));let Ye=z===!0||I.navigation.formMethod!=null&&Kr(I.navigation.formMethod)&&((Oe=Y.state)==null?void 0:Oe._isRedirect)!==!0;c&&(o=c,c=void 0),E||R===xn.Pop||(R===xn.Push?e.history.push(Y,Y.state):R===xn.Replace&&e.history.replace(Y,Y.state));let ft;if(R===xn.Pop){let Nt=$.get(I.location.pathname);Nt&&Nt.has(Y.pathname)?ft={currentLocation:I.location,nextLocation:Y}:$.has(Y.pathname)&&(ft={currentLocation:Y,nextLocation:I.location})}else if(q){let Nt=$.get(I.location.pathname);Nt?Nt.add(Y.pathname):(Nt=new Set([Y.pathname]),$.set(I.location.pathname,Nt)),ft={currentLocation:I.location,nextLocation:Y}}qe(an({},re,{actionData:Ve,loaderData:Qe,historyAction:R,location:Y,initialized:!0,navigation:Pp,revalidation:"idle",restoreScrollPosition:Me(Y,re.matches||I.matches),preventScrollReset:Ye,blockers:Ke}),{viewTransitionOpts:ft,flushSync:We===!0}),R=xn.Pop,z=!1,q=!1,E=!1,L=!1,Z=[]}async function O(Y,re){if(typeof Y=="number"){e.history.go(Y);return}let he=Bh(I.location,I.matches,d,m.v7_prependBasename,Y,m.v7_relativeSplatPath,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:Ne,submission:Oe,error:We}=wy(m.v7_normalizeFormMethod,!1,he,re),at=I.location,Ve=el(I.location,Ne,re&&re.state);Ve=an({},Ve,e.history.encodeLocation(Ve));let Qe=re&&re.replace!=null?re.replace:void 0,Ke=xn.Push;Qe===!0?Ke=xn.Replace:Qe===!1||Oe!=null&&Kr(Oe.formMethod)&&Oe.formAction===I.location.pathname+I.location.search&&(Ke=xn.Replace);let Ye=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,ft=(re&&re.flushSync)===!0,Nt=vr({currentLocation:at,nextLocation:Ve,historyAction:Ke});if(Nt){Kn(Nt,{state:"blocked",location:Ve,proceed(){Kn(Nt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ve}),O(Y,re)},reset(){let tn=new Map(I.blockers);tn.set(Nt,Cs),qe({blockers:tn})}});return}return await te(Ke,Ve,{submission:Oe,pendingError:We,preventScrollReset:Ye,replace:re&&re.replace,enableViewTransition:re&&re.viewTransition,flushSync:ft})}function xe(){if(we(),qe({revalidation:"loading"}),I.navigation.state!=="submitting"){if(I.navigation.state==="idle"){te(I.historyAction,I.location,{startUninterruptedRevalidation:!0});return}te(R||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:q===!0})}}async function te(Y,re,he){P&&P.abort(),P=null,R=Y,E=(he&&he.startUninterruptedRevalidation)===!0,Ce(I.location,I.matches),z=(he&&he.preventScrollReset)===!0,q=(he&&he.enableViewTransition)===!0;let Ne=c||o,Oe=he&&he.overrideNavigation,We=he!=null&&he.initialHydration&&I.matches&&I.matches.length>0&&!T?I.matches:_i(Ne,re,d),at=(he&&he.flushSync)===!0;if(We&&I.initialized&&!L&&DS(I.location,re)&&!(he&&he.submission&&Kr(he.submission.formMethod))){st(re,{matches:We},{flushSync:at});return}let Ve=Ze(We,Ne,re.pathname);if(Ve.active&&Ve.matches&&(We=Ve.matches),!We){let{error:Lt,notFoundMatches:Tt,route:Vt}=Mn(re.pathname);st(re,{matches:Tt,loaderData:{},errors:{[Vt.id]:Lt}},{flushSync:at});return}P=new AbortController;let Qe=bs(e.history,re,P.signal,he&&he.submission),Ke;if(he&&he.pendingError)Ke=[Ri(We).route.id,{type:qt.error,error:he.pendingError}];else if(he&&he.submission&&Kr(he.submission.formMethod)){let Lt=await V(Qe,re,he.submission,We,Ve.active,{replace:he.replace,flushSync:at});if(Lt.shortCircuited)return;if(Lt.pendingActionResult){let[Tt,Vt]=Lt.pendingActionResult;if(Nr(Vt)&&tl(Vt.error)&&Vt.error.status===404){P=null,st(re,{matches:Lt.matches,loaderData:{},errors:{[Tt]:Vt.error}});return}}We=Lt.matches||We,Ke=Lt.pendingActionResult,Oe=Lp(re,he.submission),at=!1,Ve.active=!1,Qe=bs(e.history,Qe.url,Qe.signal)}let{shortCircuited:Ye,matches:ft,loaderData:Nt,errors:tn}=await W(Qe,re,We,Ve.active,Oe,he&&he.submission,he&&he.fetcherSubmission,he&&he.replace,he&&he.initialHydration===!0,at,Ke);Ye||(P=null,st(re,an({matches:ft||We},jy(Ke),{loaderData:Nt,errors:tn})))}async function V(Y,re,he,Ne,Oe,We){We===void 0&&(We={}),we();let at=$S(re,he);if(qe({navigation:at},{flushSync:We.flushSync===!0}),Oe){let Ke=await wt(Ne,re.pathname,Y.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let Ye=Ri(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,pendingActionResult:[Ye,{type:qt.error,error:Ke.error}]}}else if(Ke.matches)Ne=Ke.matches;else{let{notFoundMatches:Ye,error:ft,route:Nt}=Mn(re.pathname);return{matches:Ye,pendingActionResult:[Nt.id,{type:qt.error,error:ft}]}}}let Ve,Qe=qo(Ne,re);if(!Qe.route.action&&!Qe.route.lazy)Ve={type:qt.error,error:mr(405,{method:Y.method,pathname:re.pathname,routeId:Qe.route.id})};else if(Ve=(await me("action",I,Y,[Qe],Ne,null))[Qe.route.id],Y.signal.aborted)return{shortCircuited:!0};if(Fi(Ve)){let Ke;return We&&We.replace!=null?Ke=We.replace:Ke=Sy(Ve.response.headers.get("Location"),new URL(Y.url),d)===I.location.pathname+I.location.search,await oe(Y,Ve,!0,{submission:he,replace:Ke}),{shortCircuited:!0}}if(ii(Ve))throw mr(400,{type:"defer-action"});if(Nr(Ve)){let Ke=Ri(Ne,Qe.route.id);return(We&&We.replace)!==!0&&(R=xn.Push),{matches:Ne,pendingActionResult:[Ke.route.id,Ve]}}return{matches:Ne,pendingActionResult:[Qe.route.id,Ve]}}async function W(Y,re,he,Ne,Oe,We,at,Ve,Qe,Ke,Ye){let ft=Oe||Lp(re,We),Nt=We||at||Ry(ft),tn=!E&&(!m.v7_partialHydration||!Qe);if(Ne){if(tn){let tt=se(Ye);qe(an({navigation:ft},tt!==void 0?{actionData:tt}:{}),{flushSync:Ke})}let Le=await wt(he,re.pathname,Y.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let tt=Ri(Le.partialMatches).route.id;return{matches:Le.partialMatches,loaderData:{},errors:{[tt]:Le.error}}}else if(Le.matches)he=Le.matches;else{let{error:tt,notFoundMatches:yt,route:Gt}=Mn(re.pathname);return{matches:yt,loaderData:{},errors:{[Gt.id]:tt}}}}let Lt=c||o,[Tt,Vt]=ky(e.history,I,he,Nt,re,m.v7_partialHydration&&Qe===!0,m.v7_skipActionErrorRevalidation,L,Z,X,pe,B,F,Lt,d,Ye);if(Et(Le=>!(he&&he.some(tt=>tt.route.id===Le))||Tt&&Tt.some(tt=>tt.route.id===Le)),U=++ee,Tt.length===0&&Vt.length===0){let Le=yn();return st(re,an({matches:he,loaderData:{},errors:Ye&&Nr(Ye[1])?{[Ye[0]]:Ye[1].error}:null},jy(Ye),Le?{fetchers:new Map(I.fetchers)}:{}),{flushSync:Ke}),{shortCircuited:!0}}if(tn){let Le={};if(!Ne){Le.navigation=ft;let tt=se(Ye);tt!==void 0&&(Le.actionData=tt)}Vt.length>0&&(Le.fetchers=ke(Vt)),qe(Le,{flushSync:Ke})}Vt.forEach(Le=>{ht(Le.key),Le.controller&&K.set(Le.key,Le.controller)});let Tn=()=>Vt.forEach(Le=>ht(Le.key));P&&P.signal.addEventListener("abort",Tn);let{loaderResults:ea,fetcherResults:ir}=await ae(I,he,Tt,Vt,Y);if(Y.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Tn),Vt.forEach(Le=>K.delete(Le.key));let Rt=$c(ea);if(Rt)return await oe(Y,Rt.result,!0,{replace:Ve}),{shortCircuited:!0};if(Rt=$c(ir),Rt)return F.add(Rt.key),await oe(Y,Rt.result,!0,{replace:Ve}),{shortCircuited:!0};let{loaderData:hi,errors:zr}=Ty(I,he,ea,Ye,Vt,ir,de);de.forEach((Le,tt)=>{Le.subscribe(yt=>{(yt||Le.done)&&de.delete(tt)})}),m.v7_partialHydration&&Qe&&I.errors&&(zr=an({},I.errors,zr));let Yn=yn(),Br=jt(U),Fe=Yn||Br||Vt.length>0;return an({matches:he,loaderData:hi,errors:zr},Fe?{fetchers:new Map(I.fetchers)}:{})}function se(Y){if(Y&&!Nr(Y[1]))return{[Y[0]]:Y[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function ke(Y){return Y.forEach(re=>{let he=I.fetchers.get(re.key),Ne=jo(void 0,he?he.data:void 0);I.fetchers.set(re.key,Ne)}),new Map(I.fetchers)}function Se(Y,re,he,Ne){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ht(Y);let Oe=(Ne&&Ne.flushSync)===!0,We=c||o,at=Bh(I.location,I.matches,d,m.v7_prependBasename,he,m.v7_relativeSplatPath,re,Ne==null?void 0:Ne.relative),Ve=_i(We,at,d),Qe=Ze(Ve,We,at);if(Qe.active&&Qe.matches&&(Ve=Qe.matches),!Ve){He(Y,re,mr(404,{pathname:at}),{flushSync:Oe});return}let{path:Ke,submission:Ye,error:ft}=wy(m.v7_normalizeFormMethod,!0,at,Ne);if(ft){He(Y,re,ft,{flushSync:Oe});return}let Nt=qo(Ve,Ke),tn=(Ne&&Ne.preventScrollReset)===!0;if(Ye&&Kr(Ye.formMethod)){ue(Y,re,Ke,Nt,Ve,Qe.active,Oe,tn,Ye);return}B.set(Y,{routeId:re,path:Ke}),_e(Y,re,Ke,Nt,Ve,Qe.active,Oe,tn,Ye)}async function ue(Y,re,he,Ne,Oe,We,at,Ve,Qe){we(),B.delete(Y);function Ke(bt){if(!bt.route.action&&!bt.route.lazy){let Fn=mr(405,{method:Qe.formMethod,pathname:he,routeId:re});return He(Y,re,Fn,{flushSync:at}),!0}return!1}if(!We&&Ke(Ne))return;let Ye=I.fetchers.get(Y);De(Y,MS(Qe,Ye),{flushSync:at});let ft=new AbortController,Nt=bs(e.history,he,ft.signal,Qe);if(We){let bt=await wt(Oe,new URL(Nt.url).pathname,Nt.signal,Y);if(bt.type==="aborted")return;if(bt.type==="error"){He(Y,re,bt.error,{flushSync:at});return}else if(bt.matches){if(Oe=bt.matches,Ne=qo(Oe,he),Ke(Ne))return}else{He(Y,re,mr(404,{pathname:he}),{flushSync:at});return}}K.set(Y,ft);let tn=ee,Tt=(await me("action",I,Nt,[Ne],Oe,Y))[Ne.route.id];if(Nt.signal.aborted){K.get(Y)===ft&&K.delete(Y);return}if(m.v7_fetcherPersist&&pe.has(Y)){if(Fi(Tt)||Nr(Tt)){De(Y,ni(void 0));return}}else{if(Fi(Tt))if(K.delete(Y),U>tn){De(Y,ni(void 0));return}else return F.add(Y),De(Y,jo(Qe)),oe(Nt,Tt,!1,{fetcherSubmission:Qe,preventScrollReset:Ve});if(Nr(Tt)){He(Y,re,Tt.error);return}}if(ii(Tt))throw mr(400,{type:"defer-action"});let Vt=I.navigation.location||I.location,Tn=bs(e.history,Vt,ft.signal),ea=c||o,ir=I.navigation.state!=="idle"?_i(ea,I.navigation.location,d):I.matches;Dt(ir,"Didn't find any matches after fetcher action");let Rt=++ee;M.set(Y,Rt);let hi=jo(Qe,Tt.data);I.fetchers.set(Y,hi);let[zr,Yn]=ky(e.history,I,ir,Qe,Vt,!1,m.v7_skipActionErrorRevalidation,L,Z,X,pe,B,F,ea,d,[Ne.route.id,Tt]);Yn.filter(bt=>bt.key!==Y).forEach(bt=>{let Fn=bt.key,ma=I.fetchers.get(Fn),On=jo(void 0,ma?ma.data:void 0);I.fetchers.set(Fn,On),ht(Fn),bt.controller&&K.set(Fn,bt.controller)}),qe({fetchers:new Map(I.fetchers)});let Br=()=>Yn.forEach(bt=>ht(bt.key));ft.signal.addEventListener("abort",Br);let{loaderResults:Fe,fetcherResults:Le}=await ae(I,ir,zr,Yn,Tn);if(ft.signal.aborted)return;ft.signal.removeEventListener("abort",Br),M.delete(Y),K.delete(Y),Yn.forEach(bt=>K.delete(bt.key));let tt=$c(Fe);if(tt)return oe(Tn,tt.result,!1,{preventScrollReset:Ve});if(tt=$c(Le),tt)return F.add(tt.key),oe(Tn,tt.result,!1,{preventScrollReset:Ve});let{loaderData:yt,errors:Gt}=Ty(I,ir,Fe,void 0,Yn,Le,de);if(I.fetchers.has(Y)){let bt=ni(Tt.data);I.fetchers.set(Y,bt)}jt(Rt),I.navigation.state==="loading"&&Rt>U?(Dt(R,"Expected pending action"),P&&P.abort(),st(I.navigation.location,{matches:ir,loaderData:yt,errors:Gt,fetchers:new Map(I.fetchers)})):(qe({errors:Gt,loaderData:Dy(I.loaderData,yt,ir,Gt),fetchers:new Map(I.fetchers)}),L=!1)}async function _e(Y,re,he,Ne,Oe,We,at,Ve,Qe){let Ke=I.fetchers.get(Y);De(Y,jo(Qe,Ke?Ke.data:void 0),{flushSync:at});let Ye=new AbortController,ft=bs(e.history,he,Ye.signal);if(We){let Tt=await wt(Oe,new URL(ft.url).pathname,ft.signal,Y);if(Tt.type==="aborted")return;if(Tt.type==="error"){He(Y,re,Tt.error,{flushSync:at});return}else if(Tt.matches)Oe=Tt.matches,Ne=qo(Oe,he);else{He(Y,re,mr(404,{pathname:he}),{flushSync:at});return}}K.set(Y,Ye);let Nt=ee,Lt=(await me("loader",I,ft,[Ne],Oe,Y))[Ne.route.id];if(ii(Lt)&&(Lt=await Fm(Lt,ft.signal,!0)||Lt),K.get(Y)===Ye&&K.delete(Y),!ft.signal.aborted){if(pe.has(Y)){De(Y,ni(void 0));return}if(Fi(Lt))if(U>Nt){De(Y,ni(void 0));return}else{F.add(Y),await oe(ft,Lt,!1,{preventScrollReset:Ve});return}if(Nr(Lt)){He(Y,re,Lt.error);return}Dt(!ii(Lt),"Unhandled fetcher deferred data"),De(Y,ni(Lt.data))}}async function oe(Y,re,he,Ne){let{submission:Oe,fetcherSubmission:We,preventScrollReset:at,replace:Ve}=Ne===void 0?{}:Ne;re.response.headers.has("X-Remix-Revalidate")&&(L=!0);let Qe=re.response.headers.get("Location");Dt(Qe,"Expected a Location header on the redirect Response"),Qe=Sy(Qe,new URL(Y.url),d);let Ke=el(I.location,Qe,{_isRedirect:!0});if(n){let Tt=!1;if(re.response.headers.has("X-Remix-Reload-Document"))Tt=!0;else if(Mm.test(Qe)){const Vt=e.history.createURL(Qe);Tt=Vt.origin!==t.location.origin||oi(Vt.pathname,d)==null}if(Tt){Ve?t.location.replace(Qe):t.location.assign(Qe);return}}P=null;let Ye=Ve===!0||re.response.headers.has("X-Remix-Replace")?xn.Replace:xn.Push,{formMethod:ft,formAction:Nt,formEncType:tn}=I.navigation;!Oe&&!We&&ft&&Nt&&tn&&(Oe=Ry(I.navigation));let Lt=Oe||We;if(fS.has(re.response.status)&&Lt&&Kr(Lt.formMethod))await te(Ye,Ke,{submission:an({},Lt,{formAction:Qe}),preventScrollReset:at||z,enableViewTransition:he?q:void 0});else{let Tt=Lp(Ke,Oe);await te(Ye,Ke,{overrideNavigation:Tt,fetcherSubmission:We,preventScrollReset:at||z,enableViewTransition:he?q:void 0})}}async function me(Y,re,he,Ne,Oe,We){let at,Ve={};try{at=await NS(p,Y,re,he,Ne,Oe,We,i,a)}catch(Qe){return Ne.forEach(Ke=>{Ve[Ke.route.id]={type:qt.error,error:Qe}}),Ve}for(let[Qe,Ke]of Object.entries(at))if(jS(Ke)){let Ye=Ke.result;Ve[Qe]={type:qt.redirect,response:ES(Ye,he,Qe,Oe,d,m.v7_relativeSplatPath)}}else Ve[Qe]=await SS(Ke);return Ve}async function ae(Y,re,he,Ne,Oe){let We=Y.matches,at=me("loader",Y,Oe,he,re,null),Ve=Promise.all(Ne.map(async Ye=>{if(Ye.matches&&Ye.match&&Ye.controller){let Nt=(await me("loader",Y,bs(e.history,Ye.path,Ye.controller.signal),[Ye.match],Ye.matches,Ye.key))[Ye.match.route.id];return{[Ye.key]:Nt}}else return Promise.resolve({[Ye.key]:{type:qt.error,error:mr(404,{pathname:Ye.path})}})})),Qe=await at,Ke=(await Ve).reduce((Ye,ft)=>Object.assign(Ye,ft),{});return await Promise.all([RS(re,Qe,Oe.signal,We,Y.loaderData),IS(re,Ke,Ne)]),{loaderResults:Qe,fetcherResults:Ke}}function we(){L=!0,Z.push(...Et()),B.forEach((Y,re)=>{K.has(re)&&X.add(re),ht(re)})}function De(Y,re,he){he===void 0&&(he={}),I.fetchers.set(Y,re),qe({fetchers:new Map(I.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function He(Y,re,he,Ne){Ne===void 0&&(Ne={});let Oe=Ri(I.matches,re);vt(Y),qe({errors:{[Oe.route.id]:he},fetchers:new Map(I.fetchers)},{flushSync:(Ne&&Ne.flushSync)===!0})}function pt(Y){return le.set(Y,(le.get(Y)||0)+1),pe.has(Y)&&pe.delete(Y),I.fetchers.get(Y)||gS}function vt(Y){let re=I.fetchers.get(Y);K.has(Y)&&!(re&&re.state==="loading"&&M.has(Y))&&ht(Y),B.delete(Y),M.delete(Y),F.delete(Y),m.v7_fetcherPersist&&pe.delete(Y),X.delete(Y),I.fetchers.delete(Y)}function dn(Y){let re=(le.get(Y)||0)-1;re<=0?(le.delete(Y),pe.add(Y),m.v7_fetcherPersist||vt(Y)):le.set(Y,re),qe({fetchers:new Map(I.fetchers)})}function ht(Y){let re=K.get(Y);re&&(re.abort(),K.delete(Y))}function mn(Y){for(let re of Y){let he=pt(re),Ne=ni(he.data);I.fetchers.set(re,Ne)}}function yn(){let Y=[],re=!1;for(let he of F){let Ne=I.fetchers.get(he);Dt(Ne,"Expected fetcher: "+he),Ne.state==="loading"&&(F.delete(he),Y.push(he),re=!0)}return mn(Y),re}function jt(Y){let re=[];for(let[he,Ne]of M)if(Ne<Y){let Oe=I.fetchers.get(he);Dt(Oe,"Expected fetcher: "+he),Oe.state==="loading"&&(ht(he),M.delete(he),re.push(he))}return mn(re),re.length>0}function kn(Y,re){let he=I.blockers.get(Y)||Cs;return je.get(Y)!==re&&je.set(Y,re),he}function Qt(Y){I.blockers.delete(Y),je.delete(Y)}function Kn(Y,re){let he=I.blockers.get(Y)||Cs;Dt(he.state==="unblocked"&&re.state==="blocked"||he.state==="blocked"&&re.state==="blocked"||he.state==="blocked"&&re.state==="proceeding"||he.state==="blocked"&&re.state==="unblocked"||he.state==="proceeding"&&re.state==="unblocked","Invalid blocker state transition: "+he.state+" -> "+re.state);let Ne=new Map(I.blockers);Ne.set(Y,re),qe({blockers:Ne})}function vr(Y){let{currentLocation:re,nextLocation:he,historyAction:Ne}=Y;if(je.size===0)return;je.size>1&&Bi(!1,"A router only supports one blocker at a time");let Oe=Array.from(je.entries()),[We,at]=Oe[Oe.length-1],Ve=I.blockers.get(We);if(!(Ve&&Ve.state==="proceeding")&&at({currentLocation:re,nextLocation:he,historyAction:Ne}))return We}function Mn(Y){let re=mr(404,{pathname:Y}),he=c||o,{matches:Ne,route:Oe}=Ay(he);return Et(),{notFoundMatches:Ne,route:Oe,error:re}}function Et(Y){let re=[];return de.forEach((he,Ne)=>{(!Y||Y(Ne))&&(he.cancel(),re.push(Ne),de.delete(Ne))}),re}function Bt(Y,re,he){if(x=Y,k=re,y=he||null,!N&&I.navigation===Pp){N=!0;let Ne=Me(I.location,I.matches);Ne!=null&&qe({restoreScrollPosition:Ne})}return()=>{x=null,k=null,y=null}}function ne(Y,re){return y&&y(Y,re.map(Ne=>VC(Ne,I.loaderData)))||Y.key}function Ce(Y,re){if(x&&k){let he=ne(Y,re);x[he]=k()}}function Me(Y,re){if(x){let he=ne(Y,re),Ne=x[he];if(typeof Ne=="number")return Ne}return null}function Ze(Y,re,he){if(h)if(Y){if(Object.keys(Y[0].params).length>0)return{active:!0,matches:nu(re,he,d,!0)}}else return{active:!0,matches:nu(re,he,d,!0)||[]};return{active:!1,matches:null}}async function wt(Y,re,he,Ne){if(!h)return{type:"success",matches:Y};let Oe=Y;for(;;){let We=c==null,at=c||o,Ve=i;try{await h({signal:he,path:re,matches:Oe,fetcherKey:Ne,patch:(Ye,ft)=>{he.aborted||Cy(Ye,ft,at,Ve,a)}})}catch(Ye){return{type:"error",error:Ye,partialMatches:Oe}}finally{We&&!he.aborted&&(o=[...o])}if(he.aborted)return{type:"aborted"};let Qe=_i(at,re,d);if(Qe)return{type:"success",matches:Qe};let Ke=nu(at,re,d,!0);if(!Ke||Oe.length===Ke.length&&Oe.every((Ye,ft)=>Ye.route.id===Ke[ft].route.id))return{type:"success",matches:null};Oe=Ke}}function $t(Y){i={},c=du(Y,a,void 0,i)}function Be(Y,re){let he=c==null;Cy(Y,re,c||o,i,a),he&&(o=[...o],qe({}))}return _={get basename(){return d},get future(){return m},get state(){return I},get routes(){return o},get window(){return t},initialize:Te,subscribe:ve,enableScrollRestoration:Bt,navigate:O,fetch:Se,revalidate:xe,createHref:Y=>e.history.createHref(Y),encodeLocation:Y=>e.history.encodeLocation(Y),getFetcher:pt,deleteFetcher:dn,dispose:Ie,getBlocker:kn,deleteBlocker:Qt,patchRoutes:Be,_internalFetchControllers:K,_internalActiveDeferreds:de,_internalSetRoutes:$t},_}function bS(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Bh(e,t,n,r,a,i,o,c){let d,p;if(o){d=[];for(let m of t)if(d.push(m),m.route.id===o){p=m;break}}else d=t,p=t[t.length-1];let h=$m(a||".",Im(d,i),oi(e.pathname,n)||e.pathname,c==="path");if(a==null&&(h.search=e.search,h.hash=e.hash),(a==null||a===""||a===".")&&p){let m=Om(h.search);if(p.route.index&&!m)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!p.route.index&&m){let v=new URLSearchParams(h.search),g=v.getAll("index");v.delete("index"),g.filter(y=>y).forEach(y=>v.append("index",y));let x=v.toString();h.search=x?"?"+x:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Ea([n,h.pathname])),Ui(h)}function wy(e,t,n,r){if(!r||!bS(r))return{path:n};if(r.formMethod&&!_S(r.formMethod))return{path:n,error:mr(405,{method:r.formMethod})};let a=()=>({path:n,error:mr(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=e?i.toUpperCase():i.toLowerCase(),c=hx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Kr(o))return a();let v=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,x)=>{let[y,k]=x;return""+g+y+"="+k+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:v}}}else if(r.formEncType==="application/json"){if(!Kr(o))return a();try{let v=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:c,formEncType:r.formEncType,formData:void 0,json:v,text:void 0}}}catch{return a()}}}Dt(typeof FormData=="function","FormData is not available in this environment");let d,p;if(r.formData)d=Hh(r.formData),p=r.formData;else if(r.body instanceof FormData)d=Hh(r.body),p=r.body;else if(r.body instanceof URLSearchParams)d=r.body,p=Ey(d);else if(r.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(r.body),p=Ey(d)}catch{return a()}let h={formMethod:o,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Kr(h.formMethod))return{path:n,submission:h};let m=ci(n);return t&&m.search&&Om(m.search)&&d.append("index",""),m.search="?"+d,{path:Ui(m),submission:h}}function xy(e,t,n){n===void 0&&(n=!1);let r=e.findIndex(a=>a.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function ky(e,t,n,r,a,i,o,c,d,p,h,m,v,g,x,y){let k=y?Nr(y[1])?y[1].error:y[1].data:void 0,N=e.createURL(t.location),C=e.createURL(a),T=n;i&&t.errors?T=xy(n,Object.keys(t.errors)[0],!0):y&&Nr(y[1])&&(T=xy(n,y[0]));let j=y?y[1].statusCode:void 0,D=o&&j&&j>=400,_=T.filter((R,z)=>{let{route:P}=R;if(P.lazy)return!0;if(P.loader==null)return!1;if(i)return Uh(P,t.loaderData,t.errors);if(wS(t.loaderData,t.matches[z],R)||d.some(G=>G===R.route.id))return!0;let q=t.matches[z],$=R;return Ny(R,an({currentUrl:N,currentParams:q.params,nextUrl:C,nextParams:$.params},r,{actionResult:k,actionStatus:j,defaultShouldRevalidate:D?!1:c||N.pathname+N.search===C.pathname+C.search||N.search!==C.search||dx(q,$)}))}),I=[];return m.forEach((R,z)=>{if(i||!n.some(E=>E.route.id===R.routeId)||h.has(z))return;let P=_i(g,R.path,x);if(!P){I.push({key:z,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let q=t.fetchers.get(z),$=qo(P,R.path),G=!1;v.has(z)?G=!1:p.has(z)?(p.delete(z),G=!0):q&&q.state!=="idle"&&q.data===void 0?G=c:G=Ny($,an({currentUrl:N,currentParams:t.matches[t.matches.length-1].params,nextUrl:C,nextParams:n[n.length-1].params},r,{actionResult:k,actionStatus:j,defaultShouldRevalidate:D?!1:c})),G&&I.push({key:z,routeId:R.routeId,path:R.path,matches:P,match:$,controller:new AbortController})}),[_,I]}function Uh(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,a=n!=null&&n[e.id]!==void 0;return!r&&a?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!a}function wS(e,t,n){let r=!t||n.route.id!==t.route.id,a=e[n.route.id]===void 0;return r||a}function dx(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ny(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function Cy(e,t,n,r,a){var i;let o;if(e){let p=r[e];Dt(p,"No route found to patch children into: routeId = "+e),p.children||(p.children=[]),o=p.children}else o=n;let c=t.filter(p=>!o.some(h=>px(p,h))),d=du(c,a,[e||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],r);o.push(...d)}function px(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var a;return(a=t.children)==null?void 0:a.some(i=>px(n,i))}):!1}async function xS(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let a=n[e.id];Dt(a,"No route found in manifest");let i={};for(let o in r){let d=a[o]!==void 0&&o!=="hasErrorBoundary";Bi(!d,'Route "'+a.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!d&&!qC.has(o)&&(i[o]=r[o])}Object.assign(a,i),Object.assign(a,an({},t(a),{lazy:void 0}))}async function kS(e){let{matches:t}=e,n=t.filter(a=>a.shouldLoad);return(await Promise.all(n.map(a=>a.resolve()))).reduce((a,i,o)=>Object.assign(a,{[n[o].route.id]:i}),{})}async function NS(e,t,n,r,a,i,o,c,d,p){let h=i.map(g=>g.route.lazy?xS(g.route,d,c):void 0),m=i.map((g,x)=>{let y=h[x],k=a.some(C=>C.route.id===g.route.id);return an({},g,{shouldLoad:k,resolve:async C=>(C&&r.method==="GET"&&(g.route.lazy||g.route.loader)&&(k=!0),k?CS(t,r,g,y,C,p):Promise.resolve({type:qt.data,result:void 0}))})}),v=await e({matches:m,request:r,params:i[0].params,fetcherKey:o,context:p});try{await Promise.all(h)}catch{}return v}async function CS(e,t,n,r,a,i){let o,c,d=p=>{let h,m=new Promise((x,y)=>h=y);c=()=>h(),t.signal.addEventListener("abort",c);let v=x=>typeof p!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):p({request:t,params:n.params,context:i},...x!==void 0?[x]:[]),g=(async()=>{try{return{type:"data",result:await(a?a(y=>v(y)):v())}}catch(x){return{type:"error",result:x}}})();return Promise.race([g,m])};try{let p=n.route[e];if(r)if(p){let h,[m]=await Promise.all([d(p).catch(v=>{h=v}),r]);if(h!==void 0)throw h;o=m}else if(await r,p=n.route[e],p)o=await d(p);else if(e==="action"){let h=new URL(t.url),m=h.pathname+h.search;throw mr(405,{method:t.method,pathname:m,routeId:n.route.id})}else return{type:qt.data,result:void 0};else if(p)o=await d(p);else{let h=new URL(t.url),m=h.pathname+h.search;throw mr(404,{pathname:m})}Dt(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(p){return{type:qt.error,result:p}}finally{c&&t.signal.removeEventListener("abort",c)}return o}async function SS(e){let{result:t,type:n}=e;if(mx(t)){let m;try{let v=t.headers.get("Content-Type");v&&/\bapplication\/json\b/.test(v)?t.body==null?m=null:m=await t.json():m=await t.text()}catch(v){return{type:qt.error,error:v}}return n===qt.error?{type:qt.error,error:new pu(t.status,t.statusText,m),statusCode:t.status,headers:t.headers}:{type:qt.data,data:m,statusCode:t.status,headers:t.headers}}if(n===qt.error){if(_y(t)){var r,a;if(t.data instanceof Error){var i,o;return{type:qt.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}}return{type:qt.error,error:new pu(((r=t.init)==null?void 0:r.status)||500,void 0,t.data),statusCode:tl(t)?t.status:void 0,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}}return{type:qt.error,error:t,statusCode:tl(t)?t.status:void 0}}if(AS(t)){var c,d;return{type:qt.deferred,deferredData:t,statusCode:(c=t.init)==null?void 0:c.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}if(_y(t)){var p,h;return{type:qt.data,data:t.data,statusCode:(p=t.init)==null?void 0:p.status,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}}return{type:qt.data,data:t}}function ES(e,t,n,r,a,i){let o=e.headers.get("Location");if(Dt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Mm.test(o)){let c=r.slice(0,r.findIndex(d=>d.route.id===n)+1);o=Bh(new URL(t.url),c,a,!0,o,i),e.headers.set("Location",o)}return e}function Sy(e,t,n){if(Mm.test(e)){let r=e,a=r.startsWith("//")?new URL(t.protocol+r):new URL(r),i=oi(a.pathname,n)!=null;if(a.origin===t.origin&&i)return a.pathname+a.search+a.hash}return e}function bs(e,t,n,r){let a=e.createURL(hx(t)).toString(),i={signal:n};if(r&&Kr(r.formMethod)){let{formMethod:o,formEncType:c}=r;i.method=o.toUpperCase(),c==="application/json"?(i.headers=new Headers({"Content-Type":c}),i.body=JSON.stringify(r.json)):c==="text/plain"?i.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?i.body=Hh(r.formData):i.body=r.formData}return new Request(a,i)}function Hh(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function Ey(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function TS(e,t,n,r,a){let i={},o=null,c,d=!1,p={},h=n&&Nr(n[1])?n[1].error:void 0;return e.forEach(m=>{if(!(m.route.id in t))return;let v=m.route.id,g=t[v];if(Dt(!Fi(g),"Cannot handle redirect results in processLoaderData"),Nr(g)){let x=g.error;h!==void 0&&(x=h,h=void 0),o=o||{};{let y=Ri(e,v);o[y.route.id]==null&&(o[y.route.id]=x)}i[v]=void 0,d||(d=!0,c=tl(g.error)?g.error.status:500),g.headers&&(p[v]=g.headers)}else ii(g)?(r.set(v,g.deferredData),i[v]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!d&&(c=g.statusCode),g.headers&&(p[v]=g.headers)):(i[v]=g.data,g.statusCode&&g.statusCode!==200&&!d&&(c=g.statusCode),g.headers&&(p[v]=g.headers))}),h!==void 0&&n&&(o={[n[0]]:h},i[n[0]]=void 0),{loaderData:i,errors:o,statusCode:c||200,loaderHeaders:p}}function Ty(e,t,n,r,a,i,o){let{loaderData:c,errors:d}=TS(t,n,r,o);return a.forEach(p=>{let{key:h,match:m,controller:v}=p,g=i[h];if(Dt(g,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(Nr(g)){let x=Ri(e.matches,m==null?void 0:m.route.id);d&&d[x.route.id]||(d=an({},d,{[x.route.id]:g.error})),e.fetchers.delete(h)}else if(Fi(g))Dt(!1,"Unhandled fetcher revalidation redirect");else if(ii(g))Dt(!1,"Unhandled fetcher deferred data");else{let x=ni(g.data);e.fetchers.set(h,x)}}),{loaderData:c,errors:d}}function Dy(e,t,n,r){let a=an({},t);for(let i of n){let o=i.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(a[o]=t[o]):e[o]!==void 0&&i.route.loader&&(a[o]=e[o]),r&&r.hasOwnProperty(o))break}return a}function jy(e){return e?Nr(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ri(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function Ay(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function mr(e,t){let{pathname:n,routeId:r,method:a,type:i,message:o}=t===void 0?{}:t,c="Unknown Server Error",d="Unknown @remix-run/router error";return e===400?(c="Bad Request",a&&n&&r?d="You made a "+a+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?d="defer() is not supported in actions":i==="invalid-body"&&(d="Unable to encode submission body")):e===403?(c="Forbidden",d='Route "'+r+'" does not match URL "'+n+'"'):e===404?(c="Not Found",d='No route matches URL "'+n+'"'):e===405&&(c="Method Not Allowed",a&&n&&r?d="You made a "+a.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":a&&(d='Invalid request method "'+a.toUpperCase()+'"')),new pu(e||500,c,new Error(d),!0)}function $c(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,a]=t[n];if(Fi(a))return{key:r,result:a}}}function hx(e){let t=typeof e=="string"?ci(e):e;return Ui(an({},t,{hash:""}))}function DS(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function jS(e){return mx(e.result)&&mS.has(e.result.status)}function ii(e){return e.type===qt.deferred}function Nr(e){return e.type===qt.error}function Fi(e){return(e&&e.type)===qt.redirect}function _y(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function AS(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function mx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _S(e){return hS.has(e.toLowerCase())}function Kr(e){return dS.has(e.toLowerCase())}async function RS(e,t,n,r,a){let i=Object.entries(t);for(let o=0;o<i.length;o++){let[c,d]=i[o],p=e.find(v=>(v==null?void 0:v.route.id)===c);if(!p)continue;let h=r.find(v=>v.route.id===p.route.id),m=h!=null&&!dx(h,p)&&(a&&a[p.route.id])!==void 0;ii(d)&&m&&await Fm(d,n,!1).then(v=>{v&&(t[c]=v)})}}async function IS(e,t,n){for(let r=0;r<n.length;r++){let{key:a,routeId:i,controller:o}=n[r],c=t[a];e.find(p=>(p==null?void 0:p.route.id)===i)&&ii(c)&&(Dt(o,"Expected an AbortController for revalidating fetcher deferred result"),await Fm(c,o.signal,!0).then(p=>{p&&(t[a]=p)}))}}async function Fm(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:qt.data,data:e.deferredData.unwrappedData}}catch(a){return{type:qt.error,error:a}}return{type:qt.data,data:e.deferredData.data}}}function Om(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function qo(e,t){let n=typeof t=="string"?ci(t).search:t.search;if(e[e.length-1].route.index&&Om(n||""))return e[e.length-1];let r=lx(e);return r[r.length-1]}function Ry(e){let{formMethod:t,formAction:n,formEncType:r,text:a,formData:i,json:o}=e;if(!(!t||!n||!r)){if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Lp(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function $S(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function jo(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function MS(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ni(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function FS(e,t){try{let n=e.sessionStorage.getItem(ux);if(n){let r=JSON.parse(n);for(let[a,i]of Object.entries(r||{}))i&&Array.isArray(i)&&t.set(a,new Set(i||[]))}}catch{}}function OS(e,t){if(t.size>0){let n={};for(let[r,a]of t)n[r]=[...a];try{e.sessionStorage.setItem(ux,JSON.stringify(n))}catch(r){Bi(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ms(){return Ms=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ms.apply(this,arguments)}const Iu=w.createContext(null),fx=w.createContext(null),Vi=w.createContext(null),Pm=w.createContext(null),Da=w.createContext({outlet:null,matches:[],isDataRoute:!1}),gx=w.createContext(null);function PS(e,t){let{relative:n}=t===void 0?{}:t;ml()||Dt(!1);let{basename:r,navigator:a}=w.useContext(Vi),{hash:i,pathname:o,search:c}=bx(e,{relative:n}),d=o;return r!=="/"&&(d=o==="/"?r:Ea([r,o])),a.createHref({pathname:d,search:c,hash:i})}function ml(){return w.useContext(Pm)!=null}function pa(){return ml()||Dt(!1),w.useContext(Pm).location}function vx(e){w.useContext(Vi).static||w.useLayoutEffect(e)}function Gi(){let{isDataRoute:e}=w.useContext(Da);return e?JS():LS()}function LS(){ml()||Dt(!1);let e=w.useContext(Iu),{basename:t,future:n,navigator:r}=w.useContext(Vi),{matches:a}=w.useContext(Da),{pathname:i}=pa(),o=JSON.stringify(Im(a,n.v7_relativeSplatPath)),c=w.useRef(!1);return vx(()=>{c.current=!0}),w.useCallback(function(p,h){if(h===void 0&&(h={}),!c.current)return;if(typeof p=="number"){r.go(p);return}let m=$m(p,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ea([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,o,i,e])}const zS=w.createContext(null);function BS(e){let t=w.useContext(Da).outlet;return t&&w.createElement(zS.Provider,{value:e},t)}function yx(){let{matches:e}=w.useContext(Da),t=e[e.length-1];return t?t.params:{}}function bx(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=w.useContext(Vi),{matches:a}=w.useContext(Da),{pathname:i}=pa(),o=JSON.stringify(Im(a,r.v7_relativeSplatPath));return w.useMemo(()=>$m(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function US(e,t,n,r){ml()||Dt(!1);let{navigator:a}=w.useContext(Vi),{matches:i}=w.useContext(Da),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let p=pa(),h;h=p;let m=h.pathname||"/",v=m;if(d!=="/"){let y=d.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=_i(e,{pathname:v});return GS(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:Ea([d,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Ea([d,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r)}function HS(){let e=YS(),t=tl(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:a},n):null,null)}const qS=w.createElement(HS,null);class WS extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Da.Provider,{value:this.props.routeContext},w.createElement(gx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VS(e){let{routeContext:t,match:n,children:r}=e,a=w.useContext(Iu);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Da.Provider,{value:t},r)}function GS(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,c=(a=n)==null?void 0:a.errors;if(c!=null){let h=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);h>=0||Dt(!1),o=o.slice(0,Math.min(o.length,h+1))}let d=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=h),m.route.id){let{loaderData:v,errors:g}=n,x=m.route.loader&&v[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||x){d=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((h,m,v)=>{let g,x=!1,y=null,k=null;n&&(g=c&&m.route.id?c[m.route.id]:void 0,y=m.route.errorElement||qS,d&&(p<0&&v===0?(XS("route-fallback"),x=!0,k=null):p===v&&(x=!0,k=m.route.hydrateFallbackElement||null)));let N=t.concat(o.slice(0,v+1)),C=()=>{let T;return g?T=y:x?T=k:m.route.Component?T=w.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=h,w.createElement(VS,{match:m,routeContext:{outlet:h,matches:N,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?w.createElement(WS,{location:n.location,revalidation:n.revalidation,component:y,error:g,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):C()},null)}var wx=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(wx||{}),xx=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(xx||{});function kx(e){let t=w.useContext(Iu);return t||Dt(!1),t}function Nx(e){let t=w.useContext(fx);return t||Dt(!1),t}function KS(e){let t=w.useContext(Da);return t||Dt(!1),t}function Cx(e){let t=KS(),n=t.matches[t.matches.length-1];return n.route.id||Dt(!1),n.route.id}function YS(){var e;let t=w.useContext(gx),n=Nx(),r=Cx();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}let ZS=0;function QS(e){let{router:t,basename:n}=kx(),r=Nx(),[a,i]=w.useState(""),o=w.useCallback(c=>{if(typeof e!="function")return!!e;if(n==="/")return e(c);let{currentLocation:d,nextLocation:p,historyAction:h}=c;return e({currentLocation:Ms({},d,{pathname:oi(d.pathname,n)||d.pathname}),nextLocation:Ms({},p,{pathname:oi(p.pathname,n)||p.pathname}),historyAction:h})},[n,e]);return w.useEffect(()=>{let c=String(++ZS);return i(c),()=>t.deleteBlocker(c)},[t]),w.useEffect(()=>{a!==""&&t.getBlocker(a,o)},[t,a,o]),a&&r.blockers.has(a)?r.blockers.get(a):Cs}function JS(){let{router:e}=kx(wx.UseNavigateStable),t=Cx(xx.UseNavigateStable),n=w.useRef(!1);return vx(()=>{n.current=!0}),w.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ms({fromRouteId:t},i)))},[e,t])}const Iy={};function XS(e,t,n){Iy[e]||(Iy[e]=!0)}function eE(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function tE(e){return BS(e.context)}function nE(e){let{basename:t="/",children:n=null,location:r,navigationType:a=xn.Pop,navigator:i,static:o=!1,future:c}=e;ml()&&Dt(!1);let d=t.replace(/^\/*/,"/"),p=w.useMemo(()=>({basename:d,navigator:i,static:o,future:Ms({v7_relativeSplatPath:!1},c)}),[d,c,i,o]);typeof r=="string"&&(r=ci(r));let{pathname:h="/",search:m="",hash:v="",state:g=null,key:x="default"}=r,y=w.useMemo(()=>{let k=oi(h,d);return k==null?null:{location:{pathname:k,search:m,hash:v,state:g,key:x},navigationType:a}},[d,h,m,v,g,x,a]);return y==null?null:w.createElement(Vi.Provider,{value:p},w.createElement(Pm.Provider,{children:n,value:y}))}new Promise(()=>{});function rE(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:w.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:w.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:w.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nl.apply(this,arguments)}function aE(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function iE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function sE(e,t){return e.button===0&&(!t||t==="_self")&&!iE(e)}function qh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function oE(e,t){let n=qh(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const lE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cE="6";try{window.__reactRouterVersion=cE}catch{}function uE(e,t){return yS({basename:void 0,future:nl({},void 0,{v7_prependBasename:!0}),history:BC({window:void 0}),hydrationData:dE(),routes:e,mapRouteProperties:rE,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function dE(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=nl({},t,{errors:pE(t.errors)})),t}function pE(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,a]of t)if(a&&a.__type==="RouteErrorResponse")n[r]=new pu(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let i=window[a.__subType];if(typeof i=="function")try{let o=new i(a.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(a.message);i.stack="",n[r]=i}}else n[r]=a;return n}const hE=w.createContext({isTransitioning:!1}),mE=w.createContext(new Map),fE="startTransition",$y=IC[fE],gE="flushSync",My=zC[gE];function vE(e){$y?$y(e):e()}function Ao(e){My?My(e):e()}class yE{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function bE(e){let{fallbackElement:t,router:n,future:r}=e,[a,i]=w.useState(n.state),[o,c]=w.useState(),[d,p]=w.useState({isTransitioning:!1}),[h,m]=w.useState(),[v,g]=w.useState(),[x,y]=w.useState(),k=w.useRef(new Map),{v7_startTransition:N}=r||{},C=w.useCallback(R=>{N?vE(R):R()},[N]),T=w.useCallback((R,z)=>{let{deletedFetchers:P,flushSync:q,viewTransitionOpts:$}=z;R.fetchers.forEach((E,L)=>{E.data!==void 0&&k.current.set(L,E.data)}),P.forEach(E=>k.current.delete(E));let G=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!$||G){q?Ao(()=>i(R)):C(()=>i(R));return}if(q){Ao(()=>{v&&(h&&h.resolve(),v.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation})});let E=n.window.document.startViewTransition(()=>{Ao(()=>i(R))});E.finished.finally(()=>{Ao(()=>{m(void 0),g(void 0),c(void 0),p({isTransitioning:!1})})}),Ao(()=>g(E));return}v?(h&&h.resolve(),v.skipTransition(),y({state:R,currentLocation:$.currentLocation,nextLocation:$.nextLocation})):(c(R),p({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}))},[n.window,v,h,k,C]);w.useLayoutEffect(()=>n.subscribe(T),[n,T]),w.useEffect(()=>{d.isTransitioning&&!d.flushSync&&m(new yE)},[d]),w.useEffect(()=>{if(h&&o&&n.window){let R=o,z=h.promise,P=n.window.document.startViewTransition(async()=>{C(()=>i(R)),await z});P.finished.finally(()=>{m(void 0),g(void 0),c(void 0),p({isTransitioning:!1})}),g(P)}},[C,o,h,n.window]),w.useEffect(()=>{h&&o&&a.location.key===o.location.key&&h.resolve()},[h,v,a.location,o]),w.useEffect(()=>{!d.isTransitioning&&x&&(c(x.state),p({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),y(void 0))},[d.isTransitioning,x]),w.useEffect(()=>{},[]);let j=w.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,z,P)=>n.navigate(R,{state:z,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(R,z,P)=>n.navigate(R,{replace:!0,state:z,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),D=n.basename||"/",_=w.useMemo(()=>({router:n,navigator:j,static:!1,basename:D}),[n,j,D]),I=w.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return w.useEffect(()=>eE(r,n.future),[r,n.future]),w.createElement(w.Fragment,null,w.createElement(Iu.Provider,{value:_},w.createElement(fx.Provider,{value:a},w.createElement(mE.Provider,{value:k.current},w.createElement(hE.Provider,{value:d},w.createElement(nE,{basename:D,location:a.location,navigationType:a.historyAction,navigator:j,future:I},a.initialized||n.future.v7_partialHydration?w.createElement(wE,{routes:n.routes,future:n.future,state:a}):t))))),null)}const wE=w.memo(xE);function xE(e){let{routes:t,future:n,state:r}=e;return US(t,void 0,r,n)}const kE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zn=w.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:c,target:d,to:p,preventScrollReset:h,viewTransition:m}=t,v=aE(t,lE),{basename:g}=w.useContext(Vi),x,y=!1;if(typeof p=="string"&&NE.test(p)&&(x=p,kE))try{let T=new URL(window.location.href),j=p.startsWith("//")?new URL(T.protocol+p):new URL(p),D=oi(j.pathname,g);j.origin===T.origin&&D!=null?p=D+j.search+j.hash:y=!0}catch{}let k=PS(p,{relative:a}),N=CE(p,{replace:o,state:c,target:d,preventScrollReset:h,relative:a,viewTransition:m});function C(T){r&&r(T),T.defaultPrevented||N(T)}return w.createElement("a",nl({},v,{href:x||k,onClick:y||i?r:C,ref:n,target:d}))});var Fy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Fy||(Fy={}));var Oy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Oy||(Oy={}));function CE(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:c}=t===void 0?{}:t,d=Gi(),p=pa(),h=bx(e,{relative:o});return w.useCallback(m=>{if(sE(m,n)){m.preventDefault();let v=r!==void 0?r:Ui(p)===Ui(h);d(e,{replace:v,state:a,preventScrollReset:i,relative:o,viewTransition:c})}},[p,d,h,r,a,n,e,i,o,c])}function SE(e){let t=w.useRef(qh(e)),n=w.useRef(!1),r=pa(),a=w.useMemo(()=>oE(r.search,n.current?null:t.current),[r.search]),i=Gi(),o=w.useCallback((c,d)=>{const p=qh(typeof c=="function"?c(a):c);n.current=!0,i("?"+p,d)},[i,a]);return[a,o]}var zp,Py;function EE(){if(Py)return zp;Py=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(i,o){if(i===o)return!0;if(i&&o&&typeof i=="object"&&typeof o=="object"){if(i.constructor!==o.constructor)return!1;var c,d,p;if(Array.isArray(i)){if(c=i.length,c!=o.length)return!1;for(d=c;d--!==0;)if(!a(i[d],o[d]))return!1;return!0}var h;if(t&&i instanceof Map&&o instanceof Map){if(i.size!==o.size)return!1;for(h=i.entries();!(d=h.next()).done;)if(!o.has(d.value[0]))return!1;for(h=i.entries();!(d=h.next()).done;)if(!a(d.value[1],o.get(d.value[0])))return!1;return!0}if(n&&i instanceof Set&&o instanceof Set){if(i.size!==o.size)return!1;for(h=i.entries();!(d=h.next()).done;)if(!o.has(d.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(o)){if(c=i.length,c!=o.length)return!1;for(d=c;d--!==0;)if(i[d]!==o[d])return!1;return!0}if(i.constructor===RegExp)return i.source===o.source&&i.flags===o.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof o.valueOf=="function")return i.valueOf()===o.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof o.toString=="function")return i.toString()===o.toString();if(p=Object.keys(i),c=p.length,c!==Object.keys(o).length)return!1;for(d=c;d--!==0;)if(!Object.prototype.hasOwnProperty.call(o,p[d]))return!1;if(e&&i instanceof Element)return!1;for(d=c;d--!==0;)if(!((p[d]==="_owner"||p[d]==="__v"||p[d]==="__o")&&i.$$typeof)&&!a(i[p[d]],o[p[d]]))return!1;return!0}return i!==i&&o!==o}return zp=function(o,c){try{return a(o,c)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},zp}var TE=EE();const DE=Ta(TE);var Bp,Ly;function jE(){if(Ly)return Bp;Ly=1;var e=function(t,n,r,a,i,o,c,d){if(!t){var p;if(n===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[r,a,i,o,c,d],m=0;p=new Error(n.replace(/%s/g,function(){return h[m++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};return Bp=e,Bp}var AE=jE();const zy=Ta(AE);var Up,By;function _E(){return By||(By=1,Up=function(t,n,r,a){var i=r?r.call(a,t,n):void 0;if(i!==void 0)return!!i;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var o=Object.keys(t),c=Object.keys(n);if(o.length!==c.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(n),p=0;p<o.length;p++){var h=o[p];if(!d(h))return!1;var m=t[h],v=n[h];if(i=r?r.call(a,m,v,h):void 0,i===!1||i===void 0&&m!==v)return!1}return!0}),Up}var RE=_E();const IE=Ta(RE);var Sx=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(Sx||{}),Hp={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Uy=Object.values(Sx),Lm={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},$E=Object.entries(Lm).reduce((e,[t,n])=>(e[n]=t,e),{}),Qr="data-rh",As={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},_s=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const r=e[n];if(Object.prototype.hasOwnProperty.call(r,t))return r[t]}return null},ME=e=>{let t=_s(e,"title");const n=_s(e,As.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,()=>t);const r=_s(e,As.DEFAULT_TITLE);return t||r||void 0},FE=e=>_s(e,As.ON_CHANGE_CLIENT_STATE)||(()=>{}),qp=(e,t)=>t.filter(n=>typeof n[e]<"u").map(n=>n[e]).reduce((n,r)=>({...n,...r}),{}),OE=(e,t)=>t.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const a=Object.keys(r);for(let i=0;i<a.length;i+=1){const c=a[i].toLowerCase();if(e.indexOf(c)!==-1&&r[c])return n.concat(r)}}return n},[]),PE=e=>console&&typeof console.warn=="function"&&console.warn(e),_o=(e,t,n)=>{const r={};return n.filter(a=>Array.isArray(a[e])?!0:(typeof a[e]<"u"&&PE(`Helmet: ${e} should be of type "Array". Instead found type "${typeof a[e]}"`),!1)).map(a=>a[e]).reverse().reduce((a,i)=>{const o={};i.filter(d=>{let p;const h=Object.keys(d);for(let v=0;v<h.length;v+=1){const g=h[v],x=g.toLowerCase();t.indexOf(x)!==-1&&!(p==="rel"&&d[p].toLowerCase()==="canonical")&&!(x==="rel"&&d[x].toLowerCase()==="stylesheet")&&(p=x),t.indexOf(g)!==-1&&(g==="innerHTML"||g==="cssText"||g==="itemprop")&&(p=g)}if(!p||!d[p])return!1;const m=d[p].toLowerCase();return r[p]||(r[p]={}),o[p]||(o[p]={}),r[p][m]?!1:(o[p][m]=!0,!0)}).reverse().forEach(d=>a.push(d));const c=Object.keys(o);for(let d=0;d<c.length;d+=1){const p=c[d],h={...r[p],...o[p]};r[p]=h}return a},[]).reverse()},LE=(e,t)=>{if(Array.isArray(e)&&e.length){for(let n=0;n<e.length;n+=1)if(e[n][t])return!0}return!1},zE=e=>({baseTag:OE(["href"],e),bodyAttributes:qp("bodyAttributes",e),defer:_s(e,As.DEFER),encode:_s(e,As.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:qp("htmlAttributes",e),linkTags:_o("link",["rel","href"],e),metaTags:_o("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:_o("noscript",["innerHTML"],e),onChangeClientState:FE(e),scriptTags:_o("script",["src","innerHTML"],e),styleTags:_o("style",["cssText"],e),title:ME(e),titleAttributes:qp("titleAttributes",e),prioritizeSeoTags:LE(e,As.PRIORITIZE_SEO_TAGS)}),Ex=e=>Array.isArray(e)?e.join(""):e,BE=(e,t)=>{const n=Object.keys(e);for(let r=0;r<n.length;r+=1)if(t[n[r]]&&t[n[r]].includes(e[n[r]]))return!0;return!1},Wp=(e,t)=>Array.isArray(e)?e.reduce((n,r)=>(BE(r,t)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:e,priority:[]},Hy=(e,t)=>({...e,[t]:void 0}),UE=["noscript","script","style"],Wh=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Tx=e=>Object.keys(e).reduce((t,n)=>{const r=typeof e[n]<"u"?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${r}`:r},""),HE=(e,t,n,r)=>{const a=Tx(n),i=Ex(t);return a?`<${e} ${Qr}="true" ${a}>${Wh(i,r)}</${e}>`:`<${e} ${Qr}="true">${Wh(i,r)}</${e}>`},qE=(e,t,n=!0)=>t.reduce((r,a)=>{const i=a,o=Object.keys(i).filter(p=>!(p==="innerHTML"||p==="cssText")).reduce((p,h)=>{const m=typeof i[h]>"u"?h:`${h}="${Wh(i[h],n)}"`;return p?`${p} ${m}`:m},""),c=i.innerHTML||i.cssText||"",d=UE.indexOf(e)===-1;return`${r}<${e} ${Qr}="true" ${o}${d?"/>":`>${c}</${e}>`}`},""),Dx=(e,t={})=>Object.keys(e).reduce((n,r)=>{const a=Lm[r];return n[a||r]=e[r],n},t),WE=(e,t,n)=>{const r={key:t,[Qr]:!0},a=Dx(n,r);return[Ot.createElement("title",a,t)]},ru=(e,t)=>t.map((n,r)=>{const a={key:r,[Qr]:!0};return Object.keys(n).forEach(i=>{const c=Lm[i]||i;if(c==="innerHTML"||c==="cssText"){const d=n.innerHTML||n.cssText;a.dangerouslySetInnerHTML={__html:d}}else a[c]=n[i]}),Ot.createElement(e,a)}),$r=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>WE(e,t.title,t.titleAttributes),toString:()=>HE(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Dx(t),toString:()=>Tx(t)};default:return{toComponent:()=>ru(e,t),toString:()=>qE(e,t,n)}}},VE=({metaTags:e,linkTags:t,scriptTags:n,encode:r})=>{const a=Wp(e,Hp.meta),i=Wp(t,Hp.link),o=Wp(n,Hp.script);return{priorityMethods:{toComponent:()=>[...ru("meta",a.priority),...ru("link",i.priority),...ru("script",o.priority)],toString:()=>`${$r("meta",a.priority,r)} ${$r("link",i.priority,r)} ${$r("script",o.priority,r)}`},metaTags:a.default,linkTags:i.default,scriptTags:o.default}},GE=e=>{const{baseTag:t,bodyAttributes:n,encode:r=!0,htmlAttributes:a,noscriptTags:i,styleTags:o,title:c="",titleAttributes:d,prioritizeSeoTags:p}=e;let{linkTags:h,metaTags:m,scriptTags:v}=e,g={toComponent:()=>{},toString:()=>""};return p&&({priorityMethods:g,linkTags:h,metaTags:m,scriptTags:v}=VE(e)),{priority:g,base:$r("base",t,r),bodyAttributes:$r("bodyAttributes",n,r),htmlAttributes:$r("htmlAttributes",a,r),link:$r("link",h,r),meta:$r("meta",m,r),noscript:$r("noscript",i,r),script:$r("script",v,r),style:$r("style",o,r),title:$r("title",{title:c,titleAttributes:d},r)}},Vh=GE,Mc=[],jx=!!(typeof window<"u"&&window.document&&window.document.createElement),Gh=class{constructor(e,t){Rn(this,"instances",[]);Rn(this,"canUseDOM",jx);Rn(this,"context");Rn(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Mc:this.instances,add:e=>{(this.canUseDOM?Mc:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Mc:this.instances).indexOf(e);(this.canUseDOM?Mc:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Vh({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},KE={},Ax=Ot.createContext(KE),Oi,_x=(Oi=class extends w.Component{constructor(n){super(n);Rn(this,"helmetData");this.helmetData=new Gh(this.props.context||{},Oi.canUseDOM)}render(){return Ot.createElement(Ax.Provider,{value:this.helmetData.value},this.props.children)}},Rn(Oi,"canUseDOM",jx),Oi),ws=(e,t)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${e}[${Qr}]`),a=[].slice.call(r),i=[];let o;return t&&t.length&&t.forEach(c=>{const d=document.createElement(e);for(const p in c)if(Object.prototype.hasOwnProperty.call(c,p))if(p==="innerHTML")d.innerHTML=c.innerHTML;else if(p==="cssText")d.styleSheet?d.styleSheet.cssText=c.cssText:d.appendChild(document.createTextNode(c.cssText));else{const h=p,m=typeof c[h]>"u"?"":c[h];d.setAttribute(p,m)}d.setAttribute(Qr,"true"),a.some((p,h)=>(o=h,d.isEqualNode(p)))?a.splice(o,1):i.push(d)}),a.forEach(c=>{var d;return(d=c.parentNode)==null?void 0:d.removeChild(c)}),i.forEach(c=>n.appendChild(c)),{oldTags:a,newTags:i}},Kh=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const r=n.getAttribute(Qr),a=r?r.split(","):[],i=[...a],o=Object.keys(t);for(const c of o){const d=t[c]||"";n.getAttribute(c)!==d&&n.setAttribute(c,d),a.indexOf(c)===-1&&a.push(c);const p=i.indexOf(c);p!==-1&&i.splice(p,1)}for(let c=i.length-1;c>=0;c-=1)n.removeAttribute(i[c]);a.length===i.length?n.removeAttribute(Qr):n.getAttribute(Qr)!==o.join(",")&&n.setAttribute(Qr,o.join(","))},YE=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=Ex(e)),Kh("title",t)},qy=(e,t)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:a,linkTags:i,metaTags:o,noscriptTags:c,onChangeClientState:d,scriptTags:p,styleTags:h,title:m,titleAttributes:v}=e;Kh("body",r),Kh("html",a),YE(m,v);const g={baseTag:ws("base",n),linkTags:ws("link",i),metaTags:ws("meta",o),noscriptTags:ws("noscript",c),scriptTags:ws("script",p),styleTags:ws("style",h)},x={},y={};Object.keys(g).forEach(k=>{const{newTags:N,oldTags:C}=g[k];N.length&&(x[k]=N),C.length&&(y[k]=g[k].oldTags)}),t&&t(),d(e,x,y)},Ro=null,ZE=e=>{Ro&&cancelAnimationFrame(Ro),e.defer?Ro=requestAnimationFrame(()=>{qy(e,()=>{Ro=null})}):(qy(e),Ro=null)},QE=ZE,Wy=class extends w.Component{constructor(){super(...arguments);Rn(this,"rendered",!1)}shouldComponentUpdate(t){return!IE(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:n}=this.props.context;let r=null;const a=zE(t.get().map(i=>{const o={...i.props};return delete o.context,o}));_x.canUseDOM?QE(a):Vh&&(r=Vh(a)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},zh,JE=(zh=class extends w.Component{shouldComponentUpdate(e){return!DE(Hy(this.props,"helmetData"),Hy(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,r){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,r)}]}}mapObjectTypeChildren(e,t,n,r){switch(e.type){case"title":return{...t,[e.type]:r,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach(r=>{n={...n,[r]:e[r]}}),n}warnOnInvalidChildren(e,t){return zy(Uy.some(n=>e.type===n),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Uy.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),zy(!t||typeof t=="string"||Array.isArray(t)&&!t.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return Ot.Children.forEach(e,r=>{if(!r||!r.props)return;const{children:a,...i}=r.props,o=Object.keys(i).reduce((d,p)=>(d[$E[p]||p]=i[p],d),{});let{type:c}=r;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(r,a),c){case"Symbol(react.fragment)":t=this.mapChildrenToProps(a,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,a);break;default:t=this.mapObjectTypeChildren(r,t,o,a);break}}),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:r}=t;if(e&&(n=this.mapChildrenToProps(e,n)),r&&!(r instanceof Gh)){const a=r;r=new Gh(a.context,!0),delete n.helmetData}return r?Ot.createElement(Wy,{...n,context:r.value}):Ot.createElement(Ax.Consumer,null,a=>Ot.createElement(Wy,{...n,context:a}))}},Rn(zh,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),zh);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rx=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...c},d)=>w.createElement("svg",{ref:d,...eT,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Rx("lucide",a),...c},[...o.map(([p,h])=>w.createElement(p,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(e,t)=>{const n=w.forwardRef(({className:r,...a},i)=>w.createElement(tT,{ref:i,iconNode:t,className:Rx(`lucide-${XE(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=Ee("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=Ee("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=Ee("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=Ee("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Ee("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Ee("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=Ee("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ee("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=Ee("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Ee("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=Ee("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Ee("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Ee("ChevronsDownUp",[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Ee("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Ee("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Ee("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ee("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Ee("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Ee("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=Ee("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=Ee("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Ee("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Ee("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Ee("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Ee("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Ee("Combine",[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=Ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Ee("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Ee("Dice6",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ee("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Ee("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Ee("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Ee("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=Ee("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Ee("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ee("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=Ee("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Ee("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Ee("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=Ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Ee("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Ee("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=Ee("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Ee("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=Ee("Gavel",[["path",{d:"m14.5 12.5-8 8a2.119 2.119 0 1 1-3-3l8-8",key:"15492f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=Ee("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Ee("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Ee("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=Ee("Grab",[["path",{d:"M18 11.5V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4",key:"edstyy"}],["path",{d:"M14 10V8a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"19wdwo"}],["path",{d:"M10 9.9V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v5",key:"1lugqo"}],["path",{d:"M6 14a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1hbeus"}],["path",{d:"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-4a8 8 0 0 1-8-8 2 2 0 1 1 4 0",key:"1etffm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Ee("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Ee("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Ee("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=Ee("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=Ee("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=Ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=Ee("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Ee("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Ee("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Ee("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Ee("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Ee("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Ee("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Ee("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Ee("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Ee("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=Ee("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Ee("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=Ee("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=Ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=Ee("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=Ee("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Ee("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Ee("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Ee("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=Ee("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=Ee("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=Ee("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=Ee("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Ee("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Ee("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=Ee("Scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=Ee("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=Ee("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Ee("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Ee("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=Ee("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=Ee("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=Ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Ee("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Ee("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Ee("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=Ee("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=Ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=Ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=Ee("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=Ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=Ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Ee("Variable",[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=Ee("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Ee("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Ee("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Hx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Hx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function WT(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Hx(e))&&(r&&(r+=" "),r+=t);return r}const Xm="-",VT=e=>{const t=KT(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const c=o.split(Xm);return c[0]===""&&c.length!==1&&c.shift(),qx(c,t)||GT(o)},getConflictingClassGroupIds:(o,c)=>{const d=n[o]||[];return c&&r[o]?[...d,...r[o]]:d}}},qx=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?qx(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Xm);return(o=t.validators.find(({validator:c})=>c(i)))==null?void 0:o.classGroupId},Qy=/^\[(.+)\]$/,GT=e=>{if(Qy.test(e)){const t=Qy.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},KT=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return ZT(Object.entries(e.classGroups),n).forEach(([i,o])=>{Xh(o,r,i,t)}),r},Xh=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Jy(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(YT(a)){Xh(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{Xh(o,Jy(t,i),n,r)})})},Jy=(e,t)=>{let n=e;return t.split(Xm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},YT=e=>e.isThemeGetter,ZT=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[t+o,c])):i);return[n,a]}):e,QT=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},Wx="!",JT=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=c=>{const d=[];let p=0,h=0,m;for(let k=0;k<c.length;k++){let N=c[k];if(p===0){if(N===a&&(r||c.slice(k,k+i)===t)){d.push(c.slice(h,k)),h=k+i;continue}if(N==="/"){m=k;continue}}N==="["?p++:N==="]"&&p--}const v=d.length===0?c:c.substring(h),g=v.startsWith(Wx),x=g?v.substring(1):v,y=m&&m>h?m-h:void 0;return{modifiers:d,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:y}};return n?c=>n({className:c,parseClassName:o}):o},XT=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},e2=e=>({cache:QT(e.cacheSize),parseClassName:JT(e),...VT(e)}),t2=/\s+/,n2=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(t2);let c="";for(let d=o.length-1;d>=0;d-=1){const p=o[d],{modifiers:h,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:g}=n(p);let x=!!g,y=r(x?v.substring(0,g):v);if(!y){if(!x){c=p+(c.length>0?" "+c:c);continue}if(y=r(v),!y){c=p+(c.length>0?" "+c:c);continue}x=!1}const k=XT(h).join(":"),N=m?k+Wx:k,C=N+y;if(i.includes(C))continue;i.push(C);const T=a(y,x);for(let j=0;j<T.length;++j){const D=T[j];i.push(N+D)}c=p+(c.length>0?" "+c:c)}return c};function r2(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Vx(t))&&(r&&(r+=" "),r+=n);return r}const Vx=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Vx(e[r]))&&(n&&(n+=" "),n+=t);return n};function a2(e,...t){let n,r,a,i=o;function o(d){const p=t.reduce((h,m)=>m(h),e());return n=e2(p),r=n.cache.get,a=n.cache.set,i=c,c(d)}function c(d){const p=r(d);if(p)return p;const h=n2(d,n);return a(d,h),h}return function(){return i(r2.apply(null,arguments))}}const en=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Gx=/^\[(?:([a-z-]+):)?(.+)\]$/i,i2=/^\d+\/\d+$/,s2=new Set(["px","full","screen"]),o2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Na=e=>Rs(e)||s2.has(e)||i2.test(e),Ja=e=>Hs(e,"length",b2),Rs=e=>!!e&&!Number.isNaN(Number(e)),Vp=e=>Hs(e,"number",Rs),Io=e=>!!e&&Number.isInteger(Number(e)),p2=e=>e.endsWith("%")&&Rs(e.slice(0,-1)),xt=e=>Gx.test(e),Xa=e=>o2.test(e),h2=new Set(["length","size","percentage"]),m2=e=>Hs(e,h2,Kx),f2=e=>Hs(e,"position",Kx),g2=new Set(["image","url"]),v2=e=>Hs(e,g2,x2),y2=e=>Hs(e,"",w2),$o=()=>!0,Hs=(e,t,n)=>{const r=Gx.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},b2=e=>l2.test(e)&&!c2.test(e),Kx=()=>!1,w2=e=>u2.test(e),x2=e=>d2.test(e),k2=()=>{const e=en("colors"),t=en("spacing"),n=en("blur"),r=en("brightness"),a=en("borderColor"),i=en("borderRadius"),o=en("borderSpacing"),c=en("borderWidth"),d=en("contrast"),p=en("grayscale"),h=en("hueRotate"),m=en("invert"),v=en("gap"),g=en("gradientColorStops"),x=en("gradientColorStopPositions"),y=en("inset"),k=en("margin"),N=en("opacity"),C=en("padding"),T=en("saturate"),j=en("scale"),D=en("sepia"),_=en("skew"),I=en("space"),R=en("translate"),z=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",xt,t],$=()=>[xt,t],G=()=>["",Na,Ja],E=()=>["auto",Rs,xt],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",xt],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[Rs,xt];return{cacheSize:500,separator:":",theme:{colors:[$o],spacing:[Na,Ja],blur:["none","",Xa,xt],brightness:M(),borderColor:[e],borderRadius:["none","","full",Xa,xt],borderSpacing:$(),borderWidth:G(),contrast:M(),grayscale:ee(),hueRotate:M(),invert:ee(),gap:$(),gradientColorStops:[e],gradientColorStopPositions:[p2,Ja],inset:q(),margin:q(),opacity:M(),padding:$(),saturate:M(),scale:M(),sepia:ee(),skew:M(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",xt]}],container:["container"],columns:[{columns:[Xa]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),xt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Io,xt]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xt]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Io,xt]}],"grid-cols":[{"grid-cols":[$o]}],"col-start-end":[{col:["auto",{span:["full",Io,xt]},xt]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[$o]}],"row-start-end":[{row:["auto",{span:[Io,xt]},xt]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xt]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xt,t]}],"min-w":[{"min-w":[xt,t,"min","max","fit"]}],"max-w":[{"max-w":[xt,t,"none","full","min","max","fit","prose",{screen:[Xa]},Xa]}],h:[{h:[xt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Xa,Ja]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vp]}],"font-family":[{font:[$o]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xt]}],"line-clamp":[{"line-clamp":["none",Rs,Vp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Na,xt]}],"list-image":[{"list-image":["none",xt]}],"list-style-type":[{list:["none","disc","decimal",xt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Na,Ja]}],"underline-offset":[{"underline-offset":["auto",Na,xt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),f2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",m2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},v2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:Z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Na,xt]}],"outline-w":[{outline:[Na,Ja]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Na,Ja]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Xa,y2]}],"shadow-color":[{shadow:[$o]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Xa,xt]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[T]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xt]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",xt]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",xt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Io,xt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Na,Ja,Vp]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},N2=a2(k2);function J(...e){return N2(WT(e))}class C2 extends w.Component{constructor(n){super(n);Rn(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});Rn(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Error Boundary caught an error:",n),console.error("Error info:",r),this.setState({errorInfo:r})}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:s.jsxs("div",{className:"max-w-md w-full bg-card border rounded-lg shadow-lg p-6 text-center space-y-4",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"p-3 bg-destructive/10 rounded-full",children:s.jsx(ca,{className:"h-8 w-8 text-destructive"})})}),s.jsx("h1",{className:"text-xl font-bold",children:"Something went wrong"}),s.jsx("p",{className:"text-muted-foreground",children:"An unexpected error occurred. This has been logged for debugging."}),this.state.error&&s.jsxs("details",{className:"text-left bg-muted p-3 rounded-md text-sm",children:[s.jsx("summary",{className:"cursor-pointer font-medium",children:"Technical details"}),s.jsxs("pre",{className:"mt-2 overflow-auto text-xs text-muted-foreground whitespace-pre-wrap",children:[this.state.error.message,((n=this.state.errorInfo)==null?void 0:n.componentStack)&&s.jsxs(s.Fragment,{children:[`

Component Stack:`,this.state.errorInfo.componentStack]})]})]}),s.jsxs("div",{className:"flex gap-3 justify-center pt-2",children:[s.jsxs("button",{onClick:this.handleRetry,className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[s.jsx(Bs,{className:"h-4 w-4"}),"Try Again"]}),s.jsxs("button",{onClick:this.handleGoHome,className:"flex items-center gap-2 px-4 py-2 border rounded-md hover:bg-accent transition-colors",children:[s.jsx(Px,{className:"h-4 w-4"}),"Go Home"]})]})]})}):this.props.children}}const em="https://rolldeo.com",S2="Rolldeo",E2="Rolldeo - Share the Perfect Random Table",T2="Create, share, and roll on random tables for TTRPGs. Works offline, supports dice expressions, table references, templates, and more.",D2=`${em}/og-image.png`,ja={home:{title:"Rolldeo - Share the Perfect Random Table",description:"Create, share, and roll on random tables for TTRPGs. Offline-first, open source, and CC0 licensed.",path:"/"},library:{title:"Library - Browse Table Collections | Rolldeo",description:"Browse and manage your random table collections. Import JSON files, organize by namespace, and find the perfect table for your game.",path:"/library"},roll:{title:"Roll - Random Table Roller | Rolldeo",description:"Roll on random tables with support for dice expressions, weighted entries, and table references. Track your roll history.",path:"/roll"},editor:{title:"Editor - Create Random Tables | Rolldeo",description:"Create and edit random table collections with a visual editor or JSON mode. Real-time validation against the Random Table JSON Spec.",path:"/editor"},guide:{title:"Guide - Documentation | Rolldeo",description:"Learn how to use Rolldeo, create random tables, and master the Random Table JSON Specification.",path:"/guide"},quickstart:{title:"Getting Started - Quickstart Guide | Rolldeo",description:"Learn the basics of random tables in under 10 minutes. Create your first table, add weights, roll dice, and more.",path:"/guide/quickstart"},spec:{title:"Random Table JSON Specification v1.0 | Rolldeo",description:"Complete reference for the Random Table JSON Spec v1.0. Covers dice expressions, table references, templates, conditionals, and more.",path:"/guide/spec"},schema:{title:"JSON Schema Reference | Rolldeo",description:"JSON Schema documentation for validating Random Table files. Use with your IDE for autocomplete and validation.",path:"/guide/schema"},usingRolldeo:{title:"Using Rolldeo - Feature Guide | Rolldeo",description:"Master the Library, Roller, and Editor. Learn how to import collections, roll on tables, and create your own.",path:"/guide/using-rolldeo"}};function Aa({title:e=E2,description:t=T2,path:n="/",image:r=D2,noindex:a=!1}){const i=`${em}${n}`,o=r.startsWith("http")?r:`${em}${r}`;return s.jsxs(JE,{children:[s.jsx("title",{children:e}),s.jsx("meta",{name:"description",content:t}),a&&s.jsx("meta",{name:"robots",content:"noindex,nofollow"}),s.jsx("link",{rel:"canonical",href:i}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{property:"og:url",content:i}),s.jsx("meta",{property:"og:title",content:e}),s.jsx("meta",{property:"og:description",content:t}),s.jsx("meta",{property:"og:image",content:o}),s.jsx("meta",{property:"og:site_name",content:S2}),s.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),s.jsx("meta",{name:"twitter:url",content:i}),s.jsx("meta",{name:"twitter:title",content:e}),s.jsx("meta",{name:"twitter:description",content:t}),s.jsx("meta",{name:"twitter:image",content:o})]})}function j2(){const[e,t]=w.useState(null),[n,r]=w.useState(!1),[a,i]=w.useState(!1);w.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const d=localStorage.getItem("pwa-install-dismissed");if(d){const m=parseInt(d,10);if(Date.now()-m<10080*60*1e3)return}const p=m=>{m.preventDefault(),t(m),r(!0)},h=()=>{i(!0),r(!1),t(null)};return window.addEventListener("beforeinstallprompt",p),window.addEventListener("appinstalled",h),()=>{window.removeEventListener("beforeinstallprompt",p),window.removeEventListener("appinstalled",h)}},[]);const o=w.useCallback(async()=>{if(!e)return;await e.prompt();const{outcome:d}=await e.userChoice;d==="accepted"&&i(!0),t(null),r(!1)},[e]),c=w.useCallback(()=>{r(!1),t(null),localStorage.setItem("pwa-install-dismissed",Date.now().toString())},[]);return a||!n||!e?null:s.jsx("div",{className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:right-4 z-40 max-w-sm",children:s.jsxs("div",{className:"bg-card border rounded-lg shadow-lg p-4 flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg flex-shrink-0",children:s.jsx(Ps,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-sm",children:"Install Rolldeo"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Install this app on your device for quick access and offline use."}),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:o,className:"px-3 py-1.5 text-xs font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Install"}),s.jsx("button",{onClick:c,className:"px-3 py-1.5 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors",children:"Not now"})]})]}),s.jsx("button",{onClick:c,className:"p-1 hover:bg-accent rounded transition-colors flex-shrink-0","aria-label":"Dismiss",children:s.jsx(Ut,{className:"h-4 w-4 text-muted-foreground"})})]})})}function A2(){const[e,t]=w.useState(navigator.onLine),[n,r]=w.useState(!1),[a,i]=w.useState(!1);return w.useEffect(()=>{const o=()=>{t(!0),a&&(r(!0),setTimeout(()=>{r(!1)},3e3))},c=()=>{t(!1),i(!0)};return window.addEventListener("online",o),window.addEventListener("offline",c),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",c)}},[a]),n?s.jsxs("div",{className:J("fixed top-16 left-1/2 -translate-x-1/2 z-50","flex items-center gap-2 px-4 py-2 rounded-full shadow-lg","bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200","text-sm font-medium","animate-in fade-in slide-in-from-top-2 duration-300"),role:"status","aria-live":"polite",children:[s.jsx(Bx,{className:"h-4 w-4"}),"Back online"]}):e?null:s.jsxs("div",{className:J("fixed top-16 left-1/2 -translate-x-1/2 z-50","flex items-center gap-2 px-4 py-2 rounded-full shadow-lg","bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200","text-sm font-medium","animate-in fade-in slide-in-from-top-2 duration-300"),role:"status","aria-live":"polite",children:[s.jsx(qT,{className:"h-4 w-4"}),"You're offline"]})}const Xy=e=>{let t;const n=new Set,r=(p,h)=>{const m=typeof p=="function"?p(t):p;if(!Object.is(m,t)){const v=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(g=>g(t,v))}},a=()=>t,c={setState:r,getState:a,getInitialState:()=>d,subscribe:p=>(n.add(p),()=>n.delete(p))},d=t=e(r,a,c);return c},_2=(e=>e?Xy(e):Xy),R2=e=>e;function I2(e,t=R2){const n=Ot.useSyncExternalStore(e.subscribe,Ot.useCallback(()=>t(e.getState()),[e,t]),Ot.useCallback(()=>t(e.getInitialState()),[e,t]));return Ot.useDebugValue(n),n}const $2=e=>{const t=_2(e),n=r=>I2(t,r);return Object.assign(n,t),n},xl=(e=>$2);function M2(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var i;const o=d=>d===null?null:JSON.parse(d,void 0),c=(i=n.getItem(a))!=null?i:null;return c instanceof Promise?c.then(o):o(c)},setItem:(a,i)=>n.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>n.removeItem(a)}}const tm=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return tm(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return tm(r)(n)}}}},F2=(e,t)=>(n,r,a)=>{let i={storage:M2(()=>localStorage),partialize:y=>y,version:0,merge:(y,k)=>({...k,...y}),...t},o=!1;const c=new Set,d=new Set;let p=i.storage;if(!p)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...y)},r,a);const h=()=>{const y=i.partialize({...r()});return p.setItem(i.name,{state:y,version:i.version})},m=a.setState;a.setState=(y,k)=>(m(y,k),h());const v=e((...y)=>(n(...y),h()),r,a);a.getInitialState=()=>v;let g;const x=()=>{var y,k;if(!p)return;o=!1,c.forEach(C=>{var T;return C((T=r())!=null?T:v)});const N=((k=i.onRehydrateStorage)==null?void 0:k.call(i,(y=r())!=null?y:v))||void 0;return tm(p.getItem.bind(p))(i.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate){const T=i.migrate(C.state,C.version);return T instanceof Promise?T.then(j=>[!0,j]):[!0,T]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var T;const[j,D]=C;if(g=i.merge(D,(T=r())!=null?T:v),n(g,!0),j)return h()}).then(()=>{N==null||N(g,void 0),g=r(),o=!0,d.forEach(C=>C(g))}).catch(C=>{N==null||N(void 0,C)})};return a.persist={setOptions:y=>{i={...i,...y},y.storage&&(p=y.storage)},clearStorage:()=>{p==null||p.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:y=>(c.add(y),()=>{c.delete(y)}),onFinishHydration:y=>(d.add(y),()=>{d.delete(y)})},i.skipHydration||x(),g||v},Yx=F2,O2=["default","ttrpg","cyberpunk","sleek","whimsical"],nt=xl()(Yx(e=>({searchQuery:"",selectedTags:[],viewMode:"grid",showHiddenTables:!1,theme:"system",resultTheme:"default",isImportDialogOpen:!1,isConflictDialogOpen:!1,isCommandPaletteOpen:!1,browserPanelWidth:380,expandedCollectionId:null,browserActiveTab:"templates",browserViewMode:"flat",browserGroupBy:null,browserSearchQuery:"",preloadedCollectionsExpanded:!1,libraryViewMode:"grid",libraryGroupDepth:1,libraryNamespaceFilter:null,libraryExpandedNamespaces:[],rollerNamespaceFilter:null,rollerCollectionSearchQuery:"",expandedPublisherId:null,isFavoritesSectionExpanded:!0,isQuickAccessSectionExpanded:!0,lastEditorCollectionId:null,editorActiveTab:"tables",editorSelectedItemId:null,editorSidebarCollapsed:!1,editorFocusedItemId:null,editorLastExplicitItemId:null,setSearchQuery:t=>e({searchQuery:t}),toggleTag:t=>e(n=>({selectedTags:n.selectedTags.includes(t)?n.selectedTags.filter(r=>r!==t):[...n.selectedTags,t]})),setSelectedTags:t=>e({selectedTags:t}),clearTags:()=>e({selectedTags:[]}),clearFilters:()=>e({searchQuery:"",selectedTags:[]}),setViewMode:t=>e({viewMode:t}),toggleShowHiddenTables:()=>e(t=>({showHiddenTables:!t.showHiddenTables})),setTheme:t=>e({theme:t}),setResultTheme:t=>e({resultTheme:t}),openImportDialog:()=>e({isImportDialogOpen:!0}),closeImportDialog:()=>e({isImportDialogOpen:!1}),openConflictDialog:()=>e({isConflictDialogOpen:!0}),closeConflictDialog:()=>e({isConflictDialogOpen:!1}),openCommandPalette:()=>e({isCommandPaletteOpen:!0}),closeCommandPalette:()=>e({isCommandPaletteOpen:!1}),toggleCommandPalette:()=>e(t=>({isCommandPaletteOpen:!t.isCommandPaletteOpen})),setBrowserPanelWidth:t=>e({browserPanelWidth:t}),toggleCollectionExpanded:t=>e(n=>({expandedCollectionId:n.expandedCollectionId===t?null:t,browserSearchQuery:n.expandedCollectionId===t?n.browserSearchQuery:""})),setExpandedCollectionId:t=>e({expandedCollectionId:t,browserSearchQuery:""}),setBrowserActiveTab:t=>e({browserActiveTab:t}),setBrowserViewMode:t=>e({browserViewMode:t}),setBrowserGroupBy:t=>e({browserGroupBy:t}),setBrowserSearchQuery:t=>e({browserSearchQuery:t}),clearBrowserFilters:()=>e({browserSearchQuery:"",browserGroupBy:null}),togglePreloadedCollections:()=>e(t=>({preloadedCollectionsExpanded:!t.preloadedCollectionsExpanded})),setLibraryViewMode:t=>e({libraryViewMode:t}),setLibraryGroupDepth:t=>e({libraryGroupDepth:t}),setLibraryNamespaceFilter:t=>e({libraryNamespaceFilter:t}),toggleLibraryNamespaceExpanded:t=>e(n=>({libraryExpandedNamespaces:n.libraryExpandedNamespaces.includes(t)?n.libraryExpandedNamespaces.filter(r=>r!==t):[...n.libraryExpandedNamespaces,t]})),setLibraryExpandedNamespaces:t=>e({libraryExpandedNamespaces:t}),clearLibraryFilters:()=>e({searchQuery:"",selectedTags:[],libraryNamespaceFilter:null}),setRollerNamespaceFilter:t=>e({rollerNamespaceFilter:t}),setRollerCollectionSearchQuery:t=>e({rollerCollectionSearchQuery:t}),clearRollerCollectionFilters:()=>e({rollerNamespaceFilter:null,rollerCollectionSearchQuery:""}),togglePublisherExpanded:t=>e(n=>({expandedPublisherId:n.expandedPublisherId===t?null:t})),setExpandedPublisherId:t=>e({expandedPublisherId:t}),setFavoritesSectionExpanded:t=>e({isFavoritesSectionExpanded:t}),setQuickAccessSectionExpanded:t=>e({isQuickAccessSectionExpanded:t}),collapseQuickSections:()=>e({isFavoritesSectionExpanded:!1,isQuickAccessSectionExpanded:!1}),setLastEditorCollectionId:t=>e({lastEditorCollectionId:t}),setEditorActiveTab:t=>e({editorActiveTab:t}),setEditorSelectedItemId:t=>e({editorSelectedItemId:t}),setEditorSidebarCollapsed:t=>e({editorSidebarCollapsed:t}),setEditorFocusedItemId:t=>e({editorFocusedItemId:t}),setEditorLastExplicitItemId:t=>e({editorLastExplicitItemId:t})}),{name:"ui-store",partialize:e=>({viewMode:e.viewMode,showHiddenTables:e.showHiddenTables,theme:e.theme,resultTheme:e.resultTheme,browserPanelWidth:e.browserPanelWidth,browserViewMode:e.browserViewMode,browserGroupBy:e.browserGroupBy,preloadedCollectionsExpanded:e.preloadedCollectionsExpanded,libraryViewMode:e.libraryViewMode,libraryGroupDepth:e.libraryGroupDepth,libraryExpandedNamespaces:e.libraryExpandedNamespaces,expandedPublisherId:e.expandedPublisherId,isFavoritesSectionExpanded:e.isFavoritesSectionExpanded,isQuickAccessSectionExpanded:e.isQuickAccessSectionExpanded,lastEditorCollectionId:e.lastEditorCollectionId,editorActiveTab:e.editorActiveTab,editorSelectedItemId:e.editorSelectedItemId,editorSidebarCollapsed:e.editorSidebarCollapsed})}));function fu(e){const t=document.documentElement;if(t.classList.remove("light","dark"),e==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;t.classList.add(n?"dark":"light"),t.style.colorScheme=n?"dark":"light"}else t.classList.add(e),t.style.colorScheme=e}function P2(){var t;const e=localStorage.getItem("ui-store");if(e)try{const n=JSON.parse(e);(t=n.state)!=null&&t.theme&&fu(n.state.theme)}catch{}else fu("system")}const Gp={default:{icon:Vn,label:"Modern",description:"Clean, minimal design"},ttrpg:{icon:FT,label:"TTRPG",description:"Classic parchment style"},cyberpunk:{icon:Ux,label:"Cyberpunk",description:"Neon-drenched future tech"},sleek:{icon:mu,label:"Sleek",description:"Refined editorial elegance"},whimsical:{icon:ET,label:"Whimsical",description:"Playful colors & joy"}},L2=w.memo(function(){const t=nt(v=>v.resultTheme),n=nt(v=>v.setResultTheme),[r,a]=w.useState(!1),[i,o]=w.useState({top:0,left:0}),c=w.useRef(null),d=w.useRef(null),p=Gp[t]??Gp.default,h=p.icon;w.useEffect(()=>{if(r&&c.current){const v=c.current.getBoundingClientRect();o({top:v.bottom+4,left:v.left})}},[r]),w.useEffect(()=>{const v=g=>{d.current&&!d.current.contains(g.target)&&c.current&&!c.current.contains(g.target)&&a(!1)};if(r)return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[r]),w.useEffect(()=>{const v=g=>{g.key==="Escape"&&a(!1)};if(r)return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]);const m=v=>{n(v),a(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{ref:c,onClick:()=>a(!r),className:J("flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-300","bg-secondary/50 hover:bg-secondary border border-border/50","text-muted-foreground hover:text-foreground","active:scale-95"),"aria-label":`Result style: ${p.label}. Click to change.`,"aria-expanded":r,"aria-haspopup":"listbox",children:[s.jsx("span",{className:"transition-transform duration-300 ease-out",children:s.jsx(h,{className:"h-4 w-4"})}),s.jsx("span",{className:"hidden sm:inline text-xs",children:p.label}),s.jsx(En,{className:J("h-3 w-3 transition-transform duration-200",r&&"rotate-180")})]}),r&&un.createPortal(s.jsx("div",{ref:d,role:"listbox","aria-label":"Select result theme",className:"fixed z-50 bg-popover border border-border/50 rounded-xl shadow-xl overflow-hidden animate-fade-in min-w-[180px]",style:{top:i.top,left:i.left},children:s.jsx("div",{className:"py-1",children:O2.map(v=>{const g=Gp[v],x=g.icon,y=t===v;return s.jsxs("button",{role:"option","aria-selected":y,onClick:()=>m(v),className:J("w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors",y?"bg-primary/10 text-primary":"hover:bg-accent/50 text-foreground"),children:[s.jsx(x,{className:"h-4 w-4 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium",children:g.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:g.description})]}),y&&s.jsx(vn,{className:"h-4 w-4 text-primary flex-shrink-0"})]},v)})})}),document.body)]})}),z2=w.memo(function(){const t=nt(o=>o.theme),n=nt(o=>o.setTheme);w.useEffect(()=>{if(fu(t),t==="system"){const o=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>fu("system");return o.addEventListener("change",c),()=>o.removeEventListener("change",c)}},[t]);const r=()=>{n(t==="light"?"dark":t==="dark"?"system":"light")},a=()=>{switch(t){case"light":return s.jsx(zT,{className:"h-4 w-4"});case"dark":return s.jsx(CT,{className:"h-4 w-4"});case"system":return s.jsx(Ym,{className:"h-4 w-4"})}},i=()=>{switch(t){case"light":return"Light";case"dark":return"Dark";case"system":return"Auto"}};return s.jsxs("button",{onClick:r,className:J("flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all duration-300","bg-secondary/50 hover:bg-secondary border border-border/50","text-muted-foreground hover:text-foreground","active:scale-95"),"aria-label":`Current theme: ${t}. Click to change.`,title:`Theme: ${i()}`,children:[s.jsx("span",{className:"transition-transform duration-300 ease-out",children:a()}),s.jsx("span",{className:"hidden sm:inline text-xs",children:i()})]})}),B2=w.createContext(null);function U2({children:e}){const[t,n]=w.useState([]),r=w.useCallback(h=>{n(m=>m.filter(v=>v.id!==h))},[]),a=w.useCallback((h,m="info",v=4e3)=>{const g=`toast-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,x={id:g,message:h,type:m,duration:v};n(y=>[...y,x]),v>0&&setTimeout(()=>{r(g)},v)},[r]),i=w.useCallback((h,m)=>a(h,"success",m),[a]),o=w.useCallback((h,m)=>a(h,"error",m??6e3),[a]),c=w.useCallback((h,m)=>a(h,"warning",m),[a]),d=w.useCallback((h,m)=>a(h,"info",m),[a]),p={toasts:t,addToast:a,removeToast:r,success:i,error:o,warning:c,info:d};return s.jsxs(B2.Provider,{value:p,children:[e,s.jsx(H2,{toasts:t,onRemove:r})]})}function H2({toasts:e,onRemove:t}){return e.length===0?null:s.jsx("div",{className:"fixed bottom-28 md:bottom-6 right-4 md:right-6 z-50 flex flex-col gap-3 max-w-sm w-full pointer-events-none",role:"region","aria-label":"Notifications",children:e.map(n=>s.jsx(q2,{toast:n,onRemove:t},n.id))})}function q2({toast:e,onRemove:t}){const[n,r]=w.useState(!1),[a,i]=w.useState(!1);w.useEffect(()=>{requestAnimationFrame(()=>{r(!0)})},[]);const o=w.useCallback(()=>{i(!0),setTimeout(()=>{t(e.id)},200)},[t,e.id]),d={success:lT,error:Mu,warning:ca,info:ua}[e.type],p={success:"card-mint border-[hsl(var(--mint)/0.3)]",error:"card-rose border-[hsl(var(--rose)/0.3)]",warning:"card-amber border-[hsl(var(--amber)/0.3)]",info:"card-lavender border-[hsl(var(--lavender)/0.3)]"},h={success:"icon-mint",error:"icon-rose",warning:"icon-amber",info:"icon-lavender"};return s.jsxs("div",{role:"alert",className:J("pointer-events-auto card-elevated flex items-start gap-3 p-4 border rounded-xl shadow-lg transition-all duration-300",p[e.type],n&&!a?"opacity-100 translate-x-0 scale-100":"opacity-0 translate-x-4 scale-95"),children:[s.jsx("div",{className:J("icon-container p-2",h[e.type]),children:s.jsx(d,{className:"h-4 w-4"})}),s.jsx("p",{className:"flex-1 text-sm font-medium pt-1.5 text-foreground",children:e.message}),s.jsx("button",{onClick:o,className:"flex-shrink-0 p-2 hover:bg-white/10 rounded-lg transition-colors","aria-label":"Dismiss notification",children:s.jsx(Ut,{className:"h-4 w-4 text-muted-foreground"})})]})}const Zx=new Set(["dice","unique","again","true","false","null","and","or","not","contains","matches","shared","math"]),W2=/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)*$/,V2=/^\d+\.\d+\.\d+(-[a-zA-Z0-9.]+)?(\+[a-zA-Z0-9.]+)?$/,G2=/^[a-zA-Z_][a-zA-Z0-9_]*$/,K2=/^\$?[a-zA-Z_][a-zA-Z0-9_]*$/;function Qx(e){const t=[];Y2(e,t);const n=new Set,r=new Set;for(const o of e.tables)n.add(o.id);for(const o of e.templates??[])r.add(o.id);for(let o=0;o<e.tables.length;o++)Z2(e.tables[o],`tables[${o}]`,n,t);for(let o=0;o<(e.templates??[]).length;o++)eD(e.templates[o],`templates[${o}]`,n,t);e.variables&&gu(e.variables,"variables",t),e.shared&&gu(e.shared,"shared",t);for(const o of n)r.has(o)&&t.push({severity:"warning",code:"ID_COLLISION",message:`Table and template share the same ID: ${o}`,suggestion:"Consider using unique IDs to avoid confusion"});tD(e.tables,t);const a=t.filter(o=>o.severity==="error"),i=t.filter(o=>o.severity==="warning");return{valid:a.length===0,issues:t,errors:a,warnings:i}}function Y2(e,t){const n=e.metadata;(!n.name||n.name.trim()==="")&&t.push({severity:"error",code:"MISSING_NAME",message:"Metadata name is required",path:"metadata.name"}),n.namespace?W2.test(n.namespace)||t.push({severity:"error",code:"INVALID_NAMESPACE",message:`Invalid namespace format: ${n.namespace}`,path:"metadata.namespace",suggestion:'Use dot-separated segments (e.g., "fantasy.core")'}):t.push({severity:"error",code:"MISSING_NAMESPACE",message:"Metadata namespace is required",path:"metadata.namespace"}),n.version?V2.test(n.version)||t.push({severity:"warning",code:"INVALID_VERSION",message:`Version should follow semver format: ${n.version}`,path:"metadata.version",suggestion:'Use semantic versioning (e.g., "1.0.0")'}):t.push({severity:"error",code:"MISSING_VERSION",message:"Metadata version is required",path:"metadata.version"}),n.specVersion!=="1.0"&&t.push({severity:"error",code:"INVALID_SPEC_VERSION",message:`Unsupported spec version: ${n.specVersion}`,path:"metadata.specVersion",suggestion:'Use specVersion "1.0"'}),n.maxRecursionDepth!==void 0&&n.maxRecursionDepth<1&&t.push({severity:"error",code:"INVALID_CONFIG",message:"maxRecursionDepth must be at least 1",path:"metadata.maxRecursionDepth"}),n.maxExplodingDice!==void 0&&n.maxExplodingDice<1&&t.push({severity:"error",code:"INVALID_CONFIG",message:"maxExplodingDice must be at least 1",path:"metadata.maxExplodingDice"}),n.maxInheritanceDepth!==void 0&&n.maxInheritanceDepth<1&&t.push({severity:"error",code:"INVALID_CONFIG",message:"maxInheritanceDepth must be at least 1",path:"metadata.maxInheritanceDepth"})}function Z2(e,t,n,r){if(ef(e.id,`${t}.id`,"Table",r),(!e.name||e.name.trim()==="")&&r.push({severity:"error",code:"MISSING_TABLE_NAME",message:"Table name is required",path:`${t}.name`}),e.extends){const a=e.extends.split(".").pop();a&&!n.has(a)&&!e.extends.includes(".")&&r.push({severity:"error",code:"INVALID_EXTENDS",message:`Extends references unknown table: ${e.extends}`,path:`${t}.extends`})}e.type==="simple"?Q2(e,t,r):e.type==="composite"?J2(e,t,n,r):e.type==="collection"&&X2(e,t,n,r),e.shared&&gu(e.shared,`${t}.shared`,r)}function Q2(e,t,n){if(!e.entries||e.entries.length===0){n.push({severity:"error",code:"EMPTY_ENTRIES",message:"Simple table must have at least one entry",path:`${t}.entries`});return}const r=new Set;for(let a=0;a<e.entries.length;a++){const i=e.entries[a],o=`${t}.entries[${a}]`;i.id&&(r.has(i.id)&&n.push({severity:"error",code:"DUPLICATE_ENTRY_ID",message:`Duplicate entry ID: ${i.id}`,path:`${o}.id`}),r.add(i.id),ef(i.id,`${o}.id`,"Entry",n)),i.weight!==void 0&&i.range!==void 0&&n.push({severity:"error",code:"WEIGHT_RANGE_CONFLICT",message:"Entry cannot have both weight and range",path:o,suggestion:"Use either weight or range, not both"}),i.weight!==void 0&&i.weight<0&&n.push({severity:"error",code:"INVALID_WEIGHT",message:`Entry weight cannot be negative: ${i.weight}`,path:`${o}.weight`}),i.range&&(i.range.length!==2?n.push({severity:"error",code:"INVALID_RANGE",message:"Range must be a two-element array [min, max]",path:`${o}.range`}):i.range[0]>i.range[1]&&n.push({severity:"error",code:"INVALID_RANGE",message:`Range min (${i.range[0]}) cannot exceed max (${i.range[1]})`,path:`${o}.range`}));const c=e.extends&&i.id;!i.value&&i.value!==""&&!c&&n.push({severity:"error",code:"MISSING_VALUE",message:"Entry value is required",path:`${o}.value`})}e.extends||e.entries.some(i=>(i.range?i.range[1]-i.range[0]+1:i.weight??1)>0)||n.push({severity:"error",code:"NO_ACTIVE_ENTRIES",message:"Table has no entries with positive weight",path:`${t}.entries`})}function J2(e,t,n,r){if(!e.sources||e.sources.length===0){r.push({severity:"error",code:"EMPTY_SOURCES",message:"Composite table must have at least one source",path:`${t}.sources`});return}for(let a=0;a<e.sources.length;a++){const i=e.sources[a],o=`${t}.sources[${a}]`,c=i.tableId.split(".").pop();c&&!n.has(c)&&!i.tableId.includes(".")&&r.push({severity:"error",code:"INVALID_SOURCE",message:`Source references unknown table: ${i.tableId}`,path:`${o}.tableId`}),i.weight!==void 0&&i.weight<0&&r.push({severity:"error",code:"INVALID_WEIGHT",message:`Source weight cannot be negative: ${i.weight}`,path:`${o}.weight`})}}function X2(e,t,n,r){if(!e.collections||e.collections.length===0){r.push({severity:"error",code:"EMPTY_COLLECTIONS",message:"Collection table must reference at least one table",path:`${t}.collections`});return}for(let a=0;a<e.collections.length;a++){const i=e.collections[a],o=i.split(".").pop();o&&!n.has(o)&&!i.includes(".")&&r.push({severity:"error",code:"INVALID_COLLECTION",message:`Collection references unknown table: ${i}`,path:`${t}.collections[${a}]`})}}function eD(e,t,n,r){ef(e.id,`${t}.id`,"Template",r),(!e.name||e.name.trim()==="")&&r.push({severity:"error",code:"MISSING_TEMPLATE_NAME",message:"Template name is required",path:`${t}.name`}),!e.pattern&&e.pattern!==""&&r.push({severity:"error",code:"MISSING_PATTERN",message:"Template pattern is required",path:`${t}.pattern`}),e.shared&&gu(e.shared,`${t}.shared`,r)}function gu(e,t,n){for(const r of Object.keys(e)){K2.test(r)||n.push({severity:"error",code:"INVALID_VARIABLE_NAME",message:`Invalid variable name: ${r}`,path:`${t}.${r}`,suggestion:"Variable names must start with a letter (or $ for context-sensitive variables) and contain only alphanumeric characters and underscores"});const a=r.startsWith("$")?r.slice(1):r;Zx.has(a)&&n.push({severity:"error",code:"RESERVED_WORD",message:`Variable name is a reserved word: ${r}`,path:`${t}.${r}`})}}function tD(e,t){const n=new Map;for(const r of e)n.set(r.id,r);for(const r of e)if(r.extends){const a=new Set;let i=r;for(;i!=null&&i.extends;){if(a.has(i.id)){t.push({severity:"error",code:"CIRCULAR_INHERITANCE",message:`Circular inheritance detected involving table: ${i.id}`,path:"tables"});break}a.add(i.id);const o=i.extends.split(".").pop();i=o?n.get(o):void 0}}}function ef(e,t,n,r){if(!e||e.trim()===""){r.push({severity:"error",code:"MISSING_ID",message:`${n} ID is required`,path:t});return}e.includes(".")&&r.push({severity:"error",code:"INVALID_ID",message:`${n} ID cannot contain periods: ${e}`,path:t,suggestion:"Use underscores or camelCase instead"}),G2.test(e)||r.push({severity:"error",code:"INVALID_ID",message:`Invalid ${n} ID format: ${e}`,path:t,suggestion:"IDs must start with a letter and contain only alphanumeric characters and underscores"}),Zx.has(e.toLowerCase())&&r.push({severity:"error",code:"RESERVED_WORD",message:`${n} ID is a reserved word: ${e}`,path:t})}function zu(e){var t;return((t=e.trace)==null?void 0:t.enabled)??!1}function Jx(e){return e.trace?`trace-${e.trace.idCounter++}`:""}function la(e,t,n,r){if(!zu(e))return null;const a={id:Jx(e),type:t,label:n,startTime:Date.now(),input:r,output:{value:""},children:[]},i=e.trace.nodeStack[e.trace.nodeStack.length-1];return i?i.children.push(a):e.trace.rootNode=a,e.trace.nodeStack.push(a),a}function Yr(e,t,n){if(!zu(e))return;const r=e.trace.nodeStack.pop();r&&(r.duration=Date.now()-r.startTime,r.output=t,n&&(r.metadata=n))}function rn(e,t,n,r,a,i){if(!zu(e))return;const o={id:Jx(e),type:t,label:n,startTime:Date.now(),duration:0,input:r,output:a,children:[],metadata:i},c=e.trace.nodeStack[e.trace.nodeStack.length-1];c&&c.children.push(o)}function nD(){return{enabled:!0,nodeStack:[],idCounter:0,startTime:Date.now()}}function Kp(e){if(!zu(e)||!e.trace.rootNode)return null;const t=e.trace.rootNode,n=rD(t);return{root:t,totalTime:Date.now()-e.trace.startTime,stats:n,version:"1.0"}}function rD(e){const t={nodeCount:0,maxDepth:0,typeBreakdown:{},diceRolled:0,tablesAccessed:[],variablesAccessed:[]};function n(r,a){var i;if(t.nodeCount++,t.maxDepth=Math.max(t.maxDepth,a),t.typeBreakdown[r.type]=(t.typeBreakdown[r.type]||0)+1,r.type==="dice_roll"&&r.metadata){const o=r.metadata;t.diceRolled+=((i=o.rolls)==null?void 0:i.length)||0}if(r.type==="table_roll"&&t.tablesAccessed.push(r.label.replace(/^Table: /,"")),r.type==="variable_access"&&r.metadata){const o=r.metadata;o.name&&t.variablesAccessed.push(o.name)}if(r.type==="capture_multi_roll"&&r.metadata){const o=r.metadata;o.captureVar&&t.variablesAccessed.push(`$${o.captureVar}`)}if(r.type==="capture_access"&&r.metadata){const o=r.metadata;o.varName&&t.variablesAccessed.push(`$${o.varName}`)}if(r.type==="collect"&&r.metadata){const o=r.metadata;o.varName&&t.variablesAccessed.push(`$${o.varName}`)}for(const o of r.children)n(o,a+1)}return n(e,0),t.tablesAccessed=[...new Set(t.tablesAccessed)],t.variablesAccessed=[...new Set(t.variablesAccessed)],t}function aD(e,t,n){return{staticVariables:t??new Map,sharedVariables:new Map,documentSharedNames:new Set,placeholders:new Map,recursionDepth:0,usedEntries:new Map,instanceResults:new Map,captureVariables:new Map,config:e,currentTableId:void 0,currentEntryId:void 0,currentEntryValue:void 0,currentCollectionId:void 0,trace:n!=null&&n.enableTrace?nD():void 0,collectedDescriptions:[],evaluatingSetKeys:new Set}}function Ii(e,t){if(e.sharedVariables.has(t)){const n=e.sharedVariables.get(t);return n==null?void 0:n.value}if(e.staticVariables.has(t))return e.staticVariables.get(t)}function ri(e,t){return e.sharedVariables.get(t)}function ei(e,t,n){e.sharedVariables.set(t,n)}function eb(e,t){return e.sharedVariables.has(t)}function iD(e,t){e.documentSharedNames.add(t)}function tb(e,t){return e.documentSharedNames.has(t)}function tf(e,t,n){const r=e.placeholders.get(t);if(!r)return;if(n){const i=r[n];return i&&typeof i!="string"?i.value:i}const a=r.value;return a&&typeof a!="string"?a.value:a}function sD(e,t,n){const r=e.placeholders.get(t);if(!r)return;const a=r[n];if(a&&typeof a!="string")return a}function au(e,t,n){const r=e.placeholders.get(t)??{};e.placeholders.set(t,{...r,...n})}function nb(e,t,n){au(e,t,n)}function iu(e){return e.recursionDepth++,e.recursionDepth<=e.config.maxRecursionDepth}function su(e){e.recursionDepth=Math.max(0,e.recursionDepth-1)}function nf(e,t){return e.usedEntries.has(t)||e.usedEntries.set(t,new Set),e.usedEntries.get(t)}function Xx(e,t,n){nf(e,t).add(n)}function oD(e,t,n){e.instanceResults.set(t,n)}function lD(e,t){return e.instanceResults.get(t)}function Mo(e,t){return e.captureVariables.get(t)}function cD(e,t,n){const r=e.captureVariables.has(t);return e.captureVariables.set(t,n),r}function uD(e,t){return e.captureVariables.has(t)?"capture":e.sharedVariables.has(t)?"shared":e.staticVariables.has(t)?"static":null}function Yp(e,t,n){e.currentTableId=t,e.currentEntryId=n}function Fc(e,t){e.currentEntryDescription=t}function Oc(e,t){e.currentEntryValue=t}function Zp(e,t){e.currentCollectionId=t}function rb(e,t,n,r,a,i){e.collectedDescriptions.push({tableName:t,tableId:n,rolledValue:r,description:a,depth:e.recursionDepth})}function dD(e,t){return e.evaluatingSetKeys.has(t)?!1:(e.evaluatingSetKeys.add(t),!0)}function pD(e,t){e.evaluatingSetKeys.delete(t)}function hD(e,t,n){const r=e.id??`${n}${String(t).padStart(3,"0")}`;let a;return e.range?a=e.range[1]-e.range[0]+1:a=e.weight??1,{entry:e,weight:a,id:r}}function al(e,t,n){const r=[];for(let a=0;a<e.length;a++){const i=hD(e[a],a,t);i.weight<=0||n!=null&&n.has(i.id)||r.push(i)}return r}function nm(e){return e.reduce((t,n)=>t+n.weight,0)}function mD(e){if(e.length===0)return null;const t=nm(e);if(t===0)return null;const n=Math.random()*t;let r=0;for(const a of e)if(r+=a.weight,n<r)return a;return e[e.length-1]}function e0(e,t,n={}){const r=new Set;if(n.excludeIds)for(const d of n.excludeIds)r.add(d);if(n.unique){const d=nf(t,e.id);for(const p of d)r.add(p)}const a=al(e.entries,e.id,r);if(a.length===0){const d=t.config.uniqueOverflowBehavior;if(d==="error")throw new Error(`Unique selection overflow: no more entries available in table '${e.id}'`);return d==="cycle"?(t.usedEntries.delete(e.id),al(e.entries,e.id).length===0?null:e0(e,t,{...n,unique:!1})):null}const i=mD(a);if(!i)return null;n.unique&&Xx(t,e.id,i.id);const o={...e.defaultSets??{},...i.entry.sets??{},value:i.entry.value},c=i.entry.resultType??e.resultType;return{entry:i.entry,id:i.id,mergedSets:o,assets:i.entry.assets,resultType:c}}function t0(e){return e.map(t=>({source:t,weight:t.weight??1})).filter(t=>t.weight>0)}function n0(e){return e.reduce((t,n)=>t+n.weight,0)}function fD(e){const t=t0(e.sources);if(t.length===0)return null;const n=n0(t);if(n===0)return null;const r=Math.random()*n;let a=0;for(const o of t)if(a+=o.weight,r<a)return{sourceTableId:o.source.tableId,weight:o.weight};const i=t[t.length-1];return{sourceTableId:i.source.tableId,weight:i.weight}}function gD(e,t){const n=[];for(const{id:a,table:i}of e){const o=al(i.entries,a);for(const c of o){const d=`${a}.${c.id}`;t!=null&&t.has(d)||n.push({...c,id:d,sourceTableId:a})}}const r=n.reduce((a,i)=>a+i.weight,0);return{entries:n,totalWeight:r}}function vD(e){if(e.entries.length===0||e.totalWeight===0)return null;const t=Math.random()*e.totalWeight;let n=0;for(const r of e.entries)if(n+=r.weight,t<n)return r;return e.entries[e.entries.length-1]}function r0(e,t,n,r={}){const a=t(e.collections);if(a.length===0)return null;const i=new Set;if(r.excludeIds)for(const m of r.excludeIds)i.add(m);if(r.unique){const m=nf(n,e.id);for(const v of m)i.add(v)}const o=gD(a,i);if(o.entries.length===0){const m=n.config.uniqueOverflowBehavior;if(m==="error")throw new Error(`Unique selection overflow: no more entries available in collection '${e.id}'`);return m==="cycle"?(n.usedEntries.delete(e.id),r0(e,t,n,{...r,unique:!1})):null}const c=vD(o);if(!c)return null;r.unique&&Xx(n,e.id,c.id);const d=a.find(m=>m.id===c.sourceTableId),p={...(d==null?void 0:d.table.defaultSets)??{},...e.defaultSets??{},...c.entry.sets??{},value:c.entry.value},h=c.entry.resultType??(d==null?void 0:d.table.resultType)??e.resultType;return{entry:c.entry,id:c.id,mergedSets:p,assets:c.entry.assets,resultType:h,sourceTableId:c.sourceTableId}}function yD(e,t,n){const{collections:r}=n;if(e.includes(".")){const i=e.split(".");if(i.length>=2){const o=i[0],c=i[i.length-1],d=r.get(t);if(d!=null&&d.imports.has(o)){const h=d.imports.get(o),m=h.tableIndex.get(c);if(m)return{table:m,collectionId:h.id}}const p=i.slice(0,-1).join(".");for(const h of r.values())if(h.document.metadata.namespace===p){const m=h.tableIndex.get(c);if(m)return{table:m,collectionId:h.id}}if(d!=null&&d.document.imports){const h=d.document.imports.find(m=>m.alias===o);if(h){for(const m of r.values())if(m.id!==t){if(m.document.metadata.namespace===h.path){const v=m.tableIndex.get(c);if(v)return{table:v,collectionId:m.id}}if(m.id===h.path){const v=m.tableIndex.get(c);if(v)return{table:v,collectionId:m.id}}}}}}}const a=r.get(t);if(a){const i=a.tableIndex.get(e);if(i)return{table:i,collectionId:t}}for(const i of r.values()){const o=i.tableIndex.get(e);if(o)return{table:o,collectionId:i.id}}}function bD(e,t,n){const{collections:r}=n;if(e.includes(".")){const i=e.split(".");if(i.length>=2){const o=i[0],c=i[i.length-1],d=r.get(t);if(d!=null&&d.imports.has(o)){const h=d.imports.get(o),m=h.templateIndex.get(c);if(m)return{template:m,collectionId:h.id}}const p=i.slice(0,-1).join(".");for(const h of r.values())if(h.document.metadata.namespace===p){const m=h.templateIndex.get(c);if(m)return{template:m,collectionId:h.id}}if(d!=null&&d.document.imports){const h=d.document.imports.find(m=>m.alias===o);if(h){for(const m of r.values())if(m.id!==t){if(m.document.metadata.namespace===h.path){const v=m.templateIndex.get(c);if(v)return{template:v,collectionId:m.id}}if(m.id===h.path){const v=m.templateIndex.get(c);if(v)return{template:v,collectionId:m.id}}}}}}}const a=r.get(t);if(a){const i=a.templateIndex.get(e);if(i)return{template:i,collectionId:t}}for(const i of r.values()){const o=i.templateIndex.get(e);if(o)return{template:o,collectionId:i.id}}}const wD={maxExplodingDice:100};function ou(e,t=wD){const n=kD(e);return ND(n,t)}const xD=/^(\d+)d(\d+)(k[hl]?\d+)?(!)?([+\-*]\d+)?$/i;function kD(e){const n=e.replace(/\s/g,"").toLowerCase().match(xD);if(!n)throw new Error(`Invalid dice expression: ${e}`);const[,r,a,i,o,c]=n,d=parseInt(r,10),p=parseInt(a,10);if(d<1||p<1)throw new Error(`Invalid dice: ${d}d${p} - count and sides must be positive`);let h,m;if(i){const x=i.match(/k(h|l)?(\d+)/);if(x){const[,y,k]=x,N=parseInt(k,10);if(N<1||N>d)throw new Error(`Cannot keep ${N} dice from ${d}d${p}`);y==="l"?m=N:h=N}}let v=null,g=0;return c&&(v=c[0],g=parseInt(c.slice(1),10)),{count:d,sides:p,keepHighest:h,keepLowest:m,exploding:o==="!",modifier:{type:v,value:g}}}function ND(e,t){const{count:n,sides:r,keepHighest:a,keepLowest:i,exploding:o,modifier:c}=e,d=[];let p=0;for(let x=0;x<n;x++){let y=ab(1,r);if(d.push(y),o)for(;y===r&&p<t.maxExplodingDice;)y=ab(1,r),d.push(y),p++}let h;a!==void 0?h=[...d].sort((x,y)=>y-x).slice(0,a):i!==void 0?h=[...d].sort((x,y)=>x-y).slice(0,i):h=d;let m=h.reduce((x,y)=>x+y,0);c.type==="+"?m+=c.value:c.type==="-"?m-=c.value:c.type==="*"&&(m*=c.value);let v=`${e.count}d${e.sides}`;e.keepHighest&&(v+=`kh${e.keepHighest}`),e.keepLowest&&(v+=`kl${e.keepLowest}`),e.exploding&&(v+="!"),c.type&&(v+=`${c.type}${c.value}`);let g=`[${d.join(", ")}]`;if((a!==void 0||i!==void 0)&&(g+=`  keep [${h.join(", ")}]`),c.type){const x=h.reduce((y,k)=>y+k,0);g+=`  ${x} ${c.type} ${c.value}`}return g+=` = ${m}`,{total:m,rolls:d,kept:h,expression:v,breakdown:g}}function ab(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Zr(e){if(!e)return[];const t=[];let n=0;for(;n<e.length;){if(e[n]==="\\"&&e.slice(n+1,n+3)==="{{"){n+=3;continue}if(e.slice(n,n+2)==="{{"){const r=n;n+=2;let a=1;const i=n;for(;n<e.length&&a>0;){if(e[n]==="\\"&&e.slice(n+1,n+3)==="}}"){n+=3;continue}e.slice(n,n+2)==="{{"?(a++,n+=2):e.slice(n,n+2)==="}}"?(a--,a===0&&t.push({start:r,end:n+2,expression:e.slice(i,n).trim(),raw:e.slice(r,n+2)}),n+=2):n++}}else n++}return t}function $i(e){const t=e.trim();if(t.startsWith("switch["))return _D(t);const{baseExpr:n,switchModifiers:r}=AD(t);return r?{...ib(n),switchModifiers:r}:ib(t)}function ib(e){const t=e.trim();if(t.startsWith("collect:"))return jD(t);if(t.includes(" >> $")||t.includes(">>$"))return sb(t);if(t.startsWith("$")&&!t.includes("*")&&TD(t))return DD(t);if(t.startsWith("dice:")){const n=t.slice(5).trim();return/^[^*]+\*[a-zA-Z]/.test(n)?n.includes(" >> $")||n.includes(">>$")?sb(t):SD(n):{type:"dice",expression:n}}if(t.startsWith("math:"))return{type:"math",expression:t.slice(5).trim()};if(t.startsWith("$")&&!t.includes("*")){const n=t.slice(1),r=n.indexOf(".");return r>0?{type:"variable",alias:n.slice(0,r),name:n.slice(r+1)}:{type:"variable",name:n}}if(t.startsWith("@")){const n=t.slice(1),r=n.indexOf(".");if(r>0){const a=n.slice(0,r),i=n.slice(r+1),o=rm(i);return{type:"placeholder",name:a,properties:o}}return{type:"placeholder",name:n}}if(t==="again"||t.startsWith("again|")||/\*again(\|\s*"[^"]*")?$/.test(t))return CD(t);if(t.includes("#")){const n=t.indexOf('|"'),r=t.indexOf("#");if(n===-1||r<n){const[a,i]=t.split("#");return{type:"instance",tableId:a.trim(),instanceName:i.trim()}}}return/^\d+\*/.test(t)||/^\$\w+(\.\w+)?\*/.test(t)?ED(t):Bu(t)}function CD(e){let t,n=e;const r=e.match(/\|\s*"([^"]*)"$/);if(r&&(t=r[1],n=e.slice(0,e.indexOf("|"))),n==="again")return{type:"again",separator:t};const a=n.split("*"),i={type:"again",separator:t};if(a.length>=2){const o=a[0];/^\d+$/.test(o)&&(i.count=parseInt(o,10)),a.includes("unique")&&(i.unique=!0)}return i}function SD(e){let t,n=e;const r=e.match(/\|"([^"]*)"$/);r&&(t=r[1],n=e.slice(0,e.indexOf("|")));const a=n.split("*"),i=a[0],o=a.includes("unique");let c=a[a.length-1];c==="unique"&&a.length>2&&(c=a[a.length-2]),c==="again"&&(c="again");const d=Bu(c);return{type:"multiRoll",count:0,diceCount:i,tableId:d.tableId,alias:d.alias,namespace:d.namespace,unique:o,separator:t}}function ED(e){let t,n=e;const r=e.match(/\|"([^"]*)"$/);r&&(t=r[1],n=e.slice(0,e.indexOf("|")));const a=n.split("*"),i=a[0],o=a.includes("unique");let c=a[a.length-1];c==="unique"&&a.length>2&&(c=a[a.length-2]);let d;/^\d+$/.test(i)?d=parseInt(i,10):i.startsWith("$")?d=i.slice(1):d=1;const p=Bu(c);return{type:"multiRoll",count:d,tableId:p.tableId,alias:p.alias,namespace:p.namespace,unique:o,separator:t}}function Bu(e){const t=e.split(".");if(t.length===1)return{type:"table",tableId:t[0]};const n=t.findIndex(r=>r.startsWith("@"));if(n!==-1){const r=t.slice(n).map(i=>i.startsWith("@")?i.slice(1):i),a=t.slice(0,n);return a.length===0?{type:"table",tableId:e}:a.length===1?{type:"table",tableId:a[0],properties:r}:a.length===2?{type:"table",alias:a[0],tableId:a[1],properties:r}:{type:"table",namespace:a.slice(0,-1).join("."),tableId:a[a.length-1],properties:r}}return t.length===2?{type:"table",alias:t[0],tableId:t[1]}:{type:"table",namespace:t.slice(0,-1).join("."),tableId:t[t.length-1]}}function TD(e){const t=e.slice(1);return/\[/.test(t)||/\.count$/.test(t)||/\.value$/.test(t)||/\|"/.test(t)||/\.@/.test(t)}function sb(e){const t=e.match(/(.+?)\s*>>\s*\$(\w+)(.*)$/);if(!t)throw new Error(`Invalid capture multi-roll syntax: ${e}`);const[,n,r,a]=t;let i,o=!1;if(a){const y=a.trim();(y==="|silent"||y.includes("|silent"))&&(o=!0);const k=y.match(/\|"([^"]*)"/);k&&(i=k[1])}const c=n.trim();let d,p=c;if(c.startsWith("dice:")){p=c.slice(5).trim();const y=p.indexOf("*");y>0&&(d=p.slice(0,y),p=p.slice(y+1))}const h=p.split("*"),m=h.includes("unique");let v=0,g;if(d)v=0,g=h.filter(y=>y!=="unique").pop()||"";else{const y=h[0];/^\d+$/.test(y)?v=parseInt(y,10):y.startsWith("$")?v=y.slice(1):v=1,g=h[h.length-1],g==="unique"&&h.length>2&&(g=h[h.length-2])}const x=Bu(g);return{type:"captureMultiRoll",count:v,diceCount:d,tableId:x.tableId,alias:x.alias,namespace:x.namespace,unique:m,captureVar:r,separator:o?void 0:i,silent:o}}function rm(e){return e.split(".").map(n=>n.startsWith("@")?n.slice(1):n)}function DD(e){const t=e.slice(1);let n,r=t;const a=t.match(/^(.+?)\|"([^"]*)"$/);a&&(r=a[1],n=a[2]);const i=r.match(/^(\w+)\[(-?\d+)\](?:\.(.+))?$/);if(i){const[,d,p,h]=i,m=parseInt(p,10),v=h?rm(h):void 0;return{type:"captureAccess",varName:d,index:m,properties:v,separator:n}}const o=r.match(/^(\w+)\.(.+)$/);if(o){const[,d,p]=o,h=rm(p);return{type:"captureAccess",varName:d,properties:h,separator:n}}const c=r.match(/^(\w+)$/);if(c)return{type:"captureAccess",varName:c[1],separator:n};throw new Error(`Invalid capture access syntax: ${e}`)}function jD(e){const n=e.slice(8).trim().match(/^\$(\w+)\.(@?\w+)(.*)$/);if(!n)throw new Error(`Invalid collect syntax: ${e}`);const[,r,a,i]=n;let o;a.startsWith("@")?o=a.slice(1):o=a;let c=!1,d;if(i){i.includes("|unique")&&(c=!0);const p=i.match(/\|"([^"]*)"/);p&&(d=p[1])}return{type:"collect",varName:r,property:o,unique:c,separator:d}}function Uu(e){const t=[],n=Zr(e);let r=0;for(const a of n){if(a.start>r){const i=ob(e.slice(r,a.start));i&&t.push({type:"literal",text:i})}t.push($i(a.expression)),r=a.end}if(r<e.length){const a=ob(e.slice(r));a&&t.push({type:"literal",text:a})}return t}function ob(e){return e.replace(/\\{{/g,"{{").replace(/\\}}/g,"}}")}function am(e){let t=0,n=!1,r="";for(let a=0;a<e.length;a++){const i=e[a],o=a>0?e[a-1]:"";if(n)i===r&&o!=="\\"&&(n=!1);else if(i==='"'||i==="'")n=!0,r=i;else if(i==="["||i==="("||i==="{")t++;else if(i==="]"||i===")"||i==="}")t--;else if(i===":"&&t===0)return a}return-1}function vu(e,t){const n=`.${t}[`;let r=e.length;for(;r>0;){const a=e.lastIndexOf(n,r-1);if(a===-1)return null;let i=1,o=a+n.length,c=!1,d="";for(;o<e.length&&i>0;){const p=e[o],h=o>0?e[o-1]:"";c?p===d&&h!=="\\"&&(c=!1):p==='"'||p==="'"?(c=!0,d=p):p==="["?i++:p==="]"&&i--,o++}if(i===0&&o===e.length)return{content:e.slice(a+n.length,o-1),remaining:e.slice(0,a)};r=a}return null}function AD(e){const t=[];let n,r=e;const a=vu(r,"else");for(a&&(n=a.content,r=a.remaining);;){const i=vu(r,"switch");if(!i)break;const o=am(i.content);if(o===-1)throw new Error(`Invalid switch syntax - missing colon: .switch[${i.content}]`);t.unshift({condition:i.content.slice(0,o).trim(),resultExpr:i.content.slice(o+1).trim()}),r=i.remaining}return t.length===0&&!n?{baseExpr:e}:{baseExpr:r,switchModifiers:{clauses:t,elseExpr:n}}}function _D(e){const t=[];let n,r=e;const a=vu(r,"else");for(a&&(n=a.content,r=a.remaining);;){const o=vu(r,"switch");if(!o)break;const c=am(o.content);if(c===-1)throw new Error(`Invalid switch syntax - missing colon: .switch[${o.content}]`);t.unshift({condition:o.content.slice(0,c).trim(),resultExpr:o.content.slice(c+1).trim()}),r=o.remaining}const i=r.match(/^switch\[(.+)\]$/);if(i){const o=am(i[1]);if(o===-1)throw new Error(`Invalid switch syntax - missing colon: switch[${i[1]}]`);t.unshift({condition:i[1].slice(0,o).trim(),resultExpr:i[1].slice(o+1).trim()})}else if(r!=="")throw new Error(`Invalid switch expression: ${e}`);if(t.length===0)throw new Error(`Switch expression has no clauses: ${e}`);return{type:"switch",clauses:t,elseExpr:n}}function RD(e){const t=[];let n=0;for(;n<e.length;){const r=e[n];if(/\s/.test(r)){n++;continue}if(/\d/.test(r)){let a="";for(;n<e.length&&/\d/.test(e[n]);)a+=e[n],n++;t.push({type:"NUMBER",value:parseInt(a,10)});continue}if("+-*/".includes(r)){t.push({type:"OPERATOR",value:r}),n++;continue}if(r==="("){t.push({type:"LPAREN",value:"("}),n++;continue}if(r===")"){t.push({type:"RPAREN",value:")"}),n++;continue}if(r==="$"){let a="";for(n++;n<e.length&&/[a-zA-Z0-9_]/.test(e[n]);)a+=e[n],n++;if(n<e.length-1&&e[n]==="."&&e[n+1]==="@"){const i=[];for(;n<e.length-1&&e[n]==="."&&e[n+1]==="@";){n+=2;let o="";for(;n<e.length&&/[a-zA-Z0-9_]/.test(e[n]);)o+=e[n],n++;o&&i.push(o)}if(i.length>0){t.push({type:"CAPTURE_ACCESS",value:`${a}:${i.join(":")}`});continue}}t.push({type:"VARIABLE",value:a});continue}if(r==="@"){let a="";for(n++;n<e.length&&/[a-zA-Z0-9_.]/.test(e[n]);)a+=e[n],n++;t.push({type:"PLACEHOLDER",value:a});continue}if(e.slice(n,n+5)==="dice:"){n+=5;let a="";for(;n<e.length&&!/[\s+\-*/()]/.test(e[n]);)a+=e[n],n++;t.push({type:"DICE",value:a});continue}n++}return t.push({type:"EOF",value:""}),t}class ID{constructor(t,n){Rn(this,"tokens");Rn(this,"pos");Rn(this,"context");this.tokens=t,this.pos=0,this.context=n}current(){return this.tokens[this.pos]??{type:"EOF",value:""}}advance(){const t=this.current();return t.type!=="EOF"&&this.pos++,t}expect(t){const n=this.current();if(n.type!==t)throw new Error(`Expected ${t}, got ${n.type}`);return this.advance()}parse(){const t=this.parseExpression();if(this.current().type!=="EOF")throw new Error(`Unexpected token: ${this.current().value}`);return t}parseExpression(){let t=this.parseTerm();for(;this.current().type==="OPERATOR"&&"+-".includes(this.current().value);){const n=this.advance().value,r=this.parseTerm();n==="+"?t=t+r:t=t-r}return t}parseTerm(){let t=this.parseFactor();for(;this.current().type==="OPERATOR"&&"*/".includes(this.current().value);){const n=this.advance().value,r=this.parseFactor();n==="*"?t=t*r:r===0?(console.warn("Division by zero in math expression, returning 0"),t=0):t=Math.trunc(t/r)}return t}parseFactor(){const t=this.current();if(t.type==="OPERATOR"&&t.value==="-")return this.advance(),-this.parseFactor();if(t.type==="LPAREN"){this.advance();const n=this.parseExpression();return this.expect("RPAREN"),n}return this.parsePrimary()}parsePrimary(){const t=this.advance();switch(t.type){case"NUMBER":return t.value;case"VARIABLE":{const n=Ii(this.context,t.value);return this.coerceToNumber(n,`$${t.value}`)}case"PLACEHOLDER":{const n=t.value,[r,a]=n.split("."),i=tf(this.context,r,a);return this.coerceToNumber(i,`@${n}`)}case"DICE":return ou(t.value,{maxExplodingDice:this.context.config.maxExplodingDice}).total;case"CAPTURE_ACCESS":{const n=t.value.split(":"),r=n[0],a=n.slice(1),i=ri(this.context,r);if(!i)return console.warn(`Capture variable not found: $${r}`),0;let o=i;for(let c=0;c<a.length;c++){const d=a[c],p=o.sets[d];if(p===void 0)return console.warn(`Property not found: $${r}.@${a.slice(0,c+1).join(".@")}`),0;if(c===a.length-1)return typeof p=="string"?this.coerceToNumber(p,`$${r}.@${a.join(".@")}`):this.coerceToNumber(p.value,`$${r}.@${a.join(".@")}`);if(typeof p=="string")return console.warn(`Cannot chain through string property: $${r}.@${a.slice(0,c+1).join(".@")}`),0;o=p}return 0}default:throw new Error(`Unexpected token type: ${t.type}`)}}coerceToNumber(t,n){if(t===void 0)return console.warn(`Undefined value for ${n}, using 0`),0;if(typeof t=="number")return t;const r=parseInt(t,10);return isNaN(r)?(console.warn(`Non-numeric value "${t}" for ${n}, using 0`),0):r}}function $D(e,t){try{const n=RD(e);return new ID(n,t).parse()}catch(n){return console.error(`Math evaluation error: ${e}`,n),null}}function MD(e){const t=[];let n="",r=!1,a="";for(let i=0;i<e.length;i++){const o=e[i];r?o===a?(t.push(n),n="",r=!1):n+=o:o==='"'||o==="'"?(n&&t.push(n),n="",r=!0,a=o):o===" "||o==="	"?(n&&t.push(n),n=""):o==="("||o===")"?(n&&t.push(n),t.push(o),n=""):o==="&"&&e[i+1]==="&"?(n&&t.push(n),t.push("&&"),n="",i++):o==="|"&&e[i+1]==="|"?(n&&t.push(n),t.push("||"),n="",i++):o==="!"&&e[i+1]!=="="?(n&&t.push(n),t.push("!"),n=""):o==="="&&e[i+1]==="="?(n&&t.push(n),t.push("=="),n="",i++):o==="!"&&e[i+1]==="="?(n&&t.push(n),t.push("!="),n="",i++):o===">"&&e[i+1]==="="?(n&&t.push(n),t.push(">="),n="",i++):o==="<"&&e[i+1]==="="?(n&&t.push(n),t.push("<="),n="",i++):o===">"||o==="<"?(n&&t.push(n),t.push(o),n=""):n+=o}return n&&t.push(n),t.filter(i=>i.length>0)}function Qp(e,t){if(e.startsWith("@")){const n=e.slice(1).split("."),r=n[0],a=n[1];return tf(t,r,a)}else if(e.startsWith("$")){const n=e.match(/^\$([a-zA-Z_][a-zA-Z0-9_]*)\.@([a-zA-Z_][a-zA-Z0-9_]*)$/);if(n){const a=n[1],i=n[2],o=ri(t,a);if(o){const c=o.sets[i];return c!==void 0?typeof c=="object"&&"value"in c?c.value:c:void 0}}const r=e.slice(1);return Ii(t,r)}else{const n=parseFloat(e);return!isNaN(n)&&isFinite(n)?n:e}}function FD(e,t,n){switch(e===void 0&&(e=""),n===void 0&&(n=""),t){case"==":return String(e)===String(n);case"!=":return String(e)!==String(n);case">":return Number(e)>Number(n);case"<":return Number(e)<Number(n);case">=":return Number(e)>=Number(n);case"<=":return Number(e)<=Number(n);case"contains":return String(e).toLowerCase().includes(String(n).toLowerCase());case"matches":try{return new RegExp(String(n),"i").test(String(e))}catch{return!1}default:return!1}}function OD(e,t){const n=MD(e);return Sa(n,t)}function Sa(e,t){if(e.length===0)return!1;if(e[0]==="!")return!Sa(e.slice(1),t);if(e[0]==="("){let i=1,o=1;for(;o<e.length&&i>0;)e[o]==="("&&i++,e[o]===")"&&i--,o++;const c=e.slice(1,o-1),d=Sa(c,t),p=e.slice(o);return p.length===0?d:p[0]==="&&"?d&&Sa(p.slice(1),t):p[0]==="||"?d||Sa(p.slice(1),t):d}let n=0,r=-1,a=-1;for(let i=0;i<e.length;i++)e[i]==="("?n++:e[i]===")"?n--:n===0&&(e[i]==="||"&&r===-1?r=i:e[i]==="&&"&&a===-1&&(a=i));if(r!==-1){const i=Sa(e.slice(0,r),t),o=Sa(e.slice(r+1),t);return i||o}if(a!==-1){const i=Sa(e.slice(0,a),t),o=Sa(e.slice(a+1),t);return i&&o}if(e.length>=3){const i=e[0],o=e[1],c=e.slice(2).join(" "),d=Qp(i,t),p=Qp(c,t);return FD(d,o,p)}return e.length===1?!!Qp(e[0],t):!1}class PD{constructor(t){this.deps=t}evaluatePattern(t,n,r){return Uu(t).map(i=>this.evaluateToken(i,n,r)).join("")}evaluatePatternWithOutputs(t,n,r){const a=Zr(t),i=[];let o="",c=0;for(const d of a){d.start>c&&(o+=t.slice(c,d.start));const p=$i(d.expression),h=this.evaluateToken(p,n,r);o+=h,i.push(h),c=d.end}return c<t.length&&(o+=t.slice(c)),{text:o,expressionOutputs:i}}evaluateSetValues(t,n,r,a){const i={};for(const[o,c]of Object.entries(t)){if(c.includes("{{")){const d=`${a}.${o}`;if(!dD(n,d)){i[o]=c,au(n,a,{[o]:i[o]});continue}try{const p=Zr(c);if(p.length===1&&c.trim()===p[0].raw){const h=$i(p[0].expression);if(h.type==="table"){const m=this.deps.resolveTableRef(h.tableId,r);if(m){const v=this.deps.rollTable(m.table,n,m.collectionId);i[o]={value:v.text,sets:v.placeholders??{},description:void 0},au(n,a,{[o]:i[o]});continue}}}i[o]=this.evaluatePattern(c,n,r)}finally{pD(n,d)}}else i[o]=c;au(n,a,{[o]:i[o]})}return i}evaluateSharedVariables(t,n,r){for(const[a,i]of Object.entries(t)){const o=a.startsWith("$")?a.slice(1):a;this.evaluateSharedVariable(o,i,n,r)}}evaluateSharedVariable(t,n,r,a){const i=Zr(n);if(i.length===1){const c=$i(i[0].expression);if(c.type==="table"){const d=this.deps.resolveTableRef(c.tableId,a);if(d){const h=r.collectedDescriptions.length,m=this.deps.rollTable(d.table,r,d.collectionId),v=r.collectedDescriptions.slice(h),g=v.length>0?v[0].description:void 0;ei(r,t,{value:m.text,sets:m.placeholders??{},description:g});return}const p=this.deps.resolveTemplateRef(c.tableId,a);if(p){const h=this.evaluateTemplateWithCapture(p.template,p.collectionId,r);ei(r,t,h);return}}if(c.type==="captureAccess"&&c.properties&&c.properties.length>0){const d=ri(r,c.varName);if(d){const p=c.properties[c.properties.length-1];if(p!=="value"&&p!=="count"&&p!=="description"){const h=this.getNestedCaptureItem(d,c.properties);if(h){ei(r,t,h);return}}}}if(c.type==="switch"){const d=this.evaluateSwitchToResultExpr(c,r,a);if(d){const p=d.trim();if(!p.startsWith('"')&&!p.startsWith("'")&&!p.includes("{{")){const m=this.deps.resolveTableRef(p,a);if(m){const v=r.collectedDescriptions.length,g=this.deps.rollTable(m.table,r,m.collectionId),x=r.collectedDescriptions.slice(v),y=x.length>0?x[0].description:void 0;ei(r,t,{value:g.text,sets:g.placeholders??{},description:y});return}}if(p.includes("{{")){const m=Zr(p);if(m.length===1&&p.trim()===m[0].raw){const v=$i(m[0].expression);if(v.type==="table"){const g=this.deps.resolveTableRef(v.tableId,a);if(g){const y=r.collectedDescriptions.length,k=this.deps.rollTable(g.table,r,g.collectionId),N=r.collectedDescriptions.slice(y),C=N.length>0?N[0].description:void 0;ei(r,t,{value:k.text,sets:k.placeholders??{},description:C});return}const x=this.deps.resolveTemplateRef(v.tableId,a);if(x){const y=this.evaluateTemplateWithCapture(x.template,x.collectionId,r);ei(r,t,y);return}}}}const h=this.evaluateSwitchResult(d,r,a);ei(r,t,{value:h,sets:{}});return}}}const o=this.evaluatePattern(n,r,a);ei(r,t,{value:o,sets:{}})}evaluateTableLevelShared(t,n,r,a){for(const[i,o]of Object.entries(t)){const c=i.startsWith("$")?i.slice(1):i;if(tb(n,i)||tb(n,c))throw new Error(`SHARED_SHADOW in ${a}: Table/template-level shared variable '${i}' would shadow document-level shared variable. Document-level shared variables take precedence.`);if(n.staticVariables.has(c))throw new Error(`SHARED_SHADOW in ${a}: Shared variable '${i}' would shadow static variable.`);eb(n,c)||this.evaluateSharedVariable(c,o,n,r)}}evaluateToken(t,n,r){let a;switch(t.type){case"literal":a=t.text;break;case"dice":a=this.evaluateDice(t.expression,n);break;case"math":{const o=$D(t.expression,n);a=o!==null?String(o):"[math error]";break}case"variable":a=this.evaluateVariable(t,n);break;case"placeholder":a=this.evaluatePlaceholder(t,n,r);break;case"table":a=this.evaluateTableRefExpr(t,n,r);break;case"multiRoll":a=this.evaluateMultiRoll(t,n,r);break;case"again":a=this.evaluateAgain(t,n,r);break;case"instance":a=this.evaluateInstance(t,n,r);break;case"captureMultiRoll":a=this.evaluateCaptureMultiRoll(t,n,r);break;case"captureAccess":a=this.evaluateCaptureAccess(t,n);break;case"collect":a=this.evaluateCollect(t,n);break;case"switch":return this.evaluateSwitchExpression(t,n,r);default:a=""}const i=t;return i.switchModifiers?this.evaluateSwitchModifiers(a,i.switchModifiers,n,r):a}evaluateDice(t,n){var o;const r=ou(t,{maxExplodingDice:n.config.maxExplodingDice}),a=t.match(/([+\-*])(\d+)$/),i=a?{operator:a[1],value:parseInt(a[2],10)}:void 0;return rn(n,"dice_roll",`Dice: ${t}`,{raw:t},{value:r.total},{type:"dice",expression:r.expression,rolls:r.rolls,kept:r.kept,modifier:i,exploded:r.rolls.length>parseInt(((o=t.match(/^(\d+)d/))==null?void 0:o[1])||"1",10),breakdown:r.breakdown}),String(r.total)}evaluateVariable(t,n){const r=Mo(n,t.name);if(r){const p=r.items.map(h=>h.value).join(", ");return rn(n,"variable_access",`$${t.alias?t.alias+".":""}${t.name}`,{raw:t.name,parsed:{alias:t.alias}},{value:p},{type:"variable",name:t.name,source:"capture"}),p}const a=ri(n,t.name);if(a)return rn(n,"variable_access",`$${t.alias?t.alias+".":""}${t.name}`,{raw:t.name,parsed:{alias:t.alias}},{value:a.value},{type:"variable",name:t.name,source:"captureShared"}),a.value;const i=Ii(n,t.name),o=i!==void 0?String(i):"";let c="undefined";return eb(n,t.name)?c="shared":n.staticVariables.has(t.name)&&(c="static"),rn(n,"variable_access",`$${t.alias?t.alias+".":""}${t.name}`,{raw:t.name,parsed:{alias:t.alias}},{value:o},{type:"variable",name:t.name,source:c}),o}evaluatePlaceholder(t,n,r){var d,p;const a=t.properties&&t.properties.length>0?`@${t.name}.${t.properties.map(h=>h.startsWith("@")?h:`@${h}`).join(".")}`:`@${t.name}`;if(t.name==="self"){const h=(d=t.properties)==null?void 0:d[0];if(h==="description"){const m=n.currentEntryDescription??"",v=m?this.evaluatePattern(m,n,r):"";return rn(n,"placeholder_access","@self.description",{raw:"self",parsed:{properties:t.properties}},{value:v},{type:"placeholder",name:"self",property:"description",found:m!==""}),v}if(h==="value"){const m=n.currentEntryValue??"";return rn(n,"placeholder_access","@self.value",{raw:"self",parsed:{properties:t.properties}},{value:m},{type:"placeholder",name:"self",property:"value",found:m!==""}),m}return""}if(t.properties&&t.properties.length>1){const h=t.properties[0],m=sD(n,t.name,h);if(m){const v=t.properties.slice(1),g=this.traversePropertyChain(m,v,`@${t.name}.@${h}`);return rn(n,"placeholder_access",a,{raw:t.name,parsed:{properties:t.properties}},{value:g},{type:"placeholder",name:t.name,property:t.properties.join("."),found:g!==""}),g}return console.warn(`Cannot chain through non-CaptureItem property: @${t.name}.${h}`),rn(n,"placeholder_access",a,{raw:t.name,parsed:{properties:t.properties}},{value:"",error:"Cannot chain through non-CaptureItem"},{type:"placeholder",name:t.name,property:t.properties.join("."),found:!1}),""}const i=(p=t.properties)==null?void 0:p[0],o=tf(n,t.name,i),c=o??"";return rn(n,"placeholder_access",a,{raw:t.name,parsed:{properties:t.properties}},{value:c},{type:"placeholder",name:t.name,property:i,found:o!==void 0}),c}evaluateTableRefExpr(t,n,r){let a=t.tableId;t.namespace?a=`${t.namespace}.${t.tableId}`:t.alias&&(a=`${t.alias}.${t.tableId}`);const i=this.deps.resolveTableRef(a,r);if(i){const c=this.deps.rollTable(i.table,n,i.collectionId);return t.properties&&t.properties.length>0?this.accessPropertyFromPlaceholders(c.placeholders,t.properties,a):c.text}const o=this.deps.resolveTemplateRef(a,r);if(o){if(t.properties&&t.properties.length>0){const c=this.evaluateTemplateForPropertyAccess(o.template,o.collectionId,n);return this.accessPropertyFromPlaceholders(c.placeholders,t.properties,a)}return this.evaluateTemplateInternal(o.template,o.collectionId,n)}return""}accessPropertyFromPlaceholders(t,n,r){if(!t||n.length===0)return"";const a=n[0],i=t[a];return i===void 0?(console.warn(`Property @${a} not found in ${r}`),""):n.length===1?typeof i=="string"?i:i.value:typeof i=="string"?(console.warn(`Cannot chain through string property: ${r}.@${a}`),""):this.traversePropertyChain(i,n.slice(1),`${r}.@${a}`)}evaluateTemplateForPropertyAccess(t,n,r){if(!iu(r))throw new Error(`Recursion limit exceeded (${r.config.maxRecursionDepth})`);try{if(!this.deps.getCollection(n))return{text:""};const i={};if(t.shared)for(const[c,d]of Object.entries(t.shared)){const p=c.startsWith("$")?c.slice(1):c;if(c.startsWith("$")){const m=Zr(d);if(m.length===1&&d.trim()===m[0].raw){const v=$i(m[0].expression);if(v.type==="table"){const g=this.deps.resolveTableRef(v.tableId,n);if(g){const x=this.deps.rollTable(g.table,r,g.collectionId);i[p]={value:x.text,sets:x.placeholders??{},description:void 0};continue}}}}const h=this.evaluatePattern(d,r,n);i[p]=h}return{text:this.evaluatePattern(t.pattern,r,n),placeholders:i}}finally{su(r)}}evaluateTemplateInternal(t,n,r){if(!iu(r))throw new Error(`Recursion limit exceeded (${r.config.maxRecursionDepth})`);try{if(!this.deps.getCollection(n))return"";la(r,"template_ref",`Template: ${t.name||t.id}`,{raw:t.id,parsed:{collectionId:n,templateId:t.id,pattern:t.pattern}});const i={...r,placeholders:new Map,sharedVariables:new Map(r.sharedVariables)};if(t.shared){for(const c of Object.keys(t.shared)){const d=c.startsWith("$")?c.slice(1):c;i.sharedVariables.delete(d)}this.evaluateTableLevelShared(t.shared,i,n,t.id)}const o=this.evaluatePattern(t.pattern,i,n);return Yr(r,{value:o}),o}finally{su(r)}}evaluateTemplateWithCapture(t,n,r){if(!iu(r))throw new Error(`Recursion limit exceeded (${r.config.maxRecursionDepth})`);try{if(!this.deps.getCollection(n))return{value:"",sets:{}};la(r,"template_ref",`Template: ${t.name||t.id}`,{raw:t.id,parsed:{collectionId:n,templateId:t.id,pattern:t.pattern}});const i={...r,placeholders:new Map,sharedVariables:new Map(r.sharedVariables)};if(t.shared){for(const d of Object.keys(t.shared)){const p=d.startsWith("$")?d.slice(1):d;i.sharedVariables.delete(p)}this.evaluateTableLevelShared(t.shared,i,n,t.id)}const o=this.evaluatePattern(t.pattern,i,n),c={};if(t.shared)for(const d of Object.keys(t.shared)){const p=d.startsWith("$")?d.slice(1):d,h=i.sharedVariables.get(p);h&&(c[p]=h)}return Yr(r,{value:o}),{value:o,sets:c,description:void 0}}finally{su(r)}}evaluateMultiRoll(t,n,r){let a,i="literal";if(t.diceCount)a=ou(t.diceCount,{maxExplodingDice:n.config.maxExplodingDice}).total,i="dice";else if(typeof t.count=="number")a=t.count,i="literal";else{let h;if(t.count.includes(".")){const m=t.count.indexOf("."),v=t.count.slice(0,m),g=t.count.slice(m+1),x=Mo(n,v);x?g==="count"?h=x.count:(console.warn(`Cannot use capture property '$${t.count}' as multi-roll count`),h=1):ri(n,v)?(g==="count"||console.warn(`Cannot use capture property '$${t.count}' as multi-roll count`),h=1):h=Ii(n,t.count)}else h=Ii(n,t.count);a=typeof h=="number"?h:parseInt(String(h),10)||1,i="variable"}const o=this.deps.getTable(t.tableId,r);if(!o){const h=this.deps.resolveTemplateRef(t.tableId,r);return h?this.evaluateMultiRollTemplate(h.template,h.collectionId,a,i,t,n):(console.warn(`Table or template not found: ${t.tableId}`),"")}la(n,"multi_roll",`${a}x ${t.tableId}`,{raw:`${t.count}*${t.tableId}`,parsed:{count:a,tableId:t.tableId,unique:t.unique}});const c=[],d=new Set;for(let h=0;h<a;h++){const m=this.deps.rollTable(o,n,r,{unique:t.unique,excludeIds:t.unique?d:void 0});m.text&&(c.push(m.text),m.entryId&&d.add(m.entryId))}const p=c.join(t.separator??", ");return Yr(n,{value:p},{type:"multi_roll",tableId:t.tableId,countSource:i,count:a,unique:t.unique??!1,separator:t.separator??", "}),p}evaluateMultiRollTemplate(t,n,r,a,i,o){la(o,"multi_roll",`${r}x ${i.tableId} (template)`,{raw:`${i.count}*${i.tableId}`,parsed:{count:r,tableId:i.tableId,unique:i.unique,isTemplate:!0}});const c=[];for(let p=0;p<r;p++){const h=this.evaluateTemplateInternal(t,n,o);h&&c.push(h)}const d=c.join(i.separator??", ");return Yr(o,{value:d},{type:"multi_roll",tableId:i.tableId,countSource:a,count:r,unique:!1,separator:i.separator??", "}),d}evaluateAgain(t,n,r){if(!n.currentTableId)return console.warn("{{again}} used outside of table context"),"";const a=this.deps.getTable(n.currentTableId,r);if(!a)return"";const i=new Set;n.currentEntryId&&i.add(n.currentEntryId);const o=t.count??1,c=[];for(let d=0;d<o;d++){const p=this.deps.rollTable(a,n,r,{unique:t.unique,excludeIds:i});p.text&&(c.push(p.text),p.entryId&&t.unique&&i.add(p.entryId))}return c.join(t.separator??", ")}evaluateInstance(t,n,r){const a=lD(n,t.instanceName);if(a)return rn(n,"instance",`Instance: ${t.instanceName} (cached)`,{raw:`${t.tableId}#${t.instanceName}`},{value:a.text,cached:!0},{type:"instance",name:t.instanceName,cached:!0,tableId:t.tableId}),a.text;const i=this.deps.getTable(t.tableId,r);if(!i)return console.warn(`Table not found: ${t.tableId}`),"";la(n,"instance",`Instance: ${t.instanceName}`,{raw:`${t.tableId}#${t.instanceName}`,parsed:{tableId:t.tableId,instanceName:t.instanceName}});const o=this.deps.rollTable(i,n,r),c={text:o.text,resultType:o.resultType,assets:o.assets,placeholders:o.placeholders,metadata:{sourceId:t.tableId,collectionId:r,timestamp:Date.now(),entryId:o.entryId}};return oD(n,t.instanceName,c),Yr(n,{value:o.text,cached:!1},{type:"instance",name:t.instanceName,cached:!1,tableId:t.tableId}),o.text}evaluateCaptureMultiRoll(t,n,r){const a=uD(n,t.captureVar);a&&console.warn(`Capture variable '$${t.captureVar}' overwrites existing ${a} variable`);let i;if(t.diceCount)i=ou(t.diceCount,{maxExplodingDice:n.config.maxExplodingDice}).total;else if(typeof t.count=="number")i=t.count;else{let y;if(t.count.includes(".")){const k=t.count.indexOf("."),N=t.count.slice(0,k),C=t.count.slice(k+1),T=Mo(n,N);T?C==="count"?y=T.count:(console.warn(`Cannot use capture property '$${t.count}' as multi-roll count`),y=1):ri(n,N)?(C==="count"||console.warn(`Cannot use capture property '$${t.count}' as multi-roll count`),y=1):y=Ii(n,t.count)}else y=Ii(n,t.count);i=typeof y=="number"?y:parseInt(String(y),10)||1}let o=t.tableId;t.namespace?o=`${t.namespace}.${t.tableId}`:t.alias&&(o=`${t.alias}.${t.tableId}`);const c=this.deps.resolveTableRef(o,r);if(!c)return console.warn(`Table not found: ${o}`),"";const{table:d,collectionId:p}=c;la(n,"capture_multi_roll",`${i}x ${t.tableId} >> $${t.captureVar}`,{raw:`${t.count}*${t.tableId} >> $${t.captureVar}`,parsed:{count:i,tableId:t.tableId,captureVar:t.captureVar,unique:t.unique,silent:t.silent}});const h=[],m=[],v=new Set;for(let y=0;y<i;y++){const k=n.collectedDescriptions.length,N=this.deps.rollTable(d,n,p,{unique:t.unique,excludeIds:t.unique?v:void 0});if(N.text){m.push(N.text);const C=n.collectedDescriptions.slice(k),T=C.length>0?C[0].description:void 0;h.push({value:N.text,sets:N.placeholders??{},description:T}),N.entryId&&v.add(N.entryId)}}const g={items:h,count:h.length};cD(n,t.captureVar,g);let x;return t.silent?x="":x=m.join(t.separator??", "),Yr(n,{value:x},{type:"capture_multi_roll",tableId:t.tableId,captureVar:t.captureVar,count:h.length,unique:t.unique??!1,silent:t.silent??!1,separator:t.separator??", ",capturedItems:h.map(y=>({value:y.value,sets:y.sets}))}),x}evaluateCaptureAccess(t,n){var d,p;const r=Mo(n,t.varName),a=ri(n,t.varName);let i=`$${t.varName}`;if(t.index!==void 0&&(i+=`[${t.index}]`),t.properties&&t.properties.length>0&&(i+="."+t.properties.map(h=>`@${h}`).join(".")),!r&&a)return this.evaluateCaptureSharedAccess(t,a,n,i);if(!r)return console.warn(`Capture variable not found: $${t.varName} (forward reference?)`),rn(n,"capture_access",i,{raw:i},{value:"",error:"Variable not found"},{type:"capture_access",varName:t.varName,index:t.index,property:((d=t.properties)==null?void 0:d[0])??"value",found:!1}),"";let o;const c=(p=t.properties)==null?void 0:p[0];if(c==="count"&&t.index===void 0)return o=String(r.count),rn(n,"capture_access",i,{raw:i},{value:o},{type:"capture_access",varName:t.varName,property:"count",found:!0,totalItems:r.items.length}),o;if(t.index!==void 0){let h=t.index;if(h<0&&(h=r.items.length+h),h<0||h>=r.items.length)return console.warn(`Capture access out of bounds: $${t.varName}[${t.index}] (length: ${r.items.length})`),rn(n,"capture_access",i,{raw:i},{value:"",error:`Index out of bounds (${r.items.length} items)`},{type:"capture_access",varName:t.varName,index:t.index,property:c??"value",found:!1,totalItems:r.items.length}),"";const m=r.items[h];return t.properties&&t.properties.length>0?o=this.traversePropertyChain(m,t.properties,`$${t.varName}[${t.index}]`):o=m.value,rn(n,"capture_access",i,{raw:i},{value:o},{type:"capture_access",varName:t.varName,index:t.index,property:c??"value",found:!0,totalItems:r.items.length}),o}return c&&c!=="value"&&c!=="count"?o=r.items.map(m=>t.properties&&t.properties.length>0?this.traversePropertyChain(m,t.properties,`$${t.varName}`):m.value).filter(m=>m!=="").join(t.separator??", "):o=r.items.map(m=>m.value).join(t.separator??", "),rn(n,"capture_access",i,{raw:i},{value:o},{type:"capture_access",varName:t.varName,property:c??"value",found:!0,totalItems:r.items.length}),o}traversePropertyChain(t,n,r){let a=t;for(let i=0;i<n.length;i++){const o=n[i],c=`${r}.@${o}`;if(o==="value")return i<n.length-1?(console.warn(`Cannot access properties after .value: ${c}`),""):a.value;if(o==="count")return i<n.length-1?(console.warn(`Cannot access properties after .count: ${c}`),""):"1";if(o==="description")return i<n.length-1?(console.warn(`Cannot access properties after .description: ${c}`),""):a.description??"";const d=a.sets[o];if(d===void 0)return console.warn(`Property not found: ${c}`),"";if(i===n.length-1)return typeof d=="string"?d:d.value;if(typeof d=="string")return console.warn(`Cannot chain through string property: ${c}`),"";a=d,r=c}return a.value}getNestedCaptureItem(t,n){let r=t;for(const a of n){if(a==="value"||a==="count"||a==="description")return null;const i=r.sets[a];if(!i||typeof i=="string")return null;r=i}return r}evaluateCaptureSharedAccess(t,n,r,a){var o;let i;return t.properties&&t.properties.length>0?i=this.traversePropertyChain(n,t.properties,`$${t.varName}`):i=n.value,rn(r,"capture_access",a,{raw:a},{value:i},{type:"capture_access",varName:t.varName,property:((o=t.properties)==null?void 0:o[0])??"value",found:!0,totalItems:1,isCaptureShared:!0}),i}evaluateCollect(t,n){const r=`collect:$${t.varName}.${t.property}${t.unique?"|unique":""}`,a=Mo(n,t.varName),i=ri(n,t.varName);if(!a&&i){let p;if(t.property==="value")p=i.value;else if(t.property==="description")p=i.description??"";else{const h=i.sets[t.property];h===void 0?p="":typeof h=="string"?p=h:p=h.value}return rn(n,"collect",r,{raw:r},{value:p},{type:"collect",varName:t.varName,property:t.property,unique:t.unique??!1,separator:t.separator??", ",allValues:[p].filter(h=>h!==""),resultValues:[p].filter(h=>h!=="")}),p}if(!a)return console.warn(`Capture variable not found: $${t.varName} (forward reference?)`),rn(n,"collect",r,{raw:r},{value:"",error:"Variable not found"},{type:"collect",varName:t.varName,property:t.property,unique:t.unique??!1,separator:t.separator??", ",allValues:[],resultValues:[]}),"";let o;t.property==="value"?o=a.items.map(p=>p.value):t.property==="description"?o=a.items.map(p=>p.description??""):o=a.items.map(p=>{const h=p.sets[t.property];return h===void 0?"":typeof h=="string"?h:h.value});let c=o.filter(p=>p!=="");t.unique&&(c=[...new Set(c)]);const d=c.join(t.separator??", ");return rn(n,"collect",r,{raw:r},{value:d},{type:"collect",varName:t.varName,property:t.property,unique:t.unique??!1,separator:t.separator??", ",allValues:o.filter(p=>p!==""),resultValues:c}),d}evaluateSwitchExpression(t,n,r){for(const a of t.clauses)if(this.evaluateSwitchCondition(a.condition,void 0,n,r))return this.evaluateSwitchResult(a.resultExpr,n,r);return t.elseExpr!==void 0?this.evaluateSwitchResult(t.elseExpr,n,r):(console.warn("Switch expression: no clause matched and no else provided"),"")}evaluateSwitchToResultExpr(t,n,r){for(const a of t.clauses)if(this.evaluateSwitchCondition(a.condition,void 0,n,r))return a.resultExpr;if(t.elseExpr!==void 0)return t.elseExpr}evaluateSwitchModifiers(t,n,r,a){for(const i of n.clauses)if(this.evaluateSwitchCondition(i.condition,t,r,a))return this.evaluateSwitchResult(i.resultExpr,r,a);return n.elseExpr!==void 0?this.evaluateSwitchResult(n.elseExpr,r,a):t}prepareConditionWithBaseValue(t,n){return t.replace(/\$(?![a-zA-Z_])/g,JSON.stringify(n))}evaluateSwitchCondition(t,n,r,a){let i=t;n!==void 0&&(i=this.prepareConditionWithBaseValue(t,n));const o=this.evaluatePattern(i,r,a);return OD(o,r)}evaluateSwitchResult(t,n,r){const a=t.trim();if(a.startsWith('"')&&a.endsWith('"')||a.startsWith("'")&&a.endsWith("'")){const i=a.slice(1,-1);return i.includes("{{")?this.evaluatePattern(i,n,r):i}return a.includes("{{")?this.evaluatePattern(a,n,r):this.evaluatePattern(`{{${a}}}`,n,r)}}class LD{constructor(t={}){Rn(this,"collections",new Map);Rn(this,"config");Rn(this,"evaluator");Rn(this,"resolvedTables",new Map);var n,r,a,i;this.config={maxRecursionDepth:((n=t.config)==null?void 0:n.maxRecursionDepth)??50,maxExplodingDice:((r=t.config)==null?void 0:r.maxExplodingDice)??100,maxInheritanceDepth:((a=t.config)==null?void 0:a.maxInheritanceDepth)??5,uniqueOverflowBehavior:((i=t.config)==null?void 0:i.uniqueOverflowBehavior)??"stop"},this.evaluator=new PD({resolveTableRef:(o,c)=>this.resolveTableRef(o,c),resolveTemplateRef:(o,c)=>this.resolveTemplateRef(o,c),rollTable:(o,c,d,p)=>this.rollTable(o,c,d,p),getCollection:o=>this.getCollection(o),getTable:(o,c)=>this.getTable(o,c)})}loadCollection(t,n,r=!1){const a=new Map;for(const c of t.tables)a.set(c.id,c);const i=new Map;if(t.templates)for(const c of t.templates)i.set(c.id,c);const o={id:n,document:t,imports:new Map,isPreloaded:r,source:r?"preloaded":n,tableIndex:a,templateIndex:i};this.collections.set(n,o)}loadFromJson(t,n,r=!1){const a=JSON.parse(t),i=this.validate(a);return i.valid&&this.loadCollection(a,n,r),i}unloadCollection(t){return this.collections.delete(t)}hasCollection(t){return this.collections.has(t)}getCollection(t){return this.collections.get(t)}updateDocument(t,n){const r=this.collections.get(t);if(!r)return;const a=new Map;for(const o of n.tables)a.set(o.id,o);const i=new Map;if(n.templates)for(const o of n.templates)i.set(o.id,o);r.document=n,r.tableIndex=a,r.templateIndex=i,this.resolveImports()}listCollections(){return Array.from(this.collections.values()).map(t=>({id:t.id,name:t.document.metadata.name,isPreloaded:t.isPreloaded}))}resolveImports(t){for(const n of this.collections.values())if(!(!n.document.imports||n.document.imports.length===0)){n.imports.clear();for(const r of n.document.imports){let a;if(t){const i=t.get(r.path);i&&(a=this.collections.get(i))}if(!a){for(const i of this.collections.values())if(i.document.metadata.namespace===r.path){a=i;break}}a||(a=this.collections.get(r.path)),a&&n.imports.set(r.alias,a)}}}validate(t){return Qx(t)}getTable(t,n){if(n){const r=this.collections.get(n);return r==null?void 0:r.tableIndex.get(t)}for(const r of this.collections.values()){const a=r.tableIndex.get(t);if(a)return a}}listTables(t,n=!1){const r=[],a=i=>{for(const o of i.document.tables)!n&&o.hidden||r.push({id:o.id,name:o.name,type:o.type,description:o.description,tags:o.tags,hidden:o.hidden,entryCount:o.type==="simple"?o.entries.length:void 0,resultType:o.resultType})};if(t){const i=this.collections.get(t);i&&a(i)}else for(const i of this.collections.values())a(i);return r}getTemplate(t,n){const r=this.collections.get(n);return r==null?void 0:r.templateIndex.get(t)}listTemplates(t){const n=this.collections.get(t);return n!=null&&n.document.templates?n.document.templates.map(r=>({id:r.id,name:r.name,description:r.description,tags:r.tags,resultType:r.resultType})):[]}listImportedTables(t,n=!0){const r=this.collections.get(t);if(!r)return[];const a=[],i=new Set;i.add(t);for(const[o,c]of r.imports)this.collectImportedTables(c,o,n,i,a);return a}listImportedTemplates(t){const n=this.collections.get(t);if(!n)return[];const r=[],a=new Set;a.add(t);for(const[i,o]of n.imports)this.collectImportedTemplates(o,i,a,r);return r}collectImportedTables(t,n,r,a,i){if(!a.has(t.id)){a.add(t.id);for(const o of t.document.tables)!r&&o.hidden||i.push({id:o.id,name:o.name,type:o.type,description:o.description,tags:o.tags,hidden:o.hidden,entryCount:o.type==="simple"?o.entries.length:void 0,alias:n,sourceNamespace:t.document.metadata.namespace,sourceCollectionName:t.document.metadata.name});for(const[o,c]of t.imports)this.collectImportedTables(c,`${n}.${o}`,r,a,i)}}collectImportedTemplates(t,n,r,a){if(!r.has(t.id)){if(r.add(t.id),t.document.templates)for(const i of t.document.templates)a.push({id:i.id,name:i.name,description:i.description,tags:i.tags,alias:n,sourceNamespace:t.document.metadata.namespace,sourceCollectionName:t.document.metadata.name});for(const[i,o]of t.imports)this.collectImportedTemplates(o,`${n}.${i}`,r,a)}}roll(t,n,r){const a=this.collections.get(n);if(!a)throw new Error(`Collection not found: ${n}`);const i=a.tableIndex.get(t);if(!i)throw new Error(`Table not found: ${t} in collection ${n}`);const o=this.createGenerationContext(a,r);Zp(o,n),o.collectedDescriptions=[],la(o,"root",`Roll: ${i.name||t}`,{raw:t,parsed:{collectionId:n,tableType:i.type}});const c=this.rollTable(i,o,n),d=c.text;Yr(o,{value:d});const p=Kp(o),h=o.captureVariables.size>0?Object.fromEntries(o.captureVariables):void 0,m=o.collectedDescriptions.length>0?[...o.collectedDescriptions].sort((v,g)=>(v.depth??0)-(g.depth??0)):void 0;return{text:d,resultType:c.resultType,assets:c.assets,placeholders:c.placeholders,metadata:{sourceId:t,collectionId:n,timestamp:Date.now(),entryId:c.entryId},trace:p??void 0,captures:h,descriptions:m}}rollTemplate(t,n,r){const a=this.collections.get(n);if(!a)throw new Error(`Collection not found: ${n}`);const i=a.templateIndex.get(t);if(!i)throw new Error(`Template not found: ${t} in collection ${n}`);const o=this.createGenerationContext(a,r);Zp(o,n),o.collectedDescriptions=[],la(o,"root",`Template: ${i.name||t}`,{raw:t,parsed:{collectionId:n,pattern:i.pattern}}),i.shared&&this.evaluator.evaluateTableLevelShared(i.shared,o,n,t);const c=this.evaluator.evaluatePattern(i.pattern,o,n);Yr(o,{value:c});const d=Kp(o),p=o.captureVariables.size>0?Object.fromEntries(o.captureVariables):void 0,h=o.collectedDescriptions.length>0?[...o.collectedDescriptions].sort((m,v)=>(m.depth??0)-(v.depth??0)):void 0;return{text:c,resultType:i.resultType,metadata:{sourceId:t,collectionId:n,timestamp:Date.now()},trace:d??void 0,captures:p,descriptions:h}}evaluateRawPattern(t,n,r){const a=this.collections.get(n);if(!a)throw new Error(`Collection not found: ${n}`);const i=this.createGenerationContext(a,r);Zp(i,n),i.collectedDescriptions=[],r!=null&&r.shared&&this.evaluator.evaluateTableLevelShared(r.shared,i,n,"__preview__"),la(i,"root","Pattern Preview",{raw:t,parsed:{collectionId:n,pattern:t}});const{text:o,expressionOutputs:c}=this.evaluator.evaluatePatternWithOutputs(t,i,n);Yr(i,{value:o});const d=Kp(i),p=i.captureVariables.size>0?Object.fromEntries(i.captureVariables):void 0;return{text:o,metadata:{sourceId:"__preview__",collectionId:n,timestamp:Date.now()},trace:d??void 0,captures:p,expressionOutputs:c}}createGenerationContext(t,n){const r=new Map;if(t.document.variables)for(const[o,c]of Object.entries(t.document.variables))r.set(o,c);const a={maxRecursionDepth:t.document.metadata.maxRecursionDepth??this.config.maxRecursionDepth,maxExplodingDice:t.document.metadata.maxExplodingDice??this.config.maxExplodingDice,maxInheritanceDepth:t.document.metadata.maxInheritanceDepth??this.config.maxInheritanceDepth,uniqueOverflowBehavior:t.document.metadata.uniqueOverflowBehavior??this.config.uniqueOverflowBehavior},i=aD(a,r,{enableTrace:n==null?void 0:n.enableTrace});if(t.document.shared){for(const o of Object.keys(t.document.shared))iD(i,o);this.evaluator.evaluateSharedVariables(t.document.shared,i,t.id)}return i}resolveTableInheritance(t,n,r=0){const a=`${n}:${t.id}`,i=this.resolvedTables.get(a);if(i)return i;if(!t.extends)return t;const o=this.collections.get(n),c=(o==null?void 0:o.document.metadata.maxInheritanceDepth)??this.config.maxInheritanceDepth;if(r>=c)throw new Error(`Inheritance depth limit exceeded for table '${t.id}' (max: ${c})`);const d=t.extends,p=this.resolveTableRef(d,n);if(!p)throw new Error(`Parent table not found: '${d}' for table '${t.id}'`);if(p.table.type!=="simple")throw new Error(`Cannot extend non-simple table: '${d}' (type: ${p.table.type})`);const h=this.resolveTableInheritance(p.table,p.collectionId,r+1),m=[],v=new Map;for(let y=0;y<h.entries.length;y++){const k=h.entries[y],N=k.id??`${h.id}${String(y).padStart(3,"0")}`;v.set(N,{...k,id:N})}for(let y=0;y<t.entries.length;y++){const k=t.entries[y],N=k.id??`${t.id}${String(y).padStart(3,"0")}`,C=v.get(N);C?v.set(N,{...C,...k,id:N}):v.set(N,{...k,id:N})}for(const y of v.values())m.push(y);const g={...h.defaultSets??{},...t.defaultSets??{}},x={...t,entries:m,defaultSets:Object.keys(g).length>0?g:void 0,extends:void 0};return this.resolvedTables.set(a,x),x}resolveTableRef(t,n){return yD(t,n,{collections:this.collections})}resolveTemplateRef(t,n){return bD(t,n,{collections:this.collections})}clearInheritanceCache(){this.resolvedTables.clear()}rollTable(t,n,r,a={}){if(!iu(n))throw new Error(`Recursion limit exceeded (${n.config.maxRecursionDepth})`);la(n,"table_roll",`Table: ${t.name||t.id}`,{raw:t.id,parsed:{type:t.type,name:t.name}});try{Yp(n,t.id),t.shared&&this.evaluator.evaluateTableLevelShared(t.shared,n,r,t.id);let i;if(t.type==="simple")i=this.rollSimple(t,n,r,a);else if(t.type==="composite")i=this.rollComposite(t,n,r,a);else if(t.type==="collection")i=this.rollCollection(t,n,r,a);else throw new Error(`Unknown table type: ${t.type}`);return Yr(n,{value:i.text}),i}catch(i){throw Yr(n,{value:"",error:String(i)}),i}finally{su(n)}}rollSimple(t,n,r,a){const i=this.resolveTableInheritance(t,r),o=al(i.entries,i.id,a.excludeIds),c=nm(o),d=e0(i,n,a);if(!d)return rn(n,"entry_select","No entry selected",{raw:t.id},{value:""},{type:"entry_select",tableId:t.id,entryId:"",selectedWeight:0,totalWeight:c,probability:0,poolSize:o.length,unique:a.unique??!1,excludedIds:a.excludeIds?Array.from(a.excludeIds):void 0}),{text:""};const p=o.find(g=>g.id===d.id),h=(p==null?void 0:p.weight)??1;rn(n,"entry_select",`Selected: ${d.id}`,{raw:t.id,parsed:{entryValue:d.entry.value}},{value:d.entry.value},{type:"entry_select",tableId:t.id,entryId:d.id,selectedWeight:h,totalWeight:c,probability:c>0?h/c:0,poolSize:o.length,unique:a.unique??!1,excludedIds:a.excludeIds?Array.from(a.excludeIds):void 0}),Yp(n,t.id,d.id),Fc(n,d.entry.description),Oc(n,d.entry.value);let m=d.mergedSets;Object.keys(d.mergedSets).length>0&&(m=this.evaluator.evaluateSetValues(d.mergedSets,n,r,t.id),nb(n,t.id,m));const v=this.evaluator.evaluatePattern(d.entry.value??"",n,r);if(Fc(n,void 0),Oc(n,void 0),d.entry.description){const g=this.evaluator.evaluatePattern(d.entry.description,n,r);rb(n,i.name,i.id,v,g)}return{text:v,resultType:d.resultType,assets:d.assets,placeholders:m,entryId:d.id}}rollComposite(t,n,r,a){const i=t0(t.sources),o=n0(i),c=fD(t);if(!c)return{text:""};rn(n,"composite_select",`Source: ${c.sourceTableId}`,{raw:t.id,parsed:{sourceCount:t.sources.length}},{value:c.sourceTableId},{type:"composite_select",sources:i.map(h=>({tableId:h.source.tableId,weight:h.weight,probability:o>0?h.weight/o:0})),selectedTableId:c.sourceTableId});const d=this.getTable(c.sourceTableId,r);if(!d)throw new Error(`Source table not found: ${c.sourceTableId}`);const p=this.rollTable(d,n,r,a);return{...p,resultType:p.resultType??d.resultType??t.resultType}}rollCollection(t,n,r,a){const i=v=>{const g=[];for(const x of v){const y=this.getTable(x,r);y&&y.type==="simple"&&g.push({id:x,table:y})}return g},o=i(t.collections);let c=0,d=0;for(const{table:v}of o){const g=al(v.entries,v.id,a.excludeIds);c+=g.length,d+=nm(g)}rn(n,"collection_merge",`Merged ${t.collections.length} tables`,{raw:t.id,parsed:{sourceTableIds:t.collections}},{value:`${c} entries`},{type:"collection_merge",sourceTables:t.collections,totalEntries:c,totalWeight:d});const p=r0(t,i,n,a);if(!p)return{text:""};rn(n,"entry_select",`Selected: ${p.id}`,{raw:t.id,parsed:{entryValue:p.entry.value,sourceTableId:p.sourceTableId}},{value:p.entry.value},{type:"entry_select",tableId:t.id,entryId:p.id,selectedWeight:1,totalWeight:d,probability:d>0?1/c:0,poolSize:c,unique:a.unique??!1,excludedIds:a.excludeIds?Array.from(a.excludeIds):void 0}),Yp(n,t.id,p.id),Fc(n,p.entry.description),Oc(n,p.entry.value);let h=p.mergedSets;Object.keys(p.mergedSets).length>0&&(h=this.evaluator.evaluateSetValues(p.mergedSets,n,r,t.id),nb(n,t.id,h));const m=this.evaluator.evaluatePattern(p.entry.value??"",n,r);if(Fc(n,void 0),Oc(n,void 0),p.entry.description){const v=this.getTable(p.sourceTableId,r),g=(v==null?void 0:v.name)??p.sourceTableId,x=this.evaluator.evaluatePattern(p.entry.description,n,r);rb(n,g,p.sourceTableId,m,x)}return{text:m,resultType:p.resultType,assets:p.assets,placeholders:h,entryId:p.id}}}const im=(e,t)=>t.some(n=>e instanceof n);let lb,cb;function zD(){return lb||(lb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BD(){return cb||(cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sm=new WeakMap,Jp=new WeakMap,Hu=new WeakMap;function UD(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(Li(e.result)),a()},o=()=>{r(e.error),a()};e.addEventListener("success",i),e.addEventListener("error",o)});return Hu.set(t,e),t}function HD(e){if(sm.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),a()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});sm.set(e,t)}let om={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return sm.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function a0(e){om=e(om)}function qD(e){return BD().includes(e)?function(...t){return e.apply(lm(this),t),Li(this.request)}:function(...t){return Li(e.apply(lm(this),t))}}function WD(e){return typeof e=="function"?qD(e):(e instanceof IDBTransaction&&HD(e),im(e,zD())?new Proxy(e,om):e)}function Li(e){if(e instanceof IDBRequest)return UD(e);if(Jp.has(e))return Jp.get(e);const t=WD(e);return t!==e&&(Jp.set(e,t),Hu.set(t,e)),t}const lm=e=>Hu.get(e);function VD(e,t,{blocked:n,upgrade:r,blocking:a,terminated:i}={}){const o=indexedDB.open(e,t),c=Li(o);return r&&o.addEventListener("upgradeneeded",d=>{r(Li(o.result),d.oldVersion,d.newVersion,Li(o.transaction),d)}),n&&o.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const GD=["get","getKey","getAll","getAllKeys","count"],KD=["put","add","delete","clear"],Xp=new Map;function ub(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xp.get(t))return Xp.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=KD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||GD.includes(n)))return;const i=async function(o,...c){const d=this.transaction(o,a?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),a&&d.done]))[0]};return Xp.set(t,i),i}a0(e=>({...e,get:(t,n,r)=>ub(t,n)||e.get(t,n,r),has:(t,n)=>!!ub(t,n)||e.has(t,n)}));const YD=["continue","continuePrimaryKey","advance"],db={},cm=new WeakMap,i0=new WeakMap,ZD={get(e,t){if(!YD.includes(t))return e[t];let n=db[t];return n||(n=db[t]=function(...r){cm.set(this,i0.get(this)[t](...r))}),n}};async function*QD(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,ZD);for(i0.set(n,t),Hu.set(n,lm(t));t;)yield n,t=await(cm.get(n)||t.continue()),cm.delete(n)}function pb(e,t){return t===Symbol.asyncIterator&&im(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&im(e,[IDBIndex,IDBObjectStore])}a0(e=>({...e,get(t,n,r){return pb(t,n)?QD:e.get(t,n,r)},has(t,n){return pb(t,n)||e.has(t,n)}}));const JD="rolldeo-db",XD=2;let eh=null;async function on(){return eh||(eh=VD(JD,XD,{upgrade(e,t){if(!e.objectStoreNames.contains("collections")){const n=e.createObjectStore("collections",{keyPath:"id"});n.createIndex("by-namespace","namespace"),n.createIndex("by-preloaded","isPreloaded"),n.createIndex("by-tags","tags",{multiEntry:!0})}if(!e.objectStoreNames.contains("rollHistory")){const n=e.createObjectStore("rollHistory",{keyPath:"id",autoIncrement:!0});n.createIndex("by-collection","collectionId"),n.createIndex("by-timestamp","timestamp"),n.createIndex("by-pinned","pinned")}if(e.objectStoreNames.contains("userPreferences")||e.createObjectStore("userPreferences",{keyPath:"id"}),t<2){if(!e.objectStoreNames.contains("favorites")){const n=e.createObjectStore("favorites",{keyPath:"id"});n.createIndex("by-collection","collectionId"),n.createIndex("by-created","createdAt")}if(!e.objectStoreNames.contains("usageStats")){const n=e.createObjectStore("usageStats",{keyPath:"id"});n.createIndex("by-rollCount","rollCount"),n.createIndex("by-lastRolled","lastRolled")}}}})),eh}async function th(e){await(await on()).put("collections",e)}async function ej(e){return(await on()).get("collections",e)}async function s0(){return(await on()).getAll("collections")}async function tj(e){await(await on()).delete("collections",e)}async function nj(e,t){const n=await on(),r=await n.get("collections",e);r&&(r.hiddenFromUI=t,r.updatedAt=Date.now(),await n.put("collections",r))}async function rj(){return(await s0()).filter(t=>t.isPreloaded&&t.hiddenFromUI)}async function aj(){const e=await on(),t=await rj(),n=e.transaction("collections","readwrite");for(const r of t)r.hiddenFromUI=!1,r.updatedAt=Date.now(),await n.store.put(r);return await n.done,t.length}async function hb(e){return(await on()).add("rollHistory",e)}async function ij(e=100){const r=(await on()).transaction("rollHistory","readonly").store.index("by-timestamp"),a=[];let i=await r.openCursor(null,"prev");for(;i&&a.length<e;)a.push(i.value),i=await i.continue();return a}async function sj(e,t){const n=await on(),r=await n.get("rollHistory",e);r&&(r.pinned=t,await n.put("rollHistory",r))}async function oj(e){await(await on()).delete("rollHistory",e)}async function lj(e=!0){const t=await on();if(e){const r=(await t.getAll("rollHistory")).filter(i=>!i.pinned),a=t.transaction("rollHistory","readwrite");await Promise.all(r.map(i=>a.store.delete(i.id))),await a.done}else await t.clear("rollHistory")}function Vo(e,t,n){return`${e}:${t}:${n}`}async function um(){return(await on()).getAll("favorites")}async function cj(e){return(await on()).getAllFromIndex("favorites","by-collection",e)}async function uj(e,t,n){const r=await on(),a=Vo(e,t,n);if(await r.get("favorites",a))return;const c=(await um()).reduce((p,h)=>Math.max(p,h.sortOrder),0),d={id:a,collectionId:e,itemId:n,type:t,createdAt:Date.now(),sortOrder:c+1};await r.put("favorites",d)}async function dj(e,t,n){const r=await on(),a=Vo(e,t,n);await r.delete("favorites",a)}async function pj(e){const t=await on(),n=await cj(e),r=t.transaction("favorites","readwrite");await Promise.all(n.map(a=>r.store.delete(a.id))),await r.done}function rf(e,t,n){return`${e}:${t}:${n}`}async function dm(){return(await on()).getAll("usageStats")}async function hj(e,t,n){const r=await on(),a=rf(e,t,n),i=await r.get("usageStats",a),o=Date.now();if(i)i.rollCount+=1,i.lastRolled=o,await r.put("usageStats",i);else{const c={id:a,collectionId:e,itemId:n,type:t,rollCount:1,lastRolled:o,firstRolled:o};await r.put("usageStats",c)}}async function nh(e=10){const r=(await on()).transaction("usageStats","readonly").store.index("by-lastRolled"),a=[];let i=await r.openCursor(null,"prev");for(;i&&a.length<e;)a.push(i.value),i=await i.continue();return a}async function rh(e=10){const r=(await on()).transaction("usageStats","readonly").store.index("by-rollCount"),a=[];let i=await r.openCursor(null,"prev");for(;i&&a.length<e;)a.push(i.value),i=await i.continue();return a}async function mj(e,t,n){const r=await on(),a=rf(e,t,n);return r.get("usageStats",a)}async function fj(){await(await on()).clear("usageStats")}async function gj(e){const t=await on(),r=(await dm()).filter(i=>i.collectionId===e),a=t.transaction("usageStats","readwrite");await Promise.all(r.map(i=>a.store.delete(i.id))),await a.done}function vj(e,t,n){return`${e}-${t}-${n}`.toLowerCase().replace(/[^a-z0-9.-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function Pc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ah={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var mb;function yj(){return mb||(mb=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,a,i){function o(p,h){if(!a[p]){if(!r[p]){var m=typeof Pc=="function"&&Pc;if(!h&&m)return m(p,!0);if(c)return c(p,!0);var v=new Error("Cannot find module '"+p+"'");throw v.code="MODULE_NOT_FOUND",v}var g=a[p]={exports:{}};r[p][0].call(g.exports,function(x){var y=r[p][1][x];return o(y||x)},g,g.exports,n,r,a,i)}return a[p].exports}for(var c=typeof Pc=="function"&&Pc,d=0;d<i.length;d++)o(i[d]);return o})({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var p,h,m,v,g,x,y,k=[],N=0,C=d.length,T=C,j=i.getTypeOf(d)!=="string";N<d.length;)T=C-N,m=j?(p=d[N++],h=N<C?d[N++]:0,N<C?d[N++]:0):(p=d.charCodeAt(N++),h=N<C?d.charCodeAt(N++):0,N<C?d.charCodeAt(N++):0),v=p>>2,g=(3&p)<<4|h>>4,x=1<T?(15&h)<<2|m>>6:64,y=2<T?63&m:64,k.push(c.charAt(v)+c.charAt(g)+c.charAt(x)+c.charAt(y));return k.join("")},a.decode=function(d){var p,h,m,v,g,x,y=0,k=0,N="data:";if(d.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var C,T=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===c.charAt(64)&&T--,d.charAt(d.length-2)===c.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(C=o.uint8array?new Uint8Array(0|T):new Array(0|T);y<d.length;)p=c.indexOf(d.charAt(y++))<<2|(v=c.indexOf(d.charAt(y++)))>>4,h=(15&v)<<4|(g=c.indexOf(d.charAt(y++)))>>2,m=(3&g)<<6|(x=c.indexOf(d.charAt(y++))),C[k++]=p,g!==64&&(C[k++]=h),x!==64&&(C[k++]=m);return C}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function p(h,m,v,g,x){this.compressedSize=h,this.uncompressedSize=m,this.crc32=v,this.compression=g,this.compressedContent=x}p.prototype={getContentWorker:function(){var h=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),m=this;return h.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(h,m,v){return h.pipe(new c).pipe(new d("uncompressedSize")).pipe(m.compressWorker(v)).pipe(new d("compressedSize")).withStreamInfo("compression",m)},r.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=(function(){for(var c,d=[],p=0;p<256;p++){c=p;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;d[p]=c}return d})();r.exports=function(c,d){return c!==void 0&&c.length?i.getTypeOf(c)!=="string"?(function(p,h,m,v){var g=o,x=v+m;p^=-1;for(var y=v;y<x;y++)p=p>>>8^g[255&(p^h[y])];return-1^p})(0|d,c,c.length,0):(function(p,h,m,v){var g=o,x=v+m;p^=-1;for(var y=v;y<x;y++)p=p>>>8^g[255&(p^h.charCodeAt(y))];return-1^p})(0|d,c,c.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),c=n("./utils"),d=n("./stream/GenericWorker"),p=i?"uint8array":"array";function h(m,v){d.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=v,this.meta={}}a.magic="\b\0",c.inherits(h,d),h.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(p,m.data),!1)},h.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(v){m.push({data:v,meta:m.meta})}},a.compressWorker=function(m){return new h("Deflate",m)},a.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,x){var y,k="";for(y=0;y<x;y++)k+=String.fromCharCode(255&g),g>>>=8;return k}function o(g,x,y,k,N,C){var T,j,D=g.file,_=g.compression,I=C!==p.utf8encode,R=c.transformTo("string",C(D.name)),z=c.transformTo("string",p.utf8encode(D.name)),P=D.comment,q=c.transformTo("string",C(P)),$=c.transformTo("string",p.utf8encode(P)),G=z.length!==D.name.length,E=$.length!==P.length,L="",Z="",X="",K=D.dir,ee=D.date,U={crc32:0,compressedSize:0,uncompressedSize:0};x&&!y||(U.crc32=g.crc32,U.compressedSize=g.compressedSize,U.uncompressedSize=g.uncompressedSize);var M=0;x&&(M|=8),I||!G&&!E||(M|=2048);var F=0,B=0;K&&(F|=16),N==="UNIX"?(B=798,F|=(function(pe,de){var je=pe;return pe||(je=de?16893:33204),(65535&je)<<16})(D.unixPermissions,K)):(B=20,F|=(function(pe){return 63&(pe||0)})(D.dosPermissions)),T=ee.getUTCHours(),T<<=6,T|=ee.getUTCMinutes(),T<<=5,T|=ee.getUTCSeconds()/2,j=ee.getUTCFullYear()-1980,j<<=4,j|=ee.getUTCMonth()+1,j<<=5,j|=ee.getUTCDate(),G&&(Z=i(1,1)+i(h(R),4)+z,L+="up"+i(Z.length,2)+Z),E&&(X=i(1,1)+i(h(q),4)+$,L+="uc"+i(X.length,2)+X);var le="";return le+=`
\0`,le+=i(M,2),le+=_.magic,le+=i(T,2),le+=i(j,2),le+=i(U.crc32,4),le+=i(U.compressedSize,4),le+=i(U.uncompressedSize,4),le+=i(R.length,2),le+=i(L.length,2),{fileRecord:m.LOCAL_FILE_HEADER+le+R+L,dirRecord:m.CENTRAL_FILE_HEADER+i(B,2)+le+i(q.length,2)+"\0\0\0\0"+i(F,4)+i(k,4)+R+L+q}}var c=n("../utils"),d=n("../stream/GenericWorker"),p=n("../utf8"),h=n("../crc32"),m=n("../signature");function v(g,x,y,k){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=y,this.encodeFileName=k,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(v,d),v.prototype.push=function(g){var x=g.meta.percent||0,y=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,d.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:y?(x+100*(y-k-1))/y:100}}))},v.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var x=this.streamFiles&&!g.file.dir;if(x){var y=o(g,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(g){this.accumulate=!1;var x=this.streamFiles&&!g.file.dir,y=o(g,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),x)this.push({data:(function(k){return m.DATA_DESCRIPTOR+i(k.crc32,4)+i(k.compressedSize,4)+i(k.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var g=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var y=this.bytesWritten-g,k=(function(N,C,T,j,D){var _=c.transformTo("string",D(j));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(N,2)+i(N,2)+i(C,4)+i(T,4)+i(_.length,2)+_})(this.dirRecords.length,y,g,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(g){this._sources.push(g);var x=this;return g.on("data",function(y){x.processChunk(y)}),g.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),g.on("error",function(y){x.error(y)}),this},v.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(g){var x=this._sources;if(!d.prototype.error.call(this,g))return!1;for(var y=0;y<x.length;y++)try{x[y].error(g)}catch{}return!0},v.prototype.lock=function(){d.prototype.lock.call(this);for(var g=this._sources,x=0;x<g.length;x++)g[x].lock()},r.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(c,d,p){var h=new o(d.streamFiles,p,d.platform,d.encodeFileName),m=0;try{c.forEach(function(v,g){m++;var x=(function(C,T){var j=C||T,D=i[j];if(!D)throw new Error(j+" is not a valid compression method !");return D})(g.options.compression,d.compression),y=g.options.compressionOptions||d.compressionOptions||{},k=g.dir,N=g.date;g._compressWorker(x,y).withStreamInfo("file",{name:v,dir:k,date:N,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=m}catch(v){h.error(v)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var c in this)typeof this[c]!="function"&&(o[c]=this[c]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,c){return new i().loadAsync(o,c)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),c=n("./utf8"),d=n("./zipEntries"),p=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function m(v){return new o.Promise(function(g,x){var y=v.decompressed.getContentWorker().pipe(new p);y.on("error",function(k){x(k)}).on("end",function(){y.streamInfo.crc32!==v.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(v,g){var x=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),h.isNode&&h.isStream(v)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",v,!0,g.optimizedBinaryString,g.base64).then(function(y){var k=new d(g);return k.load(y),k}).then(function(y){var k=[o.Promise.resolve(y)],N=y.files;if(g.checkCRC32)for(var C=0;C<N.length;C++)k.push(m(N[C]));return o.Promise.all(k)}).then(function(y){for(var k=y.shift(),N=k.files,C=0;C<N.length;C++){var T=N[C],j=T.fileNameStr,D=i.resolve(T.fileNameStr);x.file(D,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:g.createFolders}),T.dir||(x.file(D).unsafeOriginalName=j)}return k.zipComment.length&&(x.comment=k.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function c(d,p){o.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(p)}i.inherits(c,o),c.prototype._bindStream=function(d){var p=this;(this._stream=d).pause(),d.on("data",function(h){p.push({data:h,meta:{percent:0}})}).on("error",function(h){p.isPaused?this.generatedError=h:p.error(h)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(c,d,p){i.call(this,d),this._helper=c;var h=this;c.on("data",function(m,v){h.push(m)||h._helper.pause(),p&&p(v)}).on("error",function(m){h.emit("error",m)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(D,_,I){var R,z=c.getTypeOf(_),P=c.extend(I||{},h);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(D=N(D)),P.createFolders&&(R=k(D))&&C.call(this,R,!0);var q=z==="string"&&P.binary===!1&&P.base64===!1;I&&I.binary!==void 0||(P.binary=!q),(_ instanceof m&&_.uncompressedSize===0||P.dir||!_||_.length===0)&&(P.base64=!1,P.binary=!0,_="",P.compression="STORE",z="string");var $=null;$=_ instanceof m||_ instanceof d?_:x.isNode&&x.isStream(_)?new y(D,_):c.prepareContent(D,_,P.binary,P.optimizedBinaryString,P.base64);var G=new v(D,$,P);this.files[D]=G}var o=n("./utf8"),c=n("./utils"),d=n("./stream/GenericWorker"),p=n("./stream/StreamHelper"),h=n("./defaults"),m=n("./compressedObject"),v=n("./zipObject"),g=n("./generate"),x=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),k=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var _=D.lastIndexOf("/");return 0<_?D.substring(0,_):""},N=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},C=function(D,_){return _=_!==void 0?_:h.createFolders,D=N(D),this.files[D]||i.call(this,D,null,{dir:!0,createFolders:_}),this.files[D]};function T(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var _,I,R;for(_ in this.files)R=this.files[_],(I=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&D(I,R)},filter:function(D){var _=[];return this.forEach(function(I,R){D(I,R)&&_.push(R)}),_},file:function(D,_,I){if(arguments.length!==1)return D=this.root+D,i.call(this,D,_,I),this;if(T(D)){var R=D;return this.filter(function(P,q){return!q.dir&&R.test(P)})}var z=this.files[this.root+D];return z&&!z.dir?z:null},folder:function(D){if(!D)return this;if(T(D))return this.filter(function(z,P){return P.dir&&D.test(z)});var _=this.root+D,I=C.call(this,_),R=this.clone();return R.root=I.name,R},remove:function(D){D=this.root+D;var _=this.files[D];if(_||(D.slice(-1)!=="/"&&(D+="/"),_=this.files[D]),_&&!_.dir)delete this.files[D];else for(var I=this.filter(function(z,P){return P.name.slice(0,D.length)===D}),R=0;R<I.length;R++)delete this.files[I[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var _,I={};try{if((I=c.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");c.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var R=I.comment||this.comment||"";_=g.generateWorker(this,I,R)}catch(z){(_=new d("error")).error(z)}return new p(_,I.type||"string",I.mimeType)},generateAsync:function(D,_){return this.generateInternalStream(D).accumulate(_)},generateNodeStream:function(D,_){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(_)}};r.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(c){i.call(this,c);for(var d=0;d<this.data.length;d++)c[d]=255&c[d]}n("../utils").inherits(o,i),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var d=c.charCodeAt(0),p=c.charCodeAt(1),h=c.charCodeAt(2),m=c.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===d&&this.data[v+1]===p&&this.data[v+2]===h&&this.data[v+3]===m)return v-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var d=c.charCodeAt(0),p=c.charCodeAt(1),h=c.charCodeAt(2),m=c.charCodeAt(3),v=this.readData(4);return d===v[0]&&p===v[1]&&h===v[2]&&m===v[3]},o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var d,p=0;for(this.checkOffset(c),d=this.index+c-1;d>=this.index;d--)p=(p<<8)+this.byteAt(d);return this.index+=c,p},readString:function(c){return i.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(c){i.call(this,c)}n("../utils").inherits(o,i),o.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(c){i.call(this,c)}n("../utils").inherits(o,i),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var d=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(c){i.call(this,c)}n("../utils").inherits(o,i),o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,d},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),c=n("./ArrayReader"),d=n("./StringReader"),p=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(m){var v=i.getTypeOf(m);return i.checkSupport(v),v!=="string"||o.uint8array?v==="nodebuffer"?new p(m):o.uint8array?new h(i.transformTo("uint8array",m)):new c(i.transformTo("array",m)):new d(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function c(d){i.call(this,"ConvertWorker to "+d),this.destType=d}o.inherits(c,i),c.prototype.processChunk=function(d){this.push({data:o.transformTo(this.destType,d.data),meta:d.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function c(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,i),c.prototype.processChunk=function(d){this.streamInfo.crc32=o(d.data,this.streamInfo.crc32||0),this.push(d)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function c(d){o.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}i.inherits(c,o),c.prototype.processChunk=function(d){if(d){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+d.data.length}o.prototype.processChunk.call(this,d)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function c(d){o.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(h){p.dataIsReady=!0,p.data=h,p.max=h&&h.length||0,p.type=i.getTypeOf(h),p.isPaused||p._tickAndRepeat()},function(h){p.error(h)})}i.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,p);break;case"uint8array":d=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":d=this.data.slice(this.index,p)}return this.index=p,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var d=0;d<this._listeners[o].length;d++)this._listeners[o][d].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(d){c.processChunk(d)}),o.on("end",function(){c.end()}),o.on("error",function(d){c.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),c=n("./GenericWorker"),d=n("../base64"),p=n("../support"),h=n("../external"),m=null;if(p.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(x,y){return new h.Promise(function(k,N){var C=[],T=x._internalType,j=x._outputType,D=x._mimeType;x.on("data",function(_,I){C.push(_),y&&y(I)}).on("error",function(_){C=[],N(_)}).on("end",function(){try{var _=(function(I,R,z){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",R),z);case"base64":return d.encode(R);default:return i.transformTo(I,R)}})(j,(function(I,R){var z,P=0,q=null,$=0;for(z=0;z<R.length;z++)$+=R[z].length;switch(I){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(q=new Uint8Array($),z=0;z<R.length;z++)q.set(R[z],P),P+=R[z].length;return q;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+I+"'")}})(T,C),D);k(_)}catch(I){N(I)}C=[]}).resume()})}function g(x,y,k){var N=y;switch(y){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=y,this._mimeType=k,i.checkSupport(N),this._worker=x.pipe(new o(N)),x.lock()}catch(C){this._worker=new c("error"),this._worker.error(C)}}g.prototype={accumulate:function(x){return v(this,x)},on:function(x,y){var k=this;return x==="data"?this._worker.on(x,function(N){y.call(k,N.data,N.meta)}):this._worker.on(x,function(){i.delay(y,arguments,k)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},x)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),c=n("./nodejsUtils"),d=n("./stream/GenericWorker"),p=new Array(256),h=0;h<256;h++)p[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;p[254]=p[254]=1;function m(){d.call(this,"utf-8 decode"),this.leftOver=null}function v(){d.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?c.newBufferFrom(g,"utf-8"):(function(x){var y,k,N,C,T,j=x.length,D=0;for(C=0;C<j;C++)(64512&(k=x.charCodeAt(C)))==55296&&C+1<j&&(64512&(N=x.charCodeAt(C+1)))==56320&&(k=65536+(k-55296<<10)+(N-56320),C++),D+=k<128?1:k<2048?2:k<65536?3:4;for(y=o.uint8array?new Uint8Array(D):new Array(D),C=T=0;T<D;C++)(64512&(k=x.charCodeAt(C)))==55296&&C+1<j&&(64512&(N=x.charCodeAt(C+1)))==56320&&(k=65536+(k-55296<<10)+(N-56320),C++),k<128?y[T++]=k:(k<2048?y[T++]=192|k>>>6:(k<65536?y[T++]=224|k>>>12:(y[T++]=240|k>>>18,y[T++]=128|k>>>12&63),y[T++]=128|k>>>6&63),y[T++]=128|63&k);return y})(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):(function(x){var y,k,N,C,T=x.length,j=new Array(2*T);for(y=k=0;y<T;)if((N=x[y++])<128)j[k++]=N;else if(4<(C=p[N]))j[k++]=65533,y+=C-1;else{for(N&=C===2?31:C===3?15:7;1<C&&y<T;)N=N<<6|63&x[y++],C--;1<C?j[k++]=65533:N<65536?j[k++]=N:(N-=65536,j[k++]=55296|N>>10&1023,j[k++]=56320|1023&N)}return j.length!==k&&(j.subarray?j=j.subarray(0,k):j.length=k),i.applyFromCharCode(j)})(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(m,d),m.prototype.processChunk=function(g){var x=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=x;(x=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),x.set(y,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var k=(function(C,T){var j;for((T=T||C.length)>C.length&&(T=C.length),j=T-1;0<=j&&(192&C[j])==128;)j--;return j<0||j===0?T:j+p[C[j]]>T?j:T})(x),N=x;k!==x.length&&(o.uint8array?(N=x.subarray(0,k),this.leftOver=x.subarray(k,x.length)):(N=x.slice(0,k),this.leftOver=x.slice(k,x.length))),this.push({data:a.utf8decode(N),meta:g.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=m,i.inherits(v,d),v.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),c=n("./nodejsUtils"),d=n("./external");function p(y){return y}function h(y,k){for(var N=0;N<y.length;++N)k[N]=255&y.charCodeAt(N);return k}n("setimmediate"),a.newBlob=function(y,k){a.checkSupport("blob");try{return new Blob([y],{type:k})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(y),N.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(y,k,N){var C=[],T=0,j=y.length;if(j<=N)return String.fromCharCode.apply(null,y);for(;T<j;)k==="array"||k==="nodebuffer"?C.push(String.fromCharCode.apply(null,y.slice(T,Math.min(T+N,j)))):C.push(String.fromCharCode.apply(null,y.subarray(T,Math.min(T+N,j)))),T+=N;return C.join("")},stringifyByChar:function(y){for(var k="",N=0;N<y.length;N++)k+=String.fromCharCode(y[N]);return k},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function v(y){var k=65536,N=a.getTypeOf(y),C=!0;if(N==="uint8array"?C=m.applyCanBeUsed.uint8array:N==="nodebuffer"&&(C=m.applyCanBeUsed.nodebuffer),C)for(;1<k;)try{return m.stringifyByChunk(y,N,k)}catch{k=Math.floor(k/2)}return m.stringifyByChar(y)}function g(y,k){for(var N=0;N<y.length;N++)k[N]=y[N];return k}a.applyFromCharCode=v;var x={};x.string={string:p,array:function(y){return h(y,new Array(y.length))},arraybuffer:function(y){return x.string.uint8array(y).buffer},uint8array:function(y){return h(y,new Uint8Array(y.length))},nodebuffer:function(y){return h(y,c.allocBuffer(y.length))}},x.array={string:v,array:p,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return c.newBufferFrom(y)}},x.arraybuffer={string:function(y){return v(new Uint8Array(y))},array:function(y){return g(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:p,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return c.newBufferFrom(new Uint8Array(y))}},x.uint8array={string:v,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:p,nodebuffer:function(y){return c.newBufferFrom(y)}},x.nodebuffer={string:v,array:function(y){return g(y,new Array(y.length))},arraybuffer:function(y){return x.nodebuffer.uint8array(y).buffer},uint8array:function(y){return g(y,new Uint8Array(y.length))},nodebuffer:p},a.transformTo=function(y,k){if(k=k||"",!y)return k;a.checkSupport(y);var N=a.getTypeOf(k);return x[N][y](k)},a.resolve=function(y){for(var k=y.split("/"),N=[],C=0;C<k.length;C++){var T=k[C];T==="."||T===""&&C!==0&&C!==k.length-1||(T===".."?N.pop():N.push(T))}return N.join("/")},a.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&c.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(y){var k,N,C="";for(N=0;N<(y||"").length;N++)C+="\\x"+((k=y.charCodeAt(N))<16?"0":"")+k.toString(16).toUpperCase();return C},a.delay=function(y,k,N){setImmediate(function(){y.apply(N||null,k||[])})},a.inherits=function(y,k){function N(){}N.prototype=k.prototype,y.prototype=new N},a.extend=function(){var y,k,N={};for(y=0;y<arguments.length;y++)for(k in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],k)&&N[k]===void 0&&(N[k]=arguments[y][k]);return N},a.prepareContent=function(y,k,N,C,T){return d.Promise.resolve(k).then(function(j){return i.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new d.Promise(function(D,_){var I=new FileReader;I.onload=function(R){D(R.target.result)},I.onerror=function(R){_(R.target.error)},I.readAsArrayBuffer(j)}):j}).then(function(j){var D=a.getTypeOf(j);return D?(D==="arraybuffer"?j=a.transformTo("uint8array",j):D==="string"&&(T?j=o.decode(j):N&&C!==!0&&(j=(function(_){return h(_,i.uint8array?new Uint8Array(_.length):new Array(_.length))})(j))),j):d.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),c=n("./signature"),d=n("./zipEntry"),p=n("./support");function h(m){this.files=[],this.loadOptions=m}h.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(v)+", expected "+o.pretty(m)+")")}},isSignature:function(m,v){var g=this.reader.index;this.reader.setIndex(m);var x=this.reader.readString(4)===v;return this.reader.setIndex(g),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),v=p.uint8array?"uint8array":"array",g=o.transformTo(v,m);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,v,g,x=this.zip64EndOfCentralSize-44;0<x;)m=this.reader.readInt(2),v=this.reader.readInt(4),g=this.reader.readData(v),this.zip64ExtensibleData[m]={id:m,length:v,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,v;for(m=0;m<this.files.length;m++)v=this.files[m],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var v=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var x=v-g;if(0<x)this.isSignature(v,c.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(m){this.reader=i(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),c=n("./compressedObject"),d=n("./crc32"),p=n("./utf8"),h=n("./compressions"),m=n("./support");function v(g,x){this.options=g,this.loadOptions=x}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var x,y;if(g.skip(22),this.fileNameLength=g.readInt(2),y=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=(function(k){for(var N in h)if(Object.prototype.hasOwnProperty.call(h,N)&&h[N].magic===k)return h[N];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,x,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var x=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(x),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var x,y,k,N=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<N;)x=g.readInt(2),y=g.readInt(2),k=g.readData(y),this.extraFields[x]={id:x,length:y,value:k};g.setIndex(N)},handleUTF8:function(){var g=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var y=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var N=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var x=i(g.value);return x.readInt(1)!==1||d(this.fileName)!==x.readInt(4)?null:p.utf8decode(x.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var x=i(g.value);return x.readInt(1)!==1||d(this.fileComment)!==x.readInt(4)?null:p.utf8decode(x.readData(g.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(x,y,k){this.name=x,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=y,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var o=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),d=n("./utf8"),p=n("./compressedObject"),h=n("./stream/GenericWorker");i.prototype={internalStream:function(x){var y=null,k="string";try{if(!x)throw new Error("No output type specified.");var N=(k=x.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),y=this._decompressWorker();var C=!this._dataBinary;C&&!N&&(y=y.pipe(new d.Utf8EncodeWorker)),!C&&N&&(y=y.pipe(new d.Utf8DecodeWorker))}catch(T){(y=new h("error")).error(T)}return new o(y,k,"")},async:function(x,y){return this.internalStream(x).accumulate(y)},nodeStream:function(x,y){return this.internalStream(x||"nodebuffer").toNodejsStream(y)},_compressWorker:function(x,y){if(this._data instanceof p&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new d.Utf8EncodeWorker)),p.createWorkerFrom(k,x,y)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof h?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<m.length;g++)i.prototype[m[g]]=v;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,c,d=i.MutationObserver||i.WebKitMutationObserver;if(d){var p=0,h=new d(x),m=i.document.createTextNode("");h.observe(m,{characterData:!0}),o=function(){m.data=p=++p%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){x(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(x,0)};else{var v=new i.MessageChannel;v.port1.onmessage=x,o=function(){v.port2.postMessage(0)}}var g=[];function x(){var y,k;c=!0;for(var N=g.length;N;){for(k=g,g=[],y=-1;++y<N;)k[y]();N=g.length}c=!1}r.exports=function(y){g.push(y)!==1||c||o()}}).call(this,typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var c={},d=["REJECTED"],p=["FULFILLED"],h=["PENDING"];function m(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,N!==o&&y(this,N)}function v(N,C,T){this.promise=N,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function g(N,C,T){i(function(){var j;try{j=C(T)}catch(D){return c.reject(N,D)}j===N?c.reject(N,new TypeError("Cannot resolve promise with itself")):c.resolve(N,j)})}function x(N){var C=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof C=="function")return function(){C.apply(N,arguments)}}function y(N,C){var T=!1;function j(I){T||(T=!0,c.reject(N,I))}function D(I){T||(T=!0,c.resolve(N,I))}var _=k(function(){C(D,j)});_.status==="error"&&j(_.value)}function k(N,C){var T={};try{T.value=N(C),T.status="success"}catch(j){T.status="error",T.value=j}return T}(r.exports=m).prototype.finally=function(N){if(typeof N!="function")return this;var C=this.constructor;return this.then(function(T){return C.resolve(N()).then(function(){return T})},function(T){return C.resolve(N()).then(function(){throw T})})},m.prototype.catch=function(N){return this.then(null,N)},m.prototype.then=function(N,C){if(typeof N!="function"&&this.state===p||typeof C!="function"&&this.state===d)return this;var T=new this.constructor(o);return this.state!==h?g(T,this.state===p?N:C,this.outcome):this.queue.push(new v(T,N,C)),T},v.prototype.callFulfilled=function(N){c.resolve(this.promise,N)},v.prototype.otherCallFulfilled=function(N){g(this.promise,this.onFulfilled,N)},v.prototype.callRejected=function(N){c.reject(this.promise,N)},v.prototype.otherCallRejected=function(N){g(this.promise,this.onRejected,N)},c.resolve=function(N,C){var T=k(x,C);if(T.status==="error")return c.reject(N,T.value);var j=T.value;if(j)y(N,j);else{N.state=p,N.outcome=C;for(var D=-1,_=N.queue.length;++D<_;)N.queue[D].callFulfilled(C)}return N},c.reject=function(N,C){N.state=d,N.outcome=C;for(var T=-1,j=N.queue.length;++T<j;)N.queue[T].callRejected(C);return N},m.resolve=function(N){return N instanceof this?N:c.resolve(new this(o),N)},m.reject=function(N){var C=new this(o);return c.reject(C,N)},m.all=function(N){var C=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=N.length,j=!1;if(!T)return this.resolve([]);for(var D=new Array(T),_=0,I=-1,R=new this(o);++I<T;)z(N[I],I);return R;function z(P,q){C.resolve(P).then(function($){D[q]=$,++_!==T||j||(j=!0,c.resolve(R,D))},function($){j||(j=!0,c.reject(R,$))})}},m.race=function(N){var C=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=N.length,j=!1;if(!T)return this.resolve([]);for(var D=-1,_=new this(o);++D<T;)I=N[D],C.resolve(I).then(function(R){j||(j=!0,c.resolve(_,R))},function(R){j||(j=!0,c.reject(_,R))});var I;return _}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/messages"),p=n("./zlib/zstream"),h=Object.prototype.toString,m=0,v=-1,g=0,x=8;function y(N){if(!(this instanceof y))return new y(N);this.options=o.assign({level:v,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},N||{});var C=this.options;C.raw&&0<C.windowBits?C.windowBits=-C.windowBits:C.gzip&&0<C.windowBits&&C.windowBits<16&&(C.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var T=i.deflateInit2(this.strm,C.level,C.method,C.windowBits,C.memLevel,C.strategy);if(T!==m)throw new Error(d[T]);if(C.header&&i.deflateSetHeader(this.strm,C.header),C.dictionary){var j;if(j=typeof C.dictionary=="string"?c.string2buf(C.dictionary):h.call(C.dictionary)==="[object ArrayBuffer]"?new Uint8Array(C.dictionary):C.dictionary,(T=i.deflateSetDictionary(this.strm,j))!==m)throw new Error(d[T]);this._dict_set=!0}}function k(N,C){var T=new y(C);if(T.push(N,!0),T.err)throw T.msg||d[T.err];return T.result}y.prototype.push=function(N,C){var T,j,D=this.strm,_=this.options.chunkSize;if(this.ended)return!1;j=C===~~C?C:C===!0?4:0,typeof N=="string"?D.input=c.string2buf(N):h.call(N)==="[object ArrayBuffer]"?D.input=new Uint8Array(N):D.input=N,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(_),D.next_out=0,D.avail_out=_),(T=i.deflate(D,j))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&T!==1);return j===4?(T=i.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):j!==2||(this.onEnd(m),!(D.avail_out=0))},y.prototype.onData=function(N){this.chunks.push(N)},y.prototype.onEnd=function(N){N===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},a.Deflate=y,a.deflate=k,a.deflateRaw=function(N,C){return(C=C||{}).raw=!0,k(N,C)},a.gzip=function(N,C){return(C=C||{}).gzip=!0,k(N,C)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),c=n("./utils/strings"),d=n("./zlib/constants"),p=n("./zlib/messages"),h=n("./zlib/zstream"),m=n("./zlib/gzheader"),v=Object.prototype.toString;function g(y){if(!(this instanceof g))return new g(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||y&&y.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&(15&k.windowBits)==0&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var N=i.inflateInit2(this.strm,k.windowBits);if(N!==d.Z_OK)throw new Error(p[N]);this.header=new m,i.inflateGetHeader(this.strm,this.header)}function x(y,k){var N=new g(k);if(N.push(y,!0),N.err)throw N.msg||p[N.err];return N.result}g.prototype.push=function(y,k){var N,C,T,j,D,_,I=this.strm,R=this.options.chunkSize,z=this.options.dictionary,P=!1;if(this.ended)return!1;C=k===~~k?k:k===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof y=="string"?I.input=c.binstring2buf(y):v.call(y)==="[object ArrayBuffer]"?I.input=new Uint8Array(y):I.input=y,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(R),I.next_out=0,I.avail_out=R),(N=i.inflate(I,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&z&&(_=typeof z=="string"?c.string2buf(z):v.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,N=i.inflateSetDictionary(this.strm,_)),N===d.Z_BUF_ERROR&&P===!0&&(N=d.Z_OK,P=!1),N!==d.Z_STREAM_END&&N!==d.Z_OK)return this.onEnd(N),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&N!==d.Z_STREAM_END&&(I.avail_in!==0||C!==d.Z_FINISH&&C!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=c.utf8border(I.output,I.next_out),j=I.next_out-T,D=c.buf2string(I.output,T),I.next_out=j,I.avail_out=R-j,j&&o.arraySet(I.output,I.output,T,j,0),this.onData(D)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(P=!0)}while((0<I.avail_in||I.avail_out===0)&&N!==d.Z_STREAM_END);return N===d.Z_STREAM_END&&(C=d.Z_FINISH),C===d.Z_FINISH?(N=i.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===d.Z_OK):C!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(I.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Inflate=g,a.inflate=x,a.inflateRaw=function(y,k){return(k=k||{}).raw=!0,x(y,k)},a.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var h=p.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var m in h)h.hasOwnProperty(m)&&(d[m]=h[m])}}return d},a.shrinkBuf=function(d,p){return d.length===p?d:d.subarray?d.subarray(0,p):(d.length=p,d)};var o={arraySet:function(d,p,h,m,v){if(p.subarray&&d.subarray)d.set(p.subarray(h,h+m),v);else for(var g=0;g<m;g++)d[v+g]=p[h+g]},flattenChunks:function(d){var p,h,m,v,g,x;for(p=m=0,h=d.length;p<h;p++)m+=d[p].length;for(x=new Uint8Array(m),p=v=0,h=d.length;p<h;p++)g=d[p],x.set(g,v),v+=g.length;return x}},c={arraySet:function(d,p,h,m,v){for(var g=0;g<m;g++)d[v+g]=p[h+g]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,c))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var d=new i.Buf8(256),p=0;p<256;p++)d[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function h(m,v){if(v<65537&&(m.subarray&&c||!m.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(m,v));for(var g="",x=0;x<v;x++)g+=String.fromCharCode(m[x]);return g}d[254]=d[254]=1,a.string2buf=function(m){var v,g,x,y,k,N=m.length,C=0;for(y=0;y<N;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<N&&(64512&(x=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(x-56320),y++),C+=g<128?1:g<2048?2:g<65536?3:4;for(v=new i.Buf8(C),y=k=0;k<C;y++)(64512&(g=m.charCodeAt(y)))==55296&&y+1<N&&(64512&(x=m.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(x-56320),y++),g<128?v[k++]=g:(g<2048?v[k++]=192|g>>>6:(g<65536?v[k++]=224|g>>>12:(v[k++]=240|g>>>18,v[k++]=128|g>>>12&63),v[k++]=128|g>>>6&63),v[k++]=128|63&g);return v},a.buf2binstring=function(m){return h(m,m.length)},a.binstring2buf=function(m){for(var v=new i.Buf8(m.length),g=0,x=v.length;g<x;g++)v[g]=m.charCodeAt(g);return v},a.buf2string=function(m,v){var g,x,y,k,N=v||m.length,C=new Array(2*N);for(g=x=0;g<N;)if((y=m[g++])<128)C[x++]=y;else if(4<(k=d[y]))C[x++]=65533,g+=k-1;else{for(y&=k===2?31:k===3?15:7;1<k&&g<N;)y=y<<6|63&m[g++],k--;1<k?C[x++]=65533:y<65536?C[x++]=y:(y-=65536,C[x++]=55296|y>>10&1023,C[x++]=56320|1023&y)}return h(C,x)},a.utf8border=function(m,v){var g;for((v=v||m.length)>m.length&&(v=m.length),g=v-1;0<=g&&(192&m[g])==128;)g--;return g<0||g===0?v:g+d[m[g]]>v?g:v}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,c,d){for(var p=65535&i|0,h=i>>>16&65535|0,m=0;c!==0;){for(c-=m=2e3<c?2e3:c;h=h+(p=p+o[d++]|0)|0,--m;);p%=65521,h%=65521}return p|h<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=(function(){for(var o,c=[],d=0;d<256;d++){o=d;for(var p=0;p<8;p++)o=1&o?3988292384^o>>>1:o>>>1;c[d]=o}return c})();r.exports=function(o,c,d,p){var h=i,m=p+d;o^=-1;for(var v=p;v<m;v++)o=o>>>8^h[255&(o^c[v])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),c=n("./trees"),d=n("./adler32"),p=n("./crc32"),h=n("./messages"),m=0,v=4,g=0,x=-2,y=-1,k=4,N=2,C=8,T=9,j=286,D=30,_=19,I=2*j+1,R=15,z=3,P=258,q=P+z+1,$=42,G=113,E=1,L=2,Z=3,X=4;function K(O,xe){return O.msg=h[xe],xe}function ee(O){return(O<<1)-(4<O?9:0)}function U(O){for(var xe=O.length;0<=--xe;)O[xe]=0}function M(O){var xe=O.state,te=xe.pending;te>O.avail_out&&(te=O.avail_out),te!==0&&(o.arraySet(O.output,xe.pending_buf,xe.pending_out,te,O.next_out),O.next_out+=te,xe.pending_out+=te,O.total_out+=te,O.avail_out-=te,xe.pending-=te,xe.pending===0&&(xe.pending_out=0))}function F(O,xe){c._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,xe),O.block_start=O.strstart,M(O.strm)}function B(O,xe){O.pending_buf[O.pending++]=xe}function le(O,xe){O.pending_buf[O.pending++]=xe>>>8&255,O.pending_buf[O.pending++]=255&xe}function pe(O,xe){var te,V,W=O.max_chain_length,se=O.strstart,ke=O.prev_length,Se=O.nice_match,ue=O.strstart>O.w_size-q?O.strstart-(O.w_size-q):0,_e=O.window,oe=O.w_mask,me=O.prev,ae=O.strstart+P,we=_e[se+ke-1],De=_e[se+ke];O.prev_length>=O.good_match&&(W>>=2),Se>O.lookahead&&(Se=O.lookahead);do if(_e[(te=xe)+ke]===De&&_e[te+ke-1]===we&&_e[te]===_e[se]&&_e[++te]===_e[se+1]){se+=2,te++;do;while(_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&_e[++se]===_e[++te]&&se<ae);if(V=P-(ae-se),se=ae-P,ke<V){if(O.match_start=xe,Se<=(ke=V))break;we=_e[se+ke-1],De=_e[se+ke]}}while((xe=me[xe&oe])>ue&&--W!=0);return ke<=O.lookahead?ke:O.lookahead}function de(O){var xe,te,V,W,se,ke,Se,ue,_e,oe,me=O.w_size;do{if(W=O.window_size-O.lookahead-O.strstart,O.strstart>=me+(me-q)){for(o.arraySet(O.window,O.window,me,me,0),O.match_start-=me,O.strstart-=me,O.block_start-=me,xe=te=O.hash_size;V=O.head[--xe],O.head[xe]=me<=V?V-me:0,--te;);for(xe=te=me;V=O.prev[--xe],O.prev[xe]=me<=V?V-me:0,--te;);W+=me}if(O.strm.avail_in===0)break;if(ke=O.strm,Se=O.window,ue=O.strstart+O.lookahead,_e=W,oe=void 0,oe=ke.avail_in,_e<oe&&(oe=_e),te=oe===0?0:(ke.avail_in-=oe,o.arraySet(Se,ke.input,ke.next_in,oe,ue),ke.state.wrap===1?ke.adler=d(ke.adler,Se,oe,ue):ke.state.wrap===2&&(ke.adler=p(ke.adler,Se,oe,ue)),ke.next_in+=oe,ke.total_in+=oe,oe),O.lookahead+=te,O.lookahead+O.insert>=z)for(se=O.strstart-O.insert,O.ins_h=O.window[se],O.ins_h=(O.ins_h<<O.hash_shift^O.window[se+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[se+z-1])&O.hash_mask,O.prev[se&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=se,se++,O.insert--,!(O.lookahead+O.insert<z)););}while(O.lookahead<q&&O.strm.avail_in!==0)}function je(O,xe){for(var te,V;;){if(O.lookahead<q){if(de(O),O.lookahead<q&&xe===m)return E;if(O.lookahead===0)break}if(te=0,O.lookahead>=z&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+z-1])&O.hash_mask,te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),te!==0&&O.strstart-te<=O.w_size-q&&(O.match_length=pe(O,te)),O.match_length>=z)if(V=c._tr_tally(O,O.strstart-O.match_start,O.match_length-z),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=z){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+z-1])&O.hash_mask,te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else V=c._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(V&&(F(O,!1),O.strm.avail_out===0))return E}return O.insert=O.strstart<z-1?O.strstart:z-1,xe===v?(F(O,!0),O.strm.avail_out===0?Z:X):O.last_lit&&(F(O,!1),O.strm.avail_out===0)?E:L}function ye(O,xe){for(var te,V,W;;){if(O.lookahead<q){if(de(O),O.lookahead<q&&xe===m)return E;if(O.lookahead===0)break}if(te=0,O.lookahead>=z&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+z-1])&O.hash_mask,te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=z-1,te!==0&&O.prev_length<O.max_lazy_match&&O.strstart-te<=O.w_size-q&&(O.match_length=pe(O,te),O.match_length<=5&&(O.strategy===1||O.match_length===z&&4096<O.strstart-O.match_start)&&(O.match_length=z-1)),O.prev_length>=z&&O.match_length<=O.prev_length){for(W=O.strstart+O.lookahead-z,V=c._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-z),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=W&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+z-1])&O.hash_mask,te=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=z-1,O.strstart++,V&&(F(O,!1),O.strm.avail_out===0))return E}else if(O.match_available){if((V=c._tr_tally(O,0,O.window[O.strstart-1]))&&F(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return E}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(V=c._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<z-1?O.strstart:z-1,xe===v?(F(O,!0),O.strm.avail_out===0?Z:X):O.last_lit&&(F(O,!1),O.strm.avail_out===0)?E:L}function Te(O,xe,te,V,W){this.good_length=O,this.max_lazy=xe,this.nice_length=te,this.max_chain=V,this.func=W}function Ie(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*_+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(R+1),this.heap=new o.Buf16(2*j+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*j+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(O){var xe;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=N,(xe=O.state).pending=0,xe.pending_out=0,xe.wrap<0&&(xe.wrap=-xe.wrap),xe.status=xe.wrap?$:G,O.adler=xe.wrap===2?0:1,xe.last_flush=m,c._tr_init(xe),g):K(O,x)}function qe(O){var xe=ve(O);return xe===g&&(function(te){te.window_size=2*te.w_size,U(te.head),te.max_lazy_match=i[te.level].max_lazy,te.good_match=i[te.level].good_length,te.nice_match=i[te.level].nice_length,te.max_chain_length=i[te.level].max_chain,te.strstart=0,te.block_start=0,te.lookahead=0,te.insert=0,te.match_length=te.prev_length=z-1,te.match_available=0,te.ins_h=0})(O.state),xe}function st(O,xe,te,V,W,se){if(!O)return x;var ke=1;if(xe===y&&(xe=6),V<0?(ke=0,V=-V):15<V&&(ke=2,V-=16),W<1||T<W||te!==C||V<8||15<V||xe<0||9<xe||se<0||k<se)return K(O,x);V===8&&(V=9);var Se=new Ie;return(O.state=Se).strm=O,Se.wrap=ke,Se.gzhead=null,Se.w_bits=V,Se.w_size=1<<Se.w_bits,Se.w_mask=Se.w_size-1,Se.hash_bits=W+7,Se.hash_size=1<<Se.hash_bits,Se.hash_mask=Se.hash_size-1,Se.hash_shift=~~((Se.hash_bits+z-1)/z),Se.window=new o.Buf8(2*Se.w_size),Se.head=new o.Buf16(Se.hash_size),Se.prev=new o.Buf16(Se.w_size),Se.lit_bufsize=1<<W+6,Se.pending_buf_size=4*Se.lit_bufsize,Se.pending_buf=new o.Buf8(Se.pending_buf_size),Se.d_buf=1*Se.lit_bufsize,Se.l_buf=3*Se.lit_bufsize,Se.level=xe,Se.strategy=se,Se.method=te,qe(O)}i=[new Te(0,0,0,0,function(O,xe){var te=65535;for(te>O.pending_buf_size-5&&(te=O.pending_buf_size-5);;){if(O.lookahead<=1){if(de(O),O.lookahead===0&&xe===m)return E;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var V=O.block_start+te;if((O.strstart===0||O.strstart>=V)&&(O.lookahead=O.strstart-V,O.strstart=V,F(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-q&&(F(O,!1),O.strm.avail_out===0))return E}return O.insert=0,xe===v?(F(O,!0),O.strm.avail_out===0?Z:X):(O.strstart>O.block_start&&(F(O,!1),O.strm.avail_out),E)}),new Te(4,4,8,4,je),new Te(4,5,16,8,je),new Te(4,6,32,32,je),new Te(4,4,16,16,ye),new Te(8,16,32,32,ye),new Te(8,16,128,128,ye),new Te(8,32,128,256,ye),new Te(32,128,258,1024,ye),new Te(32,258,258,4096,ye)],a.deflateInit=function(O,xe){return st(O,xe,C,15,8,0)},a.deflateInit2=st,a.deflateReset=qe,a.deflateResetKeep=ve,a.deflateSetHeader=function(O,xe){return O&&O.state?O.state.wrap!==2?x:(O.state.gzhead=xe,g):x},a.deflate=function(O,xe){var te,V,W,se;if(!O||!O.state||5<xe||xe<0)return O?K(O,x):x;if(V=O.state,!O.output||!O.input&&O.avail_in!==0||V.status===666&&xe!==v)return K(O,O.avail_out===0?-5:x);if(V.strm=O,te=V.last_flush,V.last_flush=xe,V.status===$)if(V.wrap===2)O.adler=0,B(V,31),B(V,139),B(V,8),V.gzhead?(B(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),B(V,255&V.gzhead.time),B(V,V.gzhead.time>>8&255),B(V,V.gzhead.time>>16&255),B(V,V.gzhead.time>>24&255),B(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),B(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(B(V,255&V.gzhead.extra.length),B(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(O.adler=p(O.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(B(V,0),B(V,0),B(V,0),B(V,0),B(V,0),B(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),B(V,3),V.status=G);else{var ke=C+(V.w_bits-8<<4)<<8;ke|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(ke|=32),ke+=31-ke%31,V.status=G,le(V,ke),V.strstart!==0&&(le(V,O.adler>>>16),le(V,65535&O.adler)),O.adler=1}if(V.status===69)if(V.gzhead.extra){for(W=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>W&&(O.adler=p(O.adler,V.pending_buf,V.pending-W,W)),M(O),W=V.pending,V.pending!==V.pending_buf_size));)B(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>W&&(O.adler=p(O.adler,V.pending_buf,V.pending-W,W)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){W=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>W&&(O.adler=p(O.adler,V.pending_buf,V.pending-W,W)),M(O),W=V.pending,V.pending===V.pending_buf_size)){se=1;break}se=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,B(V,se)}while(se!==0);V.gzhead.hcrc&&V.pending>W&&(O.adler=p(O.adler,V.pending_buf,V.pending-W,W)),se===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){W=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>W&&(O.adler=p(O.adler,V.pending_buf,V.pending-W,W)),M(O),W=V.pending,V.pending===V.pending_buf_size)){se=1;break}se=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,B(V,se)}while(se!==0);V.gzhead.hcrc&&V.pending>W&&(O.adler=p(O.adler,V.pending_buf,V.pending-W,W)),se===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&M(O),V.pending+2<=V.pending_buf_size&&(B(V,255&O.adler),B(V,O.adler>>8&255),O.adler=0,V.status=G)):V.status=G),V.pending!==0){if(M(O),O.avail_out===0)return V.last_flush=-1,g}else if(O.avail_in===0&&ee(xe)<=ee(te)&&xe!==v)return K(O,-5);if(V.status===666&&O.avail_in!==0)return K(O,-5);if(O.avail_in!==0||V.lookahead!==0||xe!==m&&V.status!==666){var Se=V.strategy===2?(function(ue,_e){for(var oe;;){if(ue.lookahead===0&&(de(ue),ue.lookahead===0)){if(_e===m)return E;break}if(ue.match_length=0,oe=c._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,oe&&(F(ue,!1),ue.strm.avail_out===0))return E}return ue.insert=0,_e===v?(F(ue,!0),ue.strm.avail_out===0?Z:X):ue.last_lit&&(F(ue,!1),ue.strm.avail_out===0)?E:L})(V,xe):V.strategy===3?(function(ue,_e){for(var oe,me,ae,we,De=ue.window;;){if(ue.lookahead<=P){if(de(ue),ue.lookahead<=P&&_e===m)return E;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=z&&0<ue.strstart&&(me=De[ae=ue.strstart-1])===De[++ae]&&me===De[++ae]&&me===De[++ae]){we=ue.strstart+P;do;while(me===De[++ae]&&me===De[++ae]&&me===De[++ae]&&me===De[++ae]&&me===De[++ae]&&me===De[++ae]&&me===De[++ae]&&me===De[++ae]&&ae<we);ue.match_length=P-(we-ae),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=z?(oe=c._tr_tally(ue,1,ue.match_length-z),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(oe=c._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),oe&&(F(ue,!1),ue.strm.avail_out===0))return E}return ue.insert=0,_e===v?(F(ue,!0),ue.strm.avail_out===0?Z:X):ue.last_lit&&(F(ue,!1),ue.strm.avail_out===0)?E:L})(V,xe):i[V.level].func(V,xe);if(Se!==Z&&Se!==X||(V.status=666),Se===E||Se===Z)return O.avail_out===0&&(V.last_flush=-1),g;if(Se===L&&(xe===1?c._tr_align(V):xe!==5&&(c._tr_stored_block(V,0,0,!1),xe===3&&(U(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),M(O),O.avail_out===0))return V.last_flush=-1,g}return xe!==v?g:V.wrap<=0?1:(V.wrap===2?(B(V,255&O.adler),B(V,O.adler>>8&255),B(V,O.adler>>16&255),B(V,O.adler>>24&255),B(V,255&O.total_in),B(V,O.total_in>>8&255),B(V,O.total_in>>16&255),B(V,O.total_in>>24&255)):(le(V,O.adler>>>16),le(V,65535&O.adler)),M(O),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?g:1)},a.deflateEnd=function(O){var xe;return O&&O.state?(xe=O.state.status)!==$&&xe!==69&&xe!==73&&xe!==91&&xe!==103&&xe!==G&&xe!==666?K(O,x):(O.state=null,xe===G?K(O,-3):g):x},a.deflateSetDictionary=function(O,xe){var te,V,W,se,ke,Se,ue,_e,oe=xe.length;if(!O||!O.state||(se=(te=O.state).wrap)===2||se===1&&te.status!==$||te.lookahead)return x;for(se===1&&(O.adler=d(O.adler,xe,oe,0)),te.wrap=0,oe>=te.w_size&&(se===0&&(U(te.head),te.strstart=0,te.block_start=0,te.insert=0),_e=new o.Buf8(te.w_size),o.arraySet(_e,xe,oe-te.w_size,te.w_size,0),xe=_e,oe=te.w_size),ke=O.avail_in,Se=O.next_in,ue=O.input,O.avail_in=oe,O.next_in=0,O.input=xe,de(te);te.lookahead>=z;){for(V=te.strstart,W=te.lookahead-(z-1);te.ins_h=(te.ins_h<<te.hash_shift^te.window[V+z-1])&te.hash_mask,te.prev[V&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=V,V++,--W;);te.strstart=V,te.lookahead=z-1,de(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=z-1,te.match_available=0,O.next_in=Se,O.input=ue,O.avail_in=ke,te.wrap=se,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var c,d,p,h,m,v,g,x,y,k,N,C,T,j,D,_,I,R,z,P,q,$,G,E,L;c=i.state,d=i.next_in,E=i.input,p=d+(i.avail_in-5),h=i.next_out,L=i.output,m=h-(o-i.avail_out),v=h+(i.avail_out-257),g=c.dmax,x=c.wsize,y=c.whave,k=c.wnext,N=c.window,C=c.hold,T=c.bits,j=c.lencode,D=c.distcode,_=(1<<c.lenbits)-1,I=(1<<c.distbits)-1;e:do{T<15&&(C+=E[d++]<<T,T+=8,C+=E[d++]<<T,T+=8),R=j[C&_];t:for(;;){if(C>>>=z=R>>>24,T-=z,(z=R>>>16&255)===0)L[h++]=65535&R;else{if(!(16&z)){if((64&z)==0){R=j[(65535&R)+(C&(1<<z)-1)];continue t}if(32&z){c.mode=12;break e}i.msg="invalid literal/length code",c.mode=30;break e}P=65535&R,(z&=15)&&(T<z&&(C+=E[d++]<<T,T+=8),P+=C&(1<<z)-1,C>>>=z,T-=z),T<15&&(C+=E[d++]<<T,T+=8,C+=E[d++]<<T,T+=8),R=D[C&I];n:for(;;){if(C>>>=z=R>>>24,T-=z,!(16&(z=R>>>16&255))){if((64&z)==0){R=D[(65535&R)+(C&(1<<z)-1)];continue n}i.msg="invalid distance code",c.mode=30;break e}if(q=65535&R,T<(z&=15)&&(C+=E[d++]<<T,(T+=8)<z&&(C+=E[d++]<<T,T+=8)),g<(q+=C&(1<<z)-1)){i.msg="invalid distance too far back",c.mode=30;break e}if(C>>>=z,T-=z,(z=h-m)<q){if(y<(z=q-z)&&c.sane){i.msg="invalid distance too far back",c.mode=30;break e}if(G=N,($=0)===k){if($+=x-z,z<P){for(P-=z;L[h++]=N[$++],--z;);$=h-q,G=L}}else if(k<z){if($+=x+k-z,(z-=k)<P){for(P-=z;L[h++]=N[$++],--z;);if($=0,k<P){for(P-=z=k;L[h++]=N[$++],--z;);$=h-q,G=L}}}else if($+=k-z,z<P){for(P-=z;L[h++]=N[$++],--z;);$=h-q,G=L}for(;2<P;)L[h++]=G[$++],L[h++]=G[$++],L[h++]=G[$++],P-=3;P&&(L[h++]=G[$++],1<P&&(L[h++]=G[$++]))}else{for($=h-q;L[h++]=L[$++],L[h++]=L[$++],L[h++]=L[$++],2<(P-=3););P&&(L[h++]=L[$++],1<P&&(L[h++]=L[$++]))}break}}break}}while(d<p&&h<v);d-=P=T>>3,C&=(1<<(T-=P<<3))-1,i.next_in=d,i.next_out=h,i.avail_in=d<p?p-d+5:5-(d-p),i.avail_out=h<v?v-h+257:257-(h-v),c.hold=C,c.bits=T}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),c=n("./crc32"),d=n("./inffast"),p=n("./inftrees"),h=1,m=2,v=0,g=-2,x=1,y=852,k=592;function N($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function C(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T($){var G;return $&&$.state?(G=$.state,$.total_in=$.total_out=G.total=0,$.msg="",G.wrap&&($.adler=1&G.wrap),G.mode=x,G.last=0,G.havedict=0,G.dmax=32768,G.head=null,G.hold=0,G.bits=0,G.lencode=G.lendyn=new i.Buf32(y),G.distcode=G.distdyn=new i.Buf32(k),G.sane=1,G.back=-1,v):g}function j($){var G;return $&&$.state?((G=$.state).wsize=0,G.whave=0,G.wnext=0,T($)):g}function D($,G){var E,L;return $&&$.state?(L=$.state,G<0?(E=0,G=-G):(E=1+(G>>4),G<48&&(G&=15)),G&&(G<8||15<G)?g:(L.window!==null&&L.wbits!==G&&(L.window=null),L.wrap=E,L.wbits=G,j($))):g}function _($,G){var E,L;return $?(L=new C,($.state=L).window=null,(E=D($,G))!==v&&($.state=null),E):g}var I,R,z=!0;function P($){if(z){var G;for(I=new i.Buf32(512),R=new i.Buf32(32),G=0;G<144;)$.lens[G++]=8;for(;G<256;)$.lens[G++]=9;for(;G<280;)$.lens[G++]=7;for(;G<288;)$.lens[G++]=8;for(p(h,$.lens,0,288,I,0,$.work,{bits:9}),G=0;G<32;)$.lens[G++]=5;p(m,$.lens,0,32,R,0,$.work,{bits:5}),z=!1}$.lencode=I,$.lenbits=9,$.distcode=R,$.distbits=5}function q($,G,E,L){var Z,X=$.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new i.Buf8(X.wsize)),L>=X.wsize?(i.arraySet(X.window,G,E-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(L<(Z=X.wsize-X.wnext)&&(Z=L),i.arraySet(X.window,G,E-L,Z,X.wnext),(L-=Z)?(i.arraySet(X.window,G,E-L,L,0),X.wnext=L,X.whave=X.wsize):(X.wnext+=Z,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=Z))),0}a.inflateReset=j,a.inflateReset2=D,a.inflateResetKeep=T,a.inflateInit=function($){return _($,15)},a.inflateInit2=_,a.inflate=function($,G){var E,L,Z,X,K,ee,U,M,F,B,le,pe,de,je,ye,Te,Ie,ve,qe,st,O,xe,te,V,W=0,se=new i.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return g;(E=$.state).mode===12&&(E.mode=13),K=$.next_out,Z=$.output,U=$.avail_out,X=$.next_in,L=$.input,ee=$.avail_in,M=E.hold,F=E.bits,B=ee,le=U,xe=v;e:for(;;)switch(E.mode){case x:if(E.wrap===0){E.mode=13;break}for(;F<16;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(2&E.wrap&&M===35615){se[E.check=0]=255&M,se[1]=M>>>8&255,E.check=c(E.check,se,2,0),F=M=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&M)<<8)+(M>>8))%31){$.msg="incorrect header check",E.mode=30;break}if((15&M)!=8){$.msg="unknown compression method",E.mode=30;break}if(F-=4,O=8+(15&(M>>>=4)),E.wbits===0)E.wbits=O;else if(O>E.wbits){$.msg="invalid window size",E.mode=30;break}E.dmax=1<<O,$.adler=E.check=1,E.mode=512&M?10:12,F=M=0;break;case 2:for(;F<16;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(E.flags=M,(255&E.flags)!=8){$.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){$.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=M>>8&1),512&E.flags&&(se[0]=255&M,se[1]=M>>>8&255,E.check=c(E.check,se,2,0)),F=M=0,E.mode=3;case 3:for(;F<32;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}E.head&&(E.head.time=M),512&E.flags&&(se[0]=255&M,se[1]=M>>>8&255,se[2]=M>>>16&255,se[3]=M>>>24&255,E.check=c(E.check,se,4,0)),F=M=0,E.mode=4;case 4:for(;F<16;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}E.head&&(E.head.xflags=255&M,E.head.os=M>>8),512&E.flags&&(se[0]=255&M,se[1]=M>>>8&255,E.check=c(E.check,se,2,0)),F=M=0,E.mode=5;case 5:if(1024&E.flags){for(;F<16;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}E.length=M,E.head&&(E.head.extra_len=M),512&E.flags&&(se[0]=255&M,se[1]=M>>>8&255,E.check=c(E.check,se,2,0)),F=M=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(ee<(pe=E.length)&&(pe=ee),pe&&(E.head&&(O=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),i.arraySet(E.head.extra,L,X,pe,O)),512&E.flags&&(E.check=c(E.check,L,pe,X)),ee-=pe,X+=pe,E.length-=pe),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(ee===0)break e;for(pe=0;O=L[X+pe++],E.head&&O&&E.length<65536&&(E.head.name+=String.fromCharCode(O)),O&&pe<ee;);if(512&E.flags&&(E.check=c(E.check,L,pe,X)),ee-=pe,X+=pe,O)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(ee===0)break e;for(pe=0;O=L[X+pe++],E.head&&O&&E.length<65536&&(E.head.comment+=String.fromCharCode(O)),O&&pe<ee;);if(512&E.flags&&(E.check=c(E.check,L,pe,X)),ee-=pe,X+=pe,O)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;F<16;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(M!==(65535&E.check)){$.msg="header crc mismatch",E.mode=30;break}F=M=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),$.adler=E.check=0,E.mode=12;break;case 10:for(;F<32;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}$.adler=E.check=N(M),F=M=0,E.mode=11;case 11:if(E.havedict===0)return $.next_out=K,$.avail_out=U,$.next_in=X,$.avail_in=ee,E.hold=M,E.bits=F,2;$.adler=E.check=1,E.mode=12;case 12:if(G===5||G===6)break e;case 13:if(E.last){M>>>=7&F,F-=7&F,E.mode=27;break}for(;F<3;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}switch(E.last=1&M,F-=1,3&(M>>>=1)){case 0:E.mode=14;break;case 1:if(P(E),E.mode=20,G!==6)break;M>>>=2,F-=2;break e;case 2:E.mode=17;break;case 3:$.msg="invalid block type",E.mode=30}M>>>=2,F-=2;break;case 14:for(M>>>=7&F,F-=7&F;F<32;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if((65535&M)!=(M>>>16^65535)){$.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&M,F=M=0,E.mode=15,G===6)break e;case 15:E.mode=16;case 16:if(pe=E.length){if(ee<pe&&(pe=ee),U<pe&&(pe=U),pe===0)break e;i.arraySet(Z,L,X,pe,K),ee-=pe,X+=pe,U-=pe,K+=pe,E.length-=pe;break}E.mode=12;break;case 17:for(;F<14;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(E.nlen=257+(31&M),M>>>=5,F-=5,E.ndist=1+(31&M),M>>>=5,F-=5,E.ncode=4+(15&M),M>>>=4,F-=4,286<E.nlen||30<E.ndist){$.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;F<3;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}E.lens[ke[E.have++]]=7&M,M>>>=3,F-=3}for(;E.have<19;)E.lens[ke[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,te={bits:E.lenbits},xe=p(0,E.lens,0,19,E.lencode,0,E.work,te),E.lenbits=te.bits,xe){$.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;Te=(W=E.lencode[M&(1<<E.lenbits)-1])>>>16&255,Ie=65535&W,!((ye=W>>>24)<=F);){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(Ie<16)M>>>=ye,F-=ye,E.lens[E.have++]=Ie;else{if(Ie===16){for(V=ye+2;F<V;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(M>>>=ye,F-=ye,E.have===0){$.msg="invalid bit length repeat",E.mode=30;break}O=E.lens[E.have-1],pe=3+(3&M),M>>>=2,F-=2}else if(Ie===17){for(V=ye+3;F<V;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}F-=ye,O=0,pe=3+(7&(M>>>=ye)),M>>>=3,F-=3}else{for(V=ye+7;F<V;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}F-=ye,O=0,pe=11+(127&(M>>>=ye)),M>>>=7,F-=7}if(E.have+pe>E.nlen+E.ndist){$.msg="invalid bit length repeat",E.mode=30;break}for(;pe--;)E.lens[E.have++]=O}}if(E.mode===30)break;if(E.lens[256]===0){$.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,te={bits:E.lenbits},xe=p(h,E.lens,0,E.nlen,E.lencode,0,E.work,te),E.lenbits=te.bits,xe){$.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,te={bits:E.distbits},xe=p(m,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,te),E.distbits=te.bits,xe){$.msg="invalid distances set",E.mode=30;break}if(E.mode=20,G===6)break e;case 20:E.mode=21;case 21:if(6<=ee&&258<=U){$.next_out=K,$.avail_out=U,$.next_in=X,$.avail_in=ee,E.hold=M,E.bits=F,d($,le),K=$.next_out,Z=$.output,U=$.avail_out,X=$.next_in,L=$.input,ee=$.avail_in,M=E.hold,F=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;Te=(W=E.lencode[M&(1<<E.lenbits)-1])>>>16&255,Ie=65535&W,!((ye=W>>>24)<=F);){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(Te&&(240&Te)==0){for(ve=ye,qe=Te,st=Ie;Te=(W=E.lencode[st+((M&(1<<ve+qe)-1)>>ve)])>>>16&255,Ie=65535&W,!(ve+(ye=W>>>24)<=F);){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}M>>>=ve,F-=ve,E.back+=ve}if(M>>>=ye,F-=ye,E.back+=ye,E.length=Ie,Te===0){E.mode=26;break}if(32&Te){E.back=-1,E.mode=12;break}if(64&Te){$.msg="invalid literal/length code",E.mode=30;break}E.extra=15&Te,E.mode=22;case 22:if(E.extra){for(V=E.extra;F<V;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}E.length+=M&(1<<E.extra)-1,M>>>=E.extra,F-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;Te=(W=E.distcode[M&(1<<E.distbits)-1])>>>16&255,Ie=65535&W,!((ye=W>>>24)<=F);){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if((240&Te)==0){for(ve=ye,qe=Te,st=Ie;Te=(W=E.distcode[st+((M&(1<<ve+qe)-1)>>ve)])>>>16&255,Ie=65535&W,!(ve+(ye=W>>>24)<=F);){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}M>>>=ve,F-=ve,E.back+=ve}if(M>>>=ye,F-=ye,E.back+=ye,64&Te){$.msg="invalid distance code",E.mode=30;break}E.offset=Ie,E.extra=15&Te,E.mode=24;case 24:if(E.extra){for(V=E.extra;F<V;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}E.offset+=M&(1<<E.extra)-1,M>>>=E.extra,F-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){$.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(U===0)break e;if(pe=le-U,E.offset>pe){if((pe=E.offset-pe)>E.whave&&E.sane){$.msg="invalid distance too far back",E.mode=30;break}de=pe>E.wnext?(pe-=E.wnext,E.wsize-pe):E.wnext-pe,pe>E.length&&(pe=E.length),je=E.window}else je=Z,de=K-E.offset,pe=E.length;for(U<pe&&(pe=U),U-=pe,E.length-=pe;Z[K++]=je[de++],--pe;);E.length===0&&(E.mode=21);break;case 26:if(U===0)break e;Z[K++]=E.length,U--,E.mode=21;break;case 27:if(E.wrap){for(;F<32;){if(ee===0)break e;ee--,M|=L[X++]<<F,F+=8}if(le-=U,$.total_out+=le,E.total+=le,le&&($.adler=E.check=E.flags?c(E.check,Z,le,K-le):o(E.check,Z,le,K-le)),le=U,(E.flags?M:N(M))!==E.check){$.msg="incorrect data check",E.mode=30;break}F=M=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;F<32;){if(ee===0)break e;ee--,M+=L[X++]<<F,F+=8}if(M!==(4294967295&E.total)){$.msg="incorrect length check",E.mode=30;break}F=M=0}E.mode=29;case 29:xe=1;break e;case 30:xe=-3;break e;case 31:return-4;case 32:default:return g}return $.next_out=K,$.avail_out=U,$.next_in=X,$.avail_in=ee,E.hold=M,E.bits=F,(E.wsize||le!==$.avail_out&&E.mode<30&&(E.mode<27||G!==4))&&q($,$.output,$.next_out,le-$.avail_out)?(E.mode=31,-4):(B-=$.avail_in,le-=$.avail_out,$.total_in+=B,$.total_out+=le,E.total+=le,E.wrap&&le&&($.adler=E.check=E.flags?c(E.check,Z,le,$.next_out-le):o(E.check,Z,le,$.next_out-le)),$.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(B==0&&le===0||G===4)&&xe===v&&(xe=-5),xe)},a.inflateEnd=function($){if(!$||!$.state)return g;var G=$.state;return G.window&&(G.window=null),$.state=null,v},a.inflateGetHeader=function($,G){var E;return $&&$.state?(2&(E=$.state).wrap)==0?g:((E.head=G).done=!1,v):g},a.inflateSetDictionary=function($,G){var E,L=G.length;return $&&$.state?(E=$.state).wrap!==0&&E.mode!==11?g:E.mode===11&&o(1,G,L,0)!==E.check?-3:q($,G,L,L)?(E.mode=31,-4):(E.havedict=1,v):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,m,v,g,x,y,k,N){var C,T,j,D,_,I,R,z,P,q=N.bits,$=0,G=0,E=0,L=0,Z=0,X=0,K=0,ee=0,U=0,M=0,F=null,B=0,le=new i.Buf16(16),pe=new i.Buf16(16),de=null,je=0;for($=0;$<=15;$++)le[$]=0;for(G=0;G<g;G++)le[m[v+G]]++;for(Z=q,L=15;1<=L&&le[L]===0;L--);if(L<Z&&(Z=L),L===0)return x[y++]=20971520,x[y++]=20971520,N.bits=1,0;for(E=1;E<L&&le[E]===0;E++);for(Z<E&&(Z=E),$=ee=1;$<=15;$++)if(ee<<=1,(ee-=le[$])<0)return-1;if(0<ee&&(h===0||L!==1))return-1;for(pe[1]=0,$=1;$<15;$++)pe[$+1]=pe[$]+le[$];for(G=0;G<g;G++)m[v+G]!==0&&(k[pe[m[v+G]]++]=G);if(I=h===0?(F=de=k,19):h===1?(F=o,B-=257,de=c,je-=257,256):(F=d,de=p,-1),$=E,_=y,K=G=M=0,j=-1,D=(U=1<<(X=Z))-1,h===1&&852<U||h===2&&592<U)return 1;for(;;){for(R=$-K,P=k[G]<I?(z=0,k[G]):k[G]>I?(z=de[je+k[G]],F[B+k[G]]):(z=96,0),C=1<<$-K,E=T=1<<X;x[_+(M>>K)+(T-=C)]=R<<24|z<<16|P|0,T!==0;);for(C=1<<$-1;M&C;)C>>=1;if(C!==0?(M&=C-1,M+=C):M=0,G++,--le[$]==0){if($===L)break;$=m[v+k[G]]}if(Z<$&&(M&D)!==j){for(K===0&&(K=Z),_+=E,ee=1<<(X=$-K);X+K<L&&!((ee-=le[X+K])<=0);)X++,ee<<=1;if(U+=1<<X,h===1&&852<U||h===2&&592<U)return 1;x[j=M&D]=Z<<24|X<<16|_-y|0}}return M!==0&&(x[_+M]=$-K<<24|64<<16|0),N.bits=Z,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,c=1;function d(W){for(var se=W.length;0<=--se;)W[se]=0}var p=0,h=29,m=256,v=m+1+h,g=30,x=19,y=2*v+1,k=15,N=16,C=7,T=256,j=16,D=17,_=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(v+2));d(q);var $=new Array(2*g);d($);var G=new Array(512);d(G);var E=new Array(256);d(E);var L=new Array(h);d(L);var Z,X,K,ee=new Array(g);function U(W,se,ke,Se,ue){this.static_tree=W,this.extra_bits=se,this.extra_base=ke,this.elems=Se,this.max_length=ue,this.has_stree=W&&W.length}function M(W,se){this.dyn_tree=W,this.max_code=0,this.stat_desc=se}function F(W){return W<256?G[W]:G[256+(W>>>7)]}function B(W,se){W.pending_buf[W.pending++]=255&se,W.pending_buf[W.pending++]=se>>>8&255}function le(W,se,ke){W.bi_valid>N-ke?(W.bi_buf|=se<<W.bi_valid&65535,B(W,W.bi_buf),W.bi_buf=se>>N-W.bi_valid,W.bi_valid+=ke-N):(W.bi_buf|=se<<W.bi_valid&65535,W.bi_valid+=ke)}function pe(W,se,ke){le(W,ke[2*se],ke[2*se+1])}function de(W,se){for(var ke=0;ke|=1&W,W>>>=1,ke<<=1,0<--se;);return ke>>>1}function je(W,se,ke){var Se,ue,_e=new Array(k+1),oe=0;for(Se=1;Se<=k;Se++)_e[Se]=oe=oe+ke[Se-1]<<1;for(ue=0;ue<=se;ue++){var me=W[2*ue+1];me!==0&&(W[2*ue]=de(_e[me]++,me))}}function ye(W){var se;for(se=0;se<v;se++)W.dyn_ltree[2*se]=0;for(se=0;se<g;se++)W.dyn_dtree[2*se]=0;for(se=0;se<x;se++)W.bl_tree[2*se]=0;W.dyn_ltree[2*T]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function Te(W){8<W.bi_valid?B(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function Ie(W,se,ke,Se){var ue=2*se,_e=2*ke;return W[ue]<W[_e]||W[ue]===W[_e]&&Se[se]<=Se[ke]}function ve(W,se,ke){for(var Se=W.heap[ke],ue=ke<<1;ue<=W.heap_len&&(ue<W.heap_len&&Ie(se,W.heap[ue+1],W.heap[ue],W.depth)&&ue++,!Ie(se,Se,W.heap[ue],W.depth));)W.heap[ke]=W.heap[ue],ke=ue,ue<<=1;W.heap[ke]=Se}function qe(W,se,ke){var Se,ue,_e,oe,me=0;if(W.last_lit!==0)for(;Se=W.pending_buf[W.d_buf+2*me]<<8|W.pending_buf[W.d_buf+2*me+1],ue=W.pending_buf[W.l_buf+me],me++,Se===0?pe(W,ue,se):(pe(W,(_e=E[ue])+m+1,se),(oe=I[_e])!==0&&le(W,ue-=L[_e],oe),pe(W,_e=F(--Se),ke),(oe=R[_e])!==0&&le(W,Se-=ee[_e],oe)),me<W.last_lit;);pe(W,T,se)}function st(W,se){var ke,Se,ue,_e=se.dyn_tree,oe=se.stat_desc.static_tree,me=se.stat_desc.has_stree,ae=se.stat_desc.elems,we=-1;for(W.heap_len=0,W.heap_max=y,ke=0;ke<ae;ke++)_e[2*ke]!==0?(W.heap[++W.heap_len]=we=ke,W.depth[ke]=0):_e[2*ke+1]=0;for(;W.heap_len<2;)_e[2*(ue=W.heap[++W.heap_len]=we<2?++we:0)]=1,W.depth[ue]=0,W.opt_len--,me&&(W.static_len-=oe[2*ue+1]);for(se.max_code=we,ke=W.heap_len>>1;1<=ke;ke--)ve(W,_e,ke);for(ue=ae;ke=W.heap[1],W.heap[1]=W.heap[W.heap_len--],ve(W,_e,1),Se=W.heap[1],W.heap[--W.heap_max]=ke,W.heap[--W.heap_max]=Se,_e[2*ue]=_e[2*ke]+_e[2*Se],W.depth[ue]=(W.depth[ke]>=W.depth[Se]?W.depth[ke]:W.depth[Se])+1,_e[2*ke+1]=_e[2*Se+1]=ue,W.heap[1]=ue++,ve(W,_e,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],(function(De,He){var pt,vt,dn,ht,mn,yn,jt=He.dyn_tree,kn=He.max_code,Qt=He.stat_desc.static_tree,Kn=He.stat_desc.has_stree,vr=He.stat_desc.extra_bits,Mn=He.stat_desc.extra_base,Et=He.stat_desc.max_length,Bt=0;for(ht=0;ht<=k;ht++)De.bl_count[ht]=0;for(jt[2*De.heap[De.heap_max]+1]=0,pt=De.heap_max+1;pt<y;pt++)Et<(ht=jt[2*jt[2*(vt=De.heap[pt])+1]+1]+1)&&(ht=Et,Bt++),jt[2*vt+1]=ht,kn<vt||(De.bl_count[ht]++,mn=0,Mn<=vt&&(mn=vr[vt-Mn]),yn=jt[2*vt],De.opt_len+=yn*(ht+mn),Kn&&(De.static_len+=yn*(Qt[2*vt+1]+mn)));if(Bt!==0){do{for(ht=Et-1;De.bl_count[ht]===0;)ht--;De.bl_count[ht]--,De.bl_count[ht+1]+=2,De.bl_count[Et]--,Bt-=2}while(0<Bt);for(ht=Et;ht!==0;ht--)for(vt=De.bl_count[ht];vt!==0;)kn<(dn=De.heap[--pt])||(jt[2*dn+1]!==ht&&(De.opt_len+=(ht-jt[2*dn+1])*jt[2*dn],jt[2*dn+1]=ht),vt--)}})(W,se),je(_e,we,W.bl_count)}function O(W,se,ke){var Se,ue,_e=-1,oe=se[1],me=0,ae=7,we=4;for(oe===0&&(ae=138,we=3),se[2*(ke+1)+1]=65535,Se=0;Se<=ke;Se++)ue=oe,oe=se[2*(Se+1)+1],++me<ae&&ue===oe||(me<we?W.bl_tree[2*ue]+=me:ue!==0?(ue!==_e&&W.bl_tree[2*ue]++,W.bl_tree[2*j]++):me<=10?W.bl_tree[2*D]++:W.bl_tree[2*_]++,_e=ue,we=(me=0)===oe?(ae=138,3):ue===oe?(ae=6,3):(ae=7,4))}function xe(W,se,ke){var Se,ue,_e=-1,oe=se[1],me=0,ae=7,we=4;for(oe===0&&(ae=138,we=3),Se=0;Se<=ke;Se++)if(ue=oe,oe=se[2*(Se+1)+1],!(++me<ae&&ue===oe)){if(me<we)for(;pe(W,ue,W.bl_tree),--me!=0;);else ue!==0?(ue!==_e&&(pe(W,ue,W.bl_tree),me--),pe(W,j,W.bl_tree),le(W,me-3,2)):me<=10?(pe(W,D,W.bl_tree),le(W,me-3,3)):(pe(W,_,W.bl_tree),le(W,me-11,7));_e=ue,we=(me=0)===oe?(ae=138,3):ue===oe?(ae=6,3):(ae=7,4)}}d(ee);var te=!1;function V(W,se,ke,Se){le(W,(p<<1)+(Se?1:0),3),(function(ue,_e,oe,me){Te(ue),B(ue,oe),B(ue,~oe),i.arraySet(ue.pending_buf,ue.window,_e,oe,ue.pending),ue.pending+=oe})(W,se,ke)}a._tr_init=function(W){te||((function(){var se,ke,Se,ue,_e,oe=new Array(k+1);for(ue=Se=0;ue<h-1;ue++)for(L[ue]=Se,se=0;se<1<<I[ue];se++)E[Se++]=ue;for(E[Se-1]=ue,ue=_e=0;ue<16;ue++)for(ee[ue]=_e,se=0;se<1<<R[ue];se++)G[_e++]=ue;for(_e>>=7;ue<g;ue++)for(ee[ue]=_e<<7,se=0;se<1<<R[ue]-7;se++)G[256+_e++]=ue;for(ke=0;ke<=k;ke++)oe[ke]=0;for(se=0;se<=143;)q[2*se+1]=8,se++,oe[8]++;for(;se<=255;)q[2*se+1]=9,se++,oe[9]++;for(;se<=279;)q[2*se+1]=7,se++,oe[7]++;for(;se<=287;)q[2*se+1]=8,se++,oe[8]++;for(je(q,v+1,oe),se=0;se<g;se++)$[2*se+1]=5,$[2*se]=de(se,5);Z=new U(q,I,m+1,v,k),X=new U($,R,0,g,k),K=new U(new Array(0),z,0,x,C)})(),te=!0),W.l_desc=new M(W.dyn_ltree,Z),W.d_desc=new M(W.dyn_dtree,X),W.bl_desc=new M(W.bl_tree,K),W.bi_buf=0,W.bi_valid=0,ye(W)},a._tr_stored_block=V,a._tr_flush_block=function(W,se,ke,Se){var ue,_e,oe=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=(function(me){var ae,we=4093624447;for(ae=0;ae<=31;ae++,we>>>=1)if(1&we&&me.dyn_ltree[2*ae]!==0)return o;if(me.dyn_ltree[18]!==0||me.dyn_ltree[20]!==0||me.dyn_ltree[26]!==0)return c;for(ae=32;ae<m;ae++)if(me.dyn_ltree[2*ae]!==0)return c;return o})(W)),st(W,W.l_desc),st(W,W.d_desc),oe=(function(me){var ae;for(O(me,me.dyn_ltree,me.l_desc.max_code),O(me,me.dyn_dtree,me.d_desc.max_code),st(me,me.bl_desc),ae=x-1;3<=ae&&me.bl_tree[2*P[ae]+1]===0;ae--);return me.opt_len+=3*(ae+1)+5+5+4,ae})(W),ue=W.opt_len+3+7>>>3,(_e=W.static_len+3+7>>>3)<=ue&&(ue=_e)):ue=_e=ke+5,ke+4<=ue&&se!==-1?V(W,se,ke,Se):W.strategy===4||_e===ue?(le(W,2+(Se?1:0),3),qe(W,q,$)):(le(W,4+(Se?1:0),3),(function(me,ae,we,De){var He;for(le(me,ae-257,5),le(me,we-1,5),le(me,De-4,4),He=0;He<De;He++)le(me,me.bl_tree[2*P[He]+1],3);xe(me,me.dyn_ltree,ae-1),xe(me,me.dyn_dtree,we-1)})(W,W.l_desc.max_code+1,W.d_desc.max_code+1,oe+1),qe(W,W.dyn_ltree,W.dyn_dtree)),ye(W),Se&&Te(W)},a._tr_tally=function(W,se,ke){return W.pending_buf[W.d_buf+2*W.last_lit]=se>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&se,W.pending_buf[W.l_buf+W.last_lit]=255&ke,W.last_lit++,se===0?W.dyn_ltree[2*ke]++:(W.matches++,se--,W.dyn_ltree[2*(E[ke]+m+1)]++,W.dyn_dtree[2*F(se)]++),W.last_lit===W.lit_bufsize-1},a._tr_align=function(W){le(W,2,3),pe(W,T,q),(function(se){se.bi_valid===16?(B(se,se.bi_buf),se.bi_buf=0,se.bi_valid=0):8<=se.bi_valid&&(se.pending_buf[se.pending++]=255&se.bi_buf,se.bi_buf>>=8,se.bi_valid-=8)})(W)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,c){if(!o.setImmediate){var d,p,h,m,v=1,g={},x=!1,y=o.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(o);k=k&&k.setTimeout?k:o,d={}.toString.call(o.process)==="[object process]"?function(j){process.nextTick(function(){C(j)})}:(function(){if(o.postMessage&&!o.importScripts){var j=!0,D=o.onmessage;return o.onmessage=function(){j=!1},o.postMessage("","*"),o.onmessage=D,j}})()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",T,!1):o.attachEvent("onmessage",T),function(j){o.postMessage(m+j,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(j){C(j.data)},function(j){h.port2.postMessage(j)}):y&&"onreadystatechange"in y.createElement("script")?(p=y.documentElement,function(j){var D=y.createElement("script");D.onreadystatechange=function(){C(j),D.onreadystatechange=null,p.removeChild(D),D=null},p.appendChild(D)}):function(j){setTimeout(C,0,j)},k.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var D=new Array(arguments.length-1),_=0;_<D.length;_++)D[_]=arguments[_+1];var I={callback:j,args:D};return g[v]=I,d(v),v++},k.clearImmediate=N}function N(j){delete g[j]}function C(j){if(x)setTimeout(C,0,j);else{var D=g[j];if(D){x=!0;try{(function(_){var I=_.callback,R=_.args;switch(R.length){case 0:I();break;case 1:I(R[0]);break;case 2:I(R[0],R[1]);break;case 3:I(R[0],R[1],R[2]);break;default:I.apply(c,R)}})(D)}finally{N(j),x=!1}}}}function T(j){j.source===o&&typeof j.data=="string"&&j.data.indexOf(m)===0&&C(+j.data.slice(m.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ah)),ah.exports}var bj=yj();const o0=Ta(bj);async function wj(e){const t={success:!1,collections:[],errors:[],pathToIdMap:new Map};try{const n=await e.text(),r=l0(n,e.name);r.error?t.errors.push({fileName:e.name,error:r.error}):r.collection&&(t.collections.push(r.collection),t.success=!0,t.pathToIdMap.set(e.name,r.collection.id),t.pathToIdMap.set(`./${e.name}`,r.collection.id))}catch(n){t.errors.push({fileName:e.name,error:n instanceof Error?n.message:"Unknown error reading file"})}return t}async function xj(e){const t={success:!1,collections:[],errors:[],pathToIdMap:new Map};try{const n=await e.arrayBuffer(),r=await o0.loadAsync(n),a=Object.keys(r.files).filter(i=>!(!i.toLowerCase().endsWith(".json")||i.startsWith("__MACOSX")||i.split("/").some(o=>o.startsWith("."))||r.files[i].dir));if(a.length===0)return t.errors.push({fileName:e.name,error:"No JSON files found in ZIP archive"}),t;for(const i of a)try{const o=await r.files[i].async("string"),c=i.split("/").pop()||i,d=l0(o,c);d.error?t.errors.push({fileName:i,error:d.error}):d.collection&&(d.collection.originalPath=i,t.collections.push(d.collection),t.pathToIdMap.set(i,d.collection.id),t.pathToIdMap.set(c,d.collection.id),i.startsWith("./")||(t.pathToIdMap.set(`./${i}`,d.collection.id),t.pathToIdMap.set(`./${c}`,d.collection.id)))}catch(o){t.errors.push({fileName:i,error:o instanceof Error?o.message:"Failed to read file from ZIP"})}t.success=t.collections.length>0}catch(n){t.errors.push({fileName:e.name,error:n instanceof Error?n.message:"Failed to read ZIP file"})}return t}function l0(e,t){let n;try{n=JSON.parse(e)}catch{return{error:"Invalid JSON format"}}if(!n||typeof n!="object")return{error:"Document must be a JSON object"};const r=n;if(!r.metadata)return{error:'Missing required "metadata" field'};if(!r.metadata.name||typeof r.metadata.name!="string")return{error:'Missing or invalid "metadata.name"'};if(!r.metadata.namespace||typeof r.metadata.namespace!="string")return{error:'Missing or invalid "metadata.namespace"'};if(!r.metadata.version||typeof r.metadata.version!="string")return{error:'Missing or invalid "metadata.version"'};if(!r.metadata.specVersion)return{error:'Missing "metadata.specVersion"'};if(!r.tables||!Array.isArray(r.tables))return{error:'Missing or invalid "tables" array'};const a=Qx(r);if(!a.valid){const o=a.errors[0];return{error:(o==null?void 0:o.message)||"Document validation failed"}}return{collection:{id:vj(r.metadata.namespace,r.metadata.name,r.metadata.version),name:r.metadata.name,document:r,fileName:t}}}function c0(e){return e.name.toLowerCase().endsWith(".json")||e.type==="application/json"}function u0(e){return e.name.toLowerCase().endsWith(".zip")||e.type==="application/zip"||e.type==="application/x-zip-compressed"}function fb(e){return c0(e)||u0(e)}async function kj(e){const t={success:!1,collections:[],errors:[],pathToIdMap:new Map};for(const n of e){let r;if(u0(n))r=await xj(n);else if(c0(n))r=await wj(n);else{t.errors.push({fileName:n.name,error:"Unsupported file type. Please use .json or .zip files."});continue}if(t.collections.push(...r.collections),t.errors.push(...r.errors),r.pathToIdMap)for(const[a,i]of r.pathToIdMap)t.pathToIdMap.set(a,i)}return t.success=t.collections.length>0,t}function d0(e,t){if(!t.has(e))return e;let n=2,r=`${e}-${n}`;for(;t.has(r);)n++,r=`${e}-${n}`;return r}const Nj={name:"Eldritch Horror Generator",namespace:"rolldeo.horror.eldritch",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:`A collection of random tables for generating **cosmic horror** investigations, investigators, entities, locations, and mysterious phenomena. Designed for games like *Call of Cthulhu*, *Delta Green*, and similar investigative horror TTRPGs.

This collection focuses on **atmospheric description** and **narrative elements** rather than game mechanics.`,tags:["horror","lovecraft","cosmic","investigation","mystery","cthulhu","delta-green"],source:{license:"CC0-1.0",copyright:"Rolldeo - Free for any use"}},Cj={era:"1920s",defaultLocation:"Arkham",separator:", "},Sj={investigationMood:"{{atmosphericMood}}",cosmicThreatLevel:"{{dice:1d6}}",sanityThreshold:"{{math:10 - $cosmicThreatLevel}}",$primaryEntity:"{{eldritchEntityTier}}",$cultLeader:"{{cultistRanks}}"},Ej=JSON.parse(`[{"id":"investigatorFirstNames","name":"Investigator First Names","type":"simple","hidden":true,"resultType":"name","tags":["names","investigators"],"entries":[{"value":"Arthur"},{"value":"Beatrice"},{"value":"Charles"},{"value":"Dorothy"},{"value":"Edmund"},{"value":"Frances"},{"value":"George"},{"value":"Helena"},{"value":"Irving"},{"value":"Josephine"},{"value":"Leopold"},{"value":"Margaret"},{"value":"Nathaniel"},{"value":"Ophelia"},{"value":"Percival"},{"value":"Ruth"},{"value":"Sebastian"},{"value":"Theodora"},{"value":"Vincent"},{"value":"Winifred"}]},{"id":"investigatorSurnames","name":"Investigator Surnames","type":"simple","hidden":true,"resultType":"name","tags":["names","investigators"],"entries":[{"value":"Ashworth"},{"value":"Blackwood"},{"value":"Crane"},{"value":"Danforth"},{"value":"Elwood"},{"value":"Fairfax"},{"value":"Graves"},{"value":"Holloway"},{"value":"Innsbrook"},{"value":"Jameson"},{"value":"Kingsport"},{"value":"Legrasse"},{"value":"Marsh"},{"value":"Noyes"},{"value":"Olmstead"},{"value":"Peaslee"},{"value":"Quarry"},{"value":"Randolph"},{"value":"Sargent"},{"value":"Tillinghast"},{"value":"Upham"},{"value":"Waite"}]},{"id":"investigatorOccupations","name":"Investigator Occupations","type":"simple","resultType":"trait","tags":["investigators","occupations"],"description":"Period-appropriate occupations for investigators in the {{$era}} era.","defaultSets":{"socialClass":"middle","education":"some"},"entries":[{"id":"antiquarian","value":"Antiquarian","weight":2,"description":"A dealer and collector of rare artifacts and curiosities","sets":{"expertise":"{{antiquarianExpertise}}","socialClass":"upper-middle","education":"extensive","resources":"comfortable"}},{"id":"journalist","value":"Journalist","weight":3,"description":"A reporter seeking the truth behind the headlines","sets":{"expertise":"{{journalistExpertise}}","resources":"modest"}},{"id":"professor","value":"Professor","weight":2,"description":"An academic at Miskatonic University or similar institution","sets":{"expertise":"{{professorExpertise}}","socialClass":"upper-middle","education":"doctorate","resources":"comfortable"}},{"id":"physician","value":"Physician","weight":2,"sets":{"expertise":"medicine and anatomy","socialClass":"upper","education":"medical degree","resources":"wealthy"}},{"id":"privateeye","value":"Private Investigator","weight":3,"sets":{"expertise":"surveillance and interrogation","socialClass":"working","education":"practical","resources":"modest"}},{"id":"artist","value":"Artist","weight":2,"sets":{"expertise":"{{artistExpertise}}","resources":"variable"}},{"id":"occultist","value":"Occultist","weight":1,"description":"A student of forbidden lore and esoteric traditions","sets":{"expertise":"forbidden knowledge and ritual","education":"self-taught in arcana","resources":"variable","dangerLevel":"high"}},{"id":"veteran","value":"War Veteran","weight":2,"sets":{"expertise":"combat and survival","trauma":"{{warTrauma}}","resources":"modest"}},{"id":"librarian","value":"Librarian","weight":2,"sets":{"expertise":"research and ancient languages","education":"extensive","resources":"modest"}},{"id":"clergyman","value":"Clergy Member","weight":1,"sets":{"expertise":"theology and counseling","faith":"{{faithTradition}}","resources":"modest"}},{"id":"dilettante","value":"Dilettante","weight":1,"description":"A wealthy amateur with too much time and curiosity","sets":{"expertise":"social connections","socialClass":"upper","education":"finishing school","resources":"wealthy"}},{"id":"archaeologist","value":"Archaeologist","weight":2,"sets":{"expertise":"{{archaeologyExpertise}}","education":"doctorate","resources":"grant-funded"}}]},{"id":"antiquarianExpertise","name":"Antiquarian Expertise Areas","type":"simple","hidden":true,"entries":[{"value":"pre-Columbian artifacts"},{"value":"medieval manuscripts"},{"value":"Egyptian antiquities"},{"value":"Asian religious art"},{"value":"Renaissance curiosities"},{"value":"occult paraphernalia"}]},{"id":"journalistExpertise","name":"Journalist Beats","type":"simple","hidden":true,"entries":[{"value":"crime and police reports"},{"value":"society pages"},{"value":"obituaries and strange deaths"},{"value":"municipal corruption"},{"value":"human interest stories"}]},{"id":"professorExpertise","name":"Professor Academic Fields","type":"simple","hidden":true,"entries":[{"value":"anthropology and folklore"},{"value":"archaeology"},{"value":"astronomy and physics"},{"value":"chemistry"},{"value":"comparative religion"},{"value":"history"},{"value":"linguistics"},{"value":"medicine"},{"value":"psychology"}]},{"id":"artistExpertise","name":"Artist Mediums","type":"simple","hidden":true,"entries":[{"value":"oil painting"},{"value":"sculpture"},{"value":"photography"},{"value":"illustration"},{"value":"avant-garde mixed media"}]},{"id":"archaeologyExpertise","name":"Archaeology Specializations","type":"simple","hidden":true,"entries":[{"value":"Mesopotamian civilizations"},{"value":"Egyptian dynasties"},{"value":"Central American pyramids"},{"value":"lost Pacific cultures"},{"value":"prehistoric Europe"}]},{"id":"warTrauma","name":"War Trauma Types","type":"simple","hidden":true,"entries":[{"value":"recurring nightmares of the trenches"},{"value":"aversion to loud noises"},{"value":"survivor's guilt"},{"value":"thousand-yard stare"},{"value":"suppressed memories slowly surfacing"}]},{"id":"faithTradition","name":"Faith Traditions","type":"simple","hidden":true,"entries":[{"value":"Catholic"},{"value":"Episcopalian"},{"value":"Baptist"},{"value":"Methodist"},{"value":"Presbyterian"},{"value":"Unitarian"}]},{"id":"investigatorBackstory","name":"Investigator Backstories","type":"simple","resultType":"description","tags":["investigators","backstory"],"entries":[{"value":"lost a loved one to unexplained circumstances","weight":3,"sets":{"motivation":"seeking closure","lostPerson":"{{lostPersonType}}"}},{"value":"witnessed something impossible as a child","weight":2,"sets":{"motivation":"proving sanity","childhoodVision":"{{childhoodVisions}}"}},{"value":"inherited a collection of disturbing documents","weight":2,"sets":{"motivation":"understanding legacy","inheritedItem":"{{inheritedDocuments}}"}},{"value":"survived an encounter others did not","weight":2,"sets":{"motivation":"survivor's guilt","encounter":"{{pastEncounters}}"}},{"value":"has recurring dreams of impossible geometries","weight":2,"sets":{"motivation":"ending the visions","dreamContent":"{{dreamGeometries}}"}},{"value":"fled from a small town with a terrible secret","weight":2,"sets":{"motivation":"running from the past","townSecret":"{{smallTownSecrets}}"}},{"value":"seeks redemption for past involvement with the occult","weight":1,"sets":{"motivation":"atonement","pastInvolvement":"{{occultInvolvement}}"}},{"value":"is the last surviving member of a previous investigation","weight":1,"sets":{"motivation":"finishing what was started","previousCase":"{{previousInvestigations}}"}}]},{"id":"lostPersonType","name":"Types of Lost Persons","type":"simple","hidden":true,"entries":[{"value":"a beloved spouse"},{"value":"a younger sibling"},{"value":"a close friend since childhood"},{"value":"a respected mentor"},{"value":"a parent who went mad"}]},{"id":"childhoodVisions","name":"Childhood Visions","type":"simple","hidden":true,"entries":[{"value":"shapes moving in the walls of the family home"},{"value":"a figure watching from the edge of the woods"},{"value":"the face in the attic window that no one else saw"},{"value":"the thing that lived in the basement"},{"value":"the night the stars moved wrong"}]},{"id":"inheritedDocuments","name":"Inherited Disturbing Documents","type":"simple","hidden":true,"entries":[{"value":"a journal filled with increasingly unhinged entries"},{"value":"a collection of newspaper clippings about disappearances"},{"value":"letters from someone who claimed to be family but never existed"},{"value":"a hand-drawn map of a place that shouldn't exist"},{"value":"photographs of rituals performed in familiar locations"}]},{"id":"pastEncounters","name":"Past Supernatural Encounters","type":"simple","hidden":true,"entries":[{"value":"a shipwreck where something came aboard"},{"value":"an archaeological dig that went wrong"},{"value":"a sance that contacted something real"},{"value":"a night lost to missing time"},{"value":"the incident at the old asylum"}]},{"id":"dreamGeometries","name":"Dream Geometries","type":"simple","hidden":true,"entries":[{"value":"angles that exist in too many dimensions"},{"value":"a city of titanic black towers"},{"value":"staircases that descend into the space between stars"},{"value":"a door that opens in all directions at once"},{"value":"a chamber where the walls are also the floor and ceiling"}]},{"id":"smallTownSecrets","name":"Small Town Secrets","type":"simple","hidden":true,"entries":[{"value":"the thing the townsfolk feed in the well"},{"value":"the bloodline that shouldn't continue"},{"value":"what happens during the harvest festival"},{"value":"where the children really go"},{"value":"the pact made three generations ago"}]},{"id":"occultInvolvement","name":"Past Occult Involvement","type":"simple","hidden":true,"entries":[{"value":"membership in a secret society with dark purposes"},{"value":"translation of a text that should have stayed unread"},{"value":"participation in a ritual whose price is still being paid"},{"value":"creation of an artifact that whispers"},{"value":"opening of a door that cannot be closed"}]},{"id":"previousInvestigations","name":"Previous Failed Investigations","type":"simple","hidden":true,"entries":[{"value":"the disappearances at Falcon's Point"},{"value":"the Kingsport cannery incident"},{"value":"what happened to the Blackwood expedition"},{"value":"the Silver Twilight Lodge affair"},{"value":"the case of the Dunwich lights"}]},{"id":"investigatorPhobias","name":"Investigator Phobias","type":"simple","resultType":"trait","tags":["investigators","fears"],"description":"Deep-seated fears that may complicate investigations.","entries":[{"value":"claustrophobia","sets":{"trigger":"enclosed spaces, tunnels, crypts"}},{"value":"thalassophobia","sets":{"trigger":"deep water, the ocean, aquatic creatures"}},{"value":"nyctophobia","sets":{"trigger":"darkness, being unable to see"}},{"value":"necrophobia","sets":{"trigger":"corpses, death, the dying"}},{"value":"agoraphobia","sets":{"trigger":"open spaces, crowds, public places"}},{"value":"bibliophobia","sets":{"trigger":"books, especially old tomes"}},{"value":"scopophobia","sets":{"trigger":"being watched, eyes, portraits"}},{"value":"hemophobia","sets":{"trigger":"blood, wounds, injury"}},{"value":"entomophobia","sets":{"trigger":"insects, crawling things, swarms"}},{"value":"athazagoraphobia","sets":{"trigger":"being forgotten, losing memories"}}]},{"id":"investigatorMannerisms","name":"Investigator Mannerisms","type":"simple","resultType":"trait","tags":["investigators","personality"],"entries":[{"value":"speaks in a quiet, measured tone"},{"value":"constantly takes notes in a small leather journal"},{"value":"fidgets with a lucky charm or memento"},{"value":"quotes literature or scripture when stressed"},{"value":"hums tunelessly when concentrating"},{"value":"refuses to meet anyone's eyes directly"},{"value":"compulsively checks locks and windows"},{"value":"speaks to themselves under their breath"},{"value":"always positions to see all exits"},{"value":"pauses before answering, as if listening to something else"},{"value":"touches walls and furniture to confirm their reality"},{"value":"keeps a particular hand in their pocket, gripping something"}]},{"id":"commonEldritchEntities","name":"Common Eldritch Entities","type":"simple","resultType":"creature","tags":["entities","common"],"description":"Lesser manifestations of cosmic horror, commonly encountered during investigations.","defaultSets":{"rarity":"common","threatLevel":"dangerous"},"entries":[{"id":"deepOne","value":"Deep One","weight":4,"description":"A batrachian humanoid with bulging eyes, webbed appendages, and glistening grey-green scales","sets":{"origin":"the depths of the ocean","motivation":"{{deepOneMotivation}}","signifier":"a pervasive fishy odor and tracks of slime"}},{"id":"ghoul","value":"Ghoul","weight":3,"description":"A hunched, rubbery humanoid with canine features, hooved feet, and an unwholesome pallor","sets":{"origin":"tunnels beneath graveyards","motivation":"feeding on the dead","signifier":"disturbed graves and gnawed bones"}},{"id":"migo","value":"Mi-Go","weight":2,"description":"A fungoid crustacean with a cluster of pyramided fleshy rings for a head and multiple pairs of membranous wings","sets":{"origin":"the dark side of Yuggoth","motivation":"{{miGoMotivation}}","signifier":"strange buzzing sounds and surgical precision"}},{"id":"shoggoth","value":"Shoggoth","weight":1,"description":"A massive, shapeless mass of protoplasmic flesh covered in countless temporary eyes","sets":{"origin":"Elder Thing laboratories in Antarctica","motivation":"consuming and absorbing","signifier":"iridescent slime trails and a piping cry","threatLevel":"extreme"}},{"id":"nightgaunt","value":"Night-Gaunt","weight":2,"description":"A black, faceless humanoid with bat-like wings, a barbed tail, and cold, rubbery skin","sets":{"origin":"the peaks of the Dreamlands","motivation":"carrying victims to unknown destinations","signifier":"total silence and a sensation of tickling"}},{"id":"dimensionalShambler","value":"Dimensional Shambler","weight":1,"description":"A grotesque ape-like creature with multiple limbs, capable of stepping between dimensions","sets":{"origin":"the spaces between realities","motivation":"hunting those who meddle with dimensional travel","signifier":"impossible shadows and spatial distortions"}},{"id":"byakhee","value":"Byakhee","weight":2,"description":"A bat-winged, insectoid horror capable of traversing the void between stars","sets":{"origin":"interstellar space near Aldebaran","motivation":"serving as mounts for those who know the proper summoning","signifier":"an unnatural cold and the distant sound of piping"}},{"id":"servitorOuter","value":"Servitor of the Outer Gods","weight":1,"description":"An amorphous entity of living darkness that absorbs light and warmth","sets":{"origin":"the court of Azathoth","motivation":"carrying out the will of beings beyond comprehension","signifier":"extinguished lights and a creeping despair","threatLevel":"extreme"}}]},{"id":"deepOneMotivation","name":"Deep One Motivations","type":"simple","hidden":true,"entries":[{"value":"retrieving a stolen artifact"},{"value":"claiming a promised human mate"},{"value":"protecting a hidden hybrid colony"},{"value":"performing rites to call Dagon"}]},{"id":"miGoMotivation","name":"Mi-Go Motivations","type":"simple","hidden":true,"entries":[{"value":"harvesting human brains for their collection"},{"value":"mining rare minerals from Earth"},{"value":"establishing a new observation outpost"},{"value":"silencing those who have seen too much"}]},{"id":"rareEldritchEntities","name":"Rare Eldritch Entities","type":"simple","resultType":"creature","tags":["entities","rare"],"defaultSets":{"rarity":"rare","threatLevel":"catastrophic"},"entries":[{"id":"starSpawn","value":"Star-Spawn of Cthulhu","description":"A titanic, octopoid horror with vestigial wings, vaguely humanoid in shape but utterly alien in nature","sets":{"origin":"R'lyeh and the depths of the Pacific","motivation":"preparing for the return of Great Cthulhu","signifier":"mass nightmares and inexplicable suicides"}},{"id":"flyingPolyp","value":"Flying Polyp","description":"A partially invisible thing of whistling winds and grasping tentacles","sets":{"origin":"subterranean ruins older than humanity","motivation":"ancient territorial rage","signifier":"inexplicable wind damage and people torn asunder"}},{"id":"colorSpace","value":"Colour Out of Space","description":"An indescribable color from beyond the visible spectrum, a living radiation","sets":{"origin":"the void between galaxies","motivation":"feeding and spreading contamination","signifier":"withered vegetation, madness, and a sickly luminescence"}},{"id":"hunterDark","value":"Hunting Horror","description":"A serpentine mass of ropy black tendrils with a single trifold eye","sets":{"origin":"summoned by those who serve Nyarlathotep","motivation":"hunting designated prey across any distance","signifier":"a sense of being watched and victims torn to pieces"}},{"id":"elderthing","value":"Elder Thing","description":"A barrel-shaped being with five-fold radial symmetry, starfish-headed and winged","sets":{"origin":"the Antarctic and the depths of time","motivation":"observing and cataloging, or defending ancient territories","signifier":"impossible fossils and strange surgical marks"}}]},{"id":"eldritchEntityTier","name":"Eldritch Entity by Rarity","type":"composite","resultType":"creature","tags":["entities"],"description":"Selects an entity based on rarity tier. Common entities appear more frequently.","sources":[{"tableId":"commonEldritchEntities","weight":8},{"tableId":"rareEldritchEntities","weight":2}]},{"id":"allEldritchEntities","name":"All Eldritch Entities","type":"collection","resultType":"creature","tags":["entities"],"description":"All entities from both common and rare tables, merged into a single pool.","collections":["commonEldritchEntities","rareEldritchEntities"]},{"id":"cultNames","name":"Cult Names","type":"simple","resultType":"name","tags":["cults","names"],"hidden":true,"entries":[{"value":"The Esoteric Order of Dagon"},{"value":"The Brotherhood of the Yellow Sign"},{"value":"The Starry Wisdom Sect"},{"value":"The Silver Twilight Lodge"},{"value":"The Cult of the Bloody Tongue"},{"value":"The Church of Starry Wisdom"},{"value":"The Chesuncook Witch Coven"},{"value":"The Servants of the Outer Gods"},{"value":"The Order of the Sword of St. Jerome"},{"value":"The Disciples of the Worm"},{"value":"The Circle of the Black Pharaoh"},{"value":"The Keepers of the Gate"}]},{"id":"cultistRanks","name":"Cultist Ranks and Roles","type":"simple","resultType":"npc","tags":["cults","npcs"],"entries":[{"id":"initiate","value":"Initiate","weight":4,"sets":{"knowledge":"fragmentary","dedication":"uncertain","title":"Brother/Sister"}},{"id":"acolyte","value":"Acolyte","weight":3,"sets":{"knowledge":"basic rituals","dedication":"committed","title":"Acolyte"}},{"id":"priest","value":"Priest","weight":2,"sets":{"knowledge":"extensive lore","dedication":"fanatical","title":"Priest/Priestess"}},{"id":"highpriest","value":"High Priest","weight":1,"sets":{"knowledge":"forbidden secrets","dedication":"absolute","title":"High Priest/High Priestess"}},{"id":"chosen","value":"Chosen One","weight":1,"sets":{"knowledge":"direct communion","dedication":"transcendent","title":"The Chosen","specialAbility":"{{chosenAbilities}}"}}]},{"id":"chosenAbilities","name":"Chosen One Abilities","type":"simple","hidden":true,"entries":[{"value":"sees through the eyes of the devoted"},{"value":"speaks with the voice of the deity"},{"value":"heals wounds by transferring them to others"},{"value":"knows the true names of those nearby"},{"value":"cannot be remembered after leaving"}]},{"id":"cultActivities","name":"Cult Activities","type":"simple","resultType":"event","tags":["cults","activities"],"entries":[{"value":"performing a ritual to summon {{eldritchEntityTier}}","weight":2,"sets":{"urgency":"immediate","scale":"major"}},{"value":"acquiring sacrificial victims from {{victimSource}}","weight":3,"sets":{"urgency":"ongoing","scale":"local"}},{"value":"protecting a sacred site from discovery","weight":2,"sets":{"urgency":"vigilant","scale":"local"}},{"value":"infiltrating local institutions","weight":2,"sets":{"urgency":"patient","scale":"expanding"}},{"value":"translating forbidden texts","weight":2,"sets":{"urgency":"methodical","scale":"minor"}},{"value":"breeding hybrid offspring","weight":1,"sets":{"urgency":"generational","scale":"hidden"}},{"value":"preparing for an astrological conjunction","weight":2,"sets":{"urgency":"calendar-bound","scale":"cosmic"}},{"value":"silencing those who know too much","weight":3,"sets":{"urgency":"immediate","scale":"targeted"}}]},{"id":"victimSource","name":"Victim Sources","type":"simple","hidden":true,"entries":[{"value":"the local homeless population"},{"value":"travelers passing through"},{"value":"members who have failed their tests"},{"value":"the patients of a corrupt asylum"},{"value":"sailors from the waterfront"},{"value":"orphans from the nearby institution"}]},{"id":"hauntedLocations","name":"Haunted Locations","type":"simple","resultType":"location","tags":["locations","haunted"],"defaultSets":{"atmosphere":"oppressive","access":"restricted"},"entries":[{"id":"mansion","value":"a decaying Victorian mansion","weight":3,"sets":{"history":"{{mansionHistory}}","feature":"{{mansionFeature}}","access":"abandoned"}},{"id":"asylum","value":"an abandoned asylum","weight":2,"sets":{"history":"{{asylumHistory}}","feature":"{{asylumFeature}}","access":"condemned"}},{"id":"church","value":"a desecrated church","weight":2,"sets":{"history":"{{churchHistory}}","feature":"{{churchFeature}}","access":"forgotten"}},{"id":"lighthouse","value":"an isolated lighthouse","weight":2,"sets":{"history":"{{lighthouseHistory}}","feature":"a light that sometimes shines when no one is there","access":"remote"}},{"id":"cemetery","value":"an ancient cemetery","weight":3,"sets":{"history":"{{cemeteryHistory}}","feature":"{{cemeteryFeature}}","access":"public but avoided"}},{"id":"mine","value":"a collapsed mine","weight":2,"sets":{"history":"{{mineHistory}}","feature":"strange sounds echoing from impossible depths","access":"sealed"}},{"id":"farmhouse","value":"a remote farmhouse","weight":2,"sets":{"history":"{{farmhouseHistory}}","feature":"{{farmhouseFeature}}","access":"isolated"}},{"id":"theater","value":"a shuttered theater","weight":1,"sets":{"history":"a final performance that drove the audience mad","feature":"whispered lines from a play that was never written","access":"locked since the incident"}}]},{"id":"mansionHistory","name":"Mansion Histories","type":"simple","hidden":true,"entries":[{"value":"the site of a family's mysterious mass death"},{"value":"once owned by an accused witch"},{"value":"built over older foundations no one can identify"},{"value":"where a renowned occultist conducted his final experiments"}]},{"id":"mansionFeature","name":"Mansion Features","type":"simple","hidden":true,"entries":[{"value":"a room that appears on no floor plan"},{"value":"portraits whose eyes follow visitors"},{"value":"a basement that extends impossibly deep"},{"value":"wallpaper patterns that seem to move"}]},{"id":"asylumHistory","name":"Asylum Histories","type":"simple","hidden":true,"entries":[{"value":"closed after patients began sharing the same impossible delusion"},{"value":"the site of unethical experiments in consciousness transfer"},{"value":"where the head doctor's own madness finally emerged"},{"value":"burned by patients who claimed they were 'letting something out'"}]},{"id":"asylumFeature","name":"Asylum Features","type":"simple","hidden":true,"entries":[{"value":"patient artwork depicting the same impossible creature"},{"value":"a solitary confinement ward with scratch marks on the outside of doors"},{"value":"an operating theater with inexplicable stains on the ceiling"},{"value":"patient records describing experiences that match current events"}]},{"id":"churchHistory","name":"Church Histories","type":"simple","hidden":true,"entries":[{"value":"the congregation vanished during a service"},{"value":"built by a heretical sect expelled from Europe"},{"value":"the minister's sermon notes became increasingly disturbing"},{"value":"constructed with stones from a demolished pagan site"}]},{"id":"churchFeature","name":"Church Features","type":"simple","hidden":true,"entries":[{"value":"stained glass windows that show different images at night"},{"value":"a crypt that leads to older tunnels"},{"value":"an altar stone carved with pre-Christian symbols underneath"},{"value":"hymnals containing songs in an unknown language"}]},{"id":"lighthouseHistory","name":"Lighthouse Histories","type":"simple","hidden":true,"entries":[{"value":"its keepers have all died or gone mad"},{"value":"ships that follow its light are never seen again"},{"value":"the original architect drowned himself after completing it"},{"value":"it was built to watch for something, not to guide ships"}]},{"id":"cemeteryHistory","name":"Cemetery Histories","type":"simple","hidden":true,"entries":[{"value":"contains the graves of a family line touched by cosmic forces"},{"value":"built atop a Native American burial ground with a curse"},{"value":"the groundskeeper has been the same man for three generations"},{"value":"bodies have been exhumed and found changed"}]},{"id":"cemeteryFeature","name":"Cemetery Features","type":"simple","hidden":true,"entries":[{"value":"a mausoleum that has no interior entrance"},{"value":"graves that sink deeper each year"},{"value":"statuary that weeps actual tears"},{"value":"a section where nothing will grow"}]},{"id":"mineHistory","name":"Mine Histories","type":"simple","hidden":true,"entries":[{"value":"the miners broke through into a pre-existing cavern"},{"value":"the workers refused to go below a certain depth"},{"value":"something was found and removed in secret"},{"value":"the collapse was deliberate, to seal something in"}]},{"id":"farmhouseHistory","name":"Farmhouse Histories","type":"simple","hidden":true,"entries":[{"value":"the family practiced old-world traditions that were not Christian"},{"value":"something fell from the sky into the fields one night"},{"value":"generations of inbreeding led to something other than human"},{"value":"the land was purchased from natives under suspicious circumstances"}]},{"id":"farmhouseFeature","name":"Farmhouse Features","type":"simple","hidden":true,"entries":[{"value":"a well that goes down much too far"},{"value":"a root cellar with chains bolted to the walls"},{"value":"fields where the crops grow in unnatural patterns"},{"value":"animal bones arranged in geometric formations"}]},{"id":"cosmicLocations","name":"Cosmic Locations","type":"simple","resultType":"location","tags":["locations","cosmic"],"description":"Places beyond normal reality, accessible through dreams, rituals, or dimensional rifts.","entries":[{"value":"R'lyeh","description":"A sunken city of non-Euclidean geometry where Great Cthulhu dreams","sets":{"danger":"absolute","accessible":"when the stars are right"}},{"value":"the Plateau of Leng","description":"A frigid highland in the Dreamlands, home to the moon-beasts","sets":{"danger":"extreme","accessible":"through deep dreaming"}},{"value":"the Court of Azathoth","description":"The center of ultimate chaos where the Daemon Sultan writhes mindlessly","sets":{"danger":"incomprehensible","accessible":"only by the mad or the dead"}},{"value":"Yuggoth","description":"The dark planet at the rim of the solar system, home to the Mi-Go","sets":{"danger":"extreme","accessible":"via Mi-Go spacecraft"}},{"value":"the Dreamlands","description":"A parallel dimension accessible through dreams, with its own geography and horrors","sets":{"danger":"variable","accessible":"through seventy steps of light slumber"}},{"value":"Kadath in the Cold Waste","description":"A fortress of the Great Ones, hidden at the top of the world in dream","sets":{"danger":"extreme","accessible":"through the Dreamlands, with great peril"}},{"value":"the Vale of Pnath","description":"A lightless abyss beneath the Dreamlands, filled with vast bone-picking creatures","sets":{"danger":"extreme","accessible":"by falling or being dropped by night-gaunts"}},{"value":"Carcosa","description":"A city on a distant world beneath black stars, seat of the King in Yellow","sets":{"danger":"maddening","accessible":"through reading the play or at certain conjunctions"}}]},{"id":"forbiddenTomes","name":"Forbidden Tomes","type":"simple","resultType":"item","tags":["books","artifacts"],"description":"Blasphemous texts containing knowledge that should not be known.","defaultSets":{"language":"varied","danger":"high"},"entries":[{"id":"necronomicon","value":"the Necronomicon","weight":1,"sets":{"author":"Abdul Alhazred, the Mad Arab","language":"Arabic, Latin, or English translation","contents":"rites, history of the Old Ones, dimensional travel","danger":"extreme","copies":"{{necronomiconCopy}}"}},{"id":"kingyellow","value":"The King in Yellow","weight":2,"sets":{"author":"unknown","language":"any - it translates itself","contents":"a play that induces madness in the second act","danger":"extreme"}},{"id":"pnakotic","value":"the Pnakotic Manuscripts","weight":1,"sets":{"author":"the Great Race of Yith","language":"various translations from an unknown original","contents":"history spanning millions of years, time travel formulae","danger":"high"}},{"id":"cultes","value":"Cultes des Goules","weight":2,"sets":{"author":"Comte d'Erlette","language":"French","contents":"ghoul lore, necrophagy rituals, underworld navigation","danger":"moderate"}},{"id":"eltdown","value":"the Eltdown Shards","weight":1,"sets":{"author":"pre-human","language":"untranslated pictographs","contents":"prophecies and summoning diagrams","danger":"high"}},{"id":"deVermis","value":"De Vermis Mysteriis","weight":2,"sets":{"author":"Ludwig Prinn","language":"Latin","contents":"practical sorcery, demon summoning, immortality rites","danger":"high"}},{"id":"revelations","value":"Revelations of Glaaki","weight":1,"sets":{"author":"cult scribes in trance","language":"English","contents":"prophecies dictated by an imprisoned Great Old One","danger":"extreme"}},{"id":"liber","value":"Liber Ivonis","weight":2,"sets":{"author":"Eibon of Hyperborea","language":"Hyperborean, Latin translations exist","contents":"pre-human sorcery, worship of Tsathoggua","danger":"high"}}]},{"id":"necronomiconCopy","name":"Necronomicon Copies","type":"simple","hidden":true,"entries":[{"value":"the Miskatonic University copy, heavily restricted"},{"value":"the British Museum copy, incomplete"},{"value":"a black-market hand-copied version, possibly corrupted"},{"value":"the Dee translation, annotated by the translator"},{"value":"a partial photographic reproduction, sanity somewhat preserved"}]},{"id":"cursedArtifacts","name":"Cursed Artifacts","type":"simple","resultType":"item","tags":["artifacts","cursed"],"entries":[{"value":"a soapstone idol of disturbing proportions","sets":{"origin":"recovered from a Pacific island","effect":"induces dreams of R'lyeh","appearance":"octopoid, with wings and multiple eyes"}},{"value":"a silver key of unusual design","sets":{"origin":"passed down through a strange family line","effect":"opens doors that aren't there","appearance":"ornate, with arabesques that seem to move"}},{"value":"a yellowed theatrical mask","sets":{"origin":"from a production of a forbidden play","effect":"the wearer sees through another's eyes","appearance":"pallid, expressionless, yet somehow sorrowful"}},{"value":"a cylinder of iridescent metal","sets":{"origin":"found in a meteorite crater","effect":"records and plays back thoughts","appearance":"covered in tiny protrusions, warm to the touch"}},{"value":"a preserved hand in a glass case","sets":{"origin":"cut from a hanged sorcerer","effect":"points toward hidden doors","appearance":"withered, yet still twitches occasionally"}},{"value":"a mirror of black glass","sets":{"origin":"from the collection of John Dee","effect":"shows other places and times","appearance":"obsidian surface that reflects nothing normal"}},{"value":"a crystal prism that bends light impossibly","sets":{"origin":"excavated from Antarctic ruins","effect":"reveals things invisible to normal sight","appearance":"five-sided, refracting colors that don't exist"}},{"value":"a music box that plays by itself","sets":{"origin":"crafted by a composer who went mad","effect":"its melody summons attention from beyond","appearance":"silver, decorated with dancing figures that aren't human"}}]},{"id":"strangeClues","name":"Strange Clues","type":"simple","resultType":"item","tags":["clues","investigation"],"entries":[{"value":"a journal with entries in an unknown language that appeared overnight"},{"value":"newspaper clippings about disappearances, dating back decades"},{"value":"a photograph showing the victim with someone who died years before"},{"value":"a map with locations marked that correspond to recent events"},{"value":"letters from someone claiming to know the future"},{"value":"a recording of sounds that shouldn't exist"},{"value":"architectural blueprints for a building with impossible geometry"},{"value":"a ledger tracking payments to unnamed recipients for unnamed services"},{"value":"a collection of hair and nail clippings, carefully labeled"},{"value":"an appointment book with meetings scheduled after the owner's death"},{"value":"a child's drawing depicting events that haven't happened yet"},{"value":"dental records showing extra teeth in unusual arrangements"}]},{"id":"ominousOmens","name":"Ominous Omens","type":"simple","resultType":"event","tags":["omens","atmosphere"],"entries":[{"value":"birds falling dead from the sky","sets":{"interpretation":"the air itself is poisoned by what approaches"}},{"value":"dogs howling in unison at an empty window","sets":{"interpretation":"they see what we cannot"}},{"value":"clocks stopping at the same moment across town","sets":{"interpretation":"time itself flinches from what is coming"}},{"value":"fish washing up dead, arranged in patterns","sets":{"interpretation":"a message from things beneath the waves"}},{"value":"milk curdling instantly upon being poured","sets":{"interpretation":"corruption spreads through the mundane"}},{"value":"children crying in their sleep, speaking the same words","sets":{"interpretation":"young minds are easier to touch"}},{"value":"photographs developing with extra figures","sets":{"interpretation":"something wants to be seen"}},{"value":"mirrors showing reflections that move independently","sets":{"interpretation":"the boundary between worlds thins"}},{"value":"an unexpected eclipse on the wrong day","sets":{"interpretation":"the stars are aligning for something"}},{"value":"the same stranger appearing in multiple witnesses' dreams","sets":{"interpretation":"a messenger from beyond"}}]},{"id":"atmosphericMood","name":"Atmospheric Moods","type":"simple","resultType":"description","tags":["atmosphere"],"hidden":true,"entries":[{"value":"oppressively silent"},{"value":"thick with unspoken dread"},{"value":"electrically charged"},{"value":"suffocatingly claustrophobic"},{"value":"unnervingly still"},{"value":"pregnant with nameless horror"},{"value":"dreamlike and disjointed"},{"value":"permeated by wrongness"}]},{"id":"weatherConditions","name":"Ominous Weather","type":"simple","resultType":"environment","tags":["weather","atmosphere"],"entries":[{"value":"a thick fog that muffles all sound","sets":{"visibility":"severely limited","effect":"disorienting"}},{"value":"a cold rain that falls from a clear sky","sets":{"visibility":"normal","effect":"unsettling"}},{"value":"an unnatural darkness that streetlights cannot penetrate","sets":{"visibility":"minimal","effect":"terrifying"}},{"value":"a humid stillness before a storm that never comes","sets":{"visibility":"normal","effect":"anxious anticipation"}},{"value":"a freezing wind from an impossible direction","sets":{"visibility":"normal","effect":"bone-chilling"}},{"value":"greenish lightning without thunder","sets":{"visibility":"intermittent","effect":"revealing glimpses"}},{"value":"stars that seem to pulse and writhe","sets":{"visibility":"too clear","effect":"cosmic awareness"}},{"value":"aurora-like lights in colors that hurt to see","sets":{"visibility":"enhanced but wrong","effect":"headache and nausea"}}]},{"id":"sanityEffects","name":"Sanity Breaking Experiences","type":"simple","resultType":"effect","tags":["horror","mental"],"description":"The psychological toll of exposure to cosmic truth.","entries":[{"value":"temporary fugue state","sets":{"duration":"minutes to hours","manifestation":"wandering with no memory of actions","recovery":"usually complete"}},{"value":"uncontrollable trembling","sets":{"duration":"hours to days","manifestation":"hands shake, voice quavers","recovery":"gradual"}},{"value":"hysterical blindness","sets":{"duration":"hours","manifestation":"the mind refuses to see","recovery":"sudden return of sight"}},{"value":"compulsive behavior","sets":{"duration":"ongoing","manifestation":"{{compulsiveBehaviors}}","recovery":"therapy and time"}},{"value":"persistent hallucinations","sets":{"duration":"intermittent, ongoing","manifestation":"glimpses of things that aren't there - or are they?","recovery":"uncertain"}},{"value":"paranoid ideation","sets":{"duration":"weeks to permanent","manifestation":"everyone is part of the conspiracy","recovery":"difficult"}},{"value":"existential detachment","sets":{"duration":"permanent alteration","manifestation":"nothing seems real or important anymore","recovery":"new purpose may help"}},{"value":"prophetic dreams","sets":{"duration":"permanent","manifestation":"visions of what is to come, always terrible","recovery":"impossible - it's not an illness, it's knowledge"}}]},{"id":"compulsiveBehaviors","name":"Compulsive Behaviors","type":"simple","hidden":true,"entries":[{"value":"obsessively drawing the same symbol"},{"value":"counting and recounting objects"},{"value":"checking locks and windows repeatedly"},{"value":"avoiding certain words or numbers"},{"value":"hoarding seemingly random objects"},{"value":"speaking in rhymes or patterns"}]},{"id":"investigationTriggers","name":"Investigation Triggers","type":"simple","resultType":"hook","tags":["hooks","investigation"],"description":"Events that draw investigators into a case.","entries":[{"value":"a friend or family member goes missing under strange circumstances","weight":3,"sets":{"personal":"true","urgency":"high"}},{"value":"an unusual item is inherited from a deceased relative","weight":2,"sets":{"personal":"true","urgency":"low"}},{"value":"a newspaper article describes an impossible event","weight":3,"sets":{"personal":"false","urgency":"medium"}},{"value":"a stranger delivers a warning and then vanishes","weight":2,"sets":{"personal":"false","urgency":"high"}},{"value":"a recurring dream becomes too specific to ignore","weight":2,"sets":{"personal":"true","urgency":"medium"}},{"value":"an old case file reopens with new evidence","weight":2,"sets":{"personal":"varies","urgency":"medium"}},{"value":"a pattern of deaths matches an ancient prophecy","weight":1,"sets":{"personal":"false","urgency":"extreme"}},{"value":"a trusted colleague's behavior changes dramatically","weight":2,"sets":{"personal":"true","urgency":"high"}}]},{"id":"complications","name":"Investigation Complications","type":"simple","resultType":"complication","tags":["complications"],"entries":[{"value":"a crucial witness dies before they can be questioned","sets":{"severity":"major","type":"evidence"}},{"value":"the authorities are actively covering up the truth","sets":{"severity":"major","type":"opposition"}},{"value":"an investigator begins experiencing the same symptoms as victims","sets":{"severity":"critical","type":"personal"}},{"value":"evidence keeps disappearing from secured locations","sets":{"severity":"moderate","type":"evidence"}},{"value":"a rival group is pursuing the same goal for different reasons","sets":{"severity":"moderate","type":"opposition"}},{"value":"an investigator's loved one is threatened or taken","sets":{"severity":"critical","type":"personal"}},{"value":"the cult has infiltrated local law enforcement","sets":{"severity":"major","type":"opposition"}},{"value":"the investigation attracts unwanted attention from something inhuman","sets":{"severity":"critical","type":"supernatural"}},{"value":"Roll twice and combine! {{2*unique*again|\\" AND \\"}}","weight":1,"sets":{"severity":"catastrophic","type":"multiple"}}]},{"id":"investigationSettings","name":"Investigation Settings","type":"simple","resultType":"location","tags":["settings","locations"],"entries":[{"value":"Arkham, Massachusetts","description":"A decaying New England town in the shadow of Miskatonic University","sets":{"resources":"academic, archival","danger":"high concentration of occult activity"}},{"value":"Innsmouth, Massachusetts","description":"An isolated coastal town with a terrible secret in its bloodlines","sets":{"resources":"minimal, outsiders unwelcome","danger":"entire population is compromised"}},{"value":"Kingsport, Massachusetts","description":"A dreaming seaside town where the boundary to other realms is thin","sets":{"resources":"artistic community, spiritualist circles","danger":"reality is unstable"}},{"value":"New York City","description":"The teeming metropolis hides ancient evils beneath its modern veneer","sets":{"resources":"extensive, but scattered","danger":"cults hide in plain sight among millions"}},{"value":"New Orleans","description":"A city where voodoo traditions mask older, darker practices","sets":{"resources":"occult community, unique traditions","danger":"multiple competing supernatural factions"}},{"value":"London, England","description":"Ancient secrets lurk beneath the fog of the imperial capital","sets":{"resources":"British Museum, various occult societies","danger":"centuries of accumulated evil"}},{"value":"Cairo, Egypt","description":"Gateway to ancient tombs and the secrets of the pharaohs","sets":{"resources":"archaeological community, black market antiquities","danger":"disturbing what should remain buried"}},{"value":"Shanghai, China","description":"International settlement where East and West meet in shadow","sets":{"resources":"international contacts, smuggling routes","danger":"ancient Chinese sorcery meets Western occultism"}}]},{"id":"witnessReactions","name":"Witness Reactions","type":"simple","resultType":"description","tags":["npcs","reactions"],"entries":[{"value":"refuses to speak, eyes darting nervously"},{"value":"laughs inappropriately, clearly on the edge of hysteria"},{"value":"recites what sounds like a prepared statement"},{"value":"breaks down weeping and cannot continue"},{"value":"speaks in a flat monotone, as if drugged"},{"value":"becomes aggressive and defensive"},{"value":"claims to remember nothing, unconvincingly"},{"value":"provides information willingly, perhaps too willingly"},{"value":"speaks in circles, never quite answering questions"},{"value":"begs the investigators to leave it alone"}]},{"id":"deadEnds","name":"Investigative Dead Ends","type":"simple","resultType":"complication","tags":["investigation","obstacles"],"description":"Frustrating setbacks that force investigators to find new approaches.","entries":[{"value":"the building has been demolished recently, no explanation given"},{"value":"all records from that period were destroyed in a convenient fire"},{"value":"the person in question never existed according to any records"},{"value":"the location described cannot be found on any map"},{"value":"everyone who could help has died within the past month"},{"value":"the evidence contradicts itself in impossible ways"},{"value":"the key document is in a language no scholar can identify"},{"value":"the witness recants their testimony completely"}]},{"id":"ritualsObserved","name":"Rituals Observed","type":"simple","resultType":"event","tags":["rituals","horror"],"description":"Disturbing ceremonies investigators might witness.","entries":[{"value":"robed figures chanting in an unknown language","sets":{"participants":"{{dice:2d6+4}}","duration":"hours","purpose":"summoning or communion"}},{"value":"a sacrifice being prepared on a stone altar","sets":{"participants":"{{dice:1d6+2}}","duration":"brief","purpose":"appeasement or power"}},{"value":"dancers moving in patterns that hurt to watch","sets":{"participants":"{{dice:3d6}}","duration":"until exhaustion","purpose":"trance induction"}},{"value":"a congregation drinking from a shared vessel","sets":{"participants":"{{dice:4d6}}","duration":"ceremonial","purpose":"communion with the divine"}},{"value":"the reading aloud of forbidden texts","sets":{"participants":"{{dice:1d4}}","duration":"hours of recitation","purpose":"education or invocation"}},{"value":"bodies being prepared in ways that suggest they will be used again","sets":{"participants":"{{dice:1d4+1}}","duration":"methodical","purpose":"preservation for future need"}}]},{"id":"finalRevelations","name":"Final Revelations","type":"simple","resultType":"description","tags":["climax","horror"],"description":"The terrible truths investigators uncover at the investigation's climax.","entries":[{"value":"the threat has already won; this is just the beginning","sets":{"tone":"despair"}},{"value":"the investigators themselves were manipulated into enabling the horror","sets":{"tone":"guilt"}},{"value":"humanity is not the first intelligence to call Earth home, and will not be the last","sets":{"tone":"cosmic insignificance"}},{"value":"the 'evil' they fought was trying to prevent something worse","sets":{"tone":"moral ambiguity"}},{"value":"the investigators' families have always been part of this","sets":{"tone":"personal horror"}},{"value":"stopping this threat only delays the inevitable","sets":{"tone":"pyrrhic victory"}},{"value":"the boundary between the investigators and the horror has blurred","sets":{"tone":"transformation"}},{"value":"some truths cannot be unlearned, and the investigators are forever changed","sets":{"tone":"loss of innocence"}}]},{"id":"timeOfDay","name":"Time of Day","type":"simple","resultType":"environment","hidden":true,"entries":[{"value":"the dead of night","sets":{"lighting":"darkness","activity":"minimal"}},{"value":"the grey hour before dawn","sets":{"lighting":"dim","activity":"stirring"}},{"value":"a fog-shrouded morning","sets":{"lighting":"diffuse","activity":"emerging"}},{"value":"an overcast afternoon","sets":{"lighting":"flat","activity":"normal"}},{"value":"the lengthening shadows of evening","sets":{"lighting":"fading","activity":"returning home"}},{"value":"the witching hour","sets":{"lighting":"darkness","activity":"supernatural"}}]},{"id":"baseCultDescription","name":"Base Cult Description","type":"simple","resultType":"description","tags":["cults"],"entries":[{"id":"secretive","value":"operates in absolute secrecy","sets":{"visibility":"hidden"}},{"id":"public","value":"hides behind a respectable public front","sets":{"visibility":"disguised"}},{"id":"isolated","value":"exists in geographic isolation","sets":{"visibility":"remote"}},{"id":"generational","value":"has been active for generations","sets":{"visibility":"established"}}]},{"id":"aggressiveCultDescription","name":"Aggressive Cult Description","type":"simple","extends":"baseCultDescription","resultType":"description","tags":["cults","aggressive"],"description":"Variant cult descriptions for more aggressive, actively dangerous cults.","entries":[{"id":"secretive","value":"operates in absolute secrecy, eliminating all who discover them"},{"id":"public","value":"hides behind a respectable public front while conducting kidnappings"},{"id":"expanding","value":"aggressively recruits and silences those who refuse","weight":2,"sets":{"visibility":"growing"}}]},{"id":"npcMotivations","name":"NPC Motivations","type":"simple","resultType":"trait","tags":["npcs","motivation"],"entries":[{"value":"seeks forbidden knowledge regardless of cost"},{"value":"desperately wants to protect their family"},{"value":"is being blackmailed into cooperation"},{"value":"genuinely believes they are doing good"},{"value":"wants revenge for a past wrong"},{"value":"is addicted to the power the cult provides"},{"value":"fears what will happen if they stop"},{"value":"has been promised immortality"},{"value":"doesn't fully understand what they're involved in"},{"value":"is a true believer awaiting the return of the Old Ones"}]},{"id":"npcSecrets","name":"NPC Secrets","type":"simple","resultType":"trait","tags":["npcs","secrets"],"entries":[{"value":"is not entirely human anymore"},{"value":"has killed to protect the secret"},{"value":"knows where the bodies are buried, literally"},{"value":"is a double agent, but for which side?"},{"value":"has seen what's coming and has accepted it"},{"value":"possesses an artifact they don't fully understand"},{"value":"can hear the voices of the dead"},{"value":"made a deal they deeply regret"},{"value":"is protecting someone else's secret"},{"value":"was the sole survivor of a previous incident"}]},{"id":"d100MadnessEffects","name":"d100 Madness Effects","type":"simple","resultType":"effect","tags":["horror","d100"],"description":"A traditional d100-style table demonstrating range-based entries.","entries":[{"value":"fainting spell  the investigator collapses for {{dice:1d6}} minutes","range":[1,20],"sets":{"severity":"mild","duration":"minutes"}},{"value":"screaming fit  uncontrollable shrieking that alerts everyone nearby","range":[21,35],"sets":{"severity":"moderate","duration":"minutes"}},{"value":"fleeing panic  must run away from the source of horror","range":[36,50],"sets":{"severity":"moderate","duration":"until exhausted"}},{"value":"psychosomatic blindness or deafness","range":[51,60],"sets":{"severity":"severe","duration":"hours"}},{"value":"violent outburst  attacks the nearest person or object","range":[61,70],"sets":{"severity":"severe","duration":"rounds"}},{"value":"catatonic stupor  unresponsive to all stimuli","range":[71,80],"sets":{"severity":"severe","duration":"hours"}},{"value":"babbling incoherently  speaks only in fragments and nonsense","range":[81,90],"sets":{"severity":"severe","duration":"hours to days"}},{"value":"dissociative episode  believes they are someone else entirely","range":[91,99],"sets":{"severity":"extreme","duration":"days"}},{"value":"permanent psychological change  gains a new phobia or obsession","range":[100,100],"sets":{"severity":"permanent","duration":"indefinite"}}]},{"id":"corpseConditions","name":"Corpse Conditions","type":"simple","resultType":"description","tags":["horror","investigation"],"description":"States in which bodies are discovered during investigations.","entries":[{"value":"desiccated, as if drained of all moisture"},{"value":"aged decades beyond possible"},{"value":"partially fused with the surrounding architecture"},{"value":"bearing expressions of absolute terror"},{"value":"arranged in a ritualistic pattern"},{"value":"missing organs that were never surgically removed"},{"value":"covered in symbols carved post-mortem"},{"value":"with hair turned completely white"},{"value":"eyes replaced with polished stones"},{"value":"hands positioned as if warding something off"}]},{"id":"mysteriousSounds","name":"Mysterious Sounds","type":"simple","resultType":"environment","tags":["atmosphere","audio"],"entries":[{"value":"a distant, rhythmic chanting in no known language"},{"value":"footsteps in an empty corridor above"},{"value":"the wet slithering of something large"},{"value":"whispered conversation just below audibility"},{"value":"a child's laughter from an impossible direction"},{"value":"scratching from inside the walls"},{"value":"a melody that no one else seems to hear"},{"value":"the grinding of stone against stone"},{"value":"breathing that matches your own rhythm"},{"value":"a voice calling your name, getting closer"}]}]`),Tj=[{id:"investigatorProfile",name:"Investigator Profile",resultType:"npc",tags:["investigators","generator"],description:"Generates a complete investigator profile with name, occupation, backstory, and psychological details.",shared:{$occupation:"{{investigatorOccupations}}",$backstory:"{{investigatorBackstory}}"},pattern:`## Investigator Profile

**Name:** {{investigatorFirstNames}} {{investigatorSurnames}}

**Occupation:** {{$occupation}}

**Expertise:** {{$occupation.@expertise}}

**Social Standing:** {{$occupation.@socialClass}} class, {{$occupation.@resources}} resources

**Backstory:** {{$backstory}}

**Motivation:** {{$backstory.@motivation}}

**Phobia:** {{investigatorPhobias}}

**Mannerism:** {{investigatorMannerisms}}`},{id:"entityEncounter",name:"Entity Encounter",resultType:"encounter",tags:["entities","encounters"],description:"Generates a detailed encounter with an eldritch entity.",shared:{$entity:"{{eldritchEntityTier}}",$time:"{{timeOfDay}}",$weather:"{{weatherConditions}}"},pattern:`## Entity Encounter

During {{$time}}, under {{$weather}}, the investigators encounter **{{$entity}}**.

**Appearance:** {{$entity.@description}}

**Origin:** {{$entity.@origin}}

**Current Motivation:** {{$entity.@motivation}}

**Evidence of Presence:** {{$entity.@signifier}}

**Threat Level:** {{$entity.@threatLevel}}

**Psychological Impact:** {{sanityEffects}}`},{id:"cultCell",name:"Cult Cell",resultType:"faction",tags:["cults","generator"],description:"Generates details about a local cult cell.",shared:{$leader:"{{cultistRanks}}",$activity:"{{cultActivities}}"},pattern:`## Cult Cell

**Name:** {{cultNames}}

**Description:** {{aggressiveCultDescription}}

**Current Activity:** {{$activity}}

**Urgency:** {{$activity.@urgency}}

**Scale:** {{$activity.@scale}}

### Leadership

**Rank:** {{$leader.@title}} ({{$leader}})

**Knowledge Level:** {{$leader.@knowledge}}

**Dedication:** {{$leader.@dedication}}

### Membership

The cell consists of {{dice:2d6+3}} members:

{{3*unique*cultistRanks|", "}}`},{id:"hauntedLocationDetail",name:"Haunted Location Detail",resultType:"location",tags:["locations","generator"],description:"Generates comprehensive details about a haunted location.",shared:{$location:"{{hauntedLocations}}",$omen:"{{ominousOmens}}"},pattern:`## Haunted Location

**Site:** {{$location}}

**History:** {{$location.@history}}

**Distinctive Feature:** {{$location.@feature}}

**Access:** {{$location.@access}}

**Current Atmosphere:** {{atmosphericMood}}

**Weather:** {{weatherConditions}}

### Recent Omens

{{$omen}}

*Interpretation: {{$omen.@interpretation}}*

### Clues Found Here

{{2*unique*strangeClues|"; "}}`},{id:"forbiddenKnowledge",name:"Forbidden Knowledge Discovery",resultType:"item",tags:["books","artifacts","generator"],description:"Generates a discovery of forbidden texts and artifacts.",shared:{$tome:"{{forbiddenTomes}}",$artifact:"{{cursedArtifacts}}"},pattern:`## Forbidden Discovery

### The Text

**Title:** {{$tome}}

**Author:** {{$tome.@author}}

**Language:** {{$tome.@language}}

**Contents:** {{$tome.@contents}}

**Danger Level:** {{$tome.@danger}}

### The Artifact

**Description:** {{$artifact}}

**Origin:** {{$artifact.@origin}}

**Appearance:** {{$artifact.@appearance}}

**Effect:** {{$artifact.@effect}}`},{id:"investigationScenario",name:"Investigation Scenario",resultType:"encounter",tags:["investigation","scenario"],description:"Generates a complete investigation scenario framework.",shared:{$trigger:"{{investigationTriggers}}",$setting:"{{investigationSettings}}",$entity:"{{eldritchEntityTier}}",$location:"{{hauntedLocations}}",threatRating:"{{dice:1d10}}"},pattern:`## Investigation: {{$setting}}

**Cosmic Threat Level:** {{$threatRating}}/10

### The Hook

{{$trigger}}

*Personal Investment:* {{$trigger.@personal}}

*Initial Urgency:* {{$trigger.@urgency}}

### The Setting

**Location:** {{$setting}}

{{$setting.@description}}

**Available Resources:** {{$setting.@resources}}

**Inherent Dangers:** {{$setting.@danger}}

### The Threat

**Entity:** {{$entity}}

{{$entity.@description}}

**Motivation:** {{$entity.@motivation}}

### Key Location

**Primary Site:** {{$location}}

**History:** {{$location.@history}}

**Notable Feature:** {{$location.@feature}}

### Complications

{{2*unique*complications|"; "}}

### Clues

{{3*unique*strangeClues|"; "}}

### Atmosphere

*The investigation proceeds under an atmosphere that is {{atmosphericMood}}`},{id:"fullInvestigation",name:"Full Investigation Generator",resultType:"encounter",tags:["investigation","complete"],description:"Generates a comprehensive investigation with all elements.",shared:{$hook:"{{investigationTriggers}}",$setting:"{{investigationSettings}}",$primaryEntity:"{{eldritchEntityTier}}",$cult:"{{cultNames}}",$cultActivity:"{{cultActivities}}",$location1:"{{hauntedLocations}}",$location2:"{{hauntedLocations}}",$tome:"{{forbiddenTomes}}",$artifact:"{{cursedArtifacts}}",$revelation:"{{finalRevelations}}",investigatorCount:"{{dice:1d4+2}}"},pattern:`# Investigation Dossier

## Overview

**Setting:** {{$setting}}

**Recommended Investigators:** {{$investigatorCount}}

**Atmospheric Tone:** {{atmosphericMood}}

---

## Act I: The Hook

{{$hook}}

*Urgency Level:* {{$hook.@urgency}}

### Initial Clues

{{2*unique*strangeClues|"; "}}

---

## Act II: Investigation

### Primary Location

**{{$location1}}**

*History:* {{$location1.@history}}

*Notable Feature:* {{$location1.@feature}}

*Current Weather:* {{weatherConditions}}

### Secondary Location

**{{$location2}}**

*History:* {{$location2.@history}}

*Notable Feature:* {{$location2.@feature}}

### The Cult

**{{$cult}}**

*Current Activity:* {{$cultActivity}}

*Scale:* {{$cultActivity.@scale}}

*Leader:* {{$cultLeader.@title}}  Dedication: {{$cultLeader.@dedication}}

### Complications

{{3*unique*complications|"; "}}

### Dead Ends

{{2*unique*deadEnds|"; "}}

---

## Act III: The Truth

### The Entity

**{{$primaryEntity}}**

{{$primaryEntity.@description}}

*Origin:* {{$primaryEntity.@origin}}

*Motivation:* {{$primaryEntity.@motivation}}

*Signs of Presence:* {{$primaryEntity.@signifier}}

### Forbidden Knowledge

**Text:** {{$tome}}

*Contents:* {{$tome.@contents}}

**Artifact:** {{$artifact}}

*Effect:* {{$artifact.@effect}}

### Witnessed Ritual

{{ritualsObserved}}

### Omens Before the Climax

{{2*unique*ominousOmens|"; "}}

---

## The Revelation

*{{$revelation}}*

**Tone:** {{$revelation.@tone}}

---

## Aftermath

### Psychological Toll

{{2*unique*sanityEffects|"; "}}

### What Remains

The investigation concludes, but {{$revelation}}`},{id:"npcGenerator",name:"Supporting NPC Generator",resultType:"npc",tags:["npcs","generator"],description:"Generates a supporting NPC with motivation and secrets.",pattern:`## Supporting Character

**Name:** {{investigatorFirstNames}} {{investigatorSurnames}}

**Role:** {{investigatorOccupations}}

**Motivation:** {{npcMotivations}}

**Secret:** {{npcSecrets}}

**Reaction When Questioned:** {{witnessReactions}}`},{id:"multipleInvestigators",name:"Investigation Team",resultType:"npc",tags:["investigators","team"],description:"Generates a team of investigators with distinct roles.",shared:{$lead:"{{investigatorOccupations}}",$support1:"{{investigatorOccupations}}",$support2:"{{investigatorOccupations}}"},pattern:`## Investigation Team

### Lead Investigator

**{{investigatorFirstNames}} {{investigatorSurnames}}**, {{$lead}}

*Expertise:* {{$lead.@expertise}}

*Backstory:* {{investigatorBackstory}}

### Support Investigator 1

**{{investigatorFirstNames}} {{investigatorSurnames}}**, {{$support1}}

*Expertise:* {{$support1.@expertise}}

*Phobia:* {{investigatorPhobias}}

### Support Investigator 2

**{{investigatorFirstNames}} {{investigatorSurnames}}**, {{$support2}}

*Expertise:* {{$support2.@expertise}}

*Mannerism:* {{investigatorMannerisms}}`},{id:"quickEncounter",name:"Quick Encounter",resultType:"encounter",tags:["encounters","quick"],description:"Generates a brief encounter description.",pattern:"During {{timeOfDay}}, in {{hauntedLocations}}, the investigators witness {{ominousOmens}}. {{weatherConditions}} adds to the {{atmosphericMood}} atmosphere."},{id:"crimeScene",name:"Crime Scene Generator",resultType:"location",tags:["investigation","crime"],description:"Generates a detailed crime scene with multiple clues and atmospheric elements.",shared:{bodyCount:"{{dice:1d3}}",clueCount:"{{math:$bodyCount + 2}}"},pattern:`## Crime Scene Report

**Bodies Found:** {{$bodyCount}}

**Clues Expected:** {{$clueCount}}

### Victim Conditions

{{3*corpseConditions}}

### Auditory Disturbances

{{2*mysteriousSounds}}

### Physical Evidence

{{3*strangeClues}}

### Atmospheric Conditions

*The scene is {{atmosphericMood}}, with {{weatherConditions}}.*`},{id:"madnessEvent",name:"Madness Event",resultType:"effect",tags:["horror","sanity"],description:"Generates a madness event using the d100 table.",pattern:`## Sanity Break

**Effect:** {{d100MadnessEffects}}

**Severity:** Consult the d100 Madness Effects table for detailed effects.

### Sanity Threshold

Cosmic threat level is {{$cosmicThreatLevel}}, sanity threshold is {{$sanityThreshold}}.`}],Dj={metadata:Nj,variables:Cj,shared:Sj,tables:Ej,templates:Tj},jj={name:"Fantasy World Generator",namespace:"rolldeo.fantasy.world",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A **fantasy** world generator for creating characters, locations, items, and story elements. Focuses on descriptive and cosmetic details for immersive worldbuilding.",tags:["fantasy","worldbuilding","characters","locations","items","descriptive"],source:{license:"CC0-1.0",copyright:"Rolldeo - Free for any use"}},Aj={worldName:"The Shattered Realms",currentAge:"Third Age",defaultSeparator:", "},_j={timeOfDay:"{{timesOfDay}}",currentWeather:"{{weatherConditions}}",moonPhase:"{{moonPhases}}",$protagonist:"{{characterRaces}}",$deuteragonist:"{{characterRaces}}"},Rj=JSON.parse(`[{"id":"timesOfDay","name":"Times of Day","type":"simple","description":"Various times of day for scene-setting.","resultType":"time","tags":["time","atmosphere"],"entries":[{"value":"dawn, when the first light touches the horizon"},{"value":"early morning, with dew still fresh on the grass"},{"value":"mid-morning, as the world awakens fully"},{"value":"high noon, under the blazing sun"},{"value":"afternoon, in the lazy warmth"},{"value":"late afternoon, as shadows begin to lengthen"},{"value":"dusk, when the sky burns orange and purple"},{"value":"twilight, in the liminal hour between day and night"},{"value":"early evening, under the first stars"},{"value":"deep night, beneath a canopy of stars"},{"value":"the witching hour, when the world holds its breath"},{"value":"the hour before dawn, in the coldest darkness"}]},{"id":"moonPhases","name":"Moon Phases","type":"simple","resultType":"environment","hidden":true,"entries":[{"value":"a new moon","sets":{"visibility":"dark","omen":"beginnings"}},{"value":"a waxing crescent","sets":{"visibility":"dim","omen":"growth"}},{"value":"a first quarter moon","sets":{"visibility":"moderate","omen":"decisions"}},{"value":"a waxing gibbous","sets":{"visibility":"bright","omen":"refinement"}},{"value":"a full moon","sets":{"visibility":"brilliant","omen":"culmination"}},{"value":"a waning gibbous","sets":{"visibility":"bright","omen":"gratitude"}},{"value":"a last quarter moon","sets":{"visibility":"moderate","omen":"release"}},{"value":"a waning crescent","sets":{"visibility":"dim","omen":"rest"}}]},{"id":"weatherConditions","name":"Weather Conditions","type":"simple","resultType":"weather","tags":["environment","atmosphere"],"defaultSets":{"intensity":"moderate","mood":"neutral"},"entries":[{"id":"clear","value":"clear skies","weight":4,"sets":{"mood":"hopeful"}},{"id":"partlyCloudy","value":"partly cloudy with drifting clouds","weight":3},{"id":"overcast","value":"overcast with a blanket of grey","weight":2,"sets":{"mood":"somber"}},{"id":"lightRain","value":"a gentle drizzle","weight":2,"sets":{"intensity":"light","mood":"melancholy"}},{"id":"heavyRain","value":"heavy rain drumming against every surface","weight":1,"sets":{"intensity":"heavy","mood":"dramatic"}},{"id":"thunderstorm","value":"a raging thunderstorm with lightning splitting the sky","weight":1,"sets":{"intensity":"severe","mood":"ominous"}},{"id":"fog","value":"thick fog obscuring the distance","weight":1,"sets":{"mood":"mysterious"}},{"id":"mist","value":"a soft mist hanging in the air","weight":2,"sets":{"intensity":"light","mood":"ethereal"}},{"id":"wind","value":"strong winds howling through every gap","weight":1,"sets":{"mood":"restless"}}]},{"id":"severeWeather","name":"Severe Weather","type":"simple","extends":"weatherConditions","description":"More dramatic weather events for intense scenes.","entries":[{"id":"clear","weight":0},{"id":"partlyCloudy","weight":0},{"id":"thunderstorm","value":"an apocalyptic tempest with winds that could fell trees","weight":3,"sets":{"intensity":"catastrophic","mood":"terrifying"}},{"id":"blizzard","value":"a blinding blizzard of ice and snow","weight":2,"sets":{"intensity":"severe","mood":"desolate"}},{"id":"sandstorm","value":"a choking sandstorm that blocks out the sun","weight":1,"sets":{"intensity":"severe","mood":"oppressive"}}]},{"id":"characterRaces","name":"Character Races","type":"simple","resultType":"trait","tags":["character","race"],"entries":[{"id":"human","value":"Human","weight":5,"description":"Adaptable and ambitious, humans are found in every corner of the world.","sets":{"firstName":"{{humanFirstNames}}","lastName":"{{humanLastNames}}","lifespan":"70-90 years","physique":"{{humanPhysiques}}"}},{"id":"elf","value":"Elf","weight":2,"description":"Ancient and graceful, elves possess an ethereal beauty and deep connection to magic.","sets":{"firstName":"{{elfFirstNames}}","lastName":"{{elfLastNames}}","lifespan":"700-900 years","physique":"{{elfPhysiques}}"}},{"id":"dwarf","value":"Dwarf","weight":2,"description":"Stout and steadfast, dwarves are master craftsmen with an unshakeable resolve.","sets":{"firstName":"{{dwarfFirstNames}}","lastName":"{{dwarfLastNames}}","lifespan":"300-400 years","physique":"{{dwarfPhysiques}}"}},{"id":"halfling","value":"Halfling","weight":2,"description":"Small but spirited, halflings love comfort, good food, and unexpected adventures.","sets":{"firstName":"{{halflingFirstNames}}","lastName":"{{halflingLastNames}}","lifespan":"90-120 years","physique":"{{halflingPhysiques}}"}},{"id":"orc","value":"Orc","weight":1,"description":"Proud and powerful, orcs value strength, honor, and the bonds of clan.","sets":{"firstName":"{{orcFirstNames}}","lastName":"{{orcLastNames}}","lifespan":"50-70 years","physique":"{{orcPhysiques}}"}},{"id":"tiefling","value":"Tiefling","weight":1,"description":"Marked by infernal heritage, tieflings bear the burden of suspicion but possess fierce independence.","sets":{"firstName":"{{tieflingFirstNames}}","lastName":"{{tieflingLastNames}}","lifespan":"80-110 years","physique":"{{tieflingPhysiques}}"}}]},{"id":"humanFirstNames","name":"Human First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Aldric"},{"value":"Beatrix"},{"value":"Corwin"},{"value":"Delia"},{"value":"Edmund"},{"value":"Fiona"},{"value":"Garrett"},{"value":"Helena"},{"value":"Ivan"},{"value":"Johanna"},{"value":"Kendrick"},{"value":"Lydia"},{"value":"Marcus"},{"value":"Nadia"},{"value":"Owen"},{"value":"Petra"},{"value":"Roland"},{"value":"Sybil"},{"value":"Theron"},{"value":"Vivian"}]},{"id":"humanLastNames","name":"Human Last Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ashford"},{"value":"Blackwood"},{"value":"Cromwell"},{"value":"Dawnridge"},{"value":"Everhart"},{"value":"Fairfax"},{"value":"Greymoor"},{"value":"Hartwell"},{"value":"Ironwood"},{"value":"Kingsley"},{"value":"Lockwood"},{"value":"Mercer"},{"value":"Northcott"},{"value":"Oakshield"},{"value":"Pemberton"},{"value":"Ravencrest"},{"value":"Silverstone"},{"value":"Thornbury"},{"value":"Underhill"},{"value":"Whitmore"}]},{"id":"humanPhysiques","name":"Human Physiques","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"tall and broad-shouldered"},{"value":"lean and wiry"},{"value":"stocky and muscular"},{"value":"average height with an athletic build"},{"value":"slight and nimble"},{"value":"heavyset and powerful"},{"value":"graceful and well-proportioned"},{"value":"compact but sturdy"}]},{"id":"elfFirstNames","name":"Elf First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Aelindra"},{"value":"Caelum"},{"value":"Elowen"},{"value":"Faerindel"},{"value":"Galadrien"},{"value":"Ilmaris"},{"value":"Kelaryn"},{"value":"Loreleth"},{"value":"Miravel"},{"value":"Naelithra"},{"value":"Orelion"},{"value":"Syllana"},{"value":"Thandril"},{"value":"Vaelora"},{"value":"Ylindra"},{"value":"Zephyrine"}]},{"id":"elfLastNames","name":"Elf Last Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Dawnwhisper"},{"value":"Moonveil"},{"value":"Starweaver"},{"value":"Silverleaf"},{"value":"Nightbreeze"},{"value":"Sunsorrow"},{"value":"Mistwalker"},{"value":"Thornwood"},{"value":"Crystalsong"},{"value":"Shadowmere"},{"value":"Goldenbough"},{"value":"Winterbloom"}]},{"id":"elfPhysiques","name":"Elf Physiques","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"tall and willowy with an otherworldly grace"},{"value":"slender and elegant, moving like flowing water"},{"value":"lithe and agile with dancer's poise"},{"value":"ethereally beautiful with sharp, angular features"},{"value":"delicate-seeming but with hidden strength"},{"value":"tall and statuesque with perfect posture"}]},{"id":"dwarfFirstNames","name":"Dwarf First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Borin"},{"value":"Dagna"},{"value":"Gimrik"},{"value":"Helga"},{"value":"Kragmar"},{"value":"Magna"},{"value":"Thorin"},{"value":"Brynhild"},{"value":"Durak"},{"value":"Freya"},{"value":"Grundar"},{"value":"Ingrid"},{"value":"Nori"},{"value":"Sigrun"},{"value":"Ulfgar"},{"value":"Valdis"}]},{"id":"dwarfLastNames","name":"Dwarf Last Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ironforge"},{"value":"Stonehammer"},{"value":"Goldvein"},{"value":"Deepdelver"},{"value":"Bronzebeard"},{"value":"Darkmine"},{"value":"Rubyfoot"},{"value":"Mountainheart"},{"value":"Coalblack"},{"value":"Silveraxe"},{"value":"Gemcutter"},{"value":"Forgefire"}]},{"id":"dwarfPhysiques","name":"Dwarf Physiques","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"broad and barrel-chested with arms like tree trunks"},{"value":"short but incredibly dense with muscle"},{"value":"stocky and solid as carved stone"},{"value":"compact and powerful with calloused hands"},{"value":"wide-shouldered with a thick neck"},{"value":"stout and sturdy with an impressive beard"}]},{"id":"halflingFirstNames","name":"Halfling First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Bilbo"},{"value":"Cora"},{"value":"Drogo"},{"value":"Esmeralda"},{"value":"Finn"},{"value":"Garnet"},{"value":"Hilda"},{"value":"Jasper"},{"value":"Lavender"},{"value":"Milo"},{"value":"Nettle"},{"value":"Otis"},{"value":"Primrose"},{"value":"Rufus"},{"value":"Tansy"},{"value":"Willow"}]},{"id":"halflingLastNames","name":"Halfling Last Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Goodbarrel"},{"value":"Underbough"},{"value":"Tealeaf"},{"value":"Bramblewood"},{"value":"Honeycomb"},{"value":"Lightfoot"},{"value":"Proudfoot"},{"value":"Thorngage"},{"value":"Appleblossom"},{"value":"Burrows"},{"value":"Greenhill"},{"value":"Tosscobble"}]},{"id":"halflingPhysiques","name":"Halfling Physiques","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"small and round-faced with rosy cheeks"},{"value":"tiny but surprisingly quick on their feet"},{"value":"plump and comfortable-looking"},{"value":"small and nimble with clever fingers"},{"value":"diminutive but hearty"},{"value":"petite with an infectious smile"}]},{"id":"orcFirstNames","name":"Orc First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Azog"},{"value":"Brukka"},{"value":"Drekhan"},{"value":"Gashnak"},{"value":"Grumsha"},{"value":"Karza"},{"value":"Mograth"},{"value":"Nazgrel"},{"value":"Ogthar"},{"value":"Rukka"},{"value":"Shara"},{"value":"Thokk"},{"value":"Ugrak"},{"value":"Vazhra"},{"value":"Yaghra"},{"value":"Zurka"}]},{"id":"orcLastNames","name":"Orc Last Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Skullcrusher"},{"value":"Bloodfang"},{"value":"Ironjaw"},{"value":"Stormrage"},{"value":"Bonegrinder"},{"value":"Warbringer"},{"value":"Deathbringer"},{"value":"Thunderfist"},{"value":"Stonehide"},{"value":"Battleborn"},{"value":"Firebrand"},{"value":"Wolfcaller"}]},{"id":"orcPhysiques","name":"Orc Physiques","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"massive and heavily muscled with prominent tusks"},{"value":"tall and powerfully built with green-grey skin"},{"value":"broad and intimidating with ritual scars"},{"value":"towering and thick-limbed with a proud bearing"},{"value":"muscular and battle-hardened with weathered skin"},{"value":"imposing and fierce-looking with tribal tattoos"}]},{"id":"tieflingFirstNames","name":"Tiefling First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Amnon"},{"value":"Criella"},{"value":"Damakos"},{"value":"Euphoria"},{"value":"Fear"},{"value":"Gladness"},{"value":"Hex"},{"value":"Idealis"},{"value":"Kallista"},{"value":"Leucis"},{"value":"Makaria"},{"value":"Nemeia"},{"value":"Poetry"},{"value":"Reverence"},{"value":"Sorrow"},{"value":"Torment"}]},{"id":"tieflingLastNames","name":"Tiefling Last Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ashfall"},{"value":"Duskwalker"},{"value":"Ember"},{"value":"Hellborne"},{"value":"Nighthollow"},{"value":"Shadowmend"},{"value":"Soulfire"},{"value":"Thornheart"},{"value":"Voidtouched"},{"value":"Wrathborn"},{"value":"Grimshaw"},{"value":"Brimstone"}]},{"id":"tieflingPhysiques","name":"Tiefling Physiques","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"lean and angular with curved horns and a tail"},{"value":"lithe with reddish skin and glowing eyes"},{"value":"striking and exotic with pointed teeth"},{"value":"tall and unsettling with solid-colored eyes"},{"value":"elegant but otherworldly with subtle scales"},{"value":"graceful with an aura of barely-contained fire"}]},{"id":"occupations","name":"Occupations","type":"simple","resultType":"trait","tags":["character","profession"],"defaultSets":{"socialClass":"common"},"entries":[{"value":"blacksmith","weight":3,"sets":{"workplace":"{{smithyDescriptions}}","tools":"hammer and anvil"}},{"value":"merchant","weight":3,"sets":{"workplace":"{{shopDescriptions}}","tools":"scales and ledger","socialClass":"middle"}},{"value":"farmer","weight":4,"sets":{"workplace":"{{farmDescriptions}}","tools":"plow and scythe"}},{"value":"innkeeper","weight":2,"sets":{"workplace":"{{tavernDescriptions}}","tools":"keys and tankards"}},{"value":"healer","weight":2,"sets":{"workplace":"a small clinic filled with herbs","tools":"mortar and pestle"}},{"value":"scholar","weight":1,"sets":{"workplace":"{{libraryDescriptions}}","tools":"quill and parchment","socialClass":"middle"}},{"value":"guard","weight":2,"sets":{"workplace":"the watchtower","tools":"spear and shield"}},{"value":"sailor","weight":2,"sets":{"workplace":"{{harborDescriptions}}","tools":"rope and compass"}},{"value":"entertainer","weight":2,"sets":{"workplace":"{{tavernDescriptions}}","tools":"instrument or juggling balls"}},{"value":"noble","weight":1,"sets":{"workplace":"{{manorDescriptions}}","tools":"signet ring and fine clothes","socialClass":"upper"}},{"value":"hunter","weight":2,"sets":{"workplace":"the wilderness","tools":"bow and traps"}},{"value":"apothecary","weight":1,"sets":{"workplace":"{{shopDescriptions}}","tools":"vials and dried herbs","socialClass":"middle"}}]},{"id":"personalityTraits","name":"Personality Traits","type":"simple","resultType":"trait","tags":["character","personality"],"entries":[{"value":"fiercely loyal to those they consider friends"},{"value":"quick to laugh and slow to anger"},{"value":"deeply suspicious of strangers"},{"value":"endlessly curious about the world"},{"value":"haunted by a past they rarely speak of"},{"value":"generous to a fault, sometimes to their detriment"},{"value":"calculating and always planning three steps ahead"},{"value":"hot-tempered but quick to forgive"},{"value":"quietly observant, missing nothing"},{"value":"cheerfully optimistic even in dark times"},{"value":"melancholic and prone to brooding"},{"value":"charming and silver-tongued"},{"value":"honest to the point of bluntness"},{"value":"secretive and guarded about their past"},{"value":"bold and reckless, always the first into danger"},{"value":"patient and methodical in all things"}]},{"id":"physicalQuirks","name":"Physical Quirks","type":"simple","resultType":"description","tags":["character","appearance"],"entries":[{"value":"a prominent scar across their {{scarLocations}}"},{"value":"heterochromatic eyesone {{eyeColors}}, one {{eyeColors}}"},{"value":"a distinctive birthmark shaped like {{birthmarkShapes}}"},{"value":"prematurely grey hair despite their age"},{"value":"a slight limp from an old injury"},{"value":"calloused hands that speak of hard work"},{"value":"an unusual tattoo depicting {{tattooSubjects}}"},{"value":"a missing {{missingDigits}}"},{"value":"a nervous habit of {{nervousHabits}}"},{"value":"unusually bright {{eyeColors}} eyes"},{"value":"a voice that's unexpectedly {{voiceQualities}}"},{"value":"always smelling faintly of {{scents}}"}]},{"id":"scarLocations","name":"Scar Locations","type":"simple","hidden":true,"entries":[{"value":"left cheek"},{"value":"right cheek"},{"value":"forehead"},{"value":"chin"},{"value":"neck"},{"value":"left hand"},{"value":"right hand"}]},{"id":"eyeColors","name":"Eye Colors","type":"simple","hidden":true,"entries":[{"value":"deep brown"},{"value":"striking blue"},{"value":"forest green"},{"value":"warm amber"},{"value":"steel grey"},{"value":"pale violet"},{"value":"golden"},{"value":"nearly black"}]},{"id":"birthmarkShapes","name":"Birthmark Shapes","type":"simple","hidden":true,"entries":[{"value":"a crescent moon"},{"value":"a star"},{"value":"a bird in flight"},{"value":"an ancient rune"},{"value":"a flame"},{"value":"a crown"}]},{"id":"tattooSubjects","name":"Tattoo Subjects","type":"simple","hidden":true,"entries":[{"value":"a coiling serpent"},{"value":"ancestral runes"},{"value":"a flowering vine"},{"value":"a skull wreathed in flames"},{"value":"a sailing ship"},{"value":"a wolf howling at the moon"},{"value":"interlocking geometric patterns"},{"value":"a loved one's name"}]},{"id":"missingDigits","name":"Missing Digits","type":"simple","hidden":true,"entries":[{"value":"finger on their left hand"},{"value":"finger on their right hand"},{"value":"part of their left ear"},{"value":"part of their right ear"}]},{"id":"nervousHabits","name":"Nervous Habits","type":"simple","hidden":true,"entries":[{"value":"tapping their fingers"},{"value":"touching their face"},{"value":"adjusting their clothing"},{"value":"humming softly"},{"value":"cracking their knuckles"},{"value":"pacing back and forth"}]},{"id":"voiceQualities","name":"Voice Qualities","type":"simple","hidden":true,"entries":[{"value":"deep and resonant"},{"value":"high and melodic"},{"value":"raspy and worn"},{"value":"soft and soothing"},{"value":"loud and booming"},{"value":"quiet and measured"}]},{"id":"scents","name":"Scents","type":"simple","hidden":true,"entries":[{"value":"woodsmoke"},{"value":"lavender"},{"value":"the sea"},{"value":"old books"},{"value":"fresh bread"},{"value":"pine"},{"value":"exotic spices"},{"value":"forge fires"}]},{"id":"secrets","name":"Character Secrets","type":"simple","resultType":"hook","tags":["character","story"],"entries":[{"value":"is actually the long-lost heir to a minor noble house"},{"value":"once committed a crime they deeply regret"},{"value":"is hiding from someone powerful and dangerous"},{"value":"possesses knowledge of a treasure's location"},{"value":"has made a bargain they're ashamed of"},{"value":"is not who they claim to be"},{"value":"witnessed something they were never meant to see"},{"value":"carries a burden of guilt for a death"},{"value":"is secretly working for an organization"},{"value":"has a forbidden love"},{"value":"knows a dangerous secret about a powerful figure"},{"value":"is searching for a lost family member"}]},{"id":"motivations","name":"Character Motivations","type":"simple","resultType":"trait","tags":["character","story"],"entries":[{"value":"seeks revenge against those who wronged them"},{"value":"desires wealth to lift their family from poverty"},{"value":"yearns for adventure and excitement"},{"value":"searches for a cure for a loved one's illness"},{"value":"hopes to restore their family's lost honor"},{"value":"wants to prove themselves worthy"},{"value":"seeks knowledge and understanding"},{"value":"desires to protect the innocent"},{"value":"hopes to find a place they truly belong"},{"value":"works to atone for past sins"},{"value":"dreams of building something that will last"},{"value":"simply wants a quiet, peaceful life"}]},{"id":"settlementTypes","name":"Settlement Types","type":"simple","resultType":"location","tags":["location","settlement"],"entries":[{"id":"hamlet","value":"Hamlet","weight":3,"sets":{"size":"tiny","population":"{{dice:2d6*10}}","features":"{{hamletFeatures}}","atmosphere":"{{ruralAtmospheres}}"}},{"id":"village","value":"Village","weight":4,"sets":{"size":"small","population":"{{dice:3d6*50}}","features":"{{villageFeatures}}","atmosphere":"{{ruralAtmospheres}}"}},{"id":"town","value":"Town","weight":2,"sets":{"size":"medium","population":"{{dice:2d6*500}}","features":"{{townFeatures}}","atmosphere":"{{urbanAtmospheres}}"}},{"id":"city","value":"City","weight":1,"sets":{"size":"large","population":"{{dice:3d6*2000}}","features":"{{cityFeatures}}","atmosphere":"{{urbanAtmospheres}}"}}]},{"id":"hamletFeatures","name":"Hamlet Features","type":"simple","hidden":true,"entries":[{"value":"a communal well at its center"},{"value":"a small shrine to local spirits"},{"value":"one general store that sells everything"},{"value":"farmland stretching in every direction"}]},{"id":"villageFeatures","name":"Village Features","type":"simple","hidden":true,"entries":[{"value":"a central square with a weekly market"},{"value":"a temple dedicated to {{deities}}"},{"value":"a mill powered by the nearby river"},{"value":"an ancient oak where elders gather"},{"value":"a tavern that serves as the social hub"}]},{"id":"townFeatures","name":"Town Features","type":"simple","hidden":true,"entries":[{"value":"a walled center with guarded gates"},{"value":"a bustling marketplace with diverse goods"},{"value":"multiple temples and shrines"},{"value":"a guild hall where artisans gather"},{"value":"a mayor's manor overlooking the square"}]},{"id":"cityFeatures","name":"City Features","type":"simple","hidden":true,"entries":[{"value":"towering walls and multiple districts"},{"value":"a grand palace or castle at its heart"},{"value":"an extensive sewer system beneath the streets"},{"value":"a famous academy or university"},{"value":"a harbor teeming with ships from distant lands"},{"value":"districts segregated by wealth and trade"}]},{"id":"ruralAtmospheres","name":"Rural Atmospheres","type":"simple","hidden":true,"entries":[{"value":"peaceful and slow-paced"},{"value":"tight-knit but suspicious of outsiders"},{"value":"hardworking and honest"},{"value":"isolated and self-sufficient"},{"value":"traditional and set in old ways"}]},{"id":"urbanAtmospheres","name":"Urban Atmospheres","type":"simple","hidden":true,"entries":[{"value":"bustling and cosmopolitan"},{"value":"divided by stark class differences"},{"value":"vibrant with culture and commerce"},{"value":"crowded and chaotic"},{"value":"prosperous but with dark undercurrents"}]},{"id":"deities","name":"Deities","type":"simple","resultType":"name","tags":["religion","lore"],"entries":[{"value":"Solara, Goddess of the Sun and Justice","sets":{"domain":"sun","symbol":"a radiant sun"}},{"value":"Luneth, God of the Moon and Dreams","sets":{"domain":"moon","symbol":"a crescent moon"}},{"value":"Terrath, God of Earth and Endurance","sets":{"domain":"earth","symbol":"a mountain"}},{"value":"Aquileth, Goddess of Seas and Change","sets":{"domain":"water","symbol":"a wave"}},{"value":"Pyrios, God of Fire and Passion","sets":{"domain":"fire","symbol":"a flame"}},{"value":"Zephyra, Goddess of Wind and Freedom","sets":{"domain":"air","symbol":"a feather"}},{"value":"Mortivus, God of Death and Endings","sets":{"domain":"death","symbol":"a skull"}},{"value":"Vitalis, Goddess of Life and Healing","sets":{"domain":"life","symbol":"a tree"}}]},{"id":"settlementProblems","name":"Settlement Problems","type":"simple","resultType":"hook","tags":["location","story"],"entries":[{"value":"raids by bandits have been increasing"},{"value":"a mysterious illness is spreading"},{"value":"the local water source has become tainted"},{"value":"strange disappearances occur at night"},{"value":"a feud between two families threatens peace"},{"value":"crops are failing for unknown reasons"},{"value":"an oppressive tax collector bleeds them dry"},{"value":"something lurks in the nearby wilderness"},{"value":"refugees from a distant conflict are arriving"},{"value":"a sacred site has been desecrated"}]},{"id":"tavernDescriptions","name":"Tavern Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"a cozy tavern with a roaring fireplace and worn wooden beams"},{"value":"a rowdy alehouse filled with laughter and the smell of spilled ale"},{"value":"an upscale inn with polished floors and discrete private rooms"},{"value":"a dimly lit establishment where deals are made in shadowed corners"},{"value":"a welcoming tavern decorated with hunting trophies and old maps"}]},{"id":"shopDescriptions","name":"Shop Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"a cluttered shop with goods stacked floor to ceiling"},{"value":"a tidy storefront with carefully displayed wares"},{"value":"a dusty establishment that seems older than the town itself"},{"value":"a bright and welcoming shop with a bell above the door"}]},{"id":"smithyDescriptions","name":"Smithy Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"a sweltering forge filled with the ring of hammer on steel"},{"value":"a well-organized smithy with tools hung precisely on the walls"},{"value":"a smoky workshop with projects in various stages of completion"}]},{"id":"farmDescriptions","name":"Farm Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"sprawling fields with a modest farmhouse"},{"value":"a well-tended homestead with chickens in the yard"},{"value":"rolling farmland with a weathered barn"}]},{"id":"libraryDescriptions","name":"Library Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"a dusty archive filled with ancient tomes"},{"value":"a quiet study with books lining every wall"},{"value":"a scholarly sanctuary smelling of old paper and ink"}]},{"id":"harborDescriptions","name":"Harbor Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"a busy dock where ships come and go with the tides"},{"value":"a weather-worn pier where sailors swap stories"},{"value":"a crowded harbor smelling of salt and fish"}]},{"id":"manorDescriptions","name":"Manor Descriptions","type":"simple","resultType":"description","hidden":true,"entries":[{"value":"an elegant manor house with manicured gardens"},{"value":"a stately estate overlooking the surrounding lands"},{"value":"an ancestral hall filled with portraits and heirlooms"}]},{"id":"wildernessLocations","name":"Wilderness Locations","type":"simple","resultType":"location","tags":["location","wilderness"],"entries":[{"value":"an ancient forest where the trees grow impossibly tall","sets":{"terrain":"forest","danger":"moderate"}},{"value":"a misty swamp where the ground shifts beneath your feet","sets":{"terrain":"swamp","danger":"high"}},{"value":"rolling hills dotted with standing stones","sets":{"terrain":"hills","danger":"low"}},{"value":"a mountain pass carved by centuries of travelers","sets":{"terrain":"mountain","danger":"moderate"}},{"value":"a sunlit meadow filled with wildflowers","sets":{"terrain":"plains","danger":"low"}},{"value":"a dark cave system that descends into the earth","sets":{"terrain":"underground","danger":"high"}},{"value":"a frozen tundra where the wind never stops","sets":{"terrain":"arctic","danger":"high"}},{"value":"a parched desert with dunes like frozen waves","sets":{"terrain":"desert","danger":"high"}},{"value":"a coastal cliff overlooking a churning sea","sets":{"terrain":"coastal","danger":"moderate"}},{"value":"a peaceful river valley with fertile banks","sets":{"terrain":"river","danger":"low"}}]},{"id":"dungeonRooms","name":"Dungeon Rooms","type":"simple","resultType":"location","tags":["dungeon","location"],"entries":[{"value":"a vaulted chamber with pillars carved like twisted figures"},{"value":"a flooded room with water up to the knees"},{"value":"a vast hall with a collapsed ceiling open to the sky"},{"value":"a narrow corridor lined with ancient murals"},{"value":"a circular room with a pit in the center"},{"value":"a library with rotting books and scattered papers"},{"value":"a throne room with a dust-covered seat of power"},{"value":"a crypt with rows of stone sarcophagi"},{"value":"a torture chamber with rusted implements"},{"value":"a natural cavern connected to worked stone passages"}]},{"id":"dungeonFeatures","name":"Dungeon Features","type":"simple","resultType":"description","tags":["dungeon"],"entries":[{"value":"strange symbols are scratched into the walls"},{"value":"a cold draft blows from somewhere deeper"},{"value":"the remains of a camp suggest someone was here recently"},{"value":"water drips constantly, creating echoing sounds"},{"value":"phosphorescent moss provides an eerie glow"},{"value":"old bones are scattered across the floor"},{"value":"a partially collapsed tunnel blocks one direction"},{"value":"torch sconces line the walls, long since burned out"},{"value":"the air smells of dust and decay"},{"value":"claw marks score the stone floor"}]},{"id":"itemConditions","name":"Item Conditions","type":"simple","resultType":"description","tags":["items"],"hidden":true,"entries":[{"value":"pristine and well-maintained","sets":{"quality":"excellent"}},{"value":"lightly used with minor wear","sets":{"quality":"good"}},{"value":"showing signs of age but serviceable","sets":{"quality":"fair"}},{"value":"battered and worn but functional","sets":{"quality":"poor"}},{"value":"barely holding together","sets":{"quality":"terrible"}}]},{"id":"weaponDescriptors","name":"Weapon Descriptors","type":"simple","resultType":"description","tags":["items","weapons"],"hidden":true,"entries":[{"value":"elegantly crafted"},{"value":"wickedly curved"},{"value":"battle-worn"},{"value":"ornately decorated"},{"value":"brutally functional"},{"value":"ancient and weathered"},{"value":"masterfully balanced"},{"value":"roughly forged"}]},{"id":"weaponTypes","name":"Weapon Types","type":"simple","resultType":"item","tags":["items","weapons"],"entries":[{"value":"longsword","sets":{"category":"sword","handed":"one or two"}},{"value":"shortsword","sets":{"category":"sword","handed":"one"}},{"value":"battleaxe","sets":{"category":"axe","handed":"one or two"}},{"value":"war hammer","sets":{"category":"hammer","handed":"one or two"}},{"value":"spear","sets":{"category":"polearm","handed":"two"}},{"value":"longbow","sets":{"category":"bow","handed":"two"}},{"value":"dagger","sets":{"category":"blade","handed":"one"}},{"value":"mace","sets":{"category":"bludgeon","handed":"one"}}]},{"id":"armorTypes","name":"Armor Types","type":"simple","resultType":"item","tags":["items","armor"],"entries":[{"value":"leather armor","sets":{"category":"light"}},{"value":"chainmail","sets":{"category":"medium"}},{"value":"scale mail","sets":{"category":"medium"}},{"value":"plate armor","sets":{"category":"heavy"}},{"value":"padded armor","sets":{"category":"light"}},{"value":"brigandine","sets":{"category":"medium"}}]},{"id":"clothingStyles","name":"Clothing Styles","type":"simple","resultType":"description","tags":["items","clothing"],"entries":[{"value":"simple homespun garments","sets":{"class":"peasant"}},{"value":"practical traveling clothes","sets":{"class":"common"}},{"value":"well-tailored merchant's attire","sets":{"class":"middle"}},{"value":"elegant noble's finery","sets":{"class":"upper"}},{"value":"mysterious hooded robes","sets":{"class":"mysterious"}},{"value":"foreign garments of unusual cut","sets":{"class":"exotic"}},{"value":"religious vestments","sets":{"class":"religious"}},{"value":"rough-worn laborer's clothes","sets":{"class":"working"}}]},{"id":"clothingColors","name":"Clothing Colors","type":"simple","resultType":"description","tags":["items","clothing"],"hidden":true,"entries":[{"value":"deep crimson"},{"value":"forest green"},{"value":"midnight blue"},{"value":"golden yellow"},{"value":"rich purple"},{"value":"earthen brown"},{"value":"stark black"},{"value":"pure white"},{"value":"faded grey"},{"value":"burnt orange"},{"value":"dusty rose"},{"value":"teal"}]},{"id":"jewelryTypes","name":"Jewelry Types","type":"simple","resultType":"item","tags":["items","jewelry"],"entries":[{"value":"ring","sets":{"placement":"finger"}},{"value":"necklace","sets":{"placement":"neck"}},{"value":"bracelet","sets":{"placement":"wrist"}},{"value":"brooch","sets":{"placement":"chest"}},{"value":"earring","sets":{"placement":"ear"}},{"value":"circlet","sets":{"placement":"head"}},{"value":"anklet","sets":{"placement":"ankle"}},{"value":"pendant","sets":{"placement":"neck"}}]},{"id":"gemstones","name":"Gemstones","type":"simple","resultType":"item","tags":["items","valuables"],"defaultSets":{"rarity":"common"},"entries":[{"id":"ruby","value":"ruby","weight":1,"sets":{"color":"deep red","rarity":"rare"}},{"id":"sapphire","value":"sapphire","weight":1,"sets":{"color":"brilliant blue","rarity":"rare"}},{"id":"emerald","value":"emerald","weight":1,"sets":{"color":"vivid green","rarity":"rare"}},{"id":"diamond","value":"diamond","weight":1,"sets":{"color":"clear and sparkling","rarity":"very rare"}},{"id":"amethyst","value":"amethyst","weight":3,"sets":{"color":"purple","rarity":"uncommon"}},{"id":"topaz","value":"topaz","weight":3,"sets":{"color":"golden","rarity":"uncommon"}},{"id":"jade","value":"jade","weight":2,"sets":{"color":"green","rarity":"uncommon"}},{"id":"opal","value":"opal","weight":2,"sets":{"color":"iridescent","rarity":"uncommon"}},{"id":"quartz","value":"quartz","weight":5,"sets":{"color":"milky white"}},{"id":"agate","value":"agate","weight":5,"sets":{"color":"banded"}}]},{"id":"rareGemstones","name":"Rare Gemstones","type":"simple","extends":"gemstones","description":"Only rare and precious gemstones.","entries":[{"id":"quartz","weight":0},{"id":"agate","weight":0},{"id":"amethyst","weight":0},{"id":"topaz","weight":0},{"id":"jade","weight":0},{"id":"opal","weight":0},{"id":"starSapphire","value":"star sapphire","weight":1,"sets":{"color":"blue with inner star","rarity":"legendary"}},{"id":"blackDiamond","value":"black diamond","weight":1,"sets":{"color":"dark as midnight","rarity":"legendary"}}]},{"id":"metals","name":"Metals","type":"simple","resultType":"item","tags":["items","materials"],"entries":[{"value":"iron","weight":5},{"value":"steel","weight":4},{"value":"bronze","weight":3},{"value":"copper","weight":3},{"value":"silver","weight":2},{"value":"gold","weight":1},{"value":"mithril","weight":1,"sets":{"magical":"true"}},{"value":"adamantine","weight":1,"sets":{"magical":"true"}}]},{"id":"treasureByRarity","name":"Treasure by Rarity","type":"composite","description":"Weighted selection of treasure quality - mostly common, sometimes valuable.","resultType":"loot","tags":["treasure","loot"],"sources":[{"tableId":"commonTreasure","weight":6},{"tableId":"uncommonTreasure","weight":3},{"tableId":"rareTreasure","weight":1}]},{"id":"commonTreasure","name":"Common Treasure","type":"simple","resultType":"loot","tags":["treasure"],"entries":[{"value":"a handful of copper coins"},{"value":"a simple {{metals}} ring"},{"value":"a worn leather pouch"},{"value":"a bundle of candles"},{"value":"a flask of cheap wine"},{"value":"a tarnished locket"},{"value":"a set of bone dice"},{"value":"a bundle of dried herbs"}]},{"id":"uncommonTreasure","name":"Uncommon Treasure","type":"simple","resultType":"loot","tags":["treasure"],"entries":[{"value":"a pouch of silver coins"},{"value":"a silver {{jewelryTypes}} set with {{gemstones}}"},{"value":"a bolt of fine silk"},{"value":"a decorated weapon sheath"},{"value":"an ivory comb"},{"value":"a silver hand mirror"},{"value":"a bottle of fine wine"},{"value":"a small portrait in a gilded frame"}]},{"id":"rareTreasure","name":"Rare Treasure","type":"simple","resultType":"loot","tags":["treasure"],"entries":[{"value":"a chest of gold coins"},{"value":"a gold {{jewelryTypes}} encrusted with {{rareGemstones}}"},{"value":"an ancient tapestry of immense value"},{"value":"a crown of silver and gems"},{"value":"a jeweled chalice"},{"value":"a masterwork {{weaponTypes}} with gold inlay"},{"value":"an ornate music box"},{"value":"a set of illuminated manuscripts"}]},{"id":"allTreasure","name":"All Treasure","type":"collection","description":"All treasure types combined into one pool.","resultType":"loot","collections":["commonTreasure","uncommonTreasure","rareTreasure"]},{"id":"fortuneTelling","name":"Fortune Telling Results","type":"simple","description":"A d100-style fortune telling table demonstrating range syntax.","resultType":"description","tags":["story","fortune"],"entries":[{"value":"A journey awaits you, one that will change everything.","range":[1,15]},{"value":"Beware a false friend who wears a smiling mask.","range":[16,30]},{"value":"Love will find you when you least expect it.","range":[31,45]},{"value":"Great wealth is within your grasp, if you dare reach for it.","range":[46,55]},{"value":"An old enemy stirs. Be vigilant.","range":[56,65]},{"value":"The stars align in your favor. Act boldly.","range":[66,75]},{"value":"Loss comes before gain. Steel your heart.","range":[76,85]},{"value":"A secret will be revealed that shakes the foundations of trust.","range":[86,95]},{"value":"The cards show... nothing. Your fate is truly your own.","range":[96,100]}]},{"id":"rumors","name":"Rumors","type":"simple","resultType":"rumor","tags":["story","hooks"],"entries":[{"value":"They say the old tower on the hill is haunted by the ghost of its last owner."},{"value":"A merchant claims to have seen strange lights in the forest at midnight."},{"value":"Word is the local lord has been acting strangely since his trip to the capital."},{"value":"Some folks whisper that the well water has been making people sick."},{"value":"There's talk of bandits on the north road, led by someone they call the Red Hood."},{"value":"An old sailor swears he saw a ship with black sails just off the coast."},{"value":"The blacksmith's daughter went missing three days ago and no one knows where."},{"value":"They found strange symbols carved on trees at the edge of the forest."},{"value":"A traveling priest warned that dark times are coming."},{"value":"Someone's been stealing livestock, but no tracks have ever been found."},{"value":"Roll twice and combine! {{2*unique*again|\\" Also, \\"}}","weight":1}]},{"id":"plotComplications","name":"Plot Complications","type":"simple","resultType":"complication","tags":["story"],"entries":[{"value":"an old enemy recognizes one of the characters"},{"value":"a storm forces everyone to seek shelter"},{"value":"the map turns out to be partially wrong"},{"value":"a supposed ally has their own agenda"},{"value":"a key item has been stolen"},{"value":"the situation is not what it first appeared"},{"value":"an innocent person is caught in the middle"},{"value":"time is running out faster than expected"},{"value":"reinforcements arrive for the opposition"},{"value":"a moral dilemma forces a difficult choice"},{"value":"language barriers complicate communication"},{"value":"the real threat was hiding in plain sight"}]},{"id":"questGivers","name":"Quest Givers","type":"simple","resultType":"npc","tags":["story","npc"],"entries":[{"value":"a desperate parent","sets":{"motivation":"love"}},{"value":"a wealthy merchant","sets":{"motivation":"profit"}},{"value":"a mysterious stranger","sets":{"motivation":"unknown"}},{"value":"a local official","sets":{"motivation":"duty"}},{"value":"a grieving widow","sets":{"motivation":"justice"}},{"value":"a cunning noble","sets":{"motivation":"power"}},{"value":"a rambling prophet","sets":{"motivation":"faith"}},{"value":"a retired adventurer","sets":{"motivation":"nostalgia"}}]},{"id":"questObjectives","name":"Quest Objectives","type":"simple","resultType":"hook","tags":["story"],"entries":[{"value":"retrieve a stolen {{treasureByRarity}}"},{"value":"find and rescue a missing person"},{"value":"deliver a message to a distant location"},{"value":"investigate strange occurrences"},{"value":"escort a vulnerable traveler"},{"value":"broker peace between two factions"},{"value":"uncover the truth behind a mystery"},{"value":"gather rare ingredients"},{"value":"clear out a dangerous location"},{"value":"find and return a lost heirloom"}]},{"id":"bookTitles","name":"Book Titles","type":"simple","resultType":"item","tags":["items","lore"],"entries":[{"value":"\\"The Rise and Fall of the Second Empire\\"","sets":{"genre":"history"}},{"value":"\\"Herbalism for the Practical Healer\\"","sets":{"genre":"reference"}},{"value":"\\"Songs of the Wandering Minstrel\\"","sets":{"genre":"poetry"}},{"value":"\\"A Treatise on Elemental Forces\\"","sets":{"genre":"arcane"}},{"value":"\\"The Voyage of Captain Brightwater\\"","sets":{"genre":"adventure"}},{"value":"\\"Meditations on the Divine\\"","sets":{"genre":"religious"}},{"value":"\\"The Complete Guide to Mushrooms\\"","sets":{"genre":"reference"}},{"value":"\\"Love in the Time of Dragons\\"","sets":{"genre":"romance"}},{"value":"\\"Bloodlines of the Noble Houses\\"","sets":{"genre":"genealogy"}},{"value":"\\"Whispers from Beyond: A Ghost Story\\"","sets":{"genre":"horror"}}]},{"id":"magicalArtifacts","name":"Magical Artifacts","type":"simple","resultType":"item","tags":["items","magical"],"description":"Legendary magical items with self-referential descriptions.","entries":[{"value":"{{@self.description}} amulet","description":"A softly glowing","sets":{"power":"protection"}},{"value":"{{@self.description}} ring","description":"An ancient silver","sets":{"power":"invisibility"}},{"value":"{{@self.description}} staff","description":"A gnarled oak","sets":{"power":"lightning"}},{"value":"{{@self.description}} sword","description":"A rune-etched","sets":{"power":"flame"}},{"value":"{{@self.description}} cloak","description":"A midnight-black","sets":{"power":"shadow"}},{"value":"{{@self.description}} crown","description":"A jewel-encrusted","sets":{"power":"command"}}]},{"id":"inscriptions","name":"Inscriptions","type":"simple","resultType":"description","tags":["lore","dungeon"],"entries":[{"value":"\\"Here lies one who sought too much.\\""},{"value":"\\"Turn back, traveler. Only death awaits.\\""},{"value":"\\"In darkness, seek the light within.\\""},{"value":"\\"Three keys open the way.\\""},{"value":"\\"Speak the name and enter.\\""},{"value":"\\"Beware the guardian that never sleeps.\\""},{"value":"\\"What is given cannot be taken back.\\""},{"value":"A series of symbols you cannot decipher."},{"value":"Names and dates, perhaps a memorial."},{"value":"A warning in an ancient tongue."}]},{"id":"smells","name":"Ambient Smells","type":"simple","resultType":"description","tags":["atmosphere"],"hidden":true,"entries":[{"value":"fresh bread baking"},{"value":"wood smoke"},{"value":"damp earth after rain"},{"value":"salt and seaweed"},{"value":"flowers in bloom"},{"value":"animal dung"},{"value":"spiced meat cooking"},{"value":"pine resin"},{"value":"musty old books"},{"value":"something rotting"},{"value":"incense burning"},{"value":"forge smoke and hot metal"}]},{"id":"sounds","name":"Ambient Sounds","type":"simple","resultType":"description","tags":["atmosphere"],"hidden":true,"entries":[{"value":"birds singing"},{"value":"a dog barking in the distance"},{"value":"the murmur of conversation"},{"value":"a hammer striking an anvil"},{"value":"children laughing"},{"value":"cart wheels on cobblestones"},{"value":"wind rustling through leaves"},{"value":"water flowing in a stream"},{"value":"bells ringing"},{"value":"someone playing music"},{"value":"complete, unsettling silence"},{"value":"distant thunder"}]},{"id":"tavernNames","name":"Tavern Names","type":"simple","resultType":"name","tags":["location","names"],"entries":[{"value":"The {{tavernAdjectives}} {{tavernNouns}}"}]},{"id":"tavernAdjectives","name":"Tavern Adjectives","type":"simple","hidden":true,"entries":[{"value":"Golden"},{"value":"Silver"},{"value":"Rusty"},{"value":"Prancing"},{"value":"Sleeping"},{"value":"Drunken"},{"value":"Dancing"},{"value":"Laughing"},{"value":"Broken"},{"value":"Hidden"},{"value":"Wandering"},{"value":"Weary"},{"value":"Crimson"},{"value":"Merry"},{"value":"Lonely"},{"value":"Lucky"}]},{"id":"tavernNouns","name":"Tavern Nouns","type":"simple","hidden":true,"entries":[{"value":"Dragon"},{"value":"Griffin"},{"value":"Unicorn"},{"value":"Stag"},{"value":"Boar"},{"value":"Eagle"},{"value":"Wolf"},{"value":"Bear"},{"value":"Crown"},{"value":"Sword"},{"value":"Shield"},{"value":"Anchor"},{"value":"Barrel"},{"value":"Goblet"},{"value":"Lantern"},{"value":"Raven"}]},{"id":"settlementNames","name":"Settlement Names","type":"simple","resultType":"name","tags":["location","names"],"entries":[{"value":"{{settlementPrefixes}}{{settlementSuffixes}}"}]},{"id":"settlementPrefixes","name":"Settlement Prefixes","type":"simple","hidden":true,"entries":[{"value":"Oak"},{"value":"River"},{"value":"Stone"},{"value":"Green"},{"value":"Black"},{"value":"White"},{"value":"Red"},{"value":"Gold"},{"value":"Iron"},{"value":"Silver"},{"value":"Hawk"},{"value":"Wolf"},{"value":"Elder"},{"value":"Ash"},{"value":"Frost"},{"value":"Storm"}]},{"id":"settlementSuffixes","name":"Settlement Suffixes","type":"simple","hidden":true,"entries":[{"value":"haven"},{"value":"ford"},{"value":"holm"},{"value":"wick"},{"value":"dale"},{"value":"vale"},{"value":"brook"},{"value":"wood"},{"value":"field"},{"value":"ton"},{"value":"bridge"},{"value":"keep"},{"value":"shire"},{"value":"gate"},{"value":"watch"},{"value":"cross"}]}]`),Ij=[{id:"simpleNPC",name:"Simple NPC",description:"Generates a basic NPC with name, appearance, and personality.",resultType:"npc",tags:["character","npc"],shared:{$race:"{{characterRaces}}"},pattern:"**{{$race.@firstName}} {{$race.@lastName}}** is a {{$race.@physique}} {{$race}}. They are {{personalityTraits}}."},{id:"detailedNPC",name:"Detailed NPC",description:"Generates a comprehensive NPC with background details.",resultType:"npc",tags:["character","npc"],shared:{$race:"{{characterRaces}}",$job:"{{occupations}}"},pattern:`## {{$race.@firstName}} {{$race.@lastName}}

**Race:** {{$race}} ({{$race.@lifespan}} lifespan)

**Appearance:** {{$race.@physique}}, with {{physicalQuirks}}. They wear {{clothingColors}} {{clothingStyles}}.

**Occupation:** {{$job}}, working at {{$job.@workplace}}.

**Personality:** {{personalityTraits}}. They {{motivations}}.

**Secret:** This person {{secrets}}.`},{id:"rivalCharacters",name:"Rival Characters",description:"Generates two characters with independent traits using shared variables.",resultType:"npc",tags:["character","story"],pattern:`**The Rivals**

**{{$protagonist.@firstName}} {{$protagonist.@lastName}}** is a {{$protagonist.@physique}} {{$protagonist}} who {{motivations}}.

**{{$deuteragonist.@firstName}} {{$deuteragonist.@lastName}}** is a {{$deuteragonist.@physique}} {{$deuteragonist}} who {{motivations}}.

Their paths cross when {{plotComplications}}.`},{id:"partyOfAdventurers",name:"Party of Adventurers",description:"Generates a group of unique characters.",resultType:"npc",tags:["character","party"],shared:{partySize:"{{dice:1d4+2}}",$members:"{{$partySize*unique*characterRaces >> $group|silent}}"},pattern:`## The Adventuring Party

This band of {{$group.count}} adventurers includes:

{{$group.count*unique*characterRaces}}`},{id:"settlementDescription",name:"Settlement Description",description:"Generates a complete settlement with name and details.",resultType:"location",tags:["location","settlement"],shared:{$settlement:"{{settlementTypes}}",$name:"{{settlementNames}}"},pattern:`## {{$name}}

**Type:** {{$settlement}} (Population: ~{{$settlement.@population}})

**Atmosphere:** The settlement is {{$settlement.@atmosphere}}.

**Notable Feature:** {{$settlement.@features}}

**Current Problem:** Unfortunately, {{settlementProblems}}.

**Local Tavern:** Travelers often rest at **{{tavernNames}}**, {{tavernDescriptions}}.`},{id:"wildernessScene",name:"Wilderness Scene",description:"Generates an atmospheric wilderness description.",resultType:"description",tags:["location","atmosphere"],pattern:`It is {{$timeOfDay}}, and the sky shows {{$currentWeather}}. Above hangs {{$moonPhase}}.

You find yourself in {{wildernessLocations}}. The air carries the scent of {{smells}}, and you can hear {{sounds}}`},{id:"dungeonRoom",name:"Dungeon Room",description:"Generates a dungeon room with multiple features.",resultType:"location",tags:["dungeon","location"],shared:{featureCount:"{{dice:1d3+1}}"},pattern:`You enter {{dungeonRooms}}.

**Features:**
- {{$featureCount*unique*dungeonFeatures|"
- "}}

**Inscription:** On one wall, you find: {{inscriptions}}`},{id:"treasureHoard",name:"Treasure Hoard",description:"Generates a collection of treasures with variable quantity.",resultType:"loot",tags:["treasure","loot"],shared:{hoardSize:"{{dice:2d4}}"},pattern:`## Treasure Hoard

You discover a cache containing {{$hoardSize}} items:

* {{$hoardSize*unique*treasureByRarity|"

* "}}`},{id:"questHook",name:"Quest Hook",description:"Generates a complete quest setup.",resultType:"hook",tags:["story","quest"],shared:{$giver:"{{questGivers}}"},pattern:`## Quest: {{questObjectives}}

**Quest Giver:** {{$giver}} approaches you. Their motivation seems to be {{$giver.@motivation}}.

**The Situation:** {{rumors}}

**Complication:** However, {{plotComplications}}.`},{id:"itemDescription",name:"Detailed Item",description:"Generates a weapon with full details.",resultType:"item",tags:["items"],shared:{$weapon:"{{weaponTypes}}",$condition:"{{itemConditions}}"},pattern:`**{{weaponDescriptors}} {{$weapon}}**

This {{$weapon.@category}} weapon is {{$condition}} ({{$condition.@quality}} quality). It is made of {{metals}} and features {{inscriptions}}`},{id:"jewelryDescription",name:"Detailed Jewelry",description:"Generates jewelry with gemstone details using capture and property access.",resultType:"item",tags:["items","jewelry"],shared:{$jewel:"{{jewelryTypes}}",$gem:"{{gemstones}}"},pattern:"A {{metals}} {{$jewel}} worn on the {{$jewel.@placement}}, set with a {{$gem.@color}} {{$gem}} ({{$gem.@rarity}} rarity)."},{id:"atmosphericScene",name:"Atmospheric Scene",description:"Generates a richly detailed scene description.",resultType:"description",tags:["atmosphere"],shared:{$weather:"{{weatherConditions}}"},pattern:`The scene is set during {{timesOfDay}}. The weather is {{$weather}}, creating a {{$weather.@mood}} atmosphere.

You notice the smell of {{smells}} and hear {{sounds}}`},{id:"multipleRumors",name:"Multiple Rumors",description:"Generates several rumors at once, demonstrating multiple unique rolls.",resultType:"rumor",tags:["story"],pattern:`## Rumors Heard at the Tavern

You overhear some interesting pieces of gossip:

{{dice:1d4+1*unique*rumors|"

"}}`},{id:"encounterScene",name:"Encounter Scene",description:"Generates a complete encounter with location, NPCs, and atmosphere.",resultType:"encounter",tags:["story","encounter"],shared:{$location:"{{wildernessLocations}}",$npc1:"{{characterRaces}}",$npc2:"{{characterRaces}}"},pattern:`## Wilderness Encounter

**Setting:** {{$location}} ({{$location.@terrain}} terrain, {{$location.@danger}} danger)

**Time:** {{timesOfDay}}

**Weather:** {{weatherConditions}}

You encounter **{{$npc1.@firstName}}**, a {{$npc1.@physique}} {{$npc1}}, and **{{$npc2.@firstName}}**, a {{$npc2.@physique}} {{$npc2}}.

{{$npc1.@firstName}} is {{personalityTraits}}, while {{$npc2.@firstName}} is {{personalityTraits}}.

**What's Happening:** {{plotComplications}}`},{id:"shopInventory",name:"Shop Inventory",description:"Generates a shop with variable inventory using dice-count rolls.",resultType:"description",tags:["location","items"],shared:{stockSize:"{{dice:2d4+3}}"},pattern:`## The {{tavernAdjectives}} Emporium

{{shopDescriptions}}

**Today's Stock ({{$stockSize}} items):**

{{$stockSize*unique*allTreasure|"

"}}`},{id:"merchantTransaction",name:"Merchant Transaction",description:"Generates a purchase with math expressions for price calculation.",resultType:"description",tags:["items","commerce"],shared:{basePrice:"{{dice:2d6*10}}",quantity:"{{dice:1d4}}",haggleDiscount:"{{dice:1d20}}"},pattern:`## Transaction Receipt

**Item:** {{treasureByRarity}}

**Base Price:** {{$basePrice}} gold
**Quantity:** {{$quantity}}
**Subtotal:** {{math:$basePrice * $quantity}} gold
**Haggle Roll:** {{$haggleDiscount}} ({{math:$haggleDiscount * 2}}% off if successful)
**Final Price:** {{math:($basePrice * $quantity) - (($basePrice * $quantity * $haggleDiscount) / 50)}} gold (with discount)`},{id:"caravanManifest",name:"Caravan Manifest",description:"Demonstrates fixed-count multiple rolls without unique modifier.",resultType:"description",tags:["items","travel"],pattern:`## Caravan Manifest

**Passengers:** {{3*characterRaces}}

**Cargo (5 items):**
{{5*allTreasure|"
"}}

**Guards' Equipment:**
{{3*weaponTypes}}`}],$j={metadata:jj,variables:Aj,shared:_j,tables:Rj,templates:Ij},Mj={name:"Sci-Fi Frontier Generator",namespace:"rolldeo.scifi.frontier",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A **science fiction** generator for creating ships, planets, stations, characters, and cosmic phenomena. Perfect for generating descriptive content for space opera settings.",tags:["sci-fi","space","generator","worldbuilding","descriptive"],source:{license:"CC0-1.0",copyright:"Rolldeo - Free for any use"}},Fj={settingName:"The Frontier Expanse",defaultSeparator:", ",era:"Post-Expansion"},Oj={systemAge:"{{dice:1d10+2}}",$dominantFaction:"{{factions}}",tradeRouteStatus:"{{tradeStatus}}"},Pj=JSON.parse(`[{"id":"shipPrefixes","name":"Ship Prefixes","type":"simple","hidden":true,"description":"Registry prefixes for spacecraft","resultType":"name","entries":[{"value":"ISV","sets":{"meaning":"Interstellar Vessel"}},{"value":"CSV","sets":{"meaning":"Commercial Space Vessel"}},{"value":"HMS","sets":{"meaning":"Hegemony Military Ship"}},{"value":"FTV","sets":{"meaning":"Free Trader Vessel"}},{"value":"RSV","sets":{"meaning":"Research Science Vessel"}},{"value":"XCV","sets":{"meaning":"Experimental Craft Vessel"}}]},{"id":"shipNameFirst","name":"Ship Name - First Part","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Stellar"},{"value":"Void"},{"value":"Crimson"},{"value":"Silver"},{"value":"Dark"},{"value":"Quantum"},{"value":"Eternal"},{"value":"Distant"},{"value":"Iron"},{"value":"Golden"},{"value":"Burning"},{"value":"Silent"},{"value":"Swift"},{"value":"Wandering"},{"value":"Fallen"}]},{"id":"shipNameSecond","name":"Ship Name - Second Part","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Horizon"},{"value":"Dream"},{"value":"Fortune"},{"value":"Destiny"},{"value":"Phoenix"},{"value":"Serpent"},{"value":"Crown"},{"value":"Pilgrim"},{"value":"Marauder"},{"value":"Endeavor"},{"value":"Spirit"},{"value":"Tempest"},{"value":"Promise"},{"value":"Fury"},{"value":"Voyager"}]},{"id":"shipClasses","name":"Ship Classes","type":"simple","description":"Classification of spacecraft by size and role","resultType":"description","tags":["ships","classification"],"entries":[{"id":"shuttle","value":"Shuttle","weight":4,"description":"Small short-range craft","sets":{"size":"tiny","crew":"{{dice:1d4}}","silhouette":"compact, angular hull with stubby wings"}},{"id":"corvette","value":"Corvette","weight":3,"description":"Fast, light vessel","sets":{"size":"small","crew":"{{dice:2d6+5}}","silhouette":"sleek, needle-like hull with swept-back fins"}},{"id":"freighter","value":"Freighter","weight":5,"description":"Cargo transport vessel","sets":{"size":"medium","crew":"{{dice:2d6+10}}","silhouette":"blocky, utilitarian hull with external cargo pods"}},{"id":"cruiser","value":"Cruiser","weight":2,"description":"Multi-purpose capital ship","sets":{"size":"large","crew":"{{dice:4d20+50}}","silhouette":"imposing, wedge-shaped hull bristling with sensor arrays"}},{"id":"dreadnought","value":"Dreadnought","weight":1,"description":"Massive warship","sets":{"size":"massive","crew":"{{dice:10d100+500}}","silhouette":"colossal, fortress-like hull spanning kilometers"}}]},{"id":"shipConditions","name":"Ship Conditions","type":"simple","resultType":"description","tags":["ships","condition"],"defaultSets":{"repairNeeded":"false"},"entries":[{"value":"pristine, fresh from the shipyard with that new-vessel gleam","weight":1,"sets":{"age":"new"}},{"value":"well-maintained with only minor cosmetic wear","weight":3,"sets":{"age":"moderate"}},{"value":"showing years of hard service with patched hull sections","weight":4,"sets":{"age":"old","repairNeeded":"true"}},{"value":"battle-scarred and held together by desperate repairs","weight":2,"sets":{"age":"ancient","repairNeeded":"true"}},{"value":"a frankenstein of salvaged parts from multiple vessels","weight":1,"sets":{"age":"mixed","repairNeeded":"true"}}]},{"id":"shipQuirks","name":"Ship Quirks","type":"simple","resultType":"description","tags":["ships","flavor"],"entries":[{"value":"The navigation computer has developed an oddly sarcastic personality."},{"value":"Strange harmonic vibrations occur during FTL transit."},{"value":"The previous owner's exotic pet left permanent claw marks everywhere."},{"value":"The ship's AI insists on playing classical music during docking procedures."},{"value":"One cargo bay has a persistent zero-gravity malfunction."},{"value":"The hull makes unsettling groaning sounds when cooling down."},{"value":"A faint smell of ozone permeates the engineering section."},{"value":"The emergency lights flicker on and off at random intervals."},{"value":"All displays show a slight purple tint that no one can fix."},{"value":"The captain's chair squeaks loudly with every movement."},{"value":"Roll twice for multiple quirks: {{2*unique*again|\\" Additionally, \\"}}.","weight":1}]},{"id":"planetTypes","name":"Planet Types","type":"simple","description":"Classifications of planetary bodies","resultType":"description","tags":["planets","worlds"],"entries":[{"id":"terrestrial","value":"Terrestrial World","weight":4,"sets":{"atmosphere":"{{terrestrialAtmospheres}}","surfaceDesc":"{{terrestrialSurfaces}}","skyColor":"{{skyColors}}"}},{"id":"oceanic","value":"Ocean World","weight":2,"sets":{"atmosphere":"thick, humid atmosphere laden with salt spray","surfaceDesc":"endless waves and scattered archipelagos","skyColor":"perpetually gray-blue"}},{"id":"desert","value":"Desert World","weight":3,"sets":{"atmosphere":"thin, dusty atmosphere that glows orange at sunset","surfaceDesc":"vast dune seas and exposed bedrock mesas","skyColor":"pale amber"}},{"id":"ice","value":"Ice World","weight":2,"sets":{"atmosphere":"biting cold atmosphere with perpetual ice crystals","surfaceDesc":"glacial plains and frozen methane lakes","skyColor":"pale white"}},{"id":"jungle","value":"Jungle World","weight":2,"sets":{"atmosphere":"thick, steamy atmosphere rich with spores","surfaceDesc":"continent-spanning megaflora forests","skyColor":"hazy green"}},{"id":"volcanic","value":"Volcanic World","weight":1,"sets":{"atmosphere":"choking atmosphere filled with ash and sulfur","surfaceDesc":"rivers of lava and obsidian plains","skyColor":"angry red-orange"}},{"id":"gas","value":"Gas Giant","weight":2,"sets":{"atmosphere":"crushing layers of hydrogen and helium","surfaceDesc":"no solid surface, only deepening cloud layers","skyColor":"banded with storms"}}]},{"id":"terrestrialAtmospheres","name":"Terrestrial Atmospheres","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"breathable atmosphere with a slight metallic tang"},{"value":"thin atmosphere requiring supplemental oxygen"},{"value":"dense atmosphere that makes voices sound oddly deep"},{"value":"pristine atmosphere reminiscent of mountain air"},{"value":"slightly toxic atmosphere requiring filter masks outdoors"}]},{"id":"terrestrialSurfaces","name":"Terrestrial Surfaces","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"rolling grasslands dotted with crystalline rock formations"},{"value":"mountainous terrain with deep valleys and rushing rivers"},{"value":"sparse vegetation on reddish soil"},{"value":"lush forests interspersed with mirror-flat lakes"},{"value":"jagged canyon systems carved by ancient waterways"}]},{"id":"skyColors","name":"Sky Colors","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"deep cerulean blue"},{"value":"pale lavender"},{"value":"greenish-gold"},{"value":"burnt orange"},{"value":"pearlescent white"}]},{"id":"planetaryFeatures","name":"Planetary Features","type":"simple","resultType":"description","tags":["planets","features"],"entries":[{"value":"A massive ring system visible from the surface, painting the sky with bands of light."},{"value":"Twin moons that create dramatic tidal effects and eclipse events."},{"value":"Ancient alien ruins scattered across the northern continent."},{"value":"A colossal impact crater visible from orbit, now home to a unique ecosystem."},{"value":"Bioluminescent organisms that make the night glow in shifting colors."},{"value":"Floating islands held aloft by deposits of anti-gravity minerals."},{"value":"Massive electromagnetic storms that circle the equator perpetually."},{"value":"Crystal forests that chime in the wind, audible for kilometers."},{"value":"Underground ocean accessible through vast cave networks."},{"value":"Migrating continent-sized organisms that reshape the geography."}]},{"id":"settlementSizes","name":"Settlement Sizes","type":"simple","resultType":"description","tags":["settlements"],"entries":[{"id":"outpost","value":"outpost","range":[1,25],"sets":{"population":"{{dice:2d20}}","description":"a handful of prefab structures"}},{"id":"colony","value":"colony","range":[26,55],"sets":{"population":"{{dice:2d6*100}}","description":"organized streets and essential services"}},{"id":"settlement","value":"settlement","range":[56,75],"sets":{"population":"{{dice:2d6*1000}}","description":"a proper small city with districts"}},{"id":"metropolis","value":"metropolis","range":[76,90],"sets":{"population":"{{dice:2d6*100000}}","description":"towering spires and bustling commerce"}},{"id":"megacity","value":"megacity","range":[91,100],"sets":{"population":"{{dice:2d6*1000000}}","description":"an arcology spanning the horizon"}}]},{"id":"stationTypes","name":"Space Station Types","type":"simple","resultType":"location","tags":["stations","locations"],"defaultSets":{"gravity":"artificial rotation"},"entries":[{"value":"Trade Hub","weight":4,"sets":{"purpose":"commerce","atmosphere":"bustling markets and haggling merchants","architecture":"modular cargo bays surrounding a central promenade"}},{"value":"Mining Platform","weight":3,"sets":{"purpose":"extraction","atmosphere":"industrial grime and exhausted workers","architecture":"sprawling refineries attached to asteroid moorings"}},{"value":"Research Facility","weight":2,"sets":{"purpose":"science","atmosphere":"sterile corridors and hushed laboratories","architecture":"clean lines and isolated containment sections"}},{"value":"Luxury Resort","weight":1,"sets":{"purpose":"entertainment","atmosphere":"opulent excess and wealthy clientele","architecture":"sweeping crystal viewports and gilded surfaces"}},{"value":"Waystation","weight":3,"sets":{"purpose":"transit","atmosphere":"transient crowds and flickering departure boards","architecture":"efficient docking arms and minimal amenities"}},{"value":"Military Outpost","weight":2,"sets":{"purpose":"defense","atmosphere":"rigid discipline and constant readiness","architecture":"armored hull sections and restricted zones","gravity":"variable gravity for training"}},{"value":"Salvage Yard","weight":2,"sets":{"purpose":"recycling","atmosphere":"the smell of old metal and opportunities","architecture":"chaotic sprawl of docked hulks and cutting bays"}}]},{"id":"stationConditions","name":"Station Conditions","type":"simple","resultType":"description","tags":["stations","condition"],"entries":[{"value":"thriving, with expansion modules being added regularly","sets":{"status":"growing"}},{"value":"stable, maintaining the same population for decades","sets":{"status":"stable"}},{"value":"declining, with vacant sections and failing systems","sets":{"status":"declining"}},{"value":"newly established, still smelling of fresh sealant","sets":{"status":"new"}},{"value":"recovering from a recent crisis that left visible scars","sets":{"status":"recovering"}}]},{"id":"alienSpeciesAppearance","name":"Alien Species Appearance","type":"simple","description":"Physical descriptions of alien beings","resultType":"description","tags":["aliens","species","appearance"],"entries":[{"value":"Tall and willowy with luminescent skin that shifts between pale blue and silver","sets":{"bodyType":"humanoid","distinctFeature":"bioluminescence"}},{"value":"Compact and sturdy with four arms and chitinous plating in earthy browns","sets":{"bodyType":"insectoid","distinctFeature":"multiple limbs"}},{"value":"Serpentine lower body with a humanoid torso, scales in iridescent greens","sets":{"bodyType":"serpentine","distinctFeature":"no legs"}},{"value":"Avian features with vestigial wings and feathers ranging from crimson to gold","sets":{"bodyType":"avian","distinctFeature":"decorative plumage"}},{"value":"Amorphous form that can reshape at will, typically appearing as a shifting mass of translucent gel","sets":{"bodyType":"amorphous","distinctFeature":"shapeshifting"}},{"value":"Crystalline body structure that refracts light into rainbows, no discernible face","sets":{"bodyType":"mineral","distinctFeature":"silicon-based"}},{"value":"Feline grace with sleek fur patterns and large, reflective eyes adapted for low light","sets":{"bodyType":"mammalian","distinctFeature":"enhanced senses"}},{"value":"Aquatic adaptation with gills, webbed appendages, and skin in deep ocean blues","sets":{"bodyType":"aquatic","distinctFeature":"amphibious"}}]},{"id":"alienCulturalTraits","name":"Alien Cultural Traits","type":"simple","resultType":"description","tags":["aliens","culture"],"entries":[{"value":"communicate primarily through color changes and bioluminescent patterns"},{"value":"consider individual names taboo, referring to each other by role and lineage"},{"value":"practice elaborate gift-giving rituals that determine social standing"},{"value":"experience time non-linearly and speak of past and future interchangeably"},{"value":"share a limited hive-mind connection with close family members"},{"value":"express emotion through scent rather than facial expressions"},{"value":"consider lying physically impossible and are easily deceived by other species"},{"value":"hibernate for one month each year during their species' ancestral spawning season"},{"value":"revere silence as sacred and conduct important business in complete quiet"},{"value":"age in reverse, born with full knowledge that fades as they grow younger"}]},{"id":"humanAppearanceBase","name":"Human Appearance - Base","type":"simple","resultType":"description","tags":["humans","appearance"],"defaultSets":{"species":"human"},"entries":[{"id":"stocky","value":"stocky and broad-shouldered","sets":{"build":"heavy"}},{"id":"tall","value":"tall and lean","sets":{"build":"thin"}},{"id":"average","value":"average height with a wiry build","sets":{"build":"average"}},{"id":"compact","value":"compact and muscular","sets":{"build":"athletic"}},{"id":"lanky","value":"lanky with elongated limbs from low-gravity upbringing","sets":{"build":"spacer"}}]},{"id":"humanAppearanceEnhanced","name":"Human Appearance - Enhanced","type":"simple","extends":"humanAppearanceBase","resultType":"description","tags":["humans","appearance","enhanced"],"entries":[{"id":"stocky","value":"stocky and broad-shouldered with visible cybernetic reinforcement"},{"id":"lanky","value":"lanky with elongated limbs and subtle genetic optimization markers"},{"id":"synthetic","value":"entirely synthetic, with a humanoid form of polished chrome and soft polymers","sets":{"build":"artificial","species":"synthetic"}}]},{"id":"characterDistinguishingFeatures","name":"Distinguishing Features","type":"simple","resultType":"description","tags":["characters","appearance"],"entries":[{"value":"a prominent scar running across {{scarLocations}}"},{"value":"heterochromatic eyes - one {{eyeColors}}, one {{eyeColors}}"},{"value":"intricate tattoos depicting {{tattooSubjects}}"},{"value":"a visible cybernetic {{cyberneticParts}}"},{"value":"prematurely gray hair despite apparent youth"},{"value":"an ever-present {{accessoryItems}}"},{"value":"unusual skin pigmentation in shades of {{skinTones}}"},{"value":"hands that never seem to stop moving, always fidgeting"},{"value":"a distinctive accent from the {{regionNames}} colonies"},{"value":"old burn marks partially hidden by clothing"}]},{"id":"scarLocations","name":"Scar Locations","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"the left cheek"},{"value":"the forehead"},{"value":"the bridge of the nose"},{"value":"the jawline"},{"value":"the back of the hand"}]},{"id":"eyeColors","name":"Eye Colors","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"deep brown"},{"value":"pale gray"},{"value":"vivid green"},{"value":"artificial chrome"},{"value":"luminous amber"},{"value":"striking violet"}]},{"id":"tattooSubjects","name":"Tattoo Subjects","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"star charts and navigation markers"},{"value":"a former ship's crew roster"},{"value":"memorial names of the fallen"},{"value":"abstract geometric patterns"},{"value":"bioluminescent circuitry designs"},{"value":"a coiled serpent motif"}]},{"id":"cyberneticParts","name":"Cybernetic Parts","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"arm with exposed servo-joints"},{"value":"eye with a faintly glowing iris"},{"value":"throat speaker replacing natural voice"},{"value":"hand with too-precise movements"},{"value":"leg with an industrial-grade build"},{"value":"neural interface port at the temple"}]},{"id":"accessoryItems","name":"Accessory Items","type":"simple","hidden":true,"resultType":"item","entries":[{"value":"worn leather flight jacket"},{"value":"tinted visor obscuring the eyes"},{"value":"antique pocket watch on a chain"},{"value":"military dog tags from a forgotten war"},{"value":"religious medallion from an obscure faith"},{"value":"data-slate that's never put down"}]},{"id":"skinTones","name":"Skin Tones","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"deep blue from colonial gene therapy"},{"value":"metallic bronze from radiation adaptation"},{"value":"pale white from underground living"},{"value":"warm copper from high-UV worlds"},{"value":"faint gray from prolonged space habitation"}]},{"id":"regionNames","name":"Region Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Outer Rim"},{"value":"Coreward"},{"value":"Spinward March"},{"value":"Terminus"},{"value":"Kepler Sector"},{"value":"Frontier"}]},{"id":"characterDemeanors","name":"Character Demeanors","type":"simple","resultType":"description","tags":["characters","personality"],"entries":[{"value":"speaks in clipped, efficient sentences","sets":{"communication":"terse"}},{"value":"laughs easily and finds humor in dark situations","sets":{"communication":"jovial"}},{"value":"maintains an unsettling stillness when listening","sets":{"communication":"intense"}},{"value":"constantly checks exits and keeps back to walls","sets":{"communication":"paranoid"}},{"value":"uses elaborate hand gestures when speaking","sets":{"communication":"expressive"}},{"value":"pauses thoughtfully before each response","sets":{"communication":"measured"}},{"value":"interrupts frequently with tangential observations","sets":{"communication":"scattered"}},{"value":"maintains formal speech patterns regardless of situation","sets":{"communication":"formal"}}]},{"id":"characterMotivations","name":"Character Motivations","type":"simple","resultType":"description","tags":["characters","motivation"],"entries":[{"value":"seeking revenge for a wrong committed decades ago"},{"value":"trying to earn enough credits to buy back a family debt"},{"value":"searching for a missing sibling lost during the last war"},{"value":"running from a past identity that refuses to stay buried"},{"value":"collecting specimens for a personal research obsession"},{"value":"hoping to find a legendary location from old spacer tales"},{"value":"working to expose corruption in a powerful organization"},{"value":"simply trying to survive one more day in a hostile universe"},{"value":"pursuing an art form that requires travel to master"},{"value":"fulfilling a promise made to someone now dead"}]},{"id":"factions","name":"Factions","type":"simple","description":"Major power groups in the setting","resultType":"faction","tags":["factions","organizations"],"entries":[{"value":"The Stellar Hegemony","description":"The remnant of the old empire, clinging to authority through bureaucracy","sets":{"type":"government","colors":"silver and deep purple","symbol":"a crowned star"}},{"value":"Free Traders' Consortium","description":"An alliance of independent merchants who value profit and freedom","sets":{"type":"commercial","colors":"gold and green","symbol":"interlocked rings"}},{"value":"The Reclamation","description":"A faith dedicated to restoring humanity's lost homeworld","sets":{"type":"religious","colors":"white and earth brown","symbol":"a blue sphere"}},{"value":"Syndicate of Shadows","description":"A galaxy-spanning criminal organization with legitimate fronts","sets":{"type":"criminal","colors":"black and crimson","symbol":"a masked face"}},{"value":"The Ascendancy Collective","description":"Those who believe humanity must evolve beyond flesh","sets":{"type":"transhumanist","colors":"chrome and electric blue","symbol":"a rising circuit pattern"}},{"value":"Frontier Defense League","description":"Colonists banded together to protect the outer worlds","sets":{"type":"military","colors":"tan and orange","symbol":"a raised fist holding a star"}}]},{"id":"corporationPrefixes","name":"Corporation Prefixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Apex"},{"value":"Nova"},{"value":"Quantum"},{"value":"Stellar"},{"value":"Omni"},{"value":"Trans"},{"value":"Exo"},{"value":"Mega"},{"value":"Core"},{"value":"Astral"}]},{"id":"corporationSuffixes","name":"Corporation Suffixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Corp"},{"value":"Industries"},{"value":"Dynamics"},{"value":"Systems"},{"value":"Solutions"},{"value":"Holdings"},{"value":"Interstellar"},{"value":"Enterprises"},{"value":"Consortium"},{"value":"Unlimited"}]},{"id":"corporationSpecialties","name":"Corporation Specialties","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"starship manufacturing","sets":{"sector":"industrial"}},{"value":"weapons development","sets":{"sector":"military"}},{"value":"terraforming technology","sets":{"sector":"colonial"}},{"value":"genetic modification services","sets":{"sector":"biotech"}},{"value":"luxury goods and entertainment","sets":{"sector":"consumer"}},{"value":"data brokerage and security","sets":{"sector":"information"}},{"value":"mining and resource extraction","sets":{"sector":"extraction"}},{"value":"medical and pharmaceutical products","sets":{"sector":"healthcare"}}]},{"id":"anomalyTypes","name":"Space Anomaly Types","type":"simple","description":"Strange phenomena encountered in deep space","resultType":"encounter","tags":["space","anomalies","phenomena"],"entries":[{"value":"a gravitational eddy that pulls ships off course","weight":3,"sets":{"dangerLevel":"low","visualDesc":"visible only as distorted starlight"}},{"value":"a nebula cloud crackling with exotic radiation","weight":3,"sets":{"dangerLevel":"medium","visualDesc":"swirling colors of violet and gold"}},{"value":"the wreckage of an ancient vessel of unknown design","weight":2,"sets":{"dangerLevel":"variable","visualDesc":"geometric shapes that hurt to look at directly"}},{"value":"a stable wormhole leading to unknown coordinates","weight":1,"sets":{"dangerLevel":"high","visualDesc":"a perfect circle of absolute darkness ringed with light"}},{"value":"a rogue planet drifting through the void","weight":2,"sets":{"dangerLevel":"low","visualDesc":"a dark sphere occluding distant stars"}},{"value":"crystalline structures growing in vacuum defying known physics","weight":1,"sets":{"dangerLevel":"unknown","visualDesc":"impossible geometries refracting starlight"}},{"value":"a region where electronics behave erratically","weight":2,"sets":{"dangerLevel":"medium","visualDesc":"appears normal until you enter"}},{"value":"the ghostly image of ships that aren't really there","weight":1,"sets":{"dangerLevel":"low","visualDesc":"translucent vessels that fade when approached"}}]},{"id":"cargoCommon","name":"Common Cargo","type":"simple","resultType":"item","tags":["cargo","trade","common"],"defaultSets":{"rarity":"common","legality":"legal"},"entries":[{"value":"processed foodstuffs","sets":{"category":"consumables"}},{"value":"water purification supplies","sets":{"category":"essentials"}},{"value":"textiles and clothing","sets":{"category":"consumer goods"}},{"value":"basic machinery parts","sets":{"category":"industrial"}},{"value":"entertainment media chips","sets":{"category":"data"}},{"value":"agricultural seed stock","sets":{"category":"colonial"}},{"value":"construction materials","sets":{"category":"industrial"}},{"value":"medical supplies","sets":{"category":"essentials"}}]},{"id":"cargoValuable","name":"Valuable Cargo","type":"simple","resultType":"item","tags":["cargo","trade","valuable"],"defaultSets":{"rarity":"uncommon","legality":"legal"},"entries":[{"value":"rare earth elements","sets":{"category":"minerals"}},{"value":"precision scientific instruments","sets":{"category":"technology"}},{"value":"luxury foods and wines","sets":{"category":"consumables"}},{"value":"genetic samples from exotic worlds","sets":{"category":"biotech"}},{"value":"ancient artifacts for collectors","sets":{"category":"antiquities"}},{"value":"encrypted data cores","sets":{"category":"data"}}]},{"id":"cargoRestricted","name":"Restricted Cargo","type":"simple","resultType":"item","tags":["cargo","trade","restricted"],"defaultSets":{"rarity":"rare","legality":"restricted"},"entries":[{"value":"unregistered AI cores","sets":{"category":"technology","legality":"illegal"}},{"value":"military-grade cybernetics","sets":{"category":"military"}},{"value":"psionic enhancement drugs","sets":{"category":"pharmaceuticals"}},{"value":"pre-collapse technology","sets":{"category":"antiquities"}},{"value":"cloned organ shipments","sets":{"category":"biotech"}},{"value":"xeno-archaeological finds","sets":{"category":"antiquities","legality":"permit required"}}]},{"id":"cargoByRarity","name":"Cargo by Rarity","type":"composite","description":"Select cargo with weighted probability by rarity tier","resultType":"item","tags":["cargo","trade"],"sources":[{"tableId":"cargoCommon","weight":7},{"tableId":"cargoValuable","weight":2},{"tableId":"cargoRestricted","weight":1}]},{"id":"allCargo","name":"All Cargo Types","type":"collection","description":"Combined pool of all cargo types","resultType":"item","tags":["cargo","trade"],"collections":["cargoCommon","cargoValuable","cargoRestricted"]},{"id":"tradeStatus","name":"Trade Route Status","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"thriving with regular traffic"},{"value":"disrupted by recent pirate activity"},{"value":"newly established and seeking traders"},{"value":"monopolized by a single corporation"},{"value":"dangerous due to unstable jump points"}]},{"id":"starTypes","name":"Star Types","type":"simple","resultType":"description","tags":["stars","astronomy"],"entries":[{"value":"yellow dwarf","weight":5,"sets":{"color":"warm yellow","habitableZone":"moderate distance"}},{"value":"red dwarf","weight":6,"sets":{"color":"dim red-orange","habitableZone":"very close"}},{"value":"orange giant","weight":2,"sets":{"color":"brilliant orange","habitableZone":"distant"}},{"value":"blue supergiant","weight":1,"sets":{"color":"blazing blue-white","habitableZone":"extremely distant"}},{"value":"binary pair","weight":2,"sets":{"color":"dancing shadows from two suns","habitableZone":"complex patterns"}},{"value":"white dwarf","weight":1,"sets":{"color":"pale white","habitableZone":"none - too dim"}}]},{"id":"systemFeatures","name":"Star System Features","type":"simple","resultType":"description","tags":["systems","features"],"entries":[{"value":"A dense asteroid belt rich in minerals."},{"value":"Multiple gas giants with extensive moon systems."},{"value":"An Oort cloud unusually close to the inner system."},{"value":"Evidence of ancient megastructure construction."},{"value":"Unusual electromagnetic emissions from an unknown source."},{"value":"A Lagrange point station serving as a trade hub."},{"value":"Debris from a recent or ancient space battle."},{"value":"A comet with a spectacular multi-colored tail."},{"value":"Tidally locked worlds with extreme temperature gradients."},{"value":"A Dyson swarm in early construction phases."}]},{"id":"firstNames","name":"First Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Kira"},{"value":"Marcus"},{"value":"Zara"},{"value":"Jax"},{"value":"Elena"},{"value":"Renn"},{"value":"Thalia"},{"value":"Orion"},{"value":"Sage"},{"value":"Dex"},{"value":"Nova"},{"value":"Cole"},{"value":"Lyra"},{"value":"Kael"},{"value":"Mira"},{"value":"Finn"},{"value":"Vex"},{"value":"Aria"},{"value":"Zeke"},{"value":"Quinn"}]},{"id":"surnames","name":"Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Vance"},{"value":"Reyes"},{"value":"Chen"},{"value":"Okonkwo"},{"value":"Volkov"},{"value":"Tanaka"},{"value":"Blackwood"},{"value":"Santos"},{"value":"Cross"},{"value":"Moreau"},{"value":"Starkiller"},{"value":"Voidwalker"},{"value":"Ashford"},{"value":"Kowalski"},{"value":"Drake"},{"value":"Meridian"},{"value":"Frost"},{"value":"Kaine"},{"value":"Shepherd"},{"value":"Zhao"}]},{"id":"nicknames","name":"Nicknames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ghost"},{"value":"Wrench"},{"value":"Lucky"},{"value":"Patches"},{"value":"Cipher"},{"value":"Junker"},{"value":"Doc"},{"value":"Ace"},{"value":"Sparks"},{"value":"Twitch"},{"value":"Zero"},{"value":"Raven"}]},{"id":"professions","name":"Professions","type":"simple","resultType":"description","tags":["characters","professions"],"entries":[{"value":"independent freighter pilot","sets":{"skill":"navigation"}},{"value":"station maintenance technician","sets":{"skill":"repair"}},{"value":"xenobiologist studying alien life","sets":{"skill":"science"}},{"value":"freelance security contractor","sets":{"skill":"combat"}},{"value":"data broker specializing in corporate secrets","sets":{"skill":"information"}},{"value":"salvage operator hunting derelicts","sets":{"skill":"scavenging"}},{"value":"medical officer on a frontier station","sets":{"skill":"medicine"}},{"value":"entertainment performer traveling between worlds","sets":{"skill":"performance"}},{"value":"colonial administrator managing settlements","sets":{"skill":"leadership"}},{"value":"jump drive engineer keeping ships moving","sets":{"skill":"engineering"}}]},{"id":"allCharacterAppearances","name":"All Character Appearances","type":"collection","description":"Combined pool of human and enhanced human appearances","resultType":"description","collections":["humanAppearanceBase","humanAppearanceEnhanced"]},{"id":"weatherConditions","name":"Weather Conditions","type":"simple","resultType":"environment","tags":["environment","weather"],"entries":[{"value":"Clear skies with excellent visibility","sets":{"severity":"calm"}},{"value":"Light precipitation falling steadily","sets":{"severity":"mild"}},{"value":"Heavy cloud cover blocking most sunlight","sets":{"severity":"moderate"}},{"value":"Violent storm with dangerous lightning","sets":{"severity":"severe"}},{"value":"Toxic fog requiring sealed environments","sets":{"severity":"hazardous"}},{"value":"Dust storm reducing visibility to meters","sets":{"severity":"severe"}},{"value":"Eerily calm before an approaching superstorm","sets":{"severity":"ominous"}},{"value":"Meteor shower lighting up the night sky","sets":{"severity":"spectacular"}}]},{"id":"locationAtmospheres","name":"Location Atmospheres","type":"simple","resultType":"description","tags":["locations","atmosphere"],"entries":[{"value":"The air hums with the constant vibration of machinery."},{"value":"A tense silence hangs over everything, broken only by distant echoes."},{"value":"Conversations blend into a warm buzz of activity."},{"value":"Warning lights cast everything in intermittent red flashes."},{"value":"Music from multiple sources creates a chaotic soundscape."},{"value":"The recycled air carries a faint chemical undertone."},{"value":"Footsteps echo sharply on metal grating."},{"value":"The space feels abandoned despite signs of recent activity."}]},{"id":"plotHooks","name":"Plot Hooks","type":"simple","resultType":"hook","tags":["story","hooks"],"entries":[{"value":"A distress signal repeats from coordinates that don't exist on any chart."},{"value":"Someone is paying triple rates for cargo delivery to a quarantined world."},{"value":"An old friend appears after being declared dead for years."},{"value":"A data chip was slipped into someone's pocket on the station."},{"value":"The local authorities are looking for someone matching a crew member's description."},{"value":"A rival crew claims they own the same ship."},{"value":"The cargo started moving on its own during transit."},{"value":"A wealthy patron wants to be smuggled off-world, no questions asked."},{"value":"The station's AI has been sending encrypted messages to unknown recipients."},{"value":"An alien artifact was accidentally included with legitimate salvage."}]},{"id":"rumors","name":"Rumors","type":"simple","resultType":"rumor","tags":["story","rumors"],"entries":[{"value":"They say there's a ghost ship that appears before major disasters."},{"value":"I heard the Hegemony found something in the outer systems they're keeping quiet."},{"value":"Word is {{factions}} is recruiting anyone with a pulse."},{"value":"Someone found a working pre-collapse AI, completely intact."},{"value":"There's a planet out there where everyone who lands starts aging backwards."},{"value":"The {{corporationPrefixes}}{{corporationSuffixes}} CEO hasn't been seen in months - replaced by a synth, maybe."},{"value":"Pirates hit another convoy near the {{regionNames}} beacon."},{"value":"Prices on {{cargoCommon}} are about to spike - buy now."},{"value":"That new station? Built on top of alien ruins. Mark my words."},{"value":"The jump point near {{starNames}} is becoming unstable."}]},{"id":"starNames","name":"Star Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Kepler's Rest"},{"value":"Voidheart"},{"value":"Sanctuary"},{"value":"Duskfall"},{"value":"Meridian"},{"value":"The Beacon"},{"value":"Haven"},{"value":"Terminus"}]},{"id":"complications","name":"Complications","type":"simple","resultType":"complication","tags":["story","complications"],"entries":[{"value":"The person you need to meet is in custody."},{"value":"A third party is also after the same objective."},{"value":"The promised payment is in a currency no one accepts."},{"value":"Environmental conditions have deteriorated dramatically."},{"value":"The contact has been replaced by someone else."},{"value":"Critical equipment malfunctions at the worst moment."},{"value":"An old debt comes due right now."},{"value":"The objective isn't what it was described as."},{"value":"Someone tipped off the authorities."},{"value":"There's a hidden time limit no one mentioned."},{"value":"Multiple complications emerge: {{2*unique*again|\\" Additionally, \\"}}.","weight":1}]},{"id":"sensorReadings","name":"Sensor Readings","type":"simple","resultType":"description","tags":["space","ships","technical"],"entries":[{"value":"Multiple contacts on an intercept course."},{"value":"Unusual energy signature from the asteroid field."},{"value":"Distress beacon, automated, origin unknown."},{"value":"Debris field consistent with recent ship destruction."},{"value":"Gravitational anomaly interfering with navigation."},{"value":"Encrypted transmission on a restricted frequency."},{"value":"Life signs where there shouldn't be any."},{"value":"Radiation spike from the nearby star."},{"value":"Stealth signature - something is trying to hide."},{"value":"Nothing at all - suspiciously empty space."}]}]`),Lj=[{id:"shipDescription",name:"Complete Ship Description",description:"Generates a full ship with name, class, condition, and quirks",resultType:"description",tags:["ships","generator"],shared:{$class:"{{shipClasses}}",$condition:"{{shipConditions}}"},pattern:`## {{shipPrefixes}} *{{shipNameFirst}} {{shipNameSecond}}*

A **{{$class}}** that is {{$condition}}.

**Silhouette:** {{$class.@silhouette}}

**Crew Complement:** {{$class.@crew}}

**Notable Quirk:** {{shipQuirks}}`},{id:"planetDescription",name:"Complete Planet Description",description:"Generates a full planetary description",resultType:"description",tags:["planets","generator"],shared:{$planet:"{{planetTypes}}",$settlement:"{{settlementSizes}}"},pattern:`## {{@self.description}}

**Classification:** {{$planet}}

**Atmosphere:** {{$planet.@atmosphere}}

**Surface:** {{$planet.@surfaceDesc}}

**Sky:** The sky here is {{$planet.@skyColor}}.

**Notable Feature:** {{planetaryFeatures}}

### Primary Settlement
The main population center is {{$settlement.@description}} - population approximately {{$settlement.@population}}.`},{id:"stationDescription",name:"Complete Station Description",description:"Generates a full space station description",resultType:"location",tags:["stations","generator"],shared:{$type:"{{stationTypes}}",$status:"{{stationConditions}}"},pattern:`## Space Station: {{shipNameFirst}} {{stationTypes}}

**Type:** {{$type}} - {{$type.@purpose}}

**Status:** Currently {{$status}}

**Architecture:** {{$type.@architecture}}

**Gravity:** {{$type.@gravity}}

**Atmosphere:** {{$type.@atmosphere}}

**Current Buzz:** {{locationAtmospheres}}`},{id:"alienSpeciesProfile",name:"Alien Species Profile",description:"Generates a description of an alien species",resultType:"description",tags:["aliens","species","generator"],shared:{$appearance:"{{alienSpeciesAppearance}}"},pattern:`## Species Profile

**Physical Description:** {{$appearance}}

**Body Type:** {{$appearance.@bodyType}}

**Distinctive Trait:** {{$appearance.@distinctFeature}}

**Cultural Note:** Members of this species {{alienCulturalTraits}}`},{id:"characterProfile",name:"Complete Character Profile",description:"Generates a full character description with name, appearance, and personality",resultType:"npc",tags:["characters","generator"],shared:{$appearance:"{{allCharacterAppearances}}",$demeanor:"{{characterDemeanors}}"},pattern:`## {{firstNames}} "{{nicknames}}" {{surnames}}

**Profession:** {{professions}}

**Physical Description:** They are {{$appearance}}, with {{characterDistinguishingFeatures}}.

**Demeanor:** {{$demeanor}}

**Motivation:** {{characterMotivations}}`},{id:"corporationProfile",name:"Corporation Profile",description:"Generates a corporation with name and specialty",resultType:"faction",tags:["corporations","factions","generator"],shared:{$specialty:"{{corporationSpecialties}}"},pattern:`## {{corporationPrefixes}}{{corporationSuffixes}}

**Primary Business:** {{$specialty}}

**Sector:** {{$specialty.@sector}}

**Reputation:** A {{dice:1d6}} on the trust scale (1 = reviled, 6 = respected)`},{id:"starSystemDescription",name:"Star System Description",description:"Generates a complete star system",resultType:"location",tags:["systems","space","generator"],shared:{$star:"{{starTypes}}",planetCount:"{{dice:1d6+1}}"},pattern:`## The {{starNames}} System

**Primary Star:** A {{$star}} casting {{$star.@color}} light across the system.

**Habitable Zone:** {{$star.@habitableZone}}

**Planets:** {{$planetCount}} worlds orbit this star.

**System Age:** Approximately {{$systemAge}} billion years.

**Notable Features:**
{{2*unique*systemFeatures|"\\n"}}

**Dominant Influence:** {{$dominantFaction}}

**Trade Status:** Routes here are {{tradeRouteStatus}}.`},{id:"encounterDescription",name:"Space Encounter",description:"Generates what you find in space",resultType:"encounter",tags:["space","encounters","generator"],shared:{$anomaly:"{{anomalyTypes}}"},pattern:`## Sensors Detect...

**Initial Reading:** {{sensorReadings}}

**Upon Investigation:** You find {{$anomaly}}.

**Visual:** {{$anomaly.@visualDesc}}

**Threat Assessment:** {{$anomaly.@dangerLevel}}`},{id:"cargoManifest",name:"Cargo Manifest",description:"Generates a ship's cargo hold contents",resultType:"item",tags:["cargo","trade","generator"],shared:{cargoCount:"{{dice:2d4}}"},pattern:`## Cargo Manifest

**Number of Lots:** {{$cargoCount}}

**Contents:**
{{$cargoCount*unique*cargoByRarity|"\\n"}}

**Inspection Notes:** Standard customs procedures apply.`},{id:"sessionStarter",name:"Session Starter",description:"Generates a complete session opening scenario",resultType:"description",tags:["story","generator"],shared:{$hook:"{{plotHooks}}",$rumor:"{{rumors}}",$complication:"{{complications}}"},pattern:`## Session Opening

### The Hook
{{$hook}}

### What People Are Saying
"{{$rumor}}"

### Hidden Complication
{{$complication}}

### Current Weather
{{weatherConditions}}`},{id:"factionBriefing",name:"Faction Briefing",description:"Generates information about a faction in the setting",resultType:"faction",tags:["factions","generator"],shared:{$faction:"{{factions}}"},pattern:`## Faction Dossier: {{$faction}}

**Type:** {{$faction.@type}}

**Description:** {{$faction.@description}}

**Identifying Colors:** {{$faction.@colors}}

**Symbol:** {{$faction.@symbol}}

**Current Status:** {{$faction}} is currently {{stationConditions}} in this region.`},{id:"quickNPC",name:"Quick NPC",description:"Rapid NPC generation for on-the-fly encounters",resultType:"npc",tags:["characters","quick"],pattern:"**{{firstNames}} {{surnames}}** - {{professions}}, {{characterDemeanors}}"},{id:"multipleNPCs",name:"Multiple NPCs",description:"Generates several NPCs at once",resultType:"npc",tags:["characters","generator"],shared:{npcCount:"{{dice:1d4+2}}"},pattern:`## NPC Group ({{$npcCount}} individuals)

{{$npcCount*quickNPC|"\\n\\n"}}`}],zj={metadata:Mj,variables:Fj,shared:Oj,tables:Pj,templates:Lj},Bj={name:"Fantasy NPC Generator",namespace:"rolldeo.fantasy.npc",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A comprehensive, system-agnostic NPC generator for tabletop roleplaying games. Generates complete character descriptions including appearance, personality, background, and social details.",instructions:"Roll on the `fullNPC` template for a complete NPC description, or roll individual tables for specific attributes. All generated NPCs have their properties available via the `@npc` placeholder for use in other tables.",tags:["npc","character","generator","fantasy","system-agnostic","ttrpg"],source:{license:"CC0",copyright:{year:"2024",notice:"Free to use, modify, and distribute with or without attribution."}},rights:{type:"open-content",permissions:{commercialUse:!0,modification:!0,redistribution:!0,derivativeWorks:!0,attributionRequired:!0}},maxRecursionDepth:50,maxInheritanceDepth:5},Uj={defaultSeparator:", "},Hj=JSON.parse(`[{"id":"race","name":"Race","type":"simple","description":"The character's ancestry or species.","resultType":"trait","tags":["identity","race","ancestry"],"entries":[{"id":"human","value":"Human","weight":4,"description":"Versatile and ambitious, humans are found in nearly every corner of the world.","sets":{"raceId":"human","lifespan":"average","typicalHeight":"average"}},{"id":"elf","value":"Elf","weight":2,"description":"Long-lived and graceful, elves possess an innate connection to magic and nature.","sets":{"raceId":"elf","lifespan":"very long","typicalHeight":"tall and slender"}},{"id":"dwarf","value":"Dwarf","weight":2,"description":"Stout and resilient, dwarves are master craftspeople with strong clan ties.","sets":{"raceId":"dwarf","lifespan":"long","typicalHeight":"short and stocky"}},{"id":"halfling","value":"Halfling","weight":1.5,"description":"Small but brave, halflings value comfort, community, and a good meal.","sets":{"raceId":"halfling","lifespan":"average","typicalHeight":"small"}},{"id":"orc","value":"Orc","weight":1,"description":"Powerful and proud, orcs value strength, honor, and tribal loyalty.","sets":{"raceId":"orc","lifespan":"short","typicalHeight":"tall and muscular"}},{"id":"gnome","value":"Gnome","weight":1,"description":"Curious and inventive, gnomes delight in discovery and clever solutions.","sets":{"raceId":"gnome","lifespan":"long","typicalHeight":"small"}}]},{"id":"gender","name":"Gender","type":"simple","description":"The character's gender identity.","resultType":"trait","tags":["identity","gender"],"entries":[{"id":"male","value":"Male","weight":1,"sets":{"genderId":"male","pronoun":"he","possessive":"his","object":"him"}},{"id":"female","value":"Female","weight":1,"sets":{"genderId":"female","pronoun":"she","possessive":"her","object":"her"}},{"id":"nonbinary","value":"Non-binary","weight":0.2,"sets":{"genderId":"nonbinary","pronoun":"they","possessive":"their","object":"them"}}]},{"id":"humanMaleNames","name":"Human Male Names","type":"simple","resultType":"name","tags":["name","human","male"],"hidden":true,"entries":[{"value":"Aldric"},{"value":"Bram"},{"value":"Cedric"},{"value":"Darian"},{"value":"Edmund"},{"value":"Felix"},{"value":"Gareth"},{"value":"Henrik"},{"value":"Ivan"},{"value":"Jasper"},{"value":"Kellan"},{"value":"Liam"},{"value":"Marcus"},{"value":"Nathaniel"},{"value":"Oliver"},{"value":"Pierce"},{"value":"Quentin"},{"value":"Roland"},{"value":"Sebastian"},{"value":"Theron"},{"value":"Victor"},{"value":"William"},{"value":"Xavier"},{"value":"Zachariah"},{"value":"Conrad"},{"value":"Dorian"},{"value":"Evander"},{"value":"Finnegan"},{"value":"Gregory"},{"value":"Harrison"},{"value":"Isaac"},{"value":"Julian"}]},{"id":"humanFemaleNames","name":"Human Female Names","type":"simple","resultType":"name","tags":["name","human","female"],"hidden":true,"entries":[{"value":"Adeline"},{"value":"Beatrice"},{"value":"Cordelia"},{"value":"Diana"},{"value":"Eleanor"},{"value":"Fiona"},{"value":"Gwendolyn"},{"value":"Helena"},{"value":"Isolde"},{"value":"Juliana"},{"value":"Katherine"},{"value":"Lydia"},{"value":"Margaret"},{"value":"Natalia"},{"value":"Ophelia"},{"value":"Priscilla"},{"value":"Quinn"},{"value":"Rosalind"},{"value":"Seraphina"},{"value":"Theodora"},{"value":"Ursula"},{"value":"Victoria"},{"value":"Willow"},{"value":"Yolanda"},{"value":"Arabella"},{"value":"Cassandra"},{"value":"Evangeline"},{"value":"Genevieve"},{"value":"Imogen"},{"value":"Josephine"},{"value":"Lavinia"},{"value":"Miriam"}]},{"id":"elfMaleNames","name":"Elf Male Names","type":"simple","resultType":"name","tags":["name","elf","male"],"hidden":true,"entries":[{"value":"Aelindor"},{"value":"Caelum"},{"value":"Erevan"},{"value":"Faelyn"},{"value":"Galadron"},{"value":"Ilmarin"},{"value":"Kethryl"},{"value":"Lorandil"},{"value":"Miravel"},{"value":"Naeloth"},{"value":"Orenthal"},{"value":"Phaeron"},{"value":"Quelindor"},{"value":"Raelon"},{"value":"Silvanus"},{"value":"Thalion"},{"value":"Vaelin"},{"value":"Aerindel"},{"value":"Belanor"},{"value":"Celeborn"},{"value":"Elrohir"},{"value":"Findarion"},{"value":"Glorindel"},{"value":"Haldir"},{"value":"Ithildin"},{"value":"Luthien"},{"value":"Melian"},{"value":"Nimrodel"},{"value":"Oropher"},{"value":"Thranduil"},{"value":"Voronwe"},{"value":"Zephyros"}]},{"id":"elfFemaleNames","name":"Elf Female Names","type":"simple","resultType":"name","tags":["name","elf","female"],"hidden":true,"entries":[{"value":"Aelindra"},{"value":"Caelindis"},{"value":"Elowen"},{"value":"Faelwen"},{"value":"Galadriel"},{"value":"Ilmariel"},{"value":"Kethira"},{"value":"Liriel"},{"value":"Miraviel"},{"value":"Naelotha"},{"value":"Orenthia"},{"value":"Phaeril"},{"value":"Quelindra"},{"value":"Raelindis"},{"value":"Silvanesti"},{"value":"Thalindra"},{"value":"Vaelindis"},{"value":"Aerindel"},{"value":"Arwen"},{"value":"Celebrian"},{"value":"Elerith"},{"value":"Finduilas"},{"value":"Gilraen"},{"value":"Idril"},{"value":"Lothiriel"},{"value":"Mithrellas"},{"value":"Nimloth"},{"value":"Aredhel"},{"value":"Seriniel"},{"value":"Tinuviel"},{"value":"Yavanna"},{"value":"Ithilwen"}]},{"id":"dwarfMaleNames","name":"Dwarf Male Names","type":"simple","resultType":"name","tags":["name","dwarf","male"],"hidden":true,"entries":[{"value":"Balin"},{"value":"Dain"},{"value":"Fargrim"},{"value":"Gundrik"},{"value":"Harbek"},{"value":"Kildrak"},{"value":"Morgran"},{"value":"Orsik"},{"value":"Rurik"},{"value":"Thoradin"},{"value":"Ulfgar"},{"value":"Vondal"},{"value":"Adrik"},{"value":"Brottor"},{"value":"Darrak"},{"value":"Eberk"},{"value":"Gardain"},{"value":"Hjolman"},{"value":"Kilvar"},{"value":"Moradin"},{"value":"Nuraval"},{"value":"Oskar"},{"value":"Ragnar"},{"value":"Tordek"},{"value":"Thrain"},{"value":"Gimrik"},{"value":"Brundar"},{"value":"Dolgrim"},{"value":"Kotri"},{"value":"Norrak"},{"value":"Storn"},{"value":"Beldrak"}]},{"id":"dwarfFemaleNames","name":"Dwarf Female Names","type":"simple","resultType":"name","tags":["name","dwarf","female"],"hidden":true,"entries":[{"value":"Anbera"},{"value":"Bardryn"},{"value":"Dagnal"},{"value":"Diesa"},{"value":"Eldeth"},{"value":"Falkrunn"},{"value":"Gunnloda"},{"value":"Helja"},{"value":"Kathra"},{"value":"Kristryd"},{"value":"Liftrasa"},{"value":"Mardred"},{"value":"Riswynn"},{"value":"Sannl"},{"value":"Torbera"},{"value":"Vistra"},{"value":"Artin"},{"value":"Brynja"},{"value":"Dagna"},{"value":"Embrel"},{"value":"Gretta"},{"value":"Hlin"},{"value":"Ilde"},{"value":"Kira"},{"value":"Lofthild"},{"value":"Moira"},{"value":"Nora"},{"value":"Olga"},{"value":"Runia"},{"value":"Sigrun"},{"value":"Thora"},{"value":"Ulla"}]},{"id":"halflingMaleNames","name":"Halfling Male Names","type":"simple","resultType":"name","tags":["name","halfling","male"],"hidden":true,"entries":[{"value":"Alton"},{"value":"Bilbo"},{"value":"Corrin"},{"value":"Dannad"},{"value":"Eldon"},{"value":"Finnan"},{"value":"Garrett"},{"value":"Hob"},{"value":"Ives"},{"value":"Jasper"},{"value":"Kithri"},{"value":"Lyle"},{"value":"Milo"},{"value":"Nebin"},{"value":"Osborn"},{"value":"Perrin"},{"value":"Roscoe"},{"value":"Sam"},{"value":"Tobias"},{"value":"Wellby"},{"value":"Adelard"},{"value":"Bungo"},{"value":"Cade"},{"value":"Drogo"},{"value":"Erling"},{"value":"Falco"},{"value":"Gorbo"},{"value":"Hamfast"},{"value":"Largo"},{"value":"Merric"},{"value":"Pip"},{"value":"Roderic"}]},{"id":"halflingFemaleNames","name":"Halfling Female Names","type":"simple","resultType":"name","tags":["name","halfling","female"],"hidden":true,"entries":[{"value":"Andry"},{"value":"Belladonna"},{"value":"Callie"},{"value":"Dora"},{"value":"Euphemia"},{"value":"Floria"},{"value":"Gilly"},{"value":"Hildy"},{"value":"Ivy"},{"value":"Jillian"},{"value":"Kithri"},{"value":"Lidda"},{"value":"Marigold"},{"value":"Nedda"},{"value":"Paela"},{"value":"Portia"},{"value":"Rosie"},{"value":"Seraphina"},{"value":"Tilly"},{"value":"Verna"},{"value":"Amaryllis"},{"value":"Bree"},{"value":"Charmaine"},{"value":"Daisy"},{"value":"Esmerelda"},{"value":"Fern"},{"value":"Gretchen"},{"value":"Hanna"},{"value":"Lavinia"},{"value":"Merla"},{"value":"Pearl"},{"value":"Ruby"}]},{"id":"orcMaleNames","name":"Orc Male Names","type":"simple","resultType":"name","tags":["name","orc","male"],"hidden":true,"entries":[{"value":"Azgul"},{"value":"Brakka"},{"value":"Dench"},{"value":"Feng"},{"value":"Gell"},{"value":"Henk"},{"value":"Holg"},{"value":"Imsh"},{"value":"Karash"},{"value":"Krusk"},{"value":"Lortar"},{"value":"Mhurren"},{"value":"Nar"},{"value":"Ovak"},{"value":"Ront"},{"value":"Shump"},{"value":"Thokk"},{"value":"Urzul"},{"value":"Varg"},{"value":"Yurk"},{"value":"Bagrak"},{"value":"Druuk"},{"value":"Ghazat"},{"value":"Gruumsh"},{"value":"Korgak"},{"value":"Mugdol"},{"value":"Nargol"},{"value":"Orog"},{"value":"Ragash"},{"value":"Skullcrusher"},{"value":"Tarak"},{"value":"Zorn"}]},{"id":"orcFemaleNames","name":"Orc Female Names","type":"simple","resultType":"name","tags":["name","orc","female"],"hidden":true,"entries":[{"value":"Baggi"},{"value":"Emen"},{"value":"Engong"},{"value":"Kansif"},{"value":"Myev"},{"value":"Neega"},{"value":"Ovak"},{"value":"Ownka"},{"value":"Shautha"},{"value":"Sutha"},{"value":"Vola"},{"value":"Volen"},{"value":"Yevelda"},{"value":"Zara"},{"value":"Brukka"},{"value":"Drenna"},{"value":"Gorza"},{"value":"Hrakna"},{"value":"Krata"},{"value":"Murook"},{"value":"Narza"},{"value":"Orsha"},{"value":"Ragash"},{"value":"Shelur"},{"value":"Thura"},{"value":"Umara"},{"value":"Volga"},{"value":"Yazga"},{"value":"Zulgha"},{"value":"Arza"},{"value":"Bulgha"},{"value":"Durza"}]},{"id":"gnomeMaleNames","name":"Gnome Male Names","type":"simple","resultType":"name","tags":["name","gnome","male"],"hidden":true,"entries":[{"value":"Alston"},{"value":"Boddynock"},{"value":"Brocc"},{"value":"Burgell"},{"value":"Dimble"},{"value":"Eldon"},{"value":"Erky"},{"value":"Fonkin"},{"value":"Frug"},{"value":"Gerbo"},{"value":"Gimble"},{"value":"Glim"},{"value":"Jebeddo"},{"value":"Kellen"},{"value":"Namfoodle"},{"value":"Orryn"},{"value":"Roondar"},{"value":"Seebo"},{"value":"Sindri"},{"value":"Warryn"},{"value":"Wrenn"},{"value":"Zook"},{"value":"Alvyn"},{"value":"Bimpnottin"},{"value":"Caramip"},{"value":"Dabbledob"},{"value":"Fibblestib"},{"value":"Ningel"},{"value":"Queck"},{"value":"Torbalt"},{"value":"Wim"},{"value":"Zibbo"}]},{"id":"gnomeFemaleNames","name":"Gnome Female Names","type":"simple","resultType":"name","tags":["name","gnome","female"],"hidden":true,"entries":[{"value":"Bimpnottin"},{"value":"Breena"},{"value":"Caramip"},{"value":"Carlin"},{"value":"Donella"},{"value":"Duvamil"},{"value":"Ella"},{"value":"Ellyjobell"},{"value":"Ellywick"},{"value":"Lilli"},{"value":"Loopmottin"},{"value":"Lorilla"},{"value":"Mardnab"},{"value":"Nissa"},{"value":"Nyx"},{"value":"Oda"},{"value":"Orla"},{"value":"Roywyn"},{"value":"Shamil"},{"value":"Tana"},{"value":"Waywocket"},{"value":"Zanna"},{"value":"Aripine"},{"value":"Dabbledob"},{"value":"Felicity"},{"value":"Ginny"},{"value":"Helda"},{"value":"Ivy"},{"value":"Kelda"},{"value":"Mipsy"},{"value":"Nipsy"},{"value":"Sparkle"}]},{"id":"neutralNames","name":"Gender-Neutral Names","type":"simple","resultType":"name","tags":["name","neutral","nonbinary"],"hidden":true,"description":"Names that work for any gender across most races.","entries":[{"value":"Ash"},{"value":"River"},{"value":"Storm"},{"value":"Sage"},{"value":"Wren"},{"value":"Quinn"},{"value":"Rowan"},{"value":"Morgan"},{"value":"Ellis"},{"value":"Avery"},{"value":"Blair"},{"value":"Cameron"},{"value":"Dana"},{"value":"Emery"},{"value":"Finley"},{"value":"Harper"},{"value":"Indigo"},{"value":"Jaden"},{"value":"Kai"},{"value":"Lake"},{"value":"Marlowe"},{"value":"Noel"},{"value":"Onyx"},{"value":"Phoenix"},{"value":"Rain"},{"value":"Skylar"},{"value":"Tatum"},{"value":"Winter"},{"value":"Vale"},{"value":"Zephyr"},{"value":"Sparrow"},{"value":"Cedar"}]},{"id":"surname","name":"Surnames","type":"simple","resultType":"name","tags":["name","surname","family"],"description":"Family names or descriptive epithets.","entries":[{"value":"Ashford"},{"value":"Blackwood"},{"value":"Brightblade"},{"value":"Coldwell"},{"value":"Darkholme"},{"value":"Evenwood"},{"value":"Farrow"},{"value":"Goldleaf"},{"value":"Hawthorne"},{"value":"Ironforge"},{"value":"Jasperstone"},{"value":"Kettleburn"},{"value":"Lightfoot"},{"value":"Moonwhisper"},{"value":"Nightingale"},{"value":"Oakheart"},{"value":"Proudfoot"},{"value":"Quicksilver"},{"value":"Ravenswood"},{"value":"Silverstream"},{"value":"Thornwood"},{"value":"Underhill"},{"value":"Valeheart"},{"value":"Winterborn"},{"value":"Stormwind"},{"value":"Firebrand"},{"value":"Stonehammer"},{"value":"Swiftarrow"},{"value":"Duskwalker"},{"value":"Brightwater"},{"value":"Grimshaw"},{"value":"Meadowbrook"}]},{"id":"age","name":"Age Category","type":"simple","resultType":"trait","tags":["physical","age"],"entries":[{"id":"young","value":"young","weight":1.5,"sets":{"ageDescriptor":"youthful energy","ageModifier":"fresh-faced"}},{"id":"adult","value":"adult","weight":3,"sets":{"ageDescriptor":"full maturity","ageModifier":"mature"}},{"id":"middleaged","value":"middle-aged","weight":2,"sets":{"ageDescriptor":"experienced wisdom","ageModifier":"seasoned"}},{"id":"elderly","value":"elderly","weight":1,"sets":{"ageDescriptor":"venerable age","ageModifier":"weathered"}}]},{"id":"height","name":"Relative Height","type":"simple","resultType":"trait","tags":["physical","height","build"],"entries":[{"value":"unusually short","weight":0.5},{"value":"short","weight":1.5},{"value":"average height","weight":3},{"value":"tall","weight":1.5},{"value":"unusually tall","weight":0.5}]},{"id":"build","name":"Physical Build","type":"simple","resultType":"trait","tags":["physical","build","body"],"entries":[{"value":"thin and wiry","weight":1},{"value":"slender","weight":1.5},{"value":"average build","weight":2},{"value":"stocky","weight":1.5},{"value":"heavyset","weight":1},{"value":"athletic","weight":1.5},{"value":"muscular","weight":1},{"value":"broad-shouldered","weight":1},{"value":"lean and angular","weight":0.8},{"value":"soft and rounded","weight":0.8}]},{"id":"hairColor","name":"Hair Color","type":"simple","resultType":"trait","tags":["physical","hair","color"],"entries":[{"value":"black","weight":2},{"value":"dark brown","weight":2},{"value":"brown","weight":2},{"value":"light brown","weight":1.5},{"value":"auburn","weight":1},{"value":"red","weight":0.8},{"value":"strawberry blonde","weight":0.5},{"value":"blonde","weight":1.5},{"value":"platinum blonde","weight":0.3},{"value":"gray","weight":1},{"value":"white","weight":0.5},{"value":"silver","weight":0.3},{"value":"salt-and-pepper","weight":0.8}]},{"id":"hairStyle","name":"Hair Style","type":"simple","resultType":"trait","tags":["physical","hair","style"],"entries":[{"value":"long and flowing","weight":1},{"value":"long and braided","weight":1},{"value":"shoulder-length","weight":1.5},{"value":"short and neat","weight":2},{"value":"cropped close","weight":1},{"value":"wild and untamed","weight":0.8},{"value":"pulled back in a ponytail","weight":1},{"value":"tied in a practical bun","weight":1},{"value":"shaved on the sides","weight":0.5},{"value":"completely bald","weight":0.5},{"value":"receding","weight":0.5},{"value":"curly and thick","weight":1},{"value":"wavy","weight":1},{"value":"straight and fine","weight":1},{"value":"elaborately styled","weight":0.5}]},{"id":"eyeColor","name":"Eye Color","type":"simple","resultType":"trait","tags":["physical","eyes","color"],"entries":[{"value":"brown","weight":3},{"value":"dark brown","weight":2},{"value":"hazel","weight":1.5},{"value":"green","weight":1},{"value":"blue","weight":1.5},{"value":"gray","weight":1},{"value":"amber","weight":0.5},{"value":"pale blue","weight":0.5},{"value":"violet","weight":0.2},{"value":"golden","weight":0.2},{"value":"mismatched","weight":0.1}]},{"id":"skinTone","name":"Skin Tone","type":"simple","resultType":"trait","tags":["physical","skin","appearance"],"entries":[{"value":"pale","weight":1},{"value":"fair","weight":1.5},{"value":"light","weight":1.5},{"value":"olive","weight":1.5},{"value":"tan","weight":1.5},{"value":"brown","weight":1.5},{"value":"dark brown","weight":1},{"value":"deep brown","weight":1},{"value":"weathered","weight":0.8},{"value":"sun-bronzed","weight":0.8},{"value":"freckled","weight":0.5},{"value":"ruddy","weight":0.5}]},{"id":"facialFeature","name":"Facial Feature","type":"simple","resultType":"trait","tags":["physical","face","feature"],"entries":[{"value":"a strong jawline","weight":1},{"value":"high cheekbones","weight":1},{"value":"a prominent nose","weight":1},{"value":"thin lips","weight":1},{"value":"full lips","weight":1},{"value":"a cleft chin","weight":0.5},{"value":"a broad forehead","weight":0.8},{"value":"deep-set eyes","weight":0.8},{"value":"wide-set eyes","weight":0.8},{"value":"a crooked nose","weight":0.5},{"value":"a dimpled smile","weight":0.5},{"value":"a permanent scowl","weight":0.3},{"value":"laugh lines","weight":0.8},{"value":"a perpetually furrowed brow","weight":0.5},{"value":"sharp, angular features","weight":0.8},{"value":"soft, rounded features","weight":0.8}]},{"id":"distinguishingMark","name":"Distinguishing Mark","type":"simple","resultType":"trait","tags":["physical","distinctive","mark"],"entries":[{"value":"a scar across the cheek","weight":1},{"value":"a scar over one eye","weight":0.8},{"value":"a burn scar on one hand","weight":0.5},{"value":"a birthmark on the neck","weight":0.8},{"value":"a prominent tattoo","weight":1},{"value":"multiple small scars","weight":0.8},{"value":"a missing finger","weight":0.3},{"value":"a chipped tooth","weight":0.5},{"value":"a gold tooth","weight":0.3},{"value":"unusually pointed ears","weight":0.3},{"value":"a distinctive mole","weight":0.8},{"value":"a port-wine birthmark","weight":0.3},{"value":"ritual scarification","weight":0.2},{"value":"numerous piercings","weight":0.5},{"value":"a streak of white in their hair","weight":0.3},{"value":"a noticeable limp","weight":0.3},{"value":"no distinguishing marks","weight":2}]},{"id":"personalityTrait","name":"Personality Trait","type":"simple","resultType":"trait","tags":["personality","trait","behavior"],"entries":[{"value":"cheerful and optimistic","sets":{"mood":"positive"}},{"value":"serious and focused","sets":{"mood":"neutral"}},{"value":"cautious and deliberate","sets":{"mood":"neutral"}},{"value":"impulsive and spontaneous","sets":{"mood":"energetic"}},{"value":"quiet and observant","sets":{"mood":"reserved"}},{"value":"loud and boisterous","sets":{"mood":"energetic"}},{"value":"cynical and world-weary","sets":{"mood":"negative"}},{"value":"curious and inquisitive","sets":{"mood":"positive"}},{"value":"kind and compassionate","sets":{"mood":"positive"}},{"value":"stern and unyielding","sets":{"mood":"neutral"}},{"value":"charming and persuasive","sets":{"mood":"positive"}},{"value":"suspicious and paranoid","sets":{"mood":"negative"}},{"value":"humble and self-deprecating","sets":{"mood":"reserved"}},{"value":"proud and confident","sets":{"mood":"energetic"}},{"value":"shy and retiring","sets":{"mood":"reserved"}},{"value":"ambitious and driven","sets":{"mood":"energetic"}},{"value":"patient and understanding","sets":{"mood":"positive"}},{"value":"hot-tempered and quick to anger","sets":{"mood":"negative"}},{"value":"melancholic and wistful","sets":{"mood":"negative"}},{"value":"practical and no-nonsense","sets":{"mood":"neutral"}},{"value":"idealistic and hopeful","sets":{"mood":"positive"}},{"value":"sarcastic and dry-witted","sets":{"mood":"neutral"}},{"value":"nurturing and protective","sets":{"mood":"positive"}},{"value":"competitive and driven","sets":{"mood":"energetic"}},{"value":"philosophical and contemplative","sets":{"mood":"reserved"}}]},{"id":"secondaryTrait","name":"Secondary Personality Trait","type":"simple","resultType":"trait","tags":["personality","trait","secondary"],"entries":[{"value":"fiercely loyal to friends"},{"value":"deeply superstitious"},{"value":"obsessed with cleanliness"},{"value":"prone to long silences"},{"value":"quick with a joke or story"},{"value":"constantly hungry or snacking"},{"value":"deeply religious or spiritual"},{"value":"uncomfortable around strangers"},{"value":"compulsively honest"},{"value":"prone to exaggeration"},{"value":"obsessed with a particular hobby"},{"value":"terrible with names"},{"value":"exceptionally polite"},{"value":"blunt to the point of rudeness"},{"value":"constantly worried about money"},{"value":"fascinated by the arcane"},{"value":"deeply nostalgic for the past"},{"value":"always looking to the future"},{"value":"distrustful of authority"},{"value":"respectful of tradition"}]},{"id":"flaw","name":"Character Flaw","type":"simple","resultType":"trait","tags":["personality","flaw","weakness"],"entries":[{"value":"drinks too much","weight":1.5},{"value":"gambles compulsively","weight":1},{"value":"cannot keep a secret","weight":1},{"value":"holds grudges forever","weight":1},{"value":"too trusting of others","weight":1},{"value":"trusts no one","weight":1},{"value":"prone to jealousy","weight":1},{"value":"greedy for wealth","weight":1.2},{"value":"craves recognition and praise","weight":1},{"value":"easily distracted","weight":1},{"value":"terrified of a common thing","weight":0.8},{"value":"chronically late","weight":0.8},{"value":"cannot resist a pretty face","weight":0.8},{"value":"too stubborn to admit being wrong","weight":1.2},{"value":"cripplingly indecisive","weight":0.8},{"value":"lies about small things habitually","weight":1},{"value":"takes unnecessary risks","weight":1},{"value":"overly critical of others","weight":1},{"value":"cannot let go of the past","weight":1},{"value":"avoids conflict at all costs","weight":0.8}]},{"id":"mannerism","name":"Mannerism or Habit","type":"simple","resultType":"trait","tags":["personality","mannerism","habit"],"entries":[{"value":"fidgets with a piece of jewelry"},{"value":"drums fingers when thinking"},{"value":"constantly adjusts their clothing"},{"value":"twirls hair around a finger"},{"value":"cracks knuckles frequently"},{"value":"hums or whistles unconsciously"},{"value":"paces when anxious"},{"value":"strokes their chin when thinking"},{"value":"tilts head when listening"},{"value":"speaks with hands expressively"},{"value":"touches face frequently"},{"value":"stands with arms crossed"},{"value":"leans in close when speaking"},{"value":"maintains uncomfortable eye contact"},{"value":"avoids eye contact"},{"value":"chews on their lip"},{"value":"bounces leg when seated"},{"value":"sniffs frequently"},{"value":"clears throat before speaking"},{"value":"laughs nervously"},{"value":"uses elaborate hand gestures"},{"value":"squints when concentrating"},{"value":"taps foot impatiently"},{"value":"runs hand through hair"}]},{"id":"voiceStyle","name":"Voice and Speech Pattern","type":"simple","resultType":"trait","tags":["personality","voice","speech"],"entries":[{"value":"speaks in a deep, rumbling voice"},{"value":"has a high, reedy voice"},{"value":"speaks softly, almost a whisper"},{"value":"speaks loudly and projects well"},{"value":"has a melodious, pleasant voice"},{"value":"has a harsh, gravelly voice"},{"value":"speaks very quickly"},{"value":"speaks slowly and deliberately"},{"value":"has a noticeable accent"},{"value":"speaks with formal, precise diction"},{"value":"uses simple, direct language"},{"value":"peppers speech with colorful profanity"},{"value":"uses many flowery phrases"},{"value":"stutters slightly when nervous"},{"value":"has a slight lisp"},{"value":"trails off mid-sentence frequently"},{"value":"interrupts others often"},{"value":"pauses dramatically for effect"},{"value":"laughs frequently while talking"},{"value":"sighs heavily between sentences"},{"value":"uses many proverbs and sayings"},{"value":"asks rhetorical questions constantly"}]},{"id":"motivation","name":"Primary Motivation","type":"simple","resultType":"trait","tags":["personality","motivation","goal"],"entries":[{"value":"seeks wealth and financial security","sets":{"motivationType":"material"}},{"value":"desires power and influence","sets":{"motivationType":"power"}},{"value":"wants recognition and fame","sets":{"motivationType":"status"}},{"value":"seeks knowledge and understanding","sets":{"motivationType":"intellectual"}},{"value":"wants to protect their family","sets":{"motivationType":"family"}},{"value":"desires revenge against a wrongdoer","sets":{"motivationType":"revenge"}},{"value":"seeks redemption for past mistakes","sets":{"motivationType":"redemption"}},{"value":"wants to find true love","sets":{"motivationType":"love"}},{"value":"desires adventure and excitement","sets":{"motivationType":"adventure"}},{"value":"seeks spiritual enlightenment","sets":{"motivationType":"spiritual"}},{"value":"wants to leave a lasting legacy","sets":{"motivationType":"legacy"}},{"value":"desires simple peace and quiet","sets":{"motivationType":"peace"}},{"value":"seeks justice for the wronged","sets":{"motivationType":"justice"}},{"value":"wants to master their craft","sets":{"motivationType":"mastery"}},{"value":"desires freedom from obligation","sets":{"motivationType":"freedom"}},{"value":"seeks to restore something lost","sets":{"motivationType":"restoration"}},{"value":"wants to prove themselves worthy","sets":{"motivationType":"validation"}},{"value":"desires to help others in need","sets":{"motivationType":"altruism"}}]},{"id":"profession","name":"Profession or Occupation","type":"simple","resultType":"trait","tags":["social","profession","occupation"],"entries":[{"value":"farmer","sets":{"professionType":"common","wealth":"poor"}},{"value":"blacksmith","sets":{"professionType":"artisan","wealth":"modest"}},{"value":"merchant","sets":{"professionType":"trade","wealth":"comfortable"}},{"value":"innkeeper","sets":{"professionType":"service","wealth":"modest"}},{"value":"guard","sets":{"professionType":"martial","wealth":"modest"}},{"value":"soldier","sets":{"professionType":"martial","wealth":"modest"}},{"value":"sailor","sets":{"professionType":"maritime","wealth":"poor"}},{"value":"fisher","sets":{"professionType":"common","wealth":"poor"}},{"value":"hunter","sets":{"professionType":"wilderness","wealth":"poor"}},{"value":"herbalist","sets":{"professionType":"specialist","wealth":"modest"}},{"value":"healer","sets":{"professionType":"specialist","wealth":"comfortable"}},{"value":"priest or acolyte","sets":{"professionType":"religious","wealth":"modest"}},{"value":"scribe","sets":{"professionType":"learned","wealth":"modest"}},{"value":"scholar","sets":{"professionType":"learned","wealth":"comfortable"}},{"value":"entertainer","sets":{"professionType":"artistic","wealth":"varied"}},{"value":"cook","sets":{"professionType":"service","wealth":"poor"}},{"value":"servant","sets":{"professionType":"service","wealth":"poor"}},{"value":"carpenter","sets":{"professionType":"artisan","wealth":"modest"}},{"value":"mason","sets":{"professionType":"artisan","wealth":"modest"}},{"value":"tailor","sets":{"professionType":"artisan","wealth":"modest"}},{"value":"jeweler","sets":{"professionType":"artisan","wealth":"comfortable"}},{"value":"alchemist","sets":{"professionType":"specialist","wealth":"comfortable"}},{"value":"spy or informant","sets":{"professionType":"criminal","wealth":"varied"}},{"value":"thief","sets":{"professionType":"criminal","wealth":"varied"}},{"value":"beggar","sets":{"professionType":"outcast","wealth":"destitute"}},{"value":"noble","sets":{"professionType":"aristocrat","wealth":"wealthy"}},{"value":"retired adventurer","sets":{"professionType":"former","wealth":"comfortable"}},{"value":"courier or messenger","sets":{"professionType":"service","wealth":"poor"}},{"value":"stablehand","sets":{"professionType":"common","wealth":"poor"}},{"value":"brewer","sets":{"professionType":"artisan","wealth":"modest"}},{"value":"miner","sets":{"professionType":"labor","wealth":"poor"}},{"value":"shepherd","sets":{"professionType":"common","wealth":"poor"}},{"value":"woodcutter","sets":{"professionType":"common","wealth":"poor"}},{"value":"midwife","sets":{"professionType":"specialist","wealth":"modest"}},{"value":"gravedigger","sets":{"professionType":"outcast","wealth":"poor"}},{"value":"bounty hunter","sets":{"professionType":"martial","wealth":"varied"}}]},{"id":"socialClass","name":"Social Class","type":"simple","resultType":"trait","tags":["social","class","status"],"entries":[{"id":"destitute","value":"destitute","weight":0.5,"sets":{"wealthLevel":"none","socialStanding":"lowest"}},{"id":"poor","value":"poor","weight":2,"sets":{"wealthLevel":"meager","socialStanding":"low"}},{"id":"common","value":"common","weight":4,"sets":{"wealthLevel":"modest","socialStanding":"average"}},{"id":"comfortable","value":"comfortable","weight":2,"sets":{"wealthLevel":"comfortable","socialStanding":"respected"}},{"id":"wealthy","value":"wealthy","weight":0.8,"sets":{"wealthLevel":"substantial","socialStanding":"influential"}},{"id":"aristocratic","value":"aristocratic","weight":0.3,"sets":{"wealthLevel":"great","socialStanding":"elite"}}]},{"id":"relationshipStatus","name":"Relationship Status","type":"simple","resultType":"trait","tags":["social","relationship","family"],"entries":[{"id":"single","value":"single and unattached","weight":2},{"id":"seeking","value":"single and seeking a partner","weight":1.5},{"id":"courting","value":"courting someone","weight":1},{"id":"betrothed","value":"betrothed but not yet married","weight":0.5},{"id":"married","value":"married","weight":2.5},{"id":"marriedChildren","value":"married with children","weight":2},{"id":"widowed","value":"widowed","weight":0.8},{"id":"separated","value":"separated from a spouse","weight":0.3},{"id":"complicated","value":"in a complicated relationship","weight":0.5},{"id":"secretAffair","value":"involved in a secret affair","weight":0.3},{"id":"heartbroken","value":"recently heartbroken","weight":0.5},{"id":"notInterested","value":"not interested in relationships","weight":0.8}]},{"id":"secret","name":"Secret","type":"simple","resultType":"hook","tags":["secret","plot","background"],"description":"A hidden truth about the NPC that could serve as a plot hook.","entries":[{"value":"is secretly in debt to dangerous people","weight":1.5},{"value":"has a hidden criminal past","weight":1},{"value":"is not who they claim to be","weight":0.8},{"value":"witnessed a crime and is afraid to speak","weight":1},{"value":"is being blackmailed","weight":1},{"value":"has a forbidden love affair","weight":1},{"value":"possesses something stolen","weight":0.8},{"value":"knows the location of something valuable","weight":0.8},{"value":"is a member of a secret society","weight":0.5},{"value":"has a child no one knows about","weight":0.6},{"value":"committed a terrible deed long ago","weight":0.8},{"value":"is slowly dying of an illness","weight":0.5},{"value":"is plotting against someone powerful","weight":0.5},{"value":"is being haunted by something","weight":0.4},{"value":"has inherited a curse","weight":0.3},{"value":"is searching for a lost family member","weight":1},{"value":"is an informant for someone","weight":0.8},{"value":"has no secrets worth mentioning","weight":3}]},{"id":"clothingStyle","name":"Clothing Style","type":"simple","resultType":"description","tags":["appearance","clothing","style"],"entries":[{"value":"practical, well-worn work clothes"},{"value":"clean but simple garments"},{"value":"colorful, eye-catching attire"},{"value":"dark, understated clothing"},{"value":"finely tailored garments"},{"value":"religious vestments or symbols"},{"value":"military or guard uniform"},{"value":"travel-worn road clothes"},{"value":"noble finery, slightly outdated"},{"value":"gaudy, mismatched clothing"},{"value":"perfectly coordinated outfit"},{"value":"rugged outdoor gear"},{"value":"apron over simple clothes"},{"value":"robes or flowing garments"},{"value":"leather and practical fabrics"},{"value":"expensive silk and fine materials"},{"value":"clothing with many pockets"},{"value":"patched and mended garments"},{"value":"uniform of their profession"},{"value":"culturally distinctive dress"}]},{"id":"attitude","name":"Initial Attitude","type":"simple","resultType":"trait","tags":["social","attitude","reaction"],"description":"How the NPC initially responds to strangers.","entries":[{"id":"hostile","value":"hostile","weight":0.5,"sets":{"disposition":"negative","openness":"closed"}},{"id":"suspicious","value":"suspicious","weight":1.5,"sets":{"disposition":"wary","openness":"guarded"}},{"id":"indifferent","value":"indifferent","weight":3,"sets":{"disposition":"neutral","openness":"neutral"}},{"id":"curious","value":"curious","weight":2,"sets":{"disposition":"interested","openness":"receptive"}},{"id":"friendly","value":"friendly","weight":2,"sets":{"disposition":"positive","openness":"open"}},{"id":"helpful","value":"helpful","weight":1,"sets":{"disposition":"positive","openness":"eager"}}]},{"id":"currentMood","name":"Current Mood","type":"simple","resultType":"trait","tags":["personality","mood","emotion"],"entries":[{"value":"anxious and worried"},{"value":"content and satisfied"},{"value":"frustrated and irritable"},{"value":"excited and energetic"},{"value":"melancholic and sad"},{"value":"calm and relaxed"},{"value":"bored and listless"},{"value":"distracted and preoccupied"},{"value":"cheerful and upbeat"},{"value":"tired and weary"},{"value":"angry about something"},{"value":"hopeful and optimistic"},{"value":"fearful of something"},{"value":"contemplative and thoughtful"},{"value":"amused by recent events"}]},{"id":"quirk","name":"Memorable Quirk","type":"simple","resultType":"trait","tags":["personality","quirk","memorable"],"description":"Something unusual that makes the NPC memorable.","entries":[{"value":"collects something unusual"},{"value":"speaks in the third person"},{"value":"always carries a specific item"},{"value":"has an unusual pet"},{"value":"refers to everyone by nicknames"},{"value":"is obsessed with a particular food"},{"value":"tells the same story repeatedly"},{"value":"has an irrational fear"},{"value":"insists on specific routines"},{"value":"keeps a detailed journal"},{"value":"is overly superstitious"},{"value":"hums or sings constantly"},{"value":"has an unusual laugh"},{"value":"speaks in rhymes occasionally"},{"value":"is obsessed with cleanliness"},{"value":"counts things compulsively"},{"value":"has vivid, recurring dreams"},{"value":"believes in a personal prophecy"},{"value":"has an unusual sleeping habit"},{"value":"makes decisions by coin flip"}]},{"id":"fullNPC","name":"Complete NPC","type":"simple","resultType":"npc","tags":["npc","complete","generator"],"description":"A complete NPC combining all elements. Roll this table to generate a full character.","shared":{"$race":"{{race}}","$gender":"{{gender}}","$age":"{{age}}","$build":"{{build}}","$height":"{{height}}","$hairColor":"{{hairColor}}","$hairStyle":"{{hairStyle}}","$eyeColor":"{{eyeColor}}","$skinTone":"{{skinTone}}","$facialFeature":"{{facialFeature}}","$distinguishingMark":"{{distinguishingMark}}","$personality":"{{personalityTrait}}","$secondaryTrait":"{{secondaryTrait}}","$flaw":"{{flaw}}","$mannerism":"{{mannerism}}","$voice":"{{voiceStyle}}","$motivation":"{{motivation}}","$profession":"{{profession}}","$socialClass":"{{socialClass}}","$relationship":"{{relationshipStatus}}","$clothing":"{{clothingStyle}}","$attitude":"{{attitude}}","$mood":"{{currentMood}}","$quirk":"{{quirk}}","$secret":"{{secret}}","$surname":"{{surname}}"},"entries":[{"id":"npcEntry","value":"{{switch[$race.@raceId==\\"human\\" && $gender.@genderId==\\"male\\":{{humanMaleNames}}].switch[$race.@raceId==\\"human\\" && $gender.@genderId==\\"female\\":{{humanFemaleNames}}].switch[$race.@raceId==\\"elf\\" && $gender.@genderId==\\"male\\":{{elfMaleNames}}].switch[$race.@raceId==\\"elf\\" && $gender.@genderId==\\"female\\":{{elfFemaleNames}}].switch[$race.@raceId==\\"dwarf\\" && $gender.@genderId==\\"male\\":{{dwarfMaleNames}}].switch[$race.@raceId==\\"dwarf\\" && $gender.@genderId==\\"female\\":{{dwarfFemaleNames}}].switch[$race.@raceId==\\"halfling\\" && $gender.@genderId==\\"male\\":{{halflingMaleNames}}].switch[$race.@raceId==\\"halfling\\" && $gender.@genderId==\\"female\\":{{halflingFemaleNames}}].switch[$race.@raceId==\\"orc\\" && $gender.@genderId==\\"male\\":{{orcMaleNames}}].switch[$race.@raceId==\\"orc\\" && $gender.@genderId==\\"female\\":{{orcFemaleNames}}].switch[$race.@raceId==\\"gnome\\" && $gender.@genderId==\\"male\\":{{gnomeMaleNames}}].switch[$race.@raceId==\\"gnome\\" && $gender.@genderId==\\"female\\":{{gnomeFemaleNames}}].else[{{neutralNames}}]}} {{$surname}}","weight":1,"sets":{"name":"{{switch[$race.@raceId==\\"human\\" && $gender.@genderId==\\"male\\":{{humanMaleNames}}].switch[$race.@raceId==\\"human\\" && $gender.@genderId==\\"female\\":{{humanFemaleNames}}].switch[$race.@raceId==\\"elf\\" && $gender.@genderId==\\"male\\":{{elfMaleNames}}].switch[$race.@raceId==\\"elf\\" && $gender.@genderId==\\"female\\":{{elfFemaleNames}}].switch[$race.@raceId==\\"dwarf\\" && $gender.@genderId==\\"male\\":{{dwarfMaleNames}}].switch[$race.@raceId==\\"dwarf\\" && $gender.@genderId==\\"female\\":{{dwarfFemaleNames}}].switch[$race.@raceId==\\"halfling\\" && $gender.@genderId==\\"male\\":{{halflingMaleNames}}].switch[$race.@raceId==\\"halfling\\" && $gender.@genderId==\\"female\\":{{halflingFemaleNames}}].switch[$race.@raceId==\\"orc\\" && $gender.@genderId==\\"male\\":{{orcMaleNames}}].switch[$race.@raceId==\\"orc\\" && $gender.@genderId==\\"female\\":{{orcFemaleNames}}].switch[$race.@raceId==\\"gnome\\" && $gender.@genderId==\\"male\\":{{gnomeMaleNames}}].switch[$race.@raceId==\\"gnome\\" && $gender.@genderId==\\"female\\":{{gnomeFemaleNames}}].else[{{neutralNames}}]}} {{$surname}}","race":"{{$race}}","gender":"{{$gender}}","pronoun":"{{$gender.@pronoun}}","possessive":"{{$gender.@possessive}}","age":"{{$age}}","build":"{{$build}}","height":"{{$height}}","hairColor":"{{$hairColor}}","hairStyle":"{{$hairStyle}}","eyeColor":"{{$eyeColor}}","skinTone":"{{$skinTone}}","facialFeature":"{{$facialFeature}}","distinguishingMark":"{{$distinguishingMark}}","personalityTrait":"{{$personality}}","secondaryTrait":"{{$secondaryTrait}}","flaw":"{{$flaw}}","mannerism":"{{$mannerism}}","voiceStyle":"{{$voice}}","motivation":"{{$motivation}}","profession":"{{$profession}}","socialClass":"{{$socialClass}}","relationshipStatus":"{{$relationship}}","clothingStyle":"{{$clothing}}","attitude":"{{$attitude}}","currentMood":"{{$mood}}","quirk":"{{$quirk}}","secret":"{{$secret}}"}}]}]`),qj=[{id:"npcDescription",name:"NPC Full Description",resultType:"description",tags:["npc","description","full"],description:"Generates a detailed prose description of an NPC.",shared:{$race:"{{race}}",$gender:"{{gender}}",$age:"{{age}}",$build:"{{build}}",$height:"{{height}}",$hairColor:"{{hairColor}}",$hairStyle:"{{hairStyle}}",$eyeColor:"{{eyeColor}}",$skinTone:"{{skinTone}}",$facialFeature:"{{facialFeature}}",$distinguishingMark:"{{distinguishingMark}}",$personality:"{{personalityTrait}}",$secondaryTrait:"{{secondaryTrait}}",$flaw:"{{flaw}}",$mannerism:"{{mannerism}}",$voice:"{{voiceStyle}}",$motivation:"{{motivation}}",$profession:"{{profession}}",$socialClass:"{{socialClass}}",$relationship:"{{relationshipStatus}}",$clothing:"{{clothingStyle}}",$attitude:"{{attitude}}",$mood:"{{currentMood}}",$quirk:"{{quirk}}",$secret:"{{secret}}",$surname:"{{surname}}",$firstName:'{{switch[$race.@raceId=="human" && $gender.@genderId=="male":{{humanMaleNames}}].switch[$race.@raceId=="human" && $gender.@genderId=="female":{{humanFemaleNames}}].switch[$race.@raceId=="elf" && $gender.@genderId=="male":{{elfMaleNames}}].switch[$race.@raceId=="elf" && $gender.@genderId=="female":{{elfFemaleNames}}].switch[$race.@raceId=="dwarf" && $gender.@genderId=="male":{{dwarfMaleNames}}].switch[$race.@raceId=="dwarf" && $gender.@genderId=="female":{{dwarfFemaleNames}}].switch[$race.@raceId=="halfling" && $gender.@genderId=="male":{{halflingMaleNames}}].switch[$race.@raceId=="halfling" && $gender.@genderId=="female":{{halflingFemaleNames}}].switch[$race.@raceId=="orc" && $gender.@genderId=="male":{{orcMaleNames}}].switch[$race.@raceId=="orc" && $gender.@genderId=="female":{{orcFemaleNames}}].switch[$race.@raceId=="gnome" && $gender.@genderId=="male":{{gnomeMaleNames}}].switch[$race.@raceId=="gnome" && $gender.@genderId=="female":{{gnomeFemaleNames}}].else[{{neutralNames}}]}}'},pattern:`## {{$firstName}} {{$surname}}

**{{$gender}} {{$race}} {{$profession}}** ({{$socialClass}} class)

### Appearance
{{$firstName}} is {{switch[$age=="young":"a {{$age}}"].switch[$age=="adult":"an {{$age}}"].switch[$age=="middle-aged":"a {{$age}}"].else["an {{$age}}"]}}, {{$height}} {{$race}} with a {{$build}} frame. {{switch[$gender.@genderId=="male":"He"].switch[$gender.@genderId=="female":"She"].else["They"]}} {{switch[$gender.@genderId=="nonbinary":"have"].else["has"]}} {{$skinTone}} skin, {{$eyeColor}} eyes, and {{$hairColor}}, {{$hairStyle}} hair. {{switch[$gender.@genderId=="male":"His"].switch[$gender.@genderId=="female":"Her"].else["Their"]}} most notable facial feature is {{$facialFeature}}.{{switch[$distinguishingMark!="no distinguishing marks":" {{switch[$gender.@genderId=="male":"He"].switch[$gender.@genderId=="female":"She"].else["They"]}} {{switch[$gender.@genderId=="nonbinary":"have"].else["has"]}} {{$distinguishingMark}}."].else[""]}}

{{switch[$gender.@genderId=="male":"He"].switch[$gender.@genderId=="female":"She"].else["They"]}} {{switch[$gender.@genderId=="nonbinary":"wear"].else["wears"]}} {{$clothing}}.

### Personality
{{$firstName}} is {{$personality}}, and {{$secondaryTrait}}. {{switch[$gender.@genderId=="male":"His"].switch[$gender.@genderId=="female":"Her"].else["Their"]}} greatest flaw is that {{switch[$gender.@genderId=="male":"he"].switch[$gender.@genderId=="female":"she"].else["they"]}} {{$flaw}}.

When speaking, {{switch[$gender.@genderId=="male":"he"].switch[$gender.@genderId=="female":"she"].else["they"]}} {{$voice}}. {{switch[$gender.@genderId=="male":"He"].switch[$gender.@genderId=="female":"She"].else["They"]}} {{$mannerism}} and {{$quirk}}.

### Background
{{$firstName}} is currently {{$relationship}}. {{switch[$gender.@genderId=="male":"He"].switch[$gender.@genderId=="female":"She"].else["They"]}} {{$motivation}}.

When first encountered, {{$firstName}} appears {{$attitude}} and is currently {{$mood}}.

### Secret
*{{$firstName}} {{$secret}}.*`},{id:"quickNPC",name:"Quick NPC Summary",resultType:"npc",tags:["npc","quick","summary"],description:"Generates a brief NPC summary suitable for quick reference.",shared:{$race:"{{race}}",$gender:"{{gender}}",$age:"{{age}}",$profession:"{{profession}}",$personality:"{{personalityTrait}}",$attitude:"{{attitude}}",$surname:"{{surname}}",$firstName:'{{switch[$race.@raceId=="human" && $gender.@genderId=="male":{{humanMaleNames}}].switch[$race.@raceId=="human" && $gender.@genderId=="female":{{humanFemaleNames}}].switch[$race.@raceId=="elf" && $gender.@genderId=="male":{{elfMaleNames}}].switch[$race.@raceId=="elf" && $gender.@genderId=="female":{{elfFemaleNames}}].switch[$race.@raceId=="dwarf" && $gender.@genderId=="male":{{dwarfMaleNames}}].switch[$race.@raceId=="dwarf" && $gender.@genderId=="female":{{dwarfFemaleNames}}].switch[$race.@raceId=="halfling" && $gender.@genderId=="male":{{halflingMaleNames}}].switch[$race.@raceId=="halfling" && $gender.@genderId=="female":{{halflingFemaleNames}}].switch[$race.@raceId=="orc" && $gender.@genderId=="male":{{orcMaleNames}}].switch[$race.@raceId=="orc" && $gender.@genderId=="female":{{orcFemaleNames}}].switch[$race.@raceId=="gnome" && $gender.@genderId=="male":{{gnomeMaleNames}}].switch[$race.@raceId=="gnome" && $gender.@genderId=="female":{{gnomeFemaleNames}}].else[{{neutralNames}}]}}'},pattern:"**{{$firstName}} {{$surname}}**  {{$age}} {{$gender}} {{$race}} {{$profession}}. {{$personality}}; initially {{$attitude}}."},{id:"npcAppearance",name:"NPC Appearance Only",resultType:"description",tags:["npc","appearance","physical"],description:"Generates only physical description details.",shared:{$race:"{{race}}",$gender:"{{gender}}",$age:"{{age}}",$build:"{{build}}",$height:"{{height}}",$hairColor:"{{hairColor}}",$hairStyle:"{{hairStyle}}",$eyeColor:"{{eyeColor}}",$skinTone:"{{skinTone}}",$facialFeature:"{{facialFeature}}",$distinguishingMark:"{{distinguishingMark}}",$clothing:"{{clothingStyle}}"},pattern:'A {{$age}}, {{$height}} {{$race}} ({{$gender}}) with a {{$build}} frame. {{$skinTone}} skin, {{$eyeColor}} eyes, {{$hairColor}} {{$hairStyle}} hair. Notable: {{$facialFeature}}{{switch[$distinguishingMark!="no distinguishing marks":", {{$distinguishingMark}}"].else["."]}} Wearing {{$clothing}}.'},{id:"npcPersonality",name:"NPC Personality Only",resultType:"description",tags:["npc","personality","behavior"],description:"Generates only personality and behavioral details.",shared:{$personality:"{{personalityTrait}}",$secondaryTrait:"{{secondaryTrait}}",$flaw:"{{flaw}}",$mannerism:"{{mannerism}}",$voice:"{{voiceStyle}}",$motivation:"{{motivation}}",$quirk:"{{quirk}}"},pattern:`**Personality:** {{$personality}}; {{$secondaryTrait}}.

**Flaw:** {{$flaw}}.

**Speech:** {{$voice}}.

**Mannerism:** {{$mannerism}}.

**Quirk:** {{$quirk}}.

**Motivation:** {{$motivation}}.`},{id:"npcBackground",name:"NPC Background Only",resultType:"description",tags:["npc","background","social"],description:"Generates only background and social details.",shared:{$profession:"{{profession}}",$socialClass:"{{socialClass}}",$relationship:"{{relationshipStatus}}",$secret:"{{secret}}"},pattern:`**Profession:** {{$profession}} ({{$socialClass}} class)

**Relationship:** {{$relationship}}

**Secret:** {{$secret}}`},{id:"npcEncounter",name:"NPC Encounter Description",resultType:"encounter",tags:["npc","encounter","interaction"],description:"Generates an NPC ready for an immediate encounter.",shared:{$race:"{{race}}",$gender:"{{gender}}",$profession:"{{profession}}",$attitude:"{{attitude}}",$mood:"{{currentMood}}",$mannerism:"{{mannerism}}",$voice:"{{voiceStyle}}",$clothing:"{{clothingStyle}}"},pattern:"A {{$gender}} {{$race}} {{$profession}} approaches. They appear {{$attitude}} and seem {{$mood}}. They are wearing {{$clothing}}. When they speak, they {{$voice}}, and {{$mannerism}}."}],Wj={metadata:Bj,variables:Uj,tables:Hj,templates:qj},Vj={name:"Eldritch Horror NPC Generator",namespace:"rolldeo.horror.npc",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A comprehensive NPC generator for 1920s Lovecraftian horror TTRPGs. Creates investigators, witnesses, cultists, and everyday citizens of Arkham and beyond. All content is **system-agnostic** and focuses on narrative descriptions rather than mechanical statistics.",instructions:"Use the `npcComplete` template for a full NPC description. Individual tables can be rolled separately for specific details. The `npcCompact` template provides a briefer summary suitable for quick reference.\n\n**Key Tables:**\n- `npcComplete` - Full detailed NPC\n- `npcCompact` - Brief NPC summary\n- `profession` - 1920s occupations\n- `darkSecret` - Mythos-related secrets\n- `motivation` - Character drives",tags:["npc","eldritch ","arkham","lovecraft","horror","cthulhu","investigator","character"],source:{license:"CC0",copyright:{year:"2025",holder:"Public Domain Content",notice:"This generator structure and content is released under CCC0"}},rights:{type:"open-content",official:!1,permissions:{commercialUse:!0,modification:!0,redistribution:!0,derivativeWorks:!0,attributionRequired:!0}},maxRecursionDepth:50,maxExplodingDice:100,maxInheritanceDepth:5,uniqueOverflowBehavior:"stop"},Gj={defaultSeparator:", ",era:"1920s",setting:"Arkham"},Kj=JSON.parse(`[{"id":"gender","name":"Gender","type":"simple","description":"Character gender for 1920s setting","tags":["core","identity"],"resultType":"trait","entries":[{"id":"male","value":"male","weight":1,"sets":{"pronoun":"he","pronounObj":"him","pronounPoss":"his","honorific":"Mr."}},{"id":"female","value":"female","weight":1,"sets":{"pronoun":"she","pronounObj":"her","pronounPoss":"her","honorific":"Ms."}}]},{"id":"ageRange","name":"Age Range","type":"simple","description":"Character age category with descriptive details","tags":["core","physical"],"resultType":"trait","entries":[{"id":"young","value":"young adult","weight":2,"sets":{"ageDesc":"in their early twenties","ageYears":"{{dice:1d8+18}}","agePhysical":"{{youthFeatures}}","ageEnergy":"energetic"}},{"id":"adult","value":"adult","weight":3,"sets":{"ageDesc":"in their late twenties to early thirties","ageYears":"{{dice:1d10+25}}","agePhysical":"{{matureFeatures}}","ageEnergy":"capable"}},{"id":"middleAged","value":"middle-aged","weight":3,"sets":{"ageDesc":"in their forties","ageYears":"{{dice:1d10+40}}","agePhysical":"lines of experience around their eyes","ageEnergy":"measured"}},{"id":"older","value":"older","weight":2,"sets":{"ageDesc":"in their fifties","ageYears":"{{dice:1d10+50}}","agePhysical":"silver-streaked hair and weathered features","ageEnergy":"deliberate"}},{"id":"elderly","value":"elderly","weight":1,"sets":{"ageDesc":"in their sixties or beyond","ageYears":"{{dice:1d20+60}}","agePhysical":"deeply lined face and careful movements","ageEnergy":"unhurried"}}]},{"id":"socialClass","name":"Social Class","type":"simple","description":"Economic and social standing in 1920s society","tags":["core","social"],"resultType":"trait","entries":[{"id":"upper","value":"upper class","weight":1,"sets":{"classDesc":"wealthy and privileged","housing":"a stately manor or penthouse apartment","income":"substantial family wealth or lucrative profession","socialCircle":"{{upperClassSocialCircle}}"}},{"id":"upperMiddle","value":"upper-middle class","weight":2,"sets":{"classDesc":"prosperous and respectable","housing":"a comfortable townhouse or well-appointed apartment","income":"a respected profession"}},{"id":"middle","value":"middle class","weight":3,"sets":{"classDesc":"respectable and hardworking","housing":"a modest but comfortable home","income":"steady employment"}},{"id":"working","value":"working class","weight":3,"sets":{"classDesc":"hard working and struggling","housing":"a cramped apartment or boarding house","income":"wages from manual labor"}},{"id":"poor","value":"impoverished","weight":1,"sets":{"classDesc":"destitute and desperate","housing":"a decrepit tenement or worse","income":"day labor or charity"}}],"defaultSets":{"socialCircle":"{{socialCircle}}"}},{"id":"primaryTrait","name":"Primary Personality Trait","type":"simple","description":"The dominant aspect of the character's personality","tags":["personality","core"],"resultType":"trait","entries":[{"id":"curious","value":"curious","sets":{"traitBehavior":"constantly asking questions and investigating oddities","traitRisk":"may pry into dangerous secrets"}},{"id":"cautious","value":"cautious","sets":{"traitBehavior":"carefully considering every action before committing","traitRisk":"may hesitate at crucial moments"}},{"id":"brave","value":"brave","sets":{"traitBehavior":"facing danger without flinching","traitRisk":"may rush into peril recklessly"}},{"id":"scholarly","value":"scholarly","sets":{"traitBehavior":"approaching problems with academic rigor","traitRisk":"may overlook practical solutions"}},{"id":"pragmatic","value":"pragmatic","sets":{"traitBehavior":"focusing on what works rather than what's proper","traitRisk":"may compromise ethics for results"}},{"id":"compassionate","value":"compassionate","sets":{"traitBehavior":"showing genuine concern for others' suffering","traitRisk":"may be manipulated through sympathy"}},{"id":"suspicious","value":"suspicious","sets":{"traitBehavior":"questioning everyone's motives and stories","traitRisk":"may alienate potential allies"}},{"id":"charming","value":"charming","sets":{"traitBehavior":"putting others at ease with wit and grace","traitRisk":"may rely too heavily on social skills"}},{"id":"determined","value":"determined","sets":{"traitBehavior":"pursuing goals with unwavering focus","traitRisk":"may become obsessive"}},{"id":"resourceful","value":"resourceful","sets":{"traitBehavior":"finding creative solutions with limited means","traitRisk":"may take unnecessary shortcuts"}},{"id":"stoic","value":"stoic","sets":{"traitBehavior":"maintaining composure under extreme pressure","traitRisk":"may suppress emotions unhealthily"}},{"id":"analytical","value":"analytical","sets":{"traitBehavior":"breaking down problems into logical components","traitRisk":"may dismiss intuition and emotion"}}]},{"id":"secondaryTrait","name":"Secondary Personality Trait","type":"simple","description":"A supporting aspect of the character's personality","tags":["personality"],"resultType":"trait","entries":[{"id":"witty","value":"witty","sets":{"secondaryBehavior":"often makes clever observations or jokes"}},{"id":"reserved","value":"reserved","sets":{"secondaryBehavior":"keeps thoughts and feelings private"}},{"id":"artistic","value":"artistic","sets":{"secondaryBehavior":"appreciates and creates beauty"}},{"id":"methodical","value":"methodical","sets":{"secondaryBehavior":"follows careful routines and procedures"}},{"id":"impulsive","value":"impulsive","sets":{"secondaryBehavior":"acts on instinct rather than planning"}},{"id":"nostalgic","value":"nostalgic","sets":{"secondaryBehavior":"frequently references the past"}},{"id":"spiritual","value":"spiritual","sets":{"secondaryBehavior":"draws strength from faith or belief"}},{"id":"cynical","value":"cynical","sets":{"secondaryBehavior":"expects the worst from people and situations"}},{"id":"idealistic","value":"idealistic","sets":{"secondaryBehavior":"believes in higher principles and better futures"}},{"id":"protective","value":"protective","sets":{"secondaryBehavior":"shields others from harm or distress"}},{"id":"ambitious","value":"ambitious","sets":{"secondaryBehavior":"always striving for advancement and recognition"}},{"id":"humble","value":"humble","sets":{"secondaryBehavior":"downplays achievements and avoids attention"}}]},{"id":"virtue","name":"Virtue","type":"simple","description":"The character's greatest strength of character","tags":["personality","positive"],"resultType":"trait","entries":[{"id":"honest","value":"honesty","sets":{"virtueBehavior":"always tells the truth, even when difficult"}},{"id":"loyal","value":"loyalty","sets":{"virtueBehavior":"stands by friends and principles no matter the cost"}},{"id":"courageous","value":"courage","sets":{"virtueBehavior":"faces fears and dangers for the greater good"}},{"id":"generous","value":"generosity","sets":{"virtueBehavior":"freely shares resources and time with those in need"}},{"id":"patient","value":"patience","sets":{"virtueBehavior":"waits calmly for the right moment"}},{"id":"just","value":"justice","sets":{"virtueBehavior":"ensures fairness and fights wrongdoing"}},{"id":"merciful","value":"mercy","sets":{"virtueBehavior":"shows compassion even to those who may not deserve it"}},{"id":"diligent","value":"diligence","sets":{"virtueBehavior":"works tirelessly toward goals"}},{"id":"wise","value":"wisdom","sets":{"virtueBehavior":"applies experience and knowledge thoughtfully"}},{"id":"hopeful","value":"hope","sets":{"virtueBehavior":"maintains optimism even in darkest times"}}]},{"id":"flaw","name":"Character Flaw","type":"simple","description":"The character's greatest weakness or failing","tags":["personality","negative"],"resultType":"trait","entries":[{"id":"prideful","value":"pride","sets":{"flawBehavior":"refuses to admit mistakes or ask for help","flawTrigger":"having their competence questioned"}},{"id":"greedy","value":"greed","sets":{"flawBehavior":"cannot resist opportunities for wealth or power","flawTrigger":"promises of riches or advancement"}},{"id":"cowardly","value":"cowardice","sets":{"flawBehavior":"flees or freezes when danger becomes real","flawTrigger":"direct physical threats"}},{"id":"wrathful","value":"wrath","sets":{"flawBehavior":"responds to provocation with disproportionate anger","flawTrigger":"insults or injustice"}},{"id":"envious","value":"envy","sets":{"flawBehavior":"resents others' success and possessions","flawTrigger":"witnessing others' good fortune"}},{"id":"obsessive","value":"obsession","sets":{"flawBehavior":"cannot let go of certain ideas or pursuits","flawTrigger":"anything related to their fixation"}},{"id":"deceitful","value":"deceitfulness","sets":{"flawBehavior":"lies even when the truth would serve better","flawTrigger":"situations where honesty feels risky"}},{"id":"addicted","value":"addiction","sets":{"flawBehavior":"cannot resist their vice (alcohol, gambling, laudanum, etc.)","flawTrigger":"stress or availability of their vice"}},{"id":"paranoid","value":"paranoia","sets":{"flawBehavior":"sees threats and conspiracies everywhere","flawTrigger":"unexplained events or coincidences"}},{"id":"reckless","value":"recklessness","sets":{"flawBehavior":"takes unnecessary risks without considering consequences","flawTrigger":"exciting or dangerous opportunities"}},{"id":"naive","value":"naivety","sets":{"flawBehavior":"trusts too easily and misses obvious deceptions","flawTrigger":"sob stories and appeals to emotion"}},{"id":"bitter","value":"bitterness","sets":{"flawBehavior":"holds grudges and dwells on past wrongs","flawTrigger":"reminders of past failures or betrayals"}}]},{"id":"motivation","name":"Motivation","type":"simple","description":"What drives the character, particularly relevant to Mythos investigations","tags":["personality","drive","mythos"],"resultType":"trait","entries":[{"id":"truth","value":"seeking truth","weight":2,"sets":{"motivationDesc":"needs to understand the reality behind strange events","motivationRisk":"may pursue dangerous knowledge too far"}},{"id":"revenge","value":"revenge","weight":1,"sets":{"motivationDesc":"seeks retribution against those who wronged them or their loved ones","motivationRisk":"may sacrifice everything for vengeance"}},{"id":"protection","value":"protection","weight":2,"sets":{"motivationDesc":"determined to shield loved ones or innocents from harm","motivationRisk":"may be manipulated through threats to those they protect"}},{"id":"redemption","value":"redemption","weight":1,"sets":{"motivationDesc":"trying to atone for past sins or mistakes","motivationRisk":"may take on impossible burdens out of guilt"}},{"id":"duty","value":"duty","weight":2,"sets":{"motivationDesc":"bound by professional, religious, or personal obligation","motivationRisk":"may follow orders against their better judgment"}},{"id":"curiosity","value":"curiosity","weight":2,"sets":{"motivationDesc":"driven by an insatiable need to know and understand","motivationRisk":"may read things that should stay unread"}},{"id":"faith","value":"faith","weight":1,"sets":{"motivationDesc":"believes they serve a higher power against the darkness","motivationRisk":"may have their faith shattered by cosmic revelations"}},{"id":"survival","value":"survival","weight":1,"sets":{"motivationDesc":"simply trying to stay alive in a world gone mad","motivationRisk":"may abandon others to save themselves"}},{"id":"legacy","value":"legacy","weight":1,"sets":{"motivationDesc":"wants to leave something meaningful behind","motivationRisk":"may make rash decisions to secure their memory"}},{"id":"love","value":"love","weight":1,"sets":{"motivationDesc":"acting out of devotion to another person","motivationRisk":"may be blinded by emotion"}},{"id":"power","value":"power","weight":1,"sets":{"motivationDesc":"seeks to gain influence, knowledge, or supernatural abilities","motivationRisk":"may bargain with forces beyond comprehension"}},{"id":"justice","value":"justice","weight":1,"sets":{"motivationDesc":"determined to see wrongdoers punished and victims vindicated","motivationRisk":"may become what they fight against"}}]},{"id":"darkSecret","name":"Dark Secret","type":"simple","description":"A hidden connection to the Mythos or other dark past","tags":["background","mythos","secret"],"resultType":"hook","entries":[{"id":"witnessed","value":"witnessed something unnatural","weight":2,"sets":{"secretDesc":"once saw something that defied all rational explanation","secretDetail":"{{witnessedEvent}}","secretEffect":"still has nightmares about it"}},{"id":"lostLoved","value":"lost someone to the unknown","weight":2,"sets":{"secretDesc":"a loved one vanished under mysterious circumstances","secretDetail":"They disappeared {{lostCircumstance}}","secretEffect":"driven to discover what happened"}},{"id":"formerCultist","value":"former cult member","weight":1,"sets":{"secretDesc":"once belonged to a cult worshipping something terrible","secretDetail":"They escaped after {{cultEscape}}","secretEffect":"fears recognition by former associates"}},{"id":"forbiddenKnowledge","value":"possesses forbidden knowledge","weight":1,"sets":{"secretDesc":"has read or learned something mortals were not meant to know","secretDetail":"They discovered {{forbiddenSource}}","secretEffect":"the knowledge haunts their dreams"}},{"id":"cursedInheritance","value":"inherited something cursed","weight":1,"sets":{"secretDesc":"received a troubling inheritance from a deceased relative","secretDetail":"The inheritance includes {{cursedItem}}","secretEffect":"strange events have occurred since taking possession"}},{"id":"taintedBlood","value":"has tainted bloodline","weight":1,"sets":{"secretDesc":"descends from a family with unnatural connections","secretDetail":"Family history includes {{taintedHistory}}","secretEffect":"fears what they might become"}},{"id":"survivor","value":"survived an encounter","weight":2,"sets":{"secretDesc":"barely escaped a deadly supernatural encounter","secretDetail":"They survived {{survivalEvent}}","secretEffect":"carries physical or psychological scars"}},{"id":"visions","value":"plagued by visions","weight":1,"sets":{"secretDesc":"receives disturbing visions of things to come or things that are","secretDetail":"The visions often show {{visionContent}}","secretEffect":"cannot tell if they are prophecy or madness"}},{"id":"guilty","value":"responsible for a tragedy","weight":1,"sets":{"secretDesc":"their actions inadvertently caused terrible harm","secretDetail":"They are responsible for {{guiltyEvent}}","secretEffect":"tormented by guilt and fear of discovery"}},{"id":"bargain","value":"made a dark bargain","weight":1,"sets":{"secretDesc":"once struck a deal with something not of this world","secretDetail":"In exchange for {{bargainReceived}}, they promised {{bargainOwed}}","secretEffect":"dreads the day payment comes due"}},{"id":"none","value":"no supernatural connections yet","weight":3,"sets":{"secretDesc":"has lived a relatively normal life until now","secretDetail":"Nothing unusual in their past","secretEffect":"blissfully unaware of the true nature of reality"}}]},{"id":"witnessedEvent","name":"Witnessed Event Detail","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"a corpse rise and walk away from the morgue"},{"value":"a figure that cast no shadow in the moonlight"},{"value":"something massive moving beneath the harbor waters"},{"value":"a door open onto a place that couldn't exist"},{"value":"a person transform into something inhuman"},{"value":"lights in the sky that moved with terrible purpose"},{"value":"a ritual in the woods that summoned something"},{"value":"the stars arrange themselves into an impossible pattern"},{"value":"their own reflection move independently in a mirror"},{"value":"a painting whose subject changed when no one was looking"}]},{"id":"lostCircumstance","name":"Lost Person Circumstance","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"after investigating strange sounds in the basement"},{"value":"during a voyage that returned with an empty ship"},{"value":"following receipt of a letter with no return address"},{"value":"after purchasing an antique from a mysterious dealer"},{"value":"in the wake of recurring nightmares about a flooded city"},{"value":"while researching family genealogy"},{"value":"after accepting an invitation to a private gathering"},{"value":"during an expedition to a remote location"},{"value":"following a bout of sleepwalking that grew increasingly severe"},{"value":"after claiming to have found something in an old book"}]},{"id":"cultEscape","name":"Cult Escape Detail","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"witnessing a sacrifice that went wrong"},{"value":"realizing what they were truly worshipping"},{"value":"being chosen for an 'honor' they couldn't accept"},{"value":"a police raid that they barely survived"},{"value":"intervention by a concerned outsider"},{"value":"the leader's true nature was revealed"},{"value":"a moment of clarity during a ritual"},{"value":"discovering what happened to previous initiates"}]},{"id":"forbiddenSource","name":"Forbidden Knowledge Source","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"a moldering tome in a restricted library section"},{"value":"inscriptions in an ancient ruin"},{"value":"the dying words of a condemned man"},{"value":"a coded message in their family papers"},{"value":"dreams that revealed geometric impossibilities"},{"value":"an artifact that whispered secrets"},{"value":"a mentor's hidden research notes"},{"value":"patterns in astronomical data that should not exist"}]},{"id":"cursedItem","name":"Cursed Inheritance Item","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"item","entries":[{"value":"an antique mirror that shows reflections from other times"},{"value":"a key that fits no known lock"},{"value":"a painting whose subject seems to age"},{"value":"a music box that plays impossible harmonies"},{"value":"a journal written in an unknown language"},{"value":"a family estate with sealed rooms"},{"value":"jewelry that feels warm regardless of temperature"},{"value":"a collection of photographs showing impossible places"}]},{"id":"taintedHistory","name":"Tainted Bloodline History","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"unexplained disappearances every generation"},{"value":"a town that drove their ancestors out"},{"value":"marriages to outsiders who came from the sea"},{"value":"a family curse dating back centuries"},{"value":"ancestors who practiced strange rites"},{"value":"physical traits that skip generations but always return"},{"value":"a family home that no one will enter"},{"value":"records that were deliberately destroyed"}]},{"id":"survivalEvent","name":"Survival Event Detail","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"a shipwreck on an island that wasn't on any chart"},{"value":"being trapped in a building during a summoning"},{"value":"an attack by something that shouldn't exist"},{"value":"a cave-in that revealed ancient chambers"},{"value":"a storm that brought things from the deep"},{"value":"a seance that contacted something terrible"},{"value":"an asylum where the inmates knew too much"},{"value":"a night in a house where time moved strangely"}]},{"id":"visionContent","name":"Vision Content","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"cities beneath the waves where beings still dwell"},{"value":"the spaces between stars where things wait"},{"value":"future catastrophes that may yet be prevented"},{"value":"the true faces of people they know"},{"value":"places of power that call to them"},{"value":"the moment of their own death"},{"value":"geometric shapes that hurt to remember"},{"value":"a throne in darkness and what sits upon it"}]},{"id":"guiltyEvent","name":"Guilty Event Detail","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"releasing something that was safely contained"},{"value":"leading others into a trap they barely escaped"},{"value":"translating a text that drove someone mad"},{"value":"opening a door that should have stayed closed"},{"value":"speaking a name that should never be spoken"},{"value":"failing to heed warnings about a dangerous place"},{"value":"bringing an artifact back from an expedition"},{"value":"teaching someone knowledge that destroyed them"}]},{"id":"bargainReceived","name":"Bargain Received","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"knowledge that saved their life"},{"value":"power to defeat an enemy"},{"value":"wealth beyond expectation"},{"value":"the life of someone they loved"},{"value":"escape from certain death"},{"value":"answers to questions that haunted them"},{"value":"protection from other supernatural threats"},{"value":"revenge upon those who wronged them"}]},{"id":"bargainOwed","name":"Bargain Owed","type":"simple","hidden":true,"tags":["detail","mythos"],"resultType":"description","entries":[{"value":"a service to be named later"},{"value":"to open a door when the stars are right"},{"value":"their firstborn child"},{"value":"to bring others into the fold"},{"value":"a portion of their sanity"},{"value":"their body as a vessel when summoned"},{"value":"to guard a location until released"},{"value":"to speak the final words of a ritual at their death"}]},{"id":"build","name":"Physical Build","type":"simple","description":"Character's body type and stature","tags":["physical","appearance"],"resultType":"trait","entries":[{"id":"eme","value":"emaciated","sets":{"buildDesc":"gaunt and horric looking","buildDetail":"a skeletal frame that inspires horror"}},{"id":"slight_copy","value":"slight","sets":{"buildDesc":"thin and small-framed","buildDetail":"looking as though a strong wind might carry them away"}},{"id":"lean","value":"lean","sets":{"buildDesc":"slim but wiry","buildDetail":"with a runner's physique"}},{"id":"standard","value":"standard","weight":2,"sets":{"buildDesc":"of average build","buildDetail":"a healthy size, neither fat nor skinny"}},{"id":"average_copy","value":"average","weight":2,"sets":{"buildDesc":"of ordinary build","buildDetail":"neither particularly imposing nor slight"}},{"id":"elite","value":"elite","sets":{"buildDesc":"of superb fitness levels and build","buildDetail":"one of the most elite builds in existence"}},{"id":"athletic_copy","value":"athletic","sets":{"buildDesc":"fit and muscular","buildDetail":"clearly accustomed to physical activity"}},{"id":"stocky","value":"stocky","sets":{"buildDesc":"short and solidly built","buildDetail":"with broad shoulders and thick limbs"}},{"id":"corpulant","value":"corpulant","sets":{"buildDesc":"of obsencely overweight and fat","buildDetail":"obsecenly overweight, causing revusion in any who see them."},"weight":0.2},{"id":"heavyset_copy","value":"heavyset","sets":{"buildDesc":"large and heavy","buildDetail":"carrying considerable weight on their frame"}},{"id":"tall","value":"tall","sets":{"buildDesc":"notably tall","buildDetail":"standing head and shoulders above most"}},{"id":"muscular","value":"muscular","sets":{"buildDesc":"shredded and ripped beyond belief","buildDetail":"a shockingly large mass of well-toned muscle that inspires awe"},"weight":0.5},{"id":"imposing_copy","value":"imposing","sets":{"buildDesc":"large and powerfully built","buildDetail":"commanding attention through sheer physical presence"}}]},{"id":"hairColor","name":"Hair Color","type":"simple","description":"Character's hair color, with age-appropriate variations","tags":["physical","appearance"],"resultType":"trait","entries":[{"id":"black","value":"black","weight":2,"sets":{"hairColorDesc":"raven-black"}},{"id":"darkBrown","value":"dark brown","weight":2,"sets":{"hairColorDesc":"deep brown"}},{"id":"brown","value":"brown","weight":2,"sets":{"hairColorDesc":"chestnut brown"}},{"id":"lightBrown","value":"light brown","sets":{"hairColorDesc":"sandy brown"}},{"id":"auburn","value":"auburn","sets":{"hairColorDesc":"rich auburn"}},{"id":"red","value":"red","sets":{"hairColorDesc":"fiery red"}},{"id":"blonde","value":"blonde","sets":{"hairColorDesc":"golden blonde"}},{"id":"strawberry","value":"strawberry blonde","sets":{"hairColorDesc":"strawberry blonde"}},{"id":"gray","value":"gray","sets":{"hairColorDesc":"steel gray"}},{"id":"white","value":"white","sets":{"hairColorDesc":"snow white"}},{"id":"graying","value":"graying","sets":{"hairColorDesc":"salt-and-pepper"}},{"id":"bald","value":"bald","sets":{"hairColorDesc":"completely bald"}}]},{"id":"maleHairStyle","name":"Male Hair Style","type":"simple","description":"1920s-appropriate men's hairstyles","tags":["physical","appearance","male"],"resultType":"trait","entries":[{"value":"slicked back with pomade","sets":{"hairStyleDesc":"slicked back in the modern fashion"}},{"value":"neatly parted to the side","sets":{"hairStyleDesc":"precisely parted and combed"}},{"value":"short and tidy","sets":{"hairStyleDesc":"cropped short and practical"}},{"value":"slightly disheveled","sets":{"hairStyleDesc":"somewhat unkempt despite attempts at control"}},{"value":"brilliantined waves","sets":{"hairStyleDesc":"fashionably waved with brilliantine"}},{"value":"thinning on top","sets":{"hairStyleDesc":"noticeably thinning at the crown"}},{"value":"close-cropped","sets":{"hairStyleDesc":"cut very close to the scalp"}},{"value":"receding at the temples","sets":{"hairStyleDesc":"retreating from the forehead"}}]},{"id":"femaleHairStyle","name":"Female Hair Style","type":"simple","description":"1920s-appropriate women's hairstyles","tags":["physical","appearance","female"],"resultType":"trait","entries":[{"value":"a fashionable bob","sets":{"hairStyleDesc":"cut in the daring new bobbed style"}},{"value":"finger waves","sets":{"hairStyleDesc":"styled in elegant finger waves"}},{"value":"pinned up in a chignon","sets":{"hairStyleDesc":"swept up in a classic chignon"}},{"value":"a shingle cut","sets":{"hairStyleDesc":"cropped daringly short in back"}},{"value":"long and pinned up","sets":{"hairStyleDesc":"kept long and pinned up traditionally"}},{"value":"Marcel waves","sets":{"hairStyleDesc":"set in fashionable Marcel waves"}},{"value":"an Eton crop","sets":{"hairStyleDesc":"cut scandalously short like a man's"}},{"value":"loose and wavy","sets":{"hairStyleDesc":"worn loose with natural waves"}}]},{"id":"eyeColor","name":"Eye Color","type":"simple","description":"Character's eye color","tags":["physical","appearance"],"resultType":"trait","entries":[{"id":"brown","value":"brown","weight":3,"sets":{"eyeColorDesc":"warm brown"}},{"id":"darkBrown","value":"dark brown","weight":2,"sets":{"eyeColorDesc":"deep, almost black"}},{"id":"hazel","value":"hazel","sets":{"eyeColorDesc":"changeable hazel"}},{"id":"green","value":"green","sets":{"eyeColorDesc":"striking green"}},{"id":"blue","value":"blue","weight":2,"sets":{"eyeColorDesc":"clear blue"}},{"id":"gray","value":"gray","sets":{"eyeColorDesc":"cool gray"}},{"id":"paleBlue","value":"pale blue","sets":{"eyeColorDesc":"pale, almost colorless blue"}},{"id":"amber","value":"amber","sets":{"eyeColorDesc":"unusual amber"}}]},{"id":"distinguishingFeature","name":"Distinguishing Feature","type":"simple","description":"A notable physical characteristic","tags":["physical","appearance"],"resultType":"trait","entries":[{"value":"a prominent scar","sets":{"featureDesc":"a notable scar","featureLocation":"across {{scarLocation}}"}},{"value":"a distinctive nose","sets":{"featureDesc":"a distinctive nose","featureLocation":"that dominates their face"}},{"value":"a birthmark","sets":{"featureDesc":"an unusual birthmark","featureLocation":"visible on their {{birthmarkLocation}}"}},{"value":"spectacles","sets":{"featureDesc":"{{spectacleType}} spectacles","featureLocation":"perched on their nose"}},{"value":"a limp","sets":{"featureDesc":"a noticeable limp","featureLocation":"from an old injury"}},{"value":"callused hands","sets":{"featureDesc":"heavily callused hands","featureLocation":"showing years of hard work"}},{"value":"an intense gaze","sets":{"featureDesc":"an unsettlingly intense gaze","featureLocation":"that makes others uncomfortable"}},{"value":"a nervous tic","sets":{"featureDesc":"a nervous tic","featureLocation":"that manifests when stressed"}},{"value":"a memorable voice","sets":{"featureDesc":"a distinctive {{voiceType}} voice","featureLocation":"immediately recognizable"}},{"value":"unusual pallor","sets":{"featureDesc":"an unusual pallor","featureLocation":"as if they rarely see sunlight"}},{"value":"weathered features","sets":{"featureDesc":"deeply weathered features","featureLocation":"from years of outdoor exposure"}},{"value":"delicate features","sets":{"featureDesc":"notably delicate features","featureLocation":"that draw attention"}},{"value":"a facial scar","sets":{"featureDesc":"a thin scar","featureLocation":"running across their {{facialScarLocation}}"}},{"value":"missing fingers","sets":{"featureDesc":"missing fingers","featureLocation":"on their {{hand}} hand"}},{"value":"a tattoo","sets":{"featureDesc":"an old tattoo","featureLocation":"visible on their {{tattooLocation}}"}}]},{"id":"scarLocation","name":"Scar Location","type":"simple","hidden":true,"tags":["detail"],"resultType":"description","entries":[{"value":"their left cheek"},{"value":"their right cheek"},{"value":"their forehead"},{"value":"their chin"},{"value":"their neck"},{"value":"the back of one hand"},{"value":"their forearm"}]},{"id":"birthmarkLocation","name":"Birthmark Location","type":"simple","hidden":true,"tags":["detail"],"resultType":"description","entries":[{"value":"neck"},{"value":"cheek"},{"value":"temple"},{"value":"hand"},{"value":"forearm"}]},{"id":"spectacleType","name":"Spectacle Type","type":"simple","hidden":true,"tags":["detail"],"resultType":"item","entries":[{"value":"round wire-rimmed"},{"value":"thick-lensed"},{"value":"pince-nez"},{"value":"horn-rimmed"},{"value":"gold-rimmed"},{"value":"small rectangular"}]},{"id":"voiceType","name":"Voice Type","type":"simple","hidden":true,"tags":["detail"],"resultType":"description","entries":[{"value":"deep, resonant"},{"value":"high-pitched"},{"value":"raspy"},{"value":"soft, almost whispering"},{"value":"booming"},{"value":"melodious"},{"value":"nasal"},{"value":"gravelly"}]},{"id":"facialScarLocation","name":"Facial Scar Location","type":"simple","hidden":true,"tags":["detail"],"resultType":"description","entries":[{"value":"cheek"},{"value":"forehead"},{"value":"jaw"},{"value":"eyebrow"},{"value":"chin"},{"value":"lip"}]},{"id":"hand","name":"Hand","type":"simple","hidden":true,"tags":["detail"],"resultType":"description","entries":[{"value":"left"},{"value":"right"}]},{"id":"tattooLocation","name":"Tattoo Location","type":"simple","hidden":true,"tags":["detail"],"resultType":"description","entries":[{"value":"forearm"},{"value":"upper arm"},{"value":"hand"},{"value":"chest"},{"value":"back"}]},{"id":"maleClothingStyle","name":"Male Clothing Style","type":"simple","description":"1920s men's fashion appropriate to social class","tags":["appearance","clothing","male"],"resultType":"description","entries":[{"value":"a well-tailored three-piece suit","weight":2,"sets":{"clothingDesc":"dressed in an impeccable three-piece suit","clothingClass":"upper"}},{"value":"a worn but respectable suit","weight":2,"sets":{"clothingDesc":"wearing a suit that has seen better days but remains respectable","clothingClass":"middle"}},{"value":"working clothes","weight":2,"sets":{"clothingDesc":"dressed in practical working clothes","clothingClass":"working"}},{"value":"academic attire with leather elbow patches","sets":{"clothingDesc":"wearing the typical professorial tweed with leather patches","clothingClass":"middle"}},{"value":"a sharp pinstripe suit","sets":{"clothingDesc":"dressed sharply in fashionable pinstripes","clothingClass":"upper"}},{"value":"clerical black","sets":{"clothingDesc":"wearing somber clerical attire","clothingClass":"middle"}},{"value":"military-influenced attire","sets":{"clothingDesc":"dressed in clothing with a military cut, perhaps a veteran","clothingClass":"middle"}},{"value":"a newsboy cap and suspenders","sets":{"clothingDesc":"wearing a flat cap and suspenders over a work shirt","clothingClass":"working"}},{"value":"shabby, patched clothing","sets":{"clothingDesc":"dressed in worn, much-mended clothing","clothingClass":"poor"}},{"value":"a seaman's peacoat","sets":{"clothingDesc":"wearing a heavy peacoat typical of sailors","clothingClass":"working"}},{"value":"flashy gangster style","sets":{"clothingDesc":"dressed flashily with expensive accessories","clothingClass":"criminal"}},{"value":"a lab coat over ordinary clothes","sets":{"clothingDesc":"wearing a stained laboratory coat","clothingClass":"professional"}}]},{"id":"femaleClothingStyle","name":"Female Clothing Style","type":"simple","description":"1920s women's fashion appropriate to social class","tags":["appearance","clothing","female"],"resultType":"description","entries":[{"value":"an elegant drop-waist dress","weight":2,"sets":{"clothingDesc":"wearing an elegant dress in the latest fashion","clothingClass":"upper"}},{"value":"a practical day dress","weight":2,"sets":{"clothingDesc":"dressed in a sensible but neat day dress","clothingClass":"middle"}},{"value":"a simple working dress with apron","weight":2,"sets":{"clothingDesc":"wearing a plain dress with a work apron","clothingClass":"working"}},{"value":"a fashionable flapper ensemble","sets":{"clothingDesc":"dressed daringly in flapper style with fringe and beads","clothingClass":"modern"}},{"value":"conservative Victorian-style dress","sets":{"clothingDesc":"dressed conservatively in an older style","clothingClass":"traditional"}},{"value":"a nurse's uniform","sets":{"clothingDesc":"wearing a crisp nurse's uniform","clothingClass":"professional"}},{"value":"mourning black","sets":{"clothingDesc":"dressed in somber mourning attire","clothingClass":"mourning"}},{"value":"worn and mended clothes","sets":{"clothingDesc":"wearing threadbare but carefully maintained clothing","clothingClass":"poor"}},{"value":"a smart traveling suit","sets":{"clothingDesc":"dressed in a practical traveling ensemble","clothingClass":"middle"}},{"value":"bohemian artistic attire","sets":{"clothingDesc":"dressed in unconventional artistic fashion","clothingClass":"artistic"}},{"value":"a formal evening gown","sets":{"clothingDesc":"wearing a stunning evening gown","clothingClass":"upper"}},{"value":"a librarian's modest dress","sets":{"clothingDesc":"dressed modestly but professionally","clothingClass":"professional"}}]},{"id":"relationshipStatus","name":"Relationship Status","type":"simple","description":"Character's romantic/marital status","tags":["social","personal"],"resultType":"trait","entries":[{"id":"single","value":"single","weight":2,"sets":{"relationshipDesc":"unmarried and unattached","relationshipDetail":"either by choice or circumstance"}},{"id":"courting","value":"courting","sets":{"relationshipDesc":"currently being courted by","relationshipDetail":"a {{courtingPartner}}"}},{"id":"engaged","value":"engaged","sets":{"relationshipDesc":"engaged to be married to","relationshipDetail":"a {{fianceType}}"}},{"id":"married","value":"married","weight":2,"sets":{"relationshipDesc":"married","relationshipDetail":"to a {{spouseType}}"}},{"id":"marriedUnhappy","value":"unhappily married","sets":{"relationshipDesc":"trapped in an unhappy marriage","relationshipDetail":"to a {{unhappySpouseType}}"},"weight":1},{"id":"widowed","value":"widowed","sets":{"relationshipDesc":"a widow(er)","relationshipDetail":"still mourning {{widowedCircumstance}}"}},{"id":"divorced","value":"divorced","sets":{"relationshipDesc":"scandalously divorced","relationshipDetail":"a subject of local gossip"}},{"id":"secretAffair","value":"involved in a secret affair","sets":{"relationshipDesc":"conducting a secret affair","relationshipDetail":"with {{affairPartner}}"}},{"id":"estranged","value":"estranged","sets":{"relationshipDesc":"estranged from their spouse","relationshipDetail":"living separately"}}]},{"id":"courtingPartner","name":"Courting Partner Type","type":"simple","hidden":true,"tags":["detail","social"],"resultType":"description","entries":[{"value":"respectable professional"},{"value":"childhood friend"},{"value":"somewhat unsuitable match"},{"value":"wealthy admirer"},{"value":"persistent suitor"},{"value":"mysterious stranger"}]},{"id":"fianceType","name":"Fiance Type","type":"simple","hidden":true,"tags":["detail","social"],"resultType":"description","entries":[{"value":"suitable match arranged by family"},{"value":"love match despite family objections"},{"value":"practical arrangement"},{"value":"childhood sweetheart"},{"value":"partner who has been waiting patiently"}]},{"id":"spouseType","name":"Spouse Type","type":"simple","hidden":true,"tags":["detail","social"],"resultType":"description","entries":[{"value":"supportive and understanding partner"},{"value":"spouse who knows nothing of their secrets"},{"value":"fellow investigator of the strange"},{"value":"long-suffering partner"},{"value":"spouse often away on business"},{"value":"sickly spouse requiring care"}]},{"id":"unhappySpouseType","name":"Unhappy Spouse Type","type":"simple","hidden":true,"tags":["detail","social"],"resultType":"description","entries":[{"value":"controlling partner"},{"value":"spouse they never loved"},{"value":"partner who changed after marriage"},{"value":"spouse with a dark secret of their own"},{"value":"partner who has grown cold"}]},{"id":"widowedCircumstance","name":"Widowed Circumstance","type":"simple","hidden":true,"tags":["detail","social"],"resultType":"description","entries":[{"value":"a spouse lost to illness"},{"value":"a partner killed in the Great War"},{"value":"a spouse who died under mysterious circumstances"},{"value":"a partner lost at sea"},{"value":"a spouse who simply vanished one night"},{"value":"a partner driven to an early grave"}]},{"id":"affairPartner","name":"Affair Partner","type":"simple","hidden":true,"tags":["detail","social"],"resultType":"description","entries":[{"value":"someone of inappropriate social standing"},{"value":"a married person"},{"value":"someone their family would never approve of"},{"value":"a former flame"},{"value":"someone connected to their profession"},{"value":"a dangerous individual"}]},{"id":"sanityState","name":"Mental State","type":"simple","description":"Character's current psychological condition relative to Mythos exposure","tags":["mental","mythos"],"resultType":"trait","entries":[{"id":"stable","value":"stable","weight":3,"sets":{"sanityDesc":"mentally sound and grounded","sanityBehavior":"approaches problems rationally","sanityTells":"none apparent"}},{"id":"anxious","value":"anxious","weight":2,"sets":{"sanityDesc":"prone to anxiety and worry","sanityBehavior":"startles easily and overthinks","sanityTells":"fidgets and checks doors twice"}},{"id":"haunted","value":"haunted","weight":1,"sets":{"sanityDesc":"troubled by what they have seen","sanityBehavior":"sometimes stares at nothing","sanityTells":"occasional distant look and muttering"}},{"id":"paranoid","value":"paranoid","weight":1,"sets":{"sanityDesc":"suspicious of everyone and everything","sanityBehavior":"sees patterns and threats everywhere","sanityTells":"constantly watching over their shoulder"}},{"id":"manic","value":"manic","sets":{"sanityDesc":"driven by feverish energy","sanityBehavior":"works obsessively on their interests","sanityTells":"sleeps little and talks rapidly"}},{"id":"detached","value":"detached","sets":{"sanityDesc":"emotionally distant from reality","sanityBehavior":"responds to horrors with disturbing calm","sanityTells":"flat affect and mechanical responses"}},{"id":"nightmares","value":"plagued by nightmares","sets":{"sanityDesc":"tormented by terrible dreams","sanityBehavior":"fears sleep and shows exhaustion","sanityTells":"dark circles and occasional trembling"}},{"id":"phobic","value":"phobic","sets":{"sanityDesc":"gripped by irrational fears","sanityBehavior":"avoids specific triggers obsessively","sanityTells":"panic when confronted with {{phobiaObject}}"}}]},{"id":"phobiaObject","name":"Phobia Object","type":"simple","hidden":true,"tags":["detail","mental"],"resultType":"description","entries":[{"value":"enclosed spaces"},{"value":"deep water"},{"value":"the dark"},{"value":"certain sounds"},{"value":"specific places"},{"value":"crowds"},{"value":"being alone"},{"value":"heights"},{"value":"mirrors"},{"value":"certain symbols"}]},{"id":"mythosConnection","name":"Connection to the Mythos","type":"simple","description":"The character's awareness of and involvement with cosmic horrors","tags":["mythos","knowledge"],"resultType":"trait","entries":[{"id":"ignorant","value":"blissfully ignorant","weight":3,"sets":{"mythosDesc":"has no idea of the true nature of reality","mythosKnowledge":"none","mythosReaction":"would likely dismiss any evidence as fantasy"}},{"id":"skeptic","value":"skeptical but curious","weight":2,"sets":{"mythosDesc":"has heard rumors but remains unconvinced","mythosKnowledge":"rumors only","mythosReaction":"would investigate strange claims with scientific skepticism"}},{"id":"glimpsed","value":"has glimpsed the truth","weight":1,"sets":{"mythosDesc":"has had one or more encounters with the unexplainable","mythosKnowledge":"personal experience","mythosReaction":"takes supernatural claims seriously"}},{"id":"student","value":"student of the occult","weight":1,"sets":{"mythosDesc":"actively studies forbidden knowledge","mythosKnowledge":"academic study","mythosReaction":"seeks opportunities to learn more"}},{"id":"survivor","value":"scarred survivor","sets":{"mythosDesc":"has survived direct Mythos contact","mythosKnowledge":"firsthand terror","mythosReaction":"either avoids involvement or grimly prepared"}},{"id":"hunter","value":"active hunter of the dark","sets":{"mythosDesc":"dedicates their life to fighting the Mythos","mythosKnowledge":"extensive and hard-won","mythosReaction":"seeks out and confronts supernatural threats"}},{"id":"touched","value":"touched by the beyond","sets":{"mythosDesc":"has been changed by Mythos contact","mythosKnowledge":"intimate and disturbing","mythosReaction":"no longer entirely human in outlook"}},{"id":"cultist","value":"secretly a cultist","sets":{"mythosDesc":"secretly serves cosmic powers","mythosKnowledge":"forbidden rituals","mythosReaction":"works to advance their masters' plans"}}]},{"id":"mannerism","name":"Distinctive Mannerism","type":"simple","description":"A notable behavioral quirk or habit","tags":["personality","behavior"],"resultType":"trait","entries":[{"value":"constantly cleaning or polishing something","sets":{"mannerismDesc":"perpetually cleaning their spectacles or polishing a trinket"}},{"value":"speaks in a distinctive cadence","sets":{"mannerismDesc":"speaks with an unusual rhythm, pausing at odd moments"}},{"value":"always seems to be looking past you","sets":{"mannerismDesc":"rarely makes direct eye contact, gazing at something behind you"}},{"value":"hums or whistles when nervous","sets":{"mannerismDesc":"unconsciously hums when anxious or thinking"}},{"value":"touches a specific item for comfort","sets":{"mannerismDesc":"frequently touches {{comfortItem}} as if for reassurance"}},{"value":"clears throat before speaking","sets":{"mannerismDesc":"always clears their throat before saying anything important"}},{"value":"uses elaborate hand gestures","sets":{"mannerismDesc":"accompanies speech with dramatic hand movements"}},{"value":"quotes literature or scripture","sets":{"mannerismDesc":"peppers conversation with literary quotes"}},{"value":"laughs at inappropriate moments","sets":{"mannerismDesc":"sometimes laughs when the situation doesn't warrant it"}},{"value":"extremely formal in speech","sets":{"mannerismDesc":"speaks with unusual formality even in casual situations"}},{"value":"checks the time obsessively","sets":{"mannerismDesc":"constantly checking their watch"}},{"value":"always positions themselves near exits","sets":{"mannerismDesc":"invariably sits or stands near the door"}}]},{"id":"comfortItem","name":"Comfort Item","type":"simple","hidden":true,"tags":["detail"],"resultType":"item","entries":[{"value":"a pocket watch"},{"value":"a ring"},{"value":"a locket"},{"value":"a lucky coin"},{"value":"a small medal"},{"value":"a worn photograph"},{"value":"a religious symbol"},{"value":"a smooth stone"}]},{"id":"speechPattern","name":"Speech Pattern","type":"simple","description":"How the character typically speaks","tags":["personality","communication"],"resultType":"trait","entries":[{"value":"speaks in a rapid, clipped manner","sets":{"speechDesc":"talks quickly, as if time is always short"}},{"value":"drawls slowly and deliberately","sets":{"speechDesc":"speaks slowly, choosing each word with care"}},{"value":"uses many technical terms","sets":{"speechDesc":"peppers speech with jargon from their profession"}},{"value":"speaks softly, almost whispering","sets":{"speechDesc":"speaks so quietly others must lean in to hear"}},{"value":"has a booming, projecting voice","sets":{"speechDesc":"speaks loudly enough to be heard across a room"}},{"value":"uses colorful slang","sets":{"speechDesc":"employs vivid street language and slang"}},{"value":"speaks with excessive politeness","sets":{"speechDesc":"is almost painfully polite in all interactions"}},{"value":"frequently trails off mid-sentence","sets":{"speechDesc":"often leaves thoughts unfinished, as if distracted"}},{"value":"asks rhetorical questions constantly","sets":{"speechDesc":"frames most statements as questions"}},{"value":"has a noticeable stammer","sets":{"speechDesc":"struggles with a stammer, especially when nervous"}}]},{"id":"profession","name":"Profession","type":"simple","description":"1920s-appropriate occupations","tags":["core","occupation"],"resultType":"trait","entries":[{"id":"professor","value":"Professor","weight":2,"sets":{"professionDesc":"a university professor","professionField":"{{academicField}}","professionLocation":"Miskatonic University","professionClass":"upper-middle","professionSkills":"research, languages, history"}},{"id":"doctor","value":"Doctor","weight":2,"sets":{"professionDesc":"a medical doctor","professionField":"{{medicalSpecialty}}","professionLocation":"St. Mary's Hospital or private practice","professionClass":"upper-middle","professionSkills":"medicine, psychology, first aid"}},{"id":"journalist","value":"Journalist","weight":2,"sets":{"professionDesc":"a newspaper journalist","professionField":"{{journalismBeat}}","professionLocation":"the Arkham Advertiser","professionClass":"middle","professionSkills":"investigation, persuasion, writing"}},{"id":"privateEye","value":"Private Investigator","sets":{"professionDesc":"a private detective","professionField":"missing persons and infidelity cases","professionLocation":"a small downtown office","professionClass":"middle","professionSkills":"investigation, streetwise, intimidation"}},{"id":"antiquarian","value":"Antiquarian","sets":{"professionDesc":"a dealer in antiques and rare items","professionField":"{{antiquarianSpecialty}}","professionLocation":"a dusty shop in the old quarter","professionClass":"middle","professionSkills":"appraisal, history, occult"}},{"id":"librarian","value":"Librarian","sets":{"professionDesc":"a librarian","professionField":"{{librarySection}}","professionLocation":"Miskatonic University Library or Arkham Public Library","professionClass":"middle","professionSkills":"research, languages, organization"}},{"id":"author","value":"Author","sets":{"professionDesc":"a writer","professionField":"{{authorGenre}}","professionLocation":"working from home or coffee houses","professionClass":"variable","professionSkills":"persuasion, research, creativity"}},{"id":"artist","value":"Artist","sets":{"professionDesc":"an artist","professionField":"{{artistMedium}}","professionLocation":"a bohemian studio","professionClass":"variable","professionSkills":"perception, craft, creativity"}},{"id":"dilettante","value":"Dilettante","sets":{"professionDesc":"a wealthy dilettante","professionField":"dabbling in various interests","professionLocation":"the family estate","professionClass":"upper","professionSkills":"etiquette, connections, diverse knowledge"}},{"id":"clergy","value":"Clergy","sets":{"professionDesc":"a member of the clergy","professionField":"{{clergyDenomination}}","professionLocation":"{{clergyLocation}}","professionClass":"middle","professionSkills":"theology, counseling, community"}},{"id":"nurse","value":"Nurse","sets":{"professionDesc":"a nurse","professionField":"{{nursingSpecialty}}","professionLocation":"St. Mary's Hospital","professionClass":"middle","professionSkills":"medicine, empathy, observation"}},{"id":"police","value":"Police Officer","sets":{"professionDesc":"a police officer","professionField":"{{policeRole}}","professionLocation":"Arkham Police Department","professionClass":"middle","professionSkills":"investigation, firearms, law"}},{"id":"lawyer","value":"Lawyer","sets":{"professionDesc":"a lawyer","professionField":"{{legalSpecialty}}","professionLocation":"a downtown law firm","professionClass":"upper-middle","professionSkills":"persuasion, research, law"}},{"id":"photographer","value":"Photographer","sets":{"professionDesc":"a photographer","professionField":"{{photographyType}}","professionLocation":"a small studio or freelance","professionClass":"middle","professionSkills":"observation, technical, artistry"}},{"id":"archaeologist","value":"Archaeologist","sets":{"professionDesc":"an archaeologist","professionField":"{{archaeologySpecialty}}","professionLocation":"Miskatonic University or field expeditions","professionClass":"upper-middle","professionSkills":"history, languages, excavation"}},{"id":"sailor","value":"Sailor","sets":{"professionDesc":"a sailor","professionField":"{{sailorType}}","professionLocation":"the docks and ships","professionClass":"working","professionSkills":"navigation, endurance, swimming"}},{"id":"mechanic","value":"Mechanic","sets":{"professionDesc":"a mechanic","professionField":"automobiles and machinery","professionLocation":"a local garage","professionClass":"working","professionSkills":"mechanical repair, driving, practical knowledge"}},{"id":"secretary","value":"Secretary","sets":{"professionDesc":"a secretary","professionField":"office administration","professionLocation":"a downtown office","professionClass":"middle","professionSkills":"organization, typing, discretion"}},{"id":"bootlegger","value":"Bootlegger","sets":{"professionDesc":"a bootlegger","professionField":"illegal alcohol distribution","professionLocation":"speakeasies and back alleys","professionClass":"criminal","professionSkills":"streetwise, persuasion, driving"}},{"id":"gangster","value":"Gangster","sets":{"professionDesc":"a criminal associate","professionField":"{{gangsterRole}}","professionLocation":"the O'Bannion gang territory","professionClass":"criminal","professionSkills":"intimidation, firearms, streetwise"}},{"id":"entertainer","value":"Entertainer","sets":{"professionDesc":"an entertainer","professionField":"{{entertainerType}}","professionLocation":"clubs, theaters, and speakeasies","professionClass":"variable","professionSkills":"performance, charm, endurance"}},{"id":"shopkeeper","value":"Shopkeeper","sets":{"professionDesc":"a shopkeeper","professionField":"{{shopType}}","professionLocation":"a modest establishment downtown","professionClass":"middle","professionSkills":"business, appraisal, community knowledge"}},{"id":"factoryWorker","value":"Factory Worker","sets":{"professionDesc":"a factory worker","professionField":"{{factoryType}}","professionLocation":"one of the local mills","professionClass":"working","professionSkills":"endurance, mechanical aptitude, solidarity"}},{"id":"servant","value":"Domestic Servant","sets":{"professionDesc":"a domestic servant","professionField":"{{servantRole}}","professionLocation":"a wealthy household","professionClass":"working","professionSkills":"discretion, observation, service"}},{"id":"student","value":"Student","sets":{"professionDesc":"a university student","professionField":"{{studentMajor}}","professionLocation":"Miskatonic University","professionClass":"variable","professionSkills":"research, youthful energy, diverse studies"}},{"id":"alienist","value":"Alienist","sets":{"professionDesc":"an alienist (psychiatrist)","professionField":"disorders of the mind","professionLocation":"Arkham Sanitarium or private practice","professionClass":"upper-middle","professionSkills":"psychology, medicine, insight"}},{"id":"occultist","value":"Occultist","sets":{"professionDesc":"a practicing occultist","professionField":"{{occultTradition}}","professionLocation":"a private sanctum","professionClass":"variable","professionSkills":"occult lore, ritual, esoteric languages"}},{"id":"vagrant","value":"Vagrant","sets":{"professionDesc":"a vagrant or drifter","professionField":"survival on the margins","professionLocation":"wherever they can find shelter","professionClass":"poor","professionSkills":"streetwise, stealth, scrounging"}},{"id":"pilot","value":"Pilot","sets":{"professionDesc":"an aviator","professionField":"{{pilotType}}","professionLocation":"a small airfield outside town","professionClass":"middle","professionSkills":"flying, navigation, mechanics"}}]},{"id":"academicField","name":"Academic Field","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"Archaeology"},{"value":"History"},{"value":"Anthropology"},{"value":"Ancient Languages"},{"value":"Folklore Studies"},{"value":"Literature"},{"value":"Chemistry"},{"value":"Biology"},{"value":"Physics"},{"value":"Geology"},{"value":"Astronomy"},{"value":"Philosophy"},{"value":"Classics"},{"value":"Mathematics"}]},{"id":"medicalSpecialty","name":"Medical Specialty","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"general practice"},{"value":"surgery"},{"value":"pathology"},{"value":"neurology"},{"value":"infectious diseases"},{"value":"emergency medicine"}]},{"id":"journalismBeat","name":"Journalism Beat","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"crime reporting"},{"value":"society pages"},{"value":"local politics"},{"value":"human interest stories"},{"value":"investigations"},{"value":"the obituary desk"}]},{"id":"antiquarianSpecialty","name":"Antiquarian Specialty","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"rare books and manuscripts"},{"value":"Egyptian artifacts"},{"value":"pre-Columbian items"},{"value":"medieval curiosities"},{"value":"occult paraphernalia"},{"value":"Oriental antiquities"},{"value":"colonial Americana"}]},{"id":"librarySection","name":"Library Section","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"the rare books collection"},{"value":"the reference section"},{"value":"the archives"},{"value":"general circulation"},{"value":"the restricted section"},{"value":"periodicals and newspapers"}]},{"id":"authorGenre","name":"Author Genre","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"weird fiction"},{"value":"mystery novels"},{"value":"pulp adventures"},{"value":"academic papers"},{"value":"poetry"},{"value":"true crime"},{"value":"journalism"},{"value":"local history"}]},{"id":"artistMedium","name":"Artist Medium","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"oil painting"},{"value":"sculpture"},{"value":"illustration"},{"value":"watercolors"},{"value":"printmaking"},{"value":"avant-garde mixed media"}]},{"id":"clergyDenomination","name":"Clergy Denomination","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"Catholic"},{"value":"Episcopal"},{"value":"Baptist"},{"value":"Methodist"},{"value":"Congregationalist"},{"value":"Unitarian"}]},{"id":"clergyLocation","name":"Clergy Location","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"a small parish church"},{"value":"the town's main church"},{"value":"a monastery outside town"},{"value":"a mission in the poor quarter"},{"value":"the university chapel"}]},{"id":"nursingSpecialty","name":"Nursing Specialty","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"surgical nursing"},{"value":"psychiatric care"},{"value":"private duty"},{"value":"emergency ward"},{"value":"maternity"},{"value":"public health"}]},{"id":"policeRole","name":"Police Role","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"beat cop"},{"value":"detective"},{"value":"desk sergeant"},{"value":"harbor patrol"},{"value":"evidence technician"},{"value":"plainclothes officer"}]},{"id":"legalSpecialty","name":"Legal Specialty","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"criminal defense"},{"value":"estate law"},{"value":"corporate law"},{"value":"property disputes"},{"value":"immigration cases"},{"value":"prosecution"}]},{"id":"photographyType","name":"Photography Type","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"portrait photography"},{"value":"crime scene documentation"},{"value":"news photography"},{"value":"artistic photography"},{"value":"scientific documentation"}]},{"id":"archaeologySpecialty","name":"Archaeology Specialty","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"Egyptian archaeology"},{"value":"Mesoamerican cultures"},{"value":"Near Eastern antiquities"},{"value":"pre-historic sites"},{"value":"underwater archaeology"},{"value":"New England colonial sites"}]},{"id":"sailorType","name":"Sailor Type","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"merchant marine"},{"value":"fishing boat crew"},{"value":"former Navy"},{"value":"harbor pilot"},{"value":"yacht crew"},{"value":"longshoreman"}]},{"id":"gangsterRole","name":"Gangster Role","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"muscle and enforcement"},{"value":"numbers running"},{"value":"bootleg distribution"},{"value":"a fixer and go-between"},{"value":"protection rackets"},{"value":"a driver and wheelman"}]},{"id":"entertainerType","name":"Entertainer Type","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"jazz musician"},{"value":"stage actor"},{"value":"vaudeville performer"},{"value":"nightclub singer"},{"value":"dancer"},{"value":"radio voice"}]},{"id":"shopType","name":"Shop Type","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"a general store"},{"value":"a pharmacy"},{"value":"a bookshop"},{"value":"a hardware store"},{"value":"a clothing boutique"},{"value":"a pawn shop"},{"value":"a curiosity shop"}]},{"id":"factoryType","name":"Factory Type","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"the textile mill"},{"value":"the cannery"},{"value":"the machine works"},{"value":"the lumber yard"},{"value":"the shoe factory"}]},{"id":"servantRole","name":"Servant Role","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"butler"},{"value":"housekeeper"},{"value":"maid"},{"value":"cook"},{"value":"chauffeur"},{"value":"gardener"},{"value":"valet"},{"value":"governess"}]},{"id":"studentMajor","name":"Student Major","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"archaeology"},{"value":"medicine"},{"value":"law"},{"value":"literature"},{"value":"sciences"},{"value":"history"},{"value":"folklore"},{"value":"divinity"}]},{"id":"occultTradition","name":"Occult Tradition","type":"simple","hidden":true,"tags":["detail","profession","mythos"],"resultType":"description","entries":[{"value":"hermetic ceremonial magic"},{"value":"spiritualism and mediumship"},{"value":"folk witchcraft"},{"value":"Theosophical studies"},{"value":"Golden Dawn rituals"},{"value":"darker, unnamed practices"}]},{"id":"pilotType","name":"Pilot Type","type":"simple","hidden":true,"tags":["detail","profession"],"resultType":"description","entries":[{"value":"barnstormer and stunt pilot"},{"value":"former war ace"},{"value":"airmail pilot"},{"value":"charter pilot"},{"value":"test pilot"}]},{"id":"background","name":"Cultural Background","type":"simple","description":"Character's ethnic and cultural heritage, affecting name generation","tags":["core","identity","names"],"resultType":"trait","entries":[{"id":"american","value":"American","weight":4,"sets":{"maleFirstName":"{{americanMaleFirstNames}}","femaleFirstName":"{{americanFemaleFirstNames}}","surname":"{{americanSurnames}}","backgroundDesc":"of American stock","accent":"standard American","origin":"New England"}},{"id":"british","value":"British","weight":2,"sets":{"maleFirstName":"{{britishMaleFirstNames}}","femaleFirstName":"{{britishFemaleFirstNames}}","surname":"{{britishSurnames}}","backgroundDesc":"of British descent","accent":"English","origin":"England"}},{"id":"irish","value":"Irish","weight":2,"sets":{"maleFirstName":"{{irishMaleFirstNames}}","femaleFirstName":"{{irishFemaleFirstNames}}","surname":"{{irishSurnames}}","backgroundDesc":"of Irish heritage","accent":"Irish brogue","origin":"Ireland"}},{"id":"italian","value":"Italian","weight":1,"sets":{"maleFirstName":"{{italianMaleFirstNames}}","femaleFirstName":"{{italianFemaleFirstNames}}","surname":"{{italianSurnames}}","backgroundDesc":"of Italian descent","accent":"Italian","origin":"Italy"}},{"id":"german","value":"German","weight":1,"sets":{"maleFirstName":"{{germanMaleFirstNames}}","femaleFirstName":"{{germanFemaleFirstNames}}","surname":"{{germanSurnames}}","backgroundDesc":"of German heritage","accent":"German","origin":"Germany"}},{"id":"easternEuropean","value":"Eastern European","weight":1,"sets":{"maleFirstName":"{{easternEuropeanMaleFirstNames}}","femaleFirstName":"{{easternEuropeanFemaleFirstNames}}","surname":"{{easternEuropeanSurnames}}","backgroundDesc":"of Eastern European origin","accent":"Slavic","origin":"Eastern Europe"}},{"id":"chinese","value":"Chinese","weight":1,"sets":{"maleFirstName":"{{chineseMaleFirstNames}}","femaleFirstName":"{{chineseFemaleFirstNames}}","surname":"{{chineseSurnames}}","backgroundDesc":"of Chinese ancestry","accent":"Cantonese","origin":"China"}}]},{"id":"americanMaleFirstNames","name":"American Male First Names","type":"simple","hidden":true,"tags":["names","male","american"],"resultType":"name","entries":[{"value":"James"},{"value":"John"},{"value":"William"},{"value":"Robert"},{"value":"Charles"},{"value":"George"},{"value":"Edward"},{"value":"Thomas"},{"value":"Henry"},{"value":"Walter"},{"value":"Harold"},{"value":"Frank"},{"value":"Arthur"},{"value":"Albert"},{"value":"Harry"},{"value":"Raymond"},{"value":"Howard"},{"value":"Richard"},{"value":"Joseph"},{"value":"Paul"},{"value":"Ernest"},{"value":"Ralph"},{"value":"Roy"},{"value":"Louis"},{"value":"Carl"},{"value":"Donald"},{"value":"Frederick"},{"value":"Eugene"},{"value":"Clarence"},{"value":"Leonard"},{"value":"Samuel"},{"value":"Stanley"},{"value":"Herbert"},{"value":"Chester"},{"value":"Floyd"},{"value":"Earl"},{"value":"Vernon"},{"value":"Harvey"},{"value":"Lawrence"},{"value":"Nathaniel"}]},{"id":"americanFemaleFirstNames","name":"American Female First Names","type":"simple","hidden":true,"tags":["names","female","american"],"resultType":"name","entries":[{"value":"Mary"},{"value":"Helen"},{"value":"Margaret"},{"value":"Dorothy"},{"value":"Ruth"},{"value":"Elizabeth"},{"value":"Virginia"},{"value":"Anna"},{"value":"Mildred"},{"value":"Betty"},{"value":"Frances"},{"value":"Evelyn"},{"value":"Alice"},{"value":"Jean"},{"value":"Shirley"},{"value":"Louise"},{"value":"Martha"},{"value":"Catherine"},{"value":"Doris"},{"value":"Grace"},{"value":"Edna"},{"value":"Florence"},{"value":"Lillian"},{"value":"Rose"},{"value":"Marie"},{"value":"Eleanor"},{"value":"Hazel"},{"value":"Gladys"},{"value":"Josephine"},{"value":"Ethel"},{"value":"Thelma"},{"value":"Agnes"},{"value":"Clara"},{"value":"Lucille"},{"value":"Irene"},{"value":"Beatrice"},{"value":"Pauline"},{"value":"Esther"},{"value":"Gertrude"},{"value":"Vivian"}]},{"id":"americanSurnames","name":"American Surnames","type":"simple","hidden":true,"tags":["names","american"],"resultType":"name","entries":[{"value":"Smith"},{"value":"Johnson"},{"value":"Williams"},{"value":"Brown"},{"value":"Jones"},{"value":"Miller"},{"value":"Davis"},{"value":"Wilson"},{"value":"Anderson"},{"value":"Taylor"},{"value":"Thomas"},{"value":"Moore"},{"value":"Martin"},{"value":"Jackson"},{"value":"White"},{"value":"Harris"},{"value":"Thompson"},{"value":"Clark"},{"value":"Lewis"},{"value":"Robinson"},{"value":"Walker"},{"value":"Young"},{"value":"King"},{"value":"Wright"},{"value":"Hill"},{"value":"Scott"},{"value":"Green"},{"value":"Adams"},{"value":"Baker"},{"value":"Nelson"},{"value":"Carter"},{"value":"Mitchell"},{"value":"Blackwood"},{"value":"Marsh"},{"value":"Waite"},{"value":"Armitage"},{"value":"Peaslee"},{"value":"Whateley"},{"value":"Bishop"},{"value":"Elwood"}]},{"id":"britishMaleFirstNames","name":"British Male First Names","type":"simple","hidden":true,"tags":["names","male","british"],"resultType":"name","entries":[{"value":"Reginald"},{"value":"Nigel"},{"value":"Geoffrey"},{"value":"Rupert"},{"value":"Archibald"},{"value":"Percival"},{"value":"Alistair"},{"value":"Cecil"},{"value":"Edmund"},{"value":"Basil"},{"value":"Cyril"},{"value":"Neville"},{"value":"Roderick"},{"value":"Graham"},{"value":"Terrence"},{"value":"Clive"},{"value":"Malcolm"},{"value":"Colin"},{"value":"Trevor"},{"value":"Ian"},{"value":"Douglas"},{"value":"Kenneth"},{"value":"Hugh"},{"value":"Desmond"},{"value":"Godfrey"},{"value":"Montague"},{"value":"Roland"},{"value":"Oswald"}]},{"id":"britishFemaleFirstNames","name":"British Female First Names","type":"simple","hidden":true,"tags":["names","female","british"],"resultType":"name","entries":[{"value":"Agatha"},{"value":"Prudence"},{"value":"Millicent"},{"value":"Constance"},{"value":"Winifred"},{"value":"Hermione"},{"value":"Penelope"},{"value":"Cecily"},{"value":"Cordelia"},{"value":"Rosalind"},{"value":"Philippa"},{"value":"Gwendoline"},{"value":"Eugenia"},{"value":"Daphne"},{"value":"Muriel"},{"value":"Sybil"},{"value":"Imogen"},{"value":"Verity"},{"value":"Augusta"},{"value":"Clarice"},{"value":"Harriet"},{"value":"Edith"},{"value":"Victoria"},{"value":"Matilda"}]},{"id":"britishSurnames","name":"British Surnames","type":"simple","hidden":true,"tags":["names","british"],"resultType":"name","entries":[{"value":"Ashworth"},{"value":"Blackburn"},{"value":"Carrington"},{"value":"Darcy"},{"value":"Fairfax"},{"value":"Hathaway"},{"value":"Langley"},{"value":"Pemberton"},{"value":"Worthington"},{"value":"Sterling"},{"value":"Ainsworth"},{"value":"Crawley"},{"value":"Hawthorne"},{"value":"Whitmore"},{"value":"Stafford"},{"value":"Harrington"},{"value":"Cromwell"},{"value":"Ashford"},{"value":"Blackwell"},{"value":"Cavendish"},{"value":"Wentworth"},{"value":"Sinclair"},{"value":"Thornwood"},{"value":"Prescott"}]},{"id":"irishMaleFirstNames","name":"Irish Male First Names","type":"simple","hidden":true,"tags":["names","male","irish"],"resultType":"name","entries":[{"value":"Patrick"},{"value":"Michael"},{"value":"Sean"},{"value":"Brendan"},{"value":"Liam"},{"value":"Connor"},{"value":"Declan"},{"value":"Finnegan"},{"value":"Seamus"},{"value":"Rory"},{"value":"Dermot"},{"value":"Cormac"},{"value":"Niall"},{"value":"Eamon"},{"value":"Kieran"},{"value":"Padraig"},{"value":"Donal"},{"value":"Colm"},{"value":"Cathal"},{"value":"Tadhg"},{"value":"Lorcan"},{"value":"Oisin"},{"value":"Ciaran"},{"value":"Fergal"}]},{"id":"irishFemaleFirstNames","name":"Irish Female First Names","type":"simple","hidden":true,"tags":["names","female","irish"],"resultType":"name","entries":[{"value":"Bridget"},{"value":"Siobhan"},{"value":"Aisling"},{"value":"Kathleen"},{"value":"Moira"},{"value":"Fiona"},{"value":"Maeve"},{"value":"Colleen"},{"value":"Deirdre"},{"value":"Eileen"},{"value":"Nuala"},{"value":"Roisin"},{"value":"Sinead"},{"value":"Aoife"},{"value":"Grainne"},{"value":"Orla"},{"value":"Nora"},{"value":"Maire"},{"value":"Clodagh"},{"value":"Saoirse"},{"value":"Ciara"},{"value":"Niamh"},{"value":"Caitlin"},{"value":"Erin"}]},{"id":"irishSurnames","name":"Irish Surnames","type":"simple","hidden":true,"tags":["names","irish"],"resultType":"name","entries":[{"value":"O'Brien"},{"value":"Murphy"},{"value":"Kelly"},{"value":"O'Sullivan"},{"value":"Walsh"},{"value":"O'Connor"},{"value":"Byrne"},{"value":"Ryan"},{"value":"O'Neill"},{"value":"Doyle"},{"value":"McCarthy"},{"value":"Gallagher"},{"value":"Doherty"},{"value":"Kennedy"},{"value":"Lynch"},{"value":"Murray"},{"value":"Quinn"},{"value":"Brennan"},{"value":"Duffy"},{"value":"Fitzgerald"},{"value":"O'Rourke"},{"value":"Flanagan"},{"value":"Callahan"},{"value":"Maguire"}]},{"id":"italianMaleFirstNames","name":"Italian Male First Names","type":"simple","hidden":true,"tags":["names","male","italian"],"resultType":"name","entries":[{"value":"Antonio"},{"value":"Giovanni"},{"value":"Giuseppe"},{"value":"Marco"},{"value":"Francesco"},{"value":"Salvatore"},{"value":"Vincenzo"},{"value":"Angelo"},{"value":"Domenico"},{"value":"Carlo"},{"value":"Nicola"},{"value":"Paolo"},{"value":"Stefano"},{"value":"Roberto"},{"value":"Alessandro"},{"value":"Lorenzo"},{"value":"Massimo"},{"value":"Raffaele"},{"value":"Enzo"},{"value":"Dante"},{"value":"Luca"},{"value":"Sergio"},{"value":"Fabio"},{"value":"Rocco"}]},{"id":"italianFemaleFirstNames","name":"Italian Female First Names","type":"simple","hidden":true,"tags":["names","female","italian"],"resultType":"name","entries":[{"value":"Maria"},{"value":"Giulia"},{"value":"Francesca"},{"value":"Rosa"},{"value":"Lucia"},{"value":"Angela"},{"value":"Isabella"},{"value":"Sofia"},{"value":"Caterina"},{"value":"Alessandra"},{"value":"Giovanna"},{"value":"Paola"},{"value":"Valentina"},{"value":"Elena"},{"value":"Chiara"},{"value":"Adriana"},{"value":"Antonella"},{"value":"Carmela"},{"value":"Bianca"},{"value":"Silvia"},{"value":"Teresa"},{"value":"Daniela"},{"value":"Gina"},{"value":"Loretta"}]},{"id":"italianSurnames","name":"Italian Surnames","type":"simple","hidden":true,"tags":["names","italian"],"resultType":"name","entries":[{"value":"Rossi"},{"value":"Russo"},{"value":"Ferrari"},{"value":"Esposito"},{"value":"Bianchi"},{"value":"Romano"},{"value":"Colombo"},{"value":"Ricci"},{"value":"Marino"},{"value":"Greco"},{"value":"Bruno"},{"value":"Gallo"},{"value":"Conti"},{"value":"De Luca"},{"value":"Costa"},{"value":"Giordano"},{"value":"Mancini"},{"value":"Rizzo"},{"value":"Lombardi"},{"value":"Moretti"},{"value":"Barbieri"},{"value":"Fontana"},{"value":"Santoro"},{"value":"Caruso"}]},{"id":"germanMaleFirstNames","name":"German Male First Names","type":"simple","hidden":true,"tags":["names","male","german"],"resultType":"name","entries":[{"value":"Hans"},{"value":"Friedrich"},{"value":"Wilhelm"},{"value":"Heinrich"},{"value":"Otto"},{"value":"Karl"},{"value":"Wolfgang"},{"value":"Ernst"},{"value":"Hermann"},{"value":"Gnther"},{"value":"Klaus"},{"value":"Helmut"},{"value":"Werner"},{"value":"Gerhard"},{"value":"Rudolf"},{"value":"Kurt"},{"value":"Erich"},{"value":"Dieter"},{"value":"Manfred"},{"value":"Siegfried"},{"value":"Konrad"},{"value":"Albrecht"},{"value":"Franz"},{"value":"Ludwig"}]},{"id":"germanFemaleFirstNames","name":"German Female First Names","type":"simple","hidden":true,"tags":["names","female","german"],"resultType":"name","entries":[{"value":"Greta"},{"value":"Helga"},{"value":"Ingrid"},{"value":"Frieda"},{"value":"Hildegard"},{"value":"Gertrude"},{"value":"Elsa"},{"value":"Liesel"},{"value":"Ursula"},{"value":"Brunhilde"},{"value":"Margarethe"},{"value":"Ilse"},{"value":"Hannelore"},{"value":"Sigrid"},{"value":"Monika"},{"value":"Renate"},{"value":"Erika"},{"value":"Brigitte"},{"value":"Sabine"},{"value":"Heidi"},{"value":"Christa"},{"value":"Waltraud"},{"value":"Inge"},{"value":"Anneliese"}]},{"id":"germanSurnames","name":"German Surnames","type":"simple","hidden":true,"tags":["names","german"],"resultType":"name","entries":[{"value":"Mller"},{"value":"Schmidt"},{"value":"Schneider"},{"value":"Fischer"},{"value":"Weber"},{"value":"Meyer"},{"value":"Wagner"},{"value":"Becker"},{"value":"Schulz"},{"value":"Hoffmann"},{"value":"Schfer"},{"value":"Koch"},{"value":"Bauer"},{"value":"Richter"},{"value":"Klein"},{"value":"Wolf"},{"value":"Schrder"},{"value":"Neumann"},{"value":"Schwarz"},{"value":"Zimmermann"},{"value":"Braun"},{"value":"Krger"},{"value":"Hartmann"},{"value":"Lange"}]},{"id":"easternEuropeanMaleFirstNames","name":"Eastern European Male First Names","type":"simple","hidden":true,"tags":["names","male","eastern-european"],"resultType":"name","entries":[{"value":"Ivan"},{"value":"Dmitri"},{"value":"Nikolai"},{"value":"Alexei"},{"value":"Sergei"},{"value":"Mikhail"},{"value":"Pavel"},{"value":"Andrei"},{"value":"Yuri"},{"value":"Viktor"},{"value":"Boris"},{"value":"Konstantin"},{"value":"Vladislav"},{"value":"Oleg"},{"value":"Igor"},{"value":"Stanislav"},{"value":"Josef"},{"value":"Kazimierz"},{"value":"Vaclav"},{"value":"Ladislav"},{"value":"Stefan"},{"value":"Miroslav"},{"value":"Bogdan"},{"value":"Tadeusz"}]},{"id":"easternEuropeanFemaleFirstNames","name":"Eastern European Female First Names","type":"simple","hidden":true,"tags":["names","female","eastern-european"],"resultType":"name","entries":[{"value":"Natasha"},{"value":"Svetlana"},{"value":"Katarina"},{"value":"Irina"},{"value":"Anastasia"},{"value":"Tatiana"},{"value":"Olga"},{"value":"Elena"},{"value":"Marta"},{"value":"Ludmila"},{"value":"Yelena"},{"value":"Nadia"},{"value":"Zoya"},{"value":"Galina"},{"value":"Vera"},{"value":"Marina"},{"value":"Zofia"},{"value":"Malgorzata"},{"value":"Jadwiga"},{"value":"Ivana"},{"value":"Milena"},{"value":"Daria"},{"value":"Agnieszka"},{"value":"Valentina"}]},{"id":"easternEuropeanSurnames","name":"Eastern European Surnames","type":"simple","hidden":true,"tags":["names","eastern-european"],"resultType":"name","entries":[{"value":"Volkov"},{"value":"Petrov"},{"value":"Kozlov"},{"value":"Novak"},{"value":"Kowalski"},{"value":"Dvorak"},{"value":"Horvat"},{"value":"Popov"},{"value":"Sokolov"},{"value":"Lebedev"},{"value":"Morozov"},{"value":"Kuznetsov"},{"value":"Nowak"},{"value":"Svoboda"},{"value":"Kovac"},{"value":"Jaworski"},{"value":"Babic"},{"value":"Krakowski"},{"value":"Vasiliev"},{"value":"Czerniak"},{"value":"Reznik"},{"value":"Karpov"},{"value":"Baranov"},{"value":"Zielinski"}]},{"id":"chineseMaleFirstNames","name":"Chinese Male First Names","type":"simple","hidden":true,"tags":["names","male","chinese"],"resultType":"name","entries":[{"value":"Wei"},{"value":"Ming"},{"value":"Jun"},{"value":"Chen"},{"value":"Hai"},{"value":"Long"},{"value":"Feng"},{"value":"Jian"},{"value":"Lei"},{"value":"Dong"},{"value":"Bing"},{"value":"Xin"},{"value":"Tao"},{"value":"Hong"},{"value":"Bao"},{"value":"Deshi"},{"value":"Enlai"},{"value":"Guang"},{"value":"Heng"},{"value":"Kang"},{"value":"Liang"},{"value":"Ning"},{"value":"Ping"},{"value":"Qiang"}]},{"id":"chineseFemaleFirstNames","name":"Chinese Female First Names","type":"simple","hidden":true,"tags":["names","female","chinese"],"resultType":"name","entries":[{"value":"Mei"},{"value":"Ling"},{"value":"Xiu"},{"value":"Yan"},{"value":"Hua"},{"value":"Jing"},{"value":"Fang"},{"value":"Yun"},{"value":"Lan"},{"value":"Qiu"},{"value":"Zhen"},{"value":"Xia"},{"value":"Li"},{"value":"Shu"},{"value":"Ai"},{"value":"Bai"},{"value":"Chun"},{"value":"Dan"},{"value":"Feng"},{"value":"Hui"},{"value":"Ju"},{"value":"Lian"},{"value":"Ning"},{"value":"Pei"}]},{"id":"chineseSurnames","name":"Chinese Surnames","type":"simple","hidden":true,"tags":["names","chinese"],"resultType":"name","entries":[{"value":"Wang"},{"value":"Li"},{"value":"Zhang"},{"value":"Liu"},{"value":"Chen"},{"value":"Yang"},{"value":"Huang"},{"value":"Zhao"},{"value":"Wu"},{"value":"Zhou"},{"value":"Xu"},{"value":"Sun"},{"value":"Ma"},{"value":"Zhu"},{"value":"Hu"},{"value":"Guo"},{"value":"Lin"},{"value":"He"},{"value":"Gao"},{"value":"Luo"},{"value":"Zheng"},{"value":"Liang"},{"value":"Xie"},{"value":"Tang"}]},{"id":"cultRole","name":"Cult Role","type":"simple","hidden":true,"tags":["mythos","cultist"],"resultType":"description","entries":[{"value":"**Initiate**  Recently recruited, still learning the cult's secrets"},{"value":"**True Believer**  A devoted worshipper who attends all rituals"},{"value":"**Recruiter**  Responsible for bringing in new members"},{"value":"**Guard**  Protects cult gatherings and eliminates threats"},{"value":"**Scholar**  Studies forbidden texts and ritual procedures"},{"value":"**Acolyte**  Assists in rituals and tends to sacred objects"},{"value":"**Inner Circle**  One of the leader's trusted lieutenants"},{"value":"**Sleeper Agent**  Maintains normal life while awaiting activation"}]},{"id":"corruptionSign","name":"Sign of Corruption","type":"simple","hidden":true,"tags":["mythos","cultist"],"resultType":"description","entries":[{"value":"Strange symbols tattooed or scarred on hidden parts of the body"},{"value":"Eyes that occasionally seem to reflect light like an animal's"},{"value":"A persistent odor of brine and decay they cannot wash away"},{"value":"Occasional twitches and muttering in unknown languages"},{"value":"An unnatural pallor and sensitivity to bright light"},{"value":"Fingernails that have become thick and yellowed"},{"value":"Dreams of R'lyeh that they speak of in their sleep"},{"value":"A cold touch that makes others uncomfortable"},{"value":"Subtle webbing beginning to form between their fingers"},{"value":"An obsessive habit of drawing certain geometric patterns"}]},{"id":"cultActivity","name":"Cult Activity","type":"simple","hidden":true,"tags":["mythos","cultist"],"resultType":"description","entries":[{"value":"Attends midnight rituals in the old warehouse district"},{"value":"Helps dispose of evidence after cult 'ceremonies'"},{"value":"Procures sacrificial materials through their profession"},{"value":"Scouts potential victims or new members"},{"value":"Maintains a hidden shrine in their home"},{"value":"Translates portions of forbidden texts"},{"value":"Creates forgeries to cover cult activities"},{"value":"Provides inside information about local authorities"},{"value":"Guards a location important to the cult's plans"},{"value":"Works to corrupt or recruit specific targets"}]},{"id":"witnessWillingness","name":"Witness Willingness to Talk","type":"simple","hidden":true,"tags":["investigation"],"resultType":"description","entries":[{"value":"**Desperate to talk**  Has been waiting for someone who will believe them"},{"value":"**Reluctant but persuadable**  Fears being thought insane but needs to unburden"},{"value":"**Terrified into silence**  Has been threatened or is too scared to speak"},{"value":"**In denial**  Insists they saw nothing, clearly lying"},{"value":"**Eager to help**  Wants answers and will cooperate fully"},{"value":"**Suspicious of investigators**  Worried about being blamed or committed"},{"value":"**Memory is fragmentary**  Genuinely confused about what they saw"},{"value":"**Will only talk for price**  Wants money, protection, or something else first"}]},{"id":"witnessWant","name":"Witness Wants","type":"simple","hidden":true,"tags":["investigation"],"resultType":"description","entries":[{"value":"To be believed and taken seriously"},{"value":"Protection from whatever they saw"},{"value":"Money to leave town immediately"},{"value":"Assurance that they aren't going mad"},{"value":"Revenge against whoever is responsible"},{"value":"Their missing loved one found"},{"value":"To forget what they witnessed"},{"value":"To understand what they saw"},{"value":"The police to take action"},{"value":"Someone else to take responsibility"}]},{"id":"youthFeatures","name":"Youth Features","type":"simple","entries":[{"value":"a youthful face"},{"value":"a face untouched by age"},{"value":"the features of one who hasn't seen enough winters"},{"value":"the face of someone whose young life hasn't treated them well"},{"value":"someone who is just coming out of a hard childhood"},{"value":"someone fresh out of school"},{"value":"the face of someone still excited about life"}]},{"id":"matureFeatures","name":"Mature Features","type":"simple","entries":[{"value":"someone who has seen things that have broken their spirit"},{"value":"determination not yet beated by age"},{"value":"youthful exuberance not dulled by adulthood"},{"value":"a face marred by stress lines"},{"value":"a tired visage"},{"value":"a casual, relaxed coutanence"},{"value":"someone who doesn't mind a scrap"},{"value":"fierce determination"},{"value":"a huanted, far-off look"}]},{"id":"socialCircle","name":"Social Circle","type":"simple","entries":[{"value":"some friends from college"},{"value":"a few close friends who have more money than them"},{"value":"a few close friends who have less money than them"},{"value":"nobody to speak of"},{"value":"only their family"},{"value":"a handful of very close friends"},{"value":"a large number of friends"},{"value":"family and neighbors"},{"value":"fellow professionals and neighbors"},{"value":"a couple of low-lifes from their childhood"},{"value":"a few wealthy friends from their childhood"},{"value":"childhood friends"},{"value":"a few other people they secretly are annoyed by"},{"value":"a motley crew from an old job"},{"value":"the dregs of society"},{"value":"a singular friend"}]},{"id":"upperClassSocialCircle","name":"Upper Class Social Circle","type":"simple","entries":[{"value":"poor folks from their childhood"},{"value":"only vapid, fleeting relationship"},{"value":"a whole crew of sychophants who hang on their every word"},{"value":"a set of business partners who double as friends"},{"value":"wealthy oil barons and bootleggers"},{"value":"the social elite"},{"value":"a group of artistic snobs"}],"extends":"socialCircle"}]`),Yj=[{id:"fullName",name:"Full Name",description:"Generates a culturally appropriate full name based on gender and background",tags:["name","core"],resultType:"name",shared:{$gender:"{{gender}}",$background:"{{background}}"},pattern:'{{switch[$gender=="male":$background.@maleFirstName].else[$background.@femaleFirstName]}} {{$background.@surname}}'},{id:"physicalDescription",name:"Physical Description",description:"Generates a detailed physical description",tags:["description","physical"],resultType:"description",shared:{$gender:"{{gender}}",$age:"{{ageRange}}",$build:"{{build}}",$hairColor:"{{hairColor}}",$hairStyle:'{{switch[$gender=="male":{{maleHairStyle}}].else[{{femaleHairStyle}}]}}',$eyeColor:"{{eyeColor}}",$feature:"{{distinguishingFeature}}",$clothing:'{{switch[$gender=="male":{{maleClothingStyle}}].else[{{femaleClothingStyle}}]}}'},pattern:'A {{$build}} {{switch[$gender=="male":"man"].else["woman"]}}, {{$build.@buildDesc}}, {{$age.@ageDesc}} with {{$hairColor.@hairColorDesc}} hair {{$hairStyle.@hairStyleDesc}} and {{$eyeColor.@eyeColorDesc}} eyes. {{switch[$gender=="male":"He"].else["She"]}} has {{$feature.@featureDesc}} {{$feature.@featureLocation}}, and is typically seen wearing {{$clothing.@clothingDesc}}.'},{id:"personalitySummary",name:"Personality Summary",description:"Generates a personality overview including traits, virtue, and flaw",tags:["description","personality"],resultType:"description",shared:{$primary:"{{primaryTrait}}",$secondary:"{{secondaryTrait}}",$virtue:"{{virtue}}",$flaw:"{{flaw}}"},pattern:"Fundamentally {{$primary}} and {{$secondary}}, {{$secondary.@secondaryBehavior}}. Their greatest strength is their {{$virtue.@virtueBehavior}}, but they struggle with {{$flaw}}, which manifests as {{$flaw.@flawBehavior}} especially when {{$flaw.@flawTrigger}}."},{id:"npcCompact",name:"Compact NPC",description:"A brief NPC summary for quick reference",tags:["npc","compact"],resultType:"npc",shared:{$gender:"{{gender}}",$background:"{{background}}",$age:"{{ageRange}}",$profession:"{{profession}}",$primaryTrait:"{{primaryTrait}}",$flaw:"{{flaw}}",$motivation:"{{motivation}}"},pattern:'**{{switch[$gender=="male":$background.@maleFirstName].else[$background.@femaleFirstName]}} {{$background.@surname}}**  {{$age}} {{$background}} {{$profession}}, {{$primaryTrait}} but prone to {{$flaw}}. Driven by {{$motivation}}.'},{id:"npcComplete",name:"Complete NPC",description:"Full detailed NPC generation with all attributes exposed for reference",tags:["npc","complete","main"],resultType:"npc",shared:{$gender:"{{gender}}",$background:"{{background}}",$age:"{{ageRange}}",$profession:"{{profession}}",$socialClass:"{{socialClass}}",$primaryTrait:"{{primaryTrait}}",$secondaryTrait:"{{secondaryTrait}}",$virtue:"{{virtue}}",$flaw:"{{flaw}}",$motivation:"{{motivation}}",$darkSecret:"{{darkSecret}}",$build:"{{build}}",$hairColor:"{{hairColor}}",$hairStyle:'{{switch[$gender=="male":{{maleHairStyle}}].else[{{femaleHairStyle}}]}}',$eyeColor:"{{eyeColor}}",$feature:"{{distinguishingFeature}}",$clothing:'{{switch[$gender=="male":{{maleClothingStyle}}].else[{{femaleClothingStyle}}]}}',$relationship:"{{relationshipStatus}}",$sanity:"{{sanityState}}",$mythos:"{{mythosConnection}}",$mannerism:"{{mannerism}}",$speech:"{{speechPattern}}"},pattern:`## {{switch[$gender=="male":$background.@maleFirstName].else[$background.@femaleFirstName]}} {{$background.@surname}}

**Gender:** {{switch[$gender=="male":"Male"].else["Female"]}} | **Age:** {{$age}} ({{$age.@ageYears}}) | **Background:** {{$background}}

**Profession:** {{$profession.@professionDesc}} specializing in {{$profession.@professionField}}, based at {{$profession.@professionLocation}}

**Social Standing:** {{$socialClass}}  {{$socialClass.@classDesc}}, living in {{$socialClass.@housing}}, hangs out with {{$socialClass.@socialCircle}}

---

### Physical Description

A {{$build.@buildDesc}} {{switch[$gender=="male":"man"].else["woman"]}} {{$age.@ageDesc}}, {{$build.@buildDetail}}. {{switch[$gender=="male":"He"].else["She"]}} has {{$hairColor.@hairColorDesc}} hair {{$hairStyle.@hairStyleDesc}} and {{$eyeColor.@eyeColorDesc}} eyes showing {{$age.@agePhysical}}.

**Distinguishing Feature:** {{switch[$gender=="male":"He"].else["She"]}} has {{$feature.@featureDesc}} {{$feature.@featureLocation}}.

**Typical Attire:** {{$clothing.@clothingDesc}}.

---

### Personality

**Primary Trait:** {{$primaryTrait}}  {{$primaryTrait.@traitBehavior}}

**Secondary Trait:** {{$secondaryTrait}}  {{$secondaryTrait.@secondaryBehavior}}

**Virtue:** {{$virtue}}  {{$virtue.@virtueBehavior}}

**Flaw:** {{$flaw}}  {{$flaw.@flawBehavior}}, especially when {{$flaw.@flawTrigger}}

**Mannerism:** {{$mannerism.@mannerismDesc}}

**Speech:** {{$speech.@speechDesc}}

---

### Background & Motivations

**Motivation:** {{$motivation}}  {{$motivation.@motivationDesc}}

**Dark Secret:** {{$darkSecret.@secretDesc}}. {{$darkSecret.@secretDetail}}. {{switch[$gender=="male":"He"].else["She"]}} {{$darkSecret.@secretEffect}}.

**Relationship Status:** {{$relationship}}  {{$relationship.@relationshipDesc}}{{switch[$relationship.@relationshipDetail!="":" "].else[""]}}{{$relationship.@relationshipDetail}}

---

### Connection to the Mythos

**Mental State:** {{$sanity}}  {{$sanity.@sanityDesc}}. {{switch[$gender=="male":"He"].else["She"]}} {{$sanity.@sanityBehavior}}.{{switch[$sanity.@sanityTells!="none apparent":" *Tells: "].else[""]}}{{switch[$sanity.@sanityTells!="none apparent":$sanity.@sanityTells].else[""]}}{{switch[$sanity.@sanityTells!="none apparent":".*"].else[""]}}

**Mythos Awareness:** {{$mythos}}  {{$mythos.@mythosDesc}}. {{switch[$gender=="male":"He"].else["She"]}} {{$mythos.@mythosReaction}}.

---

### Quick Reference

| Attribute | Value |
|-----------|-------|
| Name | {{switch[$gender=="male":$background.@maleFirstName].else[$background.@femaleFirstName]}} {{$background.@surname}} |
| Profession | {{$profession}} |
| Key Trait | {{$primaryTrait}} |
| Flaw | {{$flaw}} |
| Motivation | {{$motivation}} |
| Secret | {{$darkSecret}} |
| Sanity | {{$sanity}} |`},{id:"cultist",name:"Cultist NPC",description:"Generates an NPC specifically as a cultist or Mythos-connected antagonist",tags:["npc","antagonist","mythos","cultist"],resultType:"npc",shared:{$gender:"{{gender}}",$background:"{{background}}",$age:"{{ageRange}}",$profession:"{{profession}}",$primaryTrait:"{{primaryTrait}}",$flaw:"{{flaw}}"},pattern:`## Cultist: {{switch[$gender=="male":$background.@maleFirstName].else[$background.@femaleFirstName]}} {{$background.@surname}}

**Cover Identity:** {{$age}} {{$background}} {{$profession.@professionDesc}} at {{$profession.@professionLocation}}

**Personality:** Outwardly {{$primaryTrait}}, but secretly devoted to dark powers. Suffers from {{$flaw}}, which {{$flaw.@flawBehavior}}.

**Cult Role:** {{cultRole}}

**Signs of Corruption:** {{corruptionSign}}

**Secret Activities:** {{cultActivity}}`},{id:"witness",name:"Witness NPC",description:"Generates an NPC who has witnessed something strange",tags:["npc","witness","investigation"],resultType:"npc",shared:{$gender:"{{gender}}",$background:"{{background}}",$age:"{{ageRange}}",$profession:"{{profession}}",$sanity:"{{sanityState}}"},pattern:`## Witness: {{switch[$gender=="male":$background.@maleFirstName].else[$background.@femaleFirstName]}} {{$background.@surname}}

**Identity:** {{$age}} {{$background}} {{$profession.@professionDesc}}

**What They Saw:** {{witnessedEvent}}

**Current State:** {{$sanity}}  {{$sanity.@sanityDesc}}. {{$sanity.@sanityTells}}.

**Willingness to Talk:** {{witnessWillingness}}

**What They Want:** {{witnessWant}}`}],Zj={metadata:Vj,variables:Gj,tables:Kj,templates:Yj},Qj={name:"Sci-Fi NPC Generator",namespace:"rolldeo.scifi.npc",version:"1.0.0",specVersion:"1.0",author:"Rolldeo Community",description:"A comprehensive **system-agnostic** NPC generator for science fiction TTRPGs. Generates complete NPCs with names, physical descriptions, personalities, and backgrounds across seven unique spacefaring species.",instructions:"Roll on `fullNPC` for a complete character, or use individual templates like `npcName`, `npcPhysicalDescription`, `npcPersonalitySummary`, or `npcBackgroundSummary` for specific elements. All shared variables are accessible within a single generation for consistent results.",tags:["sci-fi","npc","character","generator","space","cyberpunk","aliens"],source:{license:"CC BY 4.0",copyright:{year:"2024",holder:"Rolldeo Community",notice:" 2024 Rolldeo Community. Licensed under Creative Commons Attribution 4.0."}},rights:{type:"open-content",official:!1,permissions:{commercialUse:!0,modification:!0,redistribution:!0,derivativeWorks:!0,attributionRequired:!0}},maxRecursionDepth:50,maxExplodingDice:100,maxInheritanceDepth:5,uniqueOverflowBehavior:"stop"},Jj={defaultSeparator:", ",setting:"generic-scifi"},Xj=JSON.parse(`[{"id":"gender","name":"Gender","type":"simple","description":"Determines the NPC's gender identity.","resultType":"trait","tags":["core","demographics","gender"],"entries":[{"id":"male","value":"male","weight":4},{"id":"female","value":"female","weight":4},{"id":"nonbinary","value":"non-binary","weight":2}]},{"id":"race","name":"Species","type":"simple","description":"The NPC's species. Each species has unique naming conventions and physical characteristics.","resultType":"trait","tags":["core","demographics","species","race"],"entries":[{"id":"human","value":"Human","weight":5,"description":"The most widespread species in the galaxy, known for their adaptability and ambition.","sets":{"maleFirstName":"{{humanMaleFirstNames}}","femaleFirstName":"{{humanFemaleFirstNames}}","neutralFirstName":"{{humanNeutralFirstNames}}","surname":"{{humanSurnames}}","nameFormat":"first-last","averageLifespan":"120","physicalBase":"bipedal mammalian humanoid","skinTonePool":"human","hasHair":"true","eyeStyle":"standard"}},{"id":"synthetic","value":"Synthetic","weight":3,"description":"Artificial beings ranging from humanoid androids to fully digital consciousnesses housed in mechanical frames.","sets":{"maleFirstName":"{{syntheticDesignations}}","femaleFirstName":"{{syntheticDesignations}}","neutralFirstName":"{{syntheticDesignations}}","surname":"{{syntheticModelSeries}}","nameFormat":"designation-series","averageLifespan":"indefinite","physicalBase":"humanoid mechanical construct","skinTonePool":"synthetic","hasHair":"optional","eyeStyle":"luminous"}},{"id":"vethkai","value":"Veth'kai","weight":2,"description":"Tall, slender beings with innate psionic abilities. Their translucent skin reveals faintly glowing neural pathways.","sets":{"maleFirstName":"{{vethkaiMaleNames}}","femaleFirstName":"{{vethkaiFemaleNames}}","neutralFirstName":"{{vethkaiNeutralNames}}","surname":"{{vethkaiHouseNames}}","nameFormat":"first-house","averageLifespan":"400","physicalBase":"tall slender humanoid with translucent skin","skinTonePool":"vethkai","hasHair":"false","eyeStyle":"solid-color"}},{"id":"saurix","value":"Saurix","weight":2,"description":"Reptilian species with scaled hides and keen predatory instincts. They possess excellent night vision and thermal sensing.","sets":{"maleFirstName":"{{saurixMaleNames}}","femaleFirstName":"{{saurixFemaleNames}}","neutralFirstName":"{{saurixNeutralNames}}","surname":"{{saurixClanNames}}","nameFormat":"clan-first","averageLifespan":"200","physicalBase":"muscular reptilian humanoid with scaled hide","skinTonePool":"saurix","hasHair":"false","eyeStyle":"slitted"}},{"id":"nexari","value":"Nexari","weight":2,"description":"Insectoid beings with chitinous exoskeletons and compound eyes. They maintain a limited hive-mind connection with their clutch-mates.","sets":{"maleFirstName":"{{nexariNames}}","femaleFirstName":"{{nexariNames}}","neutralFirstName":"{{nexariNames}}","surname":"{{nexariHiveDesignations}}","nameFormat":"hive-name","averageLifespan":"60","physicalBase":"insectoid humanoid with chitinous exoskeleton","skinTonePool":"nexari","hasHair":"false","eyeStyle":"compound"}},{"id":"gorath","value":"Gorath","weight":2,"description":"Massive, heavily-built warriors with thick hides and prominent tusks. They come from a high-gravity world and value strength and honor.","sets":{"maleFirstName":"{{gorathMaleNames}}","femaleFirstName":"{{gorathFemaleNames}}","neutralFirstName":"{{gorathNeutralNames}}","surname":"{{gorathTribalNames}}","nameFormat":"first-tribal","averageLifespan":"150","physicalBase":"massive heavily-built humanoid with thick hide","skinTonePool":"gorath","hasHair":"mane","eyeStyle":"deep-set"}},{"id":"crystalline","value":"Crystalline","weight":1,"description":"Silicon-based lifeforms with bodies composed of living crystal lattices. They communicate through harmonic resonance and light patterns.","sets":{"maleFirstName":"{{crystallineDesignations}}","femaleFirstName":"{{crystallineDesignations}}","neutralFirstName":"{{crystallineDesignations}}","surname":"{{crystallineResonanceNames}}","nameFormat":"resonance-designation","averageLifespan":"1000","physicalBase":"geometric crystalline humanoid form","skinTonePool":"crystalline","hasHair":"false","eyeStyle":"faceted"}}]},{"id":"humanMaleFirstNames","name":"Human Male First Names","type":"simple","description":"First names for male Humans, reflecting diverse cultural origins across colonized space.","resultType":"name","tags":["names","human","male","first-name"],"hidden":true,"entries":[{"value":"Marcus"},{"value":"Jin"},{"value":"Aleksandr"},{"value":"Kwame"},{"value":"Diego"},{"value":"Yusuf"},{"value":"Henrik"},{"value":"Raj"},{"value":"Toms"},{"value":"Chen"},{"value":"Viktor"},{"value":"Kofi"},{"value":"Matteo"},{"value":"Hiroshi"},{"value":"Elias"},{"value":"Zane"},{"value":"Cyrus"},{"value":"Idris"}]},{"id":"humanFemaleFirstNames","name":"Human Female First Names","type":"simple","description":"First names for female Humans, reflecting diverse cultural origins across colonized space.","resultType":"name","tags":["names","human","female","first-name"],"hidden":true,"entries":[{"value":"Aria"},{"value":"Mei"},{"value":"Natasha"},{"value":"Amara"},{"value":"Isabella"},{"value":"Fatima"},{"value":"Ingrid"},{"value":"Priya"},{"value":"Carmen"},{"value":"Yuki"},{"value":"Elena"},{"value":"Zara"},{"value":"Linnea"},{"value":"Adaeze"},{"value":"Sofia"},{"value":"Kira"},{"value":"Nova"},{"value":"Selene"}]},{"id":"humanNeutralFirstNames","name":"Human Neutral First Names","type":"simple","description":"Gender-neutral first names for Humans.","resultType":"name","tags":["names","human","neutral","first-name"],"hidden":true,"entries":[{"value":"Morgan"},{"value":"Quinn"},{"value":"Sage"},{"value":"River"},{"value":"Ash"},{"value":"Phoenix"},{"value":"Kai"},{"value":"Avery"},{"value":"Reese"},{"value":"Jordan"},{"value":"Blake"},{"value":"Indigo"},{"value":"Skyler"},{"value":"Rowan"},{"value":"Finley"},{"value":"Emery"}]},{"id":"humanSurnames","name":"Human Surnames","type":"simple","description":"Surnames for Humans, often reflecting ancestral homeworld or colony of origin.","resultType":"name","tags":["names","human","surname"],"hidden":true,"entries":[{"value":"Okonkwo"},{"value":"Nakamura"},{"value":"Volkov"},{"value":"Reyes"},{"value":"Chen"},{"value":"Al-Rashid"},{"value":"Andersen"},{"value":"Oduya"},{"value":"Kowalski"},{"value":"Sharma"},{"value":"Vance"},{"value":"Mbeki"},{"value":"Tanaka"},{"value":"Kova"},{"value":"Sterling"},{"value":"Cortez"},{"value":"Oyelaran"},{"value":"Lindqvist"},{"value":"Voskresenskiy"},{"value":"Zhao"}]},{"id":"syntheticDesignations","name":"Synthetic Designations","type":"simple","description":"Personal designations for Synthetic beings, often chosen or assigned at activation.","resultType":"name","tags":["names","synthetic","designation"],"hidden":true,"entries":[{"value":"ARIA-7"},{"value":"NOVA"},{"value":"CASS"},{"value":"ECHO-12"},{"value":"VEGA"},{"value":"AXIS"},{"value":"ZERO"},{"value":"PULSE"},{"value":"MIRA-3"},{"value":"ORION"},{"value":"HELIX"},{"value":"CIPHER"},{"value":"APEX"},{"value":"LYRA-9"},{"value":"VECTOR"},{"value":"QUANT"},{"value":"DELTA-5"},{"value":"ZENITH"}]},{"id":"syntheticModelSeries","name":"Synthetic Model Series","type":"simple","description":"Manufacturing series or lineage identifiers for Synthetic beings.","resultType":"name","tags":["names","synthetic","series"],"hidden":true,"entries":[{"value":"Prometheus-Class"},{"value":"Archon Series"},{"value":"Envoy Line"},{"value":"Nexus-9"},{"value":"Cogent Systems"},{"value":"Athena Protocol"},{"value":"Sovereign Build"},{"value":"Paragon Frame"},{"value":"Helios Gen-4"},{"value":"Sentinal Mark"},{"value":"Aurora Platform"},{"value":"Titan-Class"},{"value":"Oracle Series"},{"value":"Meridian Line"},{"value":"Apex Systems"},{"value":"Phantom Build"}]},{"id":"vethkaiMaleNames","name":"Veth'kai Male Names","type":"simple","description":"Names for male Veth'kai, characterized by flowing syllables that reflect their psionic nature.","resultType":"name","tags":["names","vethkai","male","first-name"],"hidden":true,"entries":[{"value":"Aelindros"},{"value":"Veythan"},{"value":"Thessomar"},{"value":"Kaelith"},{"value":"Sorvyn"},{"value":"Maelorin"},{"value":"Vyndros"},{"value":"Aethon"},{"value":"Lytheris"},{"value":"Thalvor"},{"value":"Seraphyn"},{"value":"Korvael"},{"value":"Zephyros"},{"value":"Nevareth"},{"value":"Althyron"}]},{"id":"vethkaiFemaleNames","name":"Veth'kai Female Names","type":"simple","description":"Names for female Veth'kai, characterized by flowing syllables that reflect their psionic nature.","resultType":"name","tags":["names","vethkai","female","first-name"],"hidden":true,"entries":[{"value":"Vaelindra"},{"value":"Thessara"},{"value":"Lyrisel"},{"value":"Aethwyn"},{"value":"Seraphina"},{"value":"Korvessa"},{"value":"Myraleth"},{"value":"Zephyrine"},{"value":"Thalira"},{"value":"Veylana"},{"value":"Nevariel"},{"value":"Althyria"},{"value":"Maelowyn"},{"value":"Sorvina"},{"value":"Kaelindra"}]},{"id":"vethkaiNeutralNames","name":"Veth'kai Neutral Names","type":"simple","description":"Gender-neutral names for Veth'kai.","resultType":"name","tags":["names","vethkai","neutral","first-name"],"hidden":true,"entries":[{"value":"Veylith"},{"value":"Aethys"},{"value":"Korvyn"},{"value":"Thessal"},{"value":"Myrael"},{"value":"Seraphe"},{"value":"Zephyr"},{"value":"Nevar"},{"value":"Lyris"},{"value":"Althyn"},{"value":"Sorveth"},{"value":"Kaelys"}]},{"id":"vethkaiHouseNames","name":"Veth'kai House Names","type":"simple","description":"House names for Veth'kai, representing ancient psionic lineages.","resultType":"name","tags":["names","vethkai","house","surname"],"hidden":true,"entries":[{"value":"of House Crystalline"},{"value":"of House Luminara"},{"value":"of House Voidwhisper"},{"value":"of House Starweave"},{"value":"of House Mindspire"},{"value":"of House Aetherbond"},{"value":"of House Thoughtveil"},{"value":"of House Dreamsong"},{"value":"of House Psyforge"},{"value":"of House Echomind"},{"value":"of House Soulbright"},{"value":"of House Mentalis"}]},{"id":"saurixMaleNames","name":"Saurix Male Names","type":"simple","description":"Names for male Saurix, featuring harsh consonants and guttural sounds.","resultType":"name","tags":["names","saurix","male","first-name"],"hidden":true,"entries":[{"value":"Krath"},{"value":"Vorsk"},{"value":"Thessk"},{"value":"Zyrak"},{"value":"Ghorrax"},{"value":"Skaleth"},{"value":"Vrexis"},{"value":"Korrvin"},{"value":"Draxus"},{"value":"Szeth"},{"value":"Vorrath"},{"value":"Krynn"},{"value":"Thessok"},{"value":"Ghorvan"},{"value":"Zyrik"}]},{"id":"saurixFemaleNames","name":"Saurix Female Names","type":"simple","description":"Names for female Saurix, featuring sibilant sounds and sharp endings.","resultType":"name","tags":["names","saurix","female","first-name"],"hidden":true,"entries":[{"value":"Sythara"},{"value":"Vressik"},{"value":"Kylissa"},{"value":"Zyreth"},{"value":"Thessira"},{"value":"Skalla"},{"value":"Vrexia"},{"value":"Korviss"},{"value":"Draxia"},{"value":"Szethys"},{"value":"Ghorrissa"},{"value":"Kraleth"},{"value":"Vorsska"},{"value":"Zyrisska"},{"value":"Thesska"}]},{"id":"saurixNeutralNames","name":"Saurix Neutral Names","type":"simple","description":"Gender-neutral names for Saurix.","resultType":"name","tags":["names","saurix","neutral","first-name"],"hidden":true,"entries":[{"value":"Syth"},{"value":"Vress"},{"value":"Korrv"},{"value":"Zyr"},{"value":"Thessk"},{"value":"Vrex"},{"value":"Drax"},{"value":"Szeth"},{"value":"Ghorr"},{"value":"Kral"},{"value":"Skael"},{"value":"Vorr"}]},{"id":"saurixClanNames","name":"Saurix Clan Names","type":"simple","description":"Clan names for Saurix, denoting ancestral hunting territories and lineage.","resultType":"name","tags":["names","saurix","clan","surname"],"hidden":true,"entries":[{"value":"Bloodscale"},{"value":"Ironhide"},{"value":"Sunbasker"},{"value":"Deathfang"},{"value":"Shadowclaw"},{"value":"Stonecoil"},{"value":"Venomtooth"},{"value":"Swiftscale"},{"value":"Ashwarden"},{"value":"Nightstalker"},{"value":"Thundermaw"},{"value":"Coldblood"},{"value":"Sandhunter"},{"value":"Bonebreaker"},{"value":"Starfang"}]},{"id":"nexariNames","name":"Nexari Names","type":"simple","description":"Personal names for Nexari. Their species uses the same naming conventions regardless of gender.","resultType":"name","tags":["names","nexari","personal"],"hidden":true,"entries":[{"value":"Chit'kara"},{"value":"Vrrix"},{"value":"Zzith'nal"},{"value":"Klik'thar"},{"value":"Skrrix"},{"value":"Thrr'vex"},{"value":"Chit'voss"},{"value":"Zzak'ril"},{"value":"Vrr'moth"},{"value":"Krik'zal"},{"value":"Thrax'is"},{"value":"Skrit'tar"},{"value":"Chak'rix"},{"value":"Zzith'vor"},{"value":"Vrex'nal"},{"value":"Klik'sor"}]},{"id":"nexariHiveDesignations","name":"Nexari Hive Designations","type":"simple","description":"Hive designations for Nexari, indicating their clutch of origin and role within the collective.","resultType":"name","tags":["names","nexari","hive","designation"],"hidden":true,"entries":[{"value":"of Hive Primus"},{"value":"of Hive Secundus"},{"value":"of the Amber Clutch"},{"value":"of the Obsidian Swarm"},{"value":"of Hive Architect"},{"value":"of the Emerald Colony"},{"value":"of Hive Navigator"},{"value":"of the Crimson Nest"},{"value":"of Hive Sentinel"},{"value":"of the Azure Collective"},{"value":"of Hive Scholar"},{"value":"of the Golden Brood"},{"value":"of Hive Wanderer"},{"value":"of the Silver Thorax"}]},{"id":"gorathMaleNames","name":"Gorath Male Names","type":"simple","description":"Names for male Gorath, featuring heavy syllables that can be bellowed across battlefields.","resultType":"name","tags":["names","gorath","male","first-name"],"hidden":true,"entries":[{"value":"Grokmar"},{"value":"Thundrak"},{"value":"Vorgun"},{"value":"Kraghul"},{"value":"Bolgrath"},{"value":"Morgok"},{"value":"Drukthar"},{"value":"Skaroth"},{"value":"Grommash"},{"value":"Thrakkus"},{"value":"Vorghun"},{"value":"Kragmar"},{"value":"Boltusk"},{"value":"Mogrund"},{"value":"Drukval"}]},{"id":"gorathFemaleNames","name":"Gorath Female Names","type":"simple","description":"Names for female Gorath, carrying the same weight and power as male names.","resultType":"name","tags":["names","gorath","female","first-name"],"hidden":true,"entries":[{"value":"Grukka"},{"value":"Thundra"},{"value":"Vorganna"},{"value":"Kraghild"},{"value":"Bolgra"},{"value":"Morganna"},{"value":"Druktha"},{"value":"Skareth"},{"value":"Grommara"},{"value":"Thrakka"},{"value":"Vorghild"},{"value":"Kragra"},{"value":"Bolga"},{"value":"Mogrunda"},{"value":"Drukvara"}]},{"id":"gorathNeutralNames","name":"Gorath Neutral Names","type":"simple","description":"Gender-neutral names for Gorath.","resultType":"name","tags":["names","gorath","neutral","first-name"],"hidden":true,"entries":[{"value":"Grok"},{"value":"Thund"},{"value":"Vorg"},{"value":"Kragh"},{"value":"Bolg"},{"value":"Morg"},{"value":"Druk"},{"value":"Skar"},{"value":"Grom"},{"value":"Thrak"},{"value":"Krag"},{"value":"Mogr"}]},{"id":"gorathTribalNames","name":"Gorath Tribal Names","type":"simple","description":"Tribal names for Gorath, representing warrior clans and ancestral allegiances.","resultType":"name","tags":["names","gorath","tribal","surname"],"hidden":true,"entries":[{"value":"of Clan Ironjaw"},{"value":"of Clan Skullcrusher"},{"value":"of Clan Bloodfist"},{"value":"of Clan Stoneheart"},{"value":"of Clan Thunderhorn"},{"value":"of Clan Bonegrinder"},{"value":"of Clan Steelhide"},{"value":"of Clan Warbringer"},{"value":"of Clan Gravityborn"},{"value":"of Clan Starbreaker"},{"value":"of Clan Voidwalker"},{"value":"of Clan Ashbringer"},{"value":"of Clan Mountainfall"},{"value":"of Clan Worldshaker"}]},{"id":"crystallineDesignations","name":"Crystalline Designations","type":"simple","description":"Personal designations for Crystalline beings, based on their unique harmonic frequencies.","resultType":"name","tags":["names","crystalline","designation"],"hidden":true,"entries":[{"value":"Resonance-7"},{"value":"Harmony-Prime"},{"value":"Fractal-Theta"},{"value":"Prism-9"},{"value":"Lattice-Alpha"},{"value":"Chime-Eternal"},{"value":"Facet-12"},{"value":"Clarity-Omega"},{"value":"Spectrum-3"},{"value":"Refraction-Delta"},{"value":"Pulse-Sigma"},{"value":"Harmonic-8"},{"value":"Crystal-Prime"},{"value":"Wavelength-Xi"},{"value":"Echo-Infinite"},{"value":"Vertex-6"}]},{"id":"crystallineResonanceNames","name":"Crystalline Resonance Names","type":"simple","description":"Resonance patterns that identify Crystalline lineage and frequency family.","resultType":"name","tags":["names","crystalline","resonance","surname"],"hidden":true,"entries":[{"value":"of the Singing Matrix"},{"value":"of the Eternal Chord"},{"value":"of the Prismatic Array"},{"value":"of the Deep Resonance"},{"value":"of the Light Lattice"},{"value":"of the Harmonic Convergence"},{"value":"of the Crystal Song"},{"value":"of the Fractured Spectrum"},{"value":"of the Silent Frequency"},{"value":"of the Infinite Facet"},{"value":"of the Starlight Matrix"},{"value":"of the Void Resonance"},{"value":"of the Perfect Tone"},{"value":"of the Ancient Wavelength"}]},{"id":"eyeColor","name":"Eye Color","type":"simple","description":"Eye colors appropriate for various species. Results should be interpreted based on species physiology.","resultType":"trait","tags":["appearance","eyes","color"],"entries":[{"id":"brown","value":"brown","weight":3,"tags":["common","natural"]},{"id":"blue","value":"blue","weight":2,"tags":["common","natural"]},{"id":"green","value":"green","weight":2,"tags":["common","natural"]},{"id":"grey","value":"grey","weight":1.5,"tags":["common","natural"]},{"id":"amber","value":"amber","weight":1.5,"tags":["uncommon","natural"]},{"id":"violet","value":"violet","weight":1,"tags":["rare","enhanced"]},{"id":"gold","value":"gold","weight":0.8,"tags":["rare","exotic"]},{"id":"silver","value":"silver","weight":0.7,"tags":["rare","exotic"]},{"id":"crimson","value":"crimson","weight":0.5,"tags":["rare","exotic"]},{"id":"white","value":"pale white","weight":0.5,"tags":["rare","exotic"]},{"id":"black","value":"deep black","weight":0.5,"tags":["rare","exotic"]},{"id":"heterochromatic","value":"heterochromatic ({{eyeColor}} and {{eyeColor}})","weight":0.3,"tags":["rare","unique"]},{"id":"bioluminescent","value":"bioluminescent {{eyeColor}}","weight":0.3,"tags":["rare","enhanced","synthetic"]},{"id":"cybernetic","value":"glowing cybernetic {{eyeColor}}","weight":0.4,"tags":["enhanced","synthetic"]}]},{"id":"hairDescription","name":"Hair Description","type":"simple","description":"Hair styles and descriptions. For species without traditional hair, interpret as equivalent features (crests, tendrils, etc.).","resultType":"trait","tags":["appearance","hair"],"entries":[{"id":"shortDark","value":"short, dark hair","weight":2},{"id":"shortLight","value":"short, light hair","weight":1.5},{"id":"shortRed","value":"short, red hair","weight":0.8},{"id":"longDark","value":"long, dark hair","weight":1.5},{"id":"longLight","value":"long, light hair","weight":1.2},{"id":"longRed","value":"long, auburn hair","weight":0.6},{"id":"shaved","value":"a shaved head","weight":1.5},{"id":"buzzcut","value":"a tight buzzcut","weight":1},{"id":"mohawk","value":"a striking mohawk","weight":0.5},{"id":"braided","value":"intricately braided hair","weight":0.8},{"id":"dreadlocks","value":"thick dreadlocks","weight":0.6},{"id":"greyingShort","value":"short, greying hair","weight":0.8},{"id":"greyingLong","value":"long, silver-grey hair","weight":0.5},{"id":"synthHair","value":"synthetic fiber hair in an unnatural color","weight":0.4,"tags":["synthetic","enhanced"]},{"id":"bald","value":"no hair (naturally bald)","weight":1},{"id":"thinning","value":"thinning hair","weight":0.7},{"id":"wildUntamed","value":"wild, untamed hair","weight":0.5},{"id":"slickedBack","value":"slicked-back hair","weight":0.6},{"id":"curly","value":"thick, curly hair","weight":1},{"id":"undercut","value":"a stylish undercut","weight":0.7}]},{"id":"bodyType","name":"Body Type","type":"simple","description":"General body type and build.","resultType":"trait","tags":["appearance","body","physique"],"entries":[{"id":"lean","value":"lean and wiry","weight":2},{"id":"athletic","value":"athletic and toned","weight":2},{"id":"muscular","value":"heavily muscular","weight":1.5},{"id":"stocky","value":"stocky and broad","weight":1.5},{"id":"tall","value":"unusually tall","weight":1},{"id":"short","value":"notably short","weight":1},{"id":"slender","value":"slender and graceful","weight":1.5},{"id":"heavyset","value":"heavyset and powerful","weight":1},{"id":"average","value":"average build","weight":2.5},{"id":"gaunt","value":"gaunt and angular","weight":0.8},{"id":"compact","value":"compact but solid","weight":1},{"id":"imposing","value":"imposingly large","weight":0.7},{"id":"lithe","value":"lithe and flexible","weight":1},{"id":"cybernetic","value":"visibly cybernetically enhanced","weight":0.5,"tags":["enhanced","synthetic"]}]},{"id":"distinguishingMark","name":"Distinguishing Mark","type":"simple","description":"A notable physical feature or mark that makes this NPC memorable.","resultType":"trait","tags":["appearance","distinctive","memorable"],"entries":[{"id":"scarFace","value":"a prominent scar across their face","weight":1.5},{"id":"scarHand","value":"a notable scar on their hand","weight":1},{"id":"tattooTribal","value":"elaborate tribal-style tattoos","weight":1},{"id":"tattooCircuit","value":"circuit-pattern tattoos that may be functional","weight":0.8,"tags":["enhanced"]},{"id":"tattooMemorial","value":"memorial tattoos with names and dates","weight":0.6},{"id":"cybereye","value":"an obvious cybernetic eye replacement","weight":0.8,"tags":["enhanced","synthetic"]},{"id":"cyberarm","value":"a visible prosthetic arm","weight":0.7,"tags":["enhanced","synthetic"]},{"id":"piercing","value":"extensive facial piercings","weight":0.8},{"id":"birthmark","value":"a distinctive birthmark","weight":1},{"id":"burnScar","value":"old burn scarring on visible skin","weight":0.6},{"id":"missingFinger","value":"a missing finger","weight":0.5},{"id":"militaryBrand","value":"a military or unit brand","weight":0.5},{"id":"glowingImplant","value":"subtle glowing implants beneath the skin","weight":0.6,"tags":["enhanced","synthetic"]},{"id":"unusualEyes","value":"striking, unusually colored eyes","weight":0.8},{"id":"weathered","value":"deeply weathered, lined features","weight":1},{"id":"pristine","value":"unnaturally pristine, flawless features","weight":0.4,"tags":["enhanced"]},{"id":"agedHands","value":"hands that tell stories of hard work","weight":0.8},{"id":"speciesUnique","value":"an unusual coloration or pattern for their species","weight":0.7},{"id":"none","value":"no particularly distinctive physical features","weight":2}]},{"id":"clothingStyle","name":"Clothing Style","type":"simple","description":"General clothing and fashion sense.","resultType":"trait","tags":["appearance","clothing","fashion"],"entries":[{"id":"utilitarian","value":"practical, utilitarian clothing with many pockets","weight":2},{"id":"military","value":"military-style fatigues or a uniform","weight":1.5},{"id":"corporate","value":"sleek corporate attire","weight":1.5},{"id":"laborer","value":"durable work clothes showing signs of use","weight":1.5},{"id":"spacer","value":"a worn flight suit or spacer's jumpsuit","weight":1.5},{"id":"highFashion","value":"cutting-edge high fashion","weight":0.8},{"id":"vintage","value":"deliberately retro or vintage clothing","weight":0.6},{"id":"religious","value":"religious or ceremonial garments","weight":0.5},{"id":"streetwear","value":"casual streetwear with cultural significance","weight":1.2},{"id":"armor","value":"light personal armor or armored clothing","weight":1},{"id":"environmental","value":"an environmental suit or partial suit","weight":0.8},{"id":"medical","value":"medical scrubs or a lab coat","weight":0.7},{"id":"elegant","value":"elegant, expensive-looking attire","weight":0.8},{"id":"ragged","value":"worn, patched clothing showing poverty","weight":1},{"id":"uniform","value":"a service industry or ship's uniform","weight":1.2},{"id":"cultural","value":"traditional clothing from their homeworld","weight":0.8},{"id":"eclectic","value":"an eclectic mix of styles from different cultures","weight":0.7},{"id":"minimalist","value":"minimalist, functional clothing","weight":1}]},{"id":"accessory","name":"Accessory","type":"simple","description":"A notable accessory or personal item.","resultType":"item","tags":["appearance","accessory","item"],"entries":[{"id":"datapad","value":"a well-used datapad they frequently check","weight":2},{"id":"sidearm","value":"a visible sidearm in a holster","weight":1.5},{"id":"jewelry","value":"distinctive jewelry with apparent sentimental value","weight":1.2},{"id":"religiousSymbol","value":"a religious or cultural symbol worn openly","weight":0.8},{"id":"militaryMedals","value":"military decorations or rank insignia","weight":0.6},{"id":"toolkit","value":"a belt of tools or equipment","weight":1.2},{"id":"headwear","value":"distinctive headwear (hat, cap, or headband)","weight":1},{"id":"eyewear","value":"notable eyewear (glasses, goggles, or visor)","weight":1.2},{"id":"scarf","value":"a distinctive scarf or neck covering","weight":0.8},{"id":"gloves","value":"specialized gloves they rarely remove","weight":0.7},{"id":"cane","value":"a walking cane (functional or fashionable)","weight":0.5},{"id":"bag","value":"a messenger bag or satchel always at their side","weight":1.2},{"id":"chronometer","value":"an expensive-looking chronometer","weight":0.8},{"id":"earpiece","value":"a communication earpiece","weight":1},{"id":"pet","value":"a small creature or drone companion","weight":0.4},{"id":"flask","value":"a personal flask they occasionally drink from","weight":0.6},{"id":"none","value":"no particularly notable accessories","weight":1.5}]},{"id":"primaryPersonalityTrait","name":"Primary Personality Trait","type":"simple","description":"The NPC's most dominant personality characteristic.","resultType":"trait","tags":["personality","primary","trait"],"entries":[{"id":"ambitious","value":"ambitious","weight":1.5,"sets":{"traitDesc":"driven to achieve and advance at any cost"}},{"id":"cautious","value":"cautious","weight":1.5,"sets":{"traitDesc":"careful and risk-averse in all dealings"}},{"id":"curious","value":"curious","weight":1.5,"sets":{"traitDesc":"endlessly interested in learning new things"}},{"id":"cynical","value":"cynical","weight":1.2,"sets":{"traitDesc":"doubtful of others' motives and sincerity"}},{"id":"diplomatic","value":"diplomatic","weight":1,"sets":{"traitDesc":"skilled at navigating social situations and conflicts"}},{"id":"eccentric","value":"eccentric","weight":0.8,"sets":{"traitDesc":"unconventional in thought and behavior"}},{"id":"friendly","value":"friendly","weight":1.5,"sets":{"traitDesc":"warm and approachable with strangers"}},{"id":"gruff","value":"gruff","weight":1.2,"sets":{"traitDesc":"rough in manner but not necessarily unkind"}},{"id":"honorable","value":"honorable","weight":1,"sets":{"traitDesc":"strongly committed to a personal code of ethics"}},{"id":"idealistic","value":"idealistic","weight":1,"sets":{"traitDesc":"motivated by beliefs in how things should be"}},{"id":"jovial","value":"jovial","weight":1,"sets":{"traitDesc":"good-humored and fond of laughter"}},{"id":"methodical","value":"methodical","weight":1.2,"sets":{"traitDesc":"systematic and orderly in approach"}},{"id":"passionate","value":"passionate","weight":1.2,"sets":{"traitDesc":"emotionally intense about their interests"}},{"id":"pragmatic","value":"pragmatic","weight":1.5,"sets":{"traitDesc":"focused on practical solutions over ideals"}},{"id":"reserved","value":"reserved","weight":1.2,"sets":{"traitDesc":"quiet and slow to reveal themselves to others"}},{"id":"ruthless","value":"ruthless","weight":0.8,"sets":{"traitDesc":"willing to do whatever it takes to succeed"}},{"id":"stoic","value":"stoic","weight":1,"sets":{"traitDesc":"controlled and unflappable under pressure"}},{"id":"trusting","value":"trusting","weight":0.8,"sets":{"traitDesc":"inclined to take others at their word"}},{"id":"vengeful","value":"vengeful","weight":0.6,"sets":{"traitDesc":"holds grudges and seeks payback for wrongs"}},{"id":"worldweary","value":"world-weary","weight":1,"sets":{"traitDesc":"tired and experienced, having seen too much"}}]},{"id":"secondaryPersonalityTrait","name":"Secondary Personality Trait","type":"simple","description":"A secondary personality characteristic that adds depth.","resultType":"trait","tags":["personality","secondary","trait"],"entries":[{"id":"analytical","value":"analytical","weight":1.2,"sets":{"trait2Desc":"tends to break down problems logically"}},{"id":"artistic","value":"artistic","weight":0.8,"sets":{"trait2Desc":"appreciates beauty and creative expression"}},{"id":"blunt","value":"blunt","weight":1.2,"sets":{"trait2Desc":"speaks directly without softening words"}},{"id":"charitable","value":"charitable","weight":0.8,"sets":{"trait2Desc":"generous with resources and time"}},{"id":"competitive","value":"competitive","weight":1.2,"sets":{"trait2Desc":"driven to outperform others"}},{"id":"contemplative","value":"contemplative","weight":0.8,"sets":{"trait2Desc":"prone to deep thought and reflection"}},{"id":"decisive","value":"decisive","weight":1,"sets":{"trait2Desc":"quick to make decisions and stick to them"}},{"id":"empathetic","value":"empathetic","weight":1,"sets":{"trait2Desc":"attuned to others' emotions and needs"}},{"id":"frugal","value":"frugal","weight":0.8,"sets":{"trait2Desc":"careful with resources and spending"}},{"id":"humble","value":"humble","weight":0.8,"sets":{"trait2Desc":"modest about accomplishments and status"}},{"id":"impatient","value":"impatient","weight":1.2,"sets":{"trait2Desc":"frustrated by delays and slowness"}},{"id":"inquisitive","value":"inquisitive","weight":1,"sets":{"trait2Desc":"asks many questions and seeks understanding"}},{"id":"loyal","value":"loyal","weight":1.2,"sets":{"trait2Desc":"devoted to those they consider friends or allies"}},{"id":"meticulous","value":"meticulous","weight":0.8,"sets":{"trait2Desc":"pays careful attention to detail"}},{"id":"nostalgic","value":"nostalgic","weight":0.6,"sets":{"trait2Desc":"often reflects on and romanticizes the past"}},{"id":"observant","value":"observant","weight":1.2,"sets":{"trait2Desc":"notices details others might miss"}},{"id":"optimistic","value":"optimistic","weight":1,"sets":{"trait2Desc":"tends to expect positive outcomes"}},{"id":"paranoid","value":"paranoid","weight":0.8,"sets":{"trait2Desc":"suspects hidden threats and agendas"}},{"id":"protective","value":"protective","weight":1,"sets":{"trait2Desc":"instinctively shields those they care about"}},{"id":"sarcastic","value":"sarcastic","weight":1,"sets":{"trait2Desc":"uses ironic humor, sometimes at others' expense"}}]},{"id":"personalityFlaw","name":"Personality Flaw","type":"simple","description":"A notable character flaw or weakness.","resultType":"trait","tags":["personality","flaw","weakness"],"entries":[{"id":"addictive","value":"has an addictive personality","weight":1,"sets":{"flawDesc":"prone to developing unhealthy dependencies"}},{"id":"arrogant","value":"is arrogant","weight":1.2,"sets":{"flawDesc":"overestimates their own importance and abilities"}},{"id":"cowardly","value":"is cowardly","weight":0.8,"sets":{"flawDesc":"tends to flee from danger or conflict"}},{"id":"deceitful","value":"is deceitful","weight":1,"sets":{"flawDesc":"lies easily and often"}},{"id":"envious","value":"is envious","weight":0.8,"sets":{"flawDesc":"resentful of others' success or possessions"}},{"id":"greedy","value":"is greedy","weight":1,"sets":{"flawDesc":"prioritizes wealth above most other concerns"}},{"id":"gullible","value":"is gullible","weight":0.8,"sets":{"flawDesc":"easily deceived by others"}},{"id":"hotTempered","value":"is hot-tempered","weight":1.2,"sets":{"flawDesc":"quick to anger and slow to calm"}},{"id":"indecisive","value":"is indecisive","weight":0.8,"sets":{"flawDesc":"struggles to commit to choices"}},{"id":"judgmental","value":"is judgmental","weight":1,"sets":{"flawDesc":"quick to form and express negative opinions"}},{"id":"lazy","value":"is lazy","weight":0.8,"sets":{"flawDesc":"avoids effort when possible"}},{"id":"overconfident","value":"is overconfident","weight":1.2,"sets":{"flawDesc":"takes on more than they can handle"}},{"id":"petty","value":"is petty","weight":0.8,"sets":{"flawDesc":"focuses on trivial slights and grievances"}},{"id":"reckless","value":"is reckless","weight":1,"sets":{"flawDesc":"acts without considering consequences"}},{"id":"secretive","value":"is secretive","weight":1,"sets":{"flawDesc":"keeps too much hidden, even from allies"}},{"id":"selfDoubt","value":"struggles with self-doubt","weight":1,"sets":{"flawDesc":"questions their own worth and abilities"}},{"id":"stubborn","value":"is stubborn","weight":1.2,"sets":{"flawDesc":"refuses to change course even when wrong"}},{"id":"vain","value":"is vain","weight":0.8,"sets":{"flawDesc":"excessively concerned with appearance and reputation"}},{"id":"vindictive","value":"is vindictive","weight":0.8,"sets":{"flawDesc":"seeks revenge for perceived wrongs"}},{"id":"workaholic","value":"is a workaholic","weight":1,"sets":{"flawDesc":"neglects personal life for professional pursuits"}}]},{"id":"motivation","name":"Core Motivation","type":"simple","description":"What fundamentally drives this NPC.","resultType":"trait","tags":["personality","motivation","drive"],"entries":[{"id":"wealth","value":"accumulating wealth","weight":1.5,"sets":{"motivationDesc":"They believe money solves problems and provides security."}},{"id":"power","value":"gaining power and influence","weight":1.2,"sets":{"motivationDesc":"They seek control over their own destiny and others'."}},{"id":"knowledge","value":"pursuing knowledge","weight":1,"sets":{"motivationDesc":"They hunger to understand the universe's secrets."}},{"id":"family","value":"protecting family","weight":1.2,"sets":{"motivationDesc":"Their family comes before everything else."}},{"id":"revenge","value":"seeking revenge","weight":0.8,"sets":{"motivationDesc":"Someone wronged them, and they won't rest until the score is settled."}},{"id":"redemption","value":"seeking redemption","weight":0.8,"sets":{"motivationDesc":"They carry guilt and seek to make amends."}},{"id":"survival","value":"simple survival","weight":1,"sets":{"motivationDesc":"In a dangerous galaxy, just staying alive is achievement enough."}},{"id":"duty","value":"fulfilling duty","weight":1,"sets":{"motivationDesc":"They are bound by obligation to a cause, person, or organization."}},{"id":"freedom","value":"pursuing freedom","weight":1,"sets":{"motivationDesc":"They chafe under any restriction and seek true independence."}},{"id":"fame","value":"achieving fame","weight":0.8,"sets":{"motivationDesc":"They want to be remembered, to make their mark on history."}},{"id":"love","value":"finding or protecting love","weight":0.8,"sets":{"motivationDesc":"A person they love drives their every decision."}},{"id":"justice","value":"upholding justice","weight":0.8,"sets":{"motivationDesc":"They believe in fairness and work to make things right."}},{"id":"pleasure","value":"seeking pleasure","weight":0.8,"sets":{"motivationDesc":"Life is short; they intend to enjoy it."}},{"id":"acceptance","value":"gaining acceptance","weight":0.8,"sets":{"motivationDesc":"They want to belong, to be valued by others."}},{"id":"discovery","value":"discovering the unknown","weight":1,"sets":{"motivationDesc":"The frontier calls to them; they must see what's out there."}},{"id":"stability","value":"maintaining stability","weight":1,"sets":{"motivationDesc":"They've seen chaos and now value order above all."}},{"id":"ideology","value":"spreading an ideology","weight":0.6,"sets":{"motivationDesc":"They have a vision for how things should be and work to make it reality."}},{"id":"legacy","value":"building a legacy","weight":0.8,"sets":{"motivationDesc":"They want to create something that outlasts them."}}]},{"id":"quirk","name":"Personality Quirk","type":"simple","description":"An unusual habit, behavior, or mannerism.","resultType":"trait","tags":["personality","quirk","mannerism"],"entries":[{"id":"collectsSmall","value":"collects small, seemingly worthless objects","weight":1},{"id":"superstitious","value":"is deeply superstitious","weight":1},{"id":"hums","value":"hums or whistles when nervous","weight":0.8},{"id":"quotes","value":"frequently quotes from a favorite text or vid","weight":0.8},{"id":"nicknames","value":"gives everyone nicknames","weight":0.8},{"id":"fidgets","value":"constantly fidgets with a small object","weight":1},{"id":"taps","value":"taps surfaces in patterns when thinking","weight":0.6},{"id":"cleanlinessObs","value":"is obsessive about cleanliness","weight":0.8},{"id":"speaksToSelf","value":"talks to themselves regularly","weight":0.8},{"id":"neverSits","value":"rarely sits; prefers to stand or pace","weight":0.6},{"id":"touchesFace","value":"frequently touches their face when lying","weight":0.6},{"id":"oldLang","value":"uses archaic or formal language","weight":0.6},{"id":"slang","value":"peppers speech with obscure slang","weight":0.8},{"id":"foodPicky","value":"is extremely picky about food","weight":0.8},{"id":"laughInappropriate","value":"laughs at inappropriate moments","weight":0.6},{"id":"neverForgets","value":"never forgets a face or name","weight":0.8},{"id":"alwaysEarly","value":"is compulsively early to everything","weight":0.6},{"id":"smellsThings","value":"sniffs things before touching them","weight":0.4},{"id":"countingObs","value":"counts things obsessively","weight":0.5},{"id":"checksExits","value":"always notes exits when entering a room","weight":1},{"id":"oldStories","value":"tells long, rambling stories from the past","weight":0.8},{"id":"nameDrop","value":"name-drops constantly","weight":0.6}]},{"id":"speechPattern","name":"Speech Pattern","type":"simple","description":"How this NPC speaks and communicates.","resultType":"trait","tags":["personality","speech","communication"],"entries":[{"id":"formal","value":"speaks in formal, precise language","weight":1.2},{"id":"casual","value":"uses casual, relaxed speech","weight":1.5},{"id":"terse","value":"communicates in short, clipped sentences","weight":1},{"id":"verbose","value":"tends to be long-winded and verbose","weight":0.8},{"id":"soft","value":"speaks softly, forcing others to lean in","weight":0.6},{"id":"loud","value":"speaks loudly, as if always giving orders","weight":0.8},{"id":"monotone","value":"speaks in a flat, monotone voice","weight":0.6},{"id":"animated","value":"speaks with animated gestures and expressions","weight":1},{"id":"accent","value":"has a distinctive regional or colonial accent","weight":1.2},{"id":"slowDeliberate","value":"speaks slowly and deliberately","weight":0.8},{"id":"rapidFire","value":"speaks rapidly, often interrupting themselves","weight":0.8},{"id":"technical","value":"uses excessive technical jargon","weight":1},{"id":"poetic","value":"speaks in an almost poetic, flowery manner","weight":0.5},{"id":"sarcasm","value":"relies heavily on sarcasm and irony","weight":1},{"id":"directBlunt","value":"blunt and direct, avoiding social niceties","weight":1},{"id":"diplomatic","value":"carefully diplomatic, rarely giving offense","weight":0.8},{"id":"questioning","value":"answers questions with questions","weight":0.6},{"id":"trailing","value":"trails off mid-sentence frequently","weight":0.5},{"id":"catchphrase","value":"has a distinctive catchphrase they overuse","weight":0.6},{"id":"curses","value":"curses frequently in casual speech","weight":1}]},{"id":"profession","name":"Profession","type":"simple","description":"The NPC's primary occupation or role.","resultType":"trait","tags":["background","profession","occupation"],"entries":[{"id":"pilot","value":"starship pilot","weight":1.5,"sets":{"professionDesc":"navigates vessels through the void between worlds"}},{"id":"mechanic","value":"mechanic or engineer","weight":1.5,"sets":{"professionDesc":"keeps machines and ships running"}},{"id":"merchant","value":"trader or merchant","weight":1.5,"sets":{"professionDesc":"buys and sells goods across the sector"}},{"id":"soldier","value":"soldier or mercenary","weight":1.2,"sets":{"professionDesc":"fights for a cause, a company, or credits"}},{"id":"doctor","value":"medical professional","weight":1,"sets":{"professionDesc":"treats the sick and wounded"}},{"id":"scientist","value":"scientist or researcher","weight":0.8,"sets":{"professionDesc":"pushes the boundaries of knowledge"}},{"id":"smuggler","value":"smuggler","weight":0.8,"sets":{"professionDesc":"moves goods past those who would stop them"}},{"id":"bountyHunter","value":"bounty hunter","weight":0.6,"sets":{"professionDesc":"tracks and captures those with prices on their heads"}},{"id":"miner","value":"asteroid miner","weight":1,"sets":{"professionDesc":"extracts resources from rocks in the void"}},{"id":"administrator","value":"administrator or bureaucrat","weight":1,"sets":{"professionDesc":"manages systems, people, or organizations"}},{"id":"diplomat","value":"diplomat or negotiator","weight":0.6,"sets":{"professionDesc":"navigates political waters between factions"}},{"id":"entertainer","value":"entertainer or performer","weight":0.8,"sets":{"professionDesc":"brings joy, art, or distraction to others"}},{"id":"security","value":"security specialist","weight":1.2,"sets":{"professionDesc":"protects people, places, or information"}},{"id":"hacker","value":"hacker or slicer","weight":0.7,"sets":{"professionDesc":"infiltrates digital systems for profit or principle"}},{"id":"bartender","value":"bartender or service worker","weight":1.2,"sets":{"professionDesc":"serves customers and hears their stories"}},{"id":"criminal","value":"career criminal","weight":0.8,"sets":{"professionDesc":"operates outside the law as a way of life"}},{"id":"lawEnforcement","value":"law enforcement officer","weight":0.8,"sets":{"professionDesc":"upholds the law, for better or worse"}},{"id":"clergy","value":"religious figure or clergy","weight":0.5,"sets":{"professionDesc":"tends to spiritual needs and faith communities"}},{"id":"journalist","value":"journalist or media personality","weight":0.6,"sets":{"professionDesc":"uncovers and shares stories with the public"}},{"id":"explorer","value":"explorer or scout","weight":0.7,"sets":{"professionDesc":"ventures into the unknown and reports back"}},{"id":"farmer","value":"agricultural worker or farmer","weight":0.8,"sets":{"professionDesc":"grows food in domes, hydroponics, or terraformed land"}},{"id":"dockworker","value":"dock worker or cargo handler","weight":1,"sets":{"professionDesc":"loads, unloads, and manages freight"}},{"id":"salvager","value":"salvager or scrapper","weight":0.8,"sets":{"professionDesc":"recovers value from wrecks and ruins"}},{"id":"corpExec","value":"corporate executive","weight":0.6,"sets":{"professionDesc":"wields power through economic influence"}},{"id":"teacher","value":"teacher or instructor","weight":0.6,"sets":{"professionDesc":"passes knowledge to the next generation"}},{"id":"retired","value":"retired (formerly {{profession}})","weight":0.8,"sets":{"professionDesc":"has stepped back from active work"}}]},{"id":"socialClass","name":"Social Class","type":"simple","description":"The NPC's socioeconomic standing.","resultType":"trait","tags":["background","social","class"],"entries":[{"id":"destitute","value":"destitute","weight":0.8,"sets":{"classDesc":"barely surviving, often homeless or dependent on charity"}},{"id":"poor","value":"poor","weight":1.5,"sets":{"classDesc":"struggling to meet basic needs"}},{"id":"workingClass","value":"working class","weight":2.5,"sets":{"classDesc":"employed in labor or service, living paycheck to paycheck"}},{"id":"middleClass","value":"middle class","weight":2,"sets":{"classDesc":"comfortable but not wealthy, with some security"}},{"id":"upperMiddle","value":"upper-middle class","weight":1,"sets":{"classDesc":"well-off professionals or successful business owners"}},{"id":"wealthy","value":"wealthy","weight":0.6,"sets":{"classDesc":"significant assets and influence"}},{"id":"elite","value":"elite","weight":0.3,"sets":{"classDesc":"among the most powerful and privileged in society"}},{"id":"outcast","value":"social outcast","weight":0.6,"sets":{"classDesc":"rejected by mainstream society for various reasons"}},{"id":"criminal","value":"criminal underclass","weight":0.6,"sets":{"classDesc":"survives through illegal means"}},{"id":"indentured","value":"indentured or debt-bonded","weight":0.4,"sets":{"classDesc":"working to pay off debts with limited freedom"}}]},{"id":"relationshipStatus","name":"Relationship Status","type":"simple","description":"The NPC's current romantic or family situation.","resultType":"trait","tags":["background","relationship","personal"],"entries":[{"id":"single","value":"single and unattached","weight":2.5},{"id":"partnered","value":"in a committed partnership","weight":2},{"id":"married","value":"married or bonded","weight":1.5},{"id":"divorced","value":"divorced or separated","weight":1},{"id":"widowed","value":"widowed","weight":0.8},{"id":"complicated","value":"in a complicated relationship","weight":1},{"id":"polyamorous","value":"in multiple relationships","weight":0.6},{"id":"seekingLove","value":"actively seeking a partner","weight":1},{"id":"estranged","value":"estranged from a former partner","weight":0.7},{"id":"secretRelationship","value":"in a secret relationship","weight":0.5},{"id":"arranged","value":"in an arranged or political union","weight":0.4},{"id":"longDistance","value":"in a long-distance relationship","weight":0.8},{"id":"devoted","value":"devoted to their work instead of romance","weight":1}]},{"id":"homeworldType","name":"Homeworld Type","type":"simple","description":"The type of world or environment where this NPC grew up.","resultType":"location","tags":["background","homeworld","origin"],"entries":[{"id":"coreWorld","value":"a wealthy core world","weight":1,"sets":{"worldDesc":"civilized, comfortable, and politically significant"}},{"id":"colonyWorld","value":"a developing colony world","weight":1.5,"sets":{"worldDesc":"still being settled, with frontier mentality"}},{"id":"industrialWorld","value":"an industrial world","weight":1.2,"sets":{"worldDesc":"dominated by manufacturing and pollution"}},{"id":"agriWorld","value":"an agricultural world","weight":1,"sets":{"worldDesc":"devoted to food production, often rural"}},{"id":"spaceStation","value":"a space station","weight":1.2,"sets":{"worldDesc":"artificial habitat in the void"}},{"id":"miningOutpost","value":"a mining outpost","weight":0.8,"sets":{"worldDesc":"harsh conditions focused on resource extraction"}},{"id":"arcology","value":"a megacity or arcology","weight":0.8,"sets":{"worldDesc":"massive urban structure housing millions"}},{"id":"shipborn","value":"a generational starship","weight":0.5,"sets":{"worldDesc":"born and raised entirely in space"}},{"id":"fringe","value":"a fringe world","weight":1,"sets":{"worldDesc":"far from central authority, lawless"}},{"id":"militaryBase","value":"a military installation","weight":0.6,"sets":{"worldDesc":"raised in a regimented, martial environment"}},{"id":"researchStation","value":"a research station","weight":0.4,"sets":{"worldDesc":"isolated scientific community"}},{"id":"pleasureWorld","value":"a resort or pleasure world","weight":0.3,"sets":{"worldDesc":"devoted to tourism and leisure"}},{"id":"prisonWorld","value":"a prison colony","weight":0.3,"sets":{"worldDesc":"born to or among inmates"}},{"id":"nomadic","value":"a nomadic fleet","weight":0.4,"sets":{"worldDesc":"part of a traveling community of ships"}},{"id":"terraforming","value":"a world being terraformed","weight":0.5,"sets":{"worldDesc":"harsh conditions gradually improving"}},{"id":"unknown","value":"unknown origin","weight":0.4,"sets":{"worldDesc":"mysterious or deliberately hidden background"}}]},{"id":"factionAffiliation","name":"Faction Affiliation","type":"simple","description":"The organization or group this NPC is most closely aligned with.","resultType":"faction","tags":["background","faction","allegiance"],"entries":[{"id":"corporate","value":"a major corporation","weight":1.5,"sets":{"factionDesc":"loyal to their employer's interests"}},{"id":"military","value":"a military organization","weight":1.2,"sets":{"factionDesc":"bound by duty and chain of command"}},{"id":"criminalSyndicate","value":"a criminal syndicate","weight":0.8,"sets":{"factionDesc":"connected to organized crime"}},{"id":"guild","value":"a professional guild or union","weight":1,"sets":{"factionDesc":"member of a trade organization"}},{"id":"religious","value":"a religious organization","weight":0.6,"sets":{"factionDesc":"devoted to a faith or spiritual movement"}},{"id":"government","value":"a planetary government","weight":1,"sets":{"factionDesc":"serves or represents political authority"}},{"id":"rebel","value":"a rebel or resistance movement","weight":0.6,"sets":{"factionDesc":"fights against established power"}},{"id":"smugglerRing","value":"a smuggling network","weight":0.5,"sets":{"factionDesc":"part of an underground trade operation"}},{"id":"mercCompany","value":"a mercenary company","weight":0.7,"sets":{"factionDesc":"fights for whoever pays"}},{"id":"colonialAuth","value":"a colonial authority","weight":0.6,"sets":{"factionDesc":"administers frontier territories"}},{"id":"scientificInst","value":"a scientific institution","weight":0.5,"sets":{"factionDesc":"pursues knowledge and research"}},{"id":"none","value":"no particular faction","weight":2,"sets":{"factionDesc":"independent and unaligned"}},{"id":"multiple","value":"multiple factions (conflicted)","weight":0.4,"sets":{"factionDesc":"has divided loyalties"}},{"id":"former","value":"formerly aligned with {{factionAffiliation}}","weight":0.5,"sets":{"factionDesc":"left or was expelled from their former group"}},{"id":"pirate","value":"a pirate crew or fleet","weight":0.5,"sets":{"factionDesc":"preys on shipping and settlements"}},{"id":"settlement","value":"their local community","weight":1.2,"sets":{"factionDesc":"primarily loyal to neighbors and home"}}]},{"id":"secretOrRumor","name":"Secret or Rumor","type":"simple","description":"Something hidden about or whispered regarding this NPC.","resultType":"hook","tags":["background","secret","rumor","plot-hook"],"entries":[{"id":"hiddenWealth","value":"secretly possesses hidden wealth","weight":1},{"id":"falseIdentity","value":"is living under a false identity","weight":0.8},{"id":"wantedPerson","value":"is wanted for a crime (may be innocent)","weight":0.8},{"id":"doubleAgent","value":"is secretly working for another faction","weight":0.6},{"id":"terminalIllness","value":"has a terminal illness they're hiding","weight":0.5},{"id":"augmentations","value":"has illegal or experimental augmentations","weight":0.7},{"id":"familySecret","value":"knows a dangerous family secret","weight":0.8},{"id":"addiction","value":"hides a serious addiction","weight":1},{"id":"debt","value":"owes a massive debt to dangerous people","weight":1},{"id":"pastKilling","value":"killed someone in their past","weight":0.7},{"id":"witness","value":"witnessed something they shouldn't have","weight":0.8},{"id":"inheritance","value":"stands to inherit something valuable","weight":0.5},{"id":"blackmail","value":"is being blackmailed","weight":0.7},{"id":"informant","value":"is an informant for authorities","weight":0.5},{"id":"secretChild","value":"has a secret child somewhere","weight":0.5},{"id":"forbiddenLove","value":"is in love with someone forbidden","weight":0.6},{"id":"psychicAbility","value":"has hidden psionic or unusual abilities","weight":0.4},{"id":"altruist","value":"secretly helps others anonymously","weight":0.5},{"id":"none","value":"has no particular secrets (or hides them very well)","weight":2},{"id":"retired","value":"is retired from a notorious profession","weight":0.6},{"id":"fugitive","value":"is a political or religious fugitive","weight":0.5}]},{"id":"currentGoal","name":"Current Goal","type":"simple","description":"What this NPC is actively trying to accomplish right now.","resultType":"hook","tags":["background","goal","objective","plot-hook"],"entries":[{"id":"payDebt","value":"pay off a significant debt","weight":1.2},{"id":"findPerson","value":"find a missing person","weight":1},{"id":"earnPromotion","value":"earn a promotion or recognition","weight":1},{"id":"startBusiness","value":"start or expand a business","weight":0.8},{"id":"leaveWorld","value":"get off-world","weight":1},{"id":"protectSomeone","value":"protect someone from harm","weight":1},{"id":"acquireItem","value":"acquire a specific item","weight":1},{"id":"revenge","value":"get revenge on someone","weight":0.7},{"id":"clearName","value":"clear their name of accusations","weight":0.6},{"id":"findTruth","value":"uncover a hidden truth","weight":0.8},{"id":"earnMoney","value":"earn enough to retire comfortably","weight":1},{"id":"gainSkill","value":"learn a new skill or trade","weight":0.7},{"id":"reconnect","value":"reconnect with estranged family","weight":0.7},{"id":"hideFrom","value":"hide from someone pursuing them","weight":0.8},{"id":"completeMission","value":"complete an important mission","weight":1},{"id":"findCure","value":"find a cure for an illness","weight":0.5},{"id":"exposeSomeone","value":"expose someone's wrongdoing","weight":0.6},{"id":"gainPower","value":"gain political or social power","weight":0.6},{"id":"survive","value":"simply survive the current situation","weight":1.2},{"id":"makeConnection","value":"make a valuable connection or alliance","weight":0.8},{"id":"preventEvent","value":"prevent something terrible from happening","weight":0.6}]},{"id":"ageCategory","name":"Age Category","type":"simple","description":"The NPC's relative age (interpreted based on species lifespan).","resultType":"trait","tags":["demographics","age"],"entries":[{"id":"youngAdult","value":"young adult","weight":1.5,"sets":{"ageDesc":"recently reached maturity, still finding their place"}},{"id":"adult","value":"adult","weight":3,"sets":{"ageDesc":"in the prime of their life"}},{"id":"middleAged","value":"middle-aged","weight":2,"sets":{"ageDesc":"experienced, perhaps starting to show their years"}},{"id":"elderly","value":"elderly","weight":1,"sets":{"ageDesc":"advanced in years, carrying accumulated wisdom"}},{"id":"ancient","value":"ancient","weight":0.3,"sets":{"ageDesc":"remarkably old, even for their species"}},{"id":"indeterminate","value":"of indeterminate age","weight":0.5,"sets":{"ageDesc":"difficult to judge their age"}}]}]`),eA=[{id:"npcName",name:"NPC Name Generator",description:"Generates a full name based on rolled gender and race, using the appropriate naming conventions for each species.",resultType:"name",tags:["name","generator","core"],shared:{$gender:"{{gender}}",$race:"{{race}}"},pattern:'{{switch[$gender=="male":$race.@maleFirstName].switch[$gender=="female":$race.@femaleFirstName].else[$race.@neutralFirstName]}} {{$race.@surname}}'},{id:"npcPhysicalDescription",name:"NPC Physical Description",description:"Generates a physical description for an NPC based on their species and rolled characteristics.",resultType:"description",tags:["appearance","description","generator"],shared:{$gender:"{{gender}}",$race:"{{race}}",$age:"{{ageCategory}}",$body:"{{bodyType}}",$eyes:"{{eyeColor}}",$hair:"{{hairDescription}}",$mark:"{{distinguishingMark}}",$clothing:"{{clothingStyle}}",$accessory:"{{accessory}}"},pattern:'A {{$age}} {{$gender}} {{$race}} ({{$race.@physicalBase}}) with a {{$body}} build. They have {{$eyes}} eyes{{switch[$race.@hasHair=="true":" and {{$hair}}"].switch[$race.@hasHair=="mane":" and a mane of {{$hair}}"].else[""]}}. {{switch[$mark=="no particularly distinctive physical features":"They have no particularly distinctive physical features."].else["Notably, they have {{$mark}}."]}} They wear {{$clothing}}{{switch[$accessory=="no particularly notable accessories":"."].else[" and carry {{$accessory}}."]}}'},{id:"npcPersonalitySummary",name:"NPC Personality Summary",description:"Generates a personality summary including traits, flaws, motivations, and quirks.",resultType:"description",tags:["personality","description","generator"],shared:{$primary:"{{primaryPersonalityTrait}}",$secondary:"{{secondaryPersonalityTrait}}",$flaw:"{{personalityFlaw}}",$motivation:"{{motivation}}",$quirk:"{{quirk}}",$speech:"{{speechPattern}}"},pattern:`**Personality:** Primarily {{$primary}} ({{$primary.@traitDesc}}) and {{$secondary}} ({{$secondary.@trait2Desc}}). However, they {{$flaw}} ({{$flaw.@flawDesc}}).

**Motivation:** Their core drive is {{$motivation}}. {{$motivation.@motivationDesc}}

**Quirk:** They {{$quirk}}.

**Speech:** They {{$speech}}.`},{id:"npcBackgroundSummary",name:"NPC Background Summary",description:"Generates background information including profession, social class, homeworld, and allegiances.",resultType:"description",tags:["background","description","generator"],shared:{$profession:"{{profession}}",$class:"{{socialClass}}",$relationship:"{{relationshipStatus}}",$homeworld:"{{homeworldType}}",$faction:"{{factionAffiliation}}",$secret:"{{secretOrRumor}}",$goal:"{{currentGoal}}"},pattern:`**Profession:** A {{$profession}} ({{$profession.@professionDesc}}).

**Social Standing:** {{$class}} ({{$class.@classDesc}}).

**Personal Life:** Currently {{$relationship}}.

**Origin:** Originally from {{$homeworld}} ({{$homeworld.@worldDesc}}).

**Allegiance:** Affiliated with {{$faction}} ({{$faction.@factionDesc}}).

**Secret:** They {{$secret}}.

**Current Goal:** Their immediate objective is to {{$goal}}.`},{id:"fullNPC",name:"Complete NPC Generator",description:"Generates a complete NPC with all characteristics. All rolled values are accessible as shared variables throughout the generation for consistency.",resultType:"npc",tags:["complete","generator","main"],shared:{$gender:"{{gender}}",$race:"{{race}}",$age:"{{ageCategory}}",$body:"{{bodyType}}",$eyes:"{{eyeColor}}",$hair:"{{hairDescription}}",$mark:"{{distinguishingMark}}",$clothing:"{{clothingStyle}}",$accessory:"{{accessory}}",$primary:"{{primaryPersonalityTrait}}",$secondary:"{{secondaryPersonalityTrait}}",$flaw:"{{personalityFlaw}}",$motivation:"{{motivation}}",$quirk:"{{quirk}}",$speech:"{{speechPattern}}",$profession:"{{profession}}",$class:"{{socialClass}}",$relationship:"{{relationshipStatus}}",$homeworld:"{{homeworldType}}",$faction:"{{factionAffiliation}}",$secret:"{{secretOrRumor}}",$goal:"{{currentGoal}}"},pattern:`# {{switch[$gender=="male":$race.@maleFirstName].switch[$gender=="female":$race.@femaleFirstName].else[$race.@neutralFirstName]}} {{$race.@surname}}

## Basic Information
| Attribute | Value |
|-----------|-------|
| **Species** | {{$race}} |
| **Gender** | {{$gender}} |
| **Age** | {{$age}} ({{$age.@ageDesc}}) |
| **Profession** | {{$profession}} |
| **Social Class** | {{$class}} |
| **Relationship** | {{$relationship}} |

## Physical Description

A {{$age}} {{$gender}} {{$race}} ({{$race.@physicalBase}}) with a {{$body}} build. They have {{$eyes}} eyes{{switch[$race.@hasHair=="true":" and {{$hair}}"].switch[$race.@hasHair=="mane":" and a mane of {{$hair}}"].else[""]}}. {{switch[$mark=="no particularly distinctive physical features":"They have no particularly distinctive physical features."].else["Notably, they have {{$mark}}."]}} They wear {{$clothing}}{{switch[$accessory=="no particularly notable accessories":"."].else[" and carry {{$accessory}}."]}}

## Personality

**Primary Trait:** {{$primary}}  {{$primary.@traitDesc}}

**Secondary Trait:** {{$secondary}}  {{$secondary.@trait2Desc}}

**Flaw:** They {{$flaw}}  {{$flaw.@flawDesc}}

**Quirk:** They {{$quirk}}.

**Speech Pattern:** They {{$speech}}.

## Background

**Homeworld:** Originally from {{$homeworld}}  {{$homeworld.@worldDesc}}

**Allegiance:** {{$faction}}  {{$faction.@factionDesc}}

**Current Goal:** To {{$goal}}.

## Motivation & Secrets

**Core Motivation:** {{$motivation}}  {{$motivation.@motivationDesc}}

**Secret/Rumor:** They {{$secret}}.

---

*{{$profession.@professionDesc}}*`},{id:"quickNPC",name:"Quick NPC Generator",description:"Generates a brief NPC summary suitable for quick reference or minor characters.",resultType:"npc",tags:["quick","generator","simple"],shared:{$gender:"{{gender}}",$race:"{{race}}",$primary:"{{primaryPersonalityTrait}}",$flaw:"{{personalityFlaw}}",$profession:"{{profession}}",$motivation:"{{motivation}}"},pattern:'**{{switch[$gender=="male":$race.@maleFirstName].switch[$gender=="female":$race.@femaleFirstName].else[$race.@neutralFirstName]}} {{$race.@surname}}**  {{$gender}} {{$race}} {{$profession}}. {{$primary}} but {{$flaw}}. Motivated by {{$motivation}}.'},{id:"npcAppearanceOnly",name:"NPC Appearance Only",description:"Generates just the physical appearance of an NPC without personality or background.",resultType:"description",tags:["appearance","simple","generator"],shared:{$gender:"{{gender}}",$race:"{{race}}",$age:"{{ageCategory}}",$body:"{{bodyType}}",$eyes:"{{eyeColor}}",$hair:"{{hairDescription}}",$mark:"{{distinguishingMark}}"},pattern:'A {{$age}} {{$gender}} {{$race}} with a {{$body}} build, {{$eyes}} eyes{{switch[$race.@hasHair=="true":", and {{$hair}}"].switch[$race.@hasHair=="mane":", and a mane of {{$hair}}"].else[""]}}. {{switch[$mark=="no particularly distinctive physical features":""].else["They have {{$mark}}."]}}'},{id:"npcEncounterLine",name:"NPC Encounter Line",description:"A single line describing an NPC suitable for encounter tables.",resultType:"encounter",tags:["encounter","brief","generator"],shared:{$gender:"{{gender}}",$race:"{{race}}",$profession:"{{profession}}",$primary:"{{primaryPersonalityTrait}}"},pattern:'{{$primary}} {{$gender}} {{$race}} {{$profession}} ({{switch[$gender=="male":$race.@maleFirstName].switch[$gender=="female":$race.@femaleFirstName].else[$race.@neutralFirstName]}} {{$race.@surname}})'}],tA={metadata:Qj,variables:Jj,tables:Xj,templates:eA},nA={name:"Warhammer 40K NPC Generator",namespace:"rolldeo.wh40k.npc",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A comprehensive NPC generator for Warhammer 40,000 themed tabletop roleplaying games. Generates Imperial citizens from various world types with appropriate names, personalities, backgrounds, and descriptions suitable for any W40K RPG system.",instructions:"Use the `npcComplete` template for a full NPC description with all properties exposed. Use `npcBrief` for a shorter summary. Individual tables can be rolled separately for specific details.",tags:["warhammer","40k","npc","character","imperial","grimdark","sci-fi"],source:{license:"Original",copyright:{year:"2024",holder:"Original Content",notice:"This generator creates original content inspired by the Warhammer 40,000 setting. Warhammer 40,000 is a trademark of Games Workshop Ltd."}},rights:{type:"fan-content",official:!1,permissions:{commercialUse:!1,modification:!0,redistribution:!0,derivativeWorks:!0,attributionRequired:!1},compatibilityNotice:"This is fan-made content for use with Warhammer 40,000 themed tabletop RPGs. Not affiliated with Games Workshop."},maxRecursionDepth:50,maxExplodingDice:100,maxInheritanceDepth:5},rA={defaultSeparator:", ",imperiumName:"The Imperium of Man"},aA=JSON.parse(`[{"id":"hiveWorldMaleNames","name":"Hive World Male Names","type":"simple","description":"First names for male hive worlders - gritty, industrial, often shortened or harsh-sounding.","tags":["names","male","hive-world","first-name"],"resultType":"name","hidden":true,"entries":[{"value":"Varn"},{"value":"Drekk"},{"value":"Koltz"},{"value":"Sevrin"},{"value":"Harsk"},{"value":"Brennan"},{"value":"Mordecai"},{"value":"Lukas"},{"value":"Gregor"},{"value":"Viktor"},{"value":"Castor"},{"value":"Rafe"},{"value":"Zane"},{"value":"Kell"},{"value":"Darrik"},{"value":"Jorvan"},{"value":"Malenko"},{"value":"Skarr"},{"value":"Thresh"},{"value":"Gunther"},{"value":"Rath"},{"value":"Crix"},{"value":"Voss"},{"value":"Hagen"}]},{"id":"hiveWorldFemaleNames","name":"Hive World Female Names","type":"simple","description":"First names for female hive worlders - tough, pragmatic names suited to industrial life.","tags":["names","female","hive-world","first-name"],"resultType":"name","hidden":true,"entries":[{"value":"Kira"},{"value":"Vex"},{"value":"Lyra"},{"value":"Seska"},{"value":"Mira"},{"value":"Talia"},{"value":"Brynn"},{"value":"Nessa"},{"value":"Kora"},{"value":"Zara"},{"value":"Thessa"},{"value":"Jael"},{"value":"Freya"},{"value":"Ingrid"},{"value":"Helga"},{"value":"Renna"},{"value":"Cass"},{"value":"Valka"},{"value":"Dreya"},{"value":"Marta"},{"value":"Sven"},{"value":"Ilsa"},{"value":"Katya"},{"value":"Vera"}]},{"id":"hiveWorldSurnames","name":"Hive World Surnames","type":"simple","description":"Surnames for hive worlders - often related to industry, location, or family trade.","tags":["names","hive-world","surname"],"resultType":"name","hidden":true,"entries":[{"value":"Steelhand"},{"value":"Cog"},{"value":"Rustborn"},{"value":"Smogson"},{"value":"Undervault"},{"value":"Grimesworth"},{"value":"Sootwick"},{"value":"Factorum"},{"value":"Hab"},{"value":"Drossmann"},{"value":"Slaghammer"},{"value":"Ventshaft"},{"value":"Ironside"},{"value":"Pipewrench"},{"value":"Stackton"},{"value":"Furnaceman"},{"value":"Guildwright"},{"value":"Recyk"},{"value":"Sumpborn"},{"value":"Underhall"},{"value":"Habmann"},{"value":"Groxley"},{"value":"Shiftworker"},{"value":"Millwright"}]},{"id":"forgeWorldMaleNames","name":"Forge World Male Names","type":"simple","description":"First names for male forge worlders - often classical or technical sounding.","tags":["names","male","forge-world","first-name","mechanicus"],"resultType":"name","hidden":true,"entries":[{"value":"Alexios"},{"value":"Korven"},{"value":"Magros"},{"value":"Theron"},{"value":"Cyprian"},{"value":"Daedalus"},{"value":"Hephestus"},{"value":"Calix"},{"value":"Octavian"},{"value":"Valerus"},{"value":"Primus"},{"value":"Secundus"},{"value":"Tertius"},{"value":"Archimedes"},{"value":"Kryptos"},{"value":"Logis"},{"value":"Ferrox"},{"value":"Cogitan"},{"value":"Mekhan"},{"value":"Synthos"},{"value":"Datum"},{"value":"Binarex"},{"value":"Omnid"},{"value":"Rho"}]},{"id":"forgeWorldFemaleNames","name":"Forge World Female Names","type":"simple","description":"First names for female forge worlders - classical and technical influences.","tags":["names","female","forge-world","first-name","mechanicus"],"resultType":"name","hidden":true,"entries":[{"value":"Minerva"},{"value":"Celia"},{"value":"Thessaly"},{"value":"Octavia"},{"value":"Valeria"},{"value":"Cyra"},{"value":"Lycia"},{"value":"Praxia"},{"value":"Silica"},{"value":"Ferria"},{"value":"Lumina"},{"value":"Data"},{"value":"Sigma"},{"value":"Theta"},{"value":"Omega"},{"value":"Calculus"},{"value":"Axiom"},{"value":"Synthia"},{"value":"Cognita"},{"value":"Machina"},{"value":"Vera-9"},{"value":"Prima"},{"value":"Secunda"},{"value":"Tertia"}]},{"id":"forgeWorldDesignations","name":"Forge World Designations","type":"simple","description":"Technical designations used as surnames or identifiers on forge worlds.","tags":["names","forge-world","surname","mechanicus","designation"],"resultType":"name","hidden":true,"entries":[{"value":"Rho-{{dice:1d99}}"},{"value":"Sigma-{{dice:1d99}}"},{"value":"Theta-{{dice:1d99}}"},{"value":"Omicron-{{dice:1d99}}"},{"value":"Delta-{{dice:1d99}}"},{"value":"Gamma-{{dice:1d99}}"},{"value":"Zeta-{{dice:1d99}}"},{"value":"Epsilon-{{dice:1d99}}"},{"value":"Phi-{{dice:1d99}}"},{"value":"Chi-{{dice:1d99}}"},{"value":"{{dice:1d9}}{{dice:1d9}}-{{dice:1d9}}{{dice:1d9}}-{{dice:1d9}}{{dice:1d9}}"},{"value":"Null-{{dice:1d999}}"},{"value":"Iota-{{dice:1d99}}"},{"value":"Kappa-{{dice:1d99}}"},{"value":"Lambda-{{dice:1d99}}"},{"value":"Xi-{{dice:1d99}}"},{"value":"Alpha-Prime-{{dice:1d9}}"},{"value":"Mu-{{dice:1d99}}"},{"value":"Nu-{{dice:1d99}}"},{"value":"Psi-{{dice:1d99}}"}]},{"id":"nobleHouseMaleNames","name":"Noble House Male Names","type":"simple","description":"First names for male Imperial nobility - High Gothic, pompous, elaborate.","tags":["names","male","noble","first-name","aristocrat"],"resultType":"name","hidden":true,"entries":[{"value":"Alexandros"},{"value":"Maximillian"},{"value":"Tiberius"},{"value":"Constantine"},{"value":"Aurelius"},{"value":"Hadrian"},{"value":"Severus"},{"value":"Justinian"},{"value":"Valentinian"},{"value":"Theodosius"},{"value":"Arcadius"},{"value":"Honorius"},{"value":"Flavius"},{"value":"Claudius"},{"value":"Reginald"},{"value":"Wilhelm"},{"value":"Leopold"},{"value":"Alphonse"},{"value":"Bartholomew"},{"value":"Cornelius"},{"value":"Dominicus"},{"value":"Erasmus"},{"value":"Fabian"},{"value":"Gottfried"}]},{"id":"nobleHouseFemaleNames","name":"Noble House Female Names","type":"simple","description":"First names for female Imperial nobility - High Gothic, elegant, imperious.","tags":["names","female","noble","first-name","aristocrat"],"resultType":"name","hidden":true,"entries":[{"value":"Celestine"},{"value":"Aurelia"},{"value":"Valentina"},{"value":"Theodora"},{"value":"Aemilia"},{"value":"Flavia"},{"value":"Lucretia"},{"value":"Cornelia"},{"value":"Octavia"},{"value":"Livia"},{"value":"Agrippina"},{"value":"Messalina"},{"value":"Faustina"},{"value":"Domitilla"},{"value":"Constantia"},{"value":"Justina"},{"value":"Galla"},{"value":"Pulcheria"},{"value":"Arcadia"},{"value":"Honoria"},{"value":"Eugenia"},{"value":"Perpetua"},{"value":"Felicitas"},{"value":"Sabina"}]},{"id":"nobleHouseSurnames","name":"Noble House Surnames","type":"simple","description":"House names and surnames for Imperial nobility.","tags":["names","noble","surname","aristocrat","house"],"resultType":"name","hidden":true,"entries":[{"value":"von Castellan"},{"value":"Helmawr"},{"value":"Catallus"},{"value":"Ran Lo"},{"value":"Ulanti"},{"value":"Ko'iron"},{"value":"Greim"},{"value":"Ty"},{"value":"Palantine"},{"value":"Armelius"},{"value":"Vendergelt"},{"value":"Strophes"},{"value":"Winterscale"},{"value":"Bastille"},{"value":"Macharius"},{"value":"Haarlock"},{"value":"Krin"},{"value":"Ortellius"},{"value":"Blathwayt"},{"value":"Dekk-Tra"},{"value":"van Saar"},{"value":"Goliath"},{"value":"Escher"},{"value":"Delaque"}]},{"id":"feralWorldMaleNames","name":"Feral World Male Names","type":"simple","description":"First names for male feral worlders - harsh, tribal, primal.","tags":["names","male","feral-world","first-name","tribal"],"resultType":"name","hidden":true,"entries":[{"value":"Wulfric"},{"value":"Thorgrim"},{"value":"Ragnar"},{"value":"Bjorn"},{"value":"Ulfar"},{"value":"Hrothgar"},{"value":"Skald"},{"value":"Fenris"},{"value":"Kurg"},{"value":"Grom"},{"value":"Drakh"},{"value":"Morgath"},{"value":"Vorak"},{"value":"Skargor"},{"value":"Bloodaxe"},{"value":"Ironjaw"},{"value":"Bonecrusher"},{"value":"Stonefist"},{"value":"Flameheart"},{"value":"Shadowstrike"},{"value":"Tallarn"},{"value":"Catachan"},{"value":"Attila"},{"value":"Khan"}]},{"id":"feralWorldFemaleNames","name":"Feral World Female Names","type":"simple","description":"First names for female feral worlders - fierce, primal, warrior names.","tags":["names","female","feral-world","first-name","tribal"],"resultType":"name","hidden":true,"entries":[{"value":"Helga"},{"value":"Sigrid"},{"value":"Freydis"},{"value":"Brunhild"},{"value":"Astrid"},{"value":"Thyra"},{"value":"Greta"},{"value":"Ingrid"},{"value":"Ylva"},{"value":"Ragna"},{"value":"Skadi"},{"value":"Sif"},{"value":"Valda"},{"value":"Kara"},{"value":"Draga"},{"value":"Morvena"},{"value":"Ashara"},{"value":"Bloodmoon"},{"value":"Ironclaw"},{"value":"Stormdaughter"},{"value":"Firehair"},{"value":"Bonespear"},{"value":"Sharptooth"},{"value":"Nightstalker"}]},{"id":"feralWorldTribalNames","name":"Feral World Tribal Names","type":"simple","description":"Tribal or clan surnames for feral worlders.","tags":["names","feral-world","surname","tribal","clan"],"resultType":"name","hidden":true,"entries":[{"value":"of the Blood Eagle"},{"value":"Skullcrusher"},{"value":"Deathbringer"},{"value":"Stormbringer"},{"value":"Worldbreaker"},{"value":"of the Red Hand"},{"value":"Wolfkin"},{"value":"Bearslayer"},{"value":"the Scarred"},{"value":"the Unbroken"},{"value":"Ashwalker"},{"value":"Bloodbound"},{"value":"of the Iron Tribe"},{"value":"Nightwalker"},{"value":"Sunstrider"},{"value":"of the Bone Pile"},{"value":"Flameborn"},{"value":"Stoneblood"},{"value":"the Marked"},{"value":"Oathkeeper"},{"value":"of the Death World"},{"value":"Venomtongue"},{"value":"Beastmaster"},{"value":"the Survivor"}]},{"id":"shrineWorldMaleNames","name":"Shrine World Male Names","type":"simple","description":"First names for male shrine worlders - saintly, religious, devotional.","tags":["names","male","shrine-world","first-name","ecclesiarchy"],"resultType":"name","hidden":true,"entries":[{"value":"Sebastian"},{"value":"Drusus"},{"value":"Macharius"},{"value":"Ollanius"},{"value":"Euphrati"},{"value":"Pius"},{"value":"Benedictus"},{"value":"Ignatius"},{"value":"Confessor"},{"value":"Redemptus"},{"value":"Salvator"},{"value":"Paenitens"},{"value":"Martyrius"},{"value":"Sanctus"},{"value":"Fervidus"},{"value":"Zealatus"},{"value":"Devotus"},{"value":"Puritas"},{"value":"Fidel"},{"value":"Credo"},{"value":"Verus"},{"value":"Lumen"},{"value":"Gloriam"},{"value":"Imperus"}]},{"id":"shrineWorldFemaleNames","name":"Shrine World Female Names","type":"simple","description":"First names for female shrine worlders - saintly, religious, devotional.","tags":["names","female","shrine-world","first-name","ecclesiarchy"],"resultType":"name","hidden":true,"entries":[{"value":"Celestine"},{"value":"Euphemia"},{"value":"Arabella"},{"value":"Seraphina"},{"value":"Dominica"},{"value":"Silvana"},{"value":"Praxedes"},{"value":"Palatine"},{"value":"Canoness"},{"value":"Redempta"},{"value":"Salvatrix"},{"value":"Martira"},{"value":"Sancta"},{"value":"Fervida"},{"value":"Zealata"},{"value":"Devota"},{"value":"Puritana"},{"value":"Fidelia"},{"value":"Vera"},{"value":"Lumina"},{"value":"Gloria"},{"value":"Imperia"},{"value":"Sororita"},{"value":"Benedictine"}]},{"id":"shrineWorldSurnames","name":"Shrine World Surnames","type":"simple","description":"Surnames for shrine worlders - often saint-names or religious references.","tags":["names","shrine-world","surname","ecclesiarchy","religious"],"resultType":"name","hidden":true,"entries":[{"value":"Saint-Drusus"},{"value":"Thorian"},{"value":"of the Holy Ordos"},{"value":"Ministorum"},{"value":"Confessor-Born"},{"value":"Penitent"},{"value":"of the Shrine"},{"value":"Aquila-Blessed"},{"value":"Emperor's-Hand"},{"value":"Martyrborn"},{"value":"of the Sacred Rose"},{"value":"Bloodied Palm"},{"value":"of the Ebon Chalice"},{"value":"the Faithful"},{"value":"Zealot"},{"value":"Devotionis"},{"value":"Redemption"},{"value":"of the Golden Throne"},{"value":"Lightbringer"},{"value":"Flamebearer"},{"value":"of the Blessed Order"},{"value":"Sacrosanct"},{"value":"the Pious"},{"value":"Imperialis"}]},{"id":"voidbornMaleNames","name":"Voidborn Male Names","type":"simple","description":"First names for male voidborn - ethereal, ship-related, void-touched.","tags":["names","male","voidborn","first-name","void","ship"],"resultType":"name","hidden":true,"entries":[{"value":"Varl"},{"value":"Keel"},{"value":"Stern"},{"value":"Anchor"},{"value":"Helms"},{"value":"Bulwark"},{"value":"Deckard"},{"value":"Stellan"},{"value":"Voidric"},{"value":"Nils"},{"value":"Orion"},{"value":"Cassius"},{"value":"Draven"},{"value":"Silas"},{"value":"Ezra"},{"value":"Ash"},{"value":"Obsidian"},{"value":"Shadow"},{"value":"Null"},{"value":"Warp"},{"value":"Geller"},{"value":"Navigator"},{"value":"Astral"},{"value":"Cain"}]},{"id":"voidbornFemaleNames","name":"Voidborn Female Names","type":"simple","description":"First names for female voidborn - ethereal, ship-related, void-touched.","tags":["names","female","voidborn","first-name","void","ship"],"resultType":"name","hidden":true,"entries":[{"value":"Starla"},{"value":"Nebula"},{"value":"Aurora"},{"value":"Luna"},{"value":"Nova"},{"value":"Celeste"},{"value":"Stella"},{"value":"Astra"},{"value":"Vela"},{"value":"Lyra"},{"value":"Carina"},{"value":"Andromeda"},{"value":"Cassiopeia"},{"value":"Portia"},{"value":"Galena"},{"value":"Obsidiana"},{"value":"Umbra"},{"value":"Shade"},{"value":"Void"},{"value":"Null"},{"value":"Warpborn"},{"value":"Gellara"},{"value":"Naviga"},{"value":"Drifta"}]},{"id":"voidbornShipNames","name":"Voidborn Ship Names","type":"simple","description":"Ship lineage surnames for voidborn - derived from their family's ship.","tags":["names","voidborn","surname","void","ship","lineage"],"resultType":"name","hidden":true,"entries":[{"value":"of the Eternal Vigilance"},{"value":"Voidwalker"},{"value":"Starstrider"},{"value":"of the Iron Promise"},{"value":"Warpborn"},{"value":"of the Holy Terran"},{"value":"Deckhand"},{"value":"of the Righteous Path"},{"value":"Helmsman"},{"value":"Enginewright"},{"value":"of the Emperor's Grace"},{"value":"Bulkhead"},{"value":"Keelson"},{"value":"of the Silent Hunter"},{"value":"Gellerborn"},{"value":"of the Manifest Destiny"},{"value":"Astrogator"},{"value":"of the Blessed Enterprise"},{"value":"Voidfarer"},{"value":"of the Light of Terra"},{"value":"Chartsman"},{"value":"of the Sword of the Emperor"},{"value":"Anchorborn"},{"value":"of the Void Dragon"}]},{"id":"gender","name":"Gender","type":"simple","description":"Gender identity for NPCs.","tags":["identity","gender","core"],"resultType":"trait","entries":[{"id":"male","value":"male","weight":5,"sets":{"gender":"male","pronounSubject":"he","pronounObject":"him","pronounPossessive":"his","honorific":"{{maleHonorific}}"}},{"id":"female","value":"female","weight":5,"sets":{"gender":"female","pronounSubject":"she","pronounObject":"her","pronounPossessive":"her","honorific":"{{femaleHonorific}}"}}]},{"id":"maleHonorific","name":"Male Honorifics","type":"simple","hidden":true,"tags":["honorific","male"],"resultType":"name","entries":[{"value":"Master","weight":3},{"value":"Sir","weight":2},{"value":"Brother","weight":2},{"value":"Lord","weight":1},{"value":"Citizen","weight":2}]},{"id":"femaleHonorific","name":"Female Honorifics","type":"simple","hidden":true,"tags":["honorific","female"],"resultType":"name","entries":[{"value":"Mistress","weight":3},{"value":"Madam","weight":2},{"value":"Sister","weight":2},{"value":"Lady","weight":1},{"value":"Citizen","weight":2}]},{"id":"humanOrigin","name":"Human Origin/Homeworld Type","type":"simple","description":"The type of world the NPC originates from, which influences their name, culture, and outlook.","tags":["origin","homeworld","background","core"],"resultType":"trait","entries":[{"id":"hiveWorld","value":"Hive World","weight":4,"description":"Born in a massive hive city, a towering mega-structure of industry and squalor.","tags":["urban","industrial","crowded"],"sets":{"origin":"Hive World","maleFirstName":"{{hiveWorldMaleNames}}","femaleFirstName":"{{hiveWorldFemaleNames}}","surname":"{{hiveWorldSurnames}}","culturalBackground":"industrial urban sprawl","typicalClothing":"worn industrial garb or worker's coveralls","originQuirk":"{{hiveWorldQuirk}}"}},{"id":"forgeWorld","value":"Forge World","weight":2,"description":"Raised on a planet dedicated to manufacturing, often with Mechanicus influence.","tags":["industrial","mechanicus","technical"],"sets":{"origin":"Forge World","maleFirstName":"{{forgeWorldMaleNames}}","femaleFirstName":"{{forgeWorldFemaleNames}}","surname":"{{forgeWorldDesignations}}","culturalBackground":"the sacred forges of the Omnissiah","typicalClothing":"red-tinted robes or technical garments with mechadendrite housings","originQuirk":"{{forgeWorldQuirk}}"}},{"id":"nobleHouse","value":"Noble Born","weight":1,"description":"Born into Imperial nobility, raised in luxury and political intrigue.","tags":["aristocrat","wealthy","political"],"sets":{"origin":"Noble Born","maleFirstName":"{{nobleHouseMaleNames}}","femaleFirstName":"{{nobleHouseFemaleNames}}","surname":"{{nobleHouseSurnames}}","culturalBackground":"the gilded halls of Imperial nobility","typicalClothing":"elaborate finery with house colors and crests","originQuirk":"{{nobleHouseQuirk}}"}},{"id":"feralWorld","value":"Feral World","weight":2,"description":"Raised on a primitive, often dangerous world with minimal Imperial development.","tags":["primitive","warrior","tribal"],"sets":{"origin":"Feral World","maleFirstName":"{{feralWorldMaleNames}}","femaleFirstName":"{{feralWorldFemaleNames}}","surname":"{{feralWorldTribalNames}}","culturalBackground":"a harsh tribal existence","typicalClothing":"furs, leathers, and tribal markings","originQuirk":"{{feralWorldQuirk}}"}},{"id":"shrineWorld","value":"Shrine World","weight":2,"description":"Born on a world dedicated to the Imperial Cult, steeped in religious devotion.","tags":["religious","ecclesiarchy","devout"],"sets":{"origin":"Shrine World","maleFirstName":"{{shrineWorldMaleNames}}","femaleFirstName":"{{shrineWorldFemaleNames}}","surname":"{{shrineWorldSurnames}}","culturalBackground":"a world of cathedrals and endless devotion","typicalClothing":"devotional robes or pilgrim's garb bearing holy symbols","originQuirk":"{{shrineWorldQuirk}}"}},{"id":"voidborn","value":"Voidborn","weight":2,"description":"Born and raised aboard a void ship, never knowing solid ground.","tags":["void","ship","spacer"],"sets":{"origin":"Voidborn","maleFirstName":"{{voidbornMaleNames}}","femaleFirstName":"{{voidbornFemaleNames}}","surname":"{{voidbornShipNames}}","culturalBackground":"the cramped corridors of a void ship","typicalClothing":"practical shipboard garments or void-suits","originQuirk":"{{voidbornQuirk}}"}}]},{"id":"hiveWorldQuirk","name":"Hive World Cultural Quirk","type":"simple","hidden":true,"tags":["quirk","cultural","hive-world"],"resultType":"trait","entries":[{"value":"instinctively seeks high ground in unfamiliar spaces"},{"value":"finds open spaces deeply unsettling"},{"value":"hoards food and small valuables obsessively"},{"value":"speaks in clipped, efficiency-minded sentences"},{"value":"habitually checks exits and escape routes"},{"value":"has difficulty with concepts of personal space"},{"value":"automatically assesses strangers as threats or assets"},{"value":"is uncomfortable in silence; expects constant background noise"}]},{"id":"forgeWorldQuirk","name":"Forge World Cultural Quirk","type":"simple","hidden":true,"tags":["quirk","cultural","forge-world"],"resultType":"trait","entries":[{"value":"speaks in technical jargon and numerical designations"},{"value":"touches and examines machinery with reverence"},{"value":"finds organic bodies somewhat disgusting"},{"value":"unconsciously performs maintenance rituals on nearby devices"},{"value":"prefers the company of machines to people"},{"value":"becomes agitated when technology is misused"},{"value":"speaks prayers to machines before using them"},{"value":"measures everything in precise numerical values"}]},{"id":"nobleHouseQuirk","name":"Noble House Cultural Quirk","type":"simple","hidden":true,"tags":["quirk","cultural","noble"],"resultType":"trait","entries":[{"value":"speaks with elaborate, formal diction"},{"value":"expects to be served and attended to"},{"value":"references family lineage frequently in conversation"},{"value":"shows subtle disdain for those of lower station"},{"value":"obsesses over matters of honor and reputation"},{"value":"is uncomfortable with physical labor or manual tasks"},{"value":"maintains elaborate grooming and appearance rituals"},{"value":"instinctively plays political games in all social situations"}]},{"id":"feralWorldQuirk","name":"Feral World Cultural Quirk","type":"simple","hidden":true,"tags":["quirk","cultural","feral-world"],"resultType":"trait","entries":[{"value":"finds technology confusing or spiritually suspect"},{"value":"resolves disputes through shows of strength"},{"value":"interprets Imperial faith through animistic traditions"},{"value":"trusts instincts and omens over rational analysis"},{"value":"marks significant events with ritual scarification"},{"value":"is always armed, even in supposedly safe situations"},{"value":"speaks in simple, direct terms; finds subtlety dishonest"},{"value":"shows tremendous endurance for physical hardship"}]},{"id":"shrineWorldQuirk","name":"Shrine World Cultural Quirk","type":"simple","hidden":true,"tags":["quirk","cultural","shrine-world"],"resultType":"trait","entries":[{"value":"peppers speech with prayers and religious invocations"},{"value":"carries multiple devotional items and relics"},{"value":"observes complex daily prayer rituals"},{"value":"views all events through the lens of divine providence"},{"value":"recoils from perceived blasphemy or heresy"},{"value":"fasts or mortifies the flesh regularly"},{"value":"speaks of the Emperor as a living, personal presence"},{"value":"prostrates before any significant Imperial iconography"}]},{"id":"voidbornQuirk","name":"Voidborn Cultural Quirk","type":"simple","hidden":true,"tags":["quirk","cultural","voidborn"],"resultType":"trait","entries":[{"value":"finds gravity disorienting after years in void"},{"value":"always knows ship orientation and direction instinctively"},{"value":"has unsettling, pale features from void-exposure"},{"value":"speaks in naval terminology and shipboard slang"},{"value":"becomes anxious when unable to hear the hum of engines"},{"value":"has prophetic dreams or strange premonitions"},{"value":"is superstitious about warp travel rituals"},{"value":"feels exposed and vulnerable under open skies"}]},{"id":"age","name":"NPC Age","type":"simple","description":"Approximate age bracket of the NPC.","tags":["age","physical","core"],"resultType":"trait","entries":[{"id":"youth","value":"young","weight":2,"sets":{"age":"young","ageDescription":"barely into adulthood","ageYears":"{{dice:2d4+16}}"}},{"id":"adult","value":"adult","weight":4,"sets":{"age":"adult","ageDescription":"in the prime of life","ageYears":"{{dice:3d10+25}}"}},{"id":"middleAged","value":"middle-aged","weight":3,"sets":{"age":"middle-aged","ageDescription":"showing the weight of years","ageYears":"{{dice:2d10+40}}"}},{"id":"elderly","value":"elderly","weight":1,"sets":{"age":"elderly","ageDescription":"ancient by Imperial standards","ageYears":"{{dice:3d10+60}}"}},{"id":"juvenat","value":"juvenat-treated","weight":0.5,"sets":{"age":"juvenat-treated","ageDescription":"unnaturally preserved by juvenat treatments","ageYears":"{{dice:5d20+100}}"}}]},{"id":"physicalBuild","name":"Physical Build","type":"simple","description":"Body type and physical stature.","tags":["physical","build","appearance"],"resultType":"trait","entries":[{"id":"gaunt","value":"gaunt","weight":2,"sets":{"build":"gaunt","buildDescription":"thin and underfed, bones visible beneath the skin"}},{"id":"wiry","value":"wiry","weight":3,"sets":{"build":"wiry","buildDescription":"lean and sinewy, with a deceptive strength"}},{"id":"average","value":"average","weight":4,"sets":{"build":"average","buildDescription":"of unremarkable physical stature"}},{"id":"stocky","value":"stocky","weight":3,"sets":{"build":"stocky","buildDescription":"broad and solidly built"}},{"id":"muscular","value":"muscular","weight":2,"sets":{"build":"muscular","buildDescription":"powerfully muscled from physical labor or training"}},{"id":"corpulent","value":"corpulent","weight":1,"sets":{"build":"corpulent","buildDescription":"heavily overweight, a sign of unusual wealth or indulgence"}},{"id":"augmented","value":"augmented","weight":1,"sets":{"build":"augmented","buildDescription":"body heavily modified with mechanical augmetics"}}]},{"id":"eyeColor","name":"Eye Color","type":"simple","description":"Eye color, including augmetic options.","tags":["physical","eyes","appearance"],"resultType":"trait","entries":[{"value":"brown","weight":4,"sets":{"eyeColor":"brown","eyeDescription":"common brown eyes"}},{"value":"grey","weight":3,"sets":{"eyeColor":"grey","eyeDescription":"pale grey eyes"}},{"value":"blue","weight":2,"sets":{"eyeColor":"blue","eyeDescription":"clear blue eyes"}},{"value":"green","weight":1,"sets":{"eyeColor":"green","eyeDescription":"striking green eyes"}},{"value":"amber","weight":1,"sets":{"eyeColor":"amber","eyeDescription":"unusual amber eyes"}},{"value":"black","weight":1,"sets":{"eyeColor":"black","eyeDescription":"unsettling black eyes with no visible iris"}},{"value":"mismatched","weight":0.5,"sets":{"eyeColor":"mismatched","eyeDescription":"mismatched eyes of different colors"}},{"value":"augmetic (red)","weight":0.5,"sets":{"eyeColor":"augmetic red","eyeDescription":"a glowing red augmetic eye"}},{"value":"augmetic (green)","weight":0.3,"sets":{"eyeColor":"augmetic green","eyeDescription":"a clicking green augmetic eye"}},{"value":"augmetic (both)","weight":0.2,"sets":{"eyeColor":"augmetic both","eyeDescription":"twin augmetic eyes that whir and focus independently"}},{"value":"blind/milky","weight":0.3,"sets":{"eyeColor":"blind","eyeDescription":"milky, sightless eyes"}}]},{"id":"hairDescription","name":"Hair Description","type":"simple","description":"Hair style, color, and condition.","tags":["physical","hair","appearance"],"resultType":"trait","entries":[{"value":"bald","weight":3,"sets":{"hairStyle":"bald","hairDescription":"completely bald"}},{"value":"shaved","weight":2,"sets":{"hairStyle":"shaved","hairDescription":"head shaved close to the scalp"}},{"value":"short black","weight":3,"sets":{"hairStyle":"short","hairColor":"black","hairDescription":"short-cropped black hair"}},{"value":"short brown","weight":3,"sets":{"hairStyle":"short","hairColor":"brown","hairDescription":"short-cropped brown hair"}},{"value":"short grey","weight":2,"sets":{"hairStyle":"short","hairColor":"grey","hairDescription":"short-cropped grey hair"}},{"value":"long black","weight":2,"sets":{"hairStyle":"long","hairColor":"black","hairDescription":"long black hair"}},{"value":"long brown","weight":2,"sets":{"hairStyle":"long","hairColor":"brown","hairDescription":"long brown hair"}},{"value":"braided","weight":1,"sets":{"hairStyle":"braided","hairDescription":"hair worn in elaborate braids"}},{"value":"mohawk","weight":0.5,"sets":{"hairStyle":"mohawk","hairDescription":"a fierce mohawk"}},{"value":"white","weight":1,"sets":{"hairStyle":"medium","hairColor":"white","hairDescription":"prematurely white hair"}},{"value":"tonsured","weight":1,"sets":{"hairStyle":"tonsured","hairDescription":"hair shaved in a devotional tonsure"}},{"value":"unkempt","weight":2,"sets":{"hairStyle":"unkempt","hairDescription":"wild, unkempt hair"}},{"value":"augmetic cables","weight":0.3,"sets":{"hairStyle":"cables","hairDescription":"mechadendrite cables instead of hair"}}]},{"id":"skinTone","name":"Skin Tone","type":"simple","description":"Skin color and condition.","tags":["physical","skin","appearance"],"resultType":"trait","entries":[{"value":"pale","weight":3,"sets":{"skinTone":"pale","skinDescription":"pallid, unhealthy pale skin"}},{"value":"fair","weight":3,"sets":{"skinTone":"fair","skinDescription":"fair skin"}},{"value":"olive","weight":3,"sets":{"skinTone":"olive","skinDescription":"olive-toned skin"}},{"value":"tan","weight":2,"sets":{"skinTone":"tan","skinDescription":"sun-darkened skin"}},{"value":"dark","weight":3,"sets":{"skinTone":"dark","skinDescription":"dark skin"}},{"value":"sallow","weight":2,"sets":{"skinTone":"sallow","skinDescription":"sickly, sallow skin"}},{"value":"heavily tattooed","weight":1,"sets":{"skinTone":"tattooed","skinDescription":"skin covered in devotional tattoos"}},{"value":"scarred","weight":1,"sets":{"skinTone":"scarred","skinDescription":"skin mottled with old scars"}},{"value":"pox-marked","weight":0.5,"sets":{"skinTone":"pox-marked","skinDescription":"pox-scarred skin"}},{"value":"void-pale","weight":0.5,"sets":{"skinTone":"void-pale","skinDescription":"unnaturally pale void-born skin"}}]},{"id":"distinguishingFeature","name":"Distinguishing Feature","type":"simple","description":"A notable physical characteristic that makes this NPC memorable.","tags":["physical","distinguishing","appearance","memorable"],"resultType":"trait","entries":[{"value":"an aquila tattoo on the neck","weight":3},{"value":"a prominent facial scar","weight":3},{"value":"a missing ear","weight":1},{"value":"a bionic arm","weight":1},{"value":"a bionic leg","weight":1},{"value":"extensive facial scarring from acid","weight":0.5},{"value":"a servo-skull that follows them constantly","weight":0.3},{"value":"multiple gold teeth","weight":1},{"value":"ritual scarification marks","weight":1},{"value":"gang tattoos from their youth","weight":2},{"value":"a purity seal affixed to their clothing","weight":2},{"value":"prayer beads wrapped around one wrist","weight":2},{"value":"a perpetual cough","weight":2},{"value":"a nervous twitch","weight":2},{"value":"heterochromia - different colored eyes","weight":0.5},{"value":"a prominent brand mark","weight":1},{"value":"electoo circuitry visible on the skin","weight":0.5},{"value":"a voicebox augmetic that gives their voice a mechanical quality","weight":0.5},{"value":"a missing nose","weight":0.3},{"value":"an ornate bionic eye with telescoping lens","weight":0.5},{"value":"hands calloused from decades of labor","weight":3},{"value":"a holy symbol branded into the forehead","weight":0.5},{"value":"teeth filed to points","weight":0.5},{"value":"a prominent limp","weight":2}]},{"id":"clothingStyle","name":"Clothing Style","type":"simple","description":"General style and condition of clothing worn.","tags":["physical","clothing","appearance"],"resultType":"trait","entries":[{"id":"rags","value":"ragged, patched clothing barely holding together","weight":2,"sets":{"clothing":"rags"}},{"id":"worker","value":"practical worker's garb stained with labor","weight":4,"sets":{"clothing":"worker's garb"}},{"id":"merchant","value":"decent merchant-class attire","weight":2,"sets":{"clothing":"merchant attire"}},{"id":"uniform","value":"a worn Imperial uniform","weight":2,"sets":{"clothing":"Imperial uniform"}},{"id":"robes","value":"simple devotional robes","weight":2,"sets":{"clothing":"devotional robes"}},{"id":"armored","value":"carapace armor or flak vest over civilian clothes","weight":1,"sets":{"clothing":"armored"}},{"id":"noble","value":"fine clothing marking high status","weight":0.5,"sets":{"clothing":"noble finery"}},{"id":"ecclesiarchy","value":"elaborate Ecclesiarchy vestments","weight":0.5,"sets":{"clothing":"Ecclesiarchy vestments"}},{"id":"mechanicus","value":"red Mechanicus robes with visible augmetics","weight":0.5,"sets":{"clothing":"Mechanicus robes"}},{"id":"void","value":"practical void-suit or shipboard clothing","weight":1,"sets":{"clothing":"void-suit"}},{"id":"guard","value":"Imperial Guard fatigues","weight":1,"sets":{"clothing":"Guard fatigues"}},{"id":"enforcer","value":"dark Enforcer or Arbites garb","weight":0.5,"sets":{"clothing":"Enforcer garb"}}]},{"id":"personalityPrimary","name":"Primary Personality Trait","type":"simple","description":"The most dominant personality characteristic.","tags":["personality","trait","primary","core"],"resultType":"trait","entries":[{"value":"pragmatic","weight":3,"sets":{"primaryTrait":"pragmatic","primaryDescription":"approaches problems with cold, practical logic"}},{"value":"zealous","weight":2,"sets":{"primaryTrait":"zealous","primaryDescription":"burns with fervent devotion to their beliefs"}},{"value":"cynical","weight":3,"sets":{"primaryTrait":"cynical","primaryDescription":"sees the worst in people and situations"}},{"value":"paranoid","weight":2,"sets":{"primaryTrait":"paranoid","primaryDescription":"suspects threats and treachery everywhere"}},{"value":"ambitious","weight":2,"sets":{"primaryTrait":"ambitious","primaryDescription":"constantly schemes for advancement and power"}},{"value":"loyal","weight":3,"sets":{"primaryTrait":"loyal","primaryDescription":"devoted unwaveringly to their masters or cause"}},{"value":"cruel","weight":1,"sets":{"primaryTrait":"cruel","primaryDescription":"takes pleasure in the suffering of others"}},{"value":"merciful","weight":1,"sets":{"primaryTrait":"merciful","primaryDescription":"shows unexpected compassion in a merciless galaxy"}},{"value":"stoic","weight":2,"sets":{"primaryTrait":"stoic","primaryDescription":"endures hardship without complaint"}},{"value":"cowardly","weight":1,"sets":{"primaryTrait":"cowardly","primaryDescription":"prioritizes self-preservation above all else"}},{"value":"brave","weight":2,"sets":{"primaryTrait":"brave","primaryDescription":"faces danger without flinching"}},{"value":"greedy","weight":2,"sets":{"primaryTrait":"greedy","primaryDescription":"driven by an insatiable desire for wealth"}},{"value":"fatalistic","weight":2,"sets":{"primaryTrait":"fatalistic","primaryDescription":"accepts that death is inevitable and near"}},{"value":"superstitious","weight":2,"sets":{"primaryTrait":"superstitious","primaryDescription":"sees omens and portents in everything"}},{"value":"bitter","weight":2,"sets":{"primaryTrait":"bitter","primaryDescription":"consumed by resentment over past injustices"}},{"value":"hopeful","weight":0.5,"sets":{"primaryTrait":"hopeful","primaryDescription":"maintains hope despite the grim reality"}}]},{"id":"personalitySecondary","name":"Secondary Personality Trait","type":"simple","description":"A supporting personality characteristic.","tags":["personality","trait","secondary"],"resultType":"trait","entries":[{"value":"talkative","sets":{"secondaryTrait":"talkative","secondaryDescription":"talks constantly, often to themselves"}},{"value":"silent","sets":{"secondaryTrait":"silent","secondaryDescription":"speaks only when absolutely necessary"}},{"value":"suspicious","sets":{"secondaryTrait":"suspicious","secondaryDescription":"trusts no one easily"}},{"value":"friendly","sets":{"secondaryTrait":"friendly","secondaryDescription":"unusually warm in social interactions"}},{"value":"devout","sets":{"secondaryTrait":"devout","secondaryDescription":"regularly invokes the Emperor's name"}},{"value":"skeptical","sets":{"secondaryTrait":"skeptical","secondaryDescription":"questions everything they're told"}},{"value":"easily distracted","sets":{"secondaryTrait":"easily distracted","secondaryDescription":"has trouble focusing on one thing"}},{"value":"obsessive","sets":{"secondaryTrait":"obsessive","secondaryDescription":"fixates intensely on details"}},{"value":"nostalgic","sets":{"secondaryTrait":"nostalgic","secondaryDescription":"constantly references the 'better days'"}},{"value":"humor through darkness","sets":{"secondaryTrait":"darkly humorous","secondaryDescription":"copes with horror through grim jokes"}},{"value":"formal","sets":{"secondaryTrait":"formal","secondaryDescription":"maintains rigid formality in all interactions"}},{"value":"crude","sets":{"secondaryTrait":"crude","secondaryDescription":"speaks bluntly and without refinement"}},{"value":"nervous","sets":{"secondaryTrait":"nervous","secondaryDescription":"constantly on edge and jumpy"}},{"value":"confident","sets":{"secondaryTrait":"confident","secondaryDescription":"projects unshakeable self-assurance"}},{"value":"secretive","sets":{"secondaryTrait":"secretive","secondaryDescription":"guards personal information jealously"}},{"value":"generous","sets":{"secondaryTrait":"generous","secondaryDescription":"shares resources despite personal need"}}]},{"id":"quirk","name":"Behavioral Quirk","type":"simple","description":"A distinctive behavioral habit or mannerism.","tags":["personality","quirk","behavior"],"resultType":"trait","entries":[{"value":"constantly touches a holy symbol when nervous","sets":{"quirk":"touches holy symbol"}},{"value":"mutters prayers under their breath habitually","sets":{"quirk":"mutters prayers"}},{"value":"refuses to make eye contact","sets":{"quirk":"avoids eye contact"}},{"value":"picks at old scars when thinking","sets":{"quirk":"picks at scars"}},{"value":"counts things obsessively","sets":{"quirk":"counts obsessively"}},{"value":"cracks knuckles loudly before speaking","sets":{"quirk":"cracks knuckles"}},{"value":"speaks to inanimate objects","sets":{"quirk":"talks to objects"}},{"value":"checks and re-checks weapons constantly","sets":{"quirk":"checks weapons"}},{"value":"hums devotional hymns tunelessly","sets":{"quirk":"hums hymns"}},{"value":"collects small tokens from significant events","sets":{"quirk":"collects tokens"}},{"value":"refuses to sit with their back to a door","sets":{"quirk":"faces exits"}},{"value":"performs small rituals before eating","sets":{"quirk":"eating rituals"}},{"value":"apologizes constantly and unnecessarily","sets":{"quirk":"apologizes constantly"}},{"value":"stares into the middle distance when stressed","sets":{"quirk":"thousand-yard stare"}},{"value":"unconsciously mimics others' postures","sets":{"quirk":"mimics postures"}},{"value":"speaks in the third person occasionally","sets":{"quirk":"third person speech"}},{"value":"laughs at inappropriate moments","sets":{"quirk":"inappropriate laughter"}},{"value":"fidgets with a lucky charm","sets":{"quirk":"fidgets with charm"}},{"value":"whispers important information even in private","sets":{"quirk":"whispers secrets"}},{"value":"scratches at augmetics when agitated","sets":{"quirk":"scratches augmetics"}}]},{"id":"motivation","name":"Primary Motivation","type":"simple","description":"What drives this NPC's actions.","tags":["personality","motivation","goal"],"resultType":"trait","entries":[{"value":"survival at any cost","sets":{"motivation":"survival","motivationDescription":"simply wants to live another day"}},{"value":"serving the Emperor faithfully","sets":{"motivation":"faith","motivationDescription":"lives to serve the God-Emperor"}},{"value":"accumulating personal wealth","sets":{"motivation":"wealth","motivationDescription":"seeks riches and material comfort"}},{"value":"protecting their family","sets":{"motivation":"family","motivationDescription":"will do anything for their loved ones"}},{"value":"climbing social ranks","sets":{"motivation":"status","motivationDescription":"hungers for power and recognition"}},{"value":"seeking revenge","sets":{"motivation":"revenge","motivationDescription":"burns to avenge a past wrong"}},{"value":"escaping their past","sets":{"motivation":"escape","motivationDescription":"runs from something in their history"}},{"value":"redemption for past sins","sets":{"motivation":"redemption","motivationDescription":"seeks to atone for terrible deeds"}},{"value":"finding a lost loved one","sets":{"motivation":"search","motivationDescription":"hunts for someone missing"}},{"value":"preserving knowledge","sets":{"motivation":"knowledge","motivationDescription":"dedicated to preserving information"}},{"value":"spreading the Imperial faith","sets":{"motivation":"missionary","motivationDescription":"works to spread the Emperor's word"}},{"value":"understanding forbidden truths","sets":{"motivation":"forbidden knowledge","motivationDescription":"dangerously curious about secrets"}},{"value":"destroying enemies of the Imperium","sets":{"motivation":"destruction","motivationDescription":"lives to kill the Emperor's foes"}},{"value":"achieving glory and recognition","sets":{"motivation":"glory","motivationDescription":"craves heroic fame"}},{"value":"simple duty fulfillment","sets":{"motivation":"duty","motivationDescription":"does their job, nothing more"}},{"value":"satisfying dark urges","sets":{"motivation":"darkness","motivationDescription":"serves disturbing personal needs"}}]},{"id":"fear","name":"Greatest Fear","type":"simple","description":"What this NPC fears most.","tags":["personality","fear","weakness"],"resultType":"trait","entries":[{"value":"death","sets":{"fear":"death","fearDescription":"terrified of their own mortality"}},{"value":"the warp","sets":{"fear":"warp","fearDescription":"haunted by the terrors of the immaterium"}},{"value":"psykers","sets":{"fear":"psykers","fearDescription":"deeply disturbed by psychic powers"}},{"value":"being forgotten","sets":{"fear":"obscurity","fearDescription":"dreads fading into meaninglessness"}},{"value":"the Inquisition","sets":{"fear":"Inquisition","fearDescription":"lives in terror of the ordos"}},{"value":"mutation","sets":{"fear":"mutation","fearDescription":"constantly checks themselves for signs of deviation"}},{"value":"xenos","sets":{"fear":"xenos","fearDescription":"harbors deep-seated xenophobia"}},{"value":"chaos","sets":{"fear":"chaos","fearDescription":"dreads the corrupting touch of the Ruinous Powers"}},{"value":"darkness/the night","sets":{"fear":"darkness","fearDescription":"panics in darkness, needs light always"}},{"value":"confined spaces","sets":{"fear":"confinement","fearDescription":"becomes claustrophobic in tight spaces"}},{"value":"open spaces","sets":{"fear":"open spaces","fearDescription":"feels vulnerable without walls around them"}},{"value":"their own past","sets":{"fear":"past","fearDescription":"haunted by something they've done"}},{"value":"madness","sets":{"fear":"madness","fearDescription":"terrified of losing their mind"}},{"value":"Tech-heresies","sets":{"fear":"tech-heresy","fearDescription":"fears corruption of the machine spirit"}},{"value":"crowds","sets":{"fear":"crowds","fearDescription":"uncomfortable around large groups"}},{"value":"failure","sets":{"fear":"failure","fearDescription":"paralyzed by fear of not succeeding"}}]},{"id":"faithLevel","name":"Level of Imperial Faith","type":"simple","description":"Devotion to the God-Emperor and the Imperial Cult.","tags":["personality","faith","religion","emperor"],"resultType":"trait","entries":[{"id":"atheist","value":"secretly doubting","weight":0.5,"sets":{"faith":"doubting","faithDescription":"harbors dangerous doubts about the Imperial faith"}},{"id":"nominal","value":"nominally faithful","weight":3,"sets":{"faith":"nominal","faithDescription":"follows religious observances out of habit and social pressure"}},{"id":"devout","value":"genuinely devout","weight":3,"sets":{"faith":"devout","faithDescription":"holds sincere faith in the God-Emperor"}},{"id":"zealous","value":"zealously faithful","weight":2,"sets":{"faith":"zealous","faithDescription":"burns with fervent devotion to the Emperor"}},{"id":"fanatical","value":"fanatically devoted","weight":1,"sets":{"faith":"fanatical","faithDescription":"would die gladly for the Emperor without hesitation"}},{"id":"heretical","value":"secretly heretical","weight":0.3,"sets":{"faith":"heretical","faithDescription":"conceals beliefs that would be considered heretical"}}]},{"id":"darkSecret","name":"Dark Secret","type":"simple","description":"A hidden truth about this NPC that could destroy them if revealed.","tags":["personality","secret","dark","hidden"],"resultType":"trait","entries":[{"value":"none apparent","weight":5,"sets":{"secret":"none","secretDescription":"seems to have no major skeletons in their closet"}},{"value":"minor mutation hidden","weight":1,"sets":{"secret":"mutation","secretDescription":"conceals a minor mutation beneath their clothing"}},{"value":"past crime","weight":2,"sets":{"secret":"criminal past","secretDescription":"committed serious crimes in their past"}},{"value":"unpaid debts to dangerous people","weight":2,"sets":{"secret":"debts","secretDescription":"owes money to people who will kill to collect"}},{"value":"informant for authorities","weight":1,"sets":{"secret":"informant","secretDescription":"secretly reports to Imperial authorities"}},{"value":"witnessed heresy and said nothing","weight":1,"sets":{"secret":"witnessed heresy","secretDescription":"saw heretical acts and failed to report them"}},{"value":"killed someone in their past","weight":1,"sets":{"secret":"murderer","secretDescription":"took a life outside sanctioned violence"}},{"value":"possesses forbidden item","weight":0.5,"sets":{"secret":"forbidden item","secretDescription":"secretly owns something that would mean their death"}},{"value":"touched by chaos and survived","weight":0.3,"sets":{"secret":"chaos touched","secretDescription":"had contact with chaos and hides the taint"}},{"value":"has xenos heritage","weight":0.2,"sets":{"secret":"xenos heritage","secretDescription":"carries non-human blood in their lineage"}},{"value":"former cult member","weight":0.5,"sets":{"secret":"ex-cultist","secretDescription":"once belonged to a heretical cult"}},{"value":"addicted to obscura or other substances","weight":1,"sets":{"secret":"addiction","secretDescription":"struggles with substance dependency"}},{"value":"false identity","weight":1,"sets":{"secret":"false identity","secretDescription":"living under an assumed name and history"}},{"value":"latent psychic ability","weight":0.3,"sets":{"secret":"latent psyker","secretDescription":"has untrained psychic potential they fear"}},{"value":"working for a rival faction","weight":0.5,"sets":{"secret":"double agent","secretDescription":"secretly serves another power"}},{"value":"knows damning information about a powerful figure","weight":0.5,"sets":{"secret":"dangerous knowledge","secretDescription":"possesses information that could destroy the powerful"}}]},{"id":"socialClass","name":"Social Class","type":"simple","description":"Position in Imperial society's rigid hierarchy.","tags":["social","class","status","background"],"resultType":"trait","entries":[{"id":"dregs","value":"dregs","weight":2,"sets":{"socialClass":"dregs","classDescription":"the lowest of the low, barely surviving"}},{"id":"laborer","value":"laborer class","weight":4,"sets":{"socialClass":"laborer","classDescription":"common workers who toil endlessly"}},{"id":"servant","value":"servant class","weight":2,"sets":{"socialClass":"servant","classDescription":"those who serve others directly"}},{"id":"artisan","value":"artisan class","weight":2,"sets":{"socialClass":"artisan","classDescription":"skilled workers with valued trades"}},{"id":"merchant","value":"merchant class","weight":1,"sets":{"socialClass":"merchant","classDescription":"traders and business operators"}},{"id":"administratum","value":"Administratum functionary","weight":1,"sets":{"socialClass":"Administratum","classDescription":"a cog in the vast Imperial bureaucracy"}},{"id":"clergy","value":"minor clergy","weight":1,"sets":{"socialClass":"clergy","classDescription":"servants of the Ecclesiarchy"}},{"id":"military","value":"military class","weight":1,"sets":{"socialClass":"military","classDescription":"members of Imperial armed forces"}},{"id":"gentry","value":"gentry","weight":0.5,"sets":{"socialClass":"gentry","classDescription":"minor landowners and the petty wealthy"}},{"id":"nobility","value":"nobility","weight":0.3,"sets":{"socialClass":"nobility","classDescription":"members of powerful houses"}}]},{"id":"relationshipStatus","name":"Relationship Status","type":"simple","description":"Personal romantic/family situation.","tags":["social","relationship","family"],"resultType":"trait","entries":[{"value":"single, never bonded","weight":3,"sets":{"relationship":"single","relationshipDescription":"has never formed a lasting bond"}},{"value":"bonded/married","weight":2,"sets":{"relationship":"bonded","relationshipDescription":"in a formal partnership recognized by Imperial authorities"}},{"value":"widowed","weight":1,"sets":{"relationship":"widowed","relationshipDescription":"lost their partner, likely to violence or disease"}},{"value":"separated","weight":1,"sets":{"relationship":"separated","relationshipDescription":"estranged from a former partner"}},{"value":"secretly involved","weight":1,"sets":{"relationship":"secret affair","relationshipDescription":"maintains a hidden romantic connection"}},{"value":"devoted to duty only","weight":2,"sets":{"relationship":"celibate","relationshipDescription":"foregoes romance for duty or faith"}},{"value":"seeking a match","weight":1,"sets":{"relationship":"seeking","relationshipDescription":"actively looking for a suitable partner"}},{"value":"multiple partners","weight":0.5,"sets":{"relationship":"multiple","relationshipDescription":"maintains several romantic connections"}},{"value":"grieving recent loss","weight":0.5,"sets":{"relationship":"grieving","relationshipDescription":"recently lost someone they loved"}},{"value":"complicated family arrangement","weight":1,"sets":{"relationship":"complicated","relationshipDescription":"involved in a complex family or political arrangement"}}]},{"id":"imperialStanding","name":"Imperial Standing","type":"simple","description":"Reputation with Imperial authorities.","tags":["social","reputation","imperial","law"],"resultType":"trait","entries":[{"id":"wanted","value":"wanted criminal","weight":0.5,"sets":{"standing":"wanted","standingDescription":"actively hunted by Imperial law"}},{"id":"suspicious","value":"under suspicion","weight":1,"sets":{"standing":"suspicious","standingDescription":"authorities have their eye on this person"}},{"id":"unknown","value":"unknown to authorities","weight":4,"sets":{"standing":"unknown","standingDescription":"beneath official notice"}},{"id":"citizen","value":"citizen in good standing","weight":3,"sets":{"standing":"citizen","standingDescription":"a proper Imperial citizen with documentation"}},{"id":"respected","value":"locally respected","weight":1,"sets":{"standing":"respected","standingDescription":"well-regarded in their community"}},{"id":"influential","value":"influential citizen","weight":0.5,"sets":{"standing":"influential","standingDescription":"holds significant local influence"}},{"id":"connected","value":"has powerful connections","weight":0.3,"sets":{"standing":"connected","standingDescription":"known to have allies in high places"}},{"id":"sanctioned","value":"officially sanctioned","weight":0.3,"sets":{"standing":"sanctioned","standingDescription":"holds some form of Imperial sanction"}}]},{"id":"profession","name":"Profession/Occupation","type":"simple","description":"The NPC's primary occupation or role in Imperial society.","tags":["social","profession","occupation","job"],"resultType":"trait","entries":[{"value":"laborer","weight":5,"sets":{"profession":"laborer","professionDescription":"performs endless manual labor"}},{"value":"factory worker","weight":4,"sets":{"profession":"factory worker","professionDescription":"toils in manufactorum production lines"}},{"value":"merchant","weight":2,"sets":{"profession":"merchant","professionDescription":"buys and sells goods"}},{"value":"scribe","weight":1,"sets":{"profession":"scribe","professionDescription":"handles records and documentation"}},{"value":"hab-tender","weight":2,"sets":{"profession":"hab-tender","professionDescription":"maintains hab-block living quarters"}},{"value":"reclamator","weight":2,"sets":{"profession":"reclamator","professionDescription":"recycles and reclaims waste materials"}},{"value":"corpse-handler","weight":1,"sets":{"profession":"corpse-handler","professionDescription":"processes the dead for recycling"}},{"value":"enforcer","weight":1,"sets":{"profession":"enforcer","professionDescription":"maintains order through force"}},{"value":"medicae","weight":0.5,"sets":{"profession":"medicae","professionDescription":"provides medical care"}},{"value":"tech-wright","weight":0.5,"sets":{"profession":"tech-wright","professionDescription":"maintains and repairs machines"}},{"value":"preacher","weight":1,"sets":{"profession":"preacher","professionDescription":"spreads the Imperial faith"}},{"value":"vendor","weight":2,"sets":{"profession":"vendor","professionDescription":"sells goods in markets"}},{"value":"pilgrim guide","weight":0.5,"sets":{"profession":"pilgrim guide","professionDescription":"leads religious pilgrims"}},{"value":"void-sailor","weight":1,"sets":{"profession":"void-sailor","professionDescription":"crews void ships"}},{"value":"administratum clerk","weight":1,"sets":{"profession":"administratum clerk","professionDescription":"processes Imperial bureaucracy"}},{"value":"ganger","weight":1,"sets":{"profession":"ganger","professionDescription":"member of an underhive gang"}},{"value":"soldier (retired)","weight":1,"sets":{"profession":"retired soldier","professionDescription":"former Imperial Guard"}},{"value":"bounty hunter","weight":0.5,"sets":{"profession":"bounty hunter","professionDescription":"hunts criminals for pay"}},{"value":"smuggler","weight":0.5,"sets":{"profession":"smuggler","professionDescription":"moves illegal goods"}},{"value":"entertainer","weight":0.5,"sets":{"profession":"entertainer","professionDescription":"provides amusement to others"}},{"value":"pit fighter","weight":0.5,"sets":{"profession":"pit fighter","professionDescription":"fights for crowds' entertainment"}},{"value":"bodyguard","weight":1,"sets":{"profession":"bodyguard","professionDescription":"protects others for pay"}},{"value":"informant","weight":0.5,"sets":{"profession":"informant","professionDescription":"sells information to various parties"}},{"value":"rogue trader crew","weight":0.3,"sets":{"profession":"rogue trader crew","professionDescription":"serves aboard a rogue trader vessel"}},{"value":"servitor handler","weight":0.5,"sets":{"profession":"servitor handler","professionDescription":"maintains and directs servitors"}},{"value":"chartist captain","weight":0.2,"sets":{"profession":"chartist captain","professionDescription":"commands a merchant vessel"}},{"value":"astropath attendant","weight":0.2,"sets":{"profession":"astropath attendant","professionDescription":"serves the psychic communicators"}},{"value":"guild representative","weight":0.5,"sets":{"profession":"guild representative","professionDescription":"acts for powerful trading guilds"}}]},{"id":"personalItem","name":"Personal Item of Significance","type":"simple","description":"A meaningful possession they carry or treasure.","tags":["equipment","item","personal","possession"],"resultType":"item","entries":[{"value":"a well-worn prayer book","sets":{"item":"prayer book"}},{"value":"a locket containing a pict of a loved one","sets":{"item":"locket"}},{"value":"an Imperial Infantryman's Uplifting Primer","sets":{"item":"Uplifting Primer"}},{"value":"a spent bolt casing from a historic battle","sets":{"item":"bolt casing"}},{"value":"a aquila pendant","sets":{"item":"aquila pendant"}},{"value":"a tarnished Imperial medal","sets":{"item":"Imperial medal"}},{"value":"a saint's finger bone in a reliquary","sets":{"item":"saint's relic"}},{"value":"a hand-written letter they never sent","sets":{"item":"unsent letter"}},{"value":"a data-slate containing family records","sets":{"item":"family data-slate"}},{"value":"a knife passed down through generations","sets":{"item":"family knife"}},{"value":"a faded playing card from a lucky hand","sets":{"item":"lucky card"}},{"value":"an ancient chrono that no longer keeps time","sets":{"item":"broken chrono"}},{"value":"a xenos artifact hidden away","sets":{"item":"xenos artifact"}},{"value":"a flask of blessed water from a shrine world","sets":{"item":"blessed water"}},{"value":"a servo-skull of a deceased mentor","sets":{"item":"mentor's servo-skull"}},{"value":"a set of marked playing cards","sets":{"item":"marked cards"}},{"value":"a vial of soil from their homeworld","sets":{"item":"homeworld soil"}},{"value":"an old regimental insignia","sets":{"item":"regimental insignia"}},{"value":"a key to a lock they've never found","sets":{"item":"mysterious key"}},{"value":"a pict-recorder with corrupted memories","sets":{"item":"corrupted pict-recorder"}}]},{"id":"carriedWeapon","name":"Carried Weapon","type":"simple","description":"What weapon (if any) the NPC carries openly or concealed.","tags":["equipment","weapon","armament"],"resultType":"item","entries":[{"value":"none visible","weight":4,"sets":{"weapon":"none","weaponDescription":"appears to be unarmed"}},{"value":"a crude knife","weight":3,"sets":{"weapon":"knife","weaponDescription":"carries a simple blade"}},{"value":"a work tool that doubles as a weapon","weight":2,"sets":{"weapon":"improvised","weaponDescription":"their tools could easily become weapons"}},{"value":"a stub revolver","weight":1,"sets":{"weapon":"stub revolver","weaponDescription":"has a solid projectile sidearm"}},{"value":"an autopistol","weight":1,"sets":{"weapon":"autopistol","weaponDescription":"carries an automatic pistol"}},{"value":"a laspistol","weight":0.5,"sets":{"weapon":"laspistol","weaponDescription":"bears a las-weapon sidearm"}},{"value":"a club or baton","weight":2,"sets":{"weapon":"club","weaponDescription":"wields a blunt instrument"}},{"value":"a sword or long blade","weight":0.5,"sets":{"weapon":"sword","weaponDescription":"carries a blade of some quality"}},{"value":"a concealed weapon","weight":1,"sets":{"weapon":"concealed","weaponDescription":"is clearly hiding something beneath their clothes"}},{"value":"a shotgun","weight":0.5,"sets":{"weapon":"shotgun","weaponDescription":"openly carries a combat shotgun"}},{"value":"a shock maul","weight":0.3,"sets":{"weapon":"shock maul","weaponDescription":"wields an electrified enforcement weapon"}},{"value":"a chain weapon","weight":0.2,"sets":{"weapon":"chain weapon","weaponDescription":"bears a roaring chain-blade"}}]},{"id":"npcHook","name":"Story Hook","type":"simple","description":"A potential plot hook or reason for interaction with this NPC.","tags":["narrative","hook","plot","story"],"resultType":"hook","entries":[{"value":"knows something about a recent disappearance","sets":{"hook":"missing person info"}},{"value":"is being followed and doesn't know why","sets":{"hook":"being followed"}},{"value":"needs help smuggling something off-world","sets":{"hook":"smuggling job"}},{"value":"has a map to a rumored treasure","sets":{"hook":"treasure map"}},{"value":"witnessed a crime by someone powerful","sets":{"hook":"dangerous witness"}},{"value":"is looking for hired help for a dangerous job","sets":{"hook":"job offer"}},{"value":"owes a debt they can't repay","sets":{"hook":"debt trouble"}},{"value":"has information about cult activity","sets":{"hook":"cult information"}},{"value":"is actually an undercover agent","sets":{"hook":"undercover agent"}},{"value":"possesses a dangerous artifact unknowingly","sets":{"hook":"unknowing carrier"}},{"value":"seeks revenge against someone the party knows","sets":{"hook":"revenge seeker"}},{"value":"can provide access to a restricted area","sets":{"hook":"access provider"}},{"value":"is fleeing from something terrible","sets":{"hook":"refugee"}},{"value":"has a bounty on their head","sets":{"hook":"bounty target"}},{"value":"is searching for a specific person","sets":{"hook":"searching"}},{"value":"knows the location of a hidden cache","sets":{"hook":"hidden cache"}},{"value":"carries a message they cannot read","sets":{"hook":"mysterious message"}},{"value":"needs protection from assassins","sets":{"hook":"protection job"}}]},{"id":"npcAttitude","name":"Initial Attitude","type":"simple","description":"How the NPC initially reacts to strangers.","tags":["social","attitude","reaction"],"resultType":"trait","entries":[{"value":"hostile","weight":1,"sets":{"attitude":"hostile","attitudeDescription":"openly antagonistic and aggressive"}},{"value":"suspicious","weight":3,"sets":{"attitude":"suspicious","attitudeDescription":"wary and distrustful"}},{"value":"indifferent","weight":4,"sets":{"attitude":"indifferent","attitudeDescription":"shows no particular interest"}},{"value":"cautious","weight":3,"sets":{"attitude":"cautious","attitudeDescription":"reserved but willing to interact"}},{"value":"friendly","weight":2,"sets":{"attitude":"friendly","attitudeDescription":"open and welcoming"}},{"value":"obsequious","weight":1,"sets":{"attitude":"obsequious","attitudeDescription":"excessively eager to please"}},{"value":"fearful","weight":1,"sets":{"attitude":"fearful","attitudeDescription":"clearly frightened"}},{"value":"dismissive","weight":2,"sets":{"attitude":"dismissive","attitudeDescription":"considers themselves above notice"}}]},{"id":"voiceDescription","name":"Voice Description","type":"simple","description":"How the NPC sounds when speaking.","tags":["physical","voice","speech"],"resultType":"trait","entries":[{"value":"a deep, rumbling voice","sets":{"voice":"deep"}},{"value":"a high, reedy voice","sets":{"voice":"high"}},{"value":"a harsh, grating voice","sets":{"voice":"harsh"}},{"value":"a soft, barely audible whisper","sets":{"voice":"whisper"}},{"value":"a booming, commanding voice","sets":{"voice":"booming"}},{"value":"a raspy voice damaged by smog or smoke","sets":{"voice":"raspy"}},{"value":"a monotone, emotionless voice","sets":{"voice":"monotone"}},{"value":"a mechanical, vox-altered voice","sets":{"voice":"mechanical"}},{"value":"a sing-song, lilting voice","sets":{"voice":"lilting"}},{"value":"a gravelly, weathered voice","sets":{"voice":"gravelly"}},{"value":"a nasal, whining voice","sets":{"voice":"nasal"}},{"value":"a cultured, precise voice","sets":{"voice":"cultured"}}]}]`),iA=[{id:"npcName",name:"NPC Full Name",description:"Generates a full name appropriate to the NPC's origin and gender.",tags:["name","identity","generator"],resultType:"name",shared:{$origin:"{{humanOrigin}}",$gender:"{{gender}}"},pattern:'{{switch[$gender=="male":$origin.@maleFirstName].else[$origin.@femaleFirstName]}} {{$origin.@surname}}'},{id:"physicalAppearance",name:"Physical Appearance",description:"Generates a physical description of the NPC.",tags:["physical","appearance","description"],resultType:"description",shared:{$age:"{{age}}",$build:"{{physicalBuild}}",$skin:"{{skinTone}}",$hair:"{{hairDescription}}",$eyes:"{{eyeColor}}",$feature:"{{distinguishingFeature}}",$clothing:"{{clothingStyle}}",$voice:"{{voiceDescription}}"},pattern:"A **{{$age}}** individual, {{$age.@ageDescription}}. They are **{{$build}}**, {{$build.@buildDescription}}. They have {{$skin.@skinDescription}}, {{$hair.@hairDescription}}, and {{$eyes.@eyeDescription}}. Their most distinguishing feature is {{$feature}}. They wear {{$clothing}} and speak with {{$voice}}."},{id:"personalityProfile",name:"Personality Profile",description:"Generates the NPC's personality traits and psychological profile.",tags:["personality","psychology","description"],resultType:"description",shared:{$primary:"{{personalityPrimary}}",$secondary:"{{personalitySecondary}}",$quirk:"{{quirk}}",$motivation:"{{motivation}}",$fear:"{{fear}}",$faith:"{{faithLevel}}"},pattern:`This person is **{{$primary}}**  {{$primary.@primaryDescription}}. They are also {{$secondary.@secondaryTrait}}, meaning they {{$secondary.@secondaryDescription}}. They {{$quirk.@quirk}}.

**Motivation:** {{$motivation.@motivationDescription}}.
**Greatest Fear:** {{$fear.@fearDescription}}.
**Faith:** {{$faith.@faithDescription}}.`},{id:"backgroundSummary",name:"Background Summary",description:"Generates the NPC's social background and position.",tags:["background","social","description"],resultType:"description",shared:{$class:"{{socialClass}}",$profession:"{{profession}}",$relationship:"{{relationshipStatus}}",$standing:"{{imperialStanding}}",$secret:"{{darkSecret}}",$hook:"{{npcHook}}"},pattern:`**Social Class:** {{$class.@classDescription}}.
**Profession:** As a {{$profession.@profession}}, they {{$profession.@professionDescription}}.
**Relationships:** {{$relationship.@relationshipDescription}}.
**Imperial Standing:** {{$standing.@standingDescription}}.
**Dark Secret:** {{$secret.@secretDescription}}.

*Potential Hook:* {{$hook}}.`},{id:"npcComplete",name:"Complete NPC Profile",description:"Generates a full NPC with all characteristics, suitable for immediate use. All properties are available for reference by other tables.",tags:["npc","complete","generator","main"],resultType:"npc",shared:{$origin:"{{humanOrigin}}",$gender:"{{gender}}",$age:"{{age}}",$build:"{{physicalBuild}}",$skin:"{{skinTone}}",$hair:"{{hairDescription}}",$eyes:"{{eyeColor}}",$feature:"{{distinguishingFeature}}",$clothing:"{{clothingStyle}}",$voice:"{{voiceDescription}}",$primary:"{{personalityPrimary}}",$secondary:"{{personalitySecondary}}",$quirk:"{{quirk}}",$motivation:"{{motivation}}",$fear:"{{fear}}",$faith:"{{faithLevel}}",$class:"{{socialClass}}",$profession:"{{profession}}",$relationship:"{{relationshipStatus}}",$standing:"{{imperialStanding}}",$secret:"{{darkSecret}}",$item:"{{personalItem}}",$weapon:"{{carriedWeapon}}",$attitude:"{{npcAttitude}}",$hook:"{{npcHook}}"},pattern:`# {{switch[$gender=="male":$origin.@maleFirstName].else[$origin.@femaleFirstName]}} {{$origin.@surname}}

**{{$origin}}** | **{{$gender}}** | **{{$age}}** ({{$age.@ageYears}} years) | **{{$profession.@profession}}**

---

## Physical Description

A {{$age}} {{$gender}} of {{$origin.@origin}} origin, {{$age.@ageDescription}}. They are {{$build}}, {{$build.@buildDescription}}.

They have {{$skin.@skinDescription}}, {{$hair.@hairDescription}}, and {{$eyes.@eyeDescription}}. Their most distinguishing feature is **{{$feature}}**.

They wear {{$clothing}} and speak with {{$voice}}.

---

## Personality

**Primary Trait:** {{$primary}}  {{$primary.@primaryDescription}}
**Secondary Trait:** {{$secondary.@secondaryTrait}}  {{$secondary.@secondaryDescription}}
**Quirk:** They {{$quirk.@quirk}}.

**Motivation:** {{$motivation.@motivationDescription}}
**Greatest Fear:** {{$fear.@fearDescription}}
**Imperial Faith:** {{$faith.@faithDescription}}

---

## Background

**Origin:** Born in {{$origin.@culturalBackground}}, they typically wear {{$origin.@typicalClothing}}. As is common for their origin, they {{$origin.@originQuirk}}.

**Social Class:** {{$class.@classDescription}}
**Profession:** As a {{$profession.@profession}}, they {{$profession.@professionDescription}}
**Relationships:** {{$relationship.@relationshipDescription}}
**Imperial Standing:** {{$standing.@standingDescription}}

**Dark Secret:** {{$secret.@secretDescription}}

---

## Equipment & Demeanor

**Personal Item:** They carry {{$item}}
**Weapon:** {{$weapon.@weaponDescription}}
**Initial Attitude:** {{$attitude.@attitudeDescription}}

---

## Story Hook

_{{$hook}}_

---

### Quick Reference
| Attribute | Value |
|-----------|-------|
| Name | {{switch[$gender=="male":$origin.@maleFirstName].else[$origin.@femaleFirstName]}} {{$origin.@surname}} |
| Gender | {{$gender}} |
| Origin | {{$origin}} |
| Age | {{$age}} ({{$age.@ageYears}}) |
| Class | {{$class.@socialClass}} |
| Profession | {{$profession.@profession}} |
| Faith | {{$faith.@faith}} |
| Standing | {{$standing.@standing}} |
| Attitude | {{$attitude.@attitude}} |`},{id:"npcBrief",name:"Brief NPC Description",description:"A shorter NPC summary suitable for quick reference.",tags:["npc","brief","quick","summary"],resultType:"npc",shared:{$origin:"{{humanOrigin}}",$gender:"{{gender}}",$age:"{{age}}",$build:"{{physicalBuild}}",$feature:"{{distinguishingFeature}}",$primary:"{{personalityPrimary}}",$profession:"{{profession}}",$attitude:"{{npcAttitude}}"},pattern:'**{{switch[$gender=="male":$origin.@maleFirstName].else[$origin.@femaleFirstName]}} {{$origin.@surname}}**  {{$age}} {{$gender}} {{$origin.@origin}}, {{$profession.@profession}}. {{$build.@buildDescription | capitalize}}. Notable: {{$feature}}. {{$primary.@primaryDescription | capitalize}}. Currently {{$attitude.@attitudeDescription}}.'},{id:"npcQuickStats",name:"NPC Quick Stats Block",description:"Generates just the essential stats for an NPC in a compact format.",tags:["npc","stats","quick","reference"],resultType:"statistic",shared:{$origin:"{{humanOrigin}}",$gender:"{{gender}}",$age:"{{age}}",$class:"{{socialClass}}",$profession:"{{profession}}",$faith:"{{faithLevel}}",$standing:"{{imperialStanding}}",$attitude:"{{npcAttitude}}",$weapon:"{{carriedWeapon}}"},pattern:`**Name:** {{switch[$gender=="male":$origin.@maleFirstName].else[$origin.@femaleFirstName]}} {{$origin.@surname}}
**Origin:** {{$origin}} | **Gender:** {{$gender}} | **Age:** {{$age.@ageYears}}
**Class:** {{$class.@socialClass}} | **Profession:** {{$profession.@profession}}
**Faith:** {{$faith.@faith}} | **Standing:** {{$standing.@standing}}
**Attitude:** {{$attitude.@attitude}} | **Armed:** {{$weapon.@weapon}}`},{id:"randomEncounterNpc",name:"Random Encounter NPC",description:"Generates a quick NPC suitable for a random encounter.",tags:["npc","encounter","random"],resultType:"encounter",shared:{$origin:"{{humanOrigin}}",$gender:"{{gender}}",$profession:"{{profession}}",$feature:"{{distinguishingFeature}}",$attitude:"{{npcAttitude}}",$hook:"{{npcHook}}"},pattern:"A {{$gender}} {{$origin.@origin}} {{$profession.@profession}} with {{$feature}}. They seem {{$attitude.@attitudeDescription}}. _{{$hook}}_"},{id:"npcGroupMember",name:"NPC Group Member",description:"Generates a brief NPC description suitable for group/crowd members.",tags:["npc","group","crowd","brief"],resultType:"npc",shared:{$origin:"{{humanOrigin}}",$gender:"{{gender}}",$build:"{{physicalBuild}}",$feature:"{{distinguishingFeature}}",$primary:"{{personalityPrimary}}"},pattern:'{{switch[$gender=="male":$origin.@maleFirstName].else[$origin.@femaleFirstName]}}: {{$build}} {{$gender}}, {{$feature}}, {{$primary}}'}],sA={metadata:nA,variables:rA,tables:aA,templates:iA},oA={name:"Cyberpunk Generator",namespace:"rolldeo.cyberpunk.core",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A **cyberpunk** generator for creating NPCs, corporations, gangs, gigs, locations, cyberware, and street scenes. Perfect for any neon-soaked dystopian future setting where megacorps rule the world and chrome is king.",tags:["cyberpunk","sci-fi","generator","npc","corporations","gangs","cyberware","noir"],source:{license:"CC0-1.0",copyright:"Rolldeo - Free for any use"}},lA={settingName:"Night City",defaultSeparator:", ",currency:"eurodollars"},cA={$dominantCorp:"{{megaCorporations}}",threatLevel:"{{dice:1d6}}"},uA=JSON.parse(`[{"id":"corpPrefixes","name":"Corporation Prefixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Arasaka"},{"value":"Militech"},{"value":"Kang-Tao"},{"value":"Zetatech"},{"value":"Biotechnica"},{"value":"Petrochem"},{"value":"Orbital"},{"value":"Dynalar"},{"value":"Trauma"},{"value":"Kiroshi"},{"value":"Raven"},{"value":"IEC"},{"value":"Lazarus"},{"value":"Network"},{"value":"Continental"}]},{"id":"corpSuffixes","name":"Corporation Suffixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Industries"},{"value":"Corporation"},{"value":"Systems"},{"value":"Dynamics"},{"value":"Technologies"},{"value":"International"},{"value":"Global"},{"value":"Solutions"},{"value":"Unlimited"},{"value":"Group"},{"value":"Holdings"},{"value":"Enterprises"}]},{"id":"megaCorporations","name":"Megacorporations","type":"simple","description":"The massive corporate entities that control the world","resultType":"faction","tags":["corporations","factions"],"entries":[{"value":"Arasaka Corporation","weight":3,"description":"Japanese megacorp specializing in security and banking","sets":{"specialty":"security and banking","origin":"Japanese","reputation":"ruthless and traditional","colors":"red and black","security":"legendary"}},{"value":"Militech International","weight":3,"description":"American weapons and military contractor","sets":{"specialty":"weapons manufacturing","origin":"American","reputation":"aggressive and patriotic","colors":"olive and gold","security":"military-grade"}},{"value":"Kang-Tao Industries","weight":2,"description":"Chinese weapons and cyberware manufacturer","sets":{"specialty":"smart weapons and cyberware","origin":"Chinese","reputation":"innovative and secretive","colors":"white and blue","security":"high-tech"}},{"value":"Biotechnica","weight":2,"description":"Italian biotech and pharmaceutical giant","sets":{"specialty":"biotech and pharmaceuticals","origin":"Italian","reputation":"clinical and amoral","colors":"green and white","security":"corporate standard"}},{"value":"Zetatech","weight":2,"description":"Cutting-edge cyberware and electronics","sets":{"specialty":"cyberware and electronics","origin":"Multinational","reputation":"cutting-edge but unstable","colors":"chrome and purple","security":"automated"}},{"value":"Trauma Team International","weight":2,"description":"Premium medical response and healthcare","sets":{"specialty":"emergency medical services","origin":"American","reputation":"professional and expensive","colors":"red and white","security":"armed medics"}},{"value":"Petrochem","weight":2,"description":"Energy and synthetic fuel conglomerate","sets":{"specialty":"energy and CHOOH2 fuel","origin":"American","reputation":"powerful and polluting","colors":"yellow and black","security":"private army"}},{"value":"Network News 54","weight":1,"description":"Major media and information network","sets":{"specialty":"media and information","origin":"American","reputation":"influential but biased","colors":"blue and white","security":"moderate"}},{"value":"Orbital Air","weight":1,"description":"Aerospace and space transportation","sets":{"specialty":"aerospace and orbital services","origin":"European","reputation":"elite and exclusive","colors":"silver and blue","security":"restricted access"}},{"value":"Continental Brands","weight":2,"description":"Consumer goods and lifestyle products","sets":{"specialty":"consumer products","origin":"Multinational","reputation":"ubiquitous and manipulative","colors":"varies by brand","security":"corporate standard"}}]},{"id":"corpDivisions","name":"Corporate Divisions","type":"simple","resultType":"description","tags":["corporations"],"entries":[{"value":"Security Division","sets":{"function":"protection","danger":"high"}},{"value":"R&D Department","sets":{"function":"research","danger":"medium"}},{"value":"Human Resources","sets":{"function":"personnel","danger":"low"}},{"value":"Legal Affairs","sets":{"function":"legal","danger":"medium"}},{"value":"Marketing Division","sets":{"function":"propaganda","danger":"low"}},{"value":"Special Operations","sets":{"function":"black ops","danger":"extreme"}},{"value":"Finance Division","sets":{"function":"money","danger":"low"}},{"value":"Intelligence Bureau","sets":{"function":"espionage","danger":"high"}},{"value":"Manufacturing Division","sets":{"function":"production","danger":"low"}},{"value":"Executive Branch","sets":{"function":"leadership","danger":"medium"}}]},{"id":"corpTitles","name":"Corporate Titles","type":"simple","resultType":"description","tags":["corporations","characters"],"entries":[{"value":"CEO","weight":0.5,"sets":{"level":"executive","authority":"supreme"}},{"value":"Vice President","weight":1,"sets":{"level":"executive","authority":"high"}},{"value":"Director","weight":2,"sets":{"level":"senior","authority":"significant"}},{"value":"Manager","weight":3,"sets":{"level":"middle","authority":"moderate"}},{"value":"Senior Analyst","weight":3,"sets":{"level":"professional","authority":"limited"}},{"value":"Security Chief","weight":1,"sets":{"level":"senior","authority":"significant"}},{"value":"Lead Developer","weight":2,"sets":{"level":"professional","authority":"technical"}},{"value":"Executive Assistant","weight":2,"sets":{"level":"support","authority":"proxy"}},{"value":"Field Agent","weight":2,"sets":{"level":"operative","authority":"operational"}},{"value":"Corporate Lawyer","weight":2,"sets":{"level":"professional","authority":"legal"}}]},{"id":"streetGangs","name":"Street Gangs","type":"simple","description":"The gangs that control the streets","resultType":"faction","tags":["gangs","factions","street"],"entries":[{"value":"Maelstrom","weight":2,"description":"Cyberpsychos obsessed with body modification","sets":{"style":"extreme cyberware","territory":"industrial zones","reputation":"violent and unpredictable","colors":"chrome and red","specialty":"cyberware theft"}},{"value":"Tyger Claws","weight":2,"description":"Japanese-style gang with strict hierarchy","sets":{"style":"traditional yakuza","territory":"Japantown","reputation":"honorable but deadly","colors":"neon blue and white","specialty":"protection rackets"}},{"value":"Valentinos","weight":2,"description":"Latino gang with strong family ties","sets":{"style":"flashy and proud","territory":"Heywood district","reputation":"loyal and territorial","colors":"gold and red","specialty":"smuggling"}},{"value":"6th Street","weight":2,"description":"Veterans turned street soldiers","sets":{"style":"military discipline","territory":"Santo Domingo","reputation":"patriotic vigilantes","colors":"red, white, and blue","specialty":"weapons dealing"}},{"value":"Animals","weight":2,"description":"Steroid-pumped street fighters","sets":{"style":"ultra-violence","territory":"combat zones","reputation":"brutal enforcers","colors":"orange and black","specialty":"muscle for hire"}},{"value":"Voodoo Boys","weight":1,"description":"Elite netrunners from Pacifica","sets":{"style":"mystical hackers","territory":"Pacifica","reputation":"mysterious and dangerous","colors":"green and purple","specialty":"netrunning"}},{"value":"Moxes","weight":2,"description":"Sex workers who fight back","sets":{"style":"punk protectors","territory":"entertainment districts","reputation":"protective and fierce","colors":"pink and black","specialty":"information gathering"}},{"value":"Scavengers","weight":2,"description":"Organ harvesters and body snatchers","sets":{"style":"desperate predators","territory":"anywhere vulnerable","reputation":"feared and despised","colors":"dirty white and red","specialty":"organ trafficking"}},{"value":"Aldecaldos","weight":1,"description":"Nomad family operating near the city","sets":{"style":"family first","territory":"badlands","reputation":"trustworthy outsiders","colors":"brown and orange","specialty":"smuggling and transport"}},{"value":"Wraiths","weight":1,"description":"Badlands raiders","sets":{"style":"road warriors","territory":"badlands highways","reputation":"merciless raiders","colors":"black and chrome","specialty":"highway robbery"}}]},{"id":"gangRoles","name":"Gang Roles","type":"simple","resultType":"description","tags":["gangs","characters"],"entries":[{"value":"lieutenant","sets":{"authority":"high","danger":"high"}},{"value":"enforcer","sets":{"authority":"low","danger":"extreme"}},{"value":"runner","sets":{"authority":"low","danger":"medium"}},{"value":"dealer","sets":{"authority":"low","danger":"medium"}},{"value":"lookout","sets":{"authority":"none","danger":"low"}},{"value":"tech specialist","sets":{"authority":"medium","danger":"low"}},{"value":"netrunner","sets":{"authority":"medium","danger":"high"}},{"value":"wheelman","sets":{"authority":"low","danger":"medium"}},{"value":"recruiter","sets":{"authority":"medium","danger":"low"}},{"value":"shot caller","sets":{"authority":"very high","danger":"high"}}]},{"id":"fixerTypes","name":"Fixer Types","type":"simple","resultType":"description","tags":["characters","contacts"],"entries":[{"value":"job broker","description":"Connects clients with mercs","sets":{"specialty":"employment","connections":"both sides"}},{"value":"arms dealer","description":"Supplies weapons and ammo","sets":{"specialty":"weapons","connections":"underworld"}},{"value":"info broker","description":"Trades in secrets and data","sets":{"specialty":"information","connections":"everywhere"}},{"value":"fence","description":"Moves stolen goods","sets":{"specialty":"stolen property","connections":"criminal"}},{"value":"ripperdoc connector","description":"Knows the best chrome docs","sets":{"specialty":"cyberware","connections":"medical"}},{"value":"vehicle specialist","description":"Deals in cars and parts","sets":{"specialty":"vehicles","connections":"mechanics"}},{"value":"identity specialist","description":"Provides fake IDs and documents","sets":{"specialty":"forgery","connections":"government"}},{"value":"corpo insider","description":"Has friends in high places","sets":{"specialty":"corporate access","connections":"corporate"}}]},{"id":"cyberwareNeural","name":"Neural Cyberware","type":"simple","resultType":"item","tags":["cyberware","neural"],"defaultSets":{"category":"neural","invasiveness":"high"},"entries":[{"value":"neural processor","description":"Basic brain-computer interface","sets":{"function":"computing","humanity":"-2"}},{"value":"reflex booster","description":"Accelerates reaction time","sets":{"function":"combat","humanity":"-4"}},{"value":"memory chip","description":"Expanded memory storage","sets":{"function":"storage","humanity":"-1"}},{"value":"skillsoft socket","description":"Allows downloadable skills","sets":{"function":"learning","humanity":"-3"}},{"value":"pain editor","description":"Blocks pain signals","sets":{"function":"combat","humanity":"-4"}},{"value":"behavioral inhibitor","description":"Emotional control implant","sets":{"function":"control","humanity":"-6"}},{"value":"interface plugs","description":"Universal connection ports","sets":{"function":"interface","humanity":"-1"}},{"value":"cybermodem","description":"Internal netrunning hardware","sets":{"function":"hacking","humanity":"-3"}},{"value":"threat detector","description":"Danger awareness system","sets":{"function":"defense","humanity":"-2"}},{"value":"combat algorithm chip","description":"Tactical combat enhancement","sets":{"function":"combat","humanity":"-3"}}]},{"id":"cyberwareLimbs","name":"Limb Cyberware","type":"simple","resultType":"item","tags":["cyberware","limbs"],"defaultSets":{"category":"limbs","invasiveness":"extreme"},"entries":[{"value":"cyberarm","description":"Full arm replacement","sets":{"function":"strength","humanity":"-4","appearance":"obvious chrome"}},{"value":"mantis blades","description":"Retractable forearm blades","sets":{"function":"weapon","humanity":"-6","appearance":"hidden"}},{"value":"monowire","description":"Retractable monofilament whip","sets":{"function":"weapon","humanity":"-4","appearance":"hidden"}},{"value":"gorilla arms","description":"Enhanced strength arms","sets":{"function":"strength","humanity":"-5","appearance":"bulky chrome"}},{"value":"cyberleg","description":"Full leg replacement","sets":{"function":"mobility","humanity":"-4","appearance":"obvious chrome"}},{"value":"jump boosters","description":"Leg-mounted leap enhancement","sets":{"function":"mobility","humanity":"-3","appearance":"compact"}},{"value":"quick-change mount","description":"Swappable hand attachment","sets":{"function":"utility","humanity":"-2","appearance":"socket visible"}},{"value":"subdermal grip","description":"Smart weapon link in palm","sets":{"function":"weapon","humanity":"-1","appearance":"hidden"}},{"value":"projectile launcher","description":"Arm-mounted grenade launcher","sets":{"function":"weapon","humanity":"-5","appearance":"obvious"}},{"value":"climbing claws","description":"Retractable climbing aids","sets":{"function":"utility","humanity":"-2","appearance":"hidden"}}]},{"id":"cyberwareSensory","name":"Sensory Cyberware","type":"simple","resultType":"item","tags":["cyberware","sensory"],"defaultSets":{"category":"sensory","invasiveness":"moderate"},"entries":[{"value":"cybereyes","description":"Full optical replacement","sets":{"function":"vision","humanity":"-2","appearance":"glowing iris"}},{"value":"infrared scanner","description":"Thermal vision implant","sets":{"function":"vision","humanity":"-1","appearance":"red tint"}},{"value":"low-light enhancement","description":"Night vision modification","sets":{"function":"vision","humanity":"-1","appearance":"dilated pupils"}},{"value":"targeting system","description":"Combat HUD overlay","sets":{"function":"combat","humanity":"-2","appearance":"scanning patterns"}},{"value":"cyberaudio","description":"Enhanced hearing system","sets":{"function":"hearing","humanity":"-2","appearance":"metallic ear"}},{"value":"audio dampener","description":"Protection from sonic attacks","sets":{"function":"defense","humanity":"-1","appearance":"invisible"}},{"value":"radio scanner","description":"Intercepts communications","sets":{"function":"surveillance","humanity":"-1","appearance":"invisible"}},{"value":"olfactory booster","description":"Enhanced sense of smell","sets":{"function":"detection","humanity":"-1","appearance":"invisible"}},{"value":"recording implant","description":"Internal audio/video recorder","sets":{"function":"surveillance","humanity":"-1","appearance":"invisible"}},{"value":"facial recognition software","description":"Automatic ID system","sets":{"function":"identification","humanity":"-1","appearance":"scanning eyes"}}]},{"id":"cyberwareInternal","name":"Internal Cyberware","type":"simple","resultType":"item","tags":["cyberware","internal"],"defaultSets":{"category":"internal","invasiveness":"moderate"},"entries":[{"value":"subdermal armor","description":"Under-skin plating","sets":{"function":"defense","humanity":"-3","appearance":"subtle ridges"}},{"value":"synth-lungs","description":"Artificial respiratory system","sets":{"function":"survival","humanity":"-2","appearance":"invisible"}},{"value":"toxin filters","description":"Blood filtration system","sets":{"function":"survival","humanity":"-1","appearance":"invisible"}},{"value":"adrenaline booster","description":"Combat stimulant injector","sets":{"function":"combat","humanity":"-2","appearance":"invisible"}},{"value":"nasal filters","description":"Air filtration implants","sets":{"function":"survival","humanity":"-1","appearance":"invisible"}},{"value":"reinforced bones","description":"Skeletal strengthening","sets":{"function":"durability","humanity":"-4","appearance":"invisible"}},{"value":"blood pump","description":"Auxiliary cardiac system","sets":{"function":"survival","humanity":"-2","appearance":"invisible"}},{"value":"biomonitor","description":"Internal health display","sets":{"function":"medical","humanity":"-1","appearance":"invisible"}},{"value":"skin weave","description":"Reinforced epidermis","sets":{"function":"defense","humanity":"-2","appearance":"subtle sheen"}},{"value":"hidden compartment","description":"Concealed storage in body","sets":{"function":"utility","humanity":"-2","appearance":"invisible"}}]},{"id":"cyberwareConditions","name":"Cyberware Conditions","type":"simple","resultType":"description","tags":["cyberware","condition"],"entries":[{"value":"factory fresh, still under warranty","weight":1,"sets":{"quality":"pristine","reliability":"perfect"}},{"value":"military-grade surplus, battle-tested","weight":2,"sets":{"quality":"excellent","reliability":"proven"}},{"value":"standard commercial model, well-maintained","weight":4,"sets":{"quality":"good","reliability":"normal"}},{"value":"refurbished from donor, some quirks","weight":3,"sets":{"quality":"acceptable","reliability":"occasional glitch"}},{"value":"bootleg copy, questionable origin","weight":2,"sets":{"quality":"poor","reliability":"unreliable"}},{"value":"scav-harvested, barely functional","weight":1,"sets":{"quality":"terrible","reliability":"failing"}},{"value":"prototype model, experimental features","weight":1,"sets":{"quality":"variable","reliability":"unpredictable"}},{"value":"custom-built, one of a kind","weight":1,"sets":{"quality":"excellent","reliability":"depends on maker"}}]},{"id":"allCyberware","name":"All Cyberware","type":"composite","description":"Any type of cyberware","resultType":"item","tags":["cyberware"],"sources":[{"tableId":"cyberwareNeural","weight":3},{"tableId":"cyberwareLimbs","weight":3},{"tableId":"cyberwareSensory","weight":3},{"tableId":"cyberwareInternal","weight":2}]},{"id":"districts","name":"City Districts","type":"simple","description":"Different zones of the megacity","resultType":"location","tags":["locations","districts"],"entries":[{"value":"Corporate Center","description":"Gleaming towers of the megacorps","sets":{"wealth":"extreme","security":"maximum","atmosphere":"sterile and surveilled","danger":"low for corps, extreme for intruders"}},{"value":"Industrial Zone","description":"Factories and warehouses","sets":{"wealth":"working class","security":"private guards","atmosphere":"polluted and loud","danger":"moderate"}},{"value":"Entertainment District","description":"Clubs, bars, and braindance parlors","sets":{"wealth":"mixed","security":"gang-controlled","atmosphere":"neon and noise","danger":"moderate to high"}},{"value":"Combat Zone","description":"Abandoned and lawless area","sets":{"wealth":"poverty","security":"none","atmosphere":"ruined and desperate","danger":"extreme"}},{"value":"Residential Megablocks","description":"Massive apartment complexes","sets":{"wealth":"working class","security":"minimal","atmosphere":"cramped and anonymous","danger":"moderate"}},{"value":"Luxury Enclave","description":"Gated community for the wealthy","sets":{"wealth":"rich","security":"private military","atmosphere":"artificial paradise","danger":"low inside, high trying to enter"}},{"value":"Port District","description":"Shipping and smuggling hub","sets":{"wealth":"mixed","security":"corrupt","atmosphere":"busy and transient","danger":"moderate"}},{"value":"Japantown","description":"Cultural enclave with traditional architecture","sets":{"wealth":"mixed","security":"Tyger Claws","atmosphere":"neon meets tradition","danger":"moderate if respectful"}},{"value":"Badlands","description":"Wasteland outside the city","sets":{"wealth":"poverty","security":"nomad patrols","atmosphere":"dust and freedom","danger":"high"}},{"value":"Medical District","description":"Hospitals and ripperdoc clinics","sets":{"wealth":"varies wildly","security":"varies by clinic","atmosphere":"sterile meets street","danger":"low to high"}}]},{"id":"establishments","name":"Establishments","type":"simple","description":"Places you might visit","resultType":"location","tags":["locations","establishments"],"entries":[{"value":"dive bar","sets":{"type":"social","clientele":"street","security":"bouncer","vibe":"rough and loud"}},{"value":"nightclub","sets":{"type":"social","clientele":"mixed","security":"armed","vibe":"pulsing music and lights"}},{"value":"ripperdoc clinic","sets":{"type":"medical","clientele":"anyone with eddies","security":"varies","vibe":"chrome and blood"}},{"value":"braindance parlor","sets":{"type":"entertainment","clientele":"escapists","security":"minimal","vibe":"dreamy and seedy"}},{"value":"gun shop","sets":{"type":"retail","clientele":"armed citizens","security":"heavy","vibe":"clinical violence"}},{"value":"food stall","sets":{"type":"food","clientele":"everyone","security":"none","vibe":"sizzling and smoky"}},{"value":"fixer's office","sets":{"type":"business","clientele":"mercs","security":"hidden","vibe":"tense and professional"}},{"value":"corpo hotel","sets":{"type":"lodging","clientele":"executives","security":"maximum","vibe":"sterile luxury"}},{"value":"coffin motel","sets":{"type":"lodging","clientele":"desperate","security":"none","vibe":"cramped and anonymous"}},{"value":"netrunner den","sets":{"type":"tech","clientele":"hackers","security":"digital","vibe":"cables and cold"}},{"value":"black market","sets":{"type":"retail","clientele":"criminals","security":"gang","vibe":"paranoid and transactional"}},{"value":"joytoy parlor","sets":{"type":"entertainment","clientele":"lonely","security":"varies","vibe":"artificial intimacy"}},{"value":"chop shop","sets":{"type":"automotive","clientele":"anyone","security":"gang","vibe":"grease and stolen parts"}},{"value":"pachinko arcade","sets":{"type":"gambling","clientele":"gamblers","security":"gang","vibe":"flashing lights and desperation"}},{"value":"fight club","sets":{"type":"entertainment","clientele":"adrenaline junkies","security":"brutal","vibe":"blood and money"}}]},{"id":"locationAtmospheres","name":"Location Atmospheres","type":"simple","resultType":"description","tags":["locations","atmosphere"],"entries":[{"value":"Neon signs flicker and buzz, casting shifting shadows in primary colors."},{"value":"The bass from hidden speakers makes your chest vibrate."},{"value":"Steam rises from grates, mixing with the ever-present smog."},{"value":"Holographic advertisements assault your senses from every surface."},{"value":"The acrid smell of synthetic food and recycled air fills your nostrils."},{"value":"Conversations in a dozen languages create a constant murmur."},{"value":"Security drones hum overhead, red lights scanning the crowd."},{"value":"The metallic tang of blood and chrome hangs in the air."},{"value":"Rain patters against grimy windows, neon reflections pooling in the gutters."},{"value":"Warning klaxons echo from somewhere distant, but no one reacts."},{"value":"The sharp ozone smell of recently fired weapons lingers."},{"value":"Glitching AR overlays compete for your attention."}]},{"id":"securityLevels","name":"Security Levels","type":"simple","resultType":"description","tags":["security","locations"],"entries":[{"value":"No security","sets":{"level":"none","response":"none","tech":"none"}},{"value":"Basic - cameras and locks","sets":{"level":"minimal","response":"cops maybe","tech":"standard"}},{"value":"Standard - guards and alarms","sets":{"level":"moderate","response":"corporate security","tech":"decent"}},{"value":"High - armed response and ICE","sets":{"level":"high","response":"rapid","tech":"advanced"}},{"value":"Maximum - military grade protection","sets":{"level":"extreme","response":"lethal","tech":"cutting edge"}},{"value":"Black site - officially doesn't exist","sets":{"level":"maximum","response":"extreme prejudice","tech":"classified"}}]},{"id":"weaponsRanged","name":"Ranged Weapons","type":"simple","resultType":"item","tags":["weapons","ranged"],"entries":[{"value":"heavy pistol","sets":{"type":"pistol","damage":"high","conceal":"easy"}},{"value":"submachine gun","sets":{"type":"smg","damage":"medium","conceal":"moderate"}},{"value":"assault rifle","sets":{"type":"rifle","damage":"high","conceal":"impossible"}},{"value":"shotgun","sets":{"type":"shotgun","damage":"devastating","conceal":"impossible"}},{"value":"sniper rifle","sets":{"type":"rifle","damage":"extreme","conceal":"impossible"}},{"value":"smart pistol","sets":{"type":"smart","damage":"medium","conceal":"easy"}},{"value":"tech rifle","sets":{"type":"tech","damage":"high","conceal":"impossible"}},{"value":"power weapon","sets":{"type":"power","damage":"extreme","conceal":"moderate"}},{"value":"holdout pistol","sets":{"type":"pistol","damage":"low","conceal":"very easy"}},{"value":"machine pistol","sets":{"type":"smg","damage":"medium","conceal":"easy"}}]},{"id":"weaponsMelee","name":"Melee Weapons","type":"simple","resultType":"item","tags":["weapons","melee"],"entries":[{"value":"katana","sets":{"type":"blade","damage":"high","style":"elegant"}},{"value":"monoknife","sets":{"type":"blade","damage":"medium","style":"practical"}},{"value":"stun baton","sets":{"type":"blunt","damage":"low","style":"non-lethal"}},{"value":"baseball bat","sets":{"type":"blunt","damage":"medium","style":"street"}},{"value":"sledgehammer","sets":{"type":"blunt","damage":"extreme","style":"brutal"}},{"value":"combat knife","sets":{"type":"blade","damage":"medium","style":"military"}},{"value":"machete","sets":{"type":"blade","damage":"high","style":"savage"}},{"value":"brass knuckles","sets":{"type":"fist","damage":"low","style":"street"}},{"value":"thermal katana","sets":{"type":"blade","damage":"extreme","style":"high-tech"}},{"value":"chain","sets":{"type":"flexible","damage":"medium","style":"improvised"}}]},{"id":"techGear","name":"Tech Gear","type":"simple","resultType":"item","tags":["gear","tech"],"entries":[{"value":"agent (smartphone)","sets":{"function":"communication","legality":"legal"}},{"value":"pocket EMP","sets":{"function":"disruption","legality":"illegal"}},{"value":"tech scanner","sets":{"function":"detection","legality":"legal"}},{"value":"signal jammer","sets":{"function":"interference","legality":"restricted"}},{"value":"hacking deck","sets":{"function":"intrusion","legality":"restricted"}},{"value":"grapple gun","sets":{"function":"mobility","legality":"legal"}},{"value":"medkit","sets":{"function":"healing","legality":"legal"}},{"value":"trauma patch","sets":{"function":"emergency","legality":"legal"}},{"value":"bug detector","sets":{"function":"counter-surveillance","legality":"legal"}},{"value":"voice modulator","sets":{"function":"disguise","legality":"legal"}},{"value":"binoculars with recording","sets":{"function":"surveillance","legality":"legal"}},{"value":"lockbreaker","sets":{"function":"intrusion","legality":"illegal"}}]},{"id":"vehicles","name":"Vehicles","type":"simple","resultType":"item","tags":["vehicles"],"entries":[{"value":"sport motorcycle","sets":{"type":"bike","speed":"extreme","armor":"none","seats":"2"}},{"value":"muscle car","sets":{"type":"car","speed":"high","armor":"light","seats":"4"}},{"value":"armored SUV","sets":{"type":"suv","speed":"moderate","armor":"heavy","seats":"6"}},{"value":"corporate limousine","sets":{"type":"luxury","speed":"moderate","armor":"moderate","seats":"8"}},{"value":"utility van","sets":{"type":"van","speed":"low","armor":"none","seats":"12"}},{"value":"AV-4 aerodyne","sets":{"type":"vtol","speed":"extreme","armor":"light","seats":"4"}},{"value":"combat AV","sets":{"type":"vtol","speed":"high","armor":"military","seats":"6"}},{"value":"street bike","sets":{"type":"bike","speed":"high","armor":"none","seats":"1"}},{"value":"cargo truck","sets":{"type":"truck","speed":"low","armor":"none","seats":"3"}},{"value":"nomad vehicle","sets":{"type":"custom","speed":"moderate","armor":"improvised","seats":"varies"}}]},{"id":"armor","name":"Armor","type":"simple","resultType":"item","tags":["armor","gear"],"entries":[{"value":"leather jacket","sets":{"protection":"minimal","style":"street","conceal":"obvious"}},{"value":"armored vest","sets":{"protection":"light","style":"tactical","conceal":"under clothes"}},{"value":"corporate suit (lined)","sets":{"protection":"light","style":"professional","conceal":"hidden"}},{"value":"flak jacket","sets":{"protection":"medium","style":"military","conceal":"obvious"}},{"value":"metalgear","sets":{"protection":"heavy","style":"combat","conceal":"impossible"}},{"value":"powered armor","sets":{"protection":"extreme","style":"military","conceal":"impossible"}},{"value":"synth-leather coat","sets":{"protection":"minimal","style":"rocker","conceal":"stylish"}},{"value":"ballistic mesh","sets":{"protection":"medium","style":"modern","conceal":"under clothes"}}]},{"id":"streetDrugs","name":"Street Drugs","type":"simple","resultType":"item","tags":["drugs","street"],"entries":[{"value":"black lace","description":"Combat stimulant, highly addictive","sets":{"effect":"aggression boost","risk":"extreme","duration":"short"}},{"value":"syncomp","description":"Pain suppressant","sets":{"effect":"pain negation","risk":"moderate","duration":"medium"}},{"value":"smash","description":"Strength enhancer","sets":{"effect":"strength boost","risk":"high","duration":"short"}},{"value":"boost","description":"Reflex accelerator","sets":{"effect":"speed increase","risk":"moderate","duration":"short"}},{"value":"glitter","description":"Euphoric party drug","sets":{"effect":"euphoria","risk":"low","duration":"medium"}},{"value":"dorph","description":"Synthetic endorphins","sets":{"effect":"pleasure","risk":"high","duration":"long"}},{"value":"blue glass","description":"Perception enhancer","sets":{"effect":"sensory boost","risk":"moderate","duration":"medium"}},{"value":"synthcoke","description":"Stimulant upper","sets":{"effect":"energy boost","risk":"moderate","duration":"medium"}}]},{"id":"streetAppearance","name":"Street Appearance","type":"simple","resultType":"description","tags":["appearance","street"],"entries":[{"value":"covered in gang tattoos and chrome piercings","sets":{"style":"gang"}},{"value":"wearing a battered leather jacket with too many patches","sets":{"style":"rocker"}},{"value":"dressed in salvaged military surplus","sets":{"style":"combat zone"}},{"value":"sporting neon hair and glowing subdermal implants","sets":{"style":"techno"}},{"value":"hidden under layers of patched hoodies and scarves","sets":{"style":"nomad"}},{"value":"wearing obviously fake designer knockoffs","sets":{"style":"wannabe"}},{"value":"dressed in practical work clothes, stained with grease","sets":{"style":"tech"}},{"value":"decked out in garish colors and excessive accessories","sets":{"style":"kitsch"}},{"value":"wearing minimal clothing to show off extensive chrome","sets":{"style":"chromer"}},{"value":"dressed in dark, anonymous clothing to avoid attention","sets":{"style":"gray"}}]},{"id":"corpAppearance","name":"Corporate Appearance","type":"simple","resultType":"description","tags":["appearance","corporate"],"entries":[{"value":"impeccably dressed in designer suit, not a hair out of place","sets":{"style":"executive"}},{"value":"wearing smart-fabric that shifts colors subtly","sets":{"style":"high-tech"}},{"value":"sporting augmented reality glasses and subtle earpiece","sets":{"style":"connected"}},{"value":"dressed in tactical corporate security uniform","sets":{"style":"security"}},{"value":"wearing lab coat over expensive casual wear","sets":{"style":"research"}},{"value":"in a crisp uniform with corporate logo prominently displayed","sets":{"style":"drone"}},{"value":"wearing obviously expensive clothes that scream wealth","sets":{"style":"flex"}},{"value":"dressed conservatively but with subtle quality indicators","sets":{"style":"old money"}}]},{"id":"distinguishingFeatures","name":"Distinguishing Features","type":"simple","resultType":"description","tags":["appearance","features"],"entries":[{"value":"a prominent scar running across {{scarLocations}}"},{"value":"obviously artificial {{cyberEyes}}"},{"value":"a visible {{visibleCyberware}}"},{"value":"extensive tattoos depicting {{tattooSubjects}}"},{"value":"unusual hair: {{hairStyles}}"},{"value":"burn scars covering {{burnLocations}}"},{"value":"hands that shake slightly from stim abuse"},{"value":"an unsettling lack of visible humanity"},{"value":"a distinctive walk from {{walkingFeatures}}"},{"value":"jewelry that's actually {{jewelrySecrets}}"}]},{"id":"scarLocations","name":"Scar Locations","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"the left cheek"},{"value":"the throat"},{"value":"both arms"},{"value":"the back of the head"},{"value":"one eye, now replaced with chrome"}]},{"id":"cyberEyes","name":"Cyber Eyes","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"eyes with glowing red irises"},{"value":"eyes with visible scanning patterns"},{"value":"eyes that are solid chrome"},{"value":"eyes with unnatural neon colors"},{"value":"eyes with visible targeting reticles"},{"value":"mismatched eyes - one organic, one chrome"}]},{"id":"visibleCyberware","name":"Visible Cyberware","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"chrome arm with exposed servos"},{"value":"interface port at the temple"},{"value":"metallic jaw replacement"},{"value":"spine visible through transparent back panel"},{"value":"hand with too-perfect movements"},{"value":"neck full of interface cables"}]},{"id":"tattooSubjects","name":"Tattoo Subjects","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"gang symbols and territory markers"},{"value":"circuit patterns and code fragments"},{"value":"memorial names and death dates"},{"value":"corporate logos and brand icons"},{"value":"traditional Yakuza imagery"},{"value":"glitching animated AR-linked designs"}]},{"id":"hairStyles","name":"Hair Styles","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"neon green mohawk"},{"value":"chrome-threaded braids"},{"value":"color-shifting smart-hair"},{"value":"half-shaved with circuitry patterns"},{"value":"completely absent, replaced with chrome plating"},{"value":"unnaturally perfect corporate styling"}]},{"id":"burnLocations","name":"Burn Locations","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"one side of the face"},{"value":"both hands"},{"value":"the neck and shoulders"},{"value":"most of the torso"}]},{"id":"walkingFeatures","name":"Walking Features","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"a cyberleg with a slight hitch"},{"value":"unnaturally smooth movements from full body replacement"},{"value":"old war wound that never healed right"},{"value":"swagger that says they own the street"}]},{"id":"jewelrySecrets","name":"Jewelry Secrets","type":"simple","hidden":true,"resultType":"description","entries":[{"value":"a hidden blade"},{"value":"an emergency beacon"},{"value":"a data chip concealment"},{"value":"a single-use EMP"},{"value":"a neurotoxin injector"}]},{"id":"personalities","name":"Personalities","type":"simple","resultType":"description","tags":["characters","personality"],"entries":[{"value":"speaks in short, clipped sentences, always scanning for threats","sets":{"type":"paranoid"}},{"value":"radiates false warmth while calculating angles","sets":{"type":"manipulative"}},{"value":"carries themselves with quiet, dangerous confidence","sets":{"type":"professional"}},{"value":"twitchy and fast-talking, probably on stims","sets":{"type":"wired"}},{"value":"eerily calm, emotion seemingly edited out","sets":{"type":"flat"}},{"value":"laughs at inappropriate moments, maybe too much chrome","sets":{"type":"unstable"}},{"value":"world-weary and cynical, seen too much","sets":{"type":"burned out"}},{"value":"idealistic despite everything, still believes in something","sets":{"type":"dreamer"}},{"value":"aggressive and confrontational, looking for a fight","sets":{"type":"hostile"}},{"value":"smooth talker who could sell ice to a polar bear","sets":{"type":"charmer"}},{"value":"quiet and observant, speaks only when necessary","sets":{"type":"watcher"}},{"value":"jovial and friendly, but eyes stay hard","sets":{"type":"mask"}}]},{"id":"motivations","name":"Motivations","type":"simple","resultType":"description","tags":["characters","motivation"],"entries":[{"value":"wants revenge on the corpo who ruined their life"},{"value":"needs money desperately for someone's medical treatment"},{"value":"trying to buy their way out of the combat zone"},{"value":"searching for a family member who disappeared"},{"value":"wants to bring down the system from inside"},{"value":"just trying to survive another day"},{"value":"saving up to get off-world, start fresh"},{"value":"proving themselves to a gang for membership"},{"value":"paying off a massive debt to the wrong people"},{"value":"gathering evidence to expose corporate crimes"},{"value":"hunting the person who killed someone they loved"},{"value":"wants to become legendary, remembered forever"}]},{"id":"streetRoles","name":"Street Roles","type":"simple","resultType":"description","tags":["characters","roles"],"entries":[{"value":"solo","description":"Combat specialist for hire","sets":{"focus":"violence","income":"gigs"}},{"value":"netrunner","description":"Hacker who runs the Net","sets":{"focus":"data","income":"theft"}},{"value":"techie","description":"Repairs and builds tech","sets":{"focus":"machines","income":"services"}},{"value":"fixer","description":"Connects people and resources","sets":{"focus":"connections","income":"percentage"}},{"value":"nomad","description":"Road warrior from the badlands","sets":{"focus":"transport","income":"smuggling"}},{"value":"media","description":"Underground journalist","sets":{"focus":"truth","income":"stories"}},{"value":"rockerboy","description":"Artist with a message","sets":{"focus":"culture","income":"performances"}},{"value":"medtech","description":"Street doctor","sets":{"focus":"healing","income":"medical"}},{"value":"exec","description":"Corporate power player","sets":{"focus":"deals","income":"salary"}},{"value":"lawman","description":"Cop in a lawless world","sets":{"focus":"justice","income":"badge"}}]},{"id":"gigTypes","name":"Gig Types","type":"simple","description":"Types of jobs available on the street","resultType":"description","tags":["gigs","jobs"],"entries":[{"value":"extraction","description":"Get someone out of somewhere they don't want to be","sets":{"risk":"high","type":"retrieval","violence":"likely"}},{"value":"data theft","description":"Steal information from a secured system","sets":{"risk":"medium","type":"theft","violence":"possible"}},{"value":"wetwork","description":"Someone needs to die","sets":{"risk":"extreme","type":"assassination","violence":"certain"}},{"value":"bodyguard","description":"Keep someone alive who has enemies","sets":{"risk":"medium","type":"protection","violence":"likely"}},{"value":"delivery","description":"Move something from A to B, no questions","sets":{"risk":"variable","type":"transport","violence":"possible"}},{"value":"sabotage","description":"Break something important","sets":{"risk":"high","type":"destruction","violence":"possible"}},{"value":"surveillance","description":"Watch someone and report back","sets":{"risk":"low","type":"intelligence","violence":"unlikely"}},{"value":"retrieval","description":"Recover a specific item","sets":{"risk":"medium","type":"theft","violence":"possible"}},{"value":"escort","description":"Get someone from here to there safely","sets":{"risk":"medium","type":"transport","violence":"likely"}},{"value":"investigation","description":"Find out the truth about something","sets":{"risk":"variable","type":"intelligence","violence":"possible"}},{"value":"intimidation","description":"Convince someone to do something they don't want to","sets":{"risk":"low","type":"social","violence":"threatened"}},{"value":"cleanup","description":"Make a problem disappear, no traces","sets":{"risk":"medium","type":"support","violence":"none"}}]},{"id":"gigComplications","name":"Gig Complications","type":"simple","resultType":"description","tags":["gigs","complications"],"entries":[{"value":"The target is not who or what you were told."},{"value":"Another crew is running the same job."},{"value":"Your employer is setting you up."},{"value":"Security is much heavier than expected."},{"value":"A gang claims this is their territory."},{"value":"An old enemy is involved."},{"value":"The payment isn't real."},{"value":"Innocent people are in the line of fire."},{"value":"Corporate counter-intelligence is watching."},{"value":"The job is personal for someone on the team."},{"value":"Local law enforcement has been tipped off."},{"value":"The extraction target doesn't want to leave."},{"value":"Hidden security systems activate."},{"value":"A netrunner is actively opposing you."},{"value":"The real objective was never explained."},{"value":"Multiple complications emerge: {{2*unique*again|\\" Additionally, \\"}}.","weight":1}]},{"id":"gigClients","name":"Gig Clients","type":"simple","resultType":"description","tags":["gigs","contacts"],"entries":[{"value":"a fixer you've worked with before","sets":{"trust":"moderate","pay":"fair"}},{"value":"an anonymous corporate contact","sets":{"trust":"low","pay":"good"}},{"value":"a gang leader needing outside help","sets":{"trust":"variable","pay":"variable"}},{"value":"a desperate civilian with nowhere else to turn","sets":{"trust":"high","pay":"poor"}},{"value":"a rival merc crew needing backup","sets":{"trust":"low","pay":"fair"}},{"value":"a media looking for protection","sets":{"trust":"moderate","pay":"favors"}},{"value":"a ripperdoc who needs something acquired","sets":{"trust":"moderate","pay":"services"}},{"value":"an AI that somehow made contact","sets":{"trust":"unknown","pay":"unusual"}}]},{"id":"gigPayments","name":"Gig Payments","type":"simple","resultType":"description","tags":["gigs","rewards"],"entries":[{"value":"{{dice:1d6*1000}} eddies, half up front"},{"value":"{{dice:2d6*1000}} eddies on completion"},{"value":"a favor from someone connected"},{"value":"high-end cyberware installation"},{"value":"a vehicle, slightly used"},{"value":"data worth more than money"},{"value":"erasure of an outstanding debt"},{"value":"safe passage through hostile territory"},{"value":"introduction to someone powerful"},{"value":"military-grade weapons cache"}]},{"id":"weather","name":"Weather Conditions","type":"simple","resultType":"description","tags":["environment","atmosphere"],"entries":[{"value":"Acid rain falls steadily, eating at exposed metal and skin.","sets":{"severity":"hazardous","visibility":"poor"}},{"value":"Toxic smog blankets everything, requiring filters to breathe.","sets":{"severity":"hazardous","visibility":"terrible"}},{"value":"Clear skies, if you can call the permanent gray haze clear.","sets":{"severity":"normal","visibility":"moderate"}},{"value":"Heavy fog rolls in from the industrial zones.","sets":{"severity":"mild","visibility":"poor"}},{"value":"Unseasonably hot, the heat island effect in full force.","sets":{"severity":"uncomfortable","visibility":"good"}},{"value":"Electromagnetic storm causes AR glitches everywhere.","sets":{"severity":"moderate","visibility":"normal"}},{"value":"Light drizzle, neon lights reflecting beautifully in puddles.","sets":{"severity":"mild","visibility":"moderate"}},{"value":"Wind howls between the towers, carrying garbage and despair.","sets":{"severity":"moderate","visibility":"good"}}]},{"id":"newsHeadlines","name":"News Headlines","type":"simple","resultType":"description","tags":["atmosphere","news"],"entries":[{"value":"BREAKING: {{megaCorporations}} Stock Plunges After Data Breach"},{"value":"Combat Zone Violence Claims {{dice:2d6+5}} Lives Overnight"},{"value":"New Drug Sweeping Streets, Authorities Powerless"},{"value":"Corporate Merger Creates New Megacorp, Thousands Laid Off"},{"value":"NCPD Crackdown in {{districts}} Sparks Riots"},{"value":"Mysterious Net Blackout Affects Entire District"},{"value":"Cyberpsycho Attack Leaves {{dice:1d6+2}} Dead at Mall"},{"value":"Mayor Denies Corruption Allegations, Points to Success Metrics"},{"value":"Traffic Advisory: Nomad Convoy Blocking Highway 101"},{"value":"Warning: Scavenger Activity Reported in {{districts}}"},{"value":"Braindance Addiction Reaches Epidemic Levels"},{"value":"Corporate War Heats Up: Militech vs Arasaka Skirmish Reported"}]},{"id":"rumors","name":"Street Rumors","type":"simple","resultType":"description","tags":["story","rumors"],"entries":[{"value":"Word is {{streetGangs}} is recruiting hard. Something big coming."},{"value":"Heard there's a rogue AI living in the old net infrastructure."},{"value":"{{megaCorporations}} is testing something new in the combat zone. Something bad."},{"value":"A fixer got flatlined last week. The jobs they had are up for grabs."},{"value":"Someone found a pre-war bunker in the badlands. Full of tech."},{"value":"NCPD's been bought out by {{megaCorporations}}. More than usual, I mean."},{"value":"There's a new drug on the streets. Makes black lace look like aspirin."},{"value":"That ripperdoc on 5th? Scav connection. Watch yourself."},{"value":"The mayor's got a body double. Real one's been dead for months."},{"value":"Orbital's got a secret project. Satellite weapons, maybe."},{"value":"Someone's offering big eddies for info on a certain merc crew."},{"value":"The net's been weird lately. Echoes of something old waking up."}]},{"id":"plotHooks","name":"Plot Hooks","type":"simple","resultType":"description","tags":["story","hooks"],"entries":[{"value":"A dying stranger presses a data chip into your hand. \\"Keep it safe. They're coming.\\""},{"value":"Your fixer hasn't been seen in three days. Their last job was for {{megaCorporations}}."},{"value":"An old crew member shows up, desperate. They need help with something they can't explain."},{"value":"Someone's been watching your apartment. Corporate surveillance or something worse?"},{"value":"A client offers triple rates for a simple delivery. Too good to be true."},{"value":"You wake up with {{dice:1d6}} hours missing from your memory and blood on your hands."},{"value":"A child approaches you on the street. \\"Jordan sent me. They need help.\\""},{"value":"Your cyberware starts glitching, showing you glimpses of something else."},{"value":"A notorious gang leader wants a private meeting. No weapons, no backup."},{"value":"An anonymous tip leads to evidence that could bring down a megacorp."},{"value":"Someone's taken out a contract on you. You don't know why."},{"value":"The news reports your death. Someone's erasing you from the system."}]},{"id":"iceTypes","name":"ICE Types","type":"simple","resultType":"description","tags":["netrunning","security"],"entries":[{"value":"password gate","sets":{"threat":"minimal","type":"barrier"}},{"value":"trace program","sets":{"threat":"low","type":"detection"}},{"value":"databomb","sets":{"threat":"medium","type":"trap"}},{"value":"black ICE daemon","sets":{"threat":"high","type":"attack"}},{"value":"neural feedback loop","sets":{"threat":"extreme","type":"lethal"}},{"value":"decoy data structure","sets":{"threat":"none","type":"misdirection"}},{"value":"system alarm","sets":{"threat":"medium","type":"alert"}},{"value":"memory wipe protocol","sets":{"threat":"high","type":"attack"}},{"value":"AI guardian","sets":{"threat":"extreme","type":"intelligent"}},{"value":"reality anchor","sets":{"threat":"medium","type":"trap"}}]},{"id":"netLocations","name":"Net Locations","type":"simple","resultType":"location","tags":["netrunning","locations"],"entries":[{"value":"corporate data fortress","sets":{"security":"extreme","contents":"valuable data"}},{"value":"abandoned server architecture","sets":{"security":"none","contents":"ghosts and echoes"}},{"value":"black market data haven","sets":{"security":"moderate","contents":"illegal goods"}},{"value":"AI core nexus","sets":{"security":"maximum","contents":"artificial intelligence"}},{"value":"government database","sets":{"security":"high","contents":"records and secrets"}},{"value":"old net ruins","sets":{"security":"variable","contents":"pre-war artifacts"}},{"value":"gambling den construct","sets":{"security":"low","contents":"credits and games"}},{"value":"braindance archive","sets":{"security":"moderate","contents":"experiences"}}]},{"id":"hackingTools","name":"Hacking Programs","type":"simple","resultType":"item","tags":["netrunning","programs"],"entries":[{"value":"breach protocol","sets":{"function":"access","legality":"illegal"}},{"value":"daemon killer","sets":{"function":"combat","legality":"illegal"}},{"value":"memory worm","sets":{"function":"theft","legality":"illegal"}},{"value":"ghost in the machine","sets":{"function":"stealth","legality":"illegal"}},{"value":"system reset","sets":{"function":"disruption","legality":"illegal"}},{"value":"ICE pick","sets":{"function":"bypass","legality":"restricted"}},{"value":"trace killer","sets":{"function":"evasion","legality":"legal"}},{"value":"data miner","sets":{"function":"extraction","legality":"restricted"}}]}]`),dA=[{id:"streetNPC",name:"Street NPC",description:"Generates a complete street-level character",resultType:"npc",tags:["characters","street","generator"],shared:{$role:"{{streetRoles}}",$personality:"{{personalities}}",$appearance:"{{streetAppearance}}"},pattern:`## Jordan

**Role:** {{$role}}

**Appearance:** They're {{$appearance}}, with {{distinguishingFeatures}}.

**Personality:** {{$personality}}

**Motivation:** {{motivations}}

**Currently:** Working as a {{$role}}, {{$role.@focus}} is their bread and butter. Their {{$role.@income}} keeps them alive in this city.`},{id:"corpNPC",name:"Corporate NPC",description:"Generates a corporate character",resultType:"npc",tags:["characters","corporate","generator"],shared:{$corp:"{{megaCorporations}}",$title:"{{corpTitles}}",$division:"{{corpDivisions}}",$appearance:"{{corpAppearance}}"},pattern:`## Jordan

**Position:** {{$title}} at {{$corp}}

**Division:** {{$division}}

**Appearance:** {{$appearance}}

**Personality:** {{personalities}}

**Corporate Profile:**
- Works in {{$division.@function}}
- Authority level: {{$title.@authority}}
- Corporation known for: {{$corp.@specialty}}

**What they want:** {{motivations}}`},{id:"gigGenerator",name:"Gig Generator",description:"Creates a complete job/mission",resultType:"description",tags:["gigs","generator"],shared:{$gig:"{{gigTypes}}",$client:"{{gigClients}}",$complication:"{{gigComplications}}",$payment:"{{gigPayments}}"},pattern:`## The Job

**Type:** {{$gig}}

**Risk Level:** {{$gig.@risk}}

**Violence Expected:** {{$gig.@violence}}

### The Client
{{$client}}

**Trust Level:** {{$client.@trust}}

### The Pay
{{$payment}}

### The Twist
{{$complication}}

### Location
The job takes place in {{districts}}. {{locationAtmospheres}}`},{id:"locationDescription",name:"Location Generator",description:"Creates a detailed location",resultType:"location",tags:["locations","generator"],shared:{$district:"{{districts}}",$establishment:"{{establishments}}",$security:"{{securityLevels}}"},pattern:`## {{$establishment}} in {{$district}}

**District Type:** {{$district}}
- Wealth Level: {{$district.@wealth}}
- Standard Security: {{$district.@security}}
- Danger: {{$district.@danger}}

**This Specific Place:**
- Type: {{$establishment.@type}}
- Clientele: {{$establishment.@clientele}}
- Security: {{$establishment.@security}}
- Vibe: {{$establishment.@vibe}}

**Atmosphere:** {{locationAtmospheres}}

**Security Assessment:** {{$security}}`},{id:"gangProfile",name:"Gang Profile",description:"Details about a street gang",resultType:"faction",tags:["gangs","factions","generator"],shared:{$gang:"{{streetGangs}}"},pattern:`## {{$gang}}

**Territory:** {{$gang.@territory}}

**Style:** {{$gang.@style}}

**Reputation:** {{$gang.@reputation}}

**Colors:** {{$gang.@colors}}

**Specialty:** {{$gang.@specialty}}

**Description:** {{$gang.@description}}

### Current Activity
{{rumors}}

### Notable Member
A gang {{gangRoles}} called Jordan - {{personalities}}`},{id:"corpProfile",name:"Corporation Profile",description:"Details about a megacorp",resultType:"faction",tags:["corporations","factions","generator"],shared:{$corp:"{{megaCorporations}}"},pattern:`## {{$corp}}

**Origin:** {{$corp.@origin}}

**Specialty:** {{$corp.@specialty}}

**Reputation:** {{$corp.@reputation}}

**Corporate Colors:** {{$corp.@colors}}

**Security Level:** {{$corp.@security}}

**Description:** {{$corp.@description}}

### Current News
{{newsHeadlines}}

### Key Division
The {{corpDivisions}} is particularly active right now.

### Notable Employee
Jordan, a {{corpTitles}} - {{personalities}}`},{id:"cyberwarePackage",name:"Cyberware Package",description:"A set of cybernetic augmentations",resultType:"item",tags:["cyberware","generator"],shared:{$neural:"{{cyberwareNeural}}",$limb:"{{cyberwareLimbs}}",$sensory:"{{cyberwareSensory}}",$internal:"{{cyberwareInternal}}",$condition:"{{cyberwareConditions}}"},pattern:`## Chrome Package

**Overall Condition:** {{$condition}}

**Quality:** {{$condition.@quality}}

**Reliability:** {{$condition.@reliability}}

### Neural
**{{$neural}}** - {{$neural.@description}}
- Function: {{$neural.@function}}
- Humanity Cost: {{$neural.@humanity}}

### Limbs
**{{$limb}}** - {{$limb.@description}}
- Function: {{$limb.@function}}
- Appearance: {{$limb.@appearance}}

### Sensory
**{{$sensory}}** - {{$sensory.@description}}
- Function: {{$sensory.@function}}

### Internal
**{{$internal}}** - {{$internal.@description}}
- Function: {{$internal.@function}}`},{id:"streetScene",name:"Street Scene",description:"Environmental description of the city",resultType:"description",tags:["atmosphere","environment","generator"],shared:{$district:"{{districts}}",$weather:"{{weather}}"},pattern:`## Night in the City

**Location:** {{$district}}

**Weather:** {{$weather}}

**The Scene:** {{locationAtmospheres}}

**Visibility:** {{$weather.@visibility}}

**What You Notice:**
- {{3*unique*locationAtmospheres|"\\n- "}}

**Headlines scrolling on a nearby display:**
{{newsHeadlines}}

**What people are saying:**
"{{rumors}}"`},{id:"quickNPC",name:"Quick NPC",description:"Fast NPC generation",resultType:"npc",tags:["characters","quick"],pattern:"**Jordan** - {{streetRoles}}, {{streetAppearance}}, {{personalities}}"},{id:"quickCorpNPC",name:"Quick Corp NPC",description:"Fast corporate NPC generation",resultType:"npc",tags:["characters","corporate","quick"],pattern:"**Jordan** - {{corpTitles}} at {{megaCorporations}}, {{corpAppearance}}, {{personalities}}"},{id:"sessionStarter",name:"Session Starter",description:"Opening scenario for a game session",resultType:"description",tags:["story","generator"],shared:{$hook:"{{plotHooks}}",$district:"{{districts}}",$weather:"{{weather}}"},pattern:`## Session Opening

### The Weather
{{$weather}}

### The Location
{{$district}} - {{$district.@atmosphere}}

### The Hook
{{$hook}}

### What's In The News
{{newsHeadlines}}

### Street Talk
"{{rumors}}"

### Potential Complication
{{gigComplications}}`},{id:"netrunEncounter",name:"Netrunning Encounter",description:"What you find in the Net",resultType:"encounter",tags:["netrunning","generator"],shared:{$location:"{{netLocations}}",$ice:"{{iceTypes}}"},pattern:`## In The Net

**Location:** {{$location}}

**Security Level:** {{$location.@security}}

**What's Here:** {{$location.@contents}}

### Defenses Encountered
- Primary: {{$ice}} ({{$ice.@threat}} threat, {{$ice.@type}} type)
- Secondary: {{iceTypes}}
- Tertiary: {{iceTypes}}

### Available Programs
You've got {{hackingTools}} ready to deploy.`},{id:"vehicleDescription",name:"Vehicle Description",description:"Details about a vehicle",resultType:"item",tags:["vehicles","generator"],shared:{$vehicle:"{{vehicles}}"},pattern:`## The Ride

**Type:** {{$vehicle}}

**Speed:** {{$vehicle.@speed}}

**Armor:** {{$vehicle.@armor}}

**Seats:** {{$vehicle.@seats}}

**Condition:** {{cyberwareConditions}}

**Notable Features:**
- {{distinguishingFeatures}}
- {{techGear}} installed`},{id:"combatLoadout",name:"Combat Loadout",description:"Weapons and armor for a character",resultType:"item",tags:["combat","gear","generator"],shared:{$ranged:"{{weaponsRanged}}",$melee:"{{weaponsMelee}}",$armor:"{{armor}}"},pattern:`## Loadout

### Primary Weapon
**{{$ranged}}**
- Type: {{$ranged.@type}}
- Damage: {{$ranged.@damage}}
- Concealability: {{$ranged.@conceal}}

### Backup Weapon
**{{$melee}}**
- Type: {{$melee.@type}}
- Damage: {{$melee.@damage}}
- Style: {{$melee.@style}}

### Protection
**{{$armor}}**
- Protection: {{$armor.@protection}}
- Style: {{$armor.@style}}
- Concealability: {{$armor.@conceal}}

### Additional Gear
- {{techGear}}
- {{techGear}}`},{id:"fixerContact",name:"Fixer Contact",description:"A fixer NPC with their specialty",resultType:"npc",tags:["characters","contacts","generator"],shared:{$type:"{{fixerTypes}}"},pattern:`## Jordan the Fixer

**Specialty:** {{$type}}

**What they do:** {{$type.@description}}

**Connections:** {{$type.@connections}}

**Appearance:** {{streetAppearance}}, with {{distinguishingFeatures}}

**Personality:** {{personalities}}

**Their Cut:** Usually {{dice:1d6+4}}% of the take

**Where to find them:** A {{establishments}} in {{districts}}`}],pA={metadata:oA,variables:lA,shared:cA,tables:uA,templates:dA},hA={name:"Cyberpunk NPC Generator",namespace:"rolldeo.cyberpunk.npc",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A comprehensive **name generator** for cyberpunk settings. Includes culturally diverse first names and surnames (Japanese, Chinese, Latino, Slavic, American, African, Korean), street handles, gang-specific names, corporate employee names, AI designations, nomad clan names, and netrunner handles. Supports gender-aware generation with templates for complete character identities.",tags:["cyberpunk","names","generator","npc","characters","multicultural"],source:{license:"CC0-1.0",copyright:"Rolldeo - Free for any use"}},mA={defaultSeparator:", "},fA=JSON.parse('[{"id":"gender","name":"Gender","type":"simple","hidden":true,"resultType":"trait","entries":[{"id":"male","value":"male"},{"id":"female","value":"female"},{"id":"nb","value":"non-binary","weight":0.5}]},{"id":"culture","name":"Cultural Background","type":"simple","description":"Cultural backgrounds common in cyberpunk megacities","resultType":"trait","tags":["culture"],"entries":[{"id":"japanese","value":"Japanese","weight":2,"sets":{"maleNames":"{{japaneseMaleNames}}","femaleNames":"{{japaneseFemaleNames}}","surnames":"{{japaneseSurnames}}","region":"Pacific Rim"}},{"id":"chinese","value":"Chinese","weight":2,"sets":{"maleNames":"{{chineseMaleNames}}","femaleNames":"{{chineseFemaleNames}}","surnames":"{{chineseSurnames}}","region":"Pacific Rim"}},{"id":"latino","value":"Latino","weight":3,"sets":{"maleNames":"{{latinoMaleNames}}","femaleNames":"{{latinoFemaleNames}}","surnames":"{{latinoSurnames}}","region":"Americas"}},{"id":"slavic","value":"Slavic","weight":2,"sets":{"maleNames":"{{slavicMaleNames}}","femaleNames":"{{slavicFemaleNames}}","surnames":"{{slavicSurnames}}","region":"Eastern Europe"}},{"id":"american","value":"American","weight":3,"sets":{"maleNames":"{{americanMaleNames}}","femaleNames":"{{americanFemaleNames}}","surnames":"{{americanSurnames}}","region":"North America"}},{"id":"african","value":"African","weight":2,"sets":{"maleNames":"{{africanMaleNames}}","femaleNames":"{{africanFemaleNames}}","surnames":"{{africanSurnames}}","region":"African Diaspora"}},{"id":"korean","value":"Korean","weight":1.5,"sets":{"maleNames":"{{koreanMaleNames}}","femaleNames":"{{koreanFemaleNames}}","surnames":"{{koreanSurnames}}","region":"Pacific Rim"}}]},{"id":"japaneseMaleNames","name":"Japanese Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Akira"},{"value":"Daiki"},{"value":"Haruki"},{"value":"Hiroshi"},{"value":"Kazuki"},{"value":"Kenji"},{"value":"Koji"},{"value":"Makoto"},{"value":"Masaru"},{"value":"Noboru"},{"value":"Ryo"},{"value":"Shinji"},{"value":"Takeshi"},{"value":"Taro"},{"value":"Yuki"},{"value":"Kaito"},{"value":"Ren"},{"value":"Satoshi"},{"value":"Hideo"},{"value":"Ichiro"}]},{"id":"japaneseFemaleNames","name":"Japanese Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Aiko"},{"value":"Akemi"},{"value":"Hanako"},{"value":"Hana"},{"value":"Kaori"},{"value":"Keiko"},{"value":"Kimiko"},{"value":"Mariko"},{"value":"Michiko"},{"value":"Mika"},{"value":"Misaki"},{"value":"Naomi"},{"value":"Sakura"},{"value":"Sayuri"},{"value":"Yoko"},{"value":"Yumi"},{"value":"Rei"},{"value":"Asuka"},{"value":"Midori"},{"value":"Emi"}]},{"id":"japaneseSurnames","name":"Japanese Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Arasaka"},{"value":"Fujimoto"},{"value":"Hayashi"},{"value":"Ito"},{"value":"Kimura"},{"value":"Kobayashi"},{"value":"Matsuda"},{"value":"Mori"},{"value":"Nakamura"},{"value":"Ogawa"},{"value":"Saito"},{"value":"Suzuki"},{"value":"Takahashi"},{"value":"Tanaka"},{"value":"Watanabe"},{"value":"Yamamoto"},{"value":"Yoshida"},{"value":"Sato"},{"value":"Kato"},{"value":"Ishikawa"}]},{"id":"chineseMaleNames","name":"Chinese Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Bo"},{"value":"Chen"},{"value":"Feng"},{"value":"Gang"},{"value":"Hao"},{"value":"Jian"},{"value":"Jun"},{"value":"Lei"},{"value":"Long"},{"value":"Ming"},{"value":"Peng"},{"value":"Qiang"},{"value":"Wei"},{"value":"Xiang"},{"value":"Yang"},{"value":"Zhen"},{"value":"Tao"},{"value":"Liang"},{"value":"Chao"},{"value":"Dong"}]},{"id":"chineseFemaleNames","name":"Chinese Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Mei"},{"value":"Lin"},{"value":"Xiu"},{"value":"Hua"},{"value":"Jing"},{"value":"Lan"},{"value":"Li"},{"value":"Na"},{"value":"Ping"},{"value":"Qian"},{"value":"Rui"},{"value":"Shan"},{"value":"Ting"},{"value":"Xia"},{"value":"Yan"},{"value":"Zhi"},{"value":"Fang"},{"value":"Hong"},{"value":"Yue"},{"value":"Shu"}]},{"id":"chineseSurnames","name":"Chinese Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Chen"},{"value":"Huang"},{"value":"Kang"},{"value":"Li"},{"value":"Liu"},{"value":"Sun"},{"value":"Wang"},{"value":"Wu"},{"value":"Xu"},{"value":"Yang"},{"value":"Zhang"},{"value":"Zhao"},{"value":"Zhou"},{"value":"Zhu"},{"value":"Guo"},{"value":"Ma"},{"value":"Hu"},{"value":"Lin"},{"value":"Luo"},{"value":"Tao"}]},{"id":"latinoMaleNames","name":"Latino Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Alejandro"},{"value":"Antonio"},{"value":"Carlos"},{"value":"Diego"},{"value":"Eduardo"},{"value":"Fernando"},{"value":"Gabriel"},{"value":"Hector"},{"value":"Javier"},{"value":"Jorge"},{"value":"Luis"},{"value":"Manuel"},{"value":"Miguel"},{"value":"Oscar"},{"value":"Pablo"},{"value":"Rafael"},{"value":"Ricardo"},{"value":"Santiago"},{"value":"Victor"},{"value":"Xavier"}]},{"id":"latinoFemaleNames","name":"Latino Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ana"},{"value":"Carmen"},{"value":"Catalina"},{"value":"Elena"},{"value":"Esperanza"},{"value":"Gabriela"},{"value":"Isabella"},{"value":"Lucia"},{"value":"Maria"},{"value":"Marisol"},{"value":"Natalia"},{"value":"Patricia"},{"value":"Rosa"},{"value":"Selena"},{"value":"Sofia"},{"value":"Teresa"},{"value":"Valentina"},{"value":"Victoria"},{"value":"Camila"},{"value":"Daniela"}]},{"id":"latinoSurnames","name":"Latino Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Alvarez"},{"value":"Castro"},{"value":"Delgado"},{"value":"Diaz"},{"value":"Fernandez"},{"value":"Garcia"},{"value":"Gonzalez"},{"value":"Gutierrez"},{"value":"Hernandez"},{"value":"Lopez"},{"value":"Martinez"},{"value":"Morales"},{"value":"Ortiz"},{"value":"Ramirez"},{"value":"Rivera"},{"value":"Rodriguez"},{"value":"Sanchez"},{"value":"Torres"},{"value":"Vargas"},{"value":"Vega"}]},{"id":"slavicMaleNames","name":"Slavic Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Aleksei"},{"value":"Andrei"},{"value":"Boris"},{"value":"Dmitri"},{"value":"Grigori"},{"value":"Igor"},{"value":"Ivan"},{"value":"Konstantin"},{"value":"Maksim"},{"value":"Mikhail"},{"value":"Nikolai"},{"value":"Oleg"},{"value":"Pavel"},{"value":"Sergei"},{"value":"Viktor"},{"value":"Vladimir"},{"value":"Yuri"},{"value":"Vadim"},{"value":"Roman"},{"value":"Stanislav"}]},{"id":"slavicFemaleNames","name":"Slavic Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Anastasia"},{"value":"Daria"},{"value":"Elena"},{"value":"Irina"},{"value":"Katya"},{"value":"Lena"},{"value":"Mila"},{"value":"Nadia"},{"value":"Natasha"},{"value":"Olga"},{"value":"Polina"},{"value":"Svetlana"},{"value":"Tatiana"},{"value":"Vera"},{"value":"Yelena"},{"value":"Zoya"},{"value":"Anya"},{"value":"Katarina"},{"value":"Sasha"},{"value":"Valentina"}]},{"id":"slavicSurnames","name":"Slavic Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Antonov"},{"value":"Federov"},{"value":"Ivanov"},{"value":"Kozlov"},{"value":"Kuznetsov"},{"value":"Morozov"},{"value":"Novikov"},{"value":"Orlov"},{"value":"Petrov"},{"value":"Popov"},{"value":"Romanov"},{"value":"Smirnov"},{"value":"Sokolov"},{"value":"Volkov"},{"value":"Yegorov"},{"value":"Zaitsev"},{"value":"Chernikov"},{"value":"Kovalenko"},{"value":"Polzin"},{"value":"Reznikov"}]},{"id":"americanMaleNames","name":"American Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Adam"},{"value":"Blake"},{"value":"Brandon"},{"value":"Chad"},{"value":"Chris"},{"value":"Cole"},{"value":"Derek"},{"value":"Dylan"},{"value":"Ethan"},{"value":"Jake"},{"value":"Jason"},{"value":"Kyle"},{"value":"Marcus"},{"value":"Mason"},{"value":"Nathan"},{"value":"Ryan"},{"value":"Travis"},{"value":"Tyler"},{"value":"Wyatt"},{"value":"Zack"}]},{"id":"americanFemaleNames","name":"American Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ashley"},{"value":"Brittany"},{"value":"Chelsea"},{"value":"Dakota"},{"value":"Emma"},{"value":"Hannah"},{"value":"Heather"},{"value":"Jennifer"},{"value":"Jessica"},{"value":"Jordan"},{"value":"Kaylee"},{"value":"Madison"},{"value":"Megan"},{"value":"Morgan"},{"value":"Nicole"},{"value":"Olivia"},{"value":"Rachel"},{"value":"Samantha"},{"value":"Taylor"},{"value":"Zoe"}]},{"id":"americanSurnames","name":"American Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Anderson"},{"value":"Brown"},{"value":"Campbell"},{"value":"Carter"},{"value":"Clark"},{"value":"Davis"},{"value":"Edwards"},{"value":"Foster"},{"value":"Gray"},{"value":"Harris"},{"value":"Jackson"},{"value":"Johnson"},{"value":"Miller"},{"value":"Mitchell"},{"value":"Morgan"},{"value":"Parker"},{"value":"Ross"},{"value":"Smith"},{"value":"Thompson"},{"value":"Williams"}]},{"id":"africanMaleNames","name":"African Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Adebayo"},{"value":"Chidi"},{"value":"Darius"},{"value":"Emeka"},{"value":"Femi"},{"value":"Jabari"},{"value":"Jamal"},{"value":"Kofi"},{"value":"Kwame"},{"value":"Malik"},{"value":"Musa"},{"value":"Oba"},{"value":"Olumide"},{"value":"Sekou"},{"value":"Tariq"},{"value":"Tunde"},{"value":"Uche"},{"value":"Yusuf"},{"value":"Zuberi"},{"value":"Amadi"}]},{"id":"africanFemaleNames","name":"African Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Aisha"},{"value":"Amara"},{"value":"Chioma"},{"value":"Fatima"},{"value":"Imani"},{"value":"Keisha"},{"value":"Makena"},{"value":"Nia"},{"value":"Nkechi"},{"value":"Nneka"},{"value":"Ogechi"},{"value":"Sanaa"},{"value":"Sade"},{"value":"Thandiwe"},{"value":"Yetunde"},{"value":"Zara"},{"value":"Adaeze"},{"value":"Ebele"},{"value":"Folami"},{"value":"Kaya"}]},{"id":"africanSurnames","name":"African Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Adeyemi"},{"value":"Diallo"},{"value":"Eze"},{"value":"Ibrahim"},{"value":"Jalloh"},{"value":"Kone"},{"value":"Mensah"},{"value":"Mwangi"},{"value":"Ndlovu"},{"value":"Nwosu"},{"value":"Okafor"},{"value":"Okonkwo"},{"value":"Olawale"},{"value":"Osei"},{"value":"Oyewole"},{"value":"Toure"},{"value":"Uzoma"},{"value":"Wanjiku"},{"value":"Diop"},{"value":"Achebe"}]},{"id":"koreanMaleNames","name":"Korean Male Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Byung-ho"},{"value":"Dae-jung"},{"value":"Dong-woo"},{"value":"Hwan"},{"value":"Hyun"},{"value":"Jae-min"},{"value":"Jin"},{"value":"Jong-su"},{"value":"Jun-seo"},{"value":"Ki-tae"},{"value":"Min-ho"},{"value":"Sang-woo"},{"value":"Seok-jin"},{"value":"Soo-hyun"},{"value":"Sung"},{"value":"Tae-yong"},{"value":"Won"},{"value":"Woo-jin"},{"value":"Yong"},{"value":"Young-ho"}]},{"id":"koreanFemaleNames","name":"Korean Female Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Bo-young"},{"value":"Da-som"},{"value":"Eun-ji"},{"value":"Ha-na"},{"value":"Hye-jin"},{"value":"Ji-woo"},{"value":"Ji-yeon"},{"value":"Min-ji"},{"value":"Na-yeon"},{"value":"Se-ra"},{"value":"Seo-yeon"},{"value":"So-yeon"},{"value":"Soo-min"},{"value":"Sun-hee"},{"value":"Yeon"},{"value":"Yoon-ah"},{"value":"Yu-jin"},{"value":"Hana"},{"value":"Mina"},{"value":"Suji"}]},{"id":"koreanSurnames","name":"Korean Surnames","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Ahn"},{"value":"Bae"},{"value":"Cho"},{"value":"Choi"},{"value":"Han"},{"value":"Hong"},{"value":"Hwang"},{"value":"Jang"},{"value":"Jung"},{"value":"Kang"},{"value":"Kim"},{"value":"Lee"},{"value":"Lim"},{"value":"Oh"},{"value":"Park"},{"value":"Shin"},{"value":"Song"},{"value":"Yang"},{"value":"Yoon"},{"value":"Seo"}]},{"id":"streetHandlesTech","name":"Tech Handles","type":"simple","hidden":true,"resultType":"name","tags":["handles","tech"],"entries":[{"value":"Glitch"},{"value":"Pixel"},{"value":"Binary"},{"value":"Cipher"},{"value":"Zero"},{"value":"Hex"},{"value":"Byte"},{"value":"Vector"},{"value":"Node"},{"value":"Crash"},{"value":"Static"},{"value":"Proxy"},{"value":"Cache"},{"value":"Bit"},{"value":"Loop"},{"value":"Ping"},{"value":"Null"},{"value":"Debug"},{"value":"Patch"},{"value":"Codec"}]},{"id":"streetHandlesViolence","name":"Violence Handles","type":"simple","hidden":true,"resultType":"name","tags":["handles","violence"],"entries":[{"value":"Razor"},{"value":"Bullet"},{"value":"Switchblade"},{"value":"Shrapnel"},{"value":"Trigger"},{"value":"Reaper"},{"value":"Havoc"},{"value":"Damage"},{"value":"Carnage"},{"value":"Slash"},{"value":"Ripper"},{"value":"Breaker"},{"value":"Hammer"},{"value":"Blitz"},{"value":"Striker"},{"value":"Wrecker"},{"value":"Shank"},{"value":"Splinter"},{"value":"Caliber"},{"value":"Mauler"}]},{"id":"streetHandlesAnimal","name":"Animal Handles","type":"simple","hidden":true,"resultType":"name","tags":["handles","animal"],"entries":[{"value":"Viper"},{"value":"Raven"},{"value":"Wolf"},{"value":"Jackal"},{"value":"Spider"},{"value":"Scorpion"},{"value":"Cobra"},{"value":"Hawk"},{"value":"Panther"},{"value":"Shark"},{"value":"Tiger"},{"value":"Fox"},{"value":"Mantis"},{"value":"Hornet"},{"value":"Raptor"},{"value":"Coyote"},{"value":"Gecko"},{"value":"Lynx"},{"value":"Mongoose"},{"value":"Barracuda"}]},{"id":"streetHandlesAbstract","name":"Abstract Handles","type":"simple","hidden":true,"resultType":"name","tags":["handles","abstract"],"entries":[{"value":"Ghost"},{"value":"Shadow"},{"value":"Neon"},{"value":"Chrome"},{"value":"Void"},{"value":"Echo"},{"value":"Specter"},{"value":"Phantom"},{"value":"Mirage"},{"value":"Drift"},{"value":"Flash"},{"value":"Fade"},{"value":"Shade"},{"value":"Blur"},{"value":"Pulse"},{"value":"Haze"},{"value":"Flicker"},{"value":"Edge"},{"value":"Prism"},{"value":"Nova"}]},{"id":"streetHandlesPrefixes","name":"Handle Prefixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Cyber"},{"value":"Neo"},{"value":"Black"},{"value":"Red"},{"value":"Night"},{"value":"Steel"},{"value":"Chrome"},{"value":"Ice"},{"value":"Dark"},{"value":"Digi"},{"value":"Data"},{"value":"Hard"},{"value":"Synth"},{"value":"Wire"},{"value":"Tech"}]},{"id":"streetHandlesSuffixes","name":"Handle Suffixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"jack"},{"value":"burn"},{"value":"wire"},{"value":"spike"},{"value":"storm"},{"value":"kill"},{"value":"run"},{"value":"break"},{"value":"head"},{"value":"fist"},{"value":"blade"},{"value":"wolf"},{"value":"fire"},{"value":"punk"},{"value":"core"}]},{"id":"streetHandles","name":"Street Handles","type":"simple","description":"Nicknames used on the street","resultType":"name","tags":["handles"],"entries":[{"value":"{{streetHandlesTech}}","weight":3},{"value":"{{streetHandlesViolence}}","weight":3},{"value":"{{streetHandlesAnimal}}","weight":2},{"value":"{{streetHandlesAbstract}}","weight":3},{"value":"{{streetHandlesPrefixes}}{{streetHandlesSuffixes}}","weight":2}]},{"id":"maelstromHandles","name":"Maelstrom Handles","type":"simple","hidden":true,"resultType":"name","description":"Dehumanized names for the chrome-obsessed","entries":[{"value":"Unit-{{dice:1d999}}"},{"value":"Process-{{dice:1d99}}"},{"value":"Borg-{{dice:1d99}}"},{"value":"Chrome-{{dice:1d999}}"},{"value":"Mech-{{dice:1d99}}"},{"value":"Optic"},{"value":"Servo"},{"value":"Piston"},{"value":"Grinder"},{"value":"Torque"},{"value":"Flatline"},{"value":"Rotor"},{"value":"Module"},{"value":"Render"},{"value":"Format"}]},{"id":"tygerClawsHandles","name":"Tyger Claws Handles","type":"simple","hidden":true,"resultType":"name","description":"Japanese-influenced gang names","entries":[{"value":"Oni"},{"value":"Kitsune"},{"value":"Tengu"},{"value":"Ryu"},{"value":"Yasha"},{"value":"Hannya"},{"value":"Raijin"},{"value":"Fujin"},{"value":"Kappa"},{"value":"Shinobi"},{"value":"Ronin"},{"value":"Kenshi"},{"value":"Akuma"},{"value":"Kaiju"},{"value":"Yokai"}]},{"id":"valentinosHandles","name":"Valentinos Handles","type":"simple","hidden":true,"resultType":"name","description":"Spanish-influenced gang names","entries":[{"value":"El Tigre"},{"value":"La Muerte"},{"value":"El Diablo"},{"value":"Corazon"},{"value":"El Lobo"},{"value":"Sangre"},{"value":"Fuego"},{"value":"El Santo"},{"value":"La Sombra"},{"value":"El Chingon"},{"value":"Oro"},{"value":"Veneno"},{"value":"El Rey"},{"value":"La Reina"},{"value":"Trueno"}]},{"id":"sixthStreetHandles","name":"6th Street Handles","type":"simple","hidden":true,"resultType":"name","description":"Military callsign style names","entries":[{"value":"Bravo"},{"value":"Delta"},{"value":"Foxtrot"},{"value":"Gunner"},{"value":"Sergeant"},{"value":"Corporal"},{"value":"Patriot"},{"value":"Eagle"},{"value":"Maverick"},{"value":"Tango"},{"value":"Oscar"},{"value":"Romeo"},{"value":"Whiskey"},{"value":"Yankee"},{"value":"Zulu"}]},{"id":"voodooBoysHandles","name":"Voodoo Boys Handles","type":"simple","hidden":true,"resultType":"name","description":"Haitian/mystical netrunner names","entries":[{"value":"Baron"},{"value":"Legba"},{"value":"Mambo"},{"value":"Loa"},{"value":"Samedi"},{"value":"Gede"},{"value":"Houngan"},{"value":"Zombi"},{"value":"Petro"},{"value":"Rada"},{"value":"Erzulie"},{"value":"Ogoun"},{"value":"Damballa"},{"value":"Ti-Jean"},{"value":"Marassa"}]},{"id":"gangHandles","name":"Gang Handles","type":"simple","description":"Gang-specific nicknames","resultType":"name","tags":["handles","gangs"],"entries":[{"id":"maelstrom","value":"{{maelstromHandles}}","sets":{"gang":"Maelstrom"}},{"id":"tygerClaws","value":"{{tygerClawsHandles}}","sets":{"gang":"Tyger Claws"}},{"id":"valentinos","value":"{{valentinosHandles}}","sets":{"gang":"Valentinos"}},{"id":"sixthStreet","value":"{{sixthStreetHandles}}","sets":{"gang":"6th Street"}},{"id":"voodooBoys","value":"{{voodooBoysHandles}}","sets":{"gang":"Voodoo Boys"}},{"id":"generic","value":"{{streetHandles}}","weight":3,"sets":{"gang":"Other"}}]},{"id":"netrunnerPrefixes","name":"Netrunner Prefixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Alt"},{"value":"Sys"},{"value":"Root"},{"value":"Net"},{"value":"Deep"},{"value":"Ghost"},{"value":"Black"},{"value":"Ice"},{"value":"Decker"},{"value":"Spider"},{"value":"Daemon"},{"value":"Hack"},{"value":"Rogue"},{"value":"Phantom"},{"value":"Virtual"}]},{"id":"netrunnerSuffixes","name":"Netrunner Suffixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"runner"},{"value":"crawler"},{"value":"walker"},{"value":"breaker"},{"value":"diver"},{"value":"weaver"},{"value":"rider"},{"value":"surfer"},{"value":"dancer"},{"value":"shadow"},{"value":"wraith"},{"value":"demon"},{"value":"angel"},{"value":"killer"},{"value":"jack"}]},{"id":"netrunnerHandles","name":"Netrunner Handles","type":"simple","description":"Handles for hackers and netrunners","resultType":"name","tags":["handles","netrunner"],"entries":[{"value":"{{netrunnerPrefixes}}{{netrunnerSuffixes}}","weight":3},{"value":"{{streetHandlesTech}}","weight":2},{"value":"{{streetHandlesAbstract}}","weight":2},{"value":"Bartmoss Jr."},{"value":"Spider Murphy"},{"value":"Rache_{{dice:1d99}}"},{"value":"0x{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}"}]},{"id":"aiDesignationPrefixes","name":"AI Designation Prefixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"ARIA"},{"value":"ATLAS"},{"value":"ECHO"},{"value":"IRIS"},{"value":"NOVA"},{"value":"ORACLE"},{"value":"PRISM"},{"value":"SAGE"},{"value":"TITAN"},{"value":"VECTOR"},{"value":"ZENITH"},{"value":"APEX"},{"value":"CIPHER"},{"value":"NEXUS"},{"value":"SPECTER"}]},{"id":"aiDesignationSuffixes","name":"AI Designation Suffixes","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"-7"},{"value":"-9"},{"value":"-X"},{"value":"-PRIME"},{"value":"-ALPHA"},{"value":"-OMEGA"},{"value":"-NULL"},{"value":"-CORE"},{"value":".exe"},{"value":".sys"},{"value":"//MAIN"},{"value":"::ROOT"}]},{"id":"aiNames","name":"AI Names","type":"simple","description":"Names for artificial intelligences","resultType":"name","tags":["ai","names"],"entries":[{"value":"{{aiDesignationPrefixes}}{{aiDesignationSuffixes}}","weight":3},{"value":"{{aiDesignationPrefixes}}-{{dice:1d999}}","weight":2},{"value":"Project {{aiDesignationPrefixes}}","weight":1},{"value":"Soulkiller Fragment"},{"value":"Beyond the Blackwall"},{"value":"The Watcher"},{"value":"Construct {{dice:1d99}}"},{"value":"Legacy Protocol"},{"value":"Relic {{dice:1d9}}.{{dice:1d9}}"}]},{"id":"nomadClanNames","name":"Nomad Clan Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Aldecaldos"},{"value":"Wraiths"},{"value":"Snake Nation"},{"value":"Jodes"},{"value":"Thelas"},{"value":"Meta"},{"value":"Raffen Shiv"},{"value":"Blood Nation"},{"value":"Storm Riders"},{"value":"Dust Devils"},{"value":"Road Warriors"},{"value":"Iron Wolves"},{"value":"Chrome Gypsies"},{"value":"Badland Kings"},{"value":"Highway Saints"}]},{"id":"nomadRoadNames","name":"Nomad Road Names","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Dusty"},{"value":"Wheels"},{"value":"Axle"},{"value":"Rust"},{"value":"Gear"},{"value":"Diesel"},{"value":"Blacktop"},{"value":"Crankshaft"},{"value":"Roadkill"},{"value":"Burnout"},{"value":"Throttle"},{"value":"Clutch"},{"value":"Scrap"},{"value":"Hauler"},{"value":"Grease"},{"value":"Tread"},{"value":"Piston"},{"value":"Sandstorm"},{"value":"Sundown"},{"value":"Drifter"}]},{"id":"corpEmployeeIds","name":"Corporate Employee IDs","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"EMP-{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}"},{"value":"EXEC-{{dice:1d999}}"},{"value":"STAFF-{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}"},{"value":"SEC-{{dice:1d9999}}"},{"value":"R&D-{{dice:1d999}}"},{"value":"OPS-{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}{{dice:1d9}}"}]},{"id":"corpAffiliations","name":"Corporate Affiliations","type":"simple","hidden":true,"resultType":"name","entries":[{"value":"Arasaka"},{"value":"Militech"},{"value":"Kang-Tao"},{"value":"Biotechnica"},{"value":"Zetatech"},{"value":"Trauma Team"},{"value":"Petrochem"},{"value":"Network News 54"},{"value":"Orbital Air"},{"value":"Continental Brands"}]},{"id":"allFirstNamesMale","name":"All Male First Names","type":"collection","hidden":true,"resultType":"name","collections":["japaneseMaleNames","chineseMaleNames","latinoMaleNames","slavicMaleNames","americanMaleNames","africanMaleNames","koreanMaleNames"]},{"id":"allFirstNamesFemale","name":"All Female First Names","type":"collection","hidden":true,"resultType":"name","collections":["japaneseFemaleNames","chineseFemaleNames","latinoFemaleNames","slavicFemaleNames","americanFemaleNames","africanFemaleNames","koreanFemaleNames"]},{"id":"allSurnames","name":"All Surnames","type":"collection","hidden":true,"resultType":"name","collections":["japaneseSurnames","chineseSurnames","latinoSurnames","slavicSurnames","americanSurnames","africanSurnames","koreanSurnames"]},{"id":"allHandles","name":"All Handles","type":"collection","description":"All types of street handles combined","resultType":"name","tags":["handles"],"collections":["streetHandlesTech","streetHandlesViolence","streetHandlesAnimal","streetHandlesAbstract"]}]'),gA=[{id:"fullStreetName",name:"Full Street Name",description:"Generates a complete street identity with cultural first name, surname, and handle",resultType:"name",tags:["names","street","generator"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}",$handle:"{{streetHandles}}"},pattern:`## {{$firstName}} "{{$handle}}" {{$surname}}

**Legal Name:** {{$firstName}} {{$surname}}

**Street Handle:** {{$handle}}

**Cultural Background:** {{$culture}} ({{$culture.@region}})

**Gender:** {{$gender}}`},{id:"corpEmployeeName",name:"Corporate Employee Name",description:"Generates a corporate employee with formal name and ID",resultType:"name",tags:["names","corporate","generator"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}",$corp:"{{corpAffiliations}}",$id:"{{corpEmployeeIds}}"},pattern:`## {{$surname}}, {{$firstName}}

**Full Name:** {{$firstName}} {{$surname}}

**Corporation:** {{$corp}}

**Employee ID:** {{$id}}

**Cultural Background:** {{$culture}}

**Gender:** {{$gender}}`},{id:"gangMemberName",name:"Gang Member Name",description:"Generates a gang member with gang-appropriate handle",resultType:"name",tags:["names","gang","generator"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}",$gangHandle:"{{gangHandles}}"},pattern:`## "{{$gangHandle}}"\\n\\n**Street Name:** {{$gangHandle}}

**Legal Name:** {{$firstName}} {{$surname}}

**Gang Affiliation:** {{$gangHandle.@gang}}

**Cultural Background:** {{$culture}}

**Gender:** {{$gender}}`},{id:"netrunnerIdentity",name:"Netrunner Identity",description:"Generates a netrunner with handle and real identity",resultType:"name",tags:["names","netrunner","generator"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}",$handle:"{{netrunnerHandles}}"},pattern:`## {{$handle}}

**Net Handle:** {{$handle}}

**Meatspace Identity:** {{$firstName}} {{$surname}}

**Cultural Background:** {{$culture}}

**Gender:** {{$gender}}

**Secondary Handles:**
- {{netrunnerHandles}}
- {{netrunnerHandles}}`},{id:"aiEntity",name:"AI Entity",description:"Generates an artificial intelligence designation",resultType:"name",tags:["names","ai","generator"],shared:{$designation:"{{aiNames}}"},pattern:`## {{$designation}}

**Primary Designation:** {{$designation}}

**Alternative Designations:**
- {{aiNames}}
- {{aiNames}}

**Classification:** {{switch[true:"Unbound AI|Corporate AI|Military AI|Research AI"]}}{{switch[$designation contains "Soulkiller":" (EXTREMELY DANGEROUS - BLACKWALL THREAT)"]}}`},{id:"nomadName",name:"Nomad Name",description:"Generates a nomad with clan affiliation and road name",resultType:"name",tags:["names","nomad","generator"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}",$roadName:"{{nomadRoadNames}}",$clan:"{{nomadClanNames}}"},pattern:`## {{$firstName}} "{{$roadName}}" {{$surname}}

**Legal Name:** {{$firstName}} {{$surname}}

**Road Name:** {{$roadName}}

**Clan:** {{$clan}}

**Cultural Background:** {{$culture}}

**Gender:** {{$gender}}`},{id:"quickName",name:"Quick Name",description:"Fast name generation - just the essentials",resultType:"name",tags:["names","quick"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}"},pattern:'**{{$firstName}} "{{streetHandles}}" {{$surname}}** ({{$culture}}, {{$gender}})'},{id:"quickCorpName",name:"Quick Corporate Name",description:"Fast corporate name - no handle",resultType:"name",tags:["names","corporate","quick"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}"},pattern:"**{{$firstName}} {{$surname}}** - {{corpAffiliations}} {{corpEmployeeIds}}"},{id:"npcNameList",name:"NPC Name List",description:"Generates multiple NPC names at once",resultType:"name",tags:["names","generator","list"],shared:{nameCount:"{{dice:1d4+3}}"},pattern:`## NPC Names ({{$nameCount}} characters)

{{$nameCount*quickName|"\\n\\n"}}`},{id:"corpTeam",name:"Corporate Team",description:"Generates a team of corporate employees",resultType:"name",tags:["names","corporate","generator","list"],shared:{$corp:"{{corpAffiliations}}",teamSize:"{{dice:1d4+2}}"},pattern:`## {{$corp}} Team ({{$teamSize}} members)

{{$teamSize*quickCorpName|"\\n\\n"}}`},{id:"gangRoster",name:"Gang Roster",description:"Generates a group of gang members",resultType:"name",tags:["names","gang","generator","list"],shared:{$gang:"{{gangHandles}}",rosterSize:"{{dice:1d6+2}}"},pattern:`## {{$gang.@gang}} Cell ({{$rosterSize}} members)

**Gang:** {{$gang.@gang}}

### Members
{{$rosterSize*gangMemberName|"\\n\\n---\\n\\n"}}`},{id:"handleOnly",name:"Handle Only",description:"Just a street handle, no real name",resultType:"name",tags:["names","handles","quick"],pattern:"**{{streetHandles}}**"},{id:"realNameOnly",name:"Real Name Only",description:"Just a legal name, no handle",resultType:"name",tags:["names","quick"],shared:{$gender:"{{gender}}",$culture:"{{culture}}",$firstName:'{{switch[$gender=="male":$culture.@maleNames].switch[$gender=="female":$culture.@femaleNames].else[$culture.@maleNames]}}',$surname:"{{$culture.@surnames}}"},pattern:"**{{$firstName}} {{$surname}}** ({{$culture}})"},{id:"specificCultureName",name:"Japanese Name",description:"Generates a specifically Japanese character name",resultType:"name",tags:["names","japanese","generator"],shared:{$gender:"{{gender}}",$firstName:'{{switch[$gender=="male":{{japaneseMaleNames}}].else[{{japaneseFemaleNames}}]}}',$surname:"{{japaneseSurnames}}",$handle:"{{tygerClawsHandles}}"},pattern:`## {{$surname}} {{$firstName}}

**Japanese Name Order:** {{$surname}} {{$firstName}}

**Western Name Order:** {{$firstName}} {{$surname}}

**Handle:** {{$handle}}

**Gender:** {{$gender}}`},{id:"latinoName",name:"Latino Name",description:"Generates a specifically Latino character name",resultType:"name",tags:["names","latino","generator"],shared:{$gender:"{{gender}}",$firstName:'{{switch[$gender=="male":{{latinoMaleNames}}].else[{{latinoFemaleNames}}]}}',$surname:"{{latinoSurnames}}",$handle:"{{valentinosHandles}}"},pattern:`## {{$firstName}} {{$surname}}

**Full Name:** {{$firstName}} {{$surname}}

**Handle:** {{$handle}}

**Gender:** {{$gender}}`}],vA={metadata:hA,variables:mA,tables:fA,templates:gA},p0={name:"Rolldeo Homepage Example",namespace:"rolldeo.example.core",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A comprehensive generator for **NPCs**, **treasure**, and **monster encounters** suitable for any fantasy tabletop RPG.",tags:["fantasy","npc","treasure","encounters","monsters"],maxRecursionDepth:50,maxInheritanceDepth:5,uniqueOverflowBehavior:"stop"},h0={defaultSeparator:", ",setting:"fantasy"},m0=JSON.parse(`[{"id":"gender","name":"Gender","type":"simple","resultType":"trait","hidden":true,"tags":["npc","gender"],"entries":[{"id":"male","value":"male"},{"id":"female","value":"female"}]},{"id":"race","name":"Race","type":"simple","resultType":"trait","tags":["npc","race"],"entries":[{"id":"human","value":"Human","weight":4},{"id":"elf","value":"Elf","weight":2},{"id":"dwarf","value":"Dwarf","weight":2},{"id":"halfling","value":"Halfling","weight":2}]},{"id":"humanMaleNames","name":"Human Male Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","human","male"],"entries":[{"value":"Aldric"},{"value":"Bertram"},{"value":"Conrad"},{"value":"Darian"},{"value":"Edmund"},{"value":"Felix"},{"value":"Gareth"},{"value":"Harold"},{"value":"Ivan"},{"value":"Jasper"},{"value":"Klaus"},{"value":"Leopold"},{"value":"Marcus"},{"value":"Nolan"},{"value":"Oswald"}]},{"id":"humanFemaleNames","name":"Human Female Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","human","female"],"entries":[{"value":"Adelina"},{"value":"Beatrice"},{"value":"Cordelia"},{"value":"Diana"},{"value":"Eleanor"},{"value":"Fiona"},{"value":"Gwendolyn"},{"value":"Helena"},{"value":"Isolde"},{"value":"Juliana"},{"value":"Katherine"},{"value":"Lydia"},{"value":"Margaret"},{"value":"Natalia"},{"value":"Ophelia"}]},{"id":"humanSurnames","name":"Human Surnames","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","human","surname"],"entries":[{"value":"Ashford"},{"value":"Blackwood"},{"value":"Cromwell"},{"value":"Dunmore"},{"value":"Fairfax"},{"value":"Grayson"},{"value":"Hartwell"},{"value":"Ironside"},{"value":"Kingsley"},{"value":"Lancaster"},{"value":"Mercer"},{"value":"Northcott"},{"value":"Pemberton"},{"value":"Ravencroft"},{"value":"Stonebridge"}]},{"id":"elfMaleNames","name":"Elf Male Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","elf","male"],"entries":[{"value":"Aerindel"},{"value":"Caelum"},{"value":"Eryndor"},{"value":"Faelar"},{"value":"Galadon"},{"value":"Ithilion"},{"value":"Lorindel"},{"value":"Mirethil"},{"value":"Naeloran"},{"value":"Silvanor"},{"value":"Thalion"},{"value":"Vaelorn"}]},{"id":"elfFemaleNames","name":"Elf Female Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","elf","female"],"entries":[{"value":"Aelindra"},{"value":"Caelynn"},{"value":"Elowen"},{"value":"Faeleth"},{"value":"Galadria"},{"value":"Ilyana"},{"value":"Liriel"},{"value":"Mirathel"},{"value":"Naelith"},{"value":"Silvara"},{"value":"Thalindra"},{"value":"Vaelora"}]},{"id":"elfSurnames","name":"Elf Surnames","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","elf","surname"],"entries":[{"value":"Brightleaf"},{"value":"Dawnwhisper"},{"value":"Evenstar"},{"value":"Goldenbough"},{"value":"Moonbrook"},{"value":"Nighthollow"},{"value":"Silverwind"},{"value":"Starweaver"},{"value":"Sunfire"},{"value":"Twilightmere"},{"value":"Willowshade"},{"value":"Wintersong"}]},{"id":"dwarfMaleNames","name":"Dwarf Male Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","dwarf","male"],"entries":[{"value":"Balin"},{"value":"Dain"},{"value":"Dolgrim"},{"value":"Fargrim"},{"value":"Gardain"},{"value":"Harbek"},{"value":"Kildrak"},{"value":"Morgran"},{"value":"Orsik"},{"value":"Rurik"},{"value":"Thoradin"},{"value":"Vondal"}]},{"id":"dwarfFemaleNames","name":"Dwarf Female Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","dwarf","female"],"entries":[{"value":"Amber"},{"value":"Bardryn"},{"value":"Dagnal"},{"value":"Diesa"},{"value":"Gunnloda"},{"value":"Hlin"},{"value":"Kathra"},{"value":"Liftrasa"},{"value":"Mardred"},{"value":"Riswynn"},{"value":"Torbera"},{"value":"Vistra"}]},{"id":"dwarfSurnames","name":"Dwarf Surnames","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","dwarf","surname"],"entries":[{"value":"Battlehammer"},{"value":"Brawnanvil"},{"value":"Fireforge"},{"value":"Frostbeard"},{"value":"Goldenshield"},{"value":"Ironfist"},{"value":"Rumnaheim"},{"value":"Stonehelm"},{"value":"Strongarm"},{"value":"Thunderstone"},{"value":"Torunn"},{"value":"Ungart"}]},{"id":"halflingMaleNames","name":"Halfling Male Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","halfling","male"],"entries":[{"value":"Alton"},{"value":"Cade"},{"value":"Corrin"},{"value":"Eldon"},{"value":"Finnan"},{"value":"Garret"},{"value":"Lindal"},{"value":"Merric"},{"value":"Osborn"},{"value":"Perrin"},{"value":"Reed"},{"value":"Roscoe"}]},{"id":"halflingFemaleNames","name":"Halfling Female Names","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","halfling","female"],"entries":[{"value":"Andry"},{"value":"Bree"},{"value":"Callie"},{"value":"Cora"},{"value":"Euphemia"},{"value":"Jillian"},{"value":"Kithri"},{"value":"Lavinia"},{"value":"Lidda"},{"value":"Merla"},{"value":"Nedda"},{"value":"Seraphina"}]},{"id":"halflingSurnames","name":"Halfling Surnames","type":"simple","resultType":"name","hidden":true,"tags":["npc","names","halfling","surname"],"entries":[{"value":"Brushgather"},{"value":"Goodbarrel"},{"value":"Greenbottle"},{"value":"Highhill"},{"value":"Hilltopple"},{"value":"Leagallow"},{"value":"Tealeaf"},{"value":"Thorngage"},{"value":"Tosscobble"},{"value":"Underbough"},{"value":"Warmwater"},{"value":"Whispermouse"}]},{"id":"magicWeapons","name":"Magic Weapons","type":"simple","resultType":"item","tags":["treasure","weapons","magic"],"entries":[{"id":"flametongueSword","value":"**Flametongue Longsword**","weight":1,"description":"A longsword that bursts into flame on command, dealing extra fire damage.","sets":{"rarity":"rare","itemType":"weapon","element":"fire"}},{"id":"frostbrand","value":"**Frostbrand Greatsword**","weight":1,"description":"A greatsword wreathed in bitter cold, granting resistance to fire.","sets":{"rarity":"very rare","itemType":"weapon","element":"cold"}},{"id":"vorpalSword","value":"**Vorpal Sword**","weight":0.5,"description":"A legendary blade capable of severing heads with a lucky strike.","sets":{"rarity":"legendary","itemType":"weapon","element":"none"}},{"id":"dancingSword","value":"**Dancing Sword**","weight":1,"description":"A sword that fights on its own, hovering in the air beside its wielder.","sets":{"rarity":"very rare","itemType":"weapon","element":"none"}},{"id":"sunBlade","value":"**Sun Blade**","weight":1,"description":"A blade of pure radiance, especially deadly against undead.","sets":{"rarity":"rare","itemType":"weapon","element":"radiant"}},{"id":"oathbow","value":"**Oathbow**","weight":1,"description":"A longbow that lets you swear vengeance against a foe, gaining bonuses against them.","sets":{"rarity":"very rare","itemType":"weapon","element":"none"}},{"id":"dwarvenThrower","value":"**Dwarven Thrower**","weight":1.5,"description":"A warhammer that returns to the wielder's hand after being thrown.","sets":{"rarity":"very rare","itemType":"weapon","element":"none"}},{"id":"lightningJavelin","value":"**Javelin of Lightning**","weight":2,"description":"A javelin that transforms into a bolt of lightning when thrown.","sets":{"rarity":"uncommon","itemType":"weapon","element":"lightning"}},{"id":"maceOfDisruption","value":"**Mace of Disruption**","weight":1.5,"description":"A holy mace that shines with radiant light, devastating to fiends and undead.","sets":{"rarity":"rare","itemType":"weapon","element":"radiant"}},{"id":"luckyBlade","value":"**Luck Blade**","weight":0.5,"description":"A sword containing stored wishes, also granting a bonus to saving throws.","sets":{"rarity":"legendary","itemType":"weapon","element":"none"}}]},{"id":"magicArmor","name":"Magic Armor","type":"simple","resultType":"item","tags":["treasure","armor","magic"],"entries":[{"id":"plateOfEthereal","value":"**Plate Armor of Etherealness**","weight":0.5,"description":"Gleaming plate that allows the wearer to become ethereal.","sets":{"rarity":"legendary","itemType":"armor","armorType":"heavy"}},{"id":"dragonScaleMail","value":"**Dragon Scale Mail**","weight":1,"description":"Scale armor made from dragon scales, granting resistance to the dragon's damage type.","sets":{"rarity":"very rare","itemType":"armor","armorType":"medium"}},{"id":"adamantineArmor","value":"**Adamantine Plate Armor**","weight":2,"description":"Armor reinforced with adamantine, turning critical hits into normal hits.","sets":{"rarity":"uncommon","itemType":"armor","armorType":"heavy"}},{"id":"elvenChain","value":"**Elven Chain**","weight":1.5,"description":"Finely wrought chain mail that can be worn under normal clothes.","sets":{"rarity":"rare","itemType":"armor","armorType":"medium"}},{"id":"mithralArmor","value":"**Mithral Half Plate**","weight":2,"description":"Lightweight half plate that doesn't impose disadvantage on stealth.","sets":{"rarity":"uncommon","itemType":"armor","armorType":"medium"}},{"id":"demonArmor","value":"**Demon Armor**","weight":0.5,"description":"Plate armor of demonic origin with clawed gauntlets. _Cursed._","sets":{"rarity":"very rare","itemType":"armor","armorType":"heavy"}},{"id":"armorOfInvulnerability","value":"**Armor of Invulnerability**","weight":0.5,"description":"Plate armor that grants immunity to nonmagical damage for a short time.","sets":{"rarity":"legendary","itemType":"armor","armorType":"heavy"}},{"id":"glamouredLeather","value":"**Glamoured Studded Leather**","weight":2,"description":"Armor that can change its appearance to look like normal clothing.","sets":{"rarity":"rare","itemType":"armor","armorType":"light"}}]},{"id":"wondrousItems","name":"Wondrous Items","type":"simple","resultType":"item","tags":["treasure","wondrous","magic"],"entries":[{"id":"cloakOfDisplacement","value":"**Cloak of Displacement**","weight":1.5,"description":"A cloak that projects an illusion of the wearer standing slightly away from their actual location.","sets":{"rarity":"rare","itemType":"wondrous"}},{"id":"bootsOfSpeed","value":"**Boots of Speed**","weight":1.5,"description":"Boots that double the wearer's walking speed when activated.","sets":{"rarity":"rare","itemType":"wondrous"}},{"id":"bagOfHolding","value":"**Bag of Holding**","weight":3,"description":"A bag with an interior far larger than its outside dimensions.","sets":{"rarity":"uncommon","itemType":"wondrous"}},{"id":"portableHole","value":"**Portable Hole**","weight":1,"description":"A circle of black cloth that creates an extradimensional space when placed on a surface.","sets":{"rarity":"rare","itemType":"wondrous"}},{"id":"cloakOfInvisibility","value":"**Cloak of Invisibility**","weight":0.5,"description":"A legendary cloak that renders the wearer invisible.","sets":{"rarity":"legendary","itemType":"wondrous"}},{"id":"amuletOfProof","value":"**Amulet of Proof Against Detection**","weight":2,"description":"An amulet that hides the wearer from divination magic.","sets":{"rarity":"uncommon","itemType":"wondrous"}},{"id":"robeOfStars","value":"**Robe of Stars**","weight":0.5,"description":"A dark robe embroidered with stars that grants enhanced saving throws and can launch magic missiles.","sets":{"rarity":"very rare","itemType":"wondrous"}},{"id":"gauntletsOfOgrePower","value":"**Gauntlets of Ogre Power**","weight":2,"description":"Gauntlets that set the wearer's Strength score to 19.","sets":{"rarity":"uncommon","itemType":"wondrous"}},{"id":"beltOfGiantStrength","value":"**Belt of Hill Giant Strength**","weight":1,"description":"A belt that sets the wearer's Strength score to 21.","sets":{"rarity":"rare","itemType":"wondrous"}},{"id":"robeOfTheArchmagi","value":"**Robe of the Archmagi**","weight":0.5,"description":"A legendary robe providing enhanced AC, saving throws, and spell DC.","sets":{"rarity":"legendary","itemType":"wondrous"}}]},{"id":"magicRings","name":"Magic Rings","type":"simple","resultType":"item","tags":["treasure","rings","magic"],"entries":[{"id":"ringOfProtection","value":"**Ring of Protection**","weight":2,"description":"A ring that provides a bonus to AC and saving throws.","sets":{"rarity":"rare","itemType":"ring"}},{"id":"ringOfInvisibility","value":"**Ring of Invisibility**","weight":0.5,"description":"A ring that grants invisibility at will.","sets":{"rarity":"legendary","itemType":"ring"}},{"id":"ringOfSpellStoring","value":"**Ring of Spell Storing**","weight":1,"description":"A ring that can hold up to 5 levels of spells for later casting.","sets":{"rarity":"rare","itemType":"ring"}},{"id":"ringOfRegeneration","value":"**Ring of Regeneration**","weight":1,"description":"A ring that slowly heals the wearer over time.","sets":{"rarity":"very rare","itemType":"ring"}},{"id":"ringOfTelekinesis","value":"**Ring of Telekinesis**","weight":1,"description":"A ring that allows the wearer to cast telekinesis at will.","sets":{"rarity":"very rare","itemType":"ring"}},{"id":"ringOfFeatherFalling","value":"**Ring of Feather Falling**","weight":2,"description":"A ring that slows falls, preventing falling damage.","sets":{"rarity":"rare","itemType":"ring"}},{"id":"ringOfWishes","value":"**Ring of Three Wishes**","weight":0.25,"description":"A legendary ring containing three _wish_ spells.","sets":{"rarity":"legendary","itemType":"ring"}},{"id":"ringOfElementalCommand","value":"**Ring of Elemental Command (Fire)**","weight":0.5,"description":"A ring granting power over fire elementals and fire resistance.","sets":{"rarity":"legendary","itemType":"ring"}}]},{"id":"magicPotions","name":"Magic Potions","type":"simple","resultType":"item","tags":["treasure","potions","magic","consumable"],"entries":[{"id":"potionOfHealing","value":"**Potion of Healing**","weight":5,"description":"A red potion that restores 2d4+2 hit points.","sets":{"rarity":"common","itemType":"potion"}},{"id":"potionOfGreaterHealing","value":"**Potion of Greater Healing**","weight":3,"description":"A red potion that restores 4d4+4 hit points.","sets":{"rarity":"uncommon","itemType":"potion"}},{"id":"potionOfInvisibility","value":"**Potion of Invisibility**","weight":1.5,"description":"A potion that renders the drinker invisible for 1 hour.","sets":{"rarity":"very rare","itemType":"potion"}},{"id":"potionOfFlying","value":"**Potion of Flying**","weight":1.5,"description":"A potion that grants a flying speed for 1 hour.","sets":{"rarity":"very rare","itemType":"potion"}},{"id":"potionOfSpeed","value":"**Potion of Speed**","weight":1.5,"description":"A potion that grants the effects of _haste_ for 1 minute.","sets":{"rarity":"very rare","itemType":"potion"}},{"id":"potionOfGiantStrength","value":"**Potion of Hill Giant Strength**","weight":2,"description":"A potion that raises Strength to 21 for 1 hour.","sets":{"rarity":"uncommon","itemType":"potion"}},{"id":"potionOfResistance","value":"**Potion of Fire Resistance**","weight":2,"description":"A potion granting resistance to fire damage for 1 hour.","sets":{"rarity":"uncommon","itemType":"potion"}},{"id":"potionOfHeroism","value":"**Potion of Heroism**","weight":2,"description":"A potion granting temporary hit points and the _bless_ effect for 1 hour.","sets":{"rarity":"rare","itemType":"potion"}}]},{"id":"magicItems","name":"All Magic Items","type":"composite","resultType":"item","tags":["treasure","magic","all"],"description":"Selects from all categories of magic items with weighted distribution.","sources":[{"tableId":"magicWeapons","weight":2},{"tableId":"magicArmor","weight":1.5},{"tableId":"wondrousItems","weight":3},{"tableId":"magicRings","weight":1},{"tableId":"magicPotions","weight":4}]},{"id":"monsters","name":"Monsters","type":"simple","resultType":"creature","tags":["encounter","monsters","combat"],"entries":[{"id":"goblins","value":"goblins","weight":4,"sets":{"size":"small","type":"humanoid","threat":"low","singular":"goblin"}},{"id":"orcs","value":"orcs","weight":3,"sets":{"size":"medium","type":"humanoid","threat":"medium","singular":"orc"}},{"id":"skeletons","value":"skeletons","weight":3,"sets":{"size":"medium","type":"undead","threat":"low","singular":"skeleton"}},{"id":"zombies","value":"zombies","weight":2.5,"sets":{"size":"medium","type":"undead","threat":"low","singular":"zombie"}},{"id":"wolves","value":"dire wolves","weight":2,"sets":{"size":"large","type":"beast","threat":"medium","singular":"dire wolf"}},{"id":"gnolls","value":"gnolls","weight":2,"sets":{"size":"medium","type":"humanoid","threat":"medium","singular":"gnoll"}},{"id":"bugbears","value":"bugbears","weight":1.5,"sets":{"size":"medium","type":"humanoid","threat":"medium","singular":"bugbear"}},{"id":"ogres","value":"ogres","weight":1,"sets":{"size":"large","type":"giant","threat":"high","singular":"ogre"}},{"id":"trolls","value":"trolls","weight":0.75,"sets":{"size":"large","type":"giant","threat":"high","singular":"troll"}},{"id":"ghouls","value":"ghouls","weight":1.5,"sets":{"size":"medium","type":"undead","threat":"medium","singular":"ghoul"}},{"id":"wights","value":"wights","weight":1,"sets":{"size":"medium","type":"undead","threat":"high","singular":"wight"}},{"id":"hobgoblins","value":"hobgoblins","weight":2,"sets":{"size":"medium","type":"humanoid","threat":"medium","singular":"hobgoblin"}},{"id":"bandits","value":"bandits","weight":3,"sets":{"size":"medium","type":"humanoid","threat":"low","singular":"bandit"}},{"id":"cultists","value":"cultists","weight":2,"sets":{"size":"medium","type":"humanoid","threat":"low","singular":"cultist"}},{"id":"elementals","value":"fire elementals","weight":0.5,"sets":{"size":"large","type":"elemental","threat":"high","singular":"fire elemental"}}]},{"id":"environmentalHazards","name":"Environmental Hazards","type":"simple","resultType":"environment","tags":["encounter","hazards","environment"],"entries":[{"id":"difficultTerrain","value":"difficult terrain (rubble and debris) that hampers movement","weight":3,"sets":{"hazardType":"terrain","severity":"minor"}},{"id":"pitTrap","value":"a concealed pit trap in the center of the area","weight":2,"sets":{"hazardType":"trap","severity":"moderate"}},{"id":"poisonGas","value":"pockets of poisonous gas seeping from cracks in the ground","weight":1,"sets":{"hazardType":"environmental","severity":"severe"}},{"id":"unstableFloor","value":"an unstable floor that threatens to collapse","weight":1.5,"sets":{"hazardType":"structural","severity":"moderate"}},{"id":"magicalDarkness","value":"an area of magical darkness that normal light cannot penetrate","weight":1,"sets":{"hazardType":"magical","severity":"moderate"}},{"id":"flashFlood","value":"a flash flood that periodically surges through the area","weight":0.75,"sets":{"hazardType":"environmental","severity":"severe"}},{"id":"thornedVines","value":"thorned vines that grasp at anyone who moves through them","weight":2,"sets":{"hazardType":"terrain","severity":"minor"}},{"id":"fallingRocks","value":"unstable rocks that periodically fall from above","weight":1.5,"sets":{"hazardType":"environmental","severity":"moderate"}},{"id":"slipperyIce","value":"a layer of slippery ice covering the ground","weight":1.5,"sets":{"hazardType":"terrain","severity":"minor"}},{"id":"arcaneWard","value":"an arcane ward that triggers a spell effect when crossed","weight":1,"sets":{"hazardType":"magical","severity":"moderate"}},{"id":"fireJets","value":"jets of flame that periodically erupt from the walls","weight":1,"sets":{"hazardType":"trap","severity":"severe"}},{"id":"webs","value":"thick webs that restrain creatures who enter them","weight":2,"sets":{"hazardType":"terrain","severity":"moderate"}}]}]`),f0=[{id:"npc",name:"NPC Generator",resultType:"npc",tags:["npc","character","generator"],description:"Generates a random NPC with name, race, gender, and age appropriate to their race.",shared:{$gender:"{{gender}}",$race:"{{race}}",$firstName:'{{switch[$race=="Human" && $gender=="male":{{humanMaleNames}}].switch[$race=="Human" && $gender=="female":{{humanFemaleNames}}].switch[$race=="Elf" && $gender=="male":{{elfMaleNames}}].switch[$race=="Elf" && $gender=="female":{{elfFemaleNames}}].switch[$race=="Dwarf" && $gender=="male":{{dwarfMaleNames}}].switch[$race=="Dwarf" && $gender=="female":{{dwarfFemaleNames}}].switch[$race=="Halfling" && $gender=="male":{{halflingMaleNames}}].else[{{halflingFemaleNames}}]}}',$surname:'{{switch[$race=="Human":{{humanSurnames}}].switch[$race=="Elf":{{elfSurnames}}].switch[$race=="Dwarf":{{dwarfSurnames}}].else[{{halflingSurnames}}]}}',$age:'{{switch[$race=="Human":{{dice:1d60+18}}].switch[$race=="Elf":{{dice:1d400+100}}].switch[$race=="Dwarf":{{dice:1d200+50}}].else[{{dice:1d80+20}}]}}'},pattern:`## {{$firstName}} {{$surname}}

**Race:** {{$race}}  
**Gender:** {{$gender}}  
**Age:** {{$age}} years old`},{id:"treasure",name:"Treasure Generator",resultType:"loot",tags:["treasure","loot","magic items","generator"],description:"Generates a random magic item with its description and rarity.",shared:{$item:"{{magicItems}}"},pattern:`## Treasure Found

You discover {{$item}}.

_{{$item.@description}}_

**Rarity:** {{switch[$item.@rarity=="common":"Common"].switch[$item.@rarity=="uncommon":"Uncommon"].switch[$item.@rarity=="rare":"Rare"].switch[$item.@rarity=="very rare":"Very Rare"].else["Legendary"]}}`},{id:"monsterEncounter",name:"Monster Encounter",resultType:"encounter",tags:["encounter","monsters","combat","generator"],description:"Generates a monster encounter with a group of creatures and an environmental hazard.",shared:{$monsterCount:"{{dice:1d4+1}}",$monsterType:"{{monsters}}",$hazard:"{{environmentalHazards}}"},pattern:`## Monster Encounter

**Enemies:** {{$monsterCount}} {{$monsterType}}

**Threat Level:** {{switch[$monsterType.@threat=="low":"Low"].switch[$monsterType.@threat=="medium":"Medium"].else["High"]}}

**Creature Type:** {{$monsterType.@type}}

---

**Environmental Hazard:** The area contains {{$hazard}}.

**Hazard Severity:** {{switch[$hazard.@severity=="minor":"Minor"].switch[$hazard.@severity=="moderate":"Moderate"].else["Severe"]}}`}],g0={metadata:p0,variables:h0,tables:m0,templates:f0},yA=Object.freeze(Object.defineProperty({__proto__:null,default:g0,metadata:p0,tables:m0,templates:f0,variables:h0},Symbol.toStringTag,{value:"Module"})),bA={name:"TTRPG Adjectives Collection",namespace:"rolldeo.adjectives",version:"1.0.0",specVersion:"1.0",author:"Rolldeo",description:"A comprehensive collection of adjectives grouped by theme for TTRPG random generation. Use these tables to add flavor to NPCs, locations, items, and encounters. Each category provides 15-30 evocative adjectives suited to different tones and contexts.",tags:["adjectives","descriptors","flavor","utility","system-agnostic"],source:{license:"CC0"}},wA=JSON.parse('[{"id":"friendly","name":"Friendly & Welcoming","type":"simple","description":"Adjectives conveying warmth, openness, and approachability","resultType":"trait","tags":["positive","social","npc"],"entries":[{"value":"welcoming"},{"value":"amiable"},{"value":"cheerful"},{"value":"hospitable"},{"value":"warm"},{"value":"kindhearted"},{"value":"genial"},{"value":"affable"},{"value":"gregarious"},{"value":"cordial"},{"value":"jovial"},{"value":"good-natured"},{"value":"approachable"},{"value":"benevolent"},{"value":"gracious"},{"value":"sympathetic"},{"value":"charitable"},{"value":"neighborly"},{"value":"compassionate"},{"value":"tender"}]},{"id":"antagonistic","name":"Antagonistic & Hostile","type":"simple","description":"Adjectives conveying aggression, opposition, and unfriendliness","resultType":"trait","tags":["negative","conflict","npc"],"entries":[{"value":"hostile"},{"value":"belligerent"},{"value":"aggressive"},{"value":"confrontational"},{"value":"contentious"},{"value":"combative"},{"value":"quarrelsome"},{"value":"pugnacious"},{"value":"truculent"},{"value":"bellicose"},{"value":"vindictive"},{"value":"spiteful"},{"value":"malicious"},{"value":"venomous"},{"value":"wrathful"},{"value":"bitter"},{"value":"resentful"},{"value":"ruthless"},{"value":"merciless"},{"value":"cold-blooded"},{"value":"cutthroat"},{"value":"savage"}]},{"id":"scary","name":"Scary & Ominous","type":"simple","description":"Adjectives conveying fear, dread, and foreboding","resultType":"trait","tags":["horror","atmosphere","dark"],"entries":[{"value":"terrifying"},{"value":"dreadful"},{"value":"ominous"},{"value":"sinister"},{"value":"menacing"},{"value":"foreboding"},{"value":"nightmarish"},{"value":"ghastly"},{"value":"macabre"},{"value":"gruesome"},{"value":"eerie"},{"value":"unsettling"},{"value":"haunting"},{"value":"spine-chilling"},{"value":"blood-curdling"},{"value":"horrifying"},{"value":"monstrous"},{"value":"abhorrent"},{"value":"hideous"},{"value":"grotesque"},{"value":"loathsome"},{"value":"creeping"},{"value":"lurking"},{"value":"malevolent"}]},{"id":"whimsical","name":"Whimsical & Playful","type":"simple","description":"Adjectives conveying lightheartedness, fancy, and mischief","resultType":"trait","tags":["fey","lighthearted","fun"],"entries":[{"value":"whimsical"},{"value":"playful"},{"value":"mischievous"},{"value":"capricious"},{"value":"fanciful"},{"value":"quirky"},{"value":"impish"},{"value":"sprightly"},{"value":"frivolous"},{"value":"madcap"},{"value":"zany"},{"value":"eccentric"},{"value":"peculiar"},{"value":"droll"},{"value":"jaunty"},{"value":"mercurial"},{"value":"spontaneous"},{"value":"unpredictable"},{"value":"lighthearted"},{"value":"bubbly"}]},{"id":"mysterious","name":"Mysterious & Enigmatic","type":"simple","description":"Adjectives conveying secrets, intrigue, and the unknown","resultType":"trait","tags":["intrigue","atmosphere","magic"],"entries":[{"value":"mysterious"},{"value":"enigmatic"},{"value":"cryptic"},{"value":"arcane"},{"value":"inscrutable"},{"value":"elusive"},{"value":"secretive"},{"value":"shadowy"},{"value":"veiled"},{"value":"obscure"},{"value":"unfathomable"},{"value":"otherworldly"},{"value":"esoteric"},{"value":"occult"},{"value":"hidden"},{"value":"clandestine"},{"value":"covert"},{"value":"furtive"},{"value":"beguiling"},{"value":"spectral"},{"value":"phantasmal"},{"value":"ethereal"}]},{"id":"noble","name":"Noble & Dignified","type":"simple","description":"Adjectives conveying honor, refinement, and high status","resultType":"trait","tags":["aristocracy","npc","positive"],"entries":[{"value":"noble"},{"value":"dignified"},{"value":"regal"},{"value":"majestic"},{"value":"stately"},{"value":"distinguished"},{"value":"refined"},{"value":"elegant"},{"value":"august"},{"value":"imperious"},{"value":"lordly"},{"value":"aristocratic"},{"value":"courtly"},{"value":"gallant"},{"value":"chivalrous"},{"value":"honorable"},{"value":"virtuous"},{"value":"magnanimous"},{"value":"illustrious"},{"value":"exalted"},{"value":"venerable"}]},{"id":"rugged","name":"Rugged & Weathered","type":"simple","description":"Adjectives conveying toughness, wear, and harsh conditions","resultType":"trait","tags":["wilderness","travel","hardship"],"entries":[{"value":"rugged"},{"value":"weathered"},{"value":"hardened"},{"value":"gnarled"},{"value":"grizzled"},{"value":"scarred"},{"value":"battle-worn"},{"value":"road-weary"},{"value":"sun-baked"},{"value":"wind-swept"},{"value":"salt-crusted"},{"value":"frost-bitten"},{"value":"calloused"},{"value":"leathery"},{"value":"craggy"},{"value":"rough-hewn"},{"value":"battered"},{"value":"worn"},{"value":"time-tested"},{"value":"stalwart"},{"value":"hardy"},{"value":"resilient"}]},{"id":"ancient","name":"Ancient & Timeworn","type":"simple","description":"Adjectives conveying great age, history, and the passage of time","resultType":"trait","tags":["history","ruins","artifacts"],"entries":[{"value":"ancient"},{"value":"timeworn"},{"value":"primordial"},{"value":"archaic"},{"value":"antediluvian"},{"value":"primeval"},{"value":"age-old"},{"value":"ancestral"},{"value":"forgotten"},{"value":"crumbling"},{"value":"moss-covered"},{"value":"vine-choked"},{"value":"dust-laden"},{"value":"faded"},{"value":"weathered"},{"value":"decrepit"},{"value":"venerable"},{"value":"hallowed"},{"value":"storied"},{"value":"legendary"},{"value":"mythic"},{"value":"time-lost"}]},{"id":"corrupt","name":"Corrupt & Decayed","type":"simple","description":"Adjectives conveying rot, corruption, and moral decay","resultType":"trait","tags":["dark","evil","undead"],"entries":[{"value":"corrupt"},{"value":"decayed"},{"value":"rotting"},{"value":"festering"},{"value":"putrid"},{"value":"blighted"},{"value":"tainted"},{"value":"defiled"},{"value":"polluted"},{"value":"contaminated"},{"value":"diseased"},{"value":"pestilent"},{"value":"necrotic"},{"value":"gangrenous"},{"value":"withered"},{"value":"wasting"},{"value":"moldering"},{"value":"rank"},{"value":"foul"},{"value":"vile"},{"value":"profane"},{"value":"accursed"}]},{"id":"magical","name":"Magical & Enchanted","type":"simple","description":"Adjectives conveying supernatural power and wonder","resultType":"trait","tags":["magic","fantasy","items"],"entries":[{"value":"magical"},{"value":"enchanted"},{"value":"arcane"},{"value":"mystical"},{"value":"eldritch"},{"value":"sorcerous"},{"value":"bewitched"},{"value":"spellbound"},{"value":"charmed"},{"value":"hexed"},{"value":"warded"},{"value":"runic"},{"value":"glowing"},{"value":"shimmering"},{"value":"luminous"},{"value":"radiant"},{"value":"ethereal"},{"value":"spectral"},{"value":"supernatural"},{"value":"otherworldly"},{"value":"transcendent"},{"value":"blessed"},{"value":"divine"},{"value":"infernal"}]},{"id":"peaceful","name":"Peaceful & Serene","type":"simple","description":"Adjectives conveying calm, tranquility, and safety","resultType":"trait","tags":["sanctuary","atmosphere","positive"],"entries":[{"value":"peaceful"},{"value":"serene"},{"value":"tranquil"},{"value":"calm"},{"value":"placid"},{"value":"idyllic"},{"value":"pastoral"},{"value":"bucolic"},{"value":"quiet"},{"value":"still"},{"value":"hushed"},{"value":"restful"},{"value":"soothing"},{"value":"gentle"},{"value":"harmonious"},{"value":"undisturbed"},{"value":"secluded"},{"value":"sheltered"},{"value":"safe"},{"value":"protected"}]},{"id":"dangerous","name":"Dangerous & Treacherous","type":"simple","description":"Adjectives conveying peril, risk, and hazards","resultType":"trait","tags":["hazard","wilderness","dungeon"],"entries":[{"value":"dangerous"},{"value":"treacherous"},{"value":"perilous"},{"value":"hazardous"},{"value":"deadly"},{"value":"lethal"},{"value":"fatal"},{"value":"murderous"},{"value":"precarious"},{"value":"unstable"},{"value":"volatile"},{"value":"unpredictable"},{"value":"savage"},{"value":"brutal"},{"value":"unforgiving"},{"value":"ruthless"},{"value":"lawless"},{"value":"forbidding"},{"value":"inhospitable"},{"value":"hostile"},{"value":"wild"},{"value":"untamed"}]},{"id":"eccentric","name":"Eccentric & Unusual","type":"simple","description":"Adjectives conveying oddness, uniqueness, and unconventionality","resultType":"trait","tags":["npc","quirk","personality"],"entries":[{"value":"eccentric"},{"value":"peculiar"},{"value":"odd"},{"value":"strange"},{"value":"unusual"},{"value":"quirky"},{"value":"bizarre"},{"value":"outlandish"},{"value":"unconventional"},{"value":"unorthodox"},{"value":"idiosyncratic"},{"value":"singular"},{"value":"offbeat"},{"value":"erratic"},{"value":"unpredictable"},{"value":"enigmatic"},{"value":"cryptic"},{"value":"inscrutable"},{"value":"curious"},{"value":"remarkable"}]},{"id":"melancholic","name":"Melancholic & Somber","type":"simple","description":"Adjectives conveying sadness, loss, and solemnity","resultType":"trait","tags":["mood","atmosphere","tragic"],"entries":[{"value":"melancholic"},{"value":"somber"},{"value":"mournful"},{"value":"sorrowful"},{"value":"wistful"},{"value":"forlorn"},{"value":"despondent"},{"value":"gloomy"},{"value":"bleak"},{"value":"dreary"},{"value":"dismal"},{"value":"desolate"},{"value":"forsaken"},{"value":"abandoned"},{"value":"lonely"},{"value":"haunted"},{"value":"tragic"},{"value":"woeful"},{"value":"doleful"},{"value":"plaintive"},{"value":"bittersweet"}]},{"id":"wealthy","name":"Wealthy & Opulent","type":"simple","description":"Adjectives conveying riches, luxury, and prosperity","resultType":"trait","tags":["treasure","nobility","urban"],"entries":[{"value":"wealthy"},{"value":"opulent"},{"value":"lavish"},{"value":"luxurious"},{"value":"prosperous"},{"value":"affluent"},{"value":"rich"},{"value":"sumptuous"},{"value":"extravagant"},{"value":"grandiose"},{"value":"magnificent"},{"value":"splendid"},{"value":"resplendent"},{"value":"ornate"},{"value":"gilded"},{"value":"bejeweled"},{"value":"decadent"},{"value":"indulgent"},{"value":"palatial"},{"value":"regal"}]},{"id":"poor","name":"Poor & Destitute","type":"simple","description":"Adjectives conveying poverty, want, and hardship","resultType":"trait","tags":["urban","social","atmosphere"],"entries":[{"value":"poor"},{"value":"destitute"},{"value":"impoverished"},{"value":"penniless"},{"value":"downtrodden"},{"value":"wretched"},{"value":"miserable"},{"value":"squalid"},{"value":"shabby"},{"value":"threadbare"},{"value":"ragged"},{"value":"tattered"},{"value":"dilapidated"},{"value":"run-down"},{"value":"ramshackle"},{"value":"meager"},{"value":"sparse"},{"value":"humble"},{"value":"modest"},{"value":"simple"}]},{"id":"cunning","name":"Cunning & Clever","type":"simple","description":"Adjectives conveying intelligence, wit, and craftiness","resultType":"trait","tags":["npc","personality","intrigue"],"entries":[{"value":"cunning"},{"value":"clever"},{"value":"shrewd"},{"value":"astute"},{"value":"sharp"},{"value":"wily"},{"value":"crafty"},{"value":"sly"},{"value":"devious"},{"value":"calculating"},{"value":"scheming"},{"value":"conniving"},{"value":"manipulative"},{"value":"resourceful"},{"value":"inventive"},{"value":"ingenious"},{"value":"quick-witted"},{"value":"perceptive"},{"value":"observant"},{"value":"discerning"}]},{"id":"wild","name":"Wild & Untamed","type":"simple","description":"Adjectives conveying nature, primal forces, and the uncivilized","resultType":"trait","tags":["wilderness","nature","primal"],"entries":[{"value":"wild"},{"value":"untamed"},{"value":"feral"},{"value":"savage"},{"value":"primal"},{"value":"bestial"},{"value":"ferocious"},{"value":"fierce"},{"value":"raw"},{"value":"unbridled"},{"value":"unrestrained"},{"value":"untouched"},{"value":"unspoiled"},{"value":"verdant"},{"value":"overgrown"},{"value":"tangled"},{"value":"primordial"},{"value":"elemental"},{"value":"instinctive"},{"value":"visceral"}]},{"id":"holy","name":"Holy & Sacred","type":"simple","description":"Adjectives conveying divinity, sanctity, and religious significance","resultType":"trait","tags":["religion","divine","positive"],"entries":[{"value":"holy"},{"value":"sacred"},{"value":"divine"},{"value":"blessed"},{"value":"hallowed"},{"value":"consecrated"},{"value":"sanctified"},{"value":"celestial"},{"value":"heavenly"},{"value":"angelic"},{"value":"righteous"},{"value":"pious"},{"value":"devout"},{"value":"virtuous"},{"value":"pure"},{"value":"immaculate"},{"value":"radiant"},{"value":"luminous"},{"value":"resplendent"},{"value":"glorious"}]},{"id":"unholy","name":"Unholy & Profane","type":"simple","description":"Adjectives conveying evil, corruption, and blasphemy","resultType":"trait","tags":["evil","dark","forbidden"],"entries":[{"value":"unholy"},{"value":"profane"},{"value":"blasphemous"},{"value":"sacrilegious"},{"value":"accursed"},{"value":"damned"},{"value":"forsaken"},{"value":"infernal"},{"value":"demonic"},{"value":"diabolical"},{"value":"hellish"},{"value":"abyssal"},{"value":"fiendish"},{"value":"wicked"},{"value":"malign"},{"value":"evil"},{"value":"dark"},{"value":"shadowed"},{"value":"cursed"},{"value":"forbidden"}]},{"id":"allAdjectives","name":"All Adjectives","type":"collection","description":"Combined collection of all adjective tables","resultType":"trait","tags":["combined","all"],"collections":["friendly","antagonistic","scary","whimsical","mysterious","noble","rugged","ancient","corrupt","magical","peaceful","dangerous","eccentric","melancholic","wealthy","poor","cunning","wild","holy","unholy"]},{"id":"positiveAdjectives","name":"Positive Adjectives","type":"collection","description":"Collection of adjectives with generally positive connotations","resultType":"trait","tags":["combined","positive"],"collections":["friendly","noble","peaceful","wealthy","holy","magical"]},{"id":"negativeAdjectives","name":"Negative Adjectives","type":"collection","description":"Collection of adjectives with generally negative connotations","resultType":"trait","tags":["combined","negative"],"collections":["antagonistic","scary","corrupt","dangerous","poor","unholy"]},{"id":"neutralAdjectives","name":"Neutral Adjectives","type":"collection","description":"Collection of adjectives that can be positive or negative depending on context","resultType":"trait","tags":["combined","neutral"],"collections":["whimsical","mysterious","rugged","ancient","eccentric","melancholic","cunning","wild"]}]'),xA=[{id:"twoAdjectives",name:"Two Random Adjectives",description:"Generates two different random adjectives",resultType:"trait",tags:["utility"],pattern:'{{2*unique*allAdjectives|", "}}'},{id:"contrastingPair",name:"Contrasting Adjective Pair",description:"Generates one positive and one negative adjective",resultType:"trait",tags:["utility","contrast"],pattern:"{{positiveAdjectives}} yet {{negativeAdjectives}}"},{id:"threeLayeredDescription",name:"Three-Layered Description",description:"Generates three adjectives for a rich description",resultType:"trait",tags:["utility","detailed"],pattern:"{{allAdjectives}}, {{allAdjectives}}, and {{allAdjectives}}"}],kA={metadata:bA,tables:wA,templates:xA},gb=[{id:"rolldeo.horror.eldritch",document:Dj},{id:"rolldeo.fantasy.world",document:$j},{id:"rolldeo.scifi.frontier",document:zj},{id:"rolldeo.fantasy.npc",document:Wj},{id:"rolldeo.horror.npc",document:Zj},{id:"rolldeo.scifi.npc",document:tA},{id:"rolldeo.wh40k.npc",document:sA},{id:"rolldeo.cyberpunk.core",document:pA},{id:"rolldeo.cyberpunk.names",document:vA},{id:"rolldeo.example.core",document:g0,hiddenFromUI:!0},{id:"rolldeo.adjectives",document:kA}],dt=xl()((e,t)=>({engine:new LD,collections:new Map,isInitialized:!1,isLoading:!1,error:null,initialize:async()=>{if(!t().isInitialized){e({isLoading:!0,error:null});try{await on();const r=await s0(),a=new Set(r.map(p=>p.id)),i=Date.now(),o=gb.filter(({id:p})=>!a.has(p));await Promise.all(o.map(({id:p,document:h})=>th({id:p,document:h,name:h.metadata.name,namespace:h.metadata.namespace,version:h.metadata.version,description:h.metadata.description,tags:h.metadata.tags||[],isPreloaded:!0,source:"preloaded",createdAt:i,updatedAt:i})));const c=new Map;for(const p of r)p.isPreloaded&&p.hiddenFromUI!==void 0&&c.set(p.id,p.hiddenFromUI);for(const{id:p,document:h,hiddenFromUI:m}of gb){const v=c.has(p)?c.get(p):m;t().loadCollection(p,h,!0,"preloaded",v)}for(const p of r)p.isPreloaded||t().loadCollection(p.id,p.document,!1,p.source);const d=new Map;for(const p of r)p.fileName&&(d.set(p.fileName,p.id),d.set(`./${p.fileName}`,p.id));d.size>0&&t().engine.resolveImports(d),e({isInitialized:!0,isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Failed to initialize",isLoading:!1})}}},loadCollection:(n,r,a=!1,i="file",o=!1)=>{var m,v,g;const{engine:c,collections:d}=t();c.loadCollection(r,n,a);const p={id:n,name:r.metadata.name,namespace:r.metadata.namespace,version:r.metadata.version,description:r.metadata.description,tags:r.metadata.tags||[],tableCount:r.tables.length,templateCount:((m=r.templates)==null?void 0:m.length)||0,isPreloaded:a,source:i,author:r.metadata.author,sourceBook:(v=r.metadata.source)==null?void 0:v.book,sourcePublisher:(g=r.metadata.source)==null?void 0:g.publisher,hiddenFromUI:o},h=new Map(d);h.set(n,p),e({collections:h})},deleteCollection:async n=>{const{engine:r,collections:a}=t(),i=a.get(n);if(!i)throw new Error(`Collection not found: ${n}`);if(i.isPreloaded)throw new Error("Cannot delete pre-loaded collection");r.unloadCollection(n),await tj(n);const o=new Map(a);o.delete(n),e({collections:o})},hideCollection:async n=>{const{collections:r}=t(),a=r.get(n);if(!a)throw new Error(`Collection not found: ${n}`);await nj(n,!0);const i=new Map(r);i.set(n,{...a,hiddenFromUI:!0}),e({collections:i})},restoreHiddenCollections:async()=>{const{collections:n}=t(),r=await aj(),a=new Map(n);for(const[i,o]of a)o.hiddenFromUI&&a.set(i,{...o,hiddenFromUI:!1});return e({collections:a}),r},importFiles:async n=>kj(n),saveImportedCollections:async(n,r,a)=>{for(const i of n)await th({id:i.id,document:i.document,name:i.name,namespace:i.document.metadata.namespace,version:i.document.metadata.version,description:i.document.metadata.description,tags:i.document.metadata.tags||[],isPreloaded:!1,source:r,fileName:i.fileName,createdAt:Date.now(),updatedAt:Date.now()}),t().loadCollection(i.id,i.document,!1,r);a&&a.size>0&&t().engine.resolveImports(a)},saveCollection:async(n,r,a)=>{const i=t().collections.get(n),o=Date.now();let c=o;if(i){const d=await ej(n);c=(d==null?void 0:d.createdAt)??o}await th({id:n,document:r,name:r.metadata.name,namespace:r.metadata.namespace,version:r.metadata.version,description:r.metadata.description,tags:r.metadata.tags||[],isPreloaded:!1,source:a,createdAt:c,updatedAt:o}),t().loadCollection(n,r,!1,a),t().engine.resolveImports()},updateCollectionDocument:(n,r)=>{t().engine.updateDocument(n,r)},getCollection:n=>t().collections.get(n),getCollectionDocument:n=>{const r=t().engine.getCollection(n);return r==null?void 0:r.document},getPreloadedCollections:()=>Array.from(t().collections.values()).filter(n=>n.isPreloaded),getUserCollections:()=>Array.from(t().collections.values()).filter(n=>!n.isPreloaded),getAllCollections:()=>Array.from(t().collections.values()),getVisibleCollections:()=>Array.from(t().collections.values()).filter(n=>!n.hiddenFromUI),getHiddenCollections:()=>Array.from(t().collections.values()).filter(n=>n.hiddenFromUI),getTableList:n=>{try{return t().engine.listTables(n)}catch{return[]}},getTemplateList:n=>{try{return t().engine.listTemplates(n)}catch{return[]}},getImportedTableList:(n,r=!0)=>{try{return t().engine.listImportedTables(n,r)}catch{return[]}},getImportedTemplateList:n=>{try{return t().engine.listImportedTemplates(n)}catch{return[]}},getAllTags:()=>{const n=new Set;for(const r of t().collections.values())for(const a of r.tags)n.add(a);return Array.from(n).sort()}})),il=xl()((e,t)=>({stats:new Map,isLoaded:!1,loadError:null,recentItems:[],popularItems:[],loadStats:async()=>{if(!t().isLoaded)try{const[n,r,a]=await Promise.all([dm(),nh(10),rh(10)]),i=new Map;for(const o of n)i.set(o.id,o);e({stats:i,recentItems:r,popularItems:a,isLoaded:!0,loadError:null})}catch(n){console.error("Failed to load usage stats:",n),e({isLoaded:!0,loadError:n instanceof Error?n.message:"Failed to load usage stats"})}},recordUsage:async(n,r,a)=>{try{await hj(n,r,a);const[i,o]=await Promise.all([nh(10),rh(10)]),c=rf(n,r,a),d=await mj(n,r,a);e(p=>{const h=new Map(p.stats);return d&&h.set(c,d),{stats:h,recentItems:i,popularItems:o}})}catch(i){console.error("Failed to record usage:",i)}},clearStats:async()=>{try{await fj(),e({stats:new Map,recentItems:[],popularItems:[]})}catch(n){console.error("Failed to clear usage stats:",n)}},removeByCollection:async n=>{try{await gj(n);const[r,a,i]=await Promise.all([dm(),nh(10),rh(10)]),o=new Map;for(const c of r)o.set(c.id,c);e({stats:o,recentItems:a,popularItems:i})}catch(r){console.error("Failed to remove usage stats for collection:",r)}}})),sl=xl()(Yx((e,t)=>({selectedCollectionId:null,selectedTableId:null,selectedTemplateId:null,currentResult:null,isRolling:!1,rollError:null,traceEnabled:!1,history:[],historyLoaded:!1,historyError:null,selectCollection:n=>{e({selectedCollectionId:n,selectedTableId:null,selectedTemplateId:null,currentResult:null,rollError:null})},selectTable:n=>{e({selectedTableId:n,selectedTemplateId:null,currentResult:null,rollError:null})},selectTemplate:n=>{e({selectedTemplateId:n,selectedTableId:null,currentResult:null,rollError:null})},setTraceEnabled:n=>{e({traceEnabled:n})},roll:async()=>{const{selectedCollectionId:n,selectedTableId:r,selectedTemplateId:a}=t();return n?a?t().rollOnTemplate(n,a):r?t().rollOnTable(n,r):(e({rollError:"No table or template selected"}),null):(e({rollError:"No collection selected"}),null)},rollOnTable:async(n,r)=>{e({isRolling:!0,rollError:null});try{const a=dt.getState().engine,{traceEnabled:i}=t(),o=a.roll(r,n,{enableTrace:i}),d={id:await hb({result:o,collectionId:n,tableId:r,pinned:!1,timestamp:Date.now()}),result:o,collectionId:n,tableId:r,pinned:!1,timestamp:Date.now()};return e(p=>({currentResult:o,isRolling:!1,history:[d,...p.history].slice(0,100)})),il.getState().recordUsage(n,"table",r),o}catch(a){const i=a instanceof Error?a.message:"Roll failed";throw e({isRolling:!1,rollError:i}),a}},rollOnTemplate:async(n,r)=>{e({isRolling:!0,rollError:null});try{const a=dt.getState().engine,{traceEnabled:i}=t(),o=a.rollTemplate(r,n,{enableTrace:i}),d={id:await hb({result:o,collectionId:n,templateId:r,pinned:!1,timestamp:Date.now()}),result:o,collectionId:n,templateId:r,pinned:!1,timestamp:Date.now()};return e(p=>({currentResult:o,isRolling:!1,history:[d,...p.history].slice(0,100)})),il.getState().recordUsage(n,"template",r),o}catch(a){const i=a instanceof Error?a.message:"Roll failed";throw e({isRolling:!1,rollError:i}),a}},clearResult:()=>{e({currentResult:null,rollError:null})},loadHistory:async()=>{if(!t().historyLoaded)try{const n=await ij(100);e({history:n,historyLoaded:!0,historyError:null})}catch(n){console.error("Failed to load history:",n),e({historyLoaded:!0,historyError:n instanceof Error?n.message:"Failed to load roll history"})}},pinResult:async(n,r)=>{try{await sj(n,r),e(a=>({history:a.history.map(i=>i.id===n?{...i,pinned:r}:i)}))}catch(a){console.error("Failed to pin result:",a)}},deleteHistoryItem:async n=>{try{await oj(n),e(r=>({history:r.history.filter(a=>a.id!==n)}))}catch(r){console.error("Failed to delete history item:",r)}},clearHistory:async(n=!0)=>{await lj(n),e(n?r=>({history:r.history.filter(a=>a.pinned)}):{history:[]})}}),{name:"roll-store",partialize:e=>({selectedCollectionId:e.selectedCollectionId,selectedTableId:e.selectedTableId,selectedTemplateId:e.selectedTemplateId})}));function v0(e){const t=new Date(e),n=new Date,r=n.getTime()-t.getTime();return r<6e4?"Just now":r<36e5?`${Math.floor(r/6e4)}m ago`:r<864e5?`${Math.floor(r/36e5)}h ago`:t.getFullYear()===n.getFullYear()?t.toLocaleDateString(void 0,{month:"short",day:"numeric"}):t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}function Lc(e,t){const n=e.toLowerCase(),r=t.toLowerCase();if(r===n)return 100;if(r.startsWith(n))return 90;if(r.includes(n))return 70+n.length/r.length*20;const a=r.split(/\s+/);for(const c of a)if(c.startsWith(n))return 60;let i=0,o=0;for(let c=0;c<r.length&&i<n.length;c++)r[c]===n[i]&&(o+=1,i++);return i===n.length?30+o/r.length*20:0}function vb(e,t,n){const r=Lc(e,t.name)*1,a=t.description?Lc(e,t.description)*.5:0,i=t.tags?Math.max(...t.tags.map(c=>Lc(e,c)))*.4:0,o=Lc(e,n)*.3;return Math.max(r,a,i,o)}function NA(e,t={}){const{limit:n=50,includeHidden:r=!1}=t,a=dt(i=>i.collections);return w.useMemo(()=>{const i=Array.from(a.values());if(!e||e.length<2)return[];const{getTableList:o,getTemplateList:c}=dt.getState(),d=e.trim(),p=[];for(const h of i){if(h.hiddenFromUI)continue;const m=o(h.id),v=c(h.id);for(const g of m){if(g.hidden&&!r)continue;const x={id:g.id,name:g.name,type:"table",tableType:g.type,description:g.description,tags:g.tags,hidden:g.hidden,entryCount:g.entryCount,resultType:g.resultType},y=vb(d,x,h.name);y>0&&p.push({item:x,collectionId:h.id,collectionName:h.name,namespace:h.namespace,score:y})}for(const g of v){const x={id:g.id,name:g.name,type:"template",description:g.description,tags:g.tags,resultType:g.resultType},y=vb(d,x,h.name);y>0&&p.push({item:x,collectionId:h.id,collectionName:h.name,namespace:h.namespace,score:y})}}return p.sort((h,m)=>m.score-h.score).slice(0,n)},[e,a,n,r])}function CA(e){if(!e||!(e instanceof HTMLElement))return!1;const t=e.tagName.toLowerCase();return!!(t==="input"||t==="textarea"||t==="select"||e.isContentEditable||e.closest(".monaco-editor"))}function yb(e){return navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey}function af({shortcuts:e,enabled:t=!0}){const n=w.useCallback(r=>{if(t){for(const a of e)if(!(r.code!==a.key&&r.key!==a.key)&&!(a.ctrlOrCmd&&!yb(r))&&!(a.ctrlOrCmd===!1&&yb(r))&&!(a.shift&&!r.shiftKey)&&!(a.shift===!1&&r.shiftKey)&&!(a.alt&&!r.altKey)&&!(a.alt===!1&&r.altKey)&&!(a.key!=="Escape"&&CA(r.target))){a.preventDefault!==!1&&r.preventDefault(),a.handler(r);return}}},[e,t]);w.useEffect(()=>{if(t)return document.addEventListener("keydown",n),()=>{document.removeEventListener("keydown",n)}},[n,t])}function y0(e){const t=navigator.platform.toUpperCase().indexOf("MAC")>=0,n=[];e.ctrlOrCmd&&n.push(t?"":"Ctrl"),e.alt&&n.push(t?"":"Alt"),e.shift&&n.push(t?"":"Shift");let r=e.key;return r==="Space"?r="Space":r==="Escape"?r="Esc":r==="Enter"?r="":r.startsWith("Key")?r=r.slice(3):r==="Slash"&&(r="/"),n.push(r),t?n.join(""):n.join("+")}const b0={creature:sT,npc:wl,faction:HT,item:gT,loot:mu,treasure:mu,location:kT,encounter:Lx,event:oT,hook:nT,complication:ca,name:zx,trait:fT,effect:Ux,environment:ST,ability:Lu,description:Or,rumor:NT,dialogue:IT,statistic:zm,number:ui,currency:dT,time:hu,weather:uT},bb=[{value:"creature",label:"Creature",description:"Monsters, animals, beings"},{value:"npc",label:"NPC",description:"Non-player characters"},{value:"faction",label:"Faction",description:"Organizations, groups"},{value:"item",label:"Item",description:"Equipment, objects"},{value:"loot",label:"Loot",description:"Treasure packages"},{value:"location",label:"Location",description:"Places, areas"},{value:"encounter",label:"Encounter",description:"Combat/exploration events"},{value:"event",label:"Event",description:"Occurrences, happenings"},{value:"hook",label:"Hook",description:"Plot hooks, adventure seeds"},{value:"complication",label:"Complication",description:"Obstacles, problems"},{value:"name",label:"Name",description:"Names for anything"},{value:"trait",label:"Trait",description:"Characteristics, features"},{value:"effect",label:"Effect",description:"Spell effects, conditions"},{value:"environment",label:"Environment",description:"Weather, terrain"},{value:"ability",label:"Ability",description:"Skills, powers"},{value:"description",label:"Description",description:"Narrative text"},{value:"rumor",label:"Rumor",description:"Information, lore"},{value:"dialogue",label:"Dialogue",description:"Speech, conversation"},{value:"statistic",label:"Statistic",description:"Numbers, metrics"},{value:"number",label:"Number",description:"Pure numeric output"},{value:"currency",label:"Currency",description:"Money, values"},{value:"time",label:"Time",description:"Durations, timestamps"},{value:"weather",label:"Weather",description:"Weather conditions"}];function tr(e){return e?b0[e.toLowerCase()]??Vn:Vn}const SA=w.memo(function(){const t=nt(D=>D.isCommandPaletteOpen),n=nt(D=>D.closeCommandPalette),r=nt(D=>D.toggleCommandPalette),a=sl(D=>D.rollOnTable),i=sl(D=>D.rollOnTemplate),o=Gi(),[c,d]=w.useState(""),[p,h]=w.useState(0),[m,v]=w.useState(!1),g=w.useRef(null),x=w.useRef(null),y=NA(c,{limit:20});af({shortcuts:[{key:"KeyK",ctrlOrCmd:!0,handler:()=>r(),description:"Open command palette"}],enabled:!0}),w.useEffect(()=>{t&&(d(""),h(0),setTimeout(()=>{var D;return(D=g.current)==null?void 0:D.focus()},0))},[t]),w.useEffect(()=>{p>=y.length&&h(Math.max(0,y.length-1))},[y.length,p]),w.useEffect(()=>{if(!x.current||y.length===0)return;const D=x.current.children[p];D==null||D.scrollIntoView({block:"nearest"})},[p,y.length]);const k=w.useCallback(async D=>{v(!0);try{D.item.type==="table"?await a(D.collectionId,D.item.id):await i(D.collectionId,D.item.id),o(`/roll/${D.collectionId}/${D.item.id}`),n()}catch(_){console.error("Roll failed:",_)}finally{v(!1)}},[a,i,o,n]),N=w.useCallback(D=>{o(`/roll/${D.collectionId}/${D.item.id}`),n()},[o,n]),C=w.useCallback(D=>{switch(D.key){case"ArrowDown":D.preventDefault(),h(_=>Math.min(_+1,y.length-1));break;case"ArrowUp":D.preventDefault(),h(_=>Math.max(_-1,0));break;case"Enter":D.preventDefault(),y[p]&&(D.shiftKey?N(y[p]):k(y[p]));break;case"Escape":D.preventDefault(),n();break}},[y,p,k,N,n]),T=w.useCallback(D=>{D.target===D.currentTarget&&n()},[n]);if(!t)return null;const j=s.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-[10vh] md:pt-[15vh] bg-black/60 backdrop-blur-sm",onClick:T,role:"dialog","aria-modal":"true","aria-label":"Command palette",children:s.jsxs("div",{className:"w-full max-w-xl mx-4 bg-card border rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-150",onKeyDown:C,children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 border-b",children:[s.jsx(Pr,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),s.jsx("input",{ref:g,type:"text",className:"flex-1 bg-transparent text-foreground placeholder-muted-foreground outline-none text-base",placeholder:"Search tables and templates...",value:c,onChange:D=>d(D.target.value),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),s.jsx("kbd",{className:"hidden md:inline-flex items-center gap-1 px-2 py-1 text-xs font-mono text-muted-foreground bg-muted rounded",children:"esc"}),s.jsx("button",{onClick:n,className:"md:hidden p-1 hover:bg-accent rounded transition-colors","aria-label":"Close",children:s.jsx(Ut,{className:"w-5 h-5 text-muted-foreground"})})]}),s.jsx("div",{ref:x,className:"max-h-[60vh] overflow-auto",role:"listbox",children:c.length<2?s.jsxs("div",{className:"px-4 py-8 text-center text-muted-foreground",children:[s.jsx("p",{className:"text-sm",children:"Type to search tables and templates"}),s.jsxs("p",{className:"text-xs mt-2 opacity-60",children:["Press ",s.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-[10px]",children:"Enter"})," to roll,"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-[10px]",children:"Shift+Enter"})," to select"]})]}):y.length===0?s.jsxs("div",{className:"px-4 py-8 text-center text-muted-foreground",children:[s.jsx("p",{className:"text-sm",children:"No results found"}),s.jsx("p",{className:"text-xs mt-1 opacity-60",children:"Try a different search term"})]}):y.map((D,_)=>s.jsx(EA,{result:D,isSelected:_===p,isRolling:m&&_===p,onSelect:()=>N(D),onRoll:()=>k(D),onHover:()=>h(_)},`${D.collectionId}:${D.item.id}`))}),y.length>0&&s.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-2 border-t text-xs text-muted-foreground bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded",children:""}),"navigate"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded",children:""}),"roll"]}),s.jsxs("span",{className:"hidden md:flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded",children:""}),"select"]})]}),s.jsxs("span",{className:"hidden md:inline",children:[y0({key:"KeyK",ctrlOrCmd:!0})," to toggle"]})]})]})});return un.createPortal(j,document.body)}),EA=w.memo(function({result:t,isSelected:n,isRolling:r,onSelect:a,onRoll:i,onHover:o}){const{item:c,collectionName:d,namespace:p}=t,h=tr(c.resultType),m=c.type==="template"?wT:Or;return s.jsxs("div",{className:`
        group flex items-center gap-3 px-4 py-2.5 cursor-pointer transition-colors
        ${n?"bg-primary/10":"hover:bg-accent/50"}
      `,onClick:i,onMouseEnter:o,role:"option","aria-selected":n,children:[s.jsx("div",{className:`
        p-1.5 rounded-md flex-shrink-0
        ${c.type==="template"?"bg-lavender/20":"bg-mint/20"}
      `,children:s.jsx(h,{className:`w-4 h-4 ${c.type==="template"?"text-lavender":"text-mint"}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:c.name}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground truncate",children:[s.jsx(m,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:p}),s.jsx(sn,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:d})]})]}),s.jsxs("div",{className:`flex items-center gap-1 flex-shrink-0 ${n?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:[s.jsx("button",{className:"p-1.5 rounded-md bg-primary/20 text-primary hover:bg-primary/30 transition-colors",onClick:v=>{v.stopPropagation(),i()},disabled:r,"aria-label":`Roll ${c.name}`,title:"Roll (Enter)",children:s.jsx($n,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),s.jsx("button",{className:"p-1.5 rounded-md bg-accent text-accent-foreground hover:bg-accent/80 transition-colors",onClick:v=>{v.stopPropagation(),a()},"aria-label":`Go to ${c.name}`,title:"Select (Shift+Enter)",children:s.jsx(sn,{className:"w-4 h-4"})})]})]})}),Fs=xl()((e,t)=>({favorites:new Map,isLoaded:!1,loadError:null,loadFavorites:async()=>{if(!t().isLoaded)try{const n=await um(),r=new Map;for(const a of n)r.set(a.id,a);e({favorites:r,isLoaded:!0,loadError:null})}catch(n){console.error("Failed to load favorites:",n),e({isLoaded:!0,loadError:n instanceof Error?n.message:"Failed to load favorites"})}},addFavorite:async(n,r,a)=>{try{await uj(n,a,r);const i=Vo(n,a,r),c=(await um()).reduce((p,h)=>Math.max(p,h.sortOrder),0),d={id:i,collectionId:n,itemId:r,type:a,createdAt:Date.now(),sortOrder:c};e(p=>{const h=new Map(p.favorites);return h.set(i,d),{favorites:h}})}catch(i){console.error("Failed to add favorite:",i)}},removeFavorite:async(n,r,a)=>{try{await dj(n,a,r);const i=Vo(n,a,r);e(o=>{const c=new Map(o.favorites);return c.delete(i),{favorites:c}})}catch(i){console.error("Failed to remove favorite:",i)}},toggleFavorite:async(n,r,a)=>{const{isFavorite:i,addFavorite:o,removeFavorite:c}=t();i(n,r,a)?await c(n,r,a):await o(n,r,a)},isFavorite:(n,r,a)=>{const i=Vo(n,a,r);return t().favorites.has(i)},getFavorites:()=>Array.from(t().favorites.values()).sort((r,a)=>r.sortOrder-a.sortOrder),removeByCollection:async n=>{try{await pj(n),e(r=>{const a=new Map(r.favorites);for(const[i,o]of a)o.collectionId===n&&a.delete(i);return{favorites:a}})}catch(r){console.error("Failed to remove favorites for collection:",r)}}})),w0=w.memo(function({collectionId:t,itemId:n,type:r,size:a="sm",className:i,stopPropagation:o=!0}){const c=Fs(v=>v.isFavorite(t,n,r)),d=Fs(v=>v.toggleFavorite),p=v=>{o&&v.stopPropagation(),d(t,n,r)},h=a==="sm"?"w-3.5 h-3.5":"w-4 h-4",m=a==="sm"?"p-1.5":"p-2";return s.jsx("button",{className:J(m,"rounded-md transition-all duration-150",c?"text-amber bg-amber/20 hover:bg-amber/30":"text-muted-foreground/50 hover:text-amber hover:bg-white/5",i),onClick:p,"aria-label":c?"Remove from favorites":"Add to favorites",title:c?"Remove from favorites":"Add to favorites",children:s.jsx(Lu,{className:J(h,c&&"fill-current")})})}),x0="/assets/rollifyLogo-B151EpNy.png",ih=[{path:"/",icon:Px,label:"Home"},{path:"/library",icon:Ou,label:"Library"},{path:"/roll",icon:$n,label:"Roll"},{path:"/editor",icon:Pu,label:"Editor"},{path:"/guide",icon:Lr,label:"Guide"}];function TA(){const e=pa(),[t,n]=w.useState(!1),r=nt(a=>a.openCommandPalette);return s.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[s.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-xl",children:"Skip to main content"}),s.jsxs("header",{className:"sticky top-0 z-40 glass-card border-b border-border/50",role:"banner",children:[s.jsxs("div",{className:"container flex h-16 items-center justify-between",children:[s.jsxs(zn,{to:"/",className:"flex items-center gap-3 group",children:[s.jsx("img",{src:x0,alt:"Rolldeo logo",className:"h-10 w-10 rounded-xl group-hover:scale-105 transition-transform"}),s.jsx("span",{className:"font-bold text-xl tracking-tight",children:"Rolldeo"})]}),s.jsx("nav",{className:"hidden md:flex items-center gap-1","aria-label":"Main navigation",children:ih.map(a=>{const i=a.path==="/"?e.pathname==="/":e.pathname.startsWith(a.path);return s.jsxs(zn,{to:a.path,className:J("flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200",i?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[s.jsx(a.icon,{className:"h-4 w-4"}),a.label]},a.path)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 rounded-xl hover:bg-accent transition-colors group",onClick:r,"aria-label":"Search tables and templates",title:`Search (${y0({key:"KeyK",ctrlOrCmd:!0})})`,children:s.jsx(Pr,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})}),e.pathname.startsWith("/roll")&&s.jsx(L2,{}),s.jsx(z2,{}),s.jsx("button",{className:"md:hidden p-2 rounded-xl hover:bg-accent transition-colors",onClick:()=>n(!t),"aria-label":"Toggle menu",children:s.jsx(Km,{className:"h-5 w-5"})})]})]}),t&&s.jsx("div",{className:"md:hidden border-t border-border/50 bg-card/95 backdrop-blur-xl animate-slide-up",children:s.jsx("nav",{className:"container py-4 space-y-1","aria-label":"Mobile navigation",children:ih.map(a=>{const i=a.path==="/"?e.pathname==="/":e.pathname.startsWith(a.path);return s.jsxs(zn,{to:a.path,onClick:()=>n(!1),className:J("flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all",i?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[s.jsx(a.icon,{className:"h-5 w-5"}),a.label]},a.path)})})})]}),s.jsx("main",{id:"main-content",className:"flex-1 container py-8",role:"main",children:s.jsx(tE,{})}),s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 glass-card border-t border-border/50 safe-area-bottom","aria-label":"Mobile navigation",children:s.jsx("div",{className:"flex justify-around py-2",children:ih.map(a=>{const i=a.path==="/"?e.pathname==="/":e.pathname.startsWith(a.path);return s.jsxs(zn,{to:a.path,className:J("flex flex-col items-center gap-1 px-4 py-2 rounded-xl text-xs font-medium transition-all",i?"text-primary":"text-muted-foreground"),children:[s.jsx("div",{className:J("p-2 rounded-xl transition-all",i&&"bg-primary/10"),children:s.jsx(a.icon,{className:"h-5 w-5"})}),s.jsx("span",{className:J("transition-all",i?"opacity-100":"opacity-70"),children:a.label})]},a.path)})})}),s.jsx("div",{className:"md:hidden h-24"})]})}function k0({onFilesSelected:e,accept:t=[".json",".zip"],className:n,disabled:r=!1,children:a,variant:i="default"}){const[o,c]=w.useState(!1),d=w.useRef(null),p=w.useCallback(k=>{k.preventDefault(),k.stopPropagation(),r||c(!0)},[r]),h=w.useCallback(k=>{k.preventDefault(),k.stopPropagation(),c(!1)},[]),m=w.useCallback(k=>{if(k.preventDefault(),k.stopPropagation(),c(!1),r)return;const N=Array.from(k.dataTransfer.files).filter(fb);N.length>0&&e(N)},[r,e]),v=w.useCallback(()=>{!r&&d.current&&d.current.click()},[r]),g=w.useCallback(k=>{const N=Array.from(k.target.files||[]).filter(fb);N.length>0&&e(N),d.current&&(d.current.value="")},[e]),x=w.useCallback(k=>{(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),v())},[v]),y=i==="compact";return s.jsxs("div",{onDragOver:p,onDragLeave:h,onDrop:m,onClick:v,onKeyDown:x,role:"button",tabIndex:r?-1:0,"aria-label":"Drop files or click to browse","aria-disabled":r,className:J("relative card-elevated rounded-2xl text-center transition-all duration-300","border-2 border-dashed","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background",r?"cursor-not-allowed opacity-50 border-white/10":"cursor-pointer border-white/10 hover:border-primary/50 hover:bg-primary/5",o&&!r&&"border-primary bg-primary/10 scale-[1.01]",y?"p-4":"p-10",n),children:[s.jsx("div",{className:J("absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300","bg-gradient-to-br from-primary/10 via-transparent to-lavender/10",o&&"opacity-100")}),s.jsx("input",{ref:d,type:"file",accept:t.join(","),multiple:!0,onChange:g,className:"hidden",disabled:r}),a||(y?s.jsxs("div",{className:"relative flex items-center justify-center gap-3",children:[s.jsx("div",{className:J("icon-container icon-mint transition-transform duration-300",o&&"scale-110"),children:s.jsx(Ky,{className:"h-4 w-4"})}),s.jsx("p",{className:"text-sm text-muted-foreground",children:o?s.jsx("span",{className:"text-foreground font-medium",children:"Drop files here"}):s.jsxs(s.Fragment,{children:["Drop ",s.jsx("span",{className:"text-lavender font-medium",children:".json"})," or"," ",s.jsx("span",{className:"text-amber font-medium",children:".zip"})," files to import"]})})]}):s.jsxs("div",{className:"relative flex flex-col items-center gap-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-lavender",children:s.jsx(rl,{className:"h-5 w-5"})}),s.jsx("div",{className:J("icon-container icon-mint p-4 transition-transform duration-300",o&&"scale-110"),children:s.jsx(Ky,{className:"h-7 w-7"})}),s.jsx("div",{className:"icon-container icon-amber",children:s.jsx(Yy,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-foreground font-semibold text-lg",children:o?"Drop files here":"Drop files here or click to browse"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Accepts ",s.jsx("span",{className:"text-lavender font-medium",children:"JSON"})," and"," ",s.jsx("span",{className:"text-amber font-medium",children:"ZIP"})," files"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"pill pill-lavender",children:[s.jsx(rl,{className:"h-3 w-3 mr-1.5 inline"}),".json"]}),s.jsxs("span",{className:"pill pill-amber",children:[s.jsx(Yy,{className:"h-3 w-3 mr-1.5 inline"}),".zip"]})]})]}))]})}function N0({isOpen:e,onClose:t,result:n,isImporting:r}){return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm animate-fade-in",onClick:r?void 0:t,"aria-hidden":"true"}),s.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"import-dialog-title",className:"relative card-elevated border border-white/10 max-w-md w-full mx-4 max-h-[80vh] flex flex-col animate-slide-up",children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:J("icon-container",r?"icon-amber":n!=null&&n.success?"icon-mint":"icon-rose"),children:r?s.jsx(Er,{className:"h-5 w-5 animate-spin"}):n!=null&&n.success?s.jsx(mT,{className:"h-5 w-5"}):s.jsx(Mu,{className:"h-5 w-5"})}),s.jsx("h2",{id:"import-dialog-title",className:"text-lg font-semibold",children:r?"Importing...":"Import Results"})]}),!r&&s.jsx("button",{onClick:t,className:"p-2 rounded-xl hover:bg-white/5 transition-colors","aria-label":"Close dialog",children:s.jsx(Ut,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-5 overflow-y-auto flex-1",children:r?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"h-12 w-12 animate-spin text-primary"}),s.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"})]}),s.jsx("p",{className:"text-muted-foreground",children:"Processing files..."})]}):n?s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:J("flex items-center gap-4 p-4 rounded-xl border",n.success?"card-mint border-[hsl(var(--mint)/0.2)]":"card-rose border-[hsl(var(--rose)/0.2)]"),children:[n.success?s.jsx(Yh,{className:"h-6 w-6 text-mint shrink-0"}):s.jsx(Gy,{className:"h-6 w-6 text-rose shrink-0"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold",children:[n.collections.length," collection",n.collections.length!==1?"s":""," imported"]}),n.errors.length>0&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.errors.length," error",n.errors.length!==1?"s":""]})]})]}),n.collections.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-medium text-mint flex items-center gap-2 text-sm",children:[s.jsx(Yh,{className:"h-4 w-4"}),"Imported Successfully"]}),s.jsx("ul",{className:"space-y-2",children:n.collections.map(a=>s.jsxs("li",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[s.jsx("span",{className:"font-medium",children:a.name}),s.jsx("span",{className:"text-xs text-muted-foreground pill pill-outline",children:a.fileName})]},a.id))})]}),n.errors.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-medium text-rose flex items-center gap-2 text-sm",children:[s.jsx(Gy,{className:"h-4 w-4"}),"Errors"]}),s.jsx("ul",{className:"space-y-2",children:n.errors.map((a,i)=>s.jsxs("li",{className:"p-3 rounded-xl bg-rose/5 border border-rose/10",children:[s.jsx("p",{className:"font-medium text-sm mb-1",children:a.fileName}),s.jsx("p",{className:"text-rose text-sm",children:a.error})]},i))})]})]}):null}),!r&&s.jsx("div",{className:"p-5 border-t border-white/5",children:s.jsx("button",{onClick:t,className:"btn-primary w-full",children:n!=null&&n.success?"Continue to Library":"Close"})})]})]}):null}const DA="modulepreload",jA=function(e){return"/"+e},wb={},AA=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){let o=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=o(n.map(p=>{if(p=jA(p),p in wb)return;wb[p]=!0;const h=p.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":DA,h||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),h)return new Promise((g,x)=>{v.addEventListener("load",g),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};function _A(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const RA=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IA=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,$A={};function xb(e,t){return($A.jsx?IA:RA).test(e)}const MA=/[ \t\n\f\r]/g;function FA(e){return typeof e=="object"?e.type==="text"?kb(e.value):!1:kb(e)}function kb(e){return e.replace(MA,"")===""}class kl{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}kl.prototype.normal={};kl.prototype.property={};kl.prototype.space=void 0;function C0(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new kl(n,r,t)}function pm(e){return e.toLowerCase()}class fr{constructor(t,n){this.attribute=n,this.property=t}}fr.prototype.attribute="";fr.prototype.booleanish=!1;fr.prototype.boolean=!1;fr.prototype.commaOrSpaceSeparated=!1;fr.prototype.commaSeparated=!1;fr.prototype.defined=!1;fr.prototype.mustUseProperty=!1;fr.prototype.number=!1;fr.prototype.overloadedBoolean=!1;fr.prototype.property="";fr.prototype.spaceSeparated=!1;fr.prototype.space=void 0;let OA=0;const kt=Yi(),wn=Yi(),hm=Yi(),Pe=Yi(),Zt=Yi(),Is=Yi(),kr=Yi();function Yi(){return 2**++OA}const mm=Object.freeze(Object.defineProperty({__proto__:null,boolean:kt,booleanish:wn,commaOrSpaceSeparated:kr,commaSeparated:Is,number:Pe,overloadedBoolean:hm,spaceSeparated:Zt},Symbol.toStringTag,{value:"Module"})),sh=Object.keys(mm);class sf extends fr{constructor(t,n,r,a){let i=-1;if(super(t,n),Nb(this,"space",a),typeof r=="number")for(;++i<sh.length;){const o=sh[i];Nb(this,sh[i],(r&mm[o])===mm[o])}}}sf.prototype.defined=!0;function Nb(e,t,n){n&&(e[t]=n)}function qs(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const i=new sf(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[pm(r)]=r,n[pm(i.attribute)]=r}return new kl(t,n,e.space)}const S0=qs({properties:{ariaActiveDescendant:null,ariaAtomic:wn,ariaAutoComplete:null,ariaBusy:wn,ariaChecked:wn,ariaColCount:Pe,ariaColIndex:Pe,ariaColSpan:Pe,ariaControls:Zt,ariaCurrent:null,ariaDescribedBy:Zt,ariaDetails:null,ariaDisabled:wn,ariaDropEffect:Zt,ariaErrorMessage:null,ariaExpanded:wn,ariaFlowTo:Zt,ariaGrabbed:wn,ariaHasPopup:null,ariaHidden:wn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Zt,ariaLevel:Pe,ariaLive:null,ariaModal:wn,ariaMultiLine:wn,ariaMultiSelectable:wn,ariaOrientation:null,ariaOwns:Zt,ariaPlaceholder:null,ariaPosInSet:Pe,ariaPressed:wn,ariaReadOnly:wn,ariaRelevant:null,ariaRequired:wn,ariaRoleDescription:Zt,ariaRowCount:Pe,ariaRowIndex:Pe,ariaRowSpan:Pe,ariaSelected:wn,ariaSetSize:Pe,ariaSort:null,ariaValueMax:Pe,ariaValueMin:Pe,ariaValueNow:Pe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function E0(e,t){return t in e?e[t]:t}function T0(e,t){return E0(e,t.toLowerCase())}const PA=qs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Is,acceptCharset:Zt,accessKey:Zt,action:null,allow:null,allowFullScreen:kt,allowPaymentRequest:kt,allowUserMedia:kt,alt:null,as:null,async:kt,autoCapitalize:null,autoComplete:Zt,autoFocus:kt,autoPlay:kt,blocking:Zt,capture:null,charSet:null,checked:kt,cite:null,className:Zt,cols:Pe,colSpan:null,content:null,contentEditable:wn,controls:kt,controlsList:Zt,coords:Pe|Is,crossOrigin:null,data:null,dateTime:null,decoding:null,default:kt,defer:kt,dir:null,dirName:null,disabled:kt,download:hm,draggable:wn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:kt,formTarget:null,headers:Zt,height:Pe,hidden:hm,high:Pe,href:null,hrefLang:null,htmlFor:Zt,httpEquiv:Zt,id:null,imageSizes:null,imageSrcSet:null,inert:kt,inputMode:null,integrity:null,is:null,isMap:kt,itemId:null,itemProp:Zt,itemRef:Zt,itemScope:kt,itemType:Zt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:kt,low:Pe,manifest:null,max:null,maxLength:Pe,media:null,method:null,min:null,minLength:Pe,multiple:kt,muted:kt,name:null,nonce:null,noModule:kt,noValidate:kt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:kt,optimum:Pe,pattern:null,ping:Zt,placeholder:null,playsInline:kt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:kt,referrerPolicy:null,rel:Zt,required:kt,reversed:kt,rows:Pe,rowSpan:Pe,sandbox:Zt,scope:null,scoped:kt,seamless:kt,selected:kt,shadowRootClonable:kt,shadowRootDelegatesFocus:kt,shadowRootMode:null,shape:null,size:Pe,sizes:null,slot:null,span:Pe,spellCheck:wn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Pe,step:null,style:null,tabIndex:Pe,target:null,title:null,translate:null,type:null,typeMustMatch:kt,useMap:null,value:wn,width:Pe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Zt,axis:null,background:null,bgColor:null,border:Pe,borderColor:null,bottomMargin:Pe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:kt,declare:kt,event:null,face:null,frame:null,frameBorder:null,hSpace:Pe,leftMargin:Pe,link:null,longDesc:null,lowSrc:null,marginHeight:Pe,marginWidth:Pe,noResize:kt,noHref:kt,noShade:kt,noWrap:kt,object:null,profile:null,prompt:null,rev:null,rightMargin:Pe,rules:null,scheme:null,scrolling:wn,standby:null,summary:null,text:null,topMargin:Pe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Pe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:kt,disableRemotePlayback:kt,prefix:null,property:null,results:Pe,security:null,unselectable:null},space:"html",transform:T0}),LA=qs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:kr,accentHeight:Pe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Pe,amplitude:Pe,arabicForm:null,ascent:Pe,attributeName:null,attributeType:null,azimuth:Pe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Pe,by:null,calcMode:null,capHeight:Pe,className:Zt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Pe,diffuseConstant:Pe,direction:null,display:null,dur:null,divisor:Pe,dominantBaseline:null,download:kt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Pe,enableBackground:null,end:null,event:null,exponent:Pe,externalResourcesRequired:null,fill:null,fillOpacity:Pe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Is,g2:Is,glyphName:Is,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Pe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Pe,horizOriginX:Pe,horizOriginY:Pe,id:null,ideographic:Pe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Pe,k:Pe,k1:Pe,k2:Pe,k3:Pe,k4:Pe,kernelMatrix:kr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Pe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Pe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Pe,overlineThickness:Pe,paintOrder:null,panose1:null,path:null,pathLength:Pe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Zt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Pe,pointsAtY:Pe,pointsAtZ:Pe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kr,rev:kr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kr,requiredFeatures:kr,requiredFonts:kr,requiredFormats:kr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Pe,specularExponent:Pe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Pe,strikethroughThickness:Pe,string:null,stroke:null,strokeDashArray:kr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Pe,strokeOpacity:Pe,strokeWidth:null,style:null,surfaceScale:Pe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kr,tabIndex:Pe,tableValues:null,target:null,targetX:Pe,targetY:Pe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Pe,underlineThickness:Pe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Pe,values:null,vAlphabetic:Pe,vMathematical:Pe,vectorEffect:null,vHanging:Pe,vIdeographic:Pe,version:null,vertAdvY:Pe,vertOriginX:Pe,vertOriginY:Pe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Pe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:E0}),D0=qs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),j0=qs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:T0}),A0=qs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),zA={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},BA=/[A-Z]/g,Cb=/-[a-z]/g,UA=/^data[-\w.:]+$/i;function HA(e,t){const n=pm(t);let r=t,a=fr;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&UA.test(t)){if(t.charAt(4)==="-"){const i=t.slice(5).replace(Cb,WA);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=t.slice(4);if(!Cb.test(i)){let o=i.replace(BA,qA);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=sf}return new a(r,t)}function qA(e){return"-"+e.toLowerCase()}function WA(e){return e.charAt(1).toUpperCase()}const VA=C0([S0,PA,D0,j0,A0],"html"),of=C0([S0,LA,D0,j0,A0],"svg");function GA(e){return e.join(" ").trim()}var xs={},oh,Sb;function KA(){if(Sb)return oh;Sb=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,p="/",h="*",m="",v="comment",g="declaration";function x(k,N){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];N=N||{};var C=1,T=1;function j(E){var L=E.match(t);L&&(C+=L.length);var Z=E.lastIndexOf(d);T=~Z?E.length-Z:T+E.length}function D(){var E={line:C,column:T};return function(L){return L.position=new _(E),z(),L}}function _(E){this.start=E,this.end={line:C,column:T},this.source=N.source}_.prototype.content=k;function I(E){var L=new Error(N.source+":"+C+":"+T+": "+E);if(L.reason=E,L.filename=N.source,L.line=C,L.column=T,L.source=k,!N.silent)throw L}function R(E){var L=E.exec(k);if(L){var Z=L[0];return j(Z),k=k.slice(Z.length),L}}function z(){R(n)}function P(E){var L;for(E=E||[];L=q();)L!==!1&&E.push(L);return E}function q(){var E=D();if(!(p!=k.charAt(0)||h!=k.charAt(1))){for(var L=2;m!=k.charAt(L)&&(h!=k.charAt(L)||p!=k.charAt(L+1));)++L;if(L+=2,m===k.charAt(L-1))return I("End of comment missing");var Z=k.slice(2,L-2);return T+=2,j(Z),k=k.slice(L),T+=2,E({type:v,comment:Z})}}function $(){var E=D(),L=R(r);if(L){if(q(),!R(a))return I("property missing ':'");var Z=R(i),X=E({type:g,property:y(L[0].replace(e,m)),value:Z?y(Z[0].replace(e,m)):m});return R(o),X}}function G(){var E=[];P(E);for(var L;L=$();)L!==!1&&(E.push(L),P(E));return E}return z(),G()}function y(k){return k?k.replace(c,m):m}return oh=x,oh}var Eb;function YA(){if(Eb)return xs;Eb=1;var e=xs&&xs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xs,"__esModule",{value:!0}),xs.default=n;const t=e(KA());function n(r,a){let i=null;if(!r||typeof r!="string")return i;const o=(0,t.default)(r),c=typeof a=="function";return o.forEach(d=>{if(d.type!=="declaration")return;const{property:p,value:h}=d;c?a(p,h,d):h&&(i=i||{},i[p]=h)}),i}return xs}var Fo={},Tb;function ZA(){if(Tb)return Fo;Tb=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(p){return!p||n.test(p)||e.test(p)},o=function(p,h){return h.toUpperCase()},c=function(p,h){return"".concat(h,"-")},d=function(p,h){return h===void 0&&(h={}),i(p)?p:(p=p.toLowerCase(),h.reactCompat?p=p.replace(a,c):p=p.replace(r,c),p.replace(t,o))};return Fo.camelCase=d,Fo}var Oo,Db;function QA(){if(Db)return Oo;Db=1;var e=Oo&&Oo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},t=e(YA()),n=ZA();function r(a,i){var o={};return!a||typeof a!="string"||(0,t.default)(a,function(c,d){c&&d&&(o[(0,n.camelCase)(c,i)]=d)}),o}return r.default=r,Oo=r,Oo}var JA=QA();const XA=Ta(JA),_0=R0("end"),lf=R0("start");function R0(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function e_(e){const t=lf(e),n=_0(e);if(t&&n)return{start:t,end:n}}function Go(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?jb(e.position):"start"in e||"end"in e?jb(e):"line"in e||"column"in e?fm(e):""}function fm(e){return Ab(e&&e.line)+":"+Ab(e&&e.column)}function jb(e){return fm(e&&e.start)+"-"+fm(e&&e.end)}function Ab(e){return e&&typeof e=="number"?e:1}class Gn extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof t=="string"?a=t:!i.cause&&t&&(o=!0,a=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?i.ruleId=r:(i.source=r.slice(0,d),i.ruleId=r.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=c?c.line:void 0,this.name=Go(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Gn.prototype.file="";Gn.prototype.name="";Gn.prototype.reason="";Gn.prototype.message="";Gn.prototype.stack="";Gn.prototype.column=void 0;Gn.prototype.line=void 0;Gn.prototype.ancestors=void 0;Gn.prototype.cause=void 0;Gn.prototype.fatal=void 0;Gn.prototype.place=void 0;Gn.prototype.ruleId=void 0;Gn.prototype.source=void 0;const cf={}.hasOwnProperty,t_=new Map,n_=/[A-Z]/g,r_=new Set(["table","tbody","thead","tfoot","tr"]),a_=new Set(["td","th"]),I0="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function i_(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=h_(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=p_(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?of:VA,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=$0(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function $0(e,t,n){if(t.type==="element")return s_(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return o_(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return c_(e,t,n);if(t.type==="mdxjsEsm")return l_(e,t);if(t.type==="root")return u_(e,t,n);if(t.type==="text")return d_(e,t)}function s_(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=of,e.schema=a),e.ancestors.push(t);const i=F0(e,t.tagName,!1),o=m_(e,t);let c=df(e,t);return r_.has(t.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!FA(d):!0})),M0(e,o,i,t),uf(o,c),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function o_(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ol(e,t.position)}function l_(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ol(e,t.position)}function c_(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=of,e.schema=a),e.ancestors.push(t);const i=t.name===null?e.Fragment:F0(e,t.name,!0),o=f_(e,t),c=df(e,t);return M0(e,o,i,t),uf(o,c),e.ancestors.pop(),e.schema=r,e.create(t,i,o,n)}function u_(e,t,n){const r={};return uf(r,df(e,t)),e.create(t,e.Fragment,r,n)}function d_(e,t){return t.value}function M0(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function uf(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function p_(e,t,n){return r;function r(a,i,o,c){const p=Array.isArray(o.children)?n:t;return c?p(i,o,c):p(i,o)}}function h_(e,t){return n;function n(r,a,i,o){const c=Array.isArray(i.children),d=lf(r);return t(a,i,o,c,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function m_(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&cf.call(t.properties,a)){const i=g_(e,a,t.properties[a]);if(i){const[o,c]=i;e.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&a_.has(t.tagName)?r=c:n[o]=c}}if(r){const i=n.style||(n.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function f_(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const i=r.data.estree.body[0];i.type;const o=i.expression;o.type;const c=o.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else ol(e,t.position);else{const a=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const c=r.value.data.estree.body[0];c.type,i=e.evaluater.evaluateExpression(c.expression)}else ol(e,t.position);else i=r.value===null?!0:r.value;n[a]=i}return n}function df(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:t_;for(;++r<t.children.length;){const i=t.children[r];let o;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const p=a.get(d)||0;o=d+"-"+p,a.set(d,p+1)}}const c=$0(e,i,o);c!==void 0&&n.push(c)}return n}function g_(e,t,n){const r=HA(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?_A(n):GA(n)),r.property==="style"){let a=typeof n=="object"?n:v_(e,String(n));return e.stylePropertyNameCase==="css"&&(a=y_(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?zA[r.property]||r.property:r.attribute,n]}}function v_(e,t){try{return XA(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new Gn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=I0+"#cannot-parse-style-attribute",a}}function F0(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let i=-1,o;for(;++i<a.length;){const c=xb(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(i&&c.type==="Literal"),optional:!1}:c}r=o}else r=xb(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return cf.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);ol(e)}function ol(e,t){const n=new Gn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=I0+"#cannot-handle-mdx-estrees-without-createevaluater",n}function y_(e){const t={};let n;for(n in e)cf.call(e,n)&&(t[b_(n)]=e[n]);return t}function b_(e){let t=e.replace(n_,w_);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function w_(e){return"-"+e.toLowerCase()}const lh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},x_={};function pf(e,t){const n=x_,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return O0(e,r,a)}function O0(e,t,n){if(k_(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _b(e.children,t,n)}return Array.isArray(e)?_b(e,t,n):""}function _b(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=O0(e[a],t,n);return r.join("")}function k_(e){return!!(e&&typeof e=="object")}const Rb=document.createElement("i");function hf(e){const t="&"+e+";";Rb.innerHTML=t;const n=Rb.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Sr(e,t,n,r){const a=e.length;let i=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(t,0),e.splice(...o),i+=1e4,t+=1e4}function Fr(e,t){return e.length>0?(Sr(e,e.length,0,t),e):t}const Ib={}.hasOwnProperty;function P0(e){const t={};let n=-1;for(;++n<e.length;)N_(t,e[n]);return t}function N_(e,t){let n;for(n in t){const a=(Ib.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){Ib.call(a,o)||(a[o]=[]);const c=i[o];C_(a[o],Array.isArray(c)?c:c?[c]:[])}}}function C_(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Sr(e,0,0,r)}function L0(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Jr(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const er=di(/[A-Za-z]/),Wn=di(/[\dA-Za-z]/),S_=di(/[#-'*+\--9=?A-Z^-~]/);function yu(e){return e!==null&&(e<32||e===127)}const gm=di(/\d/),E_=di(/[\dA-Fa-f]/),T_=di(/[!-/:-@[-`{-~]/);function ct(e){return e!==null&&e<-2}function Kt(e){return e!==null&&(e<0||e===32)}function St(e){return e===-2||e===-1||e===32}const qu=di(new RegExp("\\p{P}|\\p{S}","u")),qi=di(/\s/);function di(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Ws(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const i=e.charCodeAt(n);let o="";if(i===37&&Wn(e.charCodeAt(n+1))&&Wn(e.charCodeAt(n+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const c=e.charCodeAt(n+1);i<56320&&c>56319&&c<57344?(o=String.fromCharCode(i,c),a=1):o=""}else o=String.fromCharCode(i);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function It(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(d){return St(d)?(e.enter(n),c(d)):t(d)}function c(d){return St(d)&&i++<a?(e.consume(d),c):(e.exit(n),t(d))}}const D_={tokenize:j_};function j_(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),It(e,t,"linePrefix")}function a(c){return e.enter("paragraph"),i(c)}function i(c){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,o(c)}function o(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return ct(c)?(e.consume(c),e.exit("chunkText"),i):(e.consume(c),o)}}const A_={tokenize:__},$b={tokenize:R_};function __(e){const t=this,n=[];let r=0,a,i,o;return c;function c(T){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,d,p)(T)}return p(T)}function d(T){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&C();const j=t.events.length;let D=j,_;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){_=t.events[D][1].end;break}N(r);let I=j;for(;I<t.events.length;)t.events[I][1].end={..._},I++;return Sr(t.events,D+1,0,t.events.slice(j)),t.events.length=I,p(T)}return c(T)}function p(T){if(r===n.length){if(!a)return v(T);if(a.currentConstruct&&a.currentConstruct.concrete)return x(T);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check($b,h,m)(T)}function h(T){return a&&C(),N(r),v(T)}function m(T){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,x(T)}function v(T){return t.containerState={},e.attempt($b,g,x)(T)}function g(T){return r++,n.push([t.currentConstruct,t.containerState]),v(T)}function x(T){if(T===null){a&&C(),N(0),e.consume(T);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),y(T)}function y(T){if(T===null){k(e.exit("chunkFlow"),!0),N(0),e.consume(T);return}return ct(T)?(e.consume(T),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,c):(e.consume(T),y)}function k(T,j){const D=t.sliceStream(T);if(j&&D.push(null),T.previous=i,i&&(i.next=T),i=T,a.defineSkip(T.start),a.write(D),t.parser.lazy[T.start.line]){let _=a.events.length;for(;_--;)if(a.events[_][1].start.offset<o&&(!a.events[_][1].end||a.events[_][1].end.offset>o))return;const I=t.events.length;let R=I,z,P;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(z){P=t.events[R][1].end;break}z=!0}for(N(r),_=I;_<t.events.length;)t.events[_][1].end={...P},_++;Sr(t.events,R+1,0,t.events.slice(I)),t.events.length=_}}function N(T){let j=n.length;for(;j-- >T;){const D=n[j];t.containerState=D[1],D[0].exit.call(t,e)}n.length=T}function C(){a.write([null]),i=void 0,a=void 0,t.containerState._closeFlow=void 0}}function R_(e,t,n){return It(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Os(e){if(e===null||Kt(e)||qi(e))return 1;if(qu(e))return 2}function Wu(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}const vm={name:"attention",resolveAll:I_,tokenize:$_};function I_(e,t){let n=-1,r,a,i,o,c,d,p,h;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},v={...e[n][1].start};Mb(m,-d),Mb(v,d),o={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:v},i={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:d>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},e[r][1].end={...o.start},e[n][1].start={...c.end},p=[],e[r][1].end.offset-e[r][1].start.offset&&(p=Fr(p,[["enter",e[r][1],t],["exit",e[r][1],t]])),p=Fr(p,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",i,t]]),p=Fr(p,Wu(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),p=Fr(p,[["exit",i,t],["enter",c,t],["exit",c,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(h=2,p=Fr(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):h=0,Sr(e,r-1,n-r+3,p),n=r+p.length-h-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function $_(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Os(r);let i;return o;function o(d){return i=d,e.enter("attentionSequence"),c(d)}function c(d){if(d===i)return e.consume(d),c;const p=e.exit("attentionSequence"),h=Os(d),m=!h||h===2&&a||n.includes(d),v=!a||a===2&&h||n.includes(r);return p._open=!!(i===42?m:m&&(a||!v)),p._close=!!(i===42?v:v&&(h||!m)),t(d)}}function Mb(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const M_={name:"autolink",tokenize:F_};function F_(e,t,n){let r=0;return a;function a(g){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(g){return er(g)?(e.consume(g),o):g===64?n(g):p(g)}function o(g){return g===43||g===45||g===46||Wn(g)?(r=1,c(g)):p(g)}function c(g){return g===58?(e.consume(g),r=0,d):(g===43||g===45||g===46||Wn(g))&&r++<32?(e.consume(g),c):(r=0,p(g))}function d(g){return g===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):g===null||g===32||g===60||yu(g)?n(g):(e.consume(g),d)}function p(g){return g===64?(e.consume(g),h):S_(g)?(e.consume(g),p):n(g)}function h(g){return Wn(g)?m(g):n(g)}function m(g){return g===46?(e.consume(g),r=0,h):g===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(g),e.exit("autolinkMarker"),e.exit("autolink"),t):v(g)}function v(g){if((g===45||Wn(g))&&r++<63){const x=g===45?v:m;return e.consume(g),x}return n(g)}}const Nl={partial:!0,tokenize:O_};function O_(e,t,n){return r;function r(i){return St(i)?It(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||ct(i)?t(i):n(i)}}const z0={continuation:{tokenize:L_},exit:z_,name:"blockQuote",tokenize:P_};function P_(e,t,n){const r=this;return a;function a(o){if(o===62){const c=r.containerState;return c.open||(e.enter("blockQuote",{_container:!0}),c.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return n(o)}function i(o){return St(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function L_(e,t,n){const r=this;return a;function a(o){return St(o)?It(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(z0,t,n)(o)}}function z_(e){e.exit("blockQuote")}const B0={name:"characterEscape",tokenize:B_};function B_(e,t,n){return r;function r(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return T_(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}const U0={name:"characterReference",tokenize:U_};function U_(e,t,n){const r=this;let a=0,i,o;return c;function c(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),i=31,o=Wn,h(m))}function p(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=E_,h):(e.enter("characterReferenceValue"),i=7,o=gm,h(m))}function h(m){if(m===59&&a){const v=e.exit("characterReferenceValue");return o===Wn&&!hf(r.sliceSerialize(v))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(m)&&a++<i?(e.consume(m),h):n(m)}}const Fb={partial:!0,tokenize:q_},Ob={concrete:!0,name:"codeFenced",tokenize:H_};function H_(e,t,n){const r=this,a={partial:!0,tokenize:D};let i=0,o=0,c;return d;function d(_){return p(_)}function p(_){const I=r.events[r.events.length-1];return i=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,c=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),h(_)}function h(_){return _===c?(o++,e.consume(_),h):o<3?n(_):(e.exit("codeFencedFenceSequence"),St(_)?It(e,m,"whitespace")(_):m(_))}function m(_){return _===null||ct(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(Fb,y,j)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),v(_))}function v(_){return _===null||ct(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(_)):St(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),It(e,g,"whitespace")(_)):_===96&&_===c?n(_):(e.consume(_),v)}function g(_){return _===null||ct(_)?m(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(_))}function x(_){return _===null||ct(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(_)):_===96&&_===c?n(_):(e.consume(_),x)}function y(_){return e.attempt(a,j,k)(_)}function k(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),N}function N(_){return i>0&&St(_)?It(e,C,"linePrefix",i+1)(_):C(_)}function C(_){return _===null||ct(_)?e.check(Fb,y,j)(_):(e.enter("codeFlowValue"),T(_))}function T(_){return _===null||ct(_)?(e.exit("codeFlowValue"),C(_)):(e.consume(_),T)}function j(_){return e.exit("codeFenced"),t(_)}function D(_,I,R){let z=0;return P;function P(L){return _.enter("lineEnding"),_.consume(L),_.exit("lineEnding"),q}function q(L){return _.enter("codeFencedFence"),St(L)?It(_,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):$(L)}function $(L){return L===c?(_.enter("codeFencedFenceSequence"),G(L)):R(L)}function G(L){return L===c?(z++,_.consume(L),G):z>=o?(_.exit("codeFencedFenceSequence"),St(L)?It(_,E,"whitespace")(L):E(L)):R(L)}function E(L){return L===null||ct(L)?(_.exit("codeFencedFence"),I(L)):R(L)}}}function q_(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const ch={name:"codeIndented",tokenize:V_},W_={partial:!0,tokenize:G_};function V_(e,t,n){const r=this;return a;function a(p){return e.enter("codeIndented"),It(e,i,"linePrefix",5)(p)}function i(p){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?o(p):n(p)}function o(p){return p===null?d(p):ct(p)?e.attempt(W_,o,d)(p):(e.enter("codeFlowValue"),c(p))}function c(p){return p===null||ct(p)?(e.exit("codeFlowValue"),o(p)):(e.consume(p),c)}function d(p){return e.exit("codeIndented"),t(p)}}function G_(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):ct(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):It(e,i,"linePrefix",5)(o)}function i(o){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(o):ct(o)?a(o):n(o)}}const K_={name:"codeText",previous:Z_,resolve:Y_,tokenize:Q_};function Y_(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function Z_(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Q_(e,t,n){let r=0,a,i;return o;function o(m){return e.enter("codeText"),e.enter("codeTextSequence"),c(m)}function c(m){return m===96?(e.consume(m),r++,c):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(i=e.enter("codeTextSequence"),a=0,h(m)):ct(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),p(m))}function p(m){return m===null||m===32||m===96||ct(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),p)}function h(m){return m===96?(e.consume(m),a++,h):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(i.type="codeTextData",p(m))}}class J_{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Po(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Po(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Po(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Po(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Po(this.left,n.reverse())}}}function Po(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function H0(e){const t={};let n=-1,r,a,i,o,c,d,p;const h=new J_(e);for(;++n<h.length;){for(;n in t;)n=t[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,X_(h,n)),n=t[n],p=!0);else if(r[1]._container){for(i=n,a=void 0;i--;)if(o=h.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(h.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...h.get(a)[1].start},c=h.slice(a,n),c.unshift(r),h.splice(a,n-a+1,c))}}return Sr(e,0,Number.POSITIVE_INFINITY,h.slice(0)),!p}function X_(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const i=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,d=[],p={};let h,m,v=-1,g=n,x=0,y=0;const k=[y];for(;g;){for(;e.get(++a)[1]!==g;);i.push(a),g._tokenizer||(h=r.sliceStream(g),g.next||h.push(null),m&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(h),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=g,g=g.next}for(g=n;++v<c.length;)c[v][0]==="exit"&&c[v-1][0]==="enter"&&c[v][1].type===c[v-1][1].type&&c[v][1].start.line!==c[v][1].end.line&&(y=v+1,k.push(y),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):k.pop(),v=k.length;v--;){const N=c.slice(k[v],k[v+1]),C=i.pop();d.push([C,C+N.length-1]),e.splice(C,2,N)}for(d.reverse(),v=-1;++v<d.length;)p[x+d[v][0]]=x+d[v][1],x+=d[v][1]-d[v][0]-1;return p}const eR={resolve:nR,tokenize:rR},tR={partial:!0,tokenize:aR};function nR(e){return H0(e),e}function rR(e,t){let n;return r;function r(c){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(c)}function a(c){return c===null?i(c):ct(c)?e.check(tR,o,i)(c):(e.consume(c),a)}function i(c){return e.exit("chunkContent"),e.exit("content"),t(c)}function o(c){return e.consume(c),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function aR(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),It(e,i,"linePrefix")}function i(o){if(o===null||ct(o))return n(o);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function q0(e,t,n,r,a,i,o,c,d){const p=d||Number.POSITIVE_INFINITY;let h=0;return m;function m(N){return N===60?(e.enter(r),e.enter(a),e.enter(i),e.consume(N),e.exit(i),v):N===null||N===32||N===41||yu(N)?n(N):(e.enter(r),e.enter(o),e.enter(c),e.enter("chunkString",{contentType:"string"}),y(N))}function v(N){return N===62?(e.enter(i),e.consume(N),e.exit(i),e.exit(a),e.exit(r),t):(e.enter(c),e.enter("chunkString",{contentType:"string"}),g(N))}function g(N){return N===62?(e.exit("chunkString"),e.exit(c),v(N)):N===null||N===60||ct(N)?n(N):(e.consume(N),N===92?x:g)}function x(N){return N===60||N===62||N===92?(e.consume(N),g):g(N)}function y(N){return!h&&(N===null||N===41||Kt(N))?(e.exit("chunkString"),e.exit(c),e.exit(o),e.exit(r),t(N)):h<p&&N===40?(e.consume(N),h++,y):N===41?(e.consume(N),h--,y):N===null||N===32||N===40||yu(N)?n(N):(e.consume(N),N===92?k:y)}function k(N){return N===40||N===41||N===92?(e.consume(N),y):y(N)}}function W0(e,t,n,r,a,i){const o=this;let c=0,d;return p;function p(g){return e.enter(r),e.enter(a),e.consume(g),e.exit(a),e.enter(i),h}function h(g){return c>999||g===null||g===91||g===93&&!d||g===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(e.exit(i),e.enter(a),e.consume(g),e.exit(a),e.exit(r),t):ct(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),h):(e.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===null||g===91||g===93||ct(g)||c++>999?(e.exit("chunkString"),h(g)):(e.consume(g),d||(d=!St(g)),g===92?v:m)}function v(g){return g===91||g===92||g===93?(e.consume(g),c++,m):m(g)}}function V0(e,t,n,r,a,i){let o;return c;function c(v){return v===34||v===39||v===40?(e.enter(r),e.enter(a),e.consume(v),e.exit(a),o=v===40?41:v,d):n(v)}function d(v){return v===o?(e.enter(a),e.consume(v),e.exit(a),e.exit(r),t):(e.enter(i),p(v))}function p(v){return v===o?(e.exit(i),d(o)):v===null?n(v):ct(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),It(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===o||v===null||ct(v)?(e.exit("chunkString"),p(v)):(e.consume(v),v===92?m:h)}function m(v){return v===o||v===92?(e.consume(v),h):h(v)}}function Ko(e,t){let n;return r;function r(a){return ct(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):St(a)?It(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const iR={name:"definition",tokenize:oR},sR={partial:!0,tokenize:lR};function oR(e,t,n){const r=this;let a;return i;function i(g){return e.enter("definition"),o(g)}function o(g){return W0.call(r,e,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function c(g){return a=Jr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),d):n(g)}function d(g){return Kt(g)?Ko(e,p)(g):p(g)}function p(g){return q0(e,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function h(g){return e.attempt(sR,m,m)(g)}function m(g){return St(g)?It(e,v,"whitespace")(g):v(g)}function v(g){return g===null||ct(g)?(e.exit("definition"),r.parser.defined.push(a),t(g)):n(g)}}function lR(e,t,n){return r;function r(c){return Kt(c)?Ko(e,a)(c):n(c)}function a(c){return V0(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return St(c)?It(e,o,"whitespace")(c):o(c)}function o(c){return c===null||ct(c)?t(c):n(c)}}const cR={name:"hardBreakEscape",tokenize:uR};function uR(e,t,n){return r;function r(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return ct(i)?(e.exit("hardBreakEscape"),t(i)):n(i)}}const dR={name:"headingAtx",resolve:pR,tokenize:hR};function pR(e,t){let n=e.length-2,r=3,a,i;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},i={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Sr(e,r,n-r+1,[["enter",a,t],["enter",i,t],["exit",i,t],["exit",a,t]])),e}function hR(e,t,n){let r=0;return a;function a(h){return e.enter("atxHeading"),i(h)}function i(h){return e.enter("atxHeadingSequence"),o(h)}function o(h){return h===35&&r++<6?(e.consume(h),o):h===null||Kt(h)?(e.exit("atxHeadingSequence"),c(h)):n(h)}function c(h){return h===35?(e.enter("atxHeadingSequence"),d(h)):h===null||ct(h)?(e.exit("atxHeading"),t(h)):St(h)?It(e,c,"whitespace")(h):(e.enter("atxHeadingText"),p(h))}function d(h){return h===35?(e.consume(h),d):(e.exit("atxHeadingSequence"),c(h))}function p(h){return h===null||h===35||Kt(h)?(e.exit("atxHeadingText"),c(h)):(e.consume(h),p)}}const mR=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pb=["pre","script","style","textarea"],fR={concrete:!0,name:"htmlFlow",resolveTo:yR,tokenize:bR},gR={partial:!0,tokenize:xR},vR={partial:!0,tokenize:wR};function yR(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function bR(e,t,n){const r=this;let a,i,o,c,d;return p;function p(B){return h(B)}function h(B){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(B),m}function m(B){return B===33?(e.consume(B),v):B===47?(e.consume(B),i=!0,y):B===63?(e.consume(B),a=3,r.interrupt?t:U):er(B)?(e.consume(B),o=String.fromCharCode(B),k):n(B)}function v(B){return B===45?(e.consume(B),a=2,g):B===91?(e.consume(B),a=5,c=0,x):er(B)?(e.consume(B),a=4,r.interrupt?t:U):n(B)}function g(B){return B===45?(e.consume(B),r.interrupt?t:U):n(B)}function x(B){const le="CDATA[";return B===le.charCodeAt(c++)?(e.consume(B),c===le.length?r.interrupt?t:$:x):n(B)}function y(B){return er(B)?(e.consume(B),o=String.fromCharCode(B),k):n(B)}function k(B){if(B===null||B===47||B===62||Kt(B)){const le=B===47,pe=o.toLowerCase();return!le&&!i&&Pb.includes(pe)?(a=1,r.interrupt?t(B):$(B)):mR.includes(o.toLowerCase())?(a=6,le?(e.consume(B),N):r.interrupt?t(B):$(B)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):i?C(B):T(B))}return B===45||Wn(B)?(e.consume(B),o+=String.fromCharCode(B),k):n(B)}function N(B){return B===62?(e.consume(B),r.interrupt?t:$):n(B)}function C(B){return St(B)?(e.consume(B),C):P(B)}function T(B){return B===47?(e.consume(B),P):B===58||B===95||er(B)?(e.consume(B),j):St(B)?(e.consume(B),T):P(B)}function j(B){return B===45||B===46||B===58||B===95||Wn(B)?(e.consume(B),j):D(B)}function D(B){return B===61?(e.consume(B),_):St(B)?(e.consume(B),D):T(B)}function _(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),d=B,I):St(B)?(e.consume(B),_):R(B)}function I(B){return B===d?(e.consume(B),d=null,z):B===null||ct(B)?n(B):(e.consume(B),I)}function R(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Kt(B)?D(B):(e.consume(B),R)}function z(B){return B===47||B===62||St(B)?T(B):n(B)}function P(B){return B===62?(e.consume(B),q):n(B)}function q(B){return B===null||ct(B)?$(B):St(B)?(e.consume(B),q):n(B)}function $(B){return B===45&&a===2?(e.consume(B),Z):B===60&&a===1?(e.consume(B),X):B===62&&a===4?(e.consume(B),M):B===63&&a===3?(e.consume(B),U):B===93&&a===5?(e.consume(B),ee):ct(B)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(gR,F,G)(B)):B===null||ct(B)?(e.exit("htmlFlowData"),G(B)):(e.consume(B),$)}function G(B){return e.check(vR,E,F)(B)}function E(B){return e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),L}function L(B){return B===null||ct(B)?G(B):(e.enter("htmlFlowData"),$(B))}function Z(B){return B===45?(e.consume(B),U):$(B)}function X(B){return B===47?(e.consume(B),o="",K):$(B)}function K(B){if(B===62){const le=o.toLowerCase();return Pb.includes(le)?(e.consume(B),M):$(B)}return er(B)&&o.length<8?(e.consume(B),o+=String.fromCharCode(B),K):$(B)}function ee(B){return B===93?(e.consume(B),U):$(B)}function U(B){return B===62?(e.consume(B),M):B===45&&a===2?(e.consume(B),U):$(B)}function M(B){return B===null||ct(B)?(e.exit("htmlFlowData"),F(B)):(e.consume(B),M)}function F(B){return e.exit("htmlFlow"),t(B)}}function wR(e,t,n){const r=this;return a;function a(o){return ct(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function xR(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Nl,t,n)}}const kR={name:"htmlText",tokenize:NR};function NR(e,t,n){const r=this;let a,i,o;return c;function c(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),d}function d(U){return U===33?(e.consume(U),p):U===47?(e.consume(U),D):U===63?(e.consume(U),T):er(U)?(e.consume(U),R):n(U)}function p(U){return U===45?(e.consume(U),h):U===91?(e.consume(U),i=0,x):er(U)?(e.consume(U),C):n(U)}function h(U){return U===45?(e.consume(U),g):n(U)}function m(U){return U===null?n(U):U===45?(e.consume(U),v):ct(U)?(o=m,X(U)):(e.consume(U),m)}function v(U){return U===45?(e.consume(U),g):m(U)}function g(U){return U===62?Z(U):U===45?v(U):m(U)}function x(U){const M="CDATA[";return U===M.charCodeAt(i++)?(e.consume(U),i===M.length?y:x):n(U)}function y(U){return U===null?n(U):U===93?(e.consume(U),k):ct(U)?(o=y,X(U)):(e.consume(U),y)}function k(U){return U===93?(e.consume(U),N):y(U)}function N(U){return U===62?Z(U):U===93?(e.consume(U),N):y(U)}function C(U){return U===null||U===62?Z(U):ct(U)?(o=C,X(U)):(e.consume(U),C)}function T(U){return U===null?n(U):U===63?(e.consume(U),j):ct(U)?(o=T,X(U)):(e.consume(U),T)}function j(U){return U===62?Z(U):T(U)}function D(U){return er(U)?(e.consume(U),_):n(U)}function _(U){return U===45||Wn(U)?(e.consume(U),_):I(U)}function I(U){return ct(U)?(o=I,X(U)):St(U)?(e.consume(U),I):Z(U)}function R(U){return U===45||Wn(U)?(e.consume(U),R):U===47||U===62||Kt(U)?z(U):n(U)}function z(U){return U===47?(e.consume(U),Z):U===58||U===95||er(U)?(e.consume(U),P):ct(U)?(o=z,X(U)):St(U)?(e.consume(U),z):Z(U)}function P(U){return U===45||U===46||U===58||U===95||Wn(U)?(e.consume(U),P):q(U)}function q(U){return U===61?(e.consume(U),$):ct(U)?(o=q,X(U)):St(U)?(e.consume(U),q):z(U)}function $(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(e.consume(U),a=U,G):ct(U)?(o=$,X(U)):St(U)?(e.consume(U),$):(e.consume(U),E)}function G(U){return U===a?(e.consume(U),a=void 0,L):U===null?n(U):ct(U)?(o=G,X(U)):(e.consume(U),G)}function E(U){return U===null||U===34||U===39||U===60||U===61||U===96?n(U):U===47||U===62||Kt(U)?z(U):(e.consume(U),E)}function L(U){return U===47||U===62||Kt(U)?z(U):n(U)}function Z(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):n(U)}function X(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),K}function K(U){return St(U)?It(e,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):ee(U)}function ee(U){return e.enter("htmlTextData"),o(U)}}const mf={name:"labelEnd",resolveAll:TR,resolveTo:DR,tokenize:jR},CR={tokenize:AR},SR={tokenize:_R},ER={tokenize:RR};function TR(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&Sr(e,0,e.length,n),e}function DR(e,t){let n=e.length,r=0,a,i,o,c;for(;n--;)if(a=e[n][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},h={type:"labelText",start:{...e[i+r+2][1].end},end:{...e[o-2][1].start}};return c=[["enter",d,t],["enter",p,t]],c=Fr(c,e.slice(i+1,i+r+3)),c=Fr(c,[["enter",h,t]]),c=Fr(c,Wu(t.parser.constructs.insideSpan.null,e.slice(i+r+4,o-3),t)),c=Fr(c,[["exit",h,t],e[o-2],e[o-1],["exit",p,t]]),c=Fr(c,e.slice(o+1)),c=Fr(c,[["exit",d,t]]),Sr(e,i,e.length,c),e}function jR(e,t,n){const r=this;let a=r.events.length,i,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){i=r.events[a][1];break}return c;function c(v){return i?i._inactive?m(v):(o=r.parser.defined.includes(Jr(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(v),e.exit("labelMarker"),e.exit("labelEnd"),d):n(v)}function d(v){return v===40?e.attempt(CR,h,o?h:m)(v):v===91?e.attempt(SR,h,o?p:m)(v):o?h(v):m(v)}function p(v){return e.attempt(ER,h,m)(v)}function h(v){return t(v)}function m(v){return i._balanced=!0,n(v)}}function AR(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),a}function a(m){return Kt(m)?Ko(e,i)(m):i(m)}function i(m){return m===41?h(m):q0(e,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Kt(m)?Ko(e,d)(m):h(m)}function c(m){return n(m)}function d(m){return m===34||m===39||m===40?V0(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):h(m)}function p(m){return Kt(m)?Ko(e,h)(m):h(m)}function h(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function _R(e,t,n){const r=this;return a;function a(c){return W0.call(r,e,i,o,"reference","referenceMarker","referenceString")(c)}function i(c){return r.parser.defined.includes(Jr(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(c):n(c)}function o(c){return n(c)}}function RR(e,t,n){return r;function r(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}const IR={name:"labelStartImage",resolveAll:mf.resolveAll,tokenize:$R};function $R(e,t,n){const r=this;return a;function a(c){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(c),e.exit("labelImageMarker"),i}function i(c){return c===91?(e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelImage"),o):n(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const MR={name:"labelStartLink",resolveAll:mf.resolveAll,tokenize:FR};function FR(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const uh={name:"lineEnding",tokenize:OR};function OR(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),It(e,t,"linePrefix")}}const lu={name:"thematicBreak",tokenize:PR};function PR(e,t,n){let r=0,a;return i;function i(p){return e.enter("thematicBreak"),o(p)}function o(p){return a=p,c(p)}function c(p){return p===a?(e.enter("thematicBreakSequence"),d(p)):r>=3&&(p===null||ct(p))?(e.exit("thematicBreak"),t(p)):n(p)}function d(p){return p===a?(e.consume(p),r++,d):(e.exit("thematicBreakSequence"),St(p)?It(e,c,"whitespace")(p):c(p))}}const pr={continuation:{tokenize:UR},exit:qR,name:"list",tokenize:BR},LR={partial:!0,tokenize:WR},zR={partial:!0,tokenize:HR};function BR(e,t,n){const r=this,a=r.events[r.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return c;function c(g){const x=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:gm(g)){if(r.containerState.type||(r.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),g===42||g===45?e.check(lu,n,p)(g):p(g);if(!r.interrupt||g===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(g)}return n(g)}function d(g){return gm(g)&&++o<10?(e.consume(g),d):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(e.exit("listItemValue"),p(g)):n(g)}function p(g){return e.enter("listItemMarker"),e.consume(g),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,e.check(Nl,r.interrupt?n:h,e.attempt(LR,v,m))}function h(g){return r.containerState.initialBlankLine=!0,i++,v(g)}function m(g){return St(g)?(e.enter("listItemPrefixWhitespace"),e.consume(g),e.exit("listItemPrefixWhitespace"),v):n(g)}function v(g){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(g)}}function UR(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Nl,a,i);function a(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,It(e,t,"listItemIndent",r.containerState.size+1)(c)}function i(c){return r.containerState.furtherBlankLines||!St(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(zR,t,o)(c))}function o(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,It(e,e.attempt(pr,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function HR(e,t,n){const r=this;return It(e,a,"listItemIndent",r.containerState.size+1);function a(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(i):n(i)}}function qR(e){e.exit(this.containerState.type)}function WR(e,t,n){const r=this;return It(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const o=r.events[r.events.length-1];return!St(i)&&o&&o[1].type==="listItemPrefixWhitespace"?t(i):n(i)}}const Lb={name:"setextUnderline",resolveTo:VR,tokenize:GR};function VR(e,t){let n=e.length,r,a,i;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!i&&e[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",o,t]),e.splice(i+1,0,["exit",e[r][1],t]),e[r][1].end={...e[i][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function GR(e,t,n){const r=this;let a;return i;function i(p){let h=r.events.length,m;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){m=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),a=p,o(p)):n(p)}function o(p){return e.enter("setextHeadingLineSequence"),c(p)}function c(p){return p===a?(e.consume(p),c):(e.exit("setextHeadingLineSequence"),St(p)?It(e,d,"lineSuffix")(p):d(p))}function d(p){return p===null||ct(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const KR={tokenize:YR};function YR(e){const t=this,n=e.attempt(Nl,r,e.attempt(this.parser.constructs.flowInitial,a,It(e,e.attempt(this.parser.constructs.flow,a,e.attempt(eR,a)),"linePrefix")));return n;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ZR={resolveAll:K0()},QR=G0("string"),JR=G0("text");function G0(e){return{resolveAll:K0(e==="text"?XR:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],i=n.attempt(a,o,c);return o;function o(h){return p(h)?i(h):c(h)}function c(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),d}function d(h){return p(h)?(n.exit("data"),i(h)):(n.consume(h),d)}function p(h){if(h===null)return!0;const m=a[h];let v=-1;if(m)for(;++v<m.length;){const g=m[v];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function K0(e){return t;function t(n,r){let a=-1,i;for(;++a<=n.length;)i===void 0?n[a]&&n[a][1].type==="data"&&(i=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==i+2&&(n[i][1].end=n[a-1][1].end,n.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(n,r):n}}function XR(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let i=a.length,o=-1,c=0,d;for(;i--;){const p=a[i];if(typeof p=="string"){for(o=p.length;p.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(p===-2)d=!0,c++;else if(p!==-1){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(c=0),c){const p={type:n===e.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...p.start},r.start.offset===r.end.offset?Object.assign(r,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const eI={42:pr,43:pr,45:pr,48:pr,49:pr,50:pr,51:pr,52:pr,53:pr,54:pr,55:pr,56:pr,57:pr,62:z0},tI={91:iR},nI={[-2]:ch,[-1]:ch,32:ch},rI={35:dR,42:lu,45:[Lb,lu],60:fR,61:Lb,95:lu,96:Ob,126:Ob},aI={38:U0,92:B0},iI={[-5]:uh,[-4]:uh,[-3]:uh,33:IR,38:U0,42:vm,60:[M_,kR],91:MR,92:[cR,B0],93:mf,95:vm,96:K_},sI={null:[vm,ZR]},oI={null:[42,95]},lI={null:[]},cI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:oI,contentInitial:tI,disable:lI,document:eI,flow:rI,flowInitial:nI,insideSpan:sI,string:aI,text:iI},Symbol.toStringTag,{value:"Module"}));function uI(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},i=[];let o=[],c=[];const d={attempt:I(D),check:I(_),consume:C,enter:T,exit:j,interrupt:I(_,{interrupt:!0})},p={code:null,containerState:{},defineSkip:y,events:[],now:x,parser:e,previous:null,sliceSerialize:v,sliceStream:g,write:m};let h=t.tokenize.call(p,d);return t.resolveAll&&i.push(t),p;function m(q){return o=Fr(o,q),k(),o[o.length-1]!==null?[]:(R(t,0),p.events=Wu(i,p.events,p),p.events)}function v(q,$){return pI(g(q),$)}function g(q){return dI(o,q)}function x(){const{_bufferIndex:q,_index:$,line:G,column:E,offset:L}=r;return{_bufferIndex:q,_index:$,line:G,column:E,offset:L}}function y(q){a[q.line]=q.column,P()}function k(){let q;for(;r._index<o.length;){const $=o[r._index];if(typeof $=="string")for(q=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===q&&r._bufferIndex<$.length;)N($.charCodeAt(r._bufferIndex));else N($)}}function N(q){h=h(q)}function C(q){ct(q)?(r.line++,r.column=1,r.offset+=q===-3?2:1,P()):q!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),p.previous=q}function T(q,$){const G=$||{};return G.type=q,G.start=x(),p.events.push(["enter",G,p]),c.push(G),G}function j(q){const $=c.pop();return $.end=x(),p.events.push(["exit",$,p]),$}function D(q,$){R(q,$.from)}function _(q,$){$.restore()}function I(q,$){return G;function G(E,L,Z){let X,K,ee,U;return Array.isArray(E)?F(E):"tokenize"in E?F([E]):M(E);function M(de){return je;function je(ye){const Te=ye!==null&&de[ye],Ie=ye!==null&&de.null,ve=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(Ie)?Ie:Ie?[Ie]:[]];return F(ve)(ye)}}function F(de){return X=de,K=0,de.length===0?Z:B(de[K])}function B(de){return je;function je(ye){return U=z(),ee=de,de.partial||(p.currentConstruct=de),de.name&&p.parser.constructs.disable.null.includes(de.name)?pe():de.tokenize.call($?Object.assign(Object.create(p),$):p,d,le,pe)(ye)}}function le(de){return q(ee,U),L}function pe(de){return U.restore(),++K<X.length?B(X[K]):Z}}}function R(q,$){q.resolveAll&&!i.includes(q)&&i.push(q),q.resolve&&Sr(p.events,$,p.events.length-$,q.resolve(p.events.slice($),p)),q.resolveTo&&(p.events=q.resolveTo(p.events,p))}function z(){const q=x(),$=p.previous,G=p.currentConstruct,E=p.events.length,L=Array.from(c);return{from:E,restore:Z};function Z(){r=q,p.previous=$,p.currentConstruct=G,p.events.length=E,c=L,P()}}function P(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function dI(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,i=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,i)];else{if(o=e.slice(n,a),r>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(r):o.shift()}i>0&&o.push(e[a].slice(0,i))}return o}function pI(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const i=e[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(i)}a=i===-2,r.push(o)}return r.join("")}function hI(e){const r={constructs:P0([cI,...(e||{}).extensions||[]]),content:a(D_),defined:[],document:a(A_),flow:a(KR),lazy:{},string:a(QR),text:a(JR)};return r;function a(i){return o;function o(c){return uI(r,i,c)}}}function mI(e){for(;!H0(e););return e}const zb=/[\0\t\n\r]/g;function fI(){let e=1,t="",n=!0,r;return a;function a(i,o,c){const d=[];let p,h,m,v,g;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),m=0,t="",n&&(i.charCodeAt(0)===65279&&m++,n=void 0);m<i.length;){if(zb.lastIndex=m,p=zb.exec(i),v=p&&p.index!==void 0?p.index:i.length,g=i.charCodeAt(v),!p){t=i.slice(m);break}if(g===10&&m===v&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),m<v&&(d.push(i.slice(m,v)),e+=v-m),g){case 0:{d.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,d.push(-2);e++<h;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}m=v+1}return c&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const gI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function vI(e){return e.replace(gI,yI)}function yI(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),i=a===120||a===88;return L0(n.slice(i?2:1),i?16:10)}return hf(n)||e}const Y0={}.hasOwnProperty;function bI(e,t,n){return typeof t!="string"&&(n=t,t=void 0),wI(n)(mI(hI(n).document().write(fI()(e,t,!0))))}function wI(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(se),autolinkProtocol:z,autolinkEmail:z,atxHeading:i(xe),blockQuote:i(Ie),characterEscape:z,characterReference:z,codeFenced:i(ve),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(ve,o),codeText:i(qe,o),codeTextData:z,data:z,codeFlowValue:z,definition:i(st),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(O),hardBreakEscape:i(te),hardBreakTrailing:i(te),htmlFlow:i(V,o),htmlFlowData:z,htmlText:i(V,o),htmlTextData:z,image:i(W),label:o,link:i(se),listItem:i(Se),listItemValue:v,listOrdered:i(ke,m),listUnordered:i(ke),paragraph:i(ue),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(xe),strong:i(_e),thematicBreak:i(me)},exit:{atxHeading:d(),atxHeadingSequence:D,autolink:d(),autolinkEmail:Te,autolinkProtocol:ye,blockQuote:d(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:pe,characterReferenceMarkerNumeric:pe,characterReferenceValue:de,characterReference:je,codeFenced:d(k),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:x,codeFlowValue:P,codeIndented:d(N),codeText:d(L),codeTextData:P,data:P,definition:d(),definitionDestinationString:j,definitionLabelString:C,definitionTitleString:T,emphasis:d(),hardBreakEscape:d($),hardBreakTrailing:d($),htmlFlow:d(G),htmlFlowData:P,htmlText:d(E),htmlTextData:P,image:d(X),label:ee,labelText:K,lineEnding:q,link:d(Z),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:le,resourceDestinationString:U,resourceTitleString:M,resource:F,setextHeading:d(R),setextHeadingLineSequence:I,setextHeadingText:_,strong:d(),thematicBreak:d()}};Z0(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let we={type:"root",children:[]};const De={stack:[we],tokenStack:[],config:t,enter:c,exit:p,buffer:o,resume:h,data:n},He=[];let pt=-1;for(;++pt<ae.length;)if(ae[pt][1].type==="listOrdered"||ae[pt][1].type==="listUnordered")if(ae[pt][0]==="enter")He.push(pt);else{const vt=He.pop();pt=a(ae,vt,pt)}for(pt=-1;++pt<ae.length;){const vt=t[ae[pt][0]];Y0.call(vt,ae[pt][1].type)&&vt[ae[pt][1].type].call(Object.assign({sliceSerialize:ae[pt][2].sliceSerialize},De),ae[pt][1])}if(De.tokenStack.length>0){const vt=De.tokenStack[De.tokenStack.length-1];(vt[1]||Bb).call(De,void 0,vt[0])}for(we.position={start:ti(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:ti(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},pt=-1;++pt<t.transforms.length;)we=t.transforms[pt](we)||we;return we}function a(ae,we,De){let He=we-1,pt=-1,vt=!1,dn,ht,mn,yn;for(;++He<=De;){const jt=ae[He];switch(jt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{jt[0]==="enter"?pt++:pt--,yn=void 0;break}case"lineEndingBlank":{jt[0]==="enter"&&(dn&&!yn&&!pt&&!mn&&(mn=He),yn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yn=void 0}if(!pt&&jt[0]==="enter"&&jt[1].type==="listItemPrefix"||pt===-1&&jt[0]==="exit"&&(jt[1].type==="listUnordered"||jt[1].type==="listOrdered")){if(dn){let kn=He;for(ht=void 0;kn--;){const Qt=ae[kn];if(Qt[1].type==="lineEnding"||Qt[1].type==="lineEndingBlank"){if(Qt[0]==="exit")continue;ht&&(ae[ht][1].type="lineEndingBlank",vt=!0),Qt[1].type="lineEnding",ht=kn}else if(!(Qt[1].type==="linePrefix"||Qt[1].type==="blockQuotePrefix"||Qt[1].type==="blockQuotePrefixWhitespace"||Qt[1].type==="blockQuoteMarker"||Qt[1].type==="listItemIndent"))break}mn&&(!ht||mn<ht)&&(dn._spread=!0),dn.end=Object.assign({},ht?ae[ht][1].start:jt[1].end),ae.splice(ht||He,0,["exit",dn,jt[2]]),He++,De++}if(jt[1].type==="listItemPrefix"){const kn={type:"listItem",_spread:!1,start:Object.assign({},jt[1].start),end:void 0};dn=kn,ae.splice(He,0,["enter",kn,jt[2]]),He++,De++,mn=void 0,yn=!0}}}return ae[we][1]._spread=vt,De}function i(ae,we){return De;function De(He){c.call(this,ae(He),He),we&&we.call(this,He)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(ae,we,De){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([we,De||void 0]),ae.position={start:ti(we.start),end:void 0}}function d(ae){return we;function we(De){ae&&ae.call(this,De),p.call(this,De)}}function p(ae,we){const De=this.stack.pop(),He=this.tokenStack.pop();if(He)He[0].type!==ae.type&&(we?we.call(this,ae,He[0]):(He[1]||Bb).call(this,ae,He[0]));else throw new Error("Cannot close `"+ae.type+"` ("+Go({start:ae.start,end:ae.end})+"): its not open");De.position.end=ti(ae.end)}function h(){return pf(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function v(ae){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function g(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.lang=ae}function x(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.meta=ae}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function N(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.value=ae.replace(/(\r?\n|\r)$/g,"")}function C(ae){const we=this.resume(),De=this.stack[this.stack.length-1];De.label=we,De.identifier=Jr(this.sliceSerialize(ae)).toLowerCase()}function T(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.title=ae}function j(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.url=ae}function D(ae){const we=this.stack[this.stack.length-1];if(!we.depth){const De=this.sliceSerialize(ae).length;we.depth=De}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function I(ae){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function z(ae){const De=this.stack[this.stack.length-1].children;let He=De[De.length-1];(!He||He.type!=="text")&&(He=oe(),He.position={start:ti(ae.start),end:void 0},De.push(He)),this.stack.push(He)}function P(ae){const we=this.stack.pop();we.value+=this.sliceSerialize(ae),we.position.end=ti(ae.end)}function q(ae){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=we.children[we.children.length-1];De.position.end=ti(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(we.type)&&(z.call(this,ae),P.call(this,ae))}function $(){this.data.atHardBreak=!0}function G(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.value=ae}function E(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.value=ae}function L(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.value=ae}function Z(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=we,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function X(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=we,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function K(ae){const we=this.sliceSerialize(ae),De=this.stack[this.stack.length-2];De.label=vI(we),De.identifier=Jr(we).toLowerCase()}function ee(){const ae=this.stack[this.stack.length-1],we=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const He=ae.children;De.children=He}else De.alt=we}function U(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.url=ae}function M(){const ae=this.resume(),we=this.stack[this.stack.length-1];we.title=ae}function F(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function le(ae){const we=this.resume(),De=this.stack[this.stack.length-1];De.label=we,De.identifier=Jr(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function pe(ae){this.data.characterReferenceType=ae.type}function de(ae){const we=this.sliceSerialize(ae),De=this.data.characterReferenceType;let He;De?(He=L0(we,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):He=hf(we);const pt=this.stack[this.stack.length-1];pt.value+=He}function je(ae){const we=this.stack.pop();we.position.end=ti(ae.end)}function ye(ae){P.call(this,ae);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(ae)}function Te(ae){P.call(this,ae);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(ae)}function Ie(){return{type:"blockquote",children:[]}}function ve(){return{type:"code",lang:null,meta:null,value:""}}function qe(){return{type:"inlineCode",value:""}}function st(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function O(){return{type:"emphasis",children:[]}}function xe(){return{type:"heading",depth:0,children:[]}}function te(){return{type:"break"}}function V(){return{type:"html",value:""}}function W(){return{type:"image",title:null,url:"",alt:null}}function se(){return{type:"link",title:null,url:"",children:[]}}function ke(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Se(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function ue(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function oe(){return{type:"text",value:""}}function me(){return{type:"thematicBreak"}}}function ti(e){return{line:e.line,column:e.column,offset:e.offset}}function Z0(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Z0(e,r):xI(e,r)}}function xI(e,t){let n;for(n in t)if(Y0.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Bb(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Go({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Go({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Go({start:t.start,end:t.end})+") is still open")}function kI(e){const t=this;t.parser=n;function n(r){return bI(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function NI(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function CI(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function SI(e,t){const n=t.value?t.value+`
`:"",r={},a=t.lang?t.lang.split(/\s+/):[];a.length>0&&(r.className=["language-"+a[0]]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function EI(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function TI(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function DI(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=Ws(r.toLowerCase()),i=e.footnoteOrder.indexOf(r);let o,c=e.footnoteCounts.get(r);c===void 0?(c=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=i+1,c+=1,e.footnoteCounts.set(r,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,d);const p={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,p),e.applyData(t,p)}function jI(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function AI(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Q0(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function _I(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Q0(e,t);const a={src:Ws(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,i),e.applyData(t,i)}function RI(e,t){const n={src:Ws(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function II(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function $I(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Q0(e,t);const a={href:Ws(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const i={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function MI(e,t){const n={href:Ws(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function FI(e,t,n){const r=e.all(t),a=n?OI(n):J0(t),i={},o=[];if(typeof t.checked=="boolean"){const h=r[0];let m;h&&h.type==="element"&&h.tagName==="p"?m=h:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const h=r[c];(a||c!==0||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!a?o.push(...h.children):o.push(h)}const d=r[r.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:i,children:o};return e.patch(t,p),e.applyData(t,p)}function OI(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=J0(n[r])}return t}function J0(e){const t=e.spread;return t??e.children.length>1}function PI(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)}function LI(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zI(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function BI(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function UI(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},c=lf(t.children[1]),d=_0(t.children[t.children.length-1]);c&&d&&(o.position={start:c,end:d}),a.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,i),e.applyData(t,i)}function HI(e,t,n){const r=n?n.children:void 0,i=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,c=o?o.length:t.children.length;let d=-1;const p=[];for(;++d<c;){const m=t.children[d],v={},g=o?o[d]:void 0;g&&(v.align=g);let x={type:"element",tagName:i,properties:v,children:[]};m&&(x.children=e.all(m),e.patch(m,x),x=e.applyData(m,x)),p.push(x)}const h={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,h),e.applyData(t,h)}function qI(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Ub=9,Hb=32;function WI(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const i=[];for(;r;)i.push(qb(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return i.push(qb(t.slice(a),a>0,!1)),i.join("")}function qb(e,t,n){let r=0,a=e.length;if(t){let i=e.codePointAt(r);for(;i===Ub||i===Hb;)r++,i=e.codePointAt(r)}if(n){let i=e.codePointAt(a-1);for(;i===Ub||i===Hb;)a--,i=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function VI(e,t){const n={type:"text",value:WI(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function GI(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const KI={blockquote:NI,break:CI,code:SI,delete:EI,emphasis:TI,footnoteReference:DI,heading:jI,html:AI,imageReference:_I,image:RI,inlineCode:II,linkReference:$I,link:MI,listItem:FI,list:PI,paragraph:LI,root:zI,strong:BI,table:UI,tableCell:qI,tableRow:HI,text:VI,thematicBreak:GI,toml:zc,yaml:zc,definition:zc,footnoteDefinition:zc};function zc(){}const X0=-1,Vu=0,Yo=1,bu=2,ff=3,gf=4,vf=5,yf=6,e1=7,t1=8,Wb=typeof self=="object"?self:globalThis,YI=(e,t)=>{const n=(a,i)=>(e.set(i,a),a),r=a=>{if(e.has(a))return e.get(a);const[i,o]=t[a];switch(i){case Vu:case X0:return n(o,a);case Yo:{const c=n([],a);for(const d of o)c.push(r(d));return c}case bu:{const c=n({},a);for(const[d,p]of o)c[r(d)]=r(p);return c}case ff:return n(new Date(o),a);case gf:{const{source:c,flags:d}=o;return n(new RegExp(c,d),a)}case vf:{const c=n(new Map,a);for(const[d,p]of o)c.set(r(d),r(p));return c}case yf:{const c=n(new Set,a);for(const d of o)c.add(r(d));return c}case e1:{const{name:c,message:d}=o;return n(new Wb[c](d),a)}case t1:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return n(new DataView(c),o)}}return n(new Wb[i](o),a)};return r},Vb=e=>YI(new Map,e)(0),ks="",{toString:ZI}={},{keys:QI}=Object,Lo=e=>{const t=typeof e;if(t!=="object"||!e)return[Vu,t];const n=ZI.call(e).slice(8,-1);switch(n){case"Array":return[Yo,ks];case"Object":return[bu,ks];case"Date":return[ff,ks];case"RegExp":return[gf,ks];case"Map":return[vf,ks];case"Set":return[yf,ks];case"DataView":return[Yo,n]}return n.includes("Array")?[Yo,n]:n.includes("Error")?[e1,n]:[bu,n]},Bc=([e,t])=>e===Vu&&(t==="function"||t==="symbol"),JI=(e,t,n,r)=>{const a=(o,c)=>{const d=r.push(o)-1;return n.set(c,d),d},i=o=>{if(n.has(o))return n.get(o);let[c,d]=Lo(o);switch(c){case Vu:{let h=o;switch(d){case"bigint":c=t1,h=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);h=null;break;case"undefined":return a([X0],o)}return a([c,h],o)}case Yo:{if(d){let v=o;return d==="DataView"?v=new Uint8Array(o.buffer):d==="ArrayBuffer"&&(v=new Uint8Array(o)),a([d,[...v]],o)}const h=[],m=a([c,h],o);for(const v of o)h.push(i(v));return m}case bu:{if(d)switch(d){case"BigInt":return a([d,o.toString()],o);case"Boolean":case"Number":case"String":return a([d,o.valueOf()],o)}if(t&&"toJSON"in o)return i(o.toJSON());const h=[],m=a([c,h],o);for(const v of QI(o))(e||!Bc(Lo(o[v])))&&h.push([i(v),i(o[v])]);return m}case ff:return a([c,o.toISOString()],o);case gf:{const{source:h,flags:m}=o;return a([c,{source:h,flags:m}],o)}case vf:{const h=[],m=a([c,h],o);for(const[v,g]of o)(e||!(Bc(Lo(v))||Bc(Lo(g))))&&h.push([i(v),i(g)]);return m}case yf:{const h=[],m=a([c,h],o);for(const v of o)(e||!Bc(Lo(v)))&&h.push(i(v));return m}}const{message:p}=o;return a([c,{name:d,message:p}],o)};return i},Gb=(e,{json:t,lossy:n}={})=>{const r=[];return JI(!(t||n),!!t,new Map,r)(e),r},wu=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Vb(Gb(e,t)):structuredClone(e):(e,t)=>Vb(Gb(e,t));function XI(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function e$(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function t$(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||XI,r=e.options.footnoteBackLabel||e$,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[d]);if(!p)continue;const h=e.all(p),m=String(p.identifier).toUpperCase(),v=Ws(m.toLowerCase());let g=0;const x=[],y=e.footnoteCounts.get(m);for(;y!==void 0&&++g<=y;){x.length>0&&x.push({type:"text",value:" "});let C=typeof n=="string"?n:n(d,g);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+v+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,g),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const k=h[h.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const C=k.children[k.children.length-1];C&&C.type==="text"?C.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...x)}else h.push(...x);const N={type:"element",tagName:"li",properties:{id:t+"fn-"+v},children:e.wrap(h,!0)};e.patch(p,N),c.push(N)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...wu(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(c,!0)},{type:"text",value:`
`}]}}const Cl=(function(e){if(e==null)return i$;if(typeof e=="function")return Gu(e);if(typeof e=="object")return Array.isArray(e)?n$(e):r$(e);if(typeof e=="string")return a$(e);throw new Error("Expected function, string, or object as test")});function n$(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Cl(e[n]);return Gu(r);function r(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function r$(e){const t=e;return Gu(n);function n(r){const a=r;let i;for(i in e)if(a[i]!==t[i])return!1;return!0}}function a$(e){return Gu(t);function t(n){return n&&n.type===e}}function Gu(e){return t;function t(n,r,a){return!!(s$(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function i$(){return!0}function s$(e){return e!==null&&typeof e=="object"&&"type"in e}const n1=[],o$=!0,ym=!1,l$="skip";function r1(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const i=Cl(a),o=r?-1:1;c(e,void 0,[])();function c(d,p,h){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const g=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(d.type+(g?"<"+g+">":""))+")"})}return v;function v(){let g=n1,x,y,k;if((!t||i(d,p,h[h.length-1]||void 0))&&(g=c$(n(d,h)),g[0]===ym))return g;if("children"in d&&d.children){const N=d;if(N.children&&g[0]!==l$)for(y=(r?N.children.length:-1)+o,k=h.concat(N);y>-1&&y<N.children.length;){const C=N.children[y];if(x=c(C,y,k)(),x[0]===ym)return x;y=typeof x[1]=="number"?x[1]:y+o}}return g}}}function c$(e){return Array.isArray(e)?e:typeof e=="number"?[o$,e]:e==null?n1:[e]}function Sl(e,t,n,r){let a,i,o;typeof t=="function"&&typeof n!="function"?(i=void 0,o=t,a=n):(i=t,o=n,a=r),r1(e,i,c,a);function c(d,p){const h=p[p.length-1],m=h?h.children.indexOf(d):void 0;return o(d,m,h)}}const bm={}.hasOwnProperty,u$={};function d$(e,t){const n=t||u$,r=new Map,a=new Map,i=new Map,o={...KI,...n.handlers},c={all:p,applyData:h$,definitionById:r,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:o,one:d,options:n,patch:p$,wrap:f$};return Sl(e,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const m=h.type==="definition"?r:a,v=String(h.identifier).toUpperCase();m.has(v)||m.set(v,h)}}),c;function d(h,m){const v=h.type,g=c.handlers[v];if(bm.call(c.handlers,v)&&g)return g(c,h,m);if(c.options.passThrough&&c.options.passThrough.includes(v)){if("children"in h){const{children:y,...k}=h,N=wu(k);return N.children=c.all(h),N}return wu(h)}return(c.options.unknownHandler||m$)(c,h,m)}function p(h){const m=[];if("children"in h){const v=h.children;let g=-1;for(;++g<v.length;){const x=c.one(v[g],h);if(x){if(g&&v[g-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=Kb(x.value)),!Array.isArray(x)&&x.type==="element")){const y=x.children[0];y&&y.type==="text"&&(y.value=Kb(y.value))}Array.isArray(x)?m.push(...x):m.push(x)}}}return m}}function p$(e,t){e.position&&(t.position=e_(e))}function h$(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,wu(i)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function m$(e,t){const n=t.data||{},r="value"in t&&!(bm.call(n,"hProperties")||bm.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function f$(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Kb(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Yb(e,t){const n=d$(e,t),r=n.one(e,void 0),a=t$(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function g$(e,t){return e&&"run"in e?async function(n,r){const a=Yb(n,{file:r,...t});await e.run(a,r)}:function(n,r){return Yb(n,{file:r,...e||t})}}function Zb(e){if(e)throw e}var dh,Qb;function v$(){if(Qb)return dh;Qb=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},i=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var h=e.call(p,"constructor"),m=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!h&&!m)return!1;var v;for(v in p);return typeof v>"u"||e.call(p,v)},o=function(p,h){n&&h.name==="__proto__"?n(p,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):p[h.name]=h.newValue},c=function(p,h){if(h==="__proto__")if(e.call(p,h)){if(r)return r(p,h).value}else return;return p[h]};return dh=function d(){var p,h,m,v,g,x,y=arguments[0],k=1,N=arguments.length,C=!1;for(typeof y=="boolean"&&(C=y,y=arguments[1]||{},k=2),(y==null||typeof y!="object"&&typeof y!="function")&&(y={});k<N;++k)if(p=arguments[k],p!=null)for(h in p)m=c(y,h),v=c(p,h),y!==v&&(C&&v&&(i(v)||(g=a(v)))?(g?(g=!1,x=m&&a(m)?m:[]):x=m&&i(m)?m:{},o(y,{name:h,newValue:d(C,x,v)})):typeof v<"u"&&o(y,{name:h,newValue:v}));return y},dh}var y$=v$();const ph=Ta(y$);function wm(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function b$(){const e=[],t={run:n,use:r};return t;function n(...a){let i=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...a);function c(d,...p){const h=e[++i];let m=-1;if(d){o(d);return}for(;++m<a.length;)(p[m]===null||p[m]===void 0)&&(p[m]=a[m]);a=p,h?w$(h,c)(...p):o(null,...p)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function w$(e,t){let n;return r;function r(...o){const c=e.length>o.length;let d;c&&o.push(a);try{d=e.apply(this,o)}catch(p){const h=p;if(c&&n)throw h;return a(h)}c||(d&&d.then&&typeof d.then=="function"?d.then(i,a):d instanceof Error?a(d):i(d))}function a(o,...c){n||(n=!0,t(o,...c))}function i(o){a(null,o)}}const oa={basename:x$,dirname:k$,extname:N$,join:C$,sep:"/"};function x$(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');El(e);let n=0,r=-1,a=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){n=a+1;break}}else r<0&&(i=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,c=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){n=a+1;break}}else o<0&&(i=!0,o=a+1),c>-1&&(e.codePointAt(a)===t.codePointAt(c--)?c<0&&(r=a):(c=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function k$(e){if(El(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function N$(e){El(e);let t=e.length,n=-1,r=0,a=-1,i=0,o;for(;t--;){const c=e.codePointAt(t);if(c===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),c===46?a<0?a=t:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||n<0||i===0||i===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function C$(...e){let t=-1,n;for(;++t<e.length;)El(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":S$(n)}function S$(e){El(e);const t=e.codePointAt(0)===47;let n=E$(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function E$(e,t){let n="",r=0,a=-1,i=0,o=-1,c,d;for(;++o<=e.length;){if(o<e.length)c=e.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(a===o-1||i===1))if(a!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}}else if(n.length>0){n="",r=0,a=o,i=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else c===46&&i>-1?i++:i=-1}return n}function El(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const T$={cwd:D$};function D$(){return"/"}function xm(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function j$(e){if(typeof e=="string")e=new URL(e);else if(!xm(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return A$(e)}function A$(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const hh=["history","path","basename","stem","extname","dirname"];class a1{constructor(t){let n;t?xm(t)?n={path:t}:typeof t=="string"||_$(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":T$.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<hh.length;){const i=hh[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let a;for(a in n)hh.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?oa.basename(this.path):void 0}set basename(t){fh(t,"basename"),mh(t,"basename"),this.path=oa.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?oa.dirname(this.path):void 0}set dirname(t){Jb(this.basename,"dirname"),this.path=oa.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?oa.extname(this.path):void 0}set extname(t){if(mh(t,"extname"),Jb(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=oa.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){xm(t)&&(t=j$(t)),fh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?oa.basename(this.path,this.extname):void 0}set stem(t){fh(t,"stem"),mh(t,"stem"),this.path=oa.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new Gn(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function mh(e,t){if(e&&e.includes(oa.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+oa.sep+"`")}function fh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Jb(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function _$(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const R$=(function(e){const r=this.constructor.prototype,a=r[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,r),i}),I$={}.hasOwnProperty;class bf extends R${constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=b$()}copy(){const t=new bf;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(ph(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(yh("data",this.frozen),this.namespace[t]=n,this):I$.call(this.namespace,t)&&this.namespace[t]||void 0:t?(yh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Uc(t),r=this.parser||this.Parser;return gh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),gh("process",this.parser||this.Parser),vh("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(i,o){const c=Uc(t),d=r.parse(c);r.run(d,c,function(h,m,v){if(h||!m||!v)return p(h);const g=m,x=r.stringify(g,v);F$(x)?v.value=x:v.result=x,p(h,v)});function p(h,m){h||!m?o(h):i?i(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),gh("processSync",this.parser||this.Parser),vh("processSync",this.compiler||this.Compiler),this.process(t,a),ew("processSync","process",n),r;function a(i,o){n=!0,Zb(i),r=o}}run(t,n,r){Xb(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,c){const d=Uc(n);a.run(t,d,p);function p(h,m,v){const g=m||t;h?c(h):o?o(g):r(void 0,g,v)}}}runSync(t,n){let r=!1,a;return this.run(t,n,i),ew("runSync","run",r),a;function i(o,c){Zb(o),a=c,r=!0}}stringify(t,n){this.freeze();const r=Uc(n),a=this.compiler||this.Compiler;return vh("stringify",a),Xb(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(yh("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?c(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(p){if(typeof p=="function")d(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[h,...m]=p;d(h,m)}else o(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function o(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(p.plugins),p.settings&&(a.settings=ph(!0,a.settings,p.settings))}function c(p){let h=-1;if(p!=null)if(Array.isArray(p))for(;++h<p.length;){const m=p[h];i(m)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function d(p,h){let m=-1,v=-1;for(;++m<r.length;)if(r[m][0]===p){v=m;break}if(v===-1)r.push([p,...h]);else if(h.length>0){let[g,...x]=h;const y=r[v][1];wm(y)&&wm(g)&&(g=ph(!0,y,g)),r[v]=[p,g,...x]}}}}const $$=new bf().freeze();function gh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function vh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function yh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Xb(e){if(!wm(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ew(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Uc(e){return M$(e)?e:new a1(e)}function M$(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function F$(e){return typeof e=="string"||O$(e)}function O$(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const P$="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",tw=[],nw={allowDangerousHtml:!0},L$=/^(https?|ircs?|mailto|xmpp)$/i,z$=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _a(e){const t=B$(e),n=U$(e);return H$(t.runSync(t.parse(n),n),e)}function B$(e){const t=e.rehypePlugins||tw,n=e.remarkPlugins||tw,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...nw}:nw;return $$().use(kI).use(n).use(g$,r).use(t)}function U$(e){const t=e.children||"",n=new a1;return typeof t=="string"&&(n.value=t),n}function H$(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,i=t.disallowedElements,o=t.skipHtml,c=t.unwrapDisallowed,d=t.urlTransform||q$;for(const h of z$)Object.hasOwn(t,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+P$+h.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),Sl(e,p),i_(e,{Fragment:s.Fragment,components:a,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function p(h,m,v){if(h.type==="raw"&&v&&typeof m=="number")return o?v.children.splice(m,1):v.children[m]={type:"text",value:h.value},m;if(h.type==="element"){let g;for(g in lh)if(Object.hasOwn(lh,g)&&Object.hasOwn(h.properties,g)){const x=h.properties[g],y=lh[g];(y===null||y.includes(h.tagName))&&(h.properties[g]=d(String(x||""),g,h))}}if(h.type==="element"){let g=n?!n.includes(h.tagName):i?i.includes(h.tagName):!1;if(!g&&r&&typeof m=="number"&&(g=!r(h,m,v)),g&&v&&typeof m=="number")return c&&h.children?v.children.splice(m,1,...h.children):v.children.splice(m,1),m}}}function q$(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||L$.test(e.slice(0,t))?e:""}function rw(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function W$(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function V$(e,t,n){const a=Cl((n||{}).ignore||[]),i=G$(t);let o=-1;for(;++o<i.length;)r1(e,"text",c);function c(p,h){let m=-1,v;for(;++m<h.length;){const g=h[m],x=v?v.children:void 0;if(a(g,x?x.indexOf(g):void 0,v))return;v=g}if(v)return d(p,h)}function d(p,h){const m=h[h.length-1],v=i[o][0],g=i[o][1];let x=0;const k=m.children.indexOf(p);let N=!1,C=[];v.lastIndex=0;let T=v.exec(p.value);for(;T;){const j=T.index,D={index:T.index,input:T.input,stack:[...h,p]};let _=g(...T,D);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?v.lastIndex=j+1:(x!==j&&C.push({type:"text",value:p.value.slice(x,j)}),Array.isArray(_)?C.push(..._):_&&C.push(_),x=j+T[0].length,N=!0),!v.global)break;T=v.exec(p.value)}return N?(x<p.value.length&&C.push({type:"text",value:p.value.slice(x)}),m.children.splice(k,1,...C)):C=[p],k+C.length}}function G$(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([K$(a[0]),Y$(a[1])])}return t}function K$(e){return typeof e=="string"?new RegExp(W$(e),"g"):e}function Y$(e){return typeof e=="function"?e:function(){return e}}const bh="phrasing",wh=["autolink","link","image","label"];function Z$(){return{transforms:[r5],enter:{literalAutolink:J$,literalAutolinkEmail:xh,literalAutolinkHttp:xh,literalAutolinkWww:xh},exit:{literalAutolink:n5,literalAutolinkEmail:t5,literalAutolinkHttp:X$,literalAutolinkWww:e5}}}function Q$(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bh,notInConstruct:wh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bh,notInConstruct:wh},{character:":",before:"[ps]",after:"\\/",inConstruct:bh,notInConstruct:wh}]}}function J$(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function xh(e){this.config.enter.autolinkProtocol.call(this,e)}function X$(e){this.config.exit.autolinkProtocol.call(this,e)}function e5(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function t5(e){this.config.exit.autolinkEmail.call(this,e)}function n5(e){this.exit(e)}function r5(e){V$(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,a5],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),i5]],{ignore:["link","linkReference"]})}function a5(e,t,n,r,a){let i="";if(!i1(a)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!s5(n)))return!1;const o=o5(n+r);if(!o[0])return!1;const c={type:"link",title:null,url:i+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[c,{type:"text",value:o[1]}]:c}function i5(e,t,n,r){return!i1(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function s5(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function o5(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=rw(e,"(");let i=rw(e,")");for(;r!==-1&&a>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}function i1(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||qi(n)||qu(n))&&(!t||n!==47)}s1.peek=g5;function l5(){this.buffer()}function c5(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function u5(){this.buffer()}function d5(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function p5(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Jr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function h5(e){this.exit(e)}function m5(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Jr(this.sliceSerialize(e)).toLowerCase(),n.label=t}function f5(e){this.exit(e)}function g5(){return"["}function s1(e,t,n,r){const a=n.createTracker(r);let i=a.move("[^");const o=n.enter("footnoteReference"),c=n.enter("reference");return i+=a.move(n.safe(n.associationId(e),{after:"]",before:i})),c(),o(),i+=a.move("]"),i}function v5(){return{enter:{gfmFootnoteCallString:l5,gfmFootnoteCall:c5,gfmFootnoteDefinitionLabelString:u5,gfmFootnoteDefinition:d5},exit:{gfmFootnoteCallString:p5,gfmFootnoteCall:h5,gfmFootnoteDefinitionLabelString:m5,gfmFootnoteDefinition:f5}}}function y5(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:s1},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,i,o){const c=i.createTracker(o);let d=c.move("[^");const p=i.enter("footnoteDefinition"),h=i.enter("label");return d+=c.move(i.safe(i.associationId(r),{before:d,after:"]"})),h(),d+=c.move("]:"),r.children&&r.children.length>0&&(c.shift(4),d+=c.move((t?`
`:" ")+i.indentLines(i.containerFlow(r,c.current()),t?o1:b5))),p(),d}}function b5(e,t,n){return t===0?e:o1(e,t,n)}function o1(e,t,n){return(n?"":"    ")+e}const w5=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];l1.peek=S5;function x5(){return{canContainEols:["delete"],enter:{strikethrough:N5},exit:{strikethrough:C5}}}function k5(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:w5}],handlers:{delete:l1}}}function N5(e){this.enter({type:"delete",children:[]},e)}function C5(e){this.exit(e)}function l1(e,t,n,r){const a=n.createTracker(r),i=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),i(),o}function S5(){return"~"}function E5(e){return e.length}function T5(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||E5,i=[],o=[],c=[],d=[];let p=0,h=-1;for(;++h<e.length;){const y=[],k=[];let N=-1;for(e[h].length>p&&(p=e[h].length);++N<e[h].length;){const C=D5(e[h][N]);if(n.alignDelimiters!==!1){const T=a(C);k[N]=T,(d[N]===void 0||T>d[N])&&(d[N]=T)}y.push(C)}o[h]=y,c[h]=k}let m=-1;if(typeof r=="object"&&"length"in r)for(;++m<p;)i[m]=aw(r[m]);else{const y=aw(r);for(;++m<p;)i[m]=y}m=-1;const v=[],g=[];for(;++m<p;){const y=i[m];let k="",N="";y===99?(k=":",N=":"):y===108?k=":":y===114&&(N=":");let C=n.alignDelimiters===!1?1:Math.max(1,d[m]-k.length-N.length);const T=k+"-".repeat(C)+N;n.alignDelimiters!==!1&&(C=k.length+C+N.length,C>d[m]&&(d[m]=C),g[m]=C),v[m]=T}o.splice(1,0,v),c.splice(1,0,g),h=-1;const x=[];for(;++h<o.length;){const y=o[h],k=c[h];m=-1;const N=[];for(;++m<p;){const C=y[m]||"";let T="",j="";if(n.alignDelimiters!==!1){const D=d[m]-(k[m]||0),_=i[m];_===114?T=" ".repeat(D):_===99?D%2?(T=" ".repeat(D/2+.5),j=" ".repeat(D/2-.5)):(T=" ".repeat(D/2),j=T):j=" ".repeat(D)}n.delimiterStart!==!1&&!m&&N.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||m)&&N.push(" "),n.alignDelimiters!==!1&&N.push(T),N.push(C),n.alignDelimiters!==!1&&N.push(j),n.padding!==!1&&N.push(" "),(n.delimiterEnd!==!1||m!==p-1)&&N.push("|")}x.push(n.delimiterEnd===!1?N.join("").replace(/ +$/,""):N.join(""))}return x.join(`
`)}function D5(e){return e==null?"":String(e)}function aw(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function j5(e,t,n,r){const a=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(e,i.current()),A5);return a(),o}function A5(e,t,n){return">"+(n?"":" ")+e}function _5(e,t){return iw(e,t.inConstruct,!0)&&!iw(e,t.notInConstruct,!1)}function iw(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function sw(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&_5(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function R5(e,t){const n=String(e);let r=n.indexOf(t),a=r,i=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++i>o&&(o=i):i=1,a=r+t.length,r=n.indexOf(t,a);return o}function I5(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function $5(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function M5(e,t,n,r){const a=$5(n),i=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(I5(e,n)){const m=n.enter("codeIndented"),v=n.indentLines(i,F5);return m(),v}const c=n.createTracker(r),d=a.repeat(Math.max(R5(i,a)+1,3)),p=n.enter("codeFenced");let h=c.move(d);if(e.lang){const m=n.enter(`codeFencedLang${o}`);h+=c.move(n.safe(e.lang,{before:h,after:" ",encode:["`"],...c.current()})),m()}if(e.lang&&e.meta){const m=n.enter(`codeFencedMeta${o}`);h+=c.move(" "),h+=c.move(n.safe(e.meta,{before:h,after:`
`,encode:["`"],...c.current()})),m()}return h+=c.move(`
`),i&&(h+=c.move(i+`
`)),h+=c.move(d),p(),h}function F5(e,t,n){return(n?"":"    ")+e}function wf(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function O5(e,t,n,r){const a=wf(n),i=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let c=n.enter("label");const d=n.createTracker(r);let p=d.move("[");return p+=d.move(n.safe(n.associationId(e),{before:p,after:"]",...d.current()})),p+=d.move("]: "),c(),!e.url||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),p+=d.move("<"),p+=d.move(n.safe(e.url,{before:p,after:">",...d.current()})),p+=d.move(">")):(c=n.enter("destinationRaw"),p+=d.move(n.safe(e.url,{before:p,after:e.title?" ":`
`,...d.current()}))),c(),e.title&&(c=n.enter(`title${i}`),p+=d.move(" "+a),p+=d.move(n.safe(e.title,{before:p,after:a,...d.current()})),p+=d.move(a),c()),o(),p}function P5(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ll(e){return"&#x"+e.toString(16).toUpperCase()+";"}function xu(e,t,n){const r=Os(e),a=Os(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}c1.peek=L5;function c1(e,t,n,r){const a=P5(n),i=n.enter("emphasis"),o=n.createTracker(r),c=o.move(a);let d=o.move(n.containerPhrasing(e,{after:a,before:c,...o.current()}));const p=d.charCodeAt(0),h=xu(r.before.charCodeAt(r.before.length-1),p,a);h.inside&&(d=ll(p)+d.slice(1));const m=d.charCodeAt(d.length-1),v=xu(r.after.charCodeAt(0),m,a);v.inside&&(d=d.slice(0,-1)+ll(m));const g=o.move(a);return i(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},c+d+g}function L5(e,t,n){return n.options.emphasis||"*"}function z5(e,t){let n=!1;return Sl(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,ym}),!!((!e.depth||e.depth<3)&&pf(e)&&(t.options.setext||n))}function B5(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(z5(e,n)){const h=n.enter("headingSetext"),m=n.enter("phrasing"),v=n.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return m(),h(),v+`
`+(a===1?"=":"-").repeat(v.length-(Math.max(v.lastIndexOf("\r"),v.lastIndexOf(`
`))+1))}const o="#".repeat(a),c=n.enter("headingAtx"),d=n.enter("phrasing");i.move(o+" ");let p=n.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(p)&&(p=ll(p.charCodeAt(0))+p.slice(1)),p=p?o+" "+p:o,n.options.closeAtx&&(p+=" "+o),d(),c(),p}u1.peek=U5;function u1(e){return e.value||""}function U5(){return"<"}d1.peek=H5;function d1(e,t,n,r){const a=wf(n),i=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let c=n.enter("label");const d=n.createTracker(r);let p=d.move("![");return p+=d.move(n.safe(e.alt,{before:p,after:"]",...d.current()})),p+=d.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),p+=d.move("<"),p+=d.move(n.safe(e.url,{before:p,after:">",...d.current()})),p+=d.move(">")):(c=n.enter("destinationRaw"),p+=d.move(n.safe(e.url,{before:p,after:e.title?" ":")",...d.current()}))),c(),e.title&&(c=n.enter(`title${i}`),p+=d.move(" "+a),p+=d.move(n.safe(e.title,{before:p,after:a,...d.current()})),p+=d.move(a),c()),p+=d.move(")"),o(),p}function H5(){return"!"}p1.peek=q5;function p1(e,t,n,r){const a=e.referenceType,i=n.enter("imageReference");let o=n.enter("label");const c=n.createTracker(r);let d=c.move("![");const p=n.safe(e.alt,{before:d,after:"]",...c.current()});d+=c.move(p+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return o(),n.stack=h,i(),a==="full"||!p||p!==m?d+=c.move(m+"]"):a==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function q5(){return"!"}h1.peek=W5;function h1(e,t,n){let r=e.value||"",a="`",i=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],c=n.compilePattern(o);let d;if(o.atBreak)for(;d=c.exec(r);){let p=d.index;r.charCodeAt(p)===10&&r.charCodeAt(p-1)===13&&p--,r=r.slice(0,p)+" "+r.slice(d.index+1)}}return a+r+a}function W5(){return"`"}function m1(e,t){const n=pf(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}f1.peek=V5;function f1(e,t,n,r){const a=wf(n),i=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let c,d;if(m1(e,n)){const h=n.stack;n.stack=[],c=n.enter("autolink");let m=o.move("<");return m+=o.move(n.containerPhrasing(e,{before:m,after:">",...o.current()})),m+=o.move(">"),c(),n.stack=h,m}c=n.enter("link"),d=n.enter("label");let p=o.move("[");return p+=o.move(n.containerPhrasing(e,{before:p,after:"](",...o.current()})),p+=o.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=n.enter("destinationLiteral"),p+=o.move("<"),p+=o.move(n.safe(e.url,{before:p,after:">",...o.current()})),p+=o.move(">")):(d=n.enter("destinationRaw"),p+=o.move(n.safe(e.url,{before:p,after:e.title?" ":")",...o.current()}))),d(),e.title&&(d=n.enter(`title${i}`),p+=o.move(" "+a),p+=o.move(n.safe(e.title,{before:p,after:a,...o.current()})),p+=o.move(a),d()),p+=o.move(")"),c(),p}function V5(e,t,n){return m1(e,n)?"<":"["}g1.peek=G5;function g1(e,t,n,r){const a=e.referenceType,i=n.enter("linkReference");let o=n.enter("label");const c=n.createTracker(r);let d=c.move("[");const p=n.containerPhrasing(e,{before:d,after:"]",...c.current()});d+=c.move(p+"]["),o();const h=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(e),{before:d,after:"]",...c.current()});return o(),n.stack=h,i(),a==="full"||!p||p!==m?d+=c.move(m+"]"):a==="shortcut"?d=d.slice(0,-1):d+=c.move("]"),d}function G5(){return"["}function xf(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function K5(e){const t=xf(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Y5(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function v1(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Z5(e,t,n,r){const a=n.enter("list"),i=n.bulletCurrent;let o=e.ordered?Y5(n):xf(n);const c=e.ordered?o==="."?")":".":K5(n);let d=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const h=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&h&&(!h.children||!h.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(d=!0),v1(n)===o&&h){let m=-1;for(;++m<e.children.length;){const v=e.children[m];if(v&&v.type==="listItem"&&v.children&&v.children[0]&&v.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(o=c),n.bulletCurrent=o;const p=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=i,a(),p}function Q5(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function J5(e,t,n,r){const a=Q5(n);let i=n.bulletCurrent||xf(n);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let o=i.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const c=n.createTracker(r);c.move(i+" ".repeat(o-i.length)),c.shift(o);const d=n.enter("listItem"),p=n.indentLines(n.containerFlow(e,c.current()),h);return d(),p;function h(m,v,g){return v?(g?"":" ".repeat(o))+m:(g?i:i+" ".repeat(o-i.length))+m}}function X5(e,t,n,r){const a=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(e,r);return i(),a(),o}const eM=Cl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function tM(e,t,n,r){return(e.children.some(function(o){return eM(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function nM(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}y1.peek=rM;function y1(e,t,n,r){const a=nM(n),i=n.enter("strong"),o=n.createTracker(r),c=o.move(a+a);let d=o.move(n.containerPhrasing(e,{after:a,before:c,...o.current()}));const p=d.charCodeAt(0),h=xu(r.before.charCodeAt(r.before.length-1),p,a);h.inside&&(d=ll(p)+d.slice(1));const m=d.charCodeAt(d.length-1),v=xu(r.after.charCodeAt(0),m,a);v.inside&&(d=d.slice(0,-1)+ll(m));const g=o.move(a+a);return i(),n.attentionEncodeSurroundingInfo={after:v.outside,before:h.outside},c+d+g}function rM(e,t,n){return n.options.strong||"*"}function aM(e,t,n,r){return n.safe(e.value,r)}function iM(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function sM(e,t,n){const r=(v1(n)+(n.options.ruleSpaces?" ":"")).repeat(iM(n));return n.options.ruleSpaces?r.slice(0,-1):r}const b1={blockquote:j5,break:sw,code:M5,definition:O5,emphasis:c1,hardBreak:sw,heading:B5,html:u1,image:d1,imageReference:p1,inlineCode:h1,link:f1,linkReference:g1,list:Z5,listItem:J5,paragraph:X5,root:tM,strong:y1,text:aM,thematicBreak:sM};function oM(){return{enter:{table:lM,tableData:ow,tableHeader:ow,tableRow:uM},exit:{codeText:dM,table:cM,tableData:kh,tableHeader:kh,tableRow:kh}}}function lM(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function cM(e){this.exit(e),this.data.inTable=void 0}function uM(e){this.enter({type:"tableRow",children:[]},e)}function kh(e){this.exit(e)}function ow(e){this.enter({type:"tableCell",children:[]},e)}function dM(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,pM));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function pM(e,t){return t==="|"?t:e}function hM(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:v,table:o,tableCell:d,tableRow:c}};function o(g,x,y,k){return p(h(g,y,k),g.align)}function c(g,x,y,k){const N=m(g,y,k),C=p([N]);return C.slice(0,C.indexOf(`
`))}function d(g,x,y,k){const N=y.enter("tableCell"),C=y.enter("phrasing"),T=y.containerPhrasing(g,{...k,before:i,after:i});return C(),N(),T}function p(g,x){return T5(g,{align:x,alignDelimiters:r,padding:n,stringLength:a})}function h(g,x,y){const k=g.children;let N=-1;const C=[],T=x.enter("table");for(;++N<k.length;)C[N]=m(k[N],x,y);return T(),C}function m(g,x,y){const k=g.children;let N=-1;const C=[],T=x.enter("tableRow");for(;++N<k.length;)C[N]=d(k[N],g,x,y);return T(),C}function v(g,x,y){let k=b1.inlineCode(g,x,y);return y.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function mM(){return{exit:{taskListCheckValueChecked:lw,taskListCheckValueUnchecked:lw,paragraph:gM}}}function fM(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:vM}}}function lw(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function gM(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let i=-1,o;for(;++i<a.length;){const c=a[i];if(c.type==="paragraph"){o=c;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function vM(e,t,n,r){const a=e.children[0],i=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",c=n.createTracker(r);i&&c.move(o);let d=b1.listItem(e,t,n,{...r,...c.current()});return i&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),d;function p(h){return h+o}}function yM(){return[Z$(),v5(),x5(),oM(),mM()]}function bM(e){return{extensions:[Q$(),y5(e),k5(),hM(e),fM()]}}const wM={tokenize:EM,partial:!0},w1={tokenize:TM,partial:!0},x1={tokenize:DM,partial:!0},k1={tokenize:jM,partial:!0},xM={tokenize:AM,partial:!0},N1={name:"wwwAutolink",tokenize:CM,previous:S1},C1={name:"protocolAutolink",tokenize:SM,previous:E1},Ra={name:"emailAutolink",tokenize:NM,previous:T1},ha={};function kM(){return{text:ha}}let Ai=48;for(;Ai<123;)ha[Ai]=Ra,Ai++,Ai===58?Ai=65:Ai===91&&(Ai=97);ha[43]=Ra;ha[45]=Ra;ha[46]=Ra;ha[95]=Ra;ha[72]=[Ra,C1];ha[104]=[Ra,C1];ha[87]=[Ra,N1];ha[119]=[Ra,N1];function NM(e,t,n){const r=this;let a,i;return o;function o(m){return!km(m)||!T1.call(r,r.previous)||kf(r.events)?n(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),c(m))}function c(m){return km(m)?(e.consume(m),c):m===64?(e.consume(m),d):n(m)}function d(m){return m===46?e.check(xM,h,p)(m):m===45||m===95||Wn(m)?(i=!0,e.consume(m),d):h(m)}function p(m){return e.consume(m),a=!0,d}function h(m){return i&&a&&er(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):n(m)}}function CM(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!S1.call(r,r.previous)||kf(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(wM,e.attempt(w1,e.attempt(x1,i),n),n)(o))}function i(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function SM(e,t,n){const r=this;let a="",i=!1;return o;function o(m){return(m===72||m===104)&&E1.call(r,r.previous)&&!kf(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(m),e.consume(m),c):n(m)}function c(m){if(er(m)&&a.length<5)return a+=String.fromCodePoint(m),e.consume(m),c;if(m===58){const v=a.toLowerCase();if(v==="http"||v==="https")return e.consume(m),d}return n(m)}function d(m){return m===47?(e.consume(m),i?p:(i=!0,d)):n(m)}function p(m){return m===null||yu(m)||Kt(m)||qi(m)||qu(m)?n(m):e.attempt(w1,e.attempt(x1,h),n)(m)}function h(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function EM(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),i):n(o)}function i(o){return o===null?n(o):t(o)}}function TM(e,t,n){let r,a,i;return o;function o(p){return p===46||p===95?e.check(k1,d,c)(p):p===null||Kt(p)||qi(p)||p!==45&&qu(p)?d(p):(i=!0,e.consume(p),o)}function c(p){return p===95?r=!0:(a=r,r=void 0),e.consume(p),o}function d(p){return a||r||!i?n(p):t(p)}}function DM(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(k1,t,i)(o):o===null||Kt(o)||qi(o)?t(o):(e.consume(o),a)}function i(o){return o===41&&r++,e.consume(o),a}}function jM(e,t,n){return r;function r(c){return c===33||c===34||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===63||c===95||c===126?(e.consume(c),r):c===38?(e.consume(c),i):c===93?(e.consume(c),a):c===60||c===null||Kt(c)||qi(c)?t(c):n(c)}function a(c){return c===null||c===40||c===91||Kt(c)||qi(c)?t(c):r(c)}function i(c){return er(c)?o(c):n(c)}function o(c){return c===59?(e.consume(c),r):er(c)?(e.consume(c),o):n(c)}}function AM(e,t,n){return r;function r(i){return e.consume(i),a}function a(i){return Wn(i)?n(i):t(i)}}function S1(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Kt(e)}function E1(e){return!er(e)}function T1(e){return!(e===47||km(e))}function km(e){return e===43||e===45||e===46||e===95||Wn(e)}function kf(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const _M={tokenize:LM,partial:!0};function RM(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:FM,continuation:{tokenize:OM},exit:PM}},text:{91:{name:"gfmFootnoteCall",tokenize:MM},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:IM,resolveTo:$M}}}}function IM(e,t,n){const r=this;let a=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const d=r.events[a][1];if(d.type==="labelImage"){o=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return c;function c(d){if(!o||!o._balanced)return n(d);const p=Jr(r.sliceSerialize({start:o.end,end:r.now()}));return p.codePointAt(0)!==94||!i.includes(p.slice(1))?n(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),t(d))}}function $M(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},c=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...c),e}function MM(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return c;function c(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),d}function d(m){return m!==94?n(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",p)}function p(m){if(i>999||m===93&&!o||m===null||m===91||Kt(m))return n(m);if(m===93){e.exit("chunkString");const v=e.exit("gfmFootnoteCallString");return a.includes(Jr(r.sliceSerialize(v)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(m)}return Kt(m)||(o=!0),i++,e.consume(m),m===92?h:p}function h(m){return m===91||m===92||m===93?(e.consume(m),i++,p):p(m)}}function FM(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,c;return d;function d(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):n(x)}function h(x){if(o>999||x===93&&!c||x===null||x===91||Kt(x))return n(x);if(x===93){e.exit("chunkString");const y=e.exit("gfmFootnoteDefinitionLabelString");return i=Jr(r.sliceSerialize(y)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),v}return Kt(x)||(c=!0),o++,e.consume(x),x===92?m:h}function m(x){return x===91||x===92||x===93?(e.consume(x),o++,h):h(x)}function v(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),a.includes(i)||a.push(i),It(e,g,"gfmFootnoteDefinitionWhitespace")):n(x)}function g(x){return t(x)}}function OM(e,t,n){return e.check(Nl,t,e.attempt(_M,t,n))}function PM(e){e.exit("gfmFootnoteDefinition")}function LM(e,t,n){const r=this;return It(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(i):n(i)}}function zM(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,c){let d=-1;for(;++d<o.length;)if(o[d][0]==="enter"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._close){let p=d;for(;p--;)if(o[p][0]==="exit"&&o[p][1].type==="strikethroughSequenceTemporary"&&o[p][1]._open&&o[d][1].end.offset-o[d][1].start.offset===o[p][1].end.offset-o[p][1].start.offset){o[d][1].type="strikethroughSequence",o[p][1].type="strikethroughSequence";const h={type:"strikethrough",start:Object.assign({},o[p][1].start),end:Object.assign({},o[d][1].end)},m={type:"strikethroughText",start:Object.assign({},o[p][1].end),end:Object.assign({},o[d][1].start)},v=[["enter",h,c],["enter",o[p][1],c],["exit",o[p][1],c],["enter",m,c]],g=c.parser.constructs.insideSpan.null;g&&Sr(v,v.length,0,Wu(g,o.slice(p+1,d),c)),Sr(v,v.length,0,[["exit",m,c],["enter",o[d][1],c],["exit",o[d][1],c],["exit",h,c]]),Sr(o,p-1,d-p+3,v),d=p+v.length-2;break}}for(d=-1;++d<o.length;)o[d][1].type==="strikethroughSequenceTemporary"&&(o[d][1].type="data");return o}function i(o,c,d){const p=this.previous,h=this.events;let m=0;return v;function v(x){return p===126&&h[h.length-1][1].type!=="characterEscape"?d(x):(o.enter("strikethroughSequenceTemporary"),g(x))}function g(x){const y=Os(p);if(x===126)return m>1?d(x):(o.consume(x),m++,g);if(m<2&&!n)return d(x);const k=o.exit("strikethroughSequenceTemporary"),N=Os(x);return k._open=!N||N===2&&!!y,k._close=!y||y===2&&!!N,c(x)}}}class BM{constructor(){this.map=[]}add(t,n,r){UM(this,t,n,r)}consume(t){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const i of a)t.push(i);a=r.pop()}this.map.length=0}}function UM(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function HM(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function qM(){return{flow:{null:{name:"table",tokenize:WM,resolveAll:VM}}}}function WM(e,t,n){const r=this;let a=0,i=0,o;return c;function c(P){let q=r.events.length-1;for(;q>-1;){const E=r.events[q][1].type;if(E==="lineEnding"||E==="linePrefix")q--;else break}const $=q>-1?r.events[q][1].type:null,G=$==="tableHead"||$==="tableRow"?_:d;return G===_&&r.parser.lazy[r.now().line]?n(P):G(P)}function d(P){return e.enter("tableHead"),e.enter("tableRow"),p(P)}function p(P){return P===124||(o=!0,i+=1),h(P)}function h(P){return P===null?n(P):ct(P)?i>1?(i=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),g):n(P):St(P)?It(e,h,"whitespace")(P):(i+=1,o&&(o=!1,a+=1),P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),o=!0,h):(e.enter("data"),m(P)))}function m(P){return P===null||P===124||Kt(P)?(e.exit("data"),h(P)):(e.consume(P),P===92?v:m)}function v(P){return P===92||P===124?(e.consume(P),m):m(P)}function g(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(P):(e.enter("tableDelimiterRow"),o=!1,St(P)?It(e,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):x(P))}function x(P){return P===45||P===58?k(P):P===124?(o=!0,e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),y):D(P)}function y(P){return St(P)?It(e,k,"whitespace")(P):k(P)}function k(P){return P===58?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),N):P===45?(i+=1,N(P)):P===null||ct(P)?j(P):D(P)}function N(P){return P===45?(e.enter("tableDelimiterFiller"),C(P)):D(P)}function C(P){return P===45?(e.consume(P),C):P===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),T):(e.exit("tableDelimiterFiller"),T(P))}function T(P){return St(P)?It(e,j,"whitespace")(P):j(P)}function j(P){return P===124?x(P):P===null||ct(P)?!o||a!==i?D(P):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(P)):D(P)}function D(P){return n(P)}function _(P){return e.enter("tableRow"),I(P)}function I(P){return P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),I):P===null||ct(P)?(e.exit("tableRow"),t(P)):St(P)?It(e,I,"whitespace")(P):(e.enter("data"),R(P))}function R(P){return P===null||P===124||Kt(P)?(e.exit("data"),I(P)):(e.consume(P),P===92?z:R)}function z(P){return P===92||P===124?(e.consume(P),R):R(P)}}function VM(e,t){let n=-1,r=!0,a=0,i=[0,0,0,0],o=[0,0,0,0],c=!1,d=0,p,h,m;const v=new BM;for(;++n<e.length;){const g=e[n],x=g[1];g[0]==="enter"?x.type==="tableHead"?(c=!1,d!==0&&(cw(v,t,d,p,h),h=void 0,d=0),p={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},v.add(n,0,[["enter",p,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,m=void 0,i=[0,0,0,0],o=[0,n+1,0,0],c&&(c=!1,h={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},v.add(n,0,[["enter",h,t]])),a=x.type==="tableDelimiterRow"?2:h?3:1):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],m=Hc(v,t,i,a,void 0,m),i=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],m=Hc(v,t,i,a,void 0,m)),i=o,o=[i[1],n,0,0])):x.type==="tableHead"?(c=!0,d=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(d=n,i[1]!==0?(o[0]=o[1],m=Hc(v,t,i,a,n,m)):o[1]!==0&&(m=Hc(v,t,o,a,n,m)),a=0):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(d!==0&&cw(v,t,d,p,h),v.consume(t.events),n=-1;++n<t.events.length;){const g=t.events[n];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=HM(t.events,n))}return e}function Hc(e,t,n,r,a,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",c="tableContent";n[0]!==0&&(i.end=Object.assign({},Ss(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const d=Ss(t.events,n[1]);if(i={type:o,start:Object.assign({},d),end:Object.assign({},d)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const p=Ss(t.events,n[2]),h=Ss(t.events,n[3]),m={type:c,start:Object.assign({},p),end:Object.assign({},h)};if(e.add(n[2],0,[["enter",m,t]]),r!==2){const v=t.events[n[2]],g=t.events[n[3]];if(v[1].end=Object.assign({},g[1].end),v[1].type="chunkText",v[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,y=n[3]-n[2]-1;e.add(x,y,[])}}e.add(n[3]+1,0,[["exit",m,t]])}return a!==void 0&&(i.end=Object.assign({},Ss(t.events,a)),e.add(a,0,[["exit",i,t]]),i=void 0),i}function cw(e,t,n,r,a){const i=[],o=Ss(t.events,n);a&&(a.end=Object.assign({},o),i.push(["exit",a,t])),r.end=Object.assign({},o),i.push(["exit",r,t]),e.add(n+1,0,i)}function Ss(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const GM={name:"tasklistCheck",tokenize:YM};function KM(){return{text:{91:GM}}}function YM(e,t,n){const r=this;return a;function a(d){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),i)}function i(d){return Kt(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),o):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),o):n(d)}function o(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),c):n(d)}function c(d){return ct(d)?t(d):St(d)?e.check({tokenize:ZM},t,n)(d):n(d)}}function ZM(e,t,n){return It(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function QM(e){return P0([kM(),RM(),zM(e),qM(),KM()])}const JM={};function pi(e){const t=this,n=e||JM,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(QM(n)),i.push(yM()),o.push(bM(n))}const XM=w.memo(function({result:t,templateName:n,isRolling:r,onReroll:a}){const[i,o]=w.useState(!1),c=w.useCallback(async()=>{if(t!=null&&t.text)try{await navigator.clipboard.writeText(t.text),o(!0),setTimeout(()=>o(!1),2e3)}catch(p){console.error("Failed to copy:",p)}},[t==null?void 0:t.text]),d=tr(t.resultType);return s.jsxs("div",{className:"p-5 rounded-xl card-elevated card-result border animate-slide-up",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-copper",title:t.resultType?`Type: ${t.resultType}`:void 0,children:s.jsx(d,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Result"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:`p-2.5 rounded-xl transition-colors ${i?"text-green-500":"hover:bg-accent"}`,title:i?"Copied!":"Copy to clipboard",onClick:c,children:i?s.jsx(vn,{className:"h-5 w-5"}):s.jsx(gl,{className:"h-5 w-5"})}),s.jsx("button",{className:"p-2.5 rounded-xl hover:bg-accent transition-colors",title:"Re-roll",onClick:a,disabled:r,children:s.jsx(Bs,{className:`h-5 w-5 ${r?"animate-spin":""}`})})]})]}),s.jsx("div",{className:"prose-roll overflow-x-auto",children:s.jsx(_a,{remarkPlugins:[pi],children:t.text})})]})}),qc="rolldeo.example.core",eF=["npc","treasure","monsterEncounter"],uw=[{id:"npc",label:"NPC",icon:wl},{id:"treasure",label:"Treasure",icon:mu},{id:"monsterEncounter",label:"Monster",icon:OT}];function tF(){const[e,t]=w.useState("npc"),[n,r]=w.useState(null),[a,i]=w.useState(null),[o,c]=w.useState(!1),[d,p]=w.useState(null),[h,m]=w.useState(!1),v=dt(k=>k.engine),g=dt(k=>k.isInitialized);w.useEffect(()=>{if(!g||h)return;(async()=>{try{const C=dt.getState().getTemplateList(qc).map(j=>j.id);if(!eF.every(j=>C.includes(j))){m(!0);const j=await AA(()=>Promise.resolve().then(()=>yA),void 0);await dt.getState().saveCollection(qc,j.default,"user"),m(!1),r(null),p(null)}}catch(N){console.error("Failed to check/reset templates:",N),m(!1)}})()},[g,h]);const x=w.useCallback(()=>{if(!(!g||o)){c(!0),p(null);try{const k=v.rollTemplate(e,qc);r(k);const N=uw.find(C=>C.id===e);i((N==null?void 0:N.label)||e)}catch(k){console.error("Roll failed:",k),p(k instanceof Error?k.message:"Roll failed")}finally{c(!1)}}},[g,o,v,e]),y=w.useCallback(k=>{t(k),p(null)},[]);return g?h?s.jsx("section",{className:"animate-slide-up stagger-2",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Er,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Resetting example collection..."})]})}):s.jsxs("section",{className:"animate-slide-up stagger-2",children:[s.jsxs("button",{onClick:x,disabled:o,className:`
          btn-copper w-full flex items-center justify-center gap-3 py-4 text-lg font-bold mb-4
          ${o?"animate-pulse":""}
        `,children:[s.jsx($n,{className:`h-6 w-6 ${o?"animate-spin":""}`}),"Roll"]}),s.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:uw.map(({id:k,label:N,icon:C})=>s.jsxs("button",{onClick:()=>y(k),className:`
              flex flex-col items-center justify-center gap-2 py-4 px-2 rounded-xl
              border transition-all duration-200
              ${e===k?"border-primary bg-primary/10 ring-2 ring-primary/20":"border-border/50 bg-card hover:border-primary/30 hover:bg-primary/5"}
            `,children:[s.jsx(C,{className:`h-6 w-6 sm:h-8 sm:w-8 ${e===k?"text-primary":"text-muted-foreground"}`}),s.jsx("span",{className:`text-xs sm:text-sm font-medium ${e===k?"text-foreground":"text-muted-foreground"}`,children:N})]},k))}),d&&s.jsx("div",{className:"mb-4 p-3 rounded-xl border border-destructive/20 bg-destructive/5",children:s.jsx("p",{className:"text-destructive text-center text-sm",children:d})}),n&&a&&s.jsx("div",{className:"mb-4",children:s.jsx(XM,{result:n,templateName:a,isRolling:o,onReroll:x})}),s.jsx("div",{className:"text-center",children:s.jsxs(zn,{to:`/editor/${qc}`,className:"inline-flex items-center gap-2 text-sm text-primary hover:text-primary/80 transition-colors",children:[s.jsx(Pu,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium",children:"Edit this collection"})]})})]}):s.jsx("section",{className:"animate-slide-up stagger-2",children:s.jsx("div",{className:"text-center py-12",children:s.jsx(Er,{className:"h-8 w-8 animate-spin text-primary mx-auto"})})})}const nF=[{path:"/roll",icon:$n,label:"Start Rolling",description:"Roll on your favorite tables",color:"mint"},{path:"/library",icon:Ou,label:"Browse Library",description:"Explore table collections",color:"lavender"},{path:"/editor",icon:Pu,label:"Create Tables",description:"Build your own random tables",color:"amber"}],rF=[{icon:Bx,title:"Works Offline",description:"Install as a PWA and use Rolldeo without internet.",color:"mint"},{icon:Vn,title:"Full Spec Support",description:"Dice rolls, math, inheritance, conditionals & more.",color:"lavender"},{icon:Pu,title:"Visual & JSON Editing",description:"Edit with a friendly UI or directly in JSON.",color:"amber"},{icon:hu,title:"Roll History",description:"Track results and re-roll when you need inspiration.",color:"rose"}],dw={mint:{icon:"icon-mint",card:"card-mint",text:"text-mint",bg:"bg-mint"},lavender:{icon:"icon-lavender",card:"card-lavender",text:"text-lavender",bg:"bg-lavender"},amber:{icon:"icon-amber",card:"card-amber",text:"text-amber",bg:"bg-amber"},rose:{icon:"icon-rose",card:"card-rose",text:"text-rose",bg:"bg-rose"}};function aF(){const e=Gi(),{importFiles:t,saveImportedCollections:n}=dt(),r=dt(g=>g.collections),a=w.useMemo(()=>new Set(r.keys()),[r]),[i,o]=w.useState(!1),[c,d]=w.useState(null),[p,h]=w.useState(!1),m=w.useCallback(async g=>{o(!0),h(!0);try{const x=await t(g),y=x.collections.map(N=>({...N,id:d0(N.id,a)})),k=new Map;if(x.pathToIdMap)for(const[N,C]of x.pathToIdMap){const T=x.collections.find(D=>D.id===C),j=y.find(D=>D.fileName===(T==null?void 0:T.fileName));j&&k.set(N,j.id)}if(y.length>0){const N=g.some(C=>C.name.endsWith(".zip"))?"zip":"file";await n(y,N,k)}d({...x,collections:y})}catch(x){d({success:!1,collections:[],errors:[{fileName:"Import",error:x instanceof Error?x.message:"Import failed"}]})}finally{o(!1)}},[t,n,a]),v=w.useCallback(()=>{h(!1),c!=null&&c.success&&e("/library"),d(null)},[c,e]);return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.home}),s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{className:"text-center space-y-4 py-4",children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight animate-slide-up",children:["Share the Perfect ",s.jsx("span",{className:"gradient-text",children:"Random Table"})]}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto animate-slide-up stagger-1",children:"Create, share, and roll on random tables with fellow GMs. Offline-first, open source, and CC0 licensed."})]}),s.jsx(tF,{}),s.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:nF.map((g,x)=>{const y=dw[g.color];return s.jsx(zn,{to:g.path,className:`group card-elevated p-6 border transition-all duration-300 hover:scale-[1.02] hover:border-white/10 ${y.card} animate-slide-up`,style:{animationDelay:`${(x+1)*.1}s`},children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`icon-container ${y.icon}`,children:s.jsx(g.icon,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg mb-1 group-hover:text-foreground transition-colors",children:g.label}),s.jsx("p",{className:"text-sm text-muted-foreground",children:g.description})]}),s.jsx(Ix,{className:"h-5 w-5 text-muted-foreground opacity-0 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})},g.path)})}),s.jsx("section",{className:"animate-slide-up stagger-3",children:s.jsx(k0,{onFilesSelected:m,disabled:i})}),s.jsxs("section",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Features"}),s.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-border to-transparent"})]}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:rF.map((g,x)=>{const y=dw[g.color];return s.jsxs("div",{className:"card-elevated p-5 border border-white/5 animate-slide-up",style:{animationDelay:`${(x+1)*.1}s`},children:[s.jsx("div",{className:`icon-container ${y.icon} w-fit mb-4`,children:s.jsx(g.icon,{className:"h-5 w-5"})}),s.jsx("h3",{className:"font-semibold mb-2",children:g.title}),s.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:g.description})]},g.title)})})]}),s.jsx("section",{className:"card-elevated border border-white/5 p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[s.jsx("div",{className:"icon-container icon-lavender shrink-0",children:s.jsx(bl,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Fully Open Source & CC0 Licensed"}),s.jsx("p",{className:"text-muted-foreground",children:"Rolldeo is completely free and open source. The code, documentation, and included table collections are all released under the CC0 license  use them however you like, no attribution required."})]}),s.jsxs(zn,{to:"/guide",className:"btn-secondary flex items-center gap-2 shrink-0",children:[s.jsx(Lr,{className:"h-4 w-4"}),"Learn More"]})]})}),s.jsx("section",{className:"card-elevated border border-white/5 p-6 md:p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Ready to get started?"}),s.jsx("p",{className:"text-muted-foreground",children:"Upload your random tables or explore the pre-loaded collections."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(zn,{to:"/library",className:"btn-secondary flex items-center gap-2",children:[s.jsx(Ou,{className:"h-4 w-4"}),"Browse Library"]}),s.jsxs(zn,{to:"/roll",className:"btn-primary flex items-center gap-2",children:[s.jsx($n,{className:"h-4 w-4"}),"Start Rolling"]})]})]})}),s.jsx(N0,{isOpen:p,onClose:v,result:c,isImporting:i})]})]})}function D1(e){return e?e.split("."):[]}function Ku(e,t){const n=D1(e);return n.length===0?"Uncategorized":n.slice(0,t).join(".")}function j1(e){return e?e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim():""}function zi(e){return!e||e==="Uncategorized"?"Uncategorized":D1(e).map(j1).join(" / ")}function iF(e,t){const n=new Set;for(const r of e){const a=Ku(r.namespace,t);n.add(a)}return Array.from(n).sort((r,a)=>r==="Uncategorized"?1:a==="Uncategorized"?-1:r.localeCompare(a))}function sF(e,t){const n=new Map;for(const i of e){const o=Ku(i.namespace,t);n.has(o)||n.set(o,[]),n.get(o).push(i)}for(const[,i]of n)i.sort((o,c)=>o.name.localeCompare(c.name));const r=new Map,a=Array.from(n.keys()).sort((i,o)=>i==="Uncategorized"?1:o==="Uncategorized"?-1:i.localeCompare(o));for(const i of a)r.set(i,n.get(i));return r}function pw(e,t){var r,a,i,o;if(!t)return!0;const n=t.toLowerCase();return e.name.toLowerCase().includes(n)||e.namespace.toLowerCase().includes(n)||(((r=e.description)==null?void 0:r.toLowerCase().includes(n))??!1)||e.tags.some(c=>c.toLowerCase().includes(n))||(((a=e.author)==null?void 0:a.toLowerCase().includes(n))??!1)||(((i=e.sourceBook)==null?void 0:i.toLowerCase().includes(n))??!1)||(((o=e.sourcePublisher)==null?void 0:o.toLowerCase().includes(n))??!1)}function Nf(e={}){const{collections:t,isLoading:n,isInitialized:r,error:a,initialize:i,deleteCollection:o,importFiles:c,getAllTags:d,getTableList:p,getTemplateList:h}=dt(),{searchQuery:m,selectedTags:v,libraryNamespaceFilter:g,libraryGroupDepth:x,rollerNamespaceFilter:y,rollerCollectionSearchQuery:k}=nt(),N=e.useRollerFilters??!1,C=N?k:m,T=e.namespaceFilter!==void 0?e.namespaceFilter:N?y:g,j=e.namespaceDepth??x;w.useEffect(()=>{!r&&!n&&i()},[r,n]);const D=w.useCallback((P,q)=>{var L,Z,X,K;const $=q.toLowerCase(),G=p(P);for(const ee of G)if(ee.name.toLowerCase().includes($)||(L=ee.description)!=null&&L.toLowerCase().includes($)||(Z=ee.tags)!=null&&Z.some(U=>U.toLowerCase().includes($)))return!0;const E=h(P);for(const ee of E)if(ee.name.toLowerCase().includes($)||(X=ee.description)!=null&&X.toLowerCase().includes($)||(K=ee.tags)!=null&&K.some(U=>U.toLowerCase().includes($)))return!0;return!1},[p,h]),_=w.useMemo(()=>Array.from(t.values()),[t]),I=w.useMemo(()=>iF(_,j),[_,j]),R=w.useMemo(()=>_.filter(P=>{if(P.hiddenFromUI||T&&Ku(P.namespace,j)!==T)return!1;if(C){if(N){const q=pw(P,C),$=D(P.id,C);if(!q&&!$)return!1}else if(!pw(P,C))return!1}return!(!N&&v.length>0&&!v.some(q=>P.tags.includes(q)))}),[_,C,v,T,j,N,D]),z=w.useMemo(()=>sF(R,j),[R,j]);return{collections:R,preloaded:R.filter(P=>P.isPreloaded),userCollections:R.filter(P=>!P.isPreloaded),allTags:d(),allNamespaces:I,groupedCollections:z,isLoading:n,isInitialized:r,error:a,deleteCollection:o,importFiles:c}}function oF(e,t){const{selectedCollectionId:n,selectedTableId:r,selectedTemplateId:a,currentResult:i,isRolling:o,rollError:c,history:d,selectCollection:p,selectTable:h,selectTemplate:m,roll:v,rollOnTable:g,rollOnTemplate:x,clearResult:y,loadHistory:k,pinResult:N,deleteHistoryItem:C,clearHistory:T}=sl(),j=dt(E=>E.collections),D=dt(E=>E.isInitialized),{showHiddenTables:_}=nt();w.useEffect(()=>{e&&e!==n&&p(e)},[e]),w.useEffect(()=>{},[t]),w.useEffect(()=>{k()},[]);const I=w.useMemo(()=>Array.from(j.values()).filter(E=>!E.hiddenFromUI),[j]),R=w.useMemo(()=>{if(!n)return[];const E=dt.getState().getTableList(n);return _?E:E.filter(L=>!L.hidden)},[n,_,j]),z=w.useMemo(()=>n?dt.getState().getTemplateList(n):[],[n,j]),P=w.useMemo(()=>D&&n!==null&&(r!==null||a!==null),[D,n,r,a]),q=w.useMemo(()=>{if(a){const E=z.find(L=>L.id===a);return(E==null?void 0:E.name)||a}if(r){const E=R.find(L=>L.id===r);return(E==null?void 0:E.name)||r}return null},[r,a,R,z]),$=w.useMemo(()=>d.filter(E=>E.pinned),[d]),G=w.useCallback(async()=>P?v():null,[P,v]);return{selectedCollectionId:n,selectedTableId:r,selectedTemplateId:a,collections:I,tables:R,templates:z,currentResult:i,isRolling:o,rollError:c,history:d,pinnedHistory:$,selectCollection:p,selectTable:h,selectTemplate:m,roll:G,rollOnTable:g,rollOnTemplate:x,clearResult:y,pinResult:N,deleteHistoryItem:C,clearHistory:T,canRoll:P,selectedItemName:q}}function lF(e,t=300){const[n,r]=w.useState(e);return w.useEffect(()=>{const a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),n}function cF({initialWidth:e,minWidth:t,maxWidth:n,onWidthChange:r,persistDelay:a=500}){const[i,o]=w.useState(e),[c,d]=w.useState(!1),p=w.useRef(null),h=w.useCallback(g=>Math.min(n,Math.max(t,g)),[t,n]),m=w.useCallback(g=>{g.preventDefault(),d(!0)},[]),v=w.useCallback(g=>{o(h(g))},[h]);return w.useEffect(()=>{if(!c)return;const g=y=>{requestAnimationFrame(()=>{const k=h(y.clientX);o(k)})},x=()=>{d(!1),r&&(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{o(y=>(r(y),y))},a))};return document.addEventListener("mousemove",g),document.addEventListener("mouseup",x),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",x),document.body.style.cursor="",document.body.style.userSelect=""}},[c,h,r,a]),w.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),{width:i,isResizing:c,handleMouseDown:m,setWidth:v}}function uF({tables:e,templates:t,searchQuery:n,viewMode:r,groupBy:a,activeTab:i,showHidden:o=!1}){const c=lF(n,300),d=w.useMemo(()=>i==="tables"?e.map(m=>({id:m.id,name:m.name,type:"table",tableType:m.type,description:m.description,tags:m.tags,hidden:m.hidden,entryCount:m.entryCount,resultType:m.resultType})):t.map(m=>({id:m.id,name:m.name,type:"template",description:m.description,tags:m.tags,resultType:m.resultType})),[e,t,i]),p=w.useMemo(()=>{const m=c.toLowerCase().trim();return d.filter(v=>{var g,x;return!o&&v.hidden?!1:!!(!m||v.name.toLowerCase().includes(m)||(g=v.description)!=null&&g.toLowerCase().includes(m)||(x=v.tags)!=null&&x.some(y=>y.toLowerCase().includes(m)))})},[d,c,o]),h=w.useMemo(()=>{var g;if(r!=="grouped"||!a)return[];const m=new Map;for(const x of p){let y;switch(a){case"resultType":x.resultType?y=[x.resultType.charAt(0).toUpperCase()+x.resultType.slice(1)]:y=["Untyped"];break;case"tag":y=(g=x.tags)!=null&&g.length?x.tags:["Untagged"];break;case"alpha":{const k=x.name.charAt(0).toUpperCase();y=[/[A-Z]/.test(k)?k:"#"];break}default:y=["Other"]}for(const k of y){const N=m.get(k)||[];N.push(x),m.set(k,N)}}const v=Array.from(m.entries()).map(([x,y])=>({groupName:x,items:y.sort((k,N)=>k.name.localeCompare(N.name))}));return a==="alpha"?v.sort((x,y)=>x.groupName==="#"?1:y.groupName==="#"?-1:x.groupName.localeCompare(y.groupName)):a==="resultType"?v.sort((x,y)=>x.groupName==="Untyped"?1:y.groupName==="Untyped"?-1:x.groupName.localeCompare(y.groupName)):v.sort((x,y)=>x.groupName==="Untagged"?1:y.groupName==="Untagged"?-1:x.groupName.localeCompare(y.groupName)),v},[p,r,a]);return{filteredItems:p,groupedItems:h,debouncedQuery:c,totalCount:d.length,filteredCount:p.length}}const zo="Local",Bo="Syntax",dF=[{id:"syntax-dice",label:"dice:",insertText:"dice:2d6",category:"syntax",description:"Roll dice (e.g., 2d6, 1d20+5, 4d6k3)",icon:$n,source:Bo,colorClass:"amber"},{id:"syntax-math",label:"math:",insertText:"math:1 + 2",category:"syntax",description:"Calculate math expression",icon:$u,source:Bo,colorClass:"amber"},{id:"syntax-again",label:"again",insertText:"again",category:"syntax",description:"Re-roll the current table",icon:Bs,source:Bo,colorClass:"amber"},{id:"syntax-collect",label:"collect:",insertText:"collect:$var.@prop",category:"syntax",description:"Aggregate captured properties",icon:Ki,source:Bo,colorClass:"amber"},{id:"syntax-switch",label:"switch[",insertText:'switch[$=="value":"result"].else["fallback"]',category:"syntax",description:"Conditional logic",icon:iT,source:Bo,colorClass:"amber"}];function pF(e){const{localTables:t,localTemplates:n,importedTables:r=[],importedTemplates:a=[],variables:i={},sharedVariables:o={},entrySetKeys:c=[]}=e;return w.useMemo(()=>{const d=[];for(const p of t)d.push({id:`table-${p.id}`,label:p.id,insertText:p.id,category:"table",description:p.name!==p.id?p.name:p.description,icon:p.resultType?tr(p.resultType):rr,source:zo,colorClass:"mint"});for(const p of n)d.push({id:`template-${p.id}`,label:p.id,insertText:p.id,category:"template",description:p.name!==p.id?p.name:p.description,icon:p.resultType?tr(p.resultType):Vn,source:zo,colorClass:"lavender"});for(const p of r){const h=`${p.alias}.${p.id}`;d.push({id:`imported-table-${h}`,label:h,insertText:h,category:"table",description:p.name!==p.id?p.name:p.description,icon:p.resultType?tr(p.resultType):rr,source:p.sourceCollectionName,colorClass:"mint"})}for(const p of a){const h=`${p.alias}.${p.id}`;d.push({id:`imported-template-${h}`,label:h,insertText:h,category:"template",description:p.name!==p.id?p.name:p.description,icon:p.resultType?tr(p.resultType):Vn,source:p.sourceCollectionName,colorClass:"lavender"})}for(const p of Object.keys(i))d.push({id:`variable-${p}`,label:`$${p}`,insertText:`$${p}`,category:"variable",description:`Static: "${i[p]}"`,icon:Us,source:zo,colorClass:"pink"});for(const p of Object.keys(o))d.push({id:`shared-${p}`,label:`$${p}`,insertText:`$${p}`,category:"variable",description:`Shared: ${o[p]}`,icon:Hm,source:zo,colorClass:"pink"});for(const p of c)d.push({id:`placeholder-${p}`,label:`@${p}`,insertText:`@${p}`,category:"placeholder",description:"Entry set property",icon:Hi,source:zo,colorClass:"cyan"});return d.push(...dF),d},[t,n,r,a,i,o,c])}function A1(e){return e.type==="simple"||!e.type}function Cf(e){const t=new Set(["value","description"]);if(A1(e)&&(e.defaultSets&&Object.keys(e.defaultSets).forEach(n=>t.add(n)),e.entries))for(const n of e.entries)n.sets&&Object.keys(n.sets).forEach(r=>t.add(r));return Array.from(t).sort()}function _1(e){const t=new Set(["value"]);return e.shared&&Object.keys(e.shared).forEach(n=>{const r=n.startsWith("$")?n.slice(1):n;t.add(r)}),Array.from(t).sort()}function R1(e){const t=e.match(/^\{\{([a-zA-Z_][a-zA-Z0-9_.]*)\}\}$/);if(t){const r=t[1].split(".");return r[r.length-1]}return null}function hF(e,t){if(!A1(e))return null;if(e.defaultSets&&e.defaultSets[t])return e.defaultSets[t];if(e.entries){for(const n of e.entries)if(n.sets&&n.sets[t])return n.sets[t]}return null}function mF(e,t){return e.shared&&(e.shared[t]||e.shared[`$${t}`])||null}function I1(e,t,n,r=[],a=!1,i){if(a&&i){const o=i[n]||i[`$${n}`];if(o){const c=R1(o);if(c)return I1(e,t,c,r,!1,i)}return[]}if(r.length>0)return fF(e,t,n,r);if(e){const o=e.get(n);if(o)return Cf(o).map(d=>({id:`property-${n}-${d}`,label:d,insertText:d,category:"property",description:d==="value"?"The entry's output text":d==="description"?"The entry's description":`Property from ${n}`,icon:Hi,source:n,colorClass:"cyan"}))}if(t){const o=t.get(n);if(o)return _1(o).map(d=>({id:`property-${n}-${d}`,label:d,insertText:d,category:"property",description:d==="value"?"The template's output text":`Shared variable from ${n}`,icon:Hi,source:n,colorClass:"cyan"}))}return[]}function fF(e,t,n,r){if(!e&&!t)return[];let a=e==null?void 0:e.get(n),i=a||t==null?void 0:t.get(n);if(!a&&!i)return[];for(const c of r){let d=null;if(a?d=hF(a,c):i&&(d=mF(i,c)),!d)return[];const p=R1(d);if(!p)return[];if(a=e==null?void 0:e.get(p),i=a||t==null?void 0:t.get(p),!a&&!i)return[]}const o=`${n}.@${r.join(".@")}`;return a?Cf(a).map(d=>({id:`property-${o}-${d}`,label:d,insertText:d,category:"property",description:d==="value"?"The entry's output text":d==="description"?"The entry's description":`Property from ${a.id}`,icon:Hi,source:a.id,colorClass:"cyan"})):i?_1(i).map(d=>({id:`property-${o}-${d}`,label:d,insertText:d,category:"property",description:d==="value"?"The template's output text":`Shared variable from ${i.id}`,icon:Hi,source:i.id,colorClass:"cyan"})):[]}function gF(e,t,n,r={}){let a;switch(t){case"variable":a=e.filter(i=>i.category==="variable");break;case"placeholder":a=e.filter(i=>i.category==="placeholder");break;case"property":r.targetId?a=I1(r.tableMap,r.templateMap,r.targetId,r.propertyChain,r.isVariable,r.sharedVariables):a=[];break;case"braces":default:a=e;break}if(n.trim()){const i=n.toLowerCase();a=a.filter(o=>{var c;return o.label.toLowerCase().includes(i)||((c=o.description)==null?void 0:c.toLowerCase().includes(i))||o.source.toLowerCase().includes(i)})}return a}function vF(e,t){const n=window.getComputedStyle(e),r=document.createElement("div");r.style.cssText=`
    position: absolute;
    top: 0;
    left: 0;
    visibility: hidden;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
  `;const a=["font-family","font-size","font-weight","font-style","letter-spacing","text-transform","word-spacing","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing","line-height"];for(const p of a)r.style.setProperty(p,n.getPropertyValue(p));r.style.width=`${e.clientWidth}px`;const i=e.value.substring(0,t);r.textContent=i;const o=document.createElement("span");o.textContent="|",r.appendChild(o),document.body.appendChild(r);const c=o.getBoundingClientRect(),d=r.getBoundingClientRect();return document.body.removeChild(r),{top:c.top-d.top-e.scrollTop,left:c.left-d.left-e.scrollLeft}}function yF(e){if(!e.endsWith("."))return null;const t=e.slice(0,-1),n=t.startsWith("@"),r=t.startsWith("$"),i=(n||r?t.slice(1):t).split(".");if(i.length===0||!i[0])return null;const o=i[0],c=i.slice(1).map(p=>p.startsWith("@")?p.slice(1):p),d=/^[a-zA-Z_][a-zA-Z0-9_]*$/;if(!d.test(o))return null;for(const p of c)if(!d.test(p))return null;return{targetId:o,propertyChain:c,isPlaceholder:n,isVariable:r}}function bF(e,t){const n=e.substring(0,t),r=n.lastIndexOf("{{");if(r===-1)return null;const a=n.substring(r+2);if(a.includes("}}"))return null;const i=a.lastIndexOf(".");if(i!==-1){const d=a.substring(0,i+1),p=d.match(/([@$]?[a-zA-Z_][a-zA-Z0-9_]*(?:\.@?[a-zA-Z_][a-zA-Z0-9_]*)*\.)$/);if(p){const h=p[1],m=yF(h);if(m)return{type:"property",startIndex:r+2+d.length-h.length+h.length,cursorIndex:t,partialInput:a.substring(i+1),targetId:m.targetId,propertyChain:m.propertyChain,isVariable:m.isVariable}}}const o=a.lastIndexOf("$");if(o!==-1){const d=o>0?a[o-1]:"";if(!d||/[\s{|:*>]/.test(d))return{type:"variable",startIndex:r+2+o,cursorIndex:t,partialInput:a.substring(o+1)}}const c=a.lastIndexOf("@");if(c!==-1){const d=c>0?a[c-1]:"";if(!d||/[\s{|:*>.]/.test(d))return{type:"placeholder",startIndex:r+2+c,cursorIndex:t,partialInput:a.substring(c+1)}}return{type:"braces",startIndex:r,cursorIndex:t,partialInput:a}}function wF(e,t,n){const{type:r,startIndex:a,cursorIndex:i}=t,c=e.substring(i).startsWith("}}");let d,p;switch(r){case"braces":c?(d=`{{${n.insertText}`,p=a+d.length+2):(d=`{{${n.insertText}}}`,p=a+d.length);break;case"variable":d=n.insertText,p=a+d.length;break;case"placeholder":d=n.insertText,p=a+d.length;break;case"property":d=`@${n.insertText}`,p=a+d.length;break;default:return{newValue:e,newCursorPos:i}}return{newValue:e.substring(0,a)+d+e.substring(i),newCursorPos:p}}function $1(e){const{textareaRef:t,suggestions:n,value:r,onValueChange:a,tableMap:i,templateMap:o,sharedVariables:c}=e,[d,p]=w.useState(!1),[h,m]=w.useState(0),[v,g]=w.useState(null),x=w.useRef(null),y=(v==null?void 0:v.type)==="property"?{tableMap:i,templateMap:o,targetId:v.targetId,propertyChain:v.propertyChain,isVariable:v.isVariable,sharedVariables:c}:{},k=v?gF(n,v.type,v.partialInput,y):[],N=w.useCallback(()=>{const _=t.current;if(!_){p(!1),g(null);return}const I=_.value,R=_.selectionStart,z=bF(I,R);if(z&&(n.length>0||z.type==="property"&&(i||o||c))&&z){const q=vF(_,z.startIndex),$=_.getBoundingClientRect();g({...z,position:{top:$.top+q.top+parseInt(window.getComputedStyle(_).lineHeight||"20"),left:$.left+q.left}}),p(!0),m(0)}else p(!1),g(null)},[n,t,i,o,c]),C=w.useCallback(()=>{setTimeout(()=>{N()},0)},[N]),T=w.useCallback(()=>{p(!1),g(null)},[]),j=w.useCallback(_=>{const I=_??h;if(!v||I<0||I>=k.length)return;const R=k[I],{newValue:z,newCursorPos:P}=wF(r,v,R);x.current=P,a(z),T()},[v,k,r,a,T,h]),D=w.useCallback(_=>{if(!(!d||k.length===0))switch(_.key){case"ArrowDown":_.preventDefault(),m(I=>Math.min(I+1,k.length-1));break;case"ArrowUp":_.preventDefault(),m(I=>Math.max(I-1,0));break;case"Tab":_.preventDefault(),j(h);break;case"Enter":_.preventDefault(),j(h);break;case"Escape":_.preventDefault(),T();break}},[d,k,h,j,T]);return w.useEffect(()=>{if(x.current!==null&&t.current){const _=x.current;x.current=null,requestAnimationFrame(()=>{var I,R;(I=t.current)==null||I.setSelectionRange(_,_),(R=t.current)==null||R.focus()})}},[r,t]),w.useEffect(()=>{d&&k.length===0&&(v==null?void 0:v.type)!=="property"&&T()},[d,k.length,v==null?void 0:v.type,T]),w.useEffect(()=>{m(0)},[k.length]),{isOpen:d,filteredSuggestions:k,selectedIndex:h,setSelectedIndex:m,triggerInfo:v,handleKeyDown:D,handleInput:C,confirm:j,close:T}}const xF=w.memo(function({selectedCount:t,deletableCount:n,onDelete:r,onExport:a,onSelectAll:i,onSelectNone:o,totalVisibleCount:c}){const d=t===c&&c>0,p=n>0;return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm font-medium text-primary px-2",children:[t," selected"]}),s.jsx("div",{className:"w-px h-5 bg-border/50"}),s.jsxs("button",{onClick:d?o:i,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-sm rounded-lg hover:bg-white/5 transition-colors",title:d?"Deselect all":"Select all",children:[d?s.jsx(LT,{className:"h-4 w-4"}):s.jsx(PT,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:d?"None":"All"})]}),s.jsxs("button",{onClick:a,className:"flex items-center gap-1.5 px-2.5 py-1.5 text-sm rounded-lg hover:bg-white/5 transition-colors",title:"Export selected collections",children:[s.jsx(Ps,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),s.jsxs("button",{onClick:r,disabled:!p,className:J("flex items-center gap-1.5 px-2.5 py-1.5 text-sm rounded-lg transition-colors",p?"hover:bg-destructive/10 text-destructive":"opacity-50 cursor-not-allowed text-muted-foreground"),title:p?`Delete ${n} collection${n!==1?"s":""}`:"No deletable collections selected (preloaded collections cannot be deleted)",children:[s.jsx(ar,{className:"h-4 w-4"}),s.jsxs("span",{className:"hidden sm:inline",children:["Delete",p&&n!==t?` (${n})`:""]})]})]})}),kF=w.memo(function({allNamespaces:t,allTags:n,totalCount:r,filteredCount:a,selectedCount:i=0,deletableCount:o=0,onDelete:c,onExport:d,onSelectAll:p,onSelectNone:h}){const{searchQuery:m,setSearchQuery:v,selectedTags:g,toggleTag:x,libraryViewMode:y,setLibraryViewMode:k,libraryGroupDepth:N,setLibraryGroupDepth:C,libraryNamespaceFilter:T,setLibraryNamespaceFilter:j,clearLibraryFilters:D}=nt(),[_,I]=w.useState(!1),[R,z]=w.useState(""),P=w.useRef(null),q=w.useRef(null);w.useEffect(()=>{function L(Z){P.current&&!P.current.contains(Z.target)&&I(!1)}return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const $=R?t.filter(L=>zi(L).toLowerCase().includes(R.toLowerCase())):t,G=w.useCallback(L=>{j(L),I(!1),z("")},[j]),E=m||g.length>0||T;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[s.jsx(Pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),s.jsx("input",{ref:q,type:"search",placeholder:"Search collections...",value:m,onChange:L=>v(L.target.value),className:"input-dark pl-10 pr-8 w-full h-10"}),m&&s.jsx("button",{onClick:()=>v(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded hover:bg-white/10 text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(Ut,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"relative",ref:P,children:[s.jsxs("button",{onClick:()=>I(!_),className:J("flex items-center gap-2 px-3 h-10 rounded-lg border transition-all",T?"bg-copper/15 border-copper/40 text-copper":"bg-card border-border hover:border-border/80 text-muted-foreground hover:text-foreground"),children:[s.jsx(Fu,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm max-w-[150px] truncate",children:T?zi(T):"All Namespaces"}),s.jsx(En,{className:J("h-4 w-4 transition-transform",_&&"rotate-180")})]}),_&&s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-72 max-h-80 overflow-hidden rounded-xl border border-border bg-popover shadow-xl z-50 animate-fade-in",children:[s.jsx("div",{className:"p-2 border-b border-border/50",children:s.jsx("input",{type:"text",placeholder:"Search namespaces...",value:R,onChange:L=>z(L.target.value),className:"w-full px-3 py-2 text-sm bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50",autoFocus:!0})}),s.jsxs("div",{className:"overflow-y-auto max-h-56 p-1",children:[s.jsxs("button",{onClick:()=>G(null),className:J("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left text-sm transition-colors",T?"hover:bg-white/5 text-foreground":"bg-primary/10 text-primary"),children:[s.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:!T&&s.jsx(vn,{className:"h-4 w-4"})}),s.jsx("span",{className:"font-medium",children:"All Namespaces"}),s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:r})]}),$.map(L=>s.jsxs("button",{onClick:()=>G(L),className:J("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left text-sm transition-colors",T===L?"bg-copper/15 text-copper":"hover:bg-white/5 text-foreground"),children:[s.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:T===L&&s.jsx(vn,{className:"h-4 w-4"})}),s.jsx("span",{className:"truncate",children:zi(L)})]},L)),$.length===0&&s.jsxs("div",{className:"px-3 py-4 text-center text-sm text-muted-foreground",children:['No namespaces match "',R,'"']})]})]})]}),s.jsxs("div",{className:"flex items-center rounded-lg border border-border bg-card overflow-hidden",children:[s.jsxs("button",{onClick:()=>k("grid"),className:J("flex items-center gap-1.5 px-3 h-10 text-sm transition-colors",y==="grid"?"bg-primary/15 text-primary":"text-muted-foreground hover:text-foreground hover:bg-white/5"),title:"Grid view",children:[s.jsx(vT,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grid"})]}),s.jsx("div",{className:"w-px h-6 bg-border"}),s.jsxs("button",{onClick:()=>k("grouped"),className:J("flex items-center gap-1.5 px-3 h-10 text-sm transition-colors",y==="grouped"?"bg-primary/15 text-primary":"text-muted-foreground hover:text-foreground hover:bg-white/5"),title:"Grouped by namespace",children:[s.jsx(Ki,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Grouped"})]})]}),y==="grouped"&&s.jsxs("div",{className:"flex items-center rounded-lg border border-border bg-card overflow-hidden",children:[s.jsx("button",{onClick:()=>C(1),className:J("px-3 h-10 text-sm transition-colors",N===1?"bg-copper/15 text-copper":"text-muted-foreground hover:text-foreground hover:bg-white/5"),title:"Group by publisher only",children:"Publisher"}),s.jsx("div",{className:"w-px h-6 bg-border"}),s.jsx("button",{onClick:()=>C(2),className:J("px-3 h-10 text-sm transition-colors",N===2?"bg-copper/15 text-copper":"text-muted-foreground hover:text-foreground hover:bg-white/5"),title:"Group by publisher and product",children:"Product"})]}),E&&s.jsxs("button",{onClick:D,className:"flex items-center gap-1.5 px-3 h-10 text-sm text-muted-foreground hover:text-foreground rounded-lg hover:bg-white/5 transition-colors",children:[s.jsx(Ut,{className:"h-4 w-4"}),"Clear"]}),E&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:[a," of ",r]}),i>0&&c&&d&&p&&h&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-6 bg-border"}),s.jsx(xF,{selectedCount:i,deletableCount:o,onDelete:c,onExport:d,onSelectAll:p,onSelectNone:h,totalVisibleCount:a})]})]}),n.length>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Tags:"}),n.slice(0,12).map(L=>s.jsx("button",{onClick:()=>x(L),className:J("pill transition-all duration-200",g.includes(L)?"bg-primary text-primary-foreground border-primary":"pill-outline hover:border-white/30"),children:L},L)),n.length>12&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",n.length-12," more"]})]})]})}),hw=["pill-mint","pill-lavender","pill-amber"],ku=w.memo(function({collection:t,onDelete:n,onHide:r,index:a=0,compact:i=!1,isSelected:o=!1,onSelectionChange:c}){const d=t.author||t.sourceBook||t.sourcePublisher;return s.jsxs("div",{className:J("card-elevated border group transition-all duration-300 hover:scale-[1.01] animate-slide-up relative",i?"p-4":"p-5",o?"border-primary/50 bg-primary/5":"border-white/5 hover:border-white/10"),style:{animationDelay:`${a*.05}s`},children:[s.jsx("button",{role:"checkbox","aria-checked":o,"aria-label":o?"Deselect collection":"Select collection",onClick:p=>{p.preventDefault(),p.stopPropagation(),c==null||c(t.id,!o)},className:J("absolute top-3 left-3 w-5 h-5 rounded border-2 flex items-center justify-center transition-all z-10",o?"bg-primary border-primary text-primary-foreground":"border-white/30 hover:border-white/50 bg-black/20"),children:o&&s.jsx(vn,{className:"h-3 w-3"})}),s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3 pl-7",children:[s.jsx("h3",{className:J("font-semibold leading-tight",i?"text-base":"text-lg"),children:t.name}),n&&s.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),n()},className:"p-2 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded-lg transition-all -mt-1 -mr-1",title:"Delete collection",children:s.jsx(ar,{className:"h-4 w-4 text-destructive"})}),r&&s.jsx("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),r()},className:"p-2 opacity-0 group-hover:opacity-100 hover:bg-muted rounded-lg transition-all -mt-1 -mr-1",title:"Hide collection",children:s.jsx(li,{className:"h-4 w-4 text-muted-foreground"})})]}),s.jsx("div",{className:J("text-sm text-muted-foreground line-clamp-2 prose-card",i?"mb-3 min-h-[2rem]":"mb-4 min-h-[2.5rem]"),children:s.jsx(_a,{components:{p:({children:p})=>s.jsxs("span",{children:[p," "]}),h1:({children:p})=>s.jsxs("strong",{className:"text-foreground",children:[p,": "]}),h2:({children:p})=>s.jsxs("strong",{className:"text-foreground",children:[p,": "]}),h3:({children:p})=>s.jsxs("strong",{className:"text-foreground",children:[p,": "]}),strong:({children:p})=>s.jsx("strong",{className:"font-semibold text-foreground/90",children:p}),em:({children:p})=>s.jsx("em",{children:p}),code:({children:p})=>s.jsx("code",{className:"rounded bg-muted px-1 py-0.5 text-xs font-mono",children:p}),a:({href:p,children:h})=>s.jsx("a",{href:p,className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:h}),ul:({children:p})=>s.jsx("span",{children:p}),ol:({children:p})=>s.jsx("span",{children:p}),li:({children:p})=>s.jsxs("span",{children:[" ",p," "]}),blockquote:({children:p})=>s.jsx("span",{className:"italic",children:p})},children:t.description||`Collection with ${t.tableCount} tables`})}),d&&!i&&s.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-muted-foreground mb-3 pb-3 border-b border-white/5",children:[t.author&&s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(wl,{className:"h-3 w-3 text-copper/60"}),s.jsx("span",{className:"truncate max-w-[120px]",children:t.author})]}),(t.sourceBook||t.sourcePublisher)&&s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Lr,{className:"h-3 w-3 text-lavender/60"}),s.jsx("span",{className:"truncate max-w-[150px]",children:t.sourceBook||t.sourcePublisher})]})]}),s.jsxs("div",{className:J("flex flex-wrap gap-1.5",i?"mb-3 min-h-[1.5rem]":"mb-4 min-h-[1.75rem]"),children:[t.tags.slice(0,i?2:3).map((p,h)=>s.jsx("span",{className:J("pill",hw[h%hw.length]),children:p},p)),t.tags.length>(i?2:3)&&s.jsxs("span",{className:"pill pill-outline",children:["+",t.tags.length-(i?2:3)]})]}),s.jsxs("div",{className:J("flex items-center gap-4 text-xs text-muted-foreground border-b border-white/5",i?"mb-3 pb-3":"mb-4 pb-4"),children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx($n,{className:"h-3.5 w-3.5"}),t.tableCount," table",t.tableCount!==1?"s":""]}),t.templateCount>0&&s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(Ki,{className:"h-3.5 w-3.5"}),t.templateCount," template",t.templateCount!==1?"s":""]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(zn,{to:`/roll?collection=${t.id}`,className:J("flex-1 btn-primary flex items-center justify-center gap-2 text-sm",i?"py-2":"py-2.5"),children:[s.jsx($n,{className:"h-4 w-4"}),"Roll"]}),s.jsx(zn,{to:`/editor/${t.id}`,className:J("flex-1 btn-secondary flex items-center justify-center text-sm",i?"py-2":"py-2.5"),children:"View"})]})]})}),NF=w.memo(function({groupedCollections:t,onDeleteCollection:n,selectedIds:r=new Set,onSelectionChange:a}){const{libraryExpandedNamespaces:i,toggleLibraryNamespaceExpanded:o}=nt();return t.size===0?s.jsxs("div",{className:"card-elevated border border-dashed border-white/10 p-8 text-center",children:[s.jsx("div",{className:"icon-container icon-copper mx-auto mb-4 w-fit",children:s.jsx(Ls,{className:"h-6 w-6"})}),s.jsx("p",{className:"text-muted-foreground",children:"No collections match your filters"})]}):s.jsx("div",{className:"space-y-3",children:Array.from(t.entries()).map(([c,d],p)=>s.jsx(CF,{namespace:c,collections:d,isExpanded:i.includes(c),onToggle:()=>o(c),onDeleteCollection:n,groupIndex:p,selectedIds:r,onSelectionChange:a},c))})}),CF=w.memo(function({namespace:t,collections:n,isExpanded:r,onToggle:a,onDeleteCollection:i,groupIndex:o,selectedIds:c=new Set,onSelectionChange:d}){const p=w.useCallback((v,g)=>{i&&i(v,g)},[i]),h=n.filter(v=>v.isPreloaded).length,m=n.filter(v=>!v.isPreloaded).length;return s.jsxs("div",{className:J("rounded-xl border overflow-hidden transition-all duration-300",r?"border-copper/30 bg-gradient-to-b from-copper/5 to-transparent":"border-white/10 bg-card hover:border-white/20"),style:{animationDelay:`${o*.05}s`},children:[s.jsxs("button",{onClick:a,className:J("w-full flex items-center gap-3 px-4 py-3.5 text-left transition-colors",r?"bg-copper/10":"hover:bg-white/5"),children:[s.jsx(sn,{className:J("h-5 w-5 flex-shrink-0 transition-transform duration-300",r?"rotate-90 text-copper":"text-muted-foreground")}),s.jsx("div",{className:J("p-2 rounded-lg transition-colors",r?"bg-copper/20 text-copper":"bg-white/5 text-muted-foreground"),children:s.jsx(Ls,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:J("font-semibold truncate transition-colors",r?"text-copper":"text-foreground"),children:zi(t)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length," collection",n.length!==1?"s":"",h>0&&m>0&&s.jsxs("span",{className:"ml-1",children:["(",h," bundled, ",m," imported)"]})]})]}),s.jsx("span",{className:J("px-2.5 py-1 rounded-full text-sm font-medium transition-colors",r?"bg-copper/20 text-copper":"bg-white/10 text-muted-foreground"),children:n.length})]}),s.jsx("div",{className:J("grid transition-all duration-300 ease-out",r?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:s.jsx("div",{className:"overflow-hidden",children:s.jsxs("div",{className:"p-4 pt-2 border-t border-copper/10",children:[m>0&&s.jsxs("div",{className:J(h>0&&"mb-6"),children:[h>0&&s.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-3",children:"Your Collections"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.filter(v=>!v.isPreloaded).map((v,g)=>s.jsx(ku,{collection:v,onDelete:()=>p(v.id,v.name),index:g,compact:!0,isSelected:c.has(v.id),onSelectionChange:d},v.id))})]}),h>0&&s.jsxs("div",{children:[m>0&&s.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-3",children:"Bundled Collections"}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.filter(v=>v.isPreloaded).map((v,g)=>s.jsx(ku,{collection:v,index:g,compact:!0,isSelected:c.has(v.id),onSelectionChange:d},v.id))})]})]})})})]})}),SF=w.memo(function({isOpen:t,onClose:n,onConfirm:r,collections:a,skippedCount:i,isDeleting:o}){return t?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm animate-fade-in",onClick:o?void 0:n,"aria-hidden":"true"}),s.jsxs("div",{role:"alertdialog","aria-modal":"true","aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",className:"relative card-elevated border border-white/10 max-w-md w-full mx-4 max-h-[80vh] flex flex-col animate-slide-up",children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-rose",children:o?s.jsx(Er,{className:"h-5 w-5 animate-spin"}):s.jsx(ar,{className:"h-5 w-5"})}),s.jsx("h2",{id:"delete-dialog-title",className:"text-lg font-semibold",children:o?"Deleting...":"Confirm Delete"})]}),!o&&s.jsx("button",{onClick:n,className:"p-2 rounded-xl hover:bg-white/5 transition-colors","aria-label":"Close dialog",children:s.jsx(Ut,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-5 overflow-y-auto flex-1",children:o?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"h-12 w-12 animate-spin text-destructive"}),s.jsx("div",{className:"absolute inset-0 bg-destructive/20 blur-xl rounded-full"})]}),s.jsxs("p",{className:"text-muted-foreground",children:["Deleting ",a.length," collection",a.length!==1?"s":"","..."]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{id:"delete-dialog-description",className:"text-muted-foreground",children:["Are you sure you want to delete ",a.length," collection",a.length!==1?"s":"","? This action cannot be undone."]}),i>0&&s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-xl bg-amber/10 border border-amber/20",children:[s.jsx(ca,{className:"h-5 w-5 text-amber shrink-0 mt-0.5"}),s.jsxs("p",{className:"text-sm text-amber",children:[i," preloaded collection",i!==1?"s":""," will be skipped (preloaded collections cannot be deleted)."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Collections to delete:"}),s.jsx("ul",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:a.map(c=>s.jsxs("li",{className:"flex items-center gap-2 p-2.5 rounded-lg bg-white/5",children:[s.jsx(ar,{className:"h-4 w-4 text-destructive shrink-0"}),s.jsx("span",{className:"font-medium truncate",children:c.name})]},c.id))})]})]})}),!o&&s.jsxs("div",{className:"p-5 border-t border-white/5 flex gap-3",children:[s.jsx("button",{onClick:n,className:"flex-1 px-4 py-2.5 border border-border/50 rounded-xl hover:bg-accent transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:r,className:J("flex-1 px-4 py-2.5 rounded-xl font-medium transition-colors","bg-destructive text-destructive-foreground hover:bg-destructive/90"),children:["Delete ",a.length]})]})]})]}):null});function Sf(e,t,n={}){const{prettyPrint:r=!0,indent:a=2}=n,i=r?JSON.stringify(e,null,a):JSON.stringify(e),o=new Blob([i],{type:"application/json"}),c=URL.createObjectURL(o),d=`${e.metadata.namespace||"collection"}.json`;F1(c,d),URL.revokeObjectURL(c)}async function M1(e,t,n={}){const{prettyPrint:r=!0,indent:a=2}=n,i=new o0;for(const{id:p,document:h}of e){const m=r?JSON.stringify(h,null,a):JSON.stringify(h),v=`${h.metadata.namespace||p}.json`;i.file(v,m)}const o=await i.generateAsync({type:"blob"}),c=URL.createObjectURL(o);F1(c,t||"rolldeo-collections.zip"),URL.revokeObjectURL(c)}function F1(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function EF(e,t,n,r){const a=new Map,i=[],o=new Set,c=[e];for(;c.length>0;){const d=c.shift(),p=d.metadata.namespace;if(!o.has(p)&&(o.add(p),!(!d.imports||d.imports.length===0)))for(const h of d.imports){const m=TF(h.path,n,r);if(m){const v=m.metadata.namespace;!o.has(v)&&!a.has(v)&&(a.set(v,m),c.push(m))}else i.push(h.path)}}return{primary:{id:t||e.metadata.namespace.replace(/\./g,"-"),document:e},dependencies:Array.from(a.entries()).map(([d,p])=>({id:d.replace(/\./g,"-"),document:p})),unresolvedPaths:[...new Set(i)]}}function TF(e,t,n){for(const[a,i]of n)if(i.namespace===e){const o=t.getCollection(a);return o==null?void 0:o.document}const r=t.getCollection(e);if(r)return r.document}function DF(){const{collections:e,preloaded:t,userCollections:n,allTags:r,allNamespaces:a,groupedCollections:i,isLoading:o,isInitialized:c,error:d,deleteCollection:p}=Nf(),{importFiles:h,saveImportedCollections:m,getCollectionDocument:v}=dt(),g=dt(ye=>ye.collections),x=w.useMemo(()=>new Set(g.keys()),[g]),{libraryViewMode:y,preloadedCollectionsExpanded:k,togglePreloadedCollections:N}=nt(),[C,T]=w.useState(!1),[j,D]=w.useState(null),[_,I]=w.useState(!1),[R,z]=w.useState(new Set),[P,q]=w.useState(!1),[$,G]=w.useState(!1),E=w.useMemo(()=>Array.from(g.values()).length,[g]),L=w.useMemo(()=>Array.from(R).map(ye=>e.find(Te=>Te.id===ye)).filter(ye=>ye!==void 0),[R,e]),Z=w.useMemo(()=>L.filter(ye=>!ye.isPreloaded),[L]),X=L.length-Z.length,K=w.useCallback((ye,Te)=>{z(Ie=>{const ve=new Set(Ie);return Te?ve.add(ye):ve.delete(ye),ve})},[]),ee=w.useCallback(()=>{z(new Set(e.map(ye=>ye.id)))},[e]),U=w.useCallback(()=>{z(new Set)},[]),M=w.useCallback(()=>{Z.length>0&&q(!0)},[Z.length]),F=w.useCallback(async()=>{G(!0);try{for(const ye of Z)await p(ye.id);z(new Set)}finally{G(!1),q(!1)}},[Z,p]),B=w.useCallback(async()=>{const ye=L.map(Te=>{const Ie=v(Te.id);return Ie?{id:Te.id,document:Ie}:null}).filter(Te=>Te!==null);ye.length!==0&&(ye.length===1?Sf(ye[0].document):await M1(ye,"rolldeo-collections.zip"),z(new Set))},[L,v]),le=w.useCallback(async ye=>{T(!0),I(!0);try{const Te=await h(ye),Ie=Te.collections.map(qe=>({...qe,id:d0(qe.id,x)})),ve=new Map;if(Te.pathToIdMap)for(const[qe,st]of Te.pathToIdMap){const O=Te.collections.find(te=>te.id===st),xe=Ie.find(te=>te.fileName===(O==null?void 0:O.fileName));xe&&ve.set(qe,xe.id)}if(Ie.length>0){const qe=ye.some(st=>st.name.endsWith(".zip"))?"zip":"file";await m(Ie,qe,ve)}D({...Te,collections:Ie})}catch(Te){D({success:!1,collections:[],errors:[{fileName:"Import",error:Te instanceof Error?Te.message:"Import failed"}]})}finally{T(!1)}},[h,m,x]),pe=w.useCallback(()=>{I(!1),D(null)},[]),de=w.useMemo(()=>[{key:"Slash",handler:()=>{const ye=document.querySelector('input[type="search"]');ye==null||ye.focus()},description:"Focus search"}],[]);af({shortcuts:de});const je=w.useCallback(async(ye,Te)=>{confirm(`Delete "${Te}"? This cannot be undone.`)&&await p(ye)},[p]);return d?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:d}),s.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.library}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Library"}),s.jsx("p",{className:"text-muted-foreground",children:"Browse and manage your table collections"})]}),s.jsx(k0,{variant:"compact",onFilesSelected:le,disabled:C}),s.jsx(kF,{allNamespaces:a,allTags:r,totalCount:E,filteredCount:e.length,selectedCount:R.size,deletableCount:Z.length,onDelete:M,onExport:B,onSelectAll:ee,onSelectNone:U}),o&&!c&&s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(Er,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading collections..."})]})}),c&&s.jsxs(s.Fragment,{children:[y==="grouped"?s.jsx(NF,{groupedCollections:i,onDeleteCollection:je,selectedIds:R,onSelectionChange:K}):s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-mint",children:s.jsx(Ki,{className:"h-4 w-4"})}),s.jsx("h2",{className:"text-xl font-semibold",children:"Your Collections"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n.length,")"]})]}),n.length>0?s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map((ye,Te)=>s.jsx(ku,{collection:ye,onDelete:()=>je(ye.id,ye.name),index:Te,isSelected:R.has(ye.id),onSelectionChange:K},ye.id))}):s.jsxs("div",{className:"card-elevated border border-dashed border-white/10 p-8 text-center",children:[s.jsx("div",{className:"icon-container icon-mint mx-auto mb-4 w-fit",children:s.jsx(Ls,{className:"h-6 w-6"})}),s.jsx("p",{className:"text-muted-foreground",children:"No collections match your filters"})]})]}),t.length>0&&s.jsxs("section",{className:"space-y-4",children:[s.jsxs("button",{onClick:N,className:"flex items-center gap-3 w-full text-left group",children:[s.jsx("div",{className:"icon-container icon-lavender",children:s.jsx(Lr,{className:"h-4 w-4"})}),s.jsx("h2",{className:"text-xl font-semibold group-hover:text-foreground transition-colors",children:"Pre-loaded Collections"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",t.length,")"]}),s.jsx("div",{className:"ml-auto text-muted-foreground group-hover:text-foreground transition-colors",children:k?s.jsx(En,{className:"h-5 w-5"}):s.jsx(sn,{className:"h-5 w-5"})})]}),k&&s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 animate-slide-up",children:t.map((ye,Te)=>s.jsx(ku,{collection:ye,index:Te,isSelected:R.has(ye.id),onSelectionChange:K},ye.id))})]})]}),e.length===0&&s.jsx("div",{className:"text-center py-12 text-muted-foreground",children:s.jsx("p",{children:"No collections found. Try clearing your filters."})})]}),s.jsx(N0,{isOpen:_,onClose:pe,result:j,isImporting:C}),s.jsx(SF,{isOpen:P,onClose:()=>q(!1),onConfirm:F,collections:Z,skippedCount:X,isDeleting:$})]})]})}const jF=w.memo(function({onMouseDown:t,isResizing:n}){return s.jsx("div",{className:`
        relative w-1.5 cursor-col-resize flex-shrink-0
        transition-colors duration-150
        ${n?"bg-primary/40":"bg-transparent hover:bg-primary/20"}
      `,onMouseDown:t,role:"separator","aria-orientation":"vertical","aria-label":"Resize panels",tabIndex:0,onKeyDown:r=>{(r.key==="ArrowLeft"||r.key==="ArrowRight")&&r.preventDefault()},children:s.jsx("div",{className:`
          absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
          w-0.5 h-8 rounded-full
          transition-all duration-150
          ${n?"bg-primary h-16":"bg-white/20"}
        `})})}),AF=280,_F=600,RF=380,IF=768;function $F({leftPanel:e,rightPanel:t}){const n=nt(x=>x.browserPanelWidth),r=nt(x=>x.setBrowserPanelWidth),[a,i]=w.useState(!1),[o,c]=w.useState(!1),{width:d,isResizing:p,handleMouseDown:h,setWidth:m}=cF({initialWidth:n||RF,minWidth:AF,maxWidth:_F,onWidthChange:r,persistDelay:500});w.useEffect(()=>{const x=()=>{i(window.innerWidth<IF)};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]),w.useEffect(()=>{a||c(!1)},[a]),w.useEffect(()=>{n&&n!==d&&m(n)},[]);const v=w.useCallback(()=>{c(x=>!x)},[]),g=w.useCallback(()=>{c(!1)},[]);return a?s.jsxs("div",{className:"relative h-full w-full overflow-hidden",children:[o&&s.jsx("div",{className:"absolute inset-0 bg-black/50 z-30 transition-opacity",onClick:g,"aria-hidden":"true"}),s.jsxs("div",{className:J("absolute top-0 left-0 h-full w-[85vw] max-w-[400px] bg-card z-40","transform transition-transform duration-300 ease-out",o?"translate-x-0":"-translate-x-full"),children:[s.jsxs("div",{className:"h-14 flex items-center justify-between px-4 border-b border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:x0,alt:"Rolldeo logo",className:"h-8 w-8 rounded-lg"}),s.jsx("span",{className:"font-semibold",children:"Browse Tables"})]}),s.jsx("button",{onClick:g,className:"p-2 -mr-2 rounded-lg hover:bg-accent transition-colors","aria-label":"Close browser",children:s.jsx(Ut,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"h-[calc(100%-3.5rem)] overflow-hidden",children:e({onMobileClose:g})})]}),s.jsx("div",{className:"h-full overflow-hidden",children:t}),s.jsx("button",{onClick:v,className:J("fixed bottom-24 right-4 z-50","w-14 h-14 rounded-full","bg-primary text-primary-foreground","shadow-lg shadow-primary/25","flex items-center justify-center","transition-all duration-300 ease-out","hover:scale-105 active:scale-95","focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 focus:ring-offset-background",!o&&"animate-fab-float"),"aria-label":o?"Close table browser":"Open table browser",children:s.jsx("div",{className:J("transition-transform duration-300 ease-out",o&&"rotate-90"),children:o?s.jsx(Ut,{size:24}):s.jsx($n,{size:24})})})]}):s.jsxs("div",{className:"flex h-full w-full overflow-hidden p-2 gap-0",children:[s.jsx("div",{className:"flex-shrink-0 flex flex-col bg-card border border-border/50 rounded-2xl overflow-hidden",style:{width:`${d}px`},children:e({})}),s.jsx(jF,{onMouseDown:h,isResizing:p}),s.jsx("div",{className:"flex-1 min-w-0 flex flex-col overflow-hidden",children:t})]})}const MF=w.memo(function({activeTab:t,onTabChange:n,tableCount:r,templateCount:a,filteredTableCount:i,filteredTemplateCount:o,isFiltering:c=!1}){const d=c&&i!==void 0?i:r,p=c&&o!==void 0?o:a;return s.jsxs("div",{className:"flex border-b border-white/5",role:"tablist",children:[s.jsxs("button",{className:`
          flex-1 flex items-center justify-center gap-2 px-4 py-2.5
          text-sm font-medium transition-colors duration-150
          border-b-2 -mb-px
          ${t==="tables"?"text-mint border-mint":"text-muted-foreground border-transparent hover:text-foreground/80 hover:bg-white/5"}
        `,onClick:()=>n("tables"),role:"tab","aria-selected":t==="tables","aria-controls":"tables-panel",children:[s.jsx(rr,{className:"w-4 h-4"}),s.jsx("span",{children:"Tables"}),s.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${t==="tables"?"bg-mint/20":"bg-white/10"}`,children:[d,c&&"*"]})]}),s.jsxs("button",{className:`
          flex-1 flex items-center justify-center gap-2 px-4 py-2.5
          text-sm font-medium transition-colors duration-150
          border-b-2 -mb-px
          ${t==="templates"?"text-lavender border-lavender":"text-muted-foreground border-transparent hover:text-foreground/80 hover:bg-white/5"}
        `,onClick:()=>n("templates"),role:"tab","aria-selected":t==="templates","aria-controls":"templates-panel",children:[s.jsx(Or,{className:"w-4 h-4"}),s.jsx("span",{children:"Templates"}),s.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${t==="templates"?"bg-lavender/20":"bg-white/10"}`,children:[p,c&&"*"]})]})]})}),mw=[{value:"resultType",label:"Result Type"},{value:"tag",label:"Tag"},{value:"alpha",label:"Alphabetical"}],FF=w.memo(function({viewMode:t,groupBy:n,onViewModeChange:r,onGroupByChange:a}){var v;const[i,o]=w.useState(!1),c=w.useRef(null),p=nt(g=>g.browserActiveTab)==="templates";w.useEffect(()=>{const g=x=>{c.current&&!c.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const h=()=>{t==="flat"?(r("grouped"),n||a("resultType")):r("flat")},m=g=>{a(g),o(!1)};return s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-white/5",children:[s.jsxs("button",{className:`
          flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium
          transition-colors duration-150
          ${t==="flat"?p?"bg-lavender/20 text-lavender":"bg-primary/20 text-primary":"bg-white/5 text-muted-foreground hover:text-foreground"}
        `,onClick:h,"aria-pressed":t==="flat",title:"Flat list",children:[s.jsx(xT,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Flat"})]}),s.jsxs("div",{className:"relative",ref:c,children:[s.jsxs("button",{className:`
            flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium
            transition-colors duration-150
            ${t==="grouped"?p?"bg-lavender/20 text-lavender":"bg-primary/20 text-primary":"bg-white/5 text-muted-foreground hover:text-foreground"}
          `,onClick:()=>{t==="grouped"?o(!i):h()},"aria-pressed":t==="grouped","aria-haspopup":t==="grouped"?"listbox":void 0,"aria-expanded":i,title:"Grouped view",children:[s.jsx(bT,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:t==="grouped"&&n?(v=mw.find(g=>g.value===n))==null?void 0:v.label:"Grouped"}),t==="grouped"&&s.jsx(En,{className:`w-3 h-3 transition-transform ${i?"rotate-180":""}`})]}),i&&t==="grouped"&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-36 py-1 bg-card border border-white/10 rounded-lg shadow-xl z-50",role:"listbox",children:mw.map(g=>s.jsx("button",{className:`
                  w-full px-3 py-2 text-left text-xs
                  transition-colors duration-150
                  ${n===g.value?p?"bg-lavender/20 text-lavender":"bg-primary/20 text-primary":"text-foreground hover:bg-white/5"}
                `,onClick:()=>m(g.value),role:"option","aria-selected":n===g.value,children:g.label},g.value))})]})]})});function Ns(e,t,n){let r=n.initialDeps??[],a;function i(){var o,c,d,p;let h;n.key&&((o=n.debug)!=null&&o.call(n))&&(h=Date.now());const m=e();if(!(m.length!==r.length||m.some((x,y)=>r[y]!==x)))return a;r=m;let g;if(n.key&&((c=n.debug)!=null&&c.call(n))&&(g=Date.now()),a=t(...m),n.key&&((d=n.debug)!=null&&d.call(n))){const x=Math.round((Date.now()-h)*100)/100,y=Math.round((Date.now()-g)*100)/100,k=y/16,N=(C,T)=>{for(C=String(C);C.length<T;)C=" "+C;return C};console.info(`%c ${N(y,5)} /${N(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*k,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(p=n==null?void 0:n.onChange)==null||p.call(n,a),a}return i.updateDeps=o=>{r=o},i}function fw(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const OF=(e,t)=>Math.abs(e-t)<1.01,PF=(e,t,n)=>{let r;return function(...a){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,a),n)}},gw=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},LF=e=>e,zF=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let a=t;a<=n;a++)r.push(a);return r},BF=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const a=o=>{const{width:c,height:d}=o;t({width:Math.round(c),height:Math.round(d)})};if(a(gw(n)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const c=()=>{const d=o[0];if(d!=null&&d.borderBoxSize){const p=d.borderBoxSize[0];if(p){a({width:p.inlineSize,height:p.blockSize});return}}a(gw(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},vw={passive:!0},yw=typeof window>"u"?!0:"onscrollend"in window,UF=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let a=0;const i=e.options.useScrollendEvent&&yw?()=>{}:PF(r,()=>{t(a,!1)},e.options.isScrollingResetDelay),o=h=>()=>{const{horizontal:m,isRtl:v}=e.options;a=m?n.scrollLeft*(v&&-1||1):n.scrollTop,i(),t(a,h)},c=o(!0),d=o(!1);d(),n.addEventListener("scroll",c,vw);const p=e.options.useScrollendEvent&&yw;return p&&n.addEventListener("scrollend",d,vw),()=>{n.removeEventListener("scroll",c),p&&n.removeEventListener("scrollend",d)}},HF=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},qF=(e,{adjustments:t=0,behavior:n},r)=>{var a,i;const o=e+t;(i=(a=r.scrollElement)==null?void 0:a.scrollTo)==null||i.call(a,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class WF{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(a=>{a.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var a;(a=r())==null||a.disconnect(),n=null},observe:a=>{var i;return(i=r())==null?void 0:i.observe(a,{box:"border-box"})},unobserve:a=>{var i;return(i=r())==null?void 0:i.unobserve(a)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,a])=>{typeof a>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:LF,rangeExtractor:zF,onChange:()=>{},measureElement:HF,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,a;(a=(r=this.options).onChange)==null||a.call(r,this,n)},this.maybeNotify=Ns(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const a=new Map,i=new Map;for(let o=r-1;o>=0;o--){const c=n[o];if(a.has(c.lane))continue;const d=i.get(c.lane);if(d==null||c.end>d.end?i.set(c.lane,c):c.end<d.end&&a.set(c.lane,!0),a.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,c)=>o.end===c.end?o.index-c.index:o.end-c.end)[0]:void 0},this.getMeasurementOptions=Ns(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,a,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=Ns(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:o},c)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(h=>{this.itemSizeCache.set(h.key,h.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const p=this.measurementsCache.slice(0,d);for(let h=d;h<n;h++){const m=i(h),v=this.options.lanes===1?p[h-1]:this.getFurthestMeasurement(p,h),g=v?v.end+this.options.gap:r+a,x=c.get(m),y=typeof x=="number"?x:this.options.estimateSize(h),k=g+y,N=v?v.lane:h%this.options.lanes;p[h]={index:h,start:g,size:y,end:k,key:m,lane:N}}return this.measurementsCache=p,p},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Ns(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,a,i)=>this.range=n.length>0&&r>0?VF({measurements:n,outerSize:r,scrollOffset:a,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Ns(()=>{let n=null,r=null;const a=this.calculateRange();return a&&(n=a.startIndex,r=a.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,a,i,o)=>i===null||o===null?[]:n({startIndex:i,endIndex:o,overscan:r,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,a=n.getAttribute(r);return a?parseInt(a,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const a=this.indexFromElement(n),i=this.measurementsCache[a];if(!i)return;const o=i.key,c=this.elementsCache.get(o);c!==n&&(c&&this.observer.unobserve(c),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(a,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const a=this.measurementsCache[n];if(!a)return;const i=this.itemSizeCache.get(a.key)??a.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(a,o,this):a.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(a.index),this.itemSizeCache=new Map(this.itemSizeCache.set(a.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,a)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(a))});return}this._measureElement(n,void 0)},this.getVirtualItems=Ns(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const a=[];for(let i=0,o=n.length;i<o;i++){const c=n[i],d=r[c];a.push(d)}return a},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return fw(r[O1(0,r.length-1,a=>fw(r[a]).start,n)])},this.getOffsetForAlignment=(n,r,a=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=n>=o+i?"end":"start"),r==="center"?n+=(a-i)/2:r==="end"&&(n-=i);const c=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(c,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const a=this.measurementsCache[n];if(!a)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(a.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(a.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const c=r==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(c,r,a.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:a})},this.scrollToIndex=(n,{align:r="auto",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let i=0;const o=10,c=p=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(n,p);if(!h){console.warn("Failed to get offset for index:",n);return}const[m,v]=h;this._scrollToOffset(m,{adjustments:void 0,behavior:a}),this.targetWindow.requestAnimationFrame(()=>{const g=this.getScrollOffset(),x=this.getOffsetForIndex(n,v);if(!x){console.warn("Failed to get offset for index:",n);return}OF(x[0],g)||d(v)})},d=p=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>c(p)):console.warn(`Failed to scroll to index ${n} after ${o} attempts.`))};c(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let a;if(r.length===0)a=this.options.paddingStart;else if(this.options.lanes===1)a=((n=r[r.length-1])==null?void 0:n.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(c=>c===null);){const c=r[o];i[c.lane]===null&&(i[c.lane]=c.end),o--}a=Math.max(...i.filter(c=>c!==null))}return Math.max(a-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:a})=>{this.options.scrollToFn(n,{behavior:a,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const O1=(e,t,n,r)=>{for(;e<=t;){const a=(e+t)/2|0,i=n(a);if(i<r)e=a+1;else if(i>r)t=a-1;else return a}return e>0?e-1:0};function VF({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const a=e.length-1,i=d=>e[d].start;if(e.length<=r)return{startIndex:0,endIndex:a};let o=O1(0,a,i,n),c=o;if(r===1)for(;c<a&&e[c].end<n+t;)c++;else if(r>1){const d=Array(r).fill(0);for(;c<a&&d.some(h=>h<n+t);){const h=e[c];d[h.lane]=h.end,c++}const p=Array(r).fill(n+t);for(;o>=0&&p.some(h=>h>=n);){const h=e[o];p[h.lane]=h.start,o--}o=Math.max(0,o-o%r),c=Math.min(a,c+(r-1-c%r))}return{startIndex:o,endIndex:c}}const bw=typeof document<"u"?w.useLayoutEffect:w.useEffect;function GF(e){const t=w.useReducer(()=>({}),{})[1],n={...e,onChange:(a,i)=>{var o;i?un.flushSync(t):t(),(o=e.onChange)==null||o.call(e,a,i)}},[r]=w.useState(()=>new WF(n));return r.setOptions(n),bw(()=>r._didMount(),[]),bw(()=>r._willUpdate()),r}function KF(e){return GF({observeElementRect:BF,observeElementOffset:UF,scrollToFn:qF,...e})}function YF({items:e,position:t,onClose:n}){const r=w.useRef(null),a=w.useCallback(()=>{const d=e.length*36,p=8;let h=t.x,m=t.y;return h+180>window.innerWidth-p&&(h=window.innerWidth-180-p),m+d>window.innerHeight-p&&(m=window.innerHeight-d-p),{x:Math.max(p,h),y:Math.max(p,m)}},[t,e.length]);w.useEffect(()=>{const c=d=>{d.key==="Escape"&&n()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[n]),w.useEffect(()=>{const c=d=>{r.current&&!r.current.contains(d.target)&&n()};return window.addEventListener("mousedown",c,!0),()=>window.removeEventListener("mousedown",c,!0)},[n]),w.useEffect(()=>{const c=()=>n();return window.addEventListener("scroll",c,!0),()=>window.removeEventListener("scroll",c,!0)},[n]);const i=a(),o=c=>{c.disabled||(c.onClick(),n())};return un.createPortal(s.jsx("div",{ref:r,className:J("fixed z-50","min-w-[180px] py-1","bg-popover border border-border rounded-lg shadow-lg","animate-fade-in"),style:{left:i.x,top:i.y},role:"menu","aria-orientation":"vertical",children:e.map((c,d)=>{if("type"in c&&c.type==="divider")return s.jsx("div",{className:"my-1 h-px bg-border",role:"separator"},`divider-${d}`);const p=c,h=p.icon;return s.jsxs("button",{className:J("w-full flex items-center gap-3 px-3 py-2 text-sm text-left","transition-colors duration-100",p.disabled?"text-muted-foreground/50 cursor-not-allowed":"hover:bg-accent text-foreground"),onClick:()=>o(p),disabled:p.disabled,role:"menuitem",children:[s.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{children:p.label})]},p.id)})}),document.body)}const ZF=w.memo(function({item:t,collectionId:n,isSelected:r,onSelect:a,onRoll:i,onEdit:o,onCopyResult:c,onRollMultiple:d,onViewDetails:p}){const[h,m]=w.useState(null),v=Fs(R=>R.isFavorite(n,t.id,t.type)),g=Fs(R=>R.toggleFavorite),[x,y]=w.useState(!1),[k,N]=w.useState(null),C=w.useRef(null);w.useEffect(()=>{if(x&&C.current){const R=C.current.getBoundingClientRect();N({x:R.right,y:R.bottom+4})}},[x]);const T=R=>{R.key==="Enter"?(R.preventDefault(),i()):R.key===" "&&(R.preventDefault(),a())},j=()=>{i()},D=w.useCallback(R=>{R.preventDefault(),R.stopPropagation(),m({x:R.clientX,y:R.clientY})},[]),_=w.useCallback(()=>{m(null)},[]),I=[{id:"roll",label:"Roll",icon:$n,onClick:i},{id:"favorite",label:v?"Remove from Favorites":"Add to Favorites",icon:Lu,onClick:()=>g(n,t.id,t.type)},{id:"edit",label:"Edit",icon:jT,onClick:o||(()=>{}),disabled:!o},{type:"divider"},{id:"copy-result",label:"Copy Result",icon:gl,onClick:c||(()=>{}),disabled:!c},{id:"roll-multiple",label:"Roll Multiple...",icon:ui,onClick:d||(()=>{}),disabled:!d},{type:"divider"},{id:"view-details",label:"View Details",icon:ua,onClick:p||(()=>{}),disabled:!p}];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`
        group flex items-center gap-3 px-3 py-2.5 cursor-pointer
        border-l-2 transition-all duration-150
        ${r?t.type==="template"?"bg-[hsl(var(--lavender)/0.12)] border-l-lavender":"bg-primary/10 border-l-primary":"border-l-transparent hover:bg-white/[0.03] hover:border-l-muted-foreground/30"}
        ${t.hidden?"opacity-50":""}
      `,onClick:a,onDoubleClick:j,onKeyDown:T,onContextMenu:D,role:"option","aria-selected":r,tabIndex:0,children:[(()=>{const R=tr(t.resultType);return s.jsx(R,{className:`w-4 h-4 flex-shrink-0 ${t.type==="template"?"text-lavender":"text-mint"}`})})(),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium truncate",children:t.name}),t.hidden&&s.jsx(li,{className:"w-3 h-3 text-muted-foreground flex-shrink-0","aria-label":"Hidden"})]}),t.description&&s.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:t.description})]}),s.jsxs("div",{className:`flex items-center gap-1 flex-shrink-0 transition-opacity duration-150 ${r?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[s.jsx(w0,{collectionId:n,itemId:t.id,type:t.type,size:"sm"}),t.tags&&t.tags.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{ref:C,className:"p-1.5 rounded-md transition-colors duration-150 text-muted-foreground/50 hover:text-muted-foreground hover:bg-white/5",onClick:R=>R.stopPropagation(),onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),"aria-label":`Tags: ${t.tags.join(", ")}`,title:"View tags",children:s.jsx(ua,{className:"w-3.5 h-3.5"})}),x&&k&&un.createPortal(s.jsx("div",{className:"fixed z-[9999] pointer-events-none",style:{left:k.x,top:k.y,transform:"translateX(-100%)"},children:s.jsx("div",{className:"bg-popover border border-border rounded-md shadow-lg px-2 py-1.5 min-w-max max-w-48",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(R=>s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-white/10 rounded text-muted-foreground border border-white/10",children:R},R))})})}),document.body)]}),s.jsx("button",{className:`
            p-1.5 rounded-md transition-all duration-150
            ${r?t.type==="template"?"bg-lavender/20 text-lavender hover:bg-lavender/30":"bg-primary/20 text-primary hover:bg-primary/30":"bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-foreground"}
          `,onClick:R=>{R.stopPropagation(),i()},"aria-label":`Roll ${t.name}`,title:"Roll (double-click or Enter)",children:s.jsx($n,{className:"w-4 h-4"})})]})]}),h&&s.jsx(YF,{items:I,position:h,onClose:_})]})}),QF=52,JF=36,XF=5,eO=w.memo(function({items:t,groupedItems:n,isGrouped:r,collectionId:a,selectedItemId:i,onSelectItem:o,onRollItem:c,onEditItem:d,onCopyResult:p,onRollMultiple:h,onViewDetails:m}){const v=w.useRef(null),g=w.useMemo(()=>{if(!r)return t.map(N=>({type:"item",item:N,uniqueKey:`item-${N.id}`}));const k=[];for(const N of n){k.push({type:"group-header",groupName:N.groupName,uniqueKey:`group-${N.groupName}`});for(const C of N.items)k.push({type:"item",item:C,uniqueKey:`item-${N.groupName}-${C.id}`})}return k},[t,n,r]),x=KF({count:g.length,getScrollElement:()=>v.current,estimateSize:k=>g[k].type==="group-header"?JF:QF,overscan:XF}),y=x.getVirtualItems();return g.length===0?s.jsx("div",{className:"flex-1 flex items-center justify-center py-12 text-center",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})}):s.jsx("div",{ref:v,className:"flex-1 overflow-auto",children:s.jsx("div",{style:{height:`${x.getTotalSize()}px`,width:"100%",position:"relative"},children:y.map(k=>{const N=g[k.index];if(N.type==="group-header"){const T=t.length>0&&t[0].type==="template";return s.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${k.size}px`,transform:`translateY(${k.start}px)`},children:s.jsx("div",{className:"px-3 py-2.5 mt-1 bg-background/80 backdrop-blur-sm border-b border-white/[0.03] sticky top-0 z-10",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-1 h-4 rounded-full ${T?"bg-lavender/60":"bg-primary/40"}`}),s.jsx("span",{className:"text-[11px] font-semibold text-muted-foreground/80 uppercase tracking-wider",children:N.groupName}),s.jsx("div",{className:`flex-1 h-px bg-gradient-to-r ${T?"from-lavender/20":"from-primary/15"} to-transparent`})]})})},N.uniqueKey)}const C=N.item;return s.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${k.size}px`,transform:`translateY(${k.start}px)`},children:s.jsx(ZF,{item:C,collectionId:a,isSelected:i===C.id,onSelect:()=>o(C),onRoll:()=>c(C),onEdit:d?()=>d(C):void 0,onCopyResult:p?()=>p(C):void 0,onRollMultiple:h?()=>h(C):void 0,onViewDetails:m?()=>m(C):void 0})},N.uniqueKey)})})})}),P1=w.memo(function({collection:t,isExpanded:n,selectedItemId:r,shouldScrollIntoView:a,onScrollComplete:i,onToggleExpand:o,onSelectItem:c,onRollItem:d,onEditItem:p,onCopyResult:h,onRollMultiple:m,onViewDetails:v}){const g=w.useRef(null),x=n?En:sn,y=n?Ls:Fx;w.useEffect(()=>{a&&g.current&&requestAnimationFrame(()=>{var M;(M=g.current)==null||M.scrollIntoView({behavior:"smooth",block:"start"}),i()})},[a,i]);const k=dt(M=>M.collections),N=nt(M=>M.browserActiveTab),C=nt(M=>M.browserViewMode),T=nt(M=>M.browserGroupBy),j=nt(M=>M.showHiddenTables),D=nt(M=>M.rollerCollectionSearchQuery),_=nt(M=>M.setBrowserActiveTab),I=nt(M=>M.setBrowserViewMode),R=nt(M=>M.setBrowserGroupBy),z=w.useMemo(()=>dt.getState().getTableList(t.id),[t.id,k]),P=w.useMemo(()=>dt.getState().getTemplateList(t.id),[t.id,k]),{filteredItems:q,groupedItems:$,filteredCount:G,totalCount:E}=uF({tables:z,templates:P,searchQuery:D,viewMode:C,groupBy:T,activeTab:N,showHidden:j}),L=D.trim().length>0,Z=w.useMemo(()=>{if(!L)return z.length;const M=D.toLowerCase();return z.filter(F=>{var B,le;return F.hidden&&!j?!1:F.name.toLowerCase().includes(M)||((B=F.description)==null?void 0:B.toLowerCase().includes(M))||((le=F.tags)==null?void 0:le.some(pe=>pe.toLowerCase().includes(M)))}).length},[z,D,L,j]),X=w.useMemo(()=>{if(!L)return P.length;const M=D.toLowerCase();return P.filter(F=>{var B,le;return F.name.toLowerCase().includes(M)||((B=F.description)==null?void 0:B.toLowerCase().includes(M))||((le=F.tags)==null?void 0:le.some(pe=>pe.toLowerCase().includes(M)))}).length},[P,D,L]),K=M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),o())},ee=w.useCallback(M=>{c(M)},[c]),U=w.useCallback(M=>{d(M)},[d]);return s.jsxs("div",{className:"border-b border-white/5 relative isolate",children:[s.jsxs("div",{ref:g,className:`
          flex items-center gap-2 px-3 py-3 cursor-pointer
          transition-colors duration-150 relative z-10 bg-background
          ${n?"bg-copper/10 border-l-2 border-l-copper/50":"border-l-2 border-l-transparent hover:bg-white/5"}
        `,onClick:o,onKeyDown:K,role:"button","aria-expanded":n,tabIndex:0,children:[s.jsx(x,{className:`w-4 h-4 transition-all duration-200 ${n?"text-copper":"text-muted-foreground"}`}),s.jsx(y,{className:"w-4 h-4 text-amber-400/80 flex-shrink-0"}),s.jsx("span",{className:"flex-1 truncate text-sm font-medium",children:t.name}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsxs("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-mint/15 text-mint border border-mint/20",children:[L?Z:t.tableCount,L&&"*"]}),s.jsxs("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-lavender/15 text-lavender border border-lavender/20",children:[L?X:t.templateCount,L&&"*"]})]})]}),n&&s.jsxs("div",{className:"flex flex-col bg-background/50 relative z-0",children:[s.jsx(MF,{activeTab:N,onTabChange:_,tableCount:z.length,templateCount:P.length,filteredTableCount:Z,filteredTemplateCount:X,isFiltering:L}),s.jsx(FF,{viewMode:C,groupBy:T,onViewModeChange:I,onGroupByChange:R}),D&&s.jsxs("div",{className:"px-3 py-1.5 text-xs text-muted-foreground border-b border-white/5",children:["Showing ",G," of ",E," ",N]}),s.jsx("div",{className:"min-h-[150px] max-h-[50vh] flex flex-col isolate",children:s.jsx(eO,{items:q,groupedItems:$,isGrouped:C==="grouped",collectionId:t.id,selectedItemId:r,onSelectItem:ee,onRollItem:U,onEditItem:p,onCopyResult:h,onRollMultiple:m,onViewDetails:v})})]})]})}),tO="__my_collections__",nO=w.memo(function({collections:t,selectedItemId:n,onSelectItem:r,onRollItem:a,onEditItem:i,onCopyResult:o,onRollMultiple:c,onViewDetails:d,searchQuery:p=""}){const h=nt(q=>q.expandedPublisherId),m=nt(q=>q.togglePublisherExpanded),v=nt(q=>q.setExpandedPublisherId),g=nt(q=>q.expandedCollectionId),x=nt(q=>q.setExpandedCollectionId),y=nt(q=>q.setBrowserActiveTab),k=nt(q=>q.collapseQuickSections),N=p.trim().length>0,[C,T]=w.useState(null),j=w.useRef(!1),D=w.useRef(null),_=w.useMemo(()=>{const q=new Map,$=[];for(const L of t)if(!L.isPreloaded||!L.namespace)$.push(L);else{const Z=Ku(L.namespace,1);Z==="Uncategorized"?$.push(L):(q.has(Z)||q.set(Z,[]),q.get(Z).push(L))}for(const[,L]of q)L.sort((Z,X)=>Z.name.localeCompare(X.name));$.sort((L,Z)=>L.name.localeCompare(Z.name));const G=[];$.length>0&&G.push({id:tO,name:"My Collections",collections:$,isUserGroup:!0});const E=Array.from(q.keys()).sort((L,Z)=>L.localeCompare(Z));for(const L of E)G.push({id:L,name:j1(L),collections:q.get(L),isUserGroup:!1});return G},[t]);w.useEffect(()=>{j.current||h!==null||_.length>0&&(j.current=!0,v(_[0].id))},[_,h,v]),w.useEffect(()=>{if(!g){D.current=null;return}if(D.current!==g){for(const q of _)if(q.collections.some(G=>G.id===g)&&h!==q.id){D.current=g,v(q.id);break}}},[g,_,h,v]);const I=w.useCallback(q=>{h!==q&&k(),m(q)},[m,h,k]),R=w.useCallback(()=>{T(null)},[]),z=w.useCallback((q,$)=>{g!==$&&(x($),T($)),y(q.type==="template"?"templates":"tables"),r(q,$)},[r,g,x,y]),P=w.useCallback((q,$)=>{g!==$&&(x($),T($)),y(q.type==="template"?"templates":"tables"),a(q,$)},[a,g,x,y]);return _.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[s.jsx(Mx,{className:"w-10 h-10 text-muted-foreground/50 mb-3"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No collections match filters"}),s.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Try adjusting your search or namespace filter"})]}):s.jsx("div",{className:"flex-1 overflow-auto",role:"list","aria-label":"Publishers",children:_.map(q=>s.jsx(rO,{group:q,isExpanded:h===q.id,expandedCollectionId:g,selectedItemId:n,scrollTargetCollectionId:C,isFiltering:N,onTogglePublisher:()=>I(q.id),onScrollComplete:R,onSelectItem:z,onRollItem:P,onEditItem:i,onCopyResult:o,onRollMultiple:c,onViewDetails:d},q.id))})}),rO=w.memo(function({group:t,isExpanded:n,expandedCollectionId:r,selectedItemId:a,scrollTargetCollectionId:i,isFiltering:o,onTogglePublisher:c,onScrollComplete:d,onSelectItem:p,onRollItem:h,onEditItem:m,onCopyResult:v,onRollMultiple:g,onViewDetails:x}){const y=nt(T=>T.toggleCollectionExpanded),k=T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),c())},N=w.useCallback(T=>{y(T)},[y]),C=t.isUserGroup?wl:Fu;return s.jsxs("div",{className:"border-b border-white/5",children:[s.jsxs("div",{className:J("flex items-center gap-2 px-3 py-2.5 cursor-pointer transition-colors duration-150",n?"bg-copper/5":"hover:bg-white/5"),onClick:c,onKeyDown:k,role:"button","aria-expanded":n,tabIndex:0,children:[s.jsx(sn,{className:J("w-4 h-4 flex-shrink-0 transition-transform duration-200",n?"rotate-90 text-copper":"text-muted-foreground")}),s.jsx("div",{className:J("p-1.5 rounded-md transition-colors",n?"bg-copper/20 text-copper":"bg-white/5 text-muted-foreground"),children:s.jsx(C,{className:"w-3.5 h-3.5"})}),s.jsx("span",{className:J("flex-1 truncate text-sm font-medium transition-colors",n?"text-copper":"text-foreground"),children:t.name}),s.jsxs("span",{className:J("px-2 py-0.5 rounded-full text-xs font-medium transition-colors",o&&"ring-1 ring-copper/30",n?"bg-copper/20 text-copper":"bg-white/10 text-muted-foreground"),title:o?"Filtered results":void 0,children:[t.collections.length,o&&s.jsx("span",{className:"ml-0.5 opacity-70",children:"*"})]})]}),n&&s.jsx("div",{className:"pl-4 border-l-2 border-copper/20 ml-4",children:t.collections.map(T=>s.jsx(P1,{collection:T,isExpanded:r===T.id,selectedItemId:a,shouldScrollIntoView:i===T.id,onScrollComplete:d,onToggleExpand:()=>N(T.id),onSelectItem:j=>p(j,T.id),onRollItem:j=>h(j,T.id),onEditItem:m?j=>m(j,T.id):void 0,onCopyResult:v?j=>v(j,T.id):void 0,onRollMultiple:g?j=>g(j,T.id):void 0,onViewDetails:x?j=>x(j,T.id):void 0},T.id))})]})}),aO=w.memo(function({allNamespaces:t,totalCount:n,filteredCount:r}){const{rollerCollectionSearchQuery:a,setRollerCollectionSearchQuery:i,rollerNamespaceFilter:o,setRollerNamespaceFilter:c,clearRollerCollectionFilters:d}=nt(),[p,h]=w.useState(!1),[m,v]=w.useState(""),[g,x]=w.useState({top:0,left:0}),y=w.useRef(null),k=w.useRef(null),N=w.useCallback(()=>{if(k.current){const D=k.current.getBoundingClientRect();x({top:D.bottom+4,left:D.left})}},[]);w.useEffect(()=>{function D(_){y.current&&!y.current.contains(_.target)&&k.current&&!k.current.contains(_.target)&&h(!1)}return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]);const C=m?t.filter(D=>zi(D).toLowerCase().includes(m.toLowerCase())):t,T=w.useCallback(D=>{c(D),h(!1),v("")},[c]),j=a||o;return s.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-3 border-b border-border/50 bg-card/50",children:[s.jsxs("div",{className:"relative flex-1 min-w-[140px]",children:[s.jsx(Pr,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground pointer-events-none"}),s.jsx("input",{type:"search",placeholder:"Search...",value:a,onChange:D=>i(D.target.value),className:"w-full h-8 pl-8 pr-7 text-sm bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"}),a&&s.jsx("button",{onClick:()=>i(""),className:"absolute right-1.5 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-white/10 text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(Ut,{className:"h-3.5 w-3.5"})})]}),s.jsxs("div",{children:[s.jsxs("button",{ref:k,onClick:()=>{p||N(),h(!p)},className:J("flex items-center gap-1.5 px-2.5 h-8 rounded-lg border text-sm transition-all",o?"bg-copper/15 border-copper/40 text-copper":"bg-background border-border hover:border-border/80 text-muted-foreground hover:text-foreground"),children:[s.jsx(Fu,{className:"h-3.5 w-3.5"}),s.jsx("span",{className:"max-w-[100px] truncate",children:o?zi(o):"All"}),s.jsx(En,{className:J("h-3.5 w-3.5 transition-transform",p&&"rotate-180")})]}),p&&un.createPortal(s.jsxs("div",{ref:y,className:"fixed w-64 max-h-72 overflow-hidden rounded-lg border border-border bg-popover shadow-xl z-[100] animate-fade-in",style:{top:g.top,left:g.left},children:[s.jsx("div",{className:"p-2 border-b border-border/50",children:s.jsx("input",{type:"text",placeholder:"Search namespaces...",value:m,onChange:D=>v(D.target.value),className:"w-full px-2.5 py-1.5 text-sm bg-background border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50",autoFocus:!0})}),s.jsxs("div",{className:"overflow-y-auto max-h-48 p-1",children:[s.jsxs("button",{onClick:()=>T(null),className:J("w-full flex items-center gap-2 px-2.5 py-1.5 rounded-md text-left text-sm transition-colors",o?"hover:bg-white/5 text-foreground":"bg-primary/10 text-primary"),children:[s.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:!o&&s.jsx(vn,{className:"h-3.5 w-3.5"})}),s.jsx("span",{className:"font-medium",children:"All Namespaces"}),s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:n})]}),C.map(D=>s.jsxs("button",{onClick:()=>T(D),className:J("w-full flex items-center gap-2 px-2.5 py-1.5 rounded-md text-left text-sm transition-colors",o===D?"bg-copper/15 text-copper":"hover:bg-white/5 text-foreground"),children:[s.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:o===D&&s.jsx(vn,{className:"h-3.5 w-3.5"})}),s.jsx("span",{className:"truncate",children:zi(D)})]},D)),C.length===0&&s.jsxs("div",{className:"px-2.5 py-3 text-center text-xs text-muted-foreground",children:['No namespaces match "',m,'"']})]})]}),document.body)]}),j&&s.jsxs("button",{onClick:d,className:"flex items-center gap-1 px-2 h-8 text-xs text-muted-foreground hover:text-foreground rounded-md hover:bg-white/5 transition-colors",children:[s.jsx(Ut,{className:"h-3.5 w-3.5"}),"Clear"]}),j&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:[r,"/",n]})]})}),iO=w.memo(function({selectedItemId:t,onSelectItem:n,onRollItem:r,searchQuery:a=""}){const i=nt(y=>y.isFavoritesSectionExpanded),o=nt(y=>y.setFavoritesSectionExpanded),c=Fs(y=>y.favorites),d=dt(y=>y.collections),p=w.useMemo(()=>{const y=Array.from(c.values()).sort((j,D)=>j.sortOrder-D.sortOrder),{getCollection:k,getTableList:N,getTemplateList:C}=dt.getState(),T=[];for(const j of y){const D=k(j.collectionId);if(!D)continue;let _;if(j.type==="table"){const R=N(j.collectionId).find(z=>z.id===j.itemId);R&&(_={id:R.id,name:R.name,type:"table",tableType:R.type,description:R.description,tags:R.tags,hidden:R.hidden,entryCount:R.entryCount,resultType:R.resultType})}else{const R=C(j.collectionId).find(z=>z.id===j.itemId);R&&(_={id:R.id,name:R.name,type:"template",description:R.description,tags:R.tags,resultType:R.resultType})}_&&T.push({id:j.id,collectionId:j.collectionId,item:_,collectionName:D.name})}return T},[c,d]),h=w.useMemo(()=>{if(!a.trim())return p;const y=a.toLowerCase();return p.filter(k=>{var j;const N=k.item.name.toLowerCase().includes(y),C=(j=k.item.description)==null?void 0:j.toLowerCase().includes(y),T=k.collectionName.toLowerCase().includes(y);return N||C||T})},[p,a]),m=w.useCallback(()=>{o(!i)},[o,i]);if(p.length===0)return null;const v=a.trim().length>0,g=h.length>0,x=i?En:sn;return s.jsxs("div",{className:"border-b border-white/5",children:[s.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-2.5 cursor-pointer
          transition-colors duration-150
          ${i?"bg-amber/3":"hover:bg-white/5"}
        `,onClick:m,role:"button","aria-expanded":i,tabIndex:0,onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),m())},children:[s.jsx(x,{className:`w-4 h-4 ${i?"text-amber":"text-muted-foreground"}`}),s.jsx(Lu,{className:"w-4 h-4 text-amber fill-amber"}),s.jsx("span",{className:"flex-1 text-sm font-medium",children:"Favorites"}),s.jsx("span",{className:"text-xs text-muted-foreground bg-white/5 px-1.5 py-0.5 rounded",children:v?`${h.length}/${p.length}`:p.length})]}),i&&s.jsx("div",{className:"max-h-[min(200px,40vh)] overflow-auto bg-background/50",children:g?h.map(y=>s.jsx(sO,{favorite:y,isSelected:t===y.item.id,onSelect:()=>n(y.item,y.collectionId),onRoll:()=>r(y.item,y.collectionId)},y.id)):s.jsxs("div",{className:"px-3 py-4 text-center text-sm text-muted-foreground",children:['No favorites match "',a,'"']})})]})}),sO=w.memo(function({favorite:t,isSelected:n,onSelect:r,onRoll:a}){const{item:i,collectionId:o,collectionName:c}=t,d=tr(i.resultType);return s.jsxs("div",{className:`
        group flex items-center gap-2 px-3 py-2 cursor-pointer
        border-l-2 transition-all duration-150
        ${n?i.type==="template"?"bg-[hsl(var(--lavender)/0.12)] border-l-lavender":"bg-primary/10 border-l-primary":"border-l-transparent hover:bg-white/[0.03] hover:border-l-muted-foreground/30"}
      `,onClick:r,onDoubleClick:a,role:"option","aria-selected":n,tabIndex:0,onKeyDown:p=>{p.key==="Enter"?(p.preventDefault(),a()):p.key===" "&&(p.preventDefault(),r())},children:[s.jsx(d,{className:`w-4 h-4 flex-shrink-0 ${i.type==="template"?"text-lavender":"text-mint"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium truncate",children:i.name}),s.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:c})]}),s.jsxs("div",{className:`flex items-center gap-1 flex-shrink-0 transition-opacity duration-150 ${n?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[s.jsx(w0,{collectionId:o,itemId:i.id,type:i.type,size:"sm"}),s.jsx("button",{className:`
            p-1.5 rounded-md transition-all duration-150
            ${n?i.type==="template"?"bg-lavender/20 text-lavender hover:bg-lavender/30":"bg-primary/20 text-primary hover:bg-primary/30":"bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-foreground"}
          `,onClick:p=>{p.stopPropagation(),a()},"aria-label":`Roll ${i.name}`,title:"Roll",children:s.jsx($n,{className:"w-3.5 h-3.5"})})]})]})}),oO=w.memo(function({selectedItemId:t,onSelectItem:n,onRollItem:r,searchQuery:a=""}){const i=nt(_=>_.isQuickAccessSectionExpanded),o=nt(_=>_.setQuickAccessSectionExpanded),[c,d]=w.useState("recent"),p=il(_=>_.recentItems),h=il(_=>_.popularItems),m=dt(_=>_.collections),v=w.useMemo(()=>{const{getCollection:_,getTableList:I,getTemplateList:R}=dt.getState(),z=[];for(const P of p){const q=_(P.collectionId);if(!q)continue;let $;if(P.type==="table"){const E=I(P.collectionId).find(L=>L.id===P.itemId);E&&($={id:E.id,name:E.name,type:"table",tableType:E.type,description:E.description,tags:E.tags,hidden:E.hidden,entryCount:E.entryCount,resultType:E.resultType})}else{const E=R(P.collectionId).find(L=>L.id===P.itemId);E&&($={id:E.id,name:E.name,type:"template",description:E.description,tags:E.tags,resultType:E.resultType})}$&&z.push({stats:P,item:$,collectionId:P.collectionId,collectionName:q.name})}return z},[p,m]),g=w.useMemo(()=>{const{getCollection:_,getTableList:I,getTemplateList:R}=dt.getState(),z=[];for(const P of h){const q=_(P.collectionId);if(!q)continue;let $;if(P.type==="table"){const E=I(P.collectionId).find(L=>L.id===P.itemId);E&&($={id:E.id,name:E.name,type:"table",tableType:E.type,description:E.description,tags:E.tags,hidden:E.hidden,entryCount:E.entryCount,resultType:E.resultType})}else{const E=R(P.collectionId).find(L=>L.id===P.itemId);E&&($={id:E.id,name:E.name,type:"template",description:E.description,tags:E.tags,resultType:E.resultType})}$&&z.push({stats:P,item:$,collectionId:P.collectionId,collectionName:q.name})}return z},[h,m]),x=w.useCallback(_=>{if(!a.trim())return _;const I=a.toLowerCase();return _.filter(R=>{var $;const z=R.item.name.toLowerCase().includes(I),P=($=R.item.description)==null?void 0:$.toLowerCase().includes(I),q=R.collectionName.toLowerCase().includes(I);return z||P||q})},[a]),y=w.useMemo(()=>x(v),[x,v]),k=w.useMemo(()=>x(g),[x,g]),N=c==="recent"?y:k,C=w.useCallback(()=>{o(!i)},[o,i]);if(v.length===0&&g.length===0)return null;const T=a.trim().length>0,j=c==="recent"?v.length:g.length,D=i?En:sn;return s.jsxs("div",{className:"border-b border-white/5",children:[s.jsxs("div",{className:`
          flex items-center gap-2 px-3 py-2.5 cursor-pointer
          transition-colors duration-150
          ${i?"bg-cyan/3":"hover:bg-white/5"}
        `,onClick:C,role:"button","aria-expanded":i,tabIndex:0,onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),C())},children:[s.jsx(D,{className:`w-4 h-4 ${i?"text-cyan":"text-muted-foreground"}`}),c==="recent"?s.jsx(hu,{className:"w-4 h-4 text-cyan"}):s.jsx(Jh,{className:"w-4 h-4 text-cyan"}),s.jsx("span",{className:"flex-1 text-sm font-medium",children:"Quick Access"}),s.jsx("span",{className:"text-xs text-muted-foreground bg-white/5 px-1.5 py-0.5 rounded",children:T?`${N.length}/${j}`:N.length})]}),i&&s.jsxs("div",{className:"bg-background/50",children:[s.jsxs("div",{className:"flex border-b border-white/5",children:[s.jsxs("button",{className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-colors
                ${c==="recent"?"text-cyan border-b-2 border-cyan bg-cyan/5":"text-muted-foreground hover:text-foreground"}`,onClick:()=>d("recent"),children:[s.jsx(hu,{className:"w-3 h-3"}),"Recent",T&&s.jsxs("span",{className:"text-[10px] opacity-70",children:["(",y.length,")"]})]}),s.jsxs("button",{className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs font-medium transition-colors
                ${c==="popular"?"text-cyan border-b-2 border-cyan bg-cyan/5":"text-muted-foreground hover:text-foreground"}`,onClick:()=>d("popular"),children:[s.jsx(Jh,{className:"w-3 h-3"}),"Popular",T&&s.jsxs("span",{className:"text-[10px] opacity-70",children:["(",k.length,")"]})]})]}),s.jsx("div",{className:"max-h-[min(200px,40vh)] overflow-auto",children:N.length===0?s.jsx("div",{className:"px-3 py-4 text-center text-xs text-muted-foreground",children:T?`No ${c} items match "${a}"`:c==="recent"?"Roll some tables to see them here":"Your most-used tables will appear here"}):N.map(_=>s.jsx(lO,{usage:_,isSelected:t===_.item.id,showRollCount:c==="popular",onSelect:()=>n(_.item,_.collectionId),onRoll:()=>r(_.item,_.collectionId)},_.stats.id))})]})]})}),lO=w.memo(function({usage:t,isSelected:n,showRollCount:r,onSelect:a,onRoll:i}){const{item:o,collectionName:c,stats:d}=t,p=tr(o.resultType);return s.jsxs("div",{className:`
        group flex items-center gap-2 px-3 py-2 cursor-pointer
        border-l-2 transition-all duration-150
        ${n?o.type==="template"?"bg-[hsl(var(--lavender)/0.12)] border-l-lavender":"bg-primary/10 border-l-primary":"border-l-transparent hover:bg-white/[0.03] hover:border-l-muted-foreground/30"}
      `,onClick:a,onDoubleClick:i,role:"option","aria-selected":n,tabIndex:0,onKeyDown:h=>{h.key==="Enter"?(h.preventDefault(),i()):h.key===" "&&(h.preventDefault(),a())},children:[s.jsx(p,{className:`w-4 h-4 flex-shrink-0 ${o.type==="template"?"text-lavender":"text-mint"}`}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium truncate",children:o.name}),s.jsx("div",{className:"text-[10px] text-muted-foreground truncate",children:c})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground bg-white/5 px-1.5 py-0.5 rounded",children:r?`${d.rollCount}x`:v0(d.lastRolled)}),s.jsx("button",{className:`
            p-1.5 rounded-md transition-all duration-150
            opacity-0 group-hover:opacity-100
            ${n?o.type==="template"?"bg-lavender/20 text-lavender hover:bg-lavender/30":"bg-primary/20 text-primary hover:bg-primary/30":"bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-foreground"}
          `,onClick:h=>{h.stopPropagation(),i()},"aria-label":`Roll ${o.name}`,title:"Roll",children:s.jsx($n,{className:"w-3.5 h-3.5"})})]})]})}),cO=w.memo(function({selectedItemId:t,onSelectItem:n,onRollItem:r,onEditItem:a,onCopyResult:i,onRollMultiple:o,onViewDetails:c,onMobileClose:d}){const{collections:p,allNamespaces:h}=Nf({useRollerFilters:!0}),m=dt(j=>j.collections),v=nt(j=>j.rollerCollectionSearchQuery),g=w.useMemo(()=>Array.from(m.values()).length,[m]),x=w.useCallback((j,D)=>{n(j,D),d==null||d()},[n,d]),y=w.useCallback((j,D)=>{r(j,D),d==null||d()},[r,d]),k=w.useCallback((j,D)=>{a==null||a(j,D),d==null||d()},[a,d]),N=w.useCallback((j,D)=>{i==null||i(j,D),d==null||d()},[i,d]),C=w.useCallback((j,D)=>{o==null||o(j,D),d==null||d()},[o,d]),T=w.useCallback((j,D)=>{c==null||c(j,D),d==null||d()},[c,d]);return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(aO,{allNamespaces:h,totalCount:g,filteredCount:p.length}),s.jsx(iO,{selectedItemId:t,onSelectItem:x,onRollItem:y,searchQuery:v}),s.jsx(oO,{selectedItemId:t,onSelectItem:x,onRollItem:y,searchQuery:v}),s.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:s.jsx(nO,{collections:p,selectedItemId:t,onSelectItem:x,onRollItem:y,onEditItem:a?k:void 0,onCopyResult:i?N:void 0,onRollMultiple:o?C:void 0,onViewDetails:c?T:void 0,searchQuery:v})})]})});w.memo(function({collections:t,selectedItemId:n,onSelectItem:r,onRollItem:a,onEditItem:i,onCopyResult:o,onRollMultiple:c,onViewDetails:d}){const p=nt(D=>D.expandedCollectionId),h=nt(D=>D.toggleCollectionExpanded),m=nt(D=>D.setExpandedCollectionId),v=nt(D=>D.setBrowserActiveTab),[g,x]=w.useState(null),y=[...t].sort((D,_)=>D.isPreloaded!==_.isPreloaded?D.isPreloaded?-1:1:D.name.localeCompare(_.name)),k=w.useRef(!1);w.useEffect(()=>{if(k.current||p!==null)return;const D=y.filter(I=>!I.isPreloaded),_=y.filter(I=>I.isPreloaded);D.length===0&&_.length>0&&(k.current=!0,m(_[0].id))},[y,p,m]);const N=w.useCallback(D=>{h(D)},[h]),C=w.useCallback(()=>{x(null)},[]),T=w.useCallback((D,_)=>{p!==_&&(m(_),x(_)),v(D.type==="template"?"templates":"tables"),r(D,_)},[r,p,m,v]),j=w.useCallback((D,_)=>{p!==_&&(m(_),x(_)),v(D.type==="template"?"templates":"tables"),a(D,_)},[a,p,m,v]);return y.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[s.jsx(Mx,{className:"w-10 h-10 text-muted-foreground/50 mb-3"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No collections match filters"}),s.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Try adjusting your search or namespace filter"})]}):s.jsx("div",{className:"flex-1 overflow-auto",role:"list","aria-label":"Collections",children:y.map(D=>s.jsx(P1,{collection:D,isExpanded:p===D.id,selectedItemId:n,shouldScrollIntoView:g===D.id,onScrollComplete:C,onToggleExpand:()=>N(D.id),onSelectItem:_=>T(_,D.id),onRollItem:_=>j(_,D.id),onEditItem:i?_=>i(_,D.id):void 0,onCopyResult:o?_=>o(_,D.id):void 0,onRollMultiple:c?_=>c(_,D.id):void 0,onViewDetails:d?_=>d(_,D.id):void 0},D.id))})});w.memo(function({value:t,onChange:n,placeholder:r="Search..."}){return s.jsxs("div",{className:"relative px-3 py-2",children:[s.jsx(Pr,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground pointer-events-none"}),s.jsx("input",{type:"text",value:t,onChange:a=>n(a.target.value),placeholder:r,className:`
          w-full pl-8 pr-8 py-2 text-sm
          bg-white/5 border border-white/10 rounded-lg
          text-foreground placeholder:text-muted-foreground
          focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary/50
          transition-colors duration-150
        `,"aria-label":"Search tables and templates"}),t&&s.jsx("button",{className:"absolute right-5 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-white/10 transition-colors",onClick:()=>n(""),"aria-label":"Clear search",children:s.jsx(Ut,{className:"w-4 h-4 text-muted-foreground"})})]})});const L1=w.memo(function({type:t,className:n="w-4 h-4"}){switch(t){case"simple":return s.jsx(rr,{className:`${n} text-mint`,"aria-label":"Simple table"});case"composite":return s.jsx(Ki,{className:`${n} text-mint-dark`,"aria-label":"Composite table"});case"collection":return s.jsx(Fu,{className:`${n} text-amber`,"aria-label":"Collection table"});case"template":return s.jsx(Or,{className:`${n} text-lavender`,"aria-label":"Template"});default:return s.jsx(rr,{className:`${n} text-muted-foreground`})}}),uO=w.memo(function({enabled:t,onChange:n,disabled:r}){return s.jsxs("label",{className:`
        flex items-center gap-2 text-sm cursor-pointer select-none
        px-3 py-1.5 rounded-lg border transition-all
        ${r?"opacity-50 cursor-not-allowed":"hover:bg-accent"}
        ${t?"text-copper border-copper/40 bg-copper/10":"text-muted-foreground border-border/50 hover:border-border"}
      `,title:"Enable tracing to see how the result was generated, including dice rolls and table lookups",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:a=>n(a.target.checked),disabled:r,className:"sr-only peer","aria-label":"Enable trace mode"}),s.jsx("div",{className:"relative w-8 h-4 rounded-full transition-colors",style:{backgroundColor:t?"hsl(var(--copper))":"hsl(var(--muted-foreground) / 0.3)"},children:s.jsx("span",{className:"absolute w-3 h-3 rounded-full bg-white top-0.5 left-0.5 transition-transform shadow-sm",style:{transform:t?"translateX(1rem)":"translateX(0)"}})}),s.jsx(fl,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Trace"})]})}),dO=w.memo(function({selectedItem:t,collectionId:n,isRolling:r,canRoll:a,onRoll:i}){var k;const[o,c]=w.useState(!1),d=sl(N=>N.traceEnabled),p=sl(N=>N.setTraceEnabled),h=dt(N=>N.getCollectionDocument),m=nt(N=>N.resultTheme),v=w.useMemo(()=>{var j,D;if(!n||!t)return null;const N=h(n);if(!N)return null;let C,T;if(t.type==="template")C=(j=N.templates)==null?void 0:j.find(_=>_.id===t.id);else{const _=(D=N.tables)==null?void 0:D.find(I=>I.id===t.id);C=_,T=_==null?void 0:_.source}return{metadata:N.metadata,itemDetails:C,tableSource:T}},[n,t,h]);if(!t)return s.jsx("div",{className:"p-6 border-b border-white/5",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-white/5 flex items-center justify-center",children:s.jsx($n,{className:"w-8 h-8 text-muted-foreground/50"})}),s.jsx("p",{className:"text-muted-foreground",children:"Select a table or template to roll"})]})});const g=v==null?void 0:v.metadata,x=v==null?void 0:v.tableSource,y=!!(t.description||g!=null&&g.author||g!=null&&g.source||x||t.tags&&t.tags.length>0);return s.jsxs("div",{className:"p-4 border-b border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>y&&c(!o),className:`flex items-center gap-3 flex-1 min-w-0 text-left ${y?"cursor-pointer hover:bg-white/5 -ml-2 pl-2 py-2 pr-3 rounded-lg transition-colors":"cursor-default"}`,disabled:!y,children:[s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${t.type==="template"?"bg-lavender/10":"bg-mint/10"}`,children:s.jsx(L1,{type:t.type==="template"?"template":t.tableType||"simple",className:"w-5 h-5"})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("h3",{className:"font-semibold text-lg truncate",children:t.name})}),y&&s.jsx("div",{className:"flex-shrink-0 text-muted-foreground",children:o?s.jsx(En,{className:"w-5 h-5"}):s.jsx(sn,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(uO,{enabled:d,onChange:p,disabled:r})})]}),o&&y&&s.jsxs("div",{className:"mt-3 ml-13 pl-13 space-y-3 text-sm",children:[t.description&&s.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.description}),(g==null?void 0:g.author)&&s.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[s.jsx(wl,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:g.author})]}),(g==null?void 0:g.source)&&s.jsxs("div",{className:"flex items-start gap-2 text-muted-foreground",children:[s.jsx(Vy,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-x-2",children:[g.source.book&&s.jsx("span",{children:g.source.book}),g.source.publisher&&s.jsxs("span",{className:"text-muted-foreground/70",children:["by ",g.source.publisher]}),g.source.url&&s.jsx("a",{href:g.source.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-copper hover:underline",onClick:N=>N.stopPropagation(),children:s.jsx(Zh,{className:"w-3 h-3"})})]})]}),x&&s.jsxs("div",{className:"flex items-start gap-2 text-muted-foreground border-l-2 border-white/10 pl-3 ml-1",children:[s.jsx(Vy,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-x-2",children:[x.book&&s.jsx("span",{children:x.book}),x.page&&s.jsxs("span",{className:"text-muted-foreground/70",children:["p. ",x.page]}),x.section&&s.jsxs("span",{className:"text-muted-foreground/70",children:["(",x.section,")"]}),x.url&&s.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-copper hover:underline",onClick:N=>N.stopPropagation(),children:s.jsx(Zh,{className:"w-3 h-3"})}),x.license&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-white/5 rounded text-muted-foreground/70",children:x.license})]})]}),(g==null?void 0:g.rights)&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground/70",children:[g.rights.type&&s.jsx("span",{className:"px-2 py-0.5 bg-white/5 rounded capitalize",children:g.rights.type.replace("-"," ")}),((k=g.source)==null?void 0:k.license)&&s.jsx("span",{className:"px-2 py-0.5 bg-white/5 rounded",children:g.source.license})]}),t.tags&&t.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:t.tags.map(N=>s.jsx("span",{className:"text-xs px-2 py-0.5 bg-white/10 rounded-full text-muted-foreground border border-white/10",children:N},N))})]}),s.jsxs("button",{onClick:i,disabled:!a||r,className:J("relative w-full flex items-center justify-center gap-3 py-4 text-lg font-bold mt-4",m!=="default"?`btn-roll-${m}`:"btn-copper",r&&"animate-pulse"),children:[m==="default"&&s.jsx("div",{className:"absolute inset-0 rounded-xl blur-xl -z-10 opacity-50",style:{backgroundColor:"hsl(var(--copper-glow) / 0.3)"}}),r?s.jsx(Er,{className:"h-6 w-6 animate-spin"}):s.jsx($n,{className:"h-6 w-6"}),r?"Rolling...":"Roll!",!r&&s.jsx("span",{className:J("text-sm font-medium ml-2 px-2 py-0.5 rounded",m==="default"&&"bg-white/20 text-white/80",m==="ttrpg"&&"bg-[hsl(25,45%,25%,0.3)] text-[hsl(35,60%,85%)]",m==="cyberpunk"&&"bg-[hsl(186,100%,50%,0.2)] text-[hsl(186,100%,70%)]"),children:"Space"})]})]})}),pO={root:RT,table_roll:rr,template_roll:Or,template_ref:Or,entry_select:BT,expression:qm,dice_roll:hT,math_eval:$u,variable_access:Us,placeholder_access:Hi,conditional:Ox,multi_roll:$T,instance:ui,composite_select:Ki,collection_merge:pT,capture_multi_roll:yl,capture_access:zs,collect:Ls},hO={root:"text-copper",table_roll:"text-mint",template_roll:"text-lavender",template_ref:"text-lavender",entry_select:"text-mint",expression:"text-gray-400",dice_roll:"text-purple-400",math_eval:"text-cyan-400",variable_access:"text-pink-400",placeholder_access:"text-orange-400",conditional:"text-red-400",multi_roll:"text-mint",instance:"text-teal-400",composite_select:"text-mint-dark",collection_merge:"text-mint",capture_multi_roll:"text-rose-400",capture_access:"text-sky-400",collect:"text-emerald-400"};function z1(e){const t=[e.id];for(const n of e.children)t.push(...z1(n));return t}const Ef=w.memo(function({trace:t,onClose:n}){const[r,a]=w.useState(new Set([t.root.id])),[i,o]=w.useState(null),c=w.useCallback(m=>{a(v=>{const g=new Set(v);return g.has(m)?g.delete(m):g.add(m),g})},[]),d=w.useCallback(m=>{o(v=>v===m?null:m)},[]),p=w.useCallback(()=>{const m=z1(t.root);a(new Set(m))},[t.root]),h=w.useCallback(()=>{a(new Set([t.root.id]))},[t.root.id]);return s.jsxs("div",{className:"border border-copper/30 rounded-xl bg-background/50 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-copper/20 bg-copper/5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fl,{className:"w-4 h-4 text-copper"}),s.jsx("span",{className:"font-medium",children:"Execution Trace"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.stats.nodeCount," ops, ",t.totalTime,"ms)"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:p,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Expand All"}),s.jsx("button",{onClick:h,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Collapse"}),s.jsx("button",{onClick:n,className:"p-1 hover:bg-accent rounded transition-colors",children:s.jsx(Ut,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"max-h-[400px] overflow-auto p-2",children:s.jsx(mO,{node:t.root,depth:0,expandedNodes:r,onToggle:c,selectedNodeId:i,onSelect:d})}),s.jsx("div",{className:"px-4 py-2 border-t border-copper/20 bg-copper/5 text-xs text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[t.stats.diceRolled>0&&s.jsxs("span",{children:["Dice: ",t.stats.diceRolled]}),t.stats.tablesAccessed.length>0&&s.jsxs("span",{children:["Tables: ",t.stats.tablesAccessed.length]}),t.stats.variablesAccessed.length>0&&s.jsxs("span",{children:["Variables: ",t.stats.variablesAccessed.length]}),s.jsxs("span",{children:["Depth: ",t.stats.maxDepth]})]})})]})}),mO=w.memo(function e({node:t,depth:n,expandedNodes:r,onToggle:a,selectedNodeId:i,onSelect:o}){var x,y;const c=r.has(t.id),d=i===t.id,p=t.children.length>0,h=pO[t.type],m=hO[t.type],v=k=>{k.stopPropagation(),o(t.id)},g=k=>{k.stopPropagation(),p&&a(t.id)};return s.jsxs("div",{style:{marginLeft:n*16},children:[s.jsxs("div",{className:`
          flex items-center gap-2 py-1 px-2 rounded cursor-pointer
          hover:bg-accent transition-colors
          ${d?"bg-copper/10 border-l-2 border-copper":""}
        `,onClick:v,children:[p?s.jsx(sn,{className:`w-3 h-3 transition-transform flex-shrink-0 hover:text-copper ${c?"rotate-90":""}`,onClick:g}):s.jsx("span",{className:"w-3 flex-shrink-0"}),s.jsx(h,{className:`w-4 h-4 flex-shrink-0 ${m}`}),s.jsx("span",{className:"text-sm font-mono truncate",title:t.label,children:t.label}),t.output.value&&s.jsxs("span",{className:"text-xs text-muted-foreground ml-auto truncate max-w-[300px]",title:String(t.output.value),children:[""," ",t.type==="dice_roll"&&((x=t.metadata)==null?void 0:x.type)==="dice"?s.jsxs("span",{children:[s.jsxs("span",{className:"text-purple-400",children:["[",t.metadata.rolls.join(", "),"]"]}),t.metadata.kept.length!==t.metadata.rolls.length&&s.jsxs("span",{className:"text-green-400",children:[" keep [",t.metadata.kept.join(", "),"]"]}),s.jsxs("span",{children:[" = ",t.output.value]})]}):String(t.output.value)]}),t.duration!==void 0&&t.duration>0&&s.jsxs("span",{className:"text-xs text-muted-foreground/50 flex-shrink-0",children:[t.duration,"ms"]})]}),d&&s.jsxs("div",{style:{marginLeft:20},className:"mt-1 mb-2 p-3 bg-muted/50 rounded-lg text-xs space-y-2 border border-border/50",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground font-medium",children:"Label: "}),s.jsx("span",{className:"font-mono break-all",children:t.label})]}),t.output.value&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground font-medium",children:"Output: "}),t.type==="dice_roll"&&((y=t.metadata)==null?void 0:y.type)==="dice"?s.jsxs("span",{className:"font-mono",children:[s.jsxs("span",{className:"text-purple-400",children:["[",t.metadata.rolls.join(", "),"]"]}),t.metadata.kept.length!==t.metadata.rolls.length&&s.jsxs("span",{className:"text-green-400",children:[" keep [",t.metadata.kept.join(", "),"]"]}),t.metadata.modifier&&s.jsxs("span",{className:"text-cyan-400",children:[" ",t.metadata.modifier.operator,t.metadata.modifier.value]}),s.jsxs("span",{children:[" = ",t.output.value]})]}):s.jsx("span",{className:"font-mono break-all",children:String(t.output.value)})]}),t.input.raw&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground font-medium",children:"Input: "}),s.jsx("span",{className:"font-mono break-all",children:t.input.raw})]}),t.type&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground font-medium",children:"Type: "}),s.jsx("span",{className:m,children:t.type})]})]}),c&&s.jsxs(s.Fragment,{children:[s.jsx(fO,{node:t,depth:n}),t.children.map(k=>s.jsx(e,{node:k,depth:n+1,expandedNodes:r,onToggle:a,selectedNodeId:i,onSelect:o},k.id))]})]})}),fO=w.memo(function({node:t,depth:n}){if(!t.metadata)return null;const r=(n+1)*16+12;switch(t.metadata.type){case"dice":return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 font-mono text-muted-foreground",children:[s.jsxs("span",{className:"text-purple-400/70",children:["[",t.metadata.rolls.join(", "),"]"]}),t.metadata.kept.length!==t.metadata.rolls.length&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),s.jsxs("span",{className:"text-green-400/70",children:["keep [",t.metadata.kept.join(", "),"]"]})]}),t.metadata.modifier&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),s.jsxs("span",{children:[t.metadata.kept.reduce((a,i)=>a+i,0)," ",t.metadata.modifier.operator," ",t.metadata.modifier.value]})]}),s.jsxs("span",{className:"text-muted-foreground/70 ml-1",children:["= ",t.metadata.kept.reduce((a,i)=>a+i,0),t.metadata.modifier&&(t.metadata.modifier.operator==="+"?t.metadata.kept.reduce((a,i)=>a+i,0)+t.metadata.modifier.value:t.metadata.modifier.operator==="-"?t.metadata.kept.reduce((a,i)=>a+i,0)-t.metadata.modifier.value:t.metadata.kept.reduce((a,i)=>a+i,0)*t.metadata.modifier.value)!==t.output.value&&` = ${t.output.value}`]})]});case"entry_select":{const a=(t.metadata.probability*100).toFixed(1);return s.jsx("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground space-y-0.5",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:["Weight: ",t.metadata.selectedWeight,"/",t.metadata.totalWeight]}),s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsxs("span",{children:[a,"% chance"]}),s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsxs("span",{children:[t.metadata.poolSize," entries"]}),t.metadata.unique&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsx("span",{className:"text-amber-400/70",children:"unique"})]})]})})}case"variable":return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[s.jsxs("span",{className:"text-pink-400/70",children:["$",t.metadata.name]}),s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),s.jsxs("span",{children:['"',t.output.value,'"']}),s.jsxs("span",{className:"text-muted-foreground/50 ml-2",children:["(",t.metadata.source,")"]})]});case"placeholder":return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[s.jsxs("span",{className:"text-orange-400/70",children:["@",t.metadata.name,t.metadata.property&&`.${t.metadata.property}`]}),s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),s.jsx("span",{children:t.metadata.found?`"${t.output.value}"`:"(not found)"})]});case"conditional":return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[s.jsx("span",{className:"text-red-400/70",children:"when:"}),s.jsx("span",{className:"ml-1",children:t.metadata.when}),s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),s.jsx("span",{className:t.metadata.matched?"text-green-400":"text-red-400/50",children:t.metadata.matched?"matched":"not matched"}),t.metadata.matched&&t.metadata.action&&s.jsxs("span",{className:"text-muted-foreground/70 ml-1",children:["(",t.metadata.action,")"]})]});case"composite_select":{const a=t.metadata;return s.jsx("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:a.sources.map((i,o)=>s.jsxs("span",{children:[s.jsx("span",{className:i.tableId===a.selectedTableId?"text-yellow-400":"",children:i.tableId}),s.jsxs("span",{className:"text-muted-foreground/50",children:["(",(i.probability*100).toFixed(0),"%)"]}),o<a.sources.length-1&&s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"|"})]},i.tableId))})})}case"multi_roll":return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[s.jsxs("span",{children:[t.metadata.count,"x ",t.metadata.tableId]}),t.metadata.unique&&s.jsx("span",{className:"text-amber-400/70 ml-2",children:"unique"}),s.jsxs("span",{className:"text-muted-foreground/50 ml-2",children:['(sep: "',t.metadata.separator,'")']})]});case"instance":return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[s.jsxs("span",{className:"text-teal-400/70",children:["#",t.metadata.name]}),s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),s.jsx("span",{children:t.metadata.cached?"(cached)":"(new roll)"})]});case"collection_merge":return s.jsx("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:s.jsxs("span",{children:[t.metadata.sourceTables.length," tables, ",t.metadata.totalEntries," entries, weight: ",t.metadata.totalWeight]})});case"capture_multi_roll":{const a=t.metadata;return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-rose-400/70",children:["$",a.captureVar]}),s.jsx("span",{className:"text-muted-foreground/50",children:"="}),s.jsxs("span",{children:[a.count,"x ",a.tableId]}),a.unique&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsx("span",{className:"text-amber-400/70",children:"unique"})]}),a.silent&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsx("span",{className:"text-muted-foreground/50",children:"silent"})]})]}),a.capturedItems.length>0&&s.jsxs("div",{className:"pl-2 border-l border-border/50",children:[a.capturedItems.slice(0,5).map((i,o)=>s.jsxs("div",{className:"truncate",children:[s.jsxs("span",{className:"text-muted-foreground/50",children:["[",o,"]"]}),s.jsxs("span",{className:"ml-1",children:['"',i.value,'"']}),Object.keys(i.sets).length>0&&s.jsxs("span",{className:"text-muted-foreground/50 ml-1",children:["(",Object.keys(i.sets).join(", "),")"]})]},o)),a.capturedItems.length>5&&s.jsxs("div",{className:"text-muted-foreground/50",children:["... +",a.capturedItems.length-5," more"]})]})]})}case"capture_access":{const a=t.metadata;return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground",children:[s.jsxs("span",{className:"text-sky-400/70",children:["$",a.varName]}),a.index!==void 0&&s.jsxs("span",{className:"text-sky-400/70",children:["[",a.index,"]"]}),a.property&&a.property!=="value"&&s.jsxs("span",{className:"text-sky-400/70",children:[".",a.property]}),s.jsx("span",{className:"text-muted-foreground/50 mx-1",children:"="}),s.jsx("span",{children:a.found?`"${t.output.value}"`:"(not found)"}),a.totalItems!==void 0&&s.jsxs("span",{className:"text-muted-foreground/50 ml-2",children:["(",a.totalItems," items)"]})]})}case"collect":{const a=t.metadata;return s.jsxs("div",{style:{marginLeft:r},className:"text-xs py-1 text-muted-foreground space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-emerald-400/70",children:["collect: $",a.varName,".",a.property]}),a.unique&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-muted-foreground/50",children:"|"}),s.jsx("span",{className:"text-amber-400/70",children:"unique"})]}),s.jsxs("span",{className:"text-muted-foreground/50",children:['(sep: "',a.separator,'")']})]}),s.jsxs("div",{className:"pl-2 border-l border-border/50",children:[s.jsx("span",{className:"text-muted-foreground/50",children:"values: "}),s.jsxs("span",{children:["[",a.allValues.slice(0,10).map(i=>`"${i}"`).join(", "),"]"]}),a.allValues.length>10&&s.jsxs("span",{className:"text-muted-foreground/50",children:[" +",a.allValues.length-10," more"]}),a.unique&&a.resultValues.length!==a.allValues.length&&s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground/50",children:" deduped: "}),s.jsxs("span",{children:["[",a.resultValues.slice(0,10).map(i=>`"${i}"`).join(", "),"]"]})]})]})]})}default:return null}}),B1=w.memo(function({captures:t,onClose:n}){const[r,a]=w.useState(new Set(Object.keys(t))),i=c=>{a(d=>{const p=new Set(d);return p.has(c)?p.delete(c):p.add(c),p})},o=Object.keys(t);return s.jsxs("div",{className:"border border-border/50 rounded-xl bg-background/50 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(yl,{className:"w-4 h-4 text-rose-400"}),s.jsx("span",{className:"font-medium",children:"Capture Variables"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",o.length," variable",o.length!==1?"s":"",")"]})]}),s.jsx("button",{onClick:n,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Close"})]}),s.jsx("div",{className:"max-h-[300px] overflow-auto p-2 space-y-1",children:o.map(c=>s.jsx(gO,{name:c,variable:t[c],isExpanded:r.has(c),onToggle:()=>i(c)},c))})]})}),gO=w.memo(function({name:t,variable:n,isExpanded:r,onToggle:a}){return s.jsxs("div",{className:"rounded-lg border border-border/30 overflow-hidden",children:[s.jsxs("button",{onClick:a,className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-accent transition-colors text-left",children:[s.jsx(sn,{className:`w-3 h-3 transition-transform flex-shrink-0 ${r?"rotate-90":""}`}),s.jsxs("span",{className:"text-rose-400 font-mono text-sm",children:["$",t]}),s.jsxs("span",{className:"text-xs text-muted-foreground ml-auto flex items-center gap-1",children:[s.jsx(ui,{className:"w-3 h-3"}),n.count," item",n.count!==1?"s":""]})]}),r&&s.jsx("div",{className:"px-3 pb-3 space-y-2",children:n.items.map((i,o)=>s.jsx(vO,{item:i,index:o},o))})]})}),vO=w.memo(function({item:t,index:n}){const[r,a]=w.useState(!1),i=Object.keys(t.sets);return s.jsx("div",{className:"pl-4 border-l-2 border-border/50",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-sky-400/70 font-mono text-xs flex-shrink-0",children:["[",n,"]"]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"text-sm font-mono truncate",title:t.value,children:['"',t.value,'"']}),i.length>0&&s.jsxs("button",{onClick:()=>a(!r),className:"text-xs text-muted-foreground hover:text-foreground mt-1 flex items-center gap-1",children:[s.jsx(zs,{className:"w-3 h-3"}),r?"Hide":"Show"," ",i.length," set",i.length!==1?"s":""]}),r&&i.length>0&&s.jsx("div",{className:"mt-2 space-y-1 text-xs",children:i.map(o=>{const c=t.sets[o],d=typeof c=="string"?c:c.value;return s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-orange-400/70",children:["@",o,":"]}),s.jsxs("span",{className:"text-muted-foreground truncate",title:d,children:['"',d,'"']})]},o)})})]})]})})}),yO=w.memo(function({result:t,itemName:n,isRolling:r,error:a,onReroll:i,onShowDescriptions:o,onShowSets:c}){const[d,p]=w.useState(!1),[h,m]=w.useState(!1),[v,g]=w.useState(!1),x=nt(R=>R.resultTheme),y=x!=="default",k=(t==null?void 0:t.captures)&&Object.keys(t.captures).length>0,N=k?Object.keys(t.captures).length:0,C=(t==null?void 0:t.descriptions)&&t.descriptions.length>0,T=C?t.descriptions.length:0,j=t!=null&&t.placeholders?Object.keys(t.placeholders).filter(R=>R!=="value").length:0,D=j>0,_=w.useCallback(async()=>{if(t!=null&&t.text)try{await navigator.clipboard.writeText(t.text),g(!0),setTimeout(()=>g(!1),2e3)}catch(R){console.error("Failed to copy:",R)}},[t==null?void 0:t.text]);if(a)return s.jsx("div",{className:"mx-4 mt-4 p-4 rounded-xl border border-destructive/20 bg-destructive/5",children:s.jsx("p",{className:"text-destructive text-center",children:a})});if(!t)return null;const I=tr(t.resultType);return s.jsxs("div",{className:J("mx-4 mt-4 mb-6 p-5 border animate-slide-up",y?`card-result-${x}`:"rounded-2xl card-elevated card-result shadow-lg shadow-copper/5"),children:[s.jsxs("div",{className:"flex items-start justify-between mb-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-copper",title:t.resultType?`Type: ${t.resultType}`:void 0,children:s.jsx(I,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Result"}),n&&s.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{className:`p-2.5 rounded-xl transition-all ${v?"text-green-500 bg-green-500/10":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:v?"Copied!":"Copy result to clipboard","aria-label":v?"Copied!":"Copy result to clipboard",onClick:_,children:v?s.jsx(vn,{className:"h-5 w-5"}):s.jsx(gl,{className:"h-5 w-5"})}),s.jsx("button",{className:"p-2.5 rounded-xl text-muted-foreground hover:text-foreground hover:bg-accent transition-all disabled:opacity-50",title:"Re-roll (Space or Enter)","aria-label":"Re-roll",onClick:i,disabled:r,children:s.jsx(Bs,{className:`h-5 w-5 ${r?"animate-spin":""}`})})]})]}),s.jsx("div",{className:J("overflow-x-auto max-w-[70ch]",y?`prose-roll-${x}`:"prose-roll"),style:{lineHeight:"1.7"},children:s.jsx(_a,{remarkPlugins:[pi],children:t.text})}),s.jsxs("div",{className:"mt-5 pt-4 border-t border-copper/10 flex flex-wrap gap-2",children:[C&&s.jsxs("button",{onClick:()=>o(t.descriptions,n||void 0),className:"text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all duration-200 text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10",title:"View entry descriptions",children:[s.jsx(Lr,{className:"w-4 h-4"}),"Descriptions",s.jsx("span",{className:"text-xs text-copper/60",children:T})]}),D&&s.jsxs("button",{onClick:()=>c(t.placeholders,n||void 0),className:"text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all duration-200 text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10",title:"View entry sets/properties",children:[s.jsx(zs,{className:"w-4 h-4"}),"Sets",s.jsx("span",{className:"text-xs text-copper/60",children:j})]}),t.trace&&s.jsxs("button",{onClick:()=>p(!d),className:`
              text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all
              ${d?"text-copper border-copper/40 bg-copper/10":"text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10"}
            `,title:d?"Hide execution trace":"Show execution trace",children:[s.jsx(fl,{className:"w-4 h-4"}),"Trace",s.jsx("span",{className:"text-xs text-copper/60",children:t.trace.stats.nodeCount})]}),d&&k&&s.jsxs("button",{onClick:()=>m(!h),className:`
              text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all
              ${h?"text-copper border-copper/40 bg-copper/10":"text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10"}
            `,title:h?"Hide captured variables":"Show captured variables",children:[s.jsx(yl,{className:"w-4 h-4"}),"Captures",s.jsx("span",{className:"text-xs text-copper/60",children:N})]})]}),d&&t.trace&&s.jsx("div",{className:"mt-4",children:s.jsx(Ef,{trace:t.trace,onClose:()=>p(!1)})}),d&&h&&k&&s.jsx("div",{className:"mt-4",children:s.jsx(B1,{captures:t.captures,onClose:()=>m(!1)})})]})}),bO=w.memo(function({history:t,currentRollId:n,onPin:r,onDelete:a,onClearHistory:i,onShowDescriptions:o,onShowSets:c}){const[d,p]=w.useState(new Set),[h,m]=w.useState(null),v=nt(C=>C.resultTheme),g=v!=="default",x=w.useMemo(()=>(n?t.filter(T=>T.id!==n):t).slice(0,50),[t,n]),y=n?t.filter(C=>C.id!==n).length:t.length;w.useEffect(()=>{const C=new Set(t.map(T=>T.id));p(T=>{const j=new Set([...T].filter(D=>C.has(D)));return j.size!==T.size?j:T})},[t]);const k=w.useCallback(C=>{p(T=>{const j=new Set(T);return j.has(C)?j.delete(C):j.add(C),j})},[]),N=w.useCallback(async(C,T)=>{try{await navigator.clipboard.writeText(T),m(C),setTimeout(()=>m(null),2e3)}catch(j){console.error("Failed to copy:",j)}},[]);return s.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-4 border-b border-white/5 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"icon-container icon-lavender p-1.5",children:s.jsx(Zy,{className:"h-4 w-4"})}),s.jsx("h2",{className:"text-lg font-semibold",children:"History"}),s.jsxs("span",{className:"text-xs text-muted-foreground/60",children:["(",y,")"]})]}),y>0&&s.jsx("button",{onClick:()=>i(!0),className:"text-xs px-2.5 py-1.5 rounded-lg hover:bg-white/5 text-muted-foreground hover:text-foreground transition-colors",children:"Clear (keep pinned)"})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:x.length>0?x.map((C,T)=>{var j;return s.jsxs("div",{className:J("group p-4 border transition-all duration-300 animate-slide-up",g?C.pinned?`history-item-${v} border-2`:`history-item-${v}`:C.pinned?"rounded-2xl border-copper/30 card-elevated card-result":"rounded-2xl border-white/5 hover:border-white/10 bg-white/[0.02] hover:bg-white/[0.04]"),style:{animationDelay:`${T*.02}s`},children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[s.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground/50",children:v0(C.timestamp)}),(C.tableId||C.templateId)&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 text-muted-foreground/70 border border-white/5 truncate max-w-[150px]",children:C.tableId||C.templateId})]}),s.jsxs("div",{className:J("flex gap-1 shrink-0 transition-opacity duration-150",C.pinned?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[s.jsx("button",{onClick:()=>N(C.id,C.result.text),className:J("p-1.5 rounded-lg transition-all",h===C.id?"text-green-500":"hover:bg-white/5 text-muted-foreground hover:text-foreground"),title:h===C.id?"Copied!":"Copy to clipboard",children:h===C.id?s.jsx(vn,{className:"h-4 w-4"}):s.jsx(gl,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>r(C.id,!C.pinned),className:J("p-1.5 rounded-lg transition-all",C.pinned?"text-copper bg-copper/10":"hover:bg-white/5 text-muted-foreground hover:text-foreground"),title:C.pinned?"Unpin":"Pin",children:C.pinned?s.jsx(AT,{className:"h-4 w-4"}):s.jsx(_T,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>a(C.id),className:"p-1.5 rounded-lg hover:bg-white/5 transition-colors text-muted-foreground hover:text-destructive",title:"Delete",children:s.jsx(ar,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:J("text-foreground/90 overflow-x-auto",g?`prose-roll-${v}`:"prose-roll"),children:s.jsx(_a,{remarkPlugins:[pi],children:C.result.text})}),(((j=C.result.descriptions)==null?void 0:j.length)||C.result.placeholders&&Object.keys(C.result.placeholders).length>0||C.result.trace)&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-white/5 flex flex-wrap gap-2",children:[C.result.descriptions&&C.result.descriptions.length>0&&s.jsxs("button",{onClick:()=>o(C.result.descriptions,C.tableId||C.templateId||void 0),className:"text-xs flex items-center gap-1.5 px-2.5 py-1 rounded-lg border transition-all duration-200 text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10",children:[s.jsx(Lr,{className:"w-3.5 h-3.5"}),"Descriptions",s.jsx("span",{className:"text-copper/60",children:C.result.descriptions.length})]}),C.result.placeholders&&Object.keys(C.result.placeholders).length>0&&s.jsxs("button",{onClick:()=>c(C.result.placeholders,C.tableId||C.templateId||void 0),className:"text-xs flex items-center gap-1.5 px-2.5 py-1 rounded-lg border transition-all duration-200 text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10",children:[s.jsx(zs,{className:"w-3.5 h-3.5"}),"Sets",s.jsx("span",{className:"text-copper/60",children:Object.keys(C.result.placeholders).length})]}),C.result.trace&&s.jsxs("button",{onClick:()=>k(C.id),className:J("text-xs flex items-center gap-1.5 px-2.5 py-1 rounded-lg border transition-all",d.has(C.id)?"text-copper border-copper/40 bg-copper/10":"text-muted-foreground border-border/50 hover:text-copper hover:border-copper/40 hover:bg-copper/10"),children:[s.jsx(fl,{className:"w-3.5 h-3.5"}),"Trace",s.jsx("span",{className:"text-copper/60",children:C.result.trace.stats.nodeCount})]})]}),d.has(C.id)&&C.result.trace&&s.jsx("div",{className:"mt-3",children:s.jsx(Ef,{trace:C.result.trace,onClose:()=>k(C.id)})})]},C.id)}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center mb-4",children:s.jsx(Zy,{className:"h-6 w-6 text-muted-foreground/50"})}),s.jsx("p",{className:"text-muted-foreground",children:"Your roll history will appear here"})]})})]})}),wO=w.memo(function({descriptions:t,isOpen:n,onClose:r,sourceLabel:a}){const[i,o]=w.useState(()=>new Set),c=w.useRef(null),d=nt(y=>y.resultTheme),p=d!=="default";w.useEffect(()=>{t&&t.length===1?o(new Set([0])):o(new Set)},[t]),w.useEffect(()=>{if(!n)return;const y=k=>{k.key==="Escape"&&r()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n,r]),w.useEffect(()=>{n&&c.current&&c.current.focus()},[n]);const h=w.useCallback(y=>{o(k=>{const N=new Set(k);return N.has(y)?N.delete(y):N.add(y),N})},[]),m=w.useCallback(()=>{t&&o(new Set(t.map((y,k)=>k)))},[t]),v=w.useCallback(()=>{o(new Set)},[]),g=t?i.size===t.length:!1,x=i.size===0;return!t||t.length===0?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:J("fixed inset-0 z-40 bg-black/40 backdrop-blur-sm transition-opacity duration-300",n?"opacity-100":"opacity-0 pointer-events-none"),onClick:r,"aria-hidden":"true"}),s.jsx("div",{ref:c,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":"Descriptions",className:J("fixed top-0 right-0 z-50 h-full w-full sm:w-[420px] max-w-full","transform transition-transform duration-300 ease-out","outline-none",n?"translate-x-0":"translate-x-full"),children:s.jsxs("div",{className:J("h-full flex flex-col overflow-hidden border-l",p?`drawer-${d}`:"drawer-default"),children:[s.jsxs("div",{className:J("flex items-center justify-between px-4 py-3 flex-shrink-0 border-b",p?`drawer-header-${d}`:"drawer-header-default"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-copper",children:s.jsx(Lr,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold tracking-wide text-copper dark:text-copper",children:"Descriptions"}),s.jsxs("p",{className:"text-[11px] text-copper/60 dark:text-copper/50 font-medium tracking-wider uppercase",children:[t.length," ",t.length===1?"entry":"entries",a&&s.jsxs("span",{className:"ml-1.5",children:["from ",a]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[t.length>1&&s.jsxs("button",{onClick:g?v:m,className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs text-copper/50 hover:text-copper/80 hover:bg-copper/10 transition-colors duration-200",title:g?"Collapse all":"Expand all",children:[g||x?s.jsx(Um,{className:"w-4 h-4"}):s.jsx(Bm,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:g?"Collapse":"Expand"})]}),s.jsx("button",{onClick:r,className:"p-2 rounded-lg text-copper/40 hover:text-copper/80 hover:bg-copper/10 transition-colors duration-200",title:"Close (Esc)",children:s.jsx(Ut,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-2 scroll-smooth",children:t.map((y,k)=>s.jsx(xO,{description:y,isExpanded:i.has(k),onToggle:()=>h(k),index:k,resultTheme:d,isThemedResult:p},`${y.tableId}-${k}`))})]})})]})}),xO=w.memo(function({description:t,isExpanded:n,onToggle:r,index:a,resultTheme:i,isThemedResult:o}){const[c,d]=w.useState(!1),p=w.useCallback(async h=>{h.stopPropagation();try{await navigator.clipboard.writeText(t.description),d(!0),setTimeout(()=>d(!1),2e3)}catch(m){console.error("Failed to copy:",m)}},[t.description]);return s.jsxs("div",{className:J("overflow-hidden transition-all duration-300 border rounded-lg",o?`drawer-entry-${i}`:"drawer-entry-default",n&&"drawer-entry-expanded"),style:{animationDelay:`${a*50}ms`},children:[s.jsxs("button",{onClick:r,className:"w-full flex items-start gap-3 px-3 py-2.5 text-left transition-colors duration-200",children:[s.jsx(sn,{className:J("w-4 h-4 mt-0.5 flex-shrink-0 transition-transform duration-300",n?"rotate-90 text-copper":"text-copper/50 dark:text-stone-500")}),s.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold tracking-wider uppercase dark:bg-copper/15 dark:text-copper dark:border-copper/25 bg-copper/20 text-copper border border-copper/30",children:t.tableName})}),s.jsx("p",{className:J("text-sm leading-snug",n?"text-foreground dark:text-stone-100":"text-foreground/80 dark:text-stone-300",!n&&"line-clamp-2"),children:t.rolledValue})]})]}),s.jsx("div",{className:J("grid transition-all duration-300 ease-out",n?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:s.jsx("div",{className:"overflow-hidden",children:s.jsxs("div",{className:"px-3 pb-3 pt-1 ml-7 border-l-2 border-copper/30",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-copper/30 to-transparent"}),s.jsx("span",{className:"text-copper/50 dark:text-copper/40 text-[10px] font-serif italic",children:"lore"}),s.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-copper/30 to-transparent"}),s.jsx("button",{onClick:p,className:J("p-1 rounded transition-colors duration-200",c?"text-green-500 dark:text-green-400":"text-copper/50 hover:text-copper dark:text-stone-500 dark:hover:text-copper hover:bg-copper/10"),title:c?"Copied!":"Copy description",children:c?s.jsx(vn,{className:"w-3.5 h-3.5"}):s.jsx(vl,{className:"w-3.5 h-3.5"})})]}),s.jsx("div",{className:J("text-[13px]",o?`prose-roll-${i}`:"prose-description"),children:s.jsx(_a,{remarkPlugins:[pi],children:t.description})})]})})})]})}),U1=e=>typeof e=="string"?e:e.value,kO=w.memo(function({sets:t,isOpen:n,onClose:r,sourceLabel:a}){const i=t?Object.keys(t):[],[o,c]=w.useState(()=>new Set(i)),d=w.useRef(null),h=nt(T=>T.resultTheme)==="ttrpg";w.useEffect(()=>{c(t?new Set(Object.keys(t)):new Set)},[t]),w.useEffect(()=>{if(!n)return;const T=j=>{j.key==="Escape"&&r()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[n,r]),w.useEffect(()=>{n&&d.current&&d.current.focus()},[n]);const m=w.useCallback(T=>{c(j=>{const D=new Set(j);return D.has(T)?D.delete(T):D.add(T),D})},[]),v=w.useCallback(()=>{t&&c(new Set(Object.keys(t)))},[t]),g=w.useCallback(()=>{c(new Set)},[]),x=t?o.size===Object.keys(t).length:!1,y=o.size===0,[k,N]=w.useState(!1),C=w.useCallback(async()=>{if(t)try{const T=Object.entries(t).map(([j,D])=>`@${j}: ${U1(D)}`).join(`
`);await navigator.clipboard.writeText(T),N(!0),setTimeout(()=>N(!1),2e3)}catch(T){console.error("Failed to copy:",T)}},[t]);return!t||i.length===0?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:J("fixed inset-0 z-40 bg-black/40 backdrop-blur-sm transition-opacity duration-300",n?"opacity-100":"opacity-0 pointer-events-none"),onClick:r,"aria-hidden":"true"}),s.jsx("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":"Sets",className:J("fixed top-0 right-0 z-50 h-full w-full sm:w-[420px] max-w-full","transform transition-transform duration-300 ease-out","outline-none",n?"translate-x-0":"translate-x-full"),children:s.jsxs("div",{className:J("h-full flex flex-col overflow-hidden","border-l",h?J("dark:border-[hsl(35,45%,35%)]","dark:bg-gradient-to-b dark:from-[hsl(30,25%,18%)] dark:via-[hsl(28,22%,15%)] dark:to-[hsl(26,20%,12%)]","dark:shadow-[-8px_0_32px_rgba(0,0,0,0.5)]","border-[hsl(30,40%,55%)]","bg-gradient-to-b from-[hsl(40,45%,94%)] via-[hsl(39,42%,91%)] to-[hsl(38,40%,88%)]","shadow-[-8px_0_32px_rgba(0,0,0,0.15)]","before:absolute before:inset-0 before:opacity-[0.03] before:pointer-events-none","before:bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIGZpbGw9IiNmZmYiLz48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiBmaWxsPSIjMDAwIi8+PC9zdmc+')]"):J("dark:border-rose/30","dark:bg-gradient-to-b dark:from-stone-900 dark:via-stone-900 dark:to-stone-950","dark:shadow-[-8px_0_32px_rgba(0,0,0,0.5)]","border-rose/40","bg-[#fdf6f8]","shadow-[-8px_0_32px_rgba(0,0,0,0.15)]","before:absolute before:inset-0 before:opacity-[0.02] before:pointer-events-none","before:bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIGZpbGw9IiNmZmYiLz48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiBmaWxsPSIjMDAwIi8+PC9zdmc+')]")),children:[s.jsxs("div",{className:J("flex items-center justify-between px-4 py-3 flex-shrink-0","border-b",h?J("dark:border-[hsl(35,45%,30%)]","dark:bg-gradient-to-r dark:from-[hsl(35,40%,22%)] dark:via-transparent dark:to-[hsl(35,40%,22%)]","border-[hsl(30,40%,60%)]","bg-[hsl(35,35%,82%)]"):J("dark:border-rose/20","dark:bg-gradient-to-r dark:from-rose/15 dark:via-transparent dark:to-rose/15","border-rose/25","bg-rose/10")),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:J("p-2 rounded-lg","dark:bg-rose/15 dark:border-rose/25","dark:shadow-[0_0_12px_hsl(var(--rose)/0.2)]","bg-rose/20 border border-rose/30","shadow-[0_0_12px_hsl(var(--rose)/0.15)]"),children:s.jsx(zs,{className:"w-5 h-5 text-rose"})}),s.jsxs("div",{children:[s.jsx("h2",{className:J("text-base font-semibold tracking-wide","text-rose dark:text-rose"),children:"Sets"}),s.jsxs("p",{className:"text-[11px] text-rose/60 dark:text-rose/50 font-medium tracking-wider uppercase",children:[i.length," ",i.length===1?"value":"values",a&&s.jsxs("span",{className:"ml-1.5",children:["from ",a]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:C,className:J("flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs",k?"text-green-500 dark:text-green-400":"text-rose/50 hover:text-rose/80 dark:text-rose/50 dark:hover:text-rose/80","hover:bg-rose/10 transition-colors duration-200"),title:k?"Copied!":"Copy all sets",children:[k?s.jsx(vn,{className:"w-4 h-4"}):s.jsx(vl,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:k?"Copied":"Copy All"})]}),i.length>1&&s.jsxs("button",{onClick:x?g:v,className:J("flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs","text-rose/50 hover:text-rose/80 dark:text-rose/50 dark:hover:text-rose/80","hover:bg-rose/10 transition-colors duration-200"),title:x?"Collapse all":"Expand all",children:[x||y?s.jsx(Um,{className:"w-4 h-4"}):s.jsx(Bm,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:x?"Collapse":"Expand"})]}),s.jsx("button",{onClick:r,className:J("p-2 rounded-lg","text-rose/40 hover:text-rose/80 dark:text-rose/40 dark:hover:text-rose/80","hover:bg-rose/10 transition-colors duration-200"),title:"Close (Esc)",children:s.jsx(Ut,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4 space-y-2 scroll-smooth",children:i.map((T,j)=>s.jsx(NO,{setKey:T,value:t[T],isExpanded:o.has(T),onToggle:()=>m(T),index:j,isTtrpg:h},T))})]})})]})}),NO=w.memo(function({setKey:t,value:n,isExpanded:r,onToggle:a,index:i,isTtrpg:o}){const[c,d]=w.useState(!1),p=U1(n),h=w.useCallback(async m=>{m.stopPropagation();try{await navigator.clipboard.writeText(`@${t}: ${p}`),d(!0),setTimeout(()=>d(!1),2e3)}catch(v){console.error("Failed to copy:",v)}},[t,p]);return s.jsxs("div",{className:J("overflow-hidden transition-all duration-300","border",o?J("rounded",r?"dark:border-[hsl(35,45%,35%)] dark:bg-gradient-to-br dark:from-[hsl(35,40%,22%)] dark:to-[hsl(28,22%,14%)] border-[hsl(30,40%,55%)] bg-[hsl(42,40%,90%)]":"dark:border-[hsl(30,30%,25%)] dark:bg-[hsl(28,22%,16%)] dark:hover:bg-[hsl(30,25%,18%)] dark:hover:border-[hsl(35,45%,35%)] border-[hsl(32,35%,65%)] bg-[hsl(42,35%,94%)] hover:bg-[hsl(42,40%,90%)] hover:border-[hsl(30,40%,55%)]"):J("rounded-lg",r?"dark:border-rose/30 dark:bg-gradient-to-br dark:from-rose/20 dark:to-stone-900/80 border-rose/40 bg-rose/10":"dark:border-stone-700/40 dark:bg-stone-800/50 dark:hover:bg-stone-800/70 dark:hover:border-rose/30 border-rose/20 bg-white hover:bg-rose/5 hover:border-rose/30")),style:{animationDelay:`${i*50}ms`},children:[s.jsxs("button",{onClick:a,className:J("w-full flex items-start gap-3 px-3 py-2.5 text-left","transition-colors duration-200"),children:[s.jsx(sn,{className:J("w-4 h-4 mt-0.5 flex-shrink-0 transition-transform duration-300",r?"rotate-90 text-rose":"text-rose/50 dark:text-stone-500")}),s.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.jsxs("span",{className:J("inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold","tracking-wider uppercase font-mono","dark:bg-rose/15 dark:text-rose dark:border-rose/25","bg-rose/20 text-rose border border-rose/30"),children:["@",t]})}),s.jsx("p",{className:J("text-sm leading-snug font-mono",r?"text-foreground dark:text-stone-100":"text-foreground/80 dark:text-stone-300",!r&&"line-clamp-1"),children:p})]})]}),s.jsx("div",{className:J("grid transition-all duration-300 ease-out",r?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:s.jsx("div",{className:"overflow-hidden",children:s.jsxs("div",{className:J("px-3 pb-3 pt-1 ml-7","border-l-2 border-rose/30"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-rose/30 to-transparent"}),s.jsx("button",{onClick:h,className:J("flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors duration-200",c?"text-green-500 dark:text-green-400":"text-rose/50 hover:text-rose dark:text-stone-500 dark:hover:text-rose hover:bg-rose/10"),title:c?"Copied!":"Copy @key: value",children:c?s.jsxs(s.Fragment,{children:[s.jsx(vn,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Copied"})]}):s.jsxs(s.Fragment,{children:[s.jsx(vl,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Copy"})]})}),s.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-rose/30 to-transparent"})]}),s.jsx("div",{className:J("p-2 rounded-md font-mono text-sm","dark:bg-stone-800/50 dark:text-stone-200","bg-rose/5 text-foreground","whitespace-pre-wrap break-words"),children:p})]})})})]})}),CO=w.memo(function({selectedItem:t,collectionId:n,currentResult:r,isRolling:a,rollError:i,canRoll:o,history:c,onRoll:d,onPin:p,onDelete:h,onClearHistory:m}){const v=w.useRef(null),[g,x]=w.useState(null),[y,k]=w.useState(null),N=w.useCallback((_,I)=>{k({type:"descriptions",descriptions:_,sourceLabel:I})},[]),C=w.useCallback((_,I)=>{k({type:"sets",sets:_,sourceLabel:I})},[]),T=w.useCallback(()=>{k(null)},[]);w.useEffect(()=>{a&&t&&x(t.name)},[a,t]);const j=w.useCallback(()=>{var _;d(),(_=v.current)==null||_.scrollTo({top:0,behavior:"smooth"})},[d]),D=w.useMemo(()=>{if(!r||c.length===0)return null;const _=c[0];return(_==null?void 0:_.result.text)===r.text&&_.id!=null?_.id:null},[r,c]);return s.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(dO,{selectedItem:t,collectionId:n,isRolling:a,canRoll:o,onRoll:j})}),s.jsxs("div",{ref:v,className:"flex-1 min-h-0 overflow-y-auto",children:[s.jsx(yO,{result:r,itemName:g,isRolling:a,error:i,onReroll:j,onShowDescriptions:N,onShowSets:C}),s.jsx(bO,{history:c,currentRollId:D,onPin:p,onDelete:h,onClearHistory:m,onShowDescriptions:N,onShowSets:C})]}),s.jsx(wO,{descriptions:(y==null?void 0:y.type)==="descriptions"&&y.descriptions||null,isOpen:(y==null?void 0:y.type)==="descriptions",onClose:T,sourceLabel:y==null?void 0:y.sourceLabel}),s.jsx(kO,{sets:(y==null?void 0:y.type)==="sets"&&y.sets||null,isOpen:(y==null?void 0:y.type)==="sets",onClose:T,sourceLabel:y==null?void 0:y.sourceLabel})]})});function SO({item:e,onClose:t,onRoll:n}){const[r,a]=w.useState(5),[i,o]=w.useState(!1),[c,d]=w.useState([]),[p,h]=w.useState(!1),m=w.useRef(null);w.useEffect(()=>{var y,k;(y=m.current)==null||y.focus(),(k=m.current)==null||k.select()},[]),w.useEffect(()=>{const y=k=>{k.key==="Escape"&&t()};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[t]);const v=w.useCallback(async()=>{if(!(i||r<1)){o(!0),d([]);try{const y=await n(r);d(y)}finally{o(!1)}}},[r,i,n]),g=w.useCallback(async()=>{if(c.length!==0)try{await navigator.clipboard.writeText(c.join(`

`)),h(!0),setTimeout(()=>h(!1),2e3)}catch(y){console.error("Failed to copy:",y)}},[c]),x=y=>{y.key==="Enter"&&!i&&v()};return un.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:s.jsxs("div",{className:J("bg-background border border-border rounded-lg shadow-xl","w-full max-w-lg mx-4 max-h-[80vh] flex flex-col","animate-fade-in"),onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ui,{className:"w-5 h-5 text-primary"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Roll Multiple"})]}),s.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-accent text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:s.jsx(Ut,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Roll on ",s.jsx("span",{className:"font-medium text-foreground",children:e.name})," multiple times."]}),s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("label",{htmlFor:"roll-count",className:"text-sm font-medium",children:"Number of rolls:"}),s.jsx("input",{ref:m,id:"roll-count",type:"number",min:1,max:100,value:r,onChange:y=>a(Math.min(100,Math.max(1,parseInt(y.target.value)||1))),onKeyDown:x,className:J("w-20 px-3 py-1.5 rounded-md border border-border bg-background","text-sm text-center","focus:outline-none focus:ring-2 focus:ring-primary/50")}),s.jsx("button",{onClick:v,disabled:i||r<1,className:J("px-4 py-1.5 rounded-md text-sm font-medium","bg-primary text-primary-foreground","hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed","flex items-center gap-2"),children:i?s.jsxs(s.Fragment,{children:[s.jsx(Er,{className:"w-4 h-4 animate-spin"}),"Rolling..."]}):"Roll"})]}),c.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[c.length," results"]}),s.jsx("button",{onClick:g,className:J("flex items-center gap-1.5 px-2 py-1 rounded text-xs","hover:bg-accent transition-colors",p?"text-green-500":"text-muted-foreground"),children:p?s.jsxs(s.Fragment,{children:[s.jsx(vn,{className:"w-3.5 h-3.5"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(gl,{className:"w-3.5 h-3.5"}),"Copy All"]})})]}),s.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-auto",children:c.map((y,k)=>s.jsxs("div",{className:J("p-3 rounded-md bg-muted/50 border border-border/50","text-sm"),children:[s.jsxs("span",{className:"text-xs text-muted-foreground mr-2",children:[k+1,"."]}),y]},k))})]})]}),s.jsx("div",{className:"px-4 py-3 border-t border-border flex justify-end",children:s.jsx("button",{onClick:t,className:J("px-4 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:"Close"})})]})}),document.body)}function H1(e){return e.weight??1}function EO(e,t=50){const n=e.replace(/\{\{[^}]+\}\}/g,"[...]").trim();return n.length<=t?n:n.slice(0,t-3)+"..."}function TO(e,t,n=5){const r=[];let a=e,i=0;for(;a&&i<n&&(r.push({tableId:a.id,tableName:a.name,entryCount:Tf(a),level:i}),a.extends);)a=t(a.extends),i++;return r}function Tf(e){switch(e.type){case"simple":return e.entries.length;case"composite":return e.sources.length;case"collection":return e.collections.length;default:return 0}}function DO(e){if(e.length===0)return{entryCount:0,totalWeight:0,avgWeight:0,minWeight:0,maxWeight:0,uniqueResultTypes:[]};const t=e.map(H1),n=t.reduce((a,i)=>a+i,0),r=new Set;return e.forEach(a=>{a.resultType&&r.add(a.resultType)}),{entryCount:e.length,totalWeight:n,avgWeight:n/e.length,minWeight:Math.min(...t),maxWeight:Math.max(...t),uniqueResultTypes:Array.from(r)}}function jO({collectionId:e,tableId:t,maxEntries:n=20}){const r=dt(i=>i.getCollection),a=dt(i=>i.engine);return w.useMemo(()=>{if(!r(e))return null;const o=a==null?void 0:a.getTable(e,t);if(!o)return null;const c=p=>a==null?void 0:a.getTable(e,p),d=TO(o,c);switch(o.type){case"simple":return AO(o,n,d);case"composite":return _O(o,c,d);case"collection":return RO(o,c,d);default:return null}},[e,t,n,r,a])}function AO(e,t,n){const r=e.entries,a=DO(r),i=[...r].map((p,h)=>({entry:p,weight:H1(p),index:h})).sort((p,h)=>h.weight-p.weight),o=i.length>t;return{type:"simple",entries:i.slice(0,t).map(({entry:p,weight:h},m)=>({id:p.id||`entry-${m}`,label:EO(p.value),weight:h,probability:a.totalWeight>0?h/a.totalWeight*100:0,description:p.description})),truncated:o,totalEntries:r.length,stats:a,inheritance:n}}function _O(e,t,n){const r=e.sources,a=r.reduce((c,d)=>c+(d.weight??1),0),i=r.map(c=>{const d=t(c.tableId),p=c.weight??1;return{tableId:c.tableId,tableName:(d==null?void 0:d.name)||c.tableId,weight:p,probability:a>0?p/a*100:0,entryCount:d?Tf(d):0}});i.sort((c,d)=>d.weight-c.weight);const o={entryCount:r.length,totalWeight:a,avgWeight:r.length>0?a/r.length:0,minWeight:r.length>0?Math.min(...r.map(c=>c.weight??1)):0,maxWeight:r.length>0?Math.max(...r.map(c=>c.weight??1)):0,uniqueResultTypes:[]};return{type:"composite",sources:i,stats:o,inheritance:n}}function RO(e,t,n){const r=e.collections;let a=0;const i=r.map(c=>{const d=t(c),p=d?Tf(d):0;return a+=p,{tableId:c,tableName:(d==null?void 0:d.name)||c,entryCount:p,contributionPercent:0}});return i.forEach(c=>{c.contributionPercent=a>0?c.entryCount/a*100:0}),i.sort((c,d)=>d.entryCount-c.entryCount),{type:"collection",sources:i,totalEntries:a,stats:{entryCount:a,totalWeight:a,avgWeight:1,minWeight:1,maxWeight:1,uniqueResultTypes:[]},inheritance:n}}const IO=w.memo(function({entries:t,truncated:n,totalEntries:r}){return t.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No entries to display"}):s.jsxs("div",{className:"space-y-2",children:[t.map(a=>s.jsx("div",{className:"group",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-32 md:w-48 text-xs truncate text-foreground/80 group-hover:text-foreground transition-colors",title:a.label,children:a.label}),s.jsx("div",{className:"flex-1 h-5 bg-muted/50 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-mint/80 to-mint rounded-full transition-all duration-300 group-hover:from-mint group-hover:to-mint/90",style:{width:`${Math.max(a.probability,1)}%`}})}),s.jsxs("span",{className:"w-14 text-xs text-right text-muted-foreground tabular-nums",children:[a.probability.toFixed(1),"%"]}),s.jsxs("span",{className:"w-10 text-xs text-right text-muted-foreground/60 tabular-nums",children:["w:",a.weight]})]})},a.id)),n&&s.jsxs("div",{className:"pt-2 text-center text-xs text-muted-foreground border-t border-border/50 mt-3",children:["Showing top ",t.length," of ",r," entries"]})]})}),$O=w.memo(function({sources:t}){return t.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No sources defined"}):s.jsx("div",{className:"space-y-2",children:t.map(n=>s.jsx("div",{className:"group",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-32 md:w-48 text-xs truncate text-foreground/80 group-hover:text-foreground transition-colors",title:n.tableName,children:n.tableName}),s.jsx("div",{className:"flex-1 h-5 bg-muted/50 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-cyan/80 to-cyan rounded-full transition-all duration-300 group-hover:from-cyan group-hover:to-cyan/90",style:{width:`${Math.max(n.probability,1)}%`}})}),s.jsxs("span",{className:"w-14 text-xs text-right text-muted-foreground tabular-nums",children:[n.probability.toFixed(1),"%"]}),s.jsx("span",{className:"w-12 text-xs text-right text-muted-foreground/60 tabular-nums",children:n.entryCount})]})},n.tableId))})}),MO=w.memo(function({sources:t,totalEntries:n}){return t.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No tables in collection"}):s.jsxs("div",{className:"space-y-2",children:[t.map(r=>s.jsx("div",{className:"group",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-32 md:w-48 text-xs truncate text-foreground/80 group-hover:text-foreground transition-colors",title:r.tableName,children:r.tableName}),s.jsx("div",{className:"flex-1 h-5 bg-muted/50 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-lavender/80 to-lavender rounded-full transition-all duration-300 group-hover:from-lavender group-hover:to-lavender/90",style:{width:`${Math.max(r.contributionPercent,1)}%`}})}),s.jsxs("span",{className:"w-14 text-xs text-right text-muted-foreground tabular-nums",children:[r.contributionPercent.toFixed(1),"%"]}),s.jsx("span",{className:"w-12 text-xs text-right text-muted-foreground/60 tabular-nums",children:r.entryCount})]})},r.tableId)),s.jsxs("div",{className:"pt-2 text-center text-xs text-muted-foreground border-t border-border/50 mt-3",children:["Total: ",n," entries from ",t.length," tables"]})]})}),FO=w.memo(function({stats:t,tableType:n}){const r=[{icon:ui,label:n==="simple"?"Entries":n==="composite"?"Sources":"Tables",value:t.entryCount.toString(),color:"text-mint"},{icon:bl,label:"Total Weight",value:t.totalWeight.toFixed(0),color:"text-cyan"},{icon:zm,label:"Avg Weight",value:t.avgWeight.toFixed(1),color:"text-foreground"},{icon:UT,label:"Min Weight",value:t.minWeight.toFixed(0),color:"text-amber"},{icon:Jh,label:"Max Weight",value:t.maxWeight.toFixed(0),color:"text-lavender"}];return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:r.map(a=>s.jsxs("div",{className:"flex flex-col items-center p-3 bg-muted/30 rounded-lg border border-border/30",children:[s.jsx(a.icon,{className:`w-4 h-4 mb-1 ${a.color}`}),s.jsx("span",{className:"text-lg font-semibold tabular-nums",children:a.value}),s.jsx("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:a.label})]},a.label))})}),OO=w.memo(function({nodes:t}){return t.length<=1?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"This table does not extend any other tables"}):s.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[t.map((n,r)=>s.jsxs("div",{className:"flex flex-col items-center",children:[r>0&&s.jsxs("div",{className:"flex flex-col items-center my-1",children:[s.jsx("div",{className:"w-px h-3 bg-border"}),s.jsx(rT,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("div",{className:"w-px h-3 bg-border"})]}),s.jsxs("div",{className:`
              flex items-center gap-3 px-4 py-3 rounded-lg border transition-colors
              ${r===0?"bg-primary/10 border-primary/30":"bg-muted/30 border-border/50 hover:bg-muted/50"}
            `,children:[s.jsx(Or,{className:`w-5 h-5 ${r===0?"text-primary":"text-muted-foreground"}`}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`font-medium text-sm ${r===0?"text-primary":""}`,children:n.tableName}),s.jsx("span",{className:"text-[10px] text-muted-foreground",children:n.tableId})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-4 px-2 py-1 bg-background/50 rounded text-xs text-muted-foreground",children:[s.jsx(ui,{className:"w-3 h-3"}),n.entryCount]})]}),r>0&&s.jsxs("span",{className:"text-[10px] text-muted-foreground mt-1",children:["extends (level ",n.level,")"]})]},n.tableId)),t.length>1&&s.jsxs("div",{className:"pt-4 text-center text-xs text-muted-foreground border-t border-border/30 mt-4 w-full",children:["Inheritance depth: ",t.length-1," level",t.length>2?"s":""]})]})});function PO({item:e,collectionId:t,onClose:n}){const[r,a]=w.useState("info"),i=dt(g=>g.collections),o=w.useMemo(()=>{const{getTableList:g,getTemplateList:x}=dt.getState();return e.type==="template"?x(t).find(k=>k.id===e.id):g(t).find(k=>k.id===e.id)},[e,t,i]),c=w.useMemo(()=>dt.getState().getCollection(t),[t,i]),d=jO({collectionId:t,tableId:e.id,maxEntries:20});w.useEffect(()=>{const g=x=>{x.key==="Escape"&&n()};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[n]);const p=e.type!=="template",h=p&&o&&"type"in o?o.type:"simple",v=[{id:"info",label:"Info",icon:ua},...p&&d!==null?[{id:"distribution",label:"Distribution",icon:zm},{id:"inheritance",label:"Inheritance",icon:Ox}]:[]];return un.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:n,children:s.jsxs("div",{className:J("bg-background border border-border rounded-lg shadow-xl","w-full max-w-2xl mx-4 max-h-[85vh] flex flex-col","animate-fade-in"),onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(L1,{type:e.type==="template"?"template":h||"simple",className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold leading-tight",children:e.name}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:e.type==="template"?"Template":`${h||"Simple"} Table`})]})]}),s.jsx("button",{onClick:n,className:"p-1.5 rounded-md hover:bg-accent text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:s.jsx(Ut,{className:"w-5 h-5"})})]}),v.length>1&&s.jsx("div",{className:"flex border-b border-border",children:v.map(g=>s.jsxs("button",{className:J("flex items-center gap-1.5 px-4 py-2 text-sm font-medium transition-colors",r===g.id?"text-primary border-b-2 border-primary bg-primary/5":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),onClick:()=>a(g.id),children:[s.jsx(g.icon,{className:"w-4 h-4"}),g.label]},g.id))}),s.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[r==="info"&&s.jsx(LO,{item:e,fullItem:o,collectionMeta:c,isTable:p,tableType:h}),r==="distribution"&&d&&s.jsx(zO,{visualization:d}),r==="inheritance"&&d&&s.jsx(BO,{inheritance:d.inheritance})]}),s.jsx("div",{className:"px-4 py-3 border-t border-border flex justify-end",children:s.jsx("button",{onClick:n,className:J("px-4 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:"Close"})})]})}),document.body)}function LO({item:e,collectionMeta:t,isTable:n}){return s.jsxs("div",{className:"space-y-4",children:[e.hidden&&s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-amber bg-amber/10 px-3 py-2 rounded-lg",children:[s.jsx(li,{className:"w-3.5 h-3.5"}),"This item is hidden from the browser list"]}),e.description&&s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[s.jsx(Or,{className:"w-3.5 h-3.5"}),"Description"]}),s.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:e.description})]}),e.tags&&e.tags.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[s.jsx(zx,{className:"w-3.5 h-3.5"}),"Tags"]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.tags.map(r=>s.jsx("span",{className:"px-2 py-1 text-xs rounded-md bg-primary/10 text-primary",children:r},r))})]}),n&&e.entryCount!==void 0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[s.jsx(ui,{className:"w-3.5 h-3.5"}),"Entries"]}),s.jsx("span",{className:"text-sm",children:e.entryCount})]}),e.resultType&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:[s.jsx(ua,{className:"w-3.5 h-3.5"}),"Result Type"]}),s.jsx("span",{className:"text-sm capitalize",children:e.resultType})]}),t&&s.jsxs("div",{className:"pt-3 border-t border-border/50",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:[s.jsx(Ki,{className:"w-3.5 h-3.5"}),"Collection"]}),s.jsx("p",{className:"text-sm",children:t.name}),t.namespace&&s.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-0.5",children:t.namespace})]})]})}function zO({visualization:e}){return s.jsxs("div",{className:"space-y-6",children:[s.jsx(FO,{stats:e.stats,tableType:e.type}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-medium mb-3",children:[e.type==="simple"&&"Entry Weight Distribution",e.type==="composite"&&"Source Table Selection",e.type==="collection"&&"Merged Table Contributions"]}),e.type==="simple"&&s.jsx(IO,{entries:e.entries,truncated:e.truncated,totalEntries:e.totalEntries}),e.type==="composite"&&s.jsx($O,{sources:e.sources}),e.type==="collection"&&s.jsx(MO,{sources:e.sources,totalEntries:e.totalEntries})]})]})}function BO({inheritance:e}){return s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-4",children:"Inheritance Chain"}),s.jsx(OO,{nodes:e})]})}w.memo(function({descriptions:t,onClose:n}){const[r,a]=w.useState(()=>t.length===1?new Set([0]):new Set),i=w.useCallback(h=>{a(m=>{const v=new Set(m);return v.has(h)?v.delete(h):v.add(h),v})},[]),o=w.useCallback(()=>{a(new Set(t.map((h,m)=>m)))},[t]),c=w.useCallback(()=>{a(new Set)},[]),d=r.size===t.length,p=r.size===0;return s.jsxs("div",{className:J("relative overflow-hidden rounded-xl","border border-amber-900/30","bg-gradient-to-b from-stone-900/95 via-stone-900/90 to-stone-950/95","shadow-[0_4px_24px_rgba(0,0,0,0.4),inset_0_1px_0_rgba(255,255,255,0.03)]","before:absolute before:inset-0 before:opacity-[0.015] before:pointer-events-none","before:bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIGZpbGw9IiNmZmYiLz48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiBmaWxsPSIjMDAwIi8+PC9zdmc+')]"),children:[s.jsxs("div",{className:J("flex items-center justify-between px-4 py-3","border-b border-amber-900/20","bg-gradient-to-r from-amber-950/40 via-transparent to-amber-950/40"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:J("p-1.5 rounded-lg","bg-amber-500/10 border border-amber-500/20","shadow-[0_0_12px_rgba(245,158,11,0.15)]"),children:s.jsx(Lr,{className:"w-4 h-4 text-amber-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:J("text-sm font-semibold tracking-wide","text-amber-100/90"),children:"Descriptions"}),s.jsxs("p",{className:"text-[10px] text-amber-200/40 font-medium tracking-wider uppercase",children:[t.length," ",t.length===1?"entry":"entries"]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("button",{onClick:d?c:o,className:J("flex items-center gap-1.5 px-2 py-1 rounded-md text-xs","text-amber-200/50 hover:text-amber-200/80","hover:bg-amber-500/10 transition-colors duration-200"),title:d?"Collapse all":"Expand all",children:[d||p?s.jsx(Um,{className:"w-3.5 h-3.5"}):s.jsx(Bm,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"hidden sm:inline",children:d?"Collapse":"Expand"})]}),s.jsx("button",{onClick:n,className:J("p-1.5 rounded-md","text-amber-200/40 hover:text-amber-200/80","hover:bg-amber-500/10 transition-colors duration-200"),title:"Close",children:s.jsx(Ut,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"max-h-[400px] overflow-auto p-3 space-y-2 scroll-smooth",children:t.map((h,m)=>s.jsx(UO,{description:h,isExpanded:r.has(m),onToggle:()=>i(m),index:m},`${h.tableId}-${m}`))})]})});const UO=w.memo(function({description:t,isExpanded:n,onToggle:r,index:a}){return s.jsxs("div",{className:J("rounded-lg overflow-hidden transition-all duration-300","border",n?"border-amber-600/30 bg-gradient-to-br from-amber-950/40 to-stone-950/60":"border-stone-700/30 bg-stone-800/30 hover:bg-stone-800/50 hover:border-stone-600/40"),style:{animationDelay:`${a*50}ms`},children:[s.jsxs("button",{onClick:r,className:J("w-full flex items-start gap-3 px-3 py-2.5 text-left","transition-colors duration-200"),children:[s.jsx(sn,{className:J("w-4 h-4 mt-0.5 flex-shrink-0 transition-transform duration-300",n?"rotate-90 text-amber-400":"text-stone-500")}),s.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[s.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.jsx("span",{className:J("inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold","tracking-wider uppercase","bg-amber-500/15 text-amber-300/80 border border-amber-500/20"),children:t.tableName})}),s.jsx("p",{className:J("text-sm leading-snug",n?"text-stone-100":"text-stone-300",!n&&"line-clamp-2"),children:t.rolledValue})]})]}),s.jsx("div",{className:J("grid transition-all duration-300 ease-out",n?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"),children:s.jsx("div",{className:"overflow-hidden",children:s.jsxs("div",{className:J("px-3 pb-3 pt-1 ml-7","border-l-2 border-amber-500/30"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-amber-500/30 to-transparent"}),s.jsx("span",{className:"text-amber-500/40 text-[10px] font-serif italic",children:"lore"}),s.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-amber-500/30 to-transparent"})]}),s.jsx("div",{className:J("prose prose-sm prose-invert max-w-none","prose-p:text-stone-300 prose-p:leading-relaxed prose-p:my-2","prose-strong:text-amber-200 prose-strong:font-semibold","prose-em:text-stone-200 prose-em:font-serif prose-em:not-italic","prose-ul:my-2 prose-li:text-stone-300 prose-li:marker:text-amber-500/50","prose-ol:my-2","prose-headings:text-amber-100 prose-headings:font-medium","prose-a:text-amber-400 prose-a:no-underline hover:prose-a:underline","prose-blockquote:border-l-amber-500/40 prose-blockquote:bg-stone-800/30","prose-blockquote:text-stone-400 prose-blockquote:not-italic prose-blockquote:py-1","prose-code:text-amber-300 prose-code:bg-stone-800/50 prose-code:px-1 prose-code:rounded","prose-pre:bg-stone-900/80 prose-pre:border prose-pre:border-stone-700/50","[&_p:first-child]:mt-0 [&_p:last-child]:mb-0","text-[13px]"),children:s.jsx(_a,{remarkPlugins:[pi],children:t.description})})]})})})]})});function ww(){const[e]=SE(),t=Gi(),{collectionId:n,tableId:r}=yx(),a=n||e.get("collection")||void 0,i=w.useRef(!1);Nf();const o=nt(M=>M.setExpandedCollectionId),c=nt(M=>M.setEditorActiveTab),d=nt(M=>M.setEditorSelectedItemId),p=nt(M=>M.setEditorLastExplicitItemId),[h,m]=w.useState(null);w.useEffect(()=>{a&&o(a)},[a,o]),w.useEffect(()=>{if(!n||!r||i.current)return;const{getTableList:M,getTemplateList:F}=dt.getState(),le=M(n).find(je=>je.id===r);if(le){const je={id:le.id,name:le.name,type:"table",tableType:le.type,description:le.description,tags:le.tags,hidden:le.hidden,entryCount:le.entryCount,resultType:le.resultType};m({item:je,collectionId:n}),i.current=!0;return}const de=F(n).find(je=>je.id===r);if(de){const je={id:de.id,name:de.name,type:"template",description:de.description,tags:de.tags,resultType:de.resultType};m({item:je,collectionId:n}),i.current=!0}},[n,r]);const[v,g]=w.useState(null),[x,y]=w.useState(null),{currentResult:k,isRolling:N,rollError:C,history:T,rollOnTable:j,rollOnTemplate:D,pinResult:_,deleteHistoryItem:I,clearHistory:R}=oF(a),z=dt(M=>M.collections),P=w.useMemo(()=>{if(!h)return null;const{item:M,collectionId:F}=h,{getTableList:B,getTemplateList:le}=dt.getState();if(M.type==="template"){const de=le(F).find(je=>je.id===M.id);if(de)return{id:de.id,name:de.name,type:"template",description:de.description,tags:de.tags}}else{const de=B(F).find(je=>je.id===M.id);if(de)return{id:de.id,name:de.name,type:"table",tableType:de.type,description:de.description,tags:de.tags,hidden:de.hidden,entryCount:de.entryCount}}return M},[h,z]),q=h!==null,$=w.useCallback(async()=>{if(!q||N||!h)return;const{item:M,collectionId:F}=h;M.type==="template"?await D(F,M.id):await j(F,M.id)},[q,N,h,j,D]),G=w.useCallback((M,F)=>{m({item:M,collectionId:F})},[]),E=w.useCallback(async(M,F)=>{m({item:M,collectionId:F}),M.type==="template"?await D(F,M.id):await j(F,M.id)},[j,D]),L=w.useCallback((M,F)=>{c(M.type==="template"?"templates":"tables"),d(M.id),p(M.id),t(`/editor/${F}`)},[t,c,d,p]),Z=w.useCallback(async(M,F)=>{m({item:M,collectionId:F});let B;if(M.type==="template"?B=await D(F,M.id):B=await j(F,M.id),B!=null&&B.text)try{await navigator.clipboard.writeText(B.text)}catch(le){console.error("Failed to copy to clipboard:",le)}},[j,D]),X=w.useCallback((M,F)=>{g({item:M,collectionId:F})},[]),K=w.useCallback((M,F)=>{y({item:M,collectionId:F})},[]),ee=w.useMemo(()=>[{key:"Space",handler:()=>$(),description:"Roll"},{key:"Enter",handler:()=>$(),description:"Roll"}],[$]);af({shortcuts:ee});const U=(h==null?void 0:h.item.id)||null;return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.roll}),s.jsxs("div",{className:"h-[calc(100vh-4rem)]",children:[s.jsx($F,{leftPanel:({onMobileClose:M})=>s.jsx(cO,{selectedItemId:U,onSelectItem:G,onRollItem:E,onEditItem:L,onCopyResult:Z,onRollMultiple:X,onViewDetails:K,onMobileClose:M}),rightPanel:s.jsx(CO,{selectedItem:P,collectionId:(h==null?void 0:h.collectionId)??null,currentResult:k,isRolling:N,rollError:C,canRoll:q,history:T,onRoll:$,onPin:_,onDelete:I,onClearHistory:R})}),v&&s.jsx(SO,{item:v.item,collectionId:v.collectionId,onClose:()=>g(null),onRoll:async M=>{const{item:F,collectionId:B}=v,le=[];for(let pe=0;pe<M;pe++){let de;F.type==="template"?de=await D(B,F.id):de=await j(B,F.id),de!=null&&de.text&&le.push(de.text)}return le}}),x&&s.jsx(PO,{item:x.item,collectionId:x.collectionId,onClose:()=>y(null)})]})]})}function xw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function HO(e){if(Array.isArray(e))return e}function qO(e,t,n){return(t=QO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WO(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,c=[],d=!0,p=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(d=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);d=!0);}catch(h){p=!0,a=h}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(p)throw a}}return c}}function VO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kw(Object(n),!0).forEach(function(r){qO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GO(e,t){if(e==null)return{};var n,r,a=KO(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function KO(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function YO(e,t){return HO(e)||WO(e,t)||JO(e,t)||VO()}function ZO(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QO(e){var t=ZO(e,"string");return typeof t=="symbol"?t:t+""}function JO(e,t){if(e){if(typeof e=="string")return xw(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xw(e,t):void 0}}function XO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Sw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(n),!0).forEach(function(r){XO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(a,i){return i(a)},r)}}function Wo(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return t.apply(n,[].concat(a,c))}}}function Nu(e){return{}.toString.call(e).includes("Object")}function tP(e){return!Object.keys(e).length}function cl(e){return typeof e=="function"}function nP(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rP(e,t){return Nu(t)||si("changeType"),Object.keys(t).some(function(n){return!nP(e,n)})&&si("changeField"),t}function aP(e){cl(e)||si("selectorType")}function iP(e){cl(e)||Nu(e)||si("handlerType"),Nu(e)&&Object.values(e).some(function(t){return!cl(t)})&&si("handlersType")}function sP(e){e||si("initialIsRequired"),Nu(e)||si("initialType"),tP(e)&&si("initialContent")}function oP(e,t){throw new Error(e[t]||e.default)}var lP={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},si=Wo(oP)(lP),Wc={changes:rP,selector:aP,handler:iP,initial:sP};function cP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wc.initial(e),Wc.handler(t);var n={current:e},r=Wo(pP)(n,t),a=Wo(dP)(n),i=Wo(Wc.changes)(e),o=Wo(uP)(n);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return Wc.selector(p),p(n.current)}function d(p){eP(r,a,i,o)(p)}return[c,d]}function uP(e,t){return cl(t)?t(e.current):t}function dP(e,t){return e.current=Sw(Sw({},e.current),t),t}function pP(e,t,n){return cl(t)?t(e.current):Object.keys(n).forEach(function(r){var a;return(a=t[r])===null||a===void 0?void 0:a.call(t,e.current[r])}),n}var hP={create:cP},mP={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function fP(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return t.apply(n,[].concat(a,c))}}}function gP(e){return{}.toString.call(e).includes("Object")}function vP(e){return e||Ew("configIsRequired"),gP(e)||Ew("configType"),e.urls?(yP(),{paths:{vs:e.urls.monacoBase}}):e}function yP(){console.warn(q1.deprecation)}function bP(e,t){throw new Error(e[t]||e.default)}var q1={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ew=fP(bP)(q1),wP={config:vP},xP=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(a){return n.reduceRight(function(i,o){return o(i)},a)}};function W1(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],W1(e[n],t[n]))}),Nw(Nw({},e),t)}var kP={type:"cancelation",msg:"operation is manually canceled"};function Nh(e){var t=!1,n=new Promise(function(r,a){e.then(function(i){return t?a(kP):r(i)}),e.catch(a)});return n.cancel=function(){return t=!0},n}var NP=["monaco"],CP=hP.create({config:mP,isInitialized:!1,resolve:null,reject:null,monaco:null}),V1=YO(CP,2),Tl=V1[0],Yu=V1[1];function SP(e){var t=wP.config(e),n=t.monaco,r=GO(t,NP);Yu(function(a){return{config:W1(a.config,r),monaco:n}})}function EP(){var e=Tl(function(t){var n=t.monaco,r=t.isInitialized,a=t.resolve;return{monaco:n,isInitialized:r,resolve:a}});if(!e.isInitialized){if(Yu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Nh(Ch);if(window.monaco&&window.monaco.editor)return G1(window.monaco),e.resolve(window.monaco),Nh(Ch);xP(TP,jP)(AP)}return Nh(Ch)}function TP(e){return document.body.appendChild(e)}function DP(e){var t=document.createElement("script");return e&&(t.src=e),t}function jP(e){var t=Tl(function(r){var a=r.config,i=r.reject;return{config:a,reject:i}}),n=DP("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function AP(){var e=Tl(function(n){var r=n.config,a=n.resolve,i=n.reject;return{config:r,resolve:a,reject:i}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){var r=n.m||n;G1(r),e.resolve(r)},function(n){e.reject(n)})}function G1(e){Tl().monaco||Yu({monaco:e})}function _P(){return Tl(function(e){var t=e.monaco;return t})}var Ch=new Promise(function(e,t){return Yu({resolve:e,reject:t})}),K1={config:SP,init:EP,__getMonacoInstance:_P},RP={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Sh=RP,IP={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},$P=IP;function MP({children:e}){return Ot.createElement("div",{style:$P.container},e)}var FP=MP,OP=FP;function PP({width:e,height:t,isEditorReady:n,loading:r,_ref:a,className:i,wrapperProps:o}){return Ot.createElement("section",{style:{...Sh.wrapper,width:e,height:t},...o},!n&&Ot.createElement(OP,null,r),Ot.createElement("div",{ref:a,style:{...Sh.fullWidth,...!n&&Sh.hide},className:i}))}var LP=PP,Y1=w.memo(LP);function zP(e){w.useEffect(e,[])}var Z1=zP;function BP(e,t,n=!0){let r=w.useRef(!0);w.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var Cr=BP;function Zo(){}function Ds(e,t,n,r){return UP(e,r)||HP(e,t,n,r)}function UP(e,t){return e.editor.getModel(Q1(e,t))}function HP(e,t,n,r){return e.editor.createModel(t,n,r?Q1(e,r):void 0)}function Q1(e,t){return e.Uri.parse(t)}function qP({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:a,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:d=!1,theme:p="light",loading:h="Loading...",options:m={},height:v="100%",width:g="100%",className:x,wrapperProps:y={},beforeMount:k=Zo,onMount:N=Zo}){let[C,T]=w.useState(!1),[j,D]=w.useState(!0),_=w.useRef(null),I=w.useRef(null),R=w.useRef(null),z=w.useRef(N),P=w.useRef(k),q=w.useRef(!1);Z1(()=>{let L=K1.init();return L.then(Z=>(I.current=Z)&&D(!1)).catch(Z=>(Z==null?void 0:Z.type)!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>_.current?E():L.cancel()}),Cr(()=>{if(_.current&&I.current){let L=_.current.getOriginalEditor(),Z=Ds(I.current,e||"",r||n||"text",i||"");Z!==L.getModel()&&L.setModel(Z)}},[i],C),Cr(()=>{if(_.current&&I.current){let L=_.current.getModifiedEditor(),Z=Ds(I.current,t||"",a||n||"text",o||"");Z!==L.getModel()&&L.setModel(Z)}},[o],C),Cr(()=>{let L=_.current.getModifiedEditor();L.getOption(I.current.editor.EditorOption.readOnly)?L.setValue(t||""):t!==L.getValue()&&(L.executeEdits("",[{range:L.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),L.pushUndoStop())},[t],C),Cr(()=>{var L,Z;(Z=(L=_.current)==null?void 0:L.getModel())==null||Z.original.setValue(e||"")},[e],C),Cr(()=>{let{original:L,modified:Z}=_.current.getModel();I.current.editor.setModelLanguage(L,r||n||"text"),I.current.editor.setModelLanguage(Z,a||n||"text")},[n,r,a],C),Cr(()=>{var L;(L=I.current)==null||L.editor.setTheme(p)},[p],C),Cr(()=>{var L;(L=_.current)==null||L.updateOptions(m)},[m],C);let $=w.useCallback(()=>{var X;if(!I.current)return;P.current(I.current);let L=Ds(I.current,e||"",r||n||"text",i||""),Z=Ds(I.current,t||"",a||n||"text",o||"");(X=_.current)==null||X.setModel({original:L,modified:Z})},[n,t,a,e,r,i,o]),G=w.useCallback(()=>{var L;!q.current&&R.current&&(_.current=I.current.editor.createDiffEditor(R.current,{automaticLayout:!0,...m}),$(),(L=I.current)==null||L.editor.setTheme(p),T(!0),q.current=!0)},[m,p,$]);w.useEffect(()=>{C&&z.current(_.current,I.current)},[C]),w.useEffect(()=>{!j&&!C&&G()},[j,C,G]);function E(){var Z,X,K,ee;let L=(Z=_.current)==null?void 0:Z.getModel();c||((X=L==null?void 0:L.original)==null||X.dispose()),d||((K=L==null?void 0:L.modified)==null||K.dispose()),(ee=_.current)==null||ee.dispose()}return Ot.createElement(Y1,{width:g,height:v,isEditorReady:C,loading:h,_ref:R,className:x,wrapperProps:y})}var WP=qP;w.memo(WP);function VP(e){let t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}var GP=VP,Vc=new Map;function KP({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:a,path:i,theme:o="light",line:c,loading:d="Loading...",options:p={},overrideServices:h={},saveViewState:m=!0,keepCurrentModel:v=!1,width:g="100%",height:x="100%",className:y,wrapperProps:k={},beforeMount:N=Zo,onMount:C=Zo,onChange:T,onValidate:j=Zo}){let[D,_]=w.useState(!1),[I,R]=w.useState(!0),z=w.useRef(null),P=w.useRef(null),q=w.useRef(null),$=w.useRef(C),G=w.useRef(N),E=w.useRef(),L=w.useRef(r),Z=GP(i),X=w.useRef(!1),K=w.useRef(!1);Z1(()=>{let M=K1.init();return M.then(F=>(z.current=F)&&R(!1)).catch(F=>(F==null?void 0:F.type)!=="cancelation"&&console.error("Monaco initialization: error:",F)),()=>P.current?U():M.cancel()}),Cr(()=>{var F,B,le,pe;let M=Ds(z.current,e||r||"",t||a||"",i||n||"");M!==((F=P.current)==null?void 0:F.getModel())&&(m&&Vc.set(Z,(B=P.current)==null?void 0:B.saveViewState()),(le=P.current)==null||le.setModel(M),m&&((pe=P.current)==null||pe.restoreViewState(Vc.get(i))))},[i],D),Cr(()=>{var M;(M=P.current)==null||M.updateOptions(p)},[p],D),Cr(()=>{!P.current||r===void 0||(P.current.getOption(z.current.editor.EditorOption.readOnly)?P.current.setValue(r):r!==P.current.getValue()&&(K.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),P.current.pushUndoStop(),K.current=!1))},[r],D),Cr(()=>{var F,B;let M=(F=P.current)==null?void 0:F.getModel();M&&a&&((B=z.current)==null||B.editor.setModelLanguage(M,a))},[a],D),Cr(()=>{var M;c!==void 0&&((M=P.current)==null||M.revealLine(c))},[c],D),Cr(()=>{var M;(M=z.current)==null||M.editor.setTheme(o)},[o],D);let ee=w.useCallback(()=>{var M;if(!(!q.current||!z.current)&&!X.current){G.current(z.current);let F=i||n,B=Ds(z.current,r||e||"",t||a||"",F||"");P.current=(M=z.current)==null?void 0:M.editor.create(q.current,{model:B,automaticLayout:!0,...p},h),m&&P.current.restoreViewState(Vc.get(F)),z.current.editor.setTheme(o),c!==void 0&&P.current.revealLine(c),_(!0),X.current=!0}},[e,t,n,r,a,i,p,h,m,o,c]);w.useEffect(()=>{D&&$.current(P.current,z.current)},[D]),w.useEffect(()=>{!I&&!D&&ee()},[I,D,ee]),L.current=r,w.useEffect(()=>{var M,F;D&&T&&((M=E.current)==null||M.dispose(),E.current=(F=P.current)==null?void 0:F.onDidChangeModelContent(B=>{K.current||T(P.current.getValue(),B)}))},[D,T]),w.useEffect(()=>{if(D){let M=z.current.editor.onDidChangeMarkers(F=>{var le;let B=(le=P.current.getModel())==null?void 0:le.uri;if(B&&F.find(pe=>pe.path===B.path)){let pe=z.current.editor.getModelMarkers({resource:B});j==null||j(pe)}});return()=>{M==null||M.dispose()}}return()=>{}},[D,j]);function U(){var M,F;(M=E.current)==null||M.dispose(),v?m&&Vc.set(i,P.current.saveViewState()):(F=P.current.getModel())==null||F.dispose(),P.current.dispose()}return Ot.createElement(Y1,{width:g,height:x,isEditorReady:D,loading:d,_ref:q,className:y,wrapperProps:k})}var YP=KP,ZP=w.memo(YP),QP=ZP;const JP="http://json-schema.org/draft-07/schema#",XP="https://rolldeo.com/schemas/random-table-spec-v1.0.json",e3="Random Table JSON Template Specification v1.0",t3="A JSON schema for configurable random table generators supporting weighted tables, composite tables, template-based text generation, mathematical operations, conditional logic, multi-level table inheritance, external file references, and generation-time shared variables.",n3="object",r3=["metadata","tables"],a3=!1,i3={metadata:{$ref:"#/$defs/metadata"},imports:{type:"array",description:"Array of external file imports for modular content organization. Imports are resolved before any table or template processing.",items:{$ref:"#/$defs/import"}},tables:{type:"array",description:"Array of table definitions. At least one table is required. Tables can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).",minItems:1,items:{$ref:"#/$defs/table"}},templates:{type:"array",description:"Array of text generation pattern templates that combine multiple tables and operations using {{...}} syntax.",items:{$ref:"#/$defs/template"}},conditionals:{type:"array",description:"Array of conditional logic rules applied after primary generation based on rolled results.",items:{$ref:"#/$defs/conditional"}},variables:{$ref:"#/$defs/variables"},shared:{$ref:"#/$defs/shared"}},s3=JSON.parse(`{"metadata":{"type":"object","title":"Metadata Object","description":"Contains information about the file itself and global engine configuration.","required":["name","namespace","version","specVersion"],"additionalProperties":false,"properties":{"name":{"type":"string","description":"Name of the table collection","minLength":1,"examples":["Fantasy Treasure Generator","Sci-Fi Name Generator"]},"namespace":{"type":"string","description":"Unique namespace to prevent collisions. Use dot-separated segments (e.g., 'fantasy.core', 'scifi.names').","pattern":"^[a-zA-Z_][a-zA-Z0-9_]*(\\\\.[a-zA-Z_][a-zA-Z0-9_]*)*$","minLength":1,"examples":["fantasy.core","publisher.product.module"]},"version":{"type":"string","description":"Semantic version number for this file (e.g., '1.0.0', '2.1.0-beta').","pattern":"^\\\\d+\\\\.\\\\d+\\\\.\\\\d+(-[a-zA-Z0-9.]+)?(\\\\+[a-zA-Z0-9.]+)?$","examples":["1.0.0","2.1.0","1.0.0-beta.1"]},"specVersion":{"type":"string","description":"The specification version this file conforms to. Must be '1.0' for this schema.","const":"1.0"},"author":{"type":"string","description":"Author name or organization"},"description":{"type":"string","description":"Markdown-formatted description of the collection"},"instructions":{"type":"string","description":"Usage instructions in Markdown format"},"tags":{"$ref":"#/$defs/tagsArray"},"created":{"type":"string","description":"ISO 8601 date-time string for creation date","format":"date-time"},"updated":{"type":"string","description":"ISO 8601 date-time string for last update","format":"date-time"},"source":{"$ref":"#/$defs/metadataSource"},"rights":{"$ref":"#/$defs/rights"},"maxRecursionDepth":{"type":"integer","description":"Maximum depth for nested table/template references. Prevents infinite loops from circular references.","default":50,"minimum":1,"examples":[25,50,100]},"maxExplodingDice":{"type":"integer","description":"Maximum number of times exploding dice (!) can re-roll.","default":100,"minimum":1,"examples":[50,100]},"maxInheritanceDepth":{"type":"integer","description":"Maximum depth for inheritance chains. For example, C extends B extends A has depth 2.","default":5,"minimum":1,"examples":[3,5,10]},"uniqueOverflowBehavior":{"type":"string","description":"Behavior when unique selection requests more entries than available.","enum":["stop","cycle","error"],"default":"stop"}}},"metadataSource":{"type":"object","title":"Source Attribution","description":"Optional properties for tracking content origin and licensing at the file level.","additionalProperties":false,"properties":{"book":{"type":"string","description":"Name of the source book or product"},"publisher":{"type":"string","description":"Publisher name"},"pages":{"type":"string","description":"Page number(s) or range (e.g., '47', '47-89', '12, 45-67')","examples":["47","47-89","12, 45-67, 120"]},"isbn":{"type":"string","description":"ISBN if applicable"},"url":{"type":"string","description":"URL to product page or official source","format":"uri"},"license":{"type":"string","description":"License under which content is used","examples":["OGL 1.0a","CC BY 4.0","Original","CC BY-NC-SA 4.0"]},"copyright":{"oneOf":[{"type":"string","description":"Simple copyright notice string"},{"$ref":"#/$defs/structuredCopyright"}],"description":"Copyright notice (string or structured object)"}}},"structuredCopyright":{"type":"object","title":"Structured Copyright","description":"Detailed copyright information for publishers","additionalProperties":false,"properties":{"year":{"type":"string","description":"Copyright year or range (e.g., '2024' or '2020-2024')","pattern":"^\\\\d{4}(-\\\\d{4})?$","examples":["2024","2020-2024"]},"holder":{"type":"string","description":"Legal entity name that holds the copyright"},"notice":{"type":"string","description":"Full copyright notice text","examples":[" 2024 Example Games LLC. All rights reserved."]}}},"rights":{"type":"object","title":"Rights & Permissions","description":"Intellectual property rights, usage permissions, and legal contact information for content protection.","additionalProperties":false,"properties":{"type":{"type":"string","description":"Content classification type","enum":["proprietary","open-content","fan-content","licensed"]},"official":{"type":"boolean","description":"Whether this is official publisher content (vs. fan-made)","default":false},"productIdentity":{"type":"array","description":"List of Product Identity elements (names, characters, logos, etc.) that are protected","items":{"type":"string"},"examples":[["Kobold Press","Tome of Beasts","All creature names and descriptions"]]},"trademarks":{"type":"array","description":"Trademark notices for protected marks","items":{"type":"string"},"examples":[["Kobold Press","Tome of Beasts"]]},"compatibilityNotice":{"type":"string","description":"Required compatibility/non-affiliation statement","examples":["Compatible with 5th Edition fantasy roleplaying. Not affiliated with or endorsed by Wizards of the Coast."]},"permissions":{"$ref":"#/$defs/rightsPermissions"},"contact":{"$ref":"#/$defs/rightsContact"},"termsUrl":{"type":"string","description":"URL to full terms of use","format":"uri"},"communityPolicyUrl":{"type":"string","description":"URL to fan content/community use policy","format":"uri"}}},"rightsPermissions":{"type":"object","title":"Usage Permissions","description":"Explicit permissions for how the content may be used","additionalProperties":false,"properties":{"commercialUse":{"type":"boolean","description":"Whether content may be used in commercial products","default":false},"modification":{"type":"boolean","description":"Whether content may be modified or adapted","default":false},"redistribution":{"type":"boolean","description":"Whether content may be redistributed","default":false},"derivativeWorks":{"type":"boolean","description":"Whether derivative works may be created","default":false},"attributionRequired":{"type":"boolean","description":"Whether attribution is required when using content","default":true}}},"rightsContact":{"type":"object","title":"Legal Contact Information","description":"Contact information for licensing and legal inquiries","additionalProperties":false,"properties":{"licensing":{"type":"string","description":"Email or URL for licensing inquiries"},"dmca":{"type":"string","description":"DMCA agent contact for takedown requests"},"general":{"type":"string","description":"General legal contact"}}},"tableSource":{"type":"object","title":"Table Source Attribution","description":"Source attribution for a specific table, useful when combining content from multiple sources.","additionalProperties":false,"properties":{"book":{"type":"string","description":"Source book name"},"page":{"oneOf":[{"type":"integer","description":"Single page number","minimum":1},{"type":"string","description":"Page range","pattern":"^\\\\d+(-\\\\d+)?$","examples":["47","47-49","123-125"]}],"description":"Page number or range (e.g., 47 or '47-49')"},"section":{"type":"string","description":"Section or chapter name"},"url":{"type":"string","description":"Direct URL to source if available online","format":"uri"},"license":{"type":"string","description":"License for this specific table (overrides file-level license)"}}},"import":{"type":"object","title":"Import Definition","description":"References tables, templates, and variables from an external JSON file.","required":["path","alias"],"additionalProperties":false,"properties":{"path":{"type":"string","description":"Relative path (e.g., './creatures/undead.json'), parent directory path (e.g., '../shared/core.json'), or absolute URL (e.g., 'https://rolldeo.com/tables.json').","minLength":1,"examples":["./creatures/undead.json","../shared/core.json","https://rolldeo.com/tables/v2/core.json"]},"alias":{"type":"string","description":"Local alias for referencing imported content. Must be unique within the file. Cannot contain periods.","pattern":"^[a-zA-Z_][a-zA-Z0-9_]*$","minLength":1,"examples":["undead","core","loot"]},"description":{"type":"string","description":"Human-readable description of what this import provides"}}},"table":{"type":"object","title":"Table Definition","description":"A table definition. Can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).","required":["id","name","type"],"allOf":[{"properties":{"id":{"type":"string","description":"Unique identifier for the table within the namespace. Cannot contain periods. Cannot be a reserved word.","pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$","minLength":1},"name":{"type":"string","description":"Display name for the table","minLength":1},"type":{"type":"string","description":"Table type: 'simple' for weighted entries, 'composite' for selecting from source tables, 'collection' for merging multiple tables.","enum":["simple","composite","collection"]},"description":{"type":"string","description":"Markdown-formatted description"},"tags":{"$ref":"#/$defs/tagsArray"},"hidden":{"type":"boolean","description":"If true, table won't appear in user-facing lists. Still fully accessible to templates and other tables.","default":false},"extends":{"type":"string","description":"ID of table to inherit from. Supports 'alias.tableId' for imported tables and 'namespace.tableId' for namespaced tables.","minLength":1,"examples":["baseTreasure","loot.baseTreasure","fantasy.core.weapons"]},"defaultSets":{"$ref":"#/$defs/setsObject"},"resultType":{"$ref":"#/$defs/resultType"},"source":{"$ref":"#/$defs/tableSource"},"shared":{"$ref":"#/$defs/tableShared"}}},{"oneOf":[{"$ref":"#/$defs/simpleTable"},{"$ref":"#/$defs/compositeTable"},{"$ref":"#/$defs/collectionTable"}]}]},"simpleTable":{"type":"object","title":"Simple Table","description":"A basic table with weighted entries. The most common table type, optimized for ease of data entry.","properties":{"type":{"const":"simple"},"entries":{"type":"array","description":"Array of table entries with values and optional weights/ranges","minItems":1,"items":{"$ref":"#/$defs/entry"}}},"required":["entries"]},"compositeTable":{"type":"object","title":"Composite Table","description":"Selects which source table to roll on using weighted probability, then rolls once on that table. Use when you want weighted selection between different tables.","properties":{"type":{"const":"composite"},"sources":{"type":"array","description":"Array of source tables to select from, with optional weights","minItems":1,"items":{"$ref":"#/$defs/compositeSource"}}},"required":["sources"]},"collectionTable":{"type":"object","title":"Collection Table","description":"Merges all entries from multiple tables into a single unified pool. Use for combining related tables (e.g., 'Swords' + 'Axes' + 'Polearms' = 'All Melee Weapons').","properties":{"type":{"const":"collection"},"collections":{"type":"array","description":"Array of table IDs to combine. Supports 'alias.tableId' and 'namespace.tableId' syntax.","minItems":1,"items":{"type":"string","description":"Table ID reference to include in the collection","minLength":1},"examples":[["swords","axes","polearms"],["core.commonItems","expansion.rareItems"]]}},"required":["collections"]},"compositeSource":{"type":"object","title":"Composite Source","description":"A source table reference for composite tables with optional weight.","required":["tableId"],"additionalProperties":false,"properties":{"tableId":{"type":"string","description":"ID of the table to pull from. Supports 'alias.tableId' and 'namespace.tableId' syntax.","minLength":1},"weight":{"type":"number","description":"Relative weight for selecting this source. Weight of 0 disables this source from random selection.","minimum":0,"default":1}}},"entry":{"type":"object","title":"Table Entry","description":"A single entry in a simple table. Normally requires a value. When overriding an inherited entry (via 'id' in an extended table), 'value' becomes optional - only 'id' plus the properties you want to change are needed. Can optionally specify weight OR range (not both). If neither specified, defaults to weight: 1.","properties":{"id":{"type":"string","description":"Unique ID within this table. Required for inheritance overrides. If omitted, auto-generated as {tableId}{NNN}.","pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"value":{"type":"string","description":"The output text. Supports Markdown formatting and {{...}} template syntax for nested evaluation, dice rolls, math expressions, table references, roll captures ({{N*table >> $var}}), capture access ({{$var[0].@prop}}), property aggregation ({{collect:$var.@prop}}), and switch expressions ({{switch[cond:result].else[fallback]}})."},"weight":{"type":"number","description":"Relative probability weight. Must be 0 or greater. Weight of 0 disables the entry from random selection but preserves it for inheritance. Mutually exclusive with 'range'.","minimum":0,"default":1},"range":{"$ref":"#/$defs/rangeArray"},"description":{"type":"string","description":"Markdown description for documentation/UI purposes"},"tags":{"$ref":"#/$defs/tagsArray"},"sets":{"$ref":"#/$defs/setsObject"},"assets":{"$ref":"#/$defs/assetsObject"},"resultType":{"$ref":"#/$defs/resultType"}},"additionalProperties":false,"allOf":[{"not":{"required":["weight","range"]}},{"if":{"not":{"required":["id"]}},"then":{"required":["value"]}}]},"rangeArray":{"type":"array","title":"Range","description":"A two-element inclusive range for dice-roll style tables (e.g., [1, 5] means numbers 1-5, weight = 5). Mutually exclusive with 'weight'. Converted to weight as: weight = (range[1] - range[0]) + 1.","items":{"type":"integer","minimum":0},"minItems":2,"maxItems":2,"examples":[[1,50],[51,75],[76,100]]},"setsObject":{"type":"object","title":"Sets (Placeholder Values)","description":"Key-value pairs that set placeholder values (accessible via @key syntax) when this entry is selected. Merges with and overrides table's defaultSets.","additionalProperties":{"type":"string"},"examples":[{"size":"large","terrain":"forest"},{"hp":"{{dice:4d8+12}}","ac":"16"}]},"assetsObject":{"type":"object","title":"Assets","description":"Key-value pairs mapping asset types to file paths or URLs. Common keys: image, token, thumbnail, portrait, sound, music, handout, statblock.","additionalProperties":{"type":"string","description":"Asset path: relative path, absolute URL, or data URI"},"examples":[{"image":"images/goblin.png","token":"tokens/goblin.webp"},{"portrait":"https://cdn.rolldeo.com/orc.jpg"}]},"template":{"type":"object","title":"Template Definition","description":"A text generation pattern that combines multiple tables and operations using {{...}} syntax.","required":["id","name","pattern"],"additionalProperties":false,"properties":{"id":{"type":"string","description":"Unique identifier for the template. Cannot be a reserved word.","pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$","minLength":1},"name":{"type":"string","description":"Display name for the template","minLength":1},"pattern":{"type":"string","description":"Template pattern string. Use {{tableId}} for table rolls, {{dice:XdY}} for dice, {{$var}} for variables, {{@placeholder}} for placeholders, {{math:expr}} for math, {{N*table >> $var}} for captures, {{$var[0].@prop}} for capture access, {{collect:$var.@prop}} for aggregation, {{switch[cond:result].else[fallback]}} for inline conditionals, {{expr.switch[cond:result]}} for attached conditionals. Supports Markdown."},"description":{"type":"string","description":"Markdown description of the template"},"tags":{"$ref":"#/$defs/tagsArray"},"resultType":{"$ref":"#/$defs/resultType"},"shared":{"$ref":"#/$defs/tableShared"}}},"conditional":{"type":"object","title":"Conditional Rule","description":"Applies logic based on rolled results. Evaluated after primary generation.","required":["when","action","value"],"additionalProperties":false,"properties":{"when":{"type":"string","description":"Condition expression. Supports comparisons (==, !=, >, <, >=, <=, contains, matches) and logical operators (&&, ||, !). Use @placeholder.property for entry values, $variable for variables.","minLength":1,"examples":["@size.value == 'large'","@race.value == 'elf' && @class.value == 'mage'","$setting != 'modern'","@name.value contains 'the'"]},"action":{"type":"string","description":"Action to perform when condition is true: append (add to end), prepend (add to start), replace (replace target), setVariable (set a variable).","enum":["append","prepend","replace","setVariable"]},"target":{"type":"string","description":"Required for 'replace' and 'setVariable' actions. For 'append'/'prepend', defaults to current output.","minLength":1},"value":{"type":"string","description":"Value to apply. May contain template syntax ({{...}}) for dynamic content. Supports Markdown."},"tags":{"$ref":"#/$defs/tagsArray"}},"allOf":[{"if":{"properties":{"action":{"enum":["replace","setVariable"]}},"required":["action"]},"then":{"required":["target"]}}]},"variables":{"type":"object","title":"Static Variables","description":"Static global variables loaded at engine initialization. Referenced using {{$variableName}}. Evaluated once at file load time. For generation-time values, use 'shared' instead.","additionalProperties":{"type":"string"},"propertyNames":{"pattern":"^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"examples":[{"defaultSeparator":", ","setting":"fantasy","campaignYear":"1247"}]},"shared":{"type":"object","title":"Shared Variables (Generation-Time)","description":"Generation-time variables evaluated once at the start of each generation and remain constant throughout that run. Referenced using {{$variableName}}. Evaluated in declaration order. Cannot forward-reference other shared variables. All shared variables capture the full roll result including sets, enabling {{$varName.@property}} syntax with dynamic table resolution.","additionalProperties":{"type":"string"},"propertyNames":{"pattern":"^\\\\$?(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"examples":[{"monsterCount":"{{dice:2d4}}","leaderType":"{{eliteMonsterTable}}","totalThreat":"{{math:$monsterCount + 5}}"},{"$hero":"{{race}}","$enemy":"{{race}}"}]},"tableShared":{"type":"object","title":"Table/Template Shared Variables","description":"Table or template-level shared variables evaluated lazily when rolled. Cannot shadow document-level shared or static variables. Propagate to nested table references. Referenced using {{$variableName}}. All shared variables capture the full roll result including sets, enabling {{$varName.@property}} syntax with dynamic table resolution.","additionalProperties":{"type":"string"},"propertyNames":{"pattern":"^\\\\$?(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"},"examples":[{"threatLevel":"{{dice:1d6}}","monsterCount":"{{math:$threatLevel + 2}}"},{"$character":"{{race}}"}]},"resultType":{"type":"string","title":"Result Type","description":"Classification of output type. Case-insensitive, user-definable. Common values: creature, npc, faction, item, loot, location, encounter, event, hook, complication, name, trait, effect, environment, ability, description, rumor, dialogue, statistic, number, currency, time, weather. Custom types should use namespace conventions (e.g., 'publisher/category/type').","examples":["creature","item","location","encounter","description","starships/cruiser","wh40k/regiment"]},"tagsArray":{"type":"array","title":"Tags","description":"Tags for categorization, organization, filtering, and searching","items":{"type":"string","minLength":1},"default":[],"examples":[["fantasy","treasure","loot"],["encounters","combat","wilderness"]]}}`),o3={$schema:JP,$id:XP,title:e3,description:t3,type:n3,required:r3,additionalProperties:a3,properties:i3,$defs:s3};function l3({value:e,onChange:t,onValidationChange:n,readOnly:r=!1,height:a=500,filename:i="table-collection.json"}){const o=w.useRef(null),c=w.useRef(null),{theme:d}=nt(),p=w.useCallback((m,v)=>{o.current=m,c.current=v,v.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"https://rolldeo.com/schemas/random-table-spec-v1.0.json",fileMatch:["*"],schema:o3}],allowComments:!1,schemaValidation:"error",enableSchemaRequest:!1});const g=m.getModel();if(g){const x=()=>{const k=v.editor.getModelMarkers({resource:g.uri}).map(N=>({line:N.startLineNumber,column:N.startColumn,message:N.message,severity:N.severity===v.MarkerSeverity.Error?"error":N.severity===v.MarkerSeverity.Warning?"warning":"info"}));n==null||n(k)};g.onDidChangeContent(()=>{setTimeout(x,100)}),setTimeout(x,100)}m.focus()},[n]),h=w.useCallback(m=>{m!==void 0&&t(m)},[t]);return w.useEffect(()=>{c.current&&c.current.editor.setTheme(d==="dark"?"vs-dark":"vs")},[d]),s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-muted px-4 py-2 text-sm font-medium border-b flex items-center justify-between",children:[s.jsx("span",{children:i}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Random Table Spec v1.0"})]}),s.jsx(QP,{height:a,language:"json",value:e,onChange:h,onMount:p,theme:d==="dark"?"vs-dark":"vs",loading:s.jsxs("div",{className:"flex items-center justify-center h-full gap-2 text-muted-foreground",children:[s.jsx(Er,{className:"h-5 w-5 animate-spin"}),s.jsx("span",{children:"Loading editor..."})]}),options:{minimap:{enabled:!1},fontSize:14,fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',lineNumbers:"on",wordWrap:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,formatOnPaste:!0,formatOnType:!0,readOnly:r,folding:!0,bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0},quickSuggestions:{other:!0,comments:!1,strings:!0},suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",snippetSuggestions:"inline"}})]})}function Gc(e){try{const t=JSON.parse(e);return JSON.stringify(t,null,2)}catch{return e}}function c3({value:e,onChange:t,errors:n={}}){var N,C,T,j,D,_,I,R,z,P,q,$,G,E,L,Z,X,K,ee,U,M,F,B,le,pe,de,je,ye,Te,Ie;const[r,a]=w.useState(!!e.source),[i,o]=w.useState(!!e.rights),[c,d]=w.useState(typeof((N=e.source)==null?void 0:N.copyright)=="object"),p=w.useCallback((ve,qe)=>{t({...e,[ve]:qe})},[e,t]),h=w.useCallback((ve,qe)=>{t({...e,source:{...e.source||{},[ve]:qe}})},[e,t]),m=w.useCallback((ve,qe)=>{var O;const st=typeof((O=e.source)==null?void 0:O.copyright)=="object"?e.source.copyright:{};t({...e,source:{...e.source||{},copyright:{...st,[ve]:qe}}})},[e,t]),v=w.useCallback((ve,qe)=>{t({...e,rights:{...e.rights||{},[ve]:qe}})},[e,t]),g=w.useCallback((ve,qe)=>{var st;t({...e,rights:{...e.rights||{},permissions:{...((st=e.rights)==null?void 0:st.permissions)||{},[ve]:qe}}})},[e,t]),x=w.useCallback((ve,qe)=>{var st;t({...e,rights:{...e.rights||{},contact:{...((st=e.rights)==null?void 0:st.contact)||{},[ve]:qe}}})},[e,t]),y=()=>{var ve;return(ve=e.source)!=null&&ve.copyright?typeof e.source.copyright=="string"?e.source.copyright:e.source.copyright.notice||"":""},k=()=>{var ve;return(ve=e.source)!=null&&ve.copyright?typeof e.source.copyright=="object"?e.source.copyright:{notice:e.source.copyright}:{}};return s.jsxs("div",{className:"space-y-6 mobile-form-container",children:[s.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[s.jsx(zt,{label:"Name",required:!0,error:n.name,description:"Display name for this collection",children:s.jsx("input",{type:"text",value:e.name||"",onChange:ve=>p("name",ve.target.value),placeholder:"My Table Collection",className:J("w-full p-3 md:p-2 border rounded-xl md:rounded-md bg-background text-base md:text-sm min-h-[48px] md:min-h-0",n.name&&"border-destructive")})}),s.jsx(zt,{label:"Namespace",required:!0,error:n.namespace,description:"Unique identifier (e.g., fantasy.core)",children:s.jsx("input",{type:"text",value:e.namespace||"",onChange:ve=>p("namespace",ve.target.value),placeholder:"myproject.tables",className:J("w-full p-3 md:p-2 border rounded-xl md:rounded-md bg-background text-base md:text-sm min-h-[48px] md:min-h-0",n.namespace&&"border-destructive")})}),s.jsx(zt,{label:"Version",required:!0,error:n.version,description:"Semantic version (e.g., 1.0.0)",children:s.jsx("input",{type:"text",value:e.version||"",onChange:ve=>p("version",ve.target.value),placeholder:"1.0.0",className:J("w-full p-3 md:p-2 border rounded-xl md:rounded-md bg-background text-base md:text-sm min-h-[48px] md:min-h-0",n.version&&"border-destructive")})}),s.jsx(zt,{label:"Author",description:"Your name or organization",children:s.jsx("input",{type:"text",value:e.author||"",onChange:ve=>p("author",ve.target.value),placeholder:"Your Name",className:"w-full p-3 md:p-2 border rounded-xl md:rounded-md bg-background text-base md:text-sm min-h-[48px] md:min-h-0"})})]}),s.jsx(zt,{label:"Description",description:"Markdown-formatted description of this collection",children:s.jsx("textarea",{value:e.description||"",onChange:ve=>p("description",ve.target.value),placeholder:"A collection of random tables for...",rows:3,className:"w-full p-3 md:p-2 border rounded-xl md:rounded-md bg-background resize-y text-base md:text-sm"})}),s.jsx(zt,{label:"Instructions",description:"Usage instructions in Markdown format",children:s.jsx("textarea",{value:e.instructions||"",onChange:ve=>p("instructions",ve.target.value),placeholder:"How to use these tables...",rows:3,className:"w-full p-3 md:p-2 border rounded-xl md:rounded-md bg-background resize-y text-base md:text-sm"})}),s.jsx(zt,{label:"Tags",description:"Categorization tags (press Enter to add)",children:s.jsx(Eh,{value:e.tags||[],onChange:ve=>p("tags",ve),placeholder:"Add a tag..."})}),s.jsxs("details",{className:"border rounded-lg",children:[s.jsx("summary",{className:"px-4 py-2 cursor-pointer font-medium hover:bg-accent/50 rounded-lg",children:"Advanced Settings"}),s.jsxs("div",{className:"p-4 border-t space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(zt,{label:"Max Recursion Depth",description:"Limit for nested table references",children:s.jsx("input",{type:"number",value:e.maxRecursionDepth??50,onChange:ve=>p("maxRecursionDepth",ve.target.value?parseInt(ve.target.value,10):void 0),min:1,className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Max Exploding Dice",description:"Limit for exploding dice re-rolls",children:s.jsx("input",{type:"number",value:e.maxExplodingDice??100,onChange:ve=>p("maxExplodingDice",ve.target.value?parseInt(ve.target.value,10):void 0),min:1,className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Max Inheritance Depth",description:"Limit for inheritance chains",children:s.jsx("input",{type:"number",value:e.maxInheritanceDepth??5,onChange:ve=>p("maxInheritanceDepth",ve.target.value?parseInt(ve.target.value,10):void 0),min:1,className:"w-full p-2 border rounded-md bg-background"})})]}),s.jsx(zt,{label:"Unique Overflow Behavior",description:"What to do when unique selection exceeds available entries",children:s.jsxs("select",{value:e.uniqueOverflowBehavior||"stop",onChange:ve=>p("uniqueOverflowBehavior",ve.target.value),className:"w-full p-2 border rounded-md bg-background",children:[s.jsx("option",{value:"stop",children:"Stop (return fewer results)"}),s.jsx("option",{value:"cycle",children:"Cycle (allow duplicates)"}),s.jsx("option",{value:"error",children:"Error (throw exception)"})]})})]})]}),s.jsxs("details",{className:"border rounded-lg",open:r,onToggle:ve=>a(ve.target.open),children:[s.jsx("summary",{className:"px-4 py-2 cursor-pointer font-medium hover:bg-accent/50 rounded-lg",children:"Source Attribution"}),s.jsxs("div",{className:"p-4 border-t space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(zt,{label:"Book",description:"Source book name",children:s.jsx("input",{type:"text",value:((C=e.source)==null?void 0:C.book)||"",onChange:ve=>h("book",ve.target.value),placeholder:"Core Rulebook",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Publisher",description:"Publisher name",children:s.jsx("input",{type:"text",value:((T=e.source)==null?void 0:T.publisher)||"",onChange:ve=>h("publisher",ve.target.value),placeholder:"Publisher Name",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Pages",description:"Page number(s) or range",children:s.jsx("input",{type:"text",value:((j=e.source)==null?void 0:j.pages)||"",onChange:ve=>h("pages",ve.target.value),placeholder:"47-89",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"ISBN",description:"ISBN if applicable",children:s.jsx("input",{type:"text",value:((D=e.source)==null?void 0:D.isbn)||"",onChange:ve=>h("isbn",ve.target.value),placeholder:"978-0-123456-78-9",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"URL",description:"URL to source",children:s.jsx("input",{type:"url",value:((_=e.source)==null?void 0:_.url)||"",onChange:ve=>h("url",ve.target.value),placeholder:"https://...",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"License",description:"Content license",children:s.jsx("input",{type:"text",value:((I=e.source)==null?void 0:I.license)||"",onChange:ve=>h("license",ve.target.value),placeholder:"CC BY 4.0",className:"w-full p-2 border rounded-md bg-background"})})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium",children:"Copyright"}),s.jsxs("label",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:ve=>{var qe;d(ve.target.checked),!ve.target.checked&&typeof((qe=e.source)==null?void 0:qe.copyright)=="object"&&h("copyright",e.source.copyright.notice||"")},className:"rounded"}),"Structured format"]})]}),c?s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(zt,{label:"Year",description:"e.g., 2024 or 2020-2024",children:s.jsx("input",{type:"text",value:k().year||"",onChange:ve=>m("year",ve.target.value),placeholder:"2024",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Holder",description:"Legal entity name",children:s.jsx("input",{type:"text",value:k().holder||"",onChange:ve=>m("holder",ve.target.value),placeholder:"Example Games LLC",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Notice",description:"Full copyright text",children:s.jsx("input",{type:"text",value:k().notice||"",onChange:ve=>m("notice",ve.target.value),placeholder:" 2024 Example Games LLC",className:"w-full p-2 border rounded-md bg-background"})})]}):s.jsx(zt,{label:"",description:"Simple copyright notice",children:s.jsx("input",{type:"text",value:y(),onChange:ve=>h("copyright",ve.target.value),placeholder:" 2024 Author Name. All rights reserved.",className:"w-full p-2 border rounded-md bg-background"})})]})]})]}),s.jsxs("details",{className:"border rounded-lg",open:i,onToggle:ve=>o(ve.target.open),children:[s.jsx("summary",{className:"px-4 py-2 cursor-pointer font-medium hover:bg-accent/50 rounded-lg",children:"Rights & Permissions"}),s.jsxs("div",{className:"p-4 border-t space-y-6",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(zt,{label:"Content Type",description:"How is this content classified?",children:s.jsxs("select",{value:((R=e.rights)==null?void 0:R.type)||"",onChange:ve=>v("type",ve.target.value||void 0),className:"w-full p-2 border rounded-md bg-background",children:[s.jsx("option",{value:"",children:"Not specified"}),s.jsx("option",{value:"proprietary",children:"Proprietary (all rights reserved)"}),s.jsx("option",{value:"open-content",children:"Open Content (OGL, CC, etc.)"}),s.jsx("option",{value:"fan-content",children:"Fan Content (community policy)"}),s.jsx("option",{value:"licensed",children:"Licensed (third-party license)"})]})}),s.jsx(zt,{label:"Official Content",description:"Is this official publisher content?",children:s.jsx("div",{className:"flex items-center gap-3 h-10",children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:((z=e.rights)==null?void 0:z.official)||!1,onChange:ve=>v("official",ve.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm",children:"This is official publisher content"})]})})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(zt,{label:"Product Identity",description:"Protected names, characters, logos (press Enter to add)",children:s.jsx(Eh,{value:((P=e.rights)==null?void 0:P.productIdentity)||[],onChange:ve=>v("productIdentity",ve),placeholder:"Add protected element..."})}),s.jsx(zt,{label:"Trademarks",description:"Trademark notices (press Enter to add)",children:s.jsx(Eh,{value:((q=e.rights)==null?void 0:q.trademarks)||[],onChange:ve=>v("trademarks",ve),placeholder:"Add trademark..."})})]}),s.jsx(zt,{label:"Compatibility Notice",description:"Required non-affiliation statement",children:s.jsx("textarea",{value:(($=e.rights)==null?void 0:$.compatibilityNotice)||"",onChange:ve=>v("compatibilityNotice",ve.target.value),placeholder:"Compatible with 5th Edition fantasy roleplaying. Not affiliated with or endorsed by...",rows:2,className:"w-full p-2 border rounded-md bg-background resize-y"})}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Usage Permissions"}),s.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[s.jsx(Uo,{label:"Commercial Use",description:"May be used in commercial products",checked:((E=(G=e.rights)==null?void 0:G.permissions)==null?void 0:E.commercialUse)||!1,onChange:ve=>g("commercialUse",ve)}),s.jsx(Uo,{label:"Modification",description:"May be modified or adapted",checked:((Z=(L=e.rights)==null?void 0:L.permissions)==null?void 0:Z.modification)||!1,onChange:ve=>g("modification",ve)}),s.jsx(Uo,{label:"Redistribution",description:"May be redistributed",checked:((K=(X=e.rights)==null?void 0:X.permissions)==null?void 0:K.redistribution)||!1,onChange:ve=>g("redistribution",ve)}),s.jsx(Uo,{label:"Derivative Works",description:"Derivative works may be created",checked:((U=(ee=e.rights)==null?void 0:ee.permissions)==null?void 0:U.derivativeWorks)||!1,onChange:ve=>g("derivativeWorks",ve)}),s.jsx(Uo,{label:"Attribution Required",description:"Must credit the copyright holder",checked:((F=(M=e.rights)==null?void 0:M.permissions)==null?void 0:F.attributionRequired)??!0,onChange:ve=>g("attributionRequired",ve)})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Legal Contact"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsx(zt,{label:"Licensing",description:"For licensing inquiries",children:s.jsx("input",{type:"text",value:((le=(B=e.rights)==null?void 0:B.contact)==null?void 0:le.licensing)||"",onChange:ve=>x("licensing",ve.target.value),placeholder:"licensing@example.com",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"DMCA",description:"For takedown requests",children:s.jsx("input",{type:"text",value:((de=(pe=e.rights)==null?void 0:pe.contact)==null?void 0:de.dmca)||"",onChange:ve=>x("dmca",ve.target.value),placeholder:"dmca@example.com",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"General",description:"General legal contact",children:s.jsx("input",{type:"text",value:((ye=(je=e.rights)==null?void 0:je.contact)==null?void 0:ye.general)||"",onChange:ve=>x("general",ve.target.value),placeholder:"legal@example.com",className:"w-full p-2 border rounded-md bg-background"})})]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsx(zt,{label:"Terms URL",description:"Link to full terms of use",children:s.jsx("input",{type:"url",value:((Te=e.rights)==null?void 0:Te.termsUrl)||"",onChange:ve=>v("termsUrl",ve.target.value),placeholder:"https://example.com/terms",className:"w-full p-2 border rounded-md bg-background"})}),s.jsx(zt,{label:"Community Policy URL",description:"Link to fan content policy",children:s.jsx("input",{type:"url",value:((Ie=e.rights)==null?void 0:Ie.communityPolicyUrl)||"",onChange:ve=>v("communityPolicyUrl",ve.target.value),placeholder:"https://example.com/community-use",className:"w-full p-2 border rounded-md bg-background"})})]})})]})]})]})}function zt({label:e,required:t,error:n,description:r,children:a}){return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-base md:text-sm font-medium mb-2 md:mb-1",children:[e,t&&s.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),a,r&&!n&&s.jsx("p",{className:"text-sm md:text-xs text-muted-foreground mt-1.5 md:mt-1",children:r}),n&&s.jsx("p",{className:"text-sm md:text-xs text-destructive mt-1.5 md:mt-1",children:n})]})}function Eh({value:e,onChange:t,placeholder:n}){const[r,a]=w.useState(""),i=w.useCallback(d=>{const p=d.trim().toLowerCase();p&&!e.includes(p)&&t([...e,p]),a("")},[e,t]),o=w.useCallback(d=>{t(e.filter((p,h)=>h!==d))},[e,t]),c=w.useCallback(d=>{d.key==="Enter"?(d.preventDefault(),i(r)):d.key==="Backspace"&&!r&&e.length>0&&o(e.length-1)},[r,e,i,o]);return s.jsx("div",{className:"border rounded-xl md:rounded-md bg-background p-3 md:p-2",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((d,p)=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 md:px-2 py-1.5 md:py-0.5 text-sm bg-primary/10 text-primary rounded-full",children:[d,s.jsx("button",{type:"button",onClick:()=>o(p),className:"hover:bg-primary/20 rounded-full p-1 md:p-0.5 min-w-[24px] min-h-[24px] md:min-w-0 md:min-h-0 flex items-center justify-center",children:s.jsx(Ut,{className:"h-3.5 w-3.5 md:h-3 md:w-3"})})]},d)),s.jsx("input",{type:"text",value:r,onChange:d=>a(d.target.value),onKeyDown:c,onBlur:()=>r&&i(r),placeholder:e.length===0?n:"",className:"flex-1 min-w-[100px] bg-transparent outline-none text-base md:text-sm py-1 md:py-0"})]})})}function Uo({label:e,description:t,checked:n,onChange:r}){return s.jsxs("label",{className:"flex items-start gap-3 p-4 md:p-3 rounded-xl md:rounded-lg border hover:bg-accent/30 active:bg-accent/50 cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>r(a.target.checked),className:"mt-0.5 rounded w-5 h-5 md:w-4 md:h-4"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base md:text-sm font-medium",children:e}),s.jsx("div",{className:"text-sm md:text-xs text-muted-foreground",children:t})]})]})}function u3(e){const t=e.trim();if(t.startsWith("dice:")||t.startsWith("math:")||t.startsWith("collect:")||t.startsWith("unique:")||t.startsWith("$")||t.startsWith("@")||t.includes("switch[")||t.includes(" >> "))return null;let n=t.replace(/^\d+\*(?:unique\*)?/,"");if(n.includes(".")){const r=n.split("."),a=r.findIndex(i=>i.startsWith("@"));a>0?n=r[a-1]:r.length>=2&&(n=r[r.length-1])}return n=n.replace(/#.*$/,""),n||null}function Nm(e,t){const n=e.trim();if(n.includes("switch["))return"switch";if(n.startsWith("dice:"))return"dice";if(n.startsWith("math:"))return"math";if(n.startsWith("collect:"))return"collect";if(n.includes(" >> $")||n.includes(">>$"))return"capture";if(n.startsWith("$")&&n.includes("@"))return"capture-shared";if(n.startsWith("$"))return"variable";if(n.startsWith("@"))return"placeholder";if(n==="again"||n.endsWith("*again"))return"again";if(n.startsWith("unique:"))return"unique";if(t!=null&&t.templateIds){const r=u3(n);if(r&&t.templateIds.has(r))return"template"}return/^\d+\*/.test(n),"table"}const J1={dice:{text:"text-amber",badge:"bg-amber/15 text-amber hover:bg-amber/25"},math:{text:"text-orange",badge:"bg-orange/15 text-orange hover:bg-orange/25"},table:{text:"text-mint",badge:"bg-mint/15 text-mint hover:bg-mint/25"},template:{text:"text-lavender",badge:"bg-lavender/15 text-lavender hover:bg-lavender/25"},variable:{text:"text-pink",badge:"bg-pink/15 text-pink hover:bg-pink/25"},placeholder:{text:"text-cyan",badge:"bg-cyan/15 text-cyan hover:bg-cyan/25"},again:{text:"text-mint",badge:"bg-mint/15 text-mint hover:bg-mint/25"},unique:{text:"text-amber",badge:"bg-amber/15 text-amber hover:bg-amber/25"},capture:{text:"text-pink",badge:"bg-pink/15 text-pink hover:bg-pink/25"},"capture-shared":{text:"text-cyan",badge:"bg-cyan/15 text-cyan hover:bg-cyan/25"},collect:{text:"text-blue-500 dark:text-blue-400",badge:"bg-blue-500/15 text-blue-500 dark:text-blue-400 hover:bg-blue-500/25"},switch:{text:"text-purple-500 dark:text-purple-400",badge:"bg-purple-500/15 text-purple-500 dark:text-purple-400 hover:bg-purple-500/25"},unknown:{text:"text-gray-500 dark:text-gray-400",badge:"bg-gray-500/15 text-gray-600 dark:text-gray-400 hover:bg-gray-500/25"}};function X1(e){return J("inline-result-expression px-1 py-0.5 rounded cursor-help transition-colors",J1[e].badge)}function ek(e){return{dice:"Dice Roll",math:"Math",table:"Table",template:"Template",variable:"Variable",placeholder:"Placeholder",again:"Re-roll",unique:"Unique",capture:"Capture","capture-shared":"Capture Shared",collect:"Collect",switch:"Switch",unknown:"Expression"}[e]}const Df="",jf="",Af="";function d3(e){const t=[];let n="";for(const r of e)if(r.type==="literal")n+=r.text;else{const a=t.length;t.push({text:r.text,type:r.expressionType||"unknown",original:r.originalExpression||""}),n+=`${Df}${a}${jf}${r.text}${Af}`}return{text:n,expressions:t}}function p3(e,t,n){const r=[];let a=e,i=0;const o=new RegExp(`${Df}(\\d+)${jf}([\\s\\S]*?)${Af}`,"g");let c=0,d;for(;(d=o.exec(a))!==null;){d.index>c&&r.push(s.jsx("span",{children:a.slice(c,d.index)},`${n}-text-${i++}`));const p=parseInt(d[1],10),h=d[2];if(t[p]){const m=t[p],v=X1(m.type),g=ek(m.type),x=m.original?`${g}: ${m.original}`:g;r.push(s.jsx("span",{className:v,title:x,children:h},`${n}-expr-${i++}`))}else r.push(s.jsx("span",{children:h},`${n}-text-${i++}`));c=d.index+d[0].length}return c<a.length&&r.push(s.jsx("span",{children:a.slice(c)},`${n}-text-${i++}`)),r.length>0?r:[s.jsx("span",{children:e},`${n}-empty`)]}function hr(e,t,n){if(typeof e=="string"){const r=p3(e,t,n);return r.length===1?r[0]:s.jsx(s.Fragment,{children:r})}return Array.isArray(e)?e.map((r,a)=>hr(r,t,`${n}-${a}`)):e}const h3=w.memo(function({segment:t,index:n}){if(t.type==="literal")return s.jsx("span",{className:"whitespace-pre-wrap",children:t.text},n);const r=X1(t.expressionType||"unknown"),a=ek(t.expressionType||"unknown"),i=t.originalExpression?`${a}: ${t.originalExpression}`:a;return s.jsx("span",{className:r,title:i,children:t.text},n)}),tk=w.memo(function({segments:t,className:n,enableMarkdown:r=!0}){const{text:a,expressions:i}=w.useMemo(()=>d3(t),[t]),o=w.useMemo(()=>{const c=t.map(d=>d.text).join("");return/[*_#`[\]|>-]|\n/.test(c)},[t]);return t.length===0?s.jsx("div",{className:J("text-sm text-muted-foreground italic whitespace-pre-wrap",n),children:"Empty result"}):r&&o?s.jsx("div",{className:J("prose-roll overflow-x-auto",n),children:s.jsx(_a,{remarkPlugins:[pi],components:{p:({children:c})=>s.jsx("p",{children:hr(c,i,"p")}),h1:({children:c})=>s.jsx("h1",{children:hr(c,i,"h1")}),h2:({children:c})=>s.jsx("h2",{children:hr(c,i,"h2")}),h3:({children:c})=>s.jsx("h3",{children:hr(c,i,"h3")}),h4:({children:c})=>s.jsx("h4",{children:hr(c,i,"h4")}),h5:({children:c})=>s.jsx("h5",{children:hr(c,i,"h5")}),h6:({children:c})=>s.jsx("h6",{children:hr(c,i,"h6")}),li:({children:c})=>s.jsx("li",{children:hr(c,i,"li")}),td:({children:c})=>s.jsx("td",{children:hr(c,i,"td")}),th:({children:c})=>s.jsx("th",{children:hr(c,i,"th")}),strong:({children:c})=>s.jsx("strong",{children:hr(c,i,"strong")}),em:({children:c})=>s.jsx("em",{children:hr(c,i,"em")}),blockquote:({children:c})=>s.jsx("blockquote",{children:hr(c,i,"blockquote")}),code:({className:c,children:d,...p})=>{let h=typeof d=="string"?d:String(d??"");const m=new RegExp(`${Df}\\d+${jf}([\\s\\S]*?)${Af}`,"g");return h=h.replace(m,"$1"),s.jsx("code",{className:c,...p,children:h})}},children:a})}):s.jsx("div",{className:J("text-sm whitespace-pre-wrap break-words leading-relaxed",n),children:t.map((c,d)=>s.jsx(h3,{segment:c,index:d},d))})});function m3(e,t){if(!t)return"hover:bg-accent/50";switch(e){case"mint":return"bg-mint/10 text-mint";case"lavender":return"bg-lavender/10 text-lavender";case"amber":return"bg-amber/10 text-amber";case"pink":return"bg-pink/10 text-pink";case"cyan":return"bg-cyan/10 text-cyan";default:return"bg-primary/10 text-primary"}}function f3(e){switch(e){case"mint":return"text-mint";case"lavender":return"text-lavender";case"amber":return"text-amber";case"pink":return"text-pink";case"cyan":return"text-cyan";default:return"text-muted-foreground"}}function g3(e,t,n){const a=window.innerHeight,i=window.innerWidth;let{top:o,left:c}=e;return o+t>a-8&&(o=Math.max(8,o-t-24)),c+n>i-8&&(c=i-n-8),c=Math.max(8,c),{top:o,left:c}}const nk=w.memo(function({suggestions:t,selectedIndex:n,position:r,onSelect:a,onConfirm:i,onClose:o,isPropertyTrigger:c=!1}){const d=w.useRef(null),p=w.useRef(null),h=320,m=256,g=Math.min(t.length*48+40,m),x=g3(r,g,h);return w.useEffect(()=>{p.current&&p.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[n]),w.useEffect(()=>{const y=N=>{d.current&&!d.current.contains(N.target)&&o()},k=N=>{var C;(C=d.current)!=null&&C.contains(N.target)||o()};return document.addEventListener("mousedown",y),window.addEventListener("scroll",k,!0),()=>{document.removeEventListener("mousedown",y),window.removeEventListener("scroll",k,!0)}},[o]),t.length===0&&!c?null:un.createPortal(s.jsxs("div",{ref:d,className:"fixed z-50 bg-popover border border-border/50 rounded-lg shadow-xl overflow-hidden animate-fade-in",style:{top:x.top,left:x.left,width:h,maxHeight:m},children:[s.jsx("div",{className:"overflow-y-auto",style:{maxHeight:m-32},children:t.length===0&&c?s.jsxs("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:[s.jsx("p",{children:"No matching properties"}),s.jsx("p",{className:"text-xs mt-1",children:"Table or template not found"})]}):t.map((y,k)=>{const N=y.icon,C=k===n;return s.jsxs("button",{ref:C?p:void 0,type:"button",className:J("w-full flex items-center gap-2.5 px-3 py-2 text-sm text-left transition-colors",m3(y.colorClass,C)),onClick:()=>i(k),onMouseEnter:()=>a(k),children:[s.jsx(N,{className:J("h-4 w-4 flex-shrink-0",f3(y.colorClass))}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium font-mono text-xs truncate",children:y.label}),y.description&&s.jsx("div",{className:"text-[11px] text-muted-foreground truncate",children:y.description})]}),y.source!=="Local"&&y.source!=="Syntax"&&s.jsx("span",{className:"text-[10px] text-muted-foreground/60 truncate max-w-[60px]",children:y.source})]},y.id)})}),s.jsx("div",{className:"px-2.5 py-1.5 border-t border-border/30 bg-muted/30",children:s.jsxs("p",{className:"text-[10px] text-muted-foreground/70",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded",children:""})," navigate",s.jsx("span",{className:"mx-1.5",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded",children:"Tab"})," insert",s.jsx("span",{className:"mx-1.5",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded",children:"Esc"})," close"]})})]}),document.body)});function v3(e,t){const n=Nm(e,t);return J1[n].text}function rk(e,t={}){const{whiteSpace:n="pre-wrap",expressionClassName:r,templateIds:a}=t,i=Zr(e),o=[];let c=0;const d=n==="pre"?"whitespace-pre":"whitespace-pre-wrap",p=a?{templateIds:a}:void 0;for(const h of i){h.start>c&&o.push(s.jsx("span",{className:d,children:e.slice(c,h.start)},`text-${c}`));const m=v3(h.expression,p);o.push(s.jsx("span",{className:J(m,r),children:h.raw},`expr-${h.start}`)),c=h.end}return c<e.length&&o.push(s.jsx("span",{className:d,children:e.slice(c)},`text-${c}`)),o.length>0?o:e}const y3=w.memo(w.forwardRef(function({value:t,onChange:n,placeholder:r,minHeight:a=250,id:i,suggestions:o=[],tableMap:c,templateMap:d,sharedVariables:p},h){const m=w.useRef(null),v=w.useRef(null),[g,x]=w.useState(a),y=$1({textareaRef:m,suggestions:o,value:t,onValueChange:n,tableMap:c,templateMap:d,sharedVariables:p}),k=w.useCallback(()=>{m.current&&v.current&&(v.current.scrollTop=m.current.scrollTop,v.current.scrollLeft=m.current.scrollLeft)},[]),N=w.useCallback(()=>{m.current&&x(m.current.offsetHeight)},[]),C=w.useCallback(I=>{n(I.target.value),requestAnimationFrame(N),y.handleInput()},[n,N,y]),T=w.useCallback(I=>{y.handleKeyDown(I)},[y]),j=w.useCallback(I=>{const R=m.current;if(!R)return;const z=R.selectionStart,P=R.selectionEnd,q=t.slice(0,z)+I+t.slice(P);n(q),requestAnimationFrame(()=>{R.focus(),R.setSelectionRange(z+I.length,z+I.length)})},[t,n]),D=w.useCallback(()=>{var I;(I=m.current)==null||I.focus()},[]);w.useImperativeHandle(h,()=>({insertAtCursor:j,focus:D}),[j,D]),w.useEffect(()=>{const I=m.current;if(!I)return;N();const R=new ResizeObserver(()=>{N(),k()});return R.observe(I),()=>{R.disconnect()}},[N,k]),w.useEffect(()=>{k()},[t,k]);const _=w.useMemo(()=>{if(!(!d||d.size===0))return new Set(d.keys())},[d]);return s.jsxs("div",{className:"relative font-mono text-sm",children:[s.jsx("div",{ref:v,className:J("absolute top-0 left-0 right-0 whitespace-pre-wrap break-words","p-3 border border-transparent rounded-md","pointer-events-none overflow-hidden","leading-normal","text-foreground"),style:{height:`${g}px`},"aria-hidden":"true",children:t?rk(t,{templateIds:_}):s.jsx("span",{className:"text-muted-foreground/50",children:r})}),s.jsx("textarea",{ref:m,id:i,value:t,onChange:C,onKeyDown:T,onScroll:k,placeholder:"",className:J("relative w-full resize-y bg-transparent","outline-none border rounded-md p-3","border-input focus:border-ring focus:ring-1 focus:ring-ring","leading-normal","editable-pattern-textarea"),style:{minHeight:`${a}px`,color:"transparent",caretColor:"hsl(var(--foreground))"},spellCheck:!1}),y.isOpen&&y.triggerInfo&&s.jsx(nk,{suggestions:y.filteredSuggestions,selectedIndex:y.selectedIndex,position:y.triggerInfo.position,onSelect:y.setSelectedIndex,onConfirm:y.confirm,onClose:y.close,isPropertyTrigger:y.triggerInfo.type==="property"})]})})),b3=w.memo(function({showTrace:t,onToggleTrace:n,showCaptures:r,onToggleCaptures:a,onReroll:i,isEvaluating:o,traceNodeCount:c=0,captureCount:d=0,hasTrace:p,hasCaptures:h}){return s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:i,disabled:o,className:J("text-sm flex items-center gap-1.5 px-3 py-1.5 rounded-lg border transition-all","text-muted-foreground border-border/50 hover:border-border hover:bg-accent","disabled:opacity-50 disabled:cursor-not-allowed","active:scale-95"),title:"Re-roll preview (evaluate again)",children:[s.jsx(Qm,{className:J("w-4 h-4",o&&"animate-spin")}),"Re-roll"]}),p&&s.jsxs("button",{type:"button",onClick:n,className:J("text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all",t?"text-primary border-primary/40 bg-primary/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"),children:[s.jsx(fl,{className:"w-4 h-4"}),t?"Hide":"Show"," Trace",c>0&&s.jsxs("span",{className:"text-muted-foreground/60 text-xs",children:["(",c," ops)"]})]}),t&&h&&s.jsxs("button",{type:"button",onClick:a,className:J("text-sm flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all",r?"text-rose-400 border-rose-400/40 bg-rose-400/10":"text-muted-foreground border-border/50 hover:border-border hover:bg-accent"),children:[s.jsx(yl,{className:"w-4 h-4"}),r?"Hide":"Show"," Captures",s.jsxs("span",{className:"text-muted-foreground/60 text-xs",children:["(",d," var",d!==1?"s":"",")"]})]}),o&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"Evaluating..."})]})});function w3(e){return e?e.stats.nodeCount:0}function x3(e,t){if("switchModifiers"in e&&e.switchModifiers)return"switch";switch(e.type){case"dice":return"dice";case"math":return"math";case"variable":return"variable";case"placeholder":return"placeholder";case"again":return"again";case"multiRoll":case"table":case"instance":{const n=e.tableId;return t&&t.has(n)?"template":"table"}case"captureMultiRoll":return"capture";case"captureAccess":return"capture-shared";case"collect":return"collect";case"switch":return"switch";default:return"unknown"}}function _f(e,t,n={}){const{enableTrace:r=!0,debounceMs:a=300,sharedVariables:i,templateIds:o}=n,{engine:c}=dt(),[d,p]=w.useState(null),[h,m]=w.useState(!1),[v,g]=w.useState(0),x=w.useRef(null),y=w.useRef(0),k=w.useCallback((D,_,I,R,z)=>{const P=[];if(_.length===0)return D.length>0&&P.push({type:"literal",text:D,startInPattern:0,endInPattern:D.length}),P;const q=I.length===0&&R;let $=0;for(let G=0;G<_.length;G++){const E=_[G];if(E.start>$){const X=D.slice($,E.start);P.push({type:"literal",text:X,startInPattern:$,endInPattern:E.start})}let L="",Z="unknown";try{const X=$i(E.expression);Z=x3(X,z)}catch{Z=Nm(E.expression,{templateIds:z})}G<I.length?(L=I[G],L===""&&(L="[empty]")):q&&G===0&&_.length===1?L=R||"[empty]":I.length>0&&G>=I.length?L="[?]":L=`[${E.expression}]`,P.push({type:"expression",text:L,originalExpression:E.raw,expressionType:Z,startInPattern:E.start,endInPattern:E.end}),$=E.end}if($<D.length){const G=D.slice($);P.push({type:"literal",text:G,startInPattern:$,endInPattern:D.length})}return P},[]),N=w.useCallback(()=>{const D=++y.current;if(!e){p({segments:[],fullText:"",trace:null,captures:null,error:null}),m(!1);return}if(!t||!c.hasCollection(t)){const _=Zr(e),I=k(e,_,[],"",o);p({segments:I,fullText:e,trace:null,captures:null,error:null}),m(!1);return}m(!0);try{const _=c.evaluateRawPattern(e,t,{enableTrace:r,shared:i});if(D!==y.current)return;const I=Zr(e),R=k(e,I,_.expressionOutputs??[],_.text,o);p({segments:R,fullText:_.text,trace:_.trace??null,captures:_.captures??null,error:null})}catch(_){if(D!==y.current)return;const I=_ instanceof Error?_.message:"Evaluation failed",R=Zr(e),z=[];let P=0;for(const q of R)q.start>P&&z.push({type:"literal",text:e.slice(P,q.start),startInPattern:P,endInPattern:q.start}),z.push({type:"expression",text:"[error]",originalExpression:q.raw,expressionType:Nm(q.expression,{templateIds:o}),startInPattern:q.start,endInPattern:q.end}),P=q.end;P<e.length&&z.push({type:"literal",text:e.slice(P),startInPattern:P,endInPattern:e.length}),p({segments:z,fullText:"",trace:null,captures:null,error:I})}finally{D===y.current&&m(!1)}},[e,t,c,r,i,o,k]),C=w.useCallback(()=>{g(D=>D+1)},[]);w.useEffect(()=>(x.current&&clearTimeout(x.current),a>0?(m(!0),x.current=setTimeout(()=>{N()},a)):N(),()=>{x.current&&clearTimeout(x.current)}),[e,t,v,r,i,o]);const T=w.useMemo(()=>w3((d==null?void 0:d.trace)??null),[d==null?void 0:d.trace]),j=w.useMemo(()=>d!=null&&d.captures?Object.keys(d.captures).length:0,[d==null?void 0:d.captures]);return{result:d,isEvaluating:h,reroll:C,traceNodeCount:T,captureCount:j}}const ak=w.memo(w.forwardRef(function({pattern:t,onChange:n,collectionId:r,placeholder:a="Enter your pattern using {{...}} syntax",minHeight:i=250,sharedVariables:o,hidePreviewWhenEmpty:c=!1,hideLabel:d=!1,suggestions:p,tableMap:h,templateMap:m,autocompleteSharedVariables:v},g){const x=w.useRef(null);w.useImperativeHandle(g,()=>({insertAtCursor:Z=>{var X;return(X=x.current)==null?void 0:X.insertAtCursor(Z)},focus:()=>{var Z;return(Z=x.current)==null?void 0:Z.focus()}}));const[y,k]=w.useState(!1),[N,C]=w.useState(!1),T=w.useMemo(()=>{if(!(!m||m.size===0))return new Set(m.keys())},[m]),{result:j,isEvaluating:D,reroll:_,traceNodeCount:I,captureCount:R}=_f(t,r,{enableTrace:!0,debounceMs:300,sharedVariables:o,templateIds:T}),z=!!(j!=null&&j.trace),P=R>0,q=!!(j!=null&&j.error),$=!!(j!=null&&j.segments.some(Z=>Z.type==="expression")),G=w.useCallback(()=>{k(Z=>!Z),y&&C(!1)},[y]),E=w.useCallback(()=>{C(Z=>!Z)},[]),L=!c||$;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[!d&&s.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Pattern ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(y3,{ref:x,value:t,onChange:n,placeholder:a,minHeight:i,suggestions:p,tableMap:h,templateMap:m,sharedVariables:v}),!d&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Use ","{{tableId}}"," for table references, ","{{dice:XdY}}"," for dice,"," ","{{math:expr}}"," for math, ","{{$var}}"," for variables,"," ","{{3*table >> $var}}"," for captures"]})]}),L&&s.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-3 border border-border/50",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Preview Result"}),s.jsx(b3,{showTrace:y,onToggleTrace:G,showCaptures:N,onToggleCaptures:E,onReroll:_,isEvaluating:D,traceNodeCount:I,captureCount:R,hasTrace:z,hasCaptures:P})]}),q&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 border border-destructive/30 rounded-md",children:[s.jsx(Mu,{className:"w-4 h-4 text-destructive mt-0.5 flex-shrink-0"}),s.jsx("div",{className:"text-sm text-destructive",children:j==null?void 0:j.error})]}),!r&&$?s.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-background/50 rounded border border-border/30",children:"Save the collection to enable live preview evaluation."}):j!=null&&j.segments&&j.segments.length>0?s.jsx("div",{className:"p-3 bg-background/50 rounded border border-border/30",children:s.jsx(tk,{segments:j.segments})}):s.jsx("div",{className:"text-sm text-muted-foreground italic p-3 bg-background/50 rounded border border-border/30",children:t?"Empty result":"Enter a pattern to see preview"}),y&&(j==null?void 0:j.trace)&&s.jsx("div",{className:"mt-4",children:s.jsx(Ef,{trace:j.trace,onClose:()=>k(!1)})}),y&&N&&(j==null?void 0:j.captures)&&s.jsx("div",{className:"mt-4",children:s.jsx(B1,{captures:j.captures,onClose:()=>C(!1)})})]})]})})),Cu=w.memo(w.forwardRef(function({value:t,onChange:n,placeholder:r,className:a,wrapperClassName:i,onFocus:o,onBlur:c,onKeyDown:d,suggestions:p=[],tableMap:h,templateMap:m,sharedVariables:v},g){const x=w.useRef(null),y=w.useRef(null),k=$1({textareaRef:x,suggestions:p,value:t,onValueChange:n,tableMap:h,templateMap:m,sharedVariables:v}),N=w.useCallback(()=>{x.current&&y.current&&(y.current.scrollLeft=x.current.scrollLeft)},[]),C=w.useCallback(R=>{n(R.target.value),k.handleInput()},[n,k]),T=w.useCallback(R=>{k.isOpen&&(k.handleKeyDown(R),R.defaultPrevented)||d==null||d(R)},[k,d]),j=w.useCallback(R=>{const z=x.current;if(!z)return;const P=t??"",q=z.selectionStart??P.length,$=z.selectionEnd??P.length,G=P.slice(0,q)+R+P.slice($);n(G),requestAnimationFrame(()=>{z.focus();const E=q+R.length;z.setSelectionRange(E,E)})},[t,n]),D=w.useCallback(()=>{var R;(R=x.current)==null||R.focus()},[]);w.useImperativeHandle(g,()=>({insertAtCursor:j,focus:D,get selectionStart(){var R;return((R=x.current)==null?void 0:R.selectionStart)??null},get selectionEnd(){var R;return((R=x.current)==null?void 0:R.selectionEnd)??null}}),[j,D]);const _=(t==null?void 0:t.includes("{{"))??!1,I=w.useMemo(()=>{if(!(!m||m.size===0))return new Set(m.keys())},[m]);return s.jsxs("div",{className:J("relative",i),children:[_&&s.jsx("div",{ref:y,className:J("absolute top-0 left-0 right-0 bottom-0","pointer-events-none overflow-hidden whitespace-nowrap","flex items-center",a,"text-foreground","!bg-transparent !border-transparent !shadow-none !ring-0"),"aria-hidden":"true",children:rk(t??"",{whiteSpace:"pre",expressionClassName:"whitespace-pre",templateIds:I})}),s.jsx("input",{ref:x,type:"text",value:t??"",onChange:C,onScroll:N,onFocus:o,onBlur:c,onKeyDown:T,placeholder:r,className:J(a,_&&"highlighted-input-transparent"),spellCheck:!1}),k.isOpen&&k.triggerInfo&&s.jsx(nk,{suggestions:k.filteredSuggestions,selectedIndex:k.selectedIndex,position:k.triggerInfo.position,onSelect:k.setSelectedIndex,onConfirm:k.confirm,onClose:k.close,isPropertyTrigger:k.triggerInfo.type==="property"})]})}));function Rf({value:e,onChange:t,placeholder:n="Select or enter type..."}){const[r,a]=w.useState(!1),[i,o]=w.useState(""),[c,d]=w.useState(0),p=w.useRef(null),h=w.useRef(null),m=w.useRef(null),[v,g]=w.useState({top:0,left:0,width:0}),x=w.useMemo(()=>{if(!i.trim())return bb;const j=i.toLowerCase();return bb.filter(D=>D.value.toLowerCase().includes(j)||D.label.toLowerCase().includes(j)||D.description.toLowerCase().includes(j))},[i]),y=tr(e);w.useEffect(()=>{if(r&&m.current){const j=m.current.getBoundingClientRect();g({top:j.bottom+4,left:j.left,width:j.width})}},[r]),w.useEffect(()=>{d(0)},[i]),w.useEffect(()=>{const j=D=>{h.current&&!h.current.contains(D.target)&&m.current&&!m.current.contains(D.target)&&(a(!1),o(""))};if(r)return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[r]);const k=w.useCallback(j=>{switch(j.key){case"ArrowDown":j.preventDefault(),r?d(D=>Math.min(D+1,x.length-1)):a(!0);break;case"ArrowUp":j.preventDefault(),d(D=>Math.max(D-1,0));break;case"Enter":j.preventDefault(),r&&x[c]&&N(x[c].value);break;case"Escape":j.preventDefault(),a(!1),o("");break;case"Tab":a(!1),o("");break}},[r,x,c]),N=w.useCallback(j=>{t(j||void 0),a(!1),o("")},[t]),C=j=>{const D=j.target.value;o(D),t(D||void 0),r||a(!0)},T=()=>{a(!0),o(e||"")};return s.jsxs("div",{ref:m,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:p,type:"text",value:r?i:e||"",onChange:C,onFocus:T,onKeyDown:k,placeholder:n,className:"editor-input pr-16 text-base md:text-sm min-h-[48px] md:min-h-0"}),s.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 pointer-events-none",title:e?`Type: ${e}`:void 0,children:s.jsx(y,{className:"h-4 w-4 text-muted-foreground"})}),s.jsx("button",{type:"button",onClick:()=>{var j;a(!r),r||(o(e||""),(j=p.current)==null||j.focus())},className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 hover:bg-accent rounded transition-colors",children:s.jsx(En,{className:J("h-4 w-4 text-muted-foreground transition-transform",r&&"rotate-180")})})]}),r&&un.createPortal(s.jsxs("div",{ref:h,className:"fixed z-50 bg-popover border border-border/50 rounded-xl shadow-xl overflow-hidden animate-fade-in",style:{top:v.top,left:v.left,width:Math.max(v.width,280)},children:[s.jsx("div",{className:"px-3 py-2 border-b border-border/30 bg-muted/20",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Pr,{className:"h-3 w-3"}),s.jsx("span",{children:"Type to search or enter custom value"})]})}),s.jsx("div",{className:"max-h-64 overflow-y-auto",children:x.length===0?s.jsx("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground",children:i.trim()?`No matching types. "${i}" will be used as custom type.`:"No options available"}):x.map((j,D)=>{const _=b0[j.value]||y,I=(e==null?void 0:e.toLowerCase())===j.value.toLowerCase();return s.jsxs("button",{type:"button",className:J("w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors",D===c?"bg-primary/10 text-primary":"hover:bg-accent/50"),onClick:()=>N(j.value),onMouseEnter:()=>d(D),children:[s.jsx(_,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium",children:j.label}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:j.description})]}),I&&s.jsx(vn,{className:"h-4 w-4 text-primary flex-shrink-0"})]},j.value)})}),s.jsx("div",{className:"px-3 py-2 border-t border-border/30 bg-muted/30",children:s.jsxs("p",{className:"text-xs text-muted-foreground/70",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:""})," navigate",s.jsx("span",{className:"mx-2",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Enter"})," select",s.jsx("span",{className:"mx-2",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Esc"})," close"]})})]}),document.body)]})}const Mi="Syntax Helpers",Kc="Local",k3=[{id:"dice",label:"Dice Roll",insertText:"{{dice:2d6}}",type:"syntax",source:Mi,icon:$n,description:"Roll dice (e.g., 2d6, 1d20+5)",colorClass:"amber"},{id:"math",label:"Math Expression",insertText:"{{math:1 + 2}}",type:"syntax",source:Mi,icon:$u,description:"Calculate math expressions",colorClass:"amber"},{id:"variable",label:"Variable Reference",insertText:"{{$variableName}}",type:"syntax",source:Mi,icon:Us,description:"Reference a shared variable",colorClass:"amber"},{id:"capture-shared",label:"Variable Property",insertText:"{{$varName.@property}}",type:"syntax",source:Mi,icon:Hm,description:"Access property from a shared variable",colorClass:"amber"},{id:"again",label:"Re-roll (Again)",insertText:"{{again}}",type:"syntax",source:Mi,icon:Bs,description:"Re-roll the previous value",colorClass:"amber"}];function Cm({localTables:e,localTemplates:t,importedTables:n=[],importedTemplates:r=[],onInsert:a,buttonClassName:i,onOpenChange:o}){const[c,d]=w.useState(!1),p=w.useCallback(E=>{d(E),o==null||o(E)},[o]),[h,m]=w.useState(""),[v,g]=w.useState("tables"),[x,y]=w.useState(0),k=w.useRef(null),N=w.useRef(null),C=w.useRef(null),[T,j]=w.useState({top:0,left:0}),D=w.useMemo(()=>{const E=e.map(K=>({id:`table-${K.id}`,label:K.id,insertText:`{{${K.id}}}`,type:"table",source:Kc,icon:K.resultType?tr(K.resultType):rr,description:K.name!==K.id?K.name:void 0,colorClass:"mint"})),L=t.map(K=>({id:`template-${K.id}`,label:K.id,insertText:`{{${K.id}}}`,type:"template",source:Kc,icon:K.resultType?tr(K.resultType):Vn,description:K.name!==K.id?K.name:void 0,colorClass:"lavender"})),Z=n.map(K=>({id:`imported-table-${K.alias}-${K.id}`,label:`${K.alias}.${K.id}`,insertText:`{{${K.alias}.${K.id}}}`,type:"table",source:K.sourceCollectionName,icon:K.resultType?tr(K.resultType):rr,description:K.name!==K.id?K.name:void 0,colorClass:"mint"})),X=r.map(K=>({id:`imported-template-${K.alias}-${K.id}`,label:`${K.alias}.${K.id}`,insertText:`{{${K.alias}.${K.id}}}`,type:"template",source:K.sourceCollectionName,icon:K.resultType?tr(K.resultType):Vn,description:K.name!==K.id?K.name:void 0,colorClass:"lavender"}));return[...E,...L,...Z,...X,...k3]},[e,t,n,r]),_=w.useMemo(()=>{const E={tables:"table",templates:"template",syntax:"syntax"};let L=D.filter(Z=>Z.type===E[v]);if(h.trim()){const Z=h.toLowerCase();L=L.filter(X=>{var K;return X.label.toLowerCase().includes(Z)||((K=X.description)==null?void 0:K.toLowerCase().includes(Z))||X.source.toLowerCase().includes(Z)})}return L},[D,v,h]),I=w.useMemo(()=>{const E={};return _.forEach(Z=>{E[Z.source]||(E[Z.source]=[]),E[Z.source].push(Z)}),Object.entries(E).sort(([Z],[X])=>Z===Kc?-1:X===Kc||Z===Mi?1:X===Mi?-1:Z.localeCompare(X))},[_]),R=w.useMemo(()=>({tables:D.filter(E=>E.type==="table").length,templates:D.filter(E=>E.type==="template").length,syntax:D.filter(E=>E.type==="syntax").length}),[D]);w.useEffect(()=>{if(c&&k.current){const E=k.current.getBoundingClientRect(),L=384,Z=360,X=4,K=8;let ee=E.left;E.left+L>window.innerWidth-K&&(ee=E.right-L),ee=Math.max(K,ee);let U=E.bottom+X;E.bottom+Z>window.innerHeight-K&&(U=E.top-Z-X),U=Math.max(K,U),j({top:U,left:ee}),setTimeout(()=>{var M;return(M=C.current)==null?void 0:M.focus()},0)}},[c]),w.useEffect(()=>{c||(m(""),g("tables"),y(0))},[c]),w.useEffect(()=>{y(0)},[v,h]),w.useEffect(()=>{const E=L=>{N.current&&!N.current.contains(L.target)&&k.current&&!k.current.contains(L.target)&&p(!1)};if(c)return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[c]);const z=w.useCallback(E=>{switch(E.key){case"ArrowDown":E.preventDefault(),y(L=>Math.min(L+1,_.length-1));break;case"ArrowUp":E.preventDefault(),y(L=>Math.max(L-1,0));break;case"Enter":E.preventDefault(),_[x]&&(a(_[x].insertText),p(!1));break;case"Escape":E.preventDefault(),p(!1);break;case"Tab":{E.preventDefault();const L=["tables","templates","syntax"],Z=L.indexOf(v),X=E.shiftKey?(Z-1+L.length)%L.length:(Z+1)%L.length;g(L[X]);break}}},[_,x,a,v]),P=w.useCallback(E=>{a(E.insertText),p(!1)},[a]),q=(E,L)=>{if(!L)return"hover:bg-accent/50";switch(E){case"mint":return"bg-mint/10 text-mint";case"lavender":return"bg-lavender/10 text-lavender";case"amber":return"bg-amber/10 text-amber";default:return"bg-primary/10 text-primary"}},$=E=>{switch(E){case"mint":return"text-mint";case"lavender":return"text-lavender";case"amber":return"text-amber";default:return"text-muted-foreground"}},G=()=>{let E=0;return I.map(([L,Z])=>s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold uppercase tracking-wider text-muted-foreground bg-muted sticky top-0 z-10",children:L}),Z.map(X=>{const K=X.icon,ee=E++,U=ee===x;return s.jsxs("button",{className:J("w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors",q(X.colorClass,U)),onClick:()=>P(X),onMouseEnter:()=>y(ee),children:[s.jsx(K,{className:J("h-4 w-4 flex-shrink-0",$(X.colorClass))}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:X.label}),X.description&&s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:X.description})]}),s.jsx("code",{className:"text-xs text-muted-foreground/60 font-mono truncate max-w-[100px]",children:X.insertText})]},X.id)})]},L))};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{ref:k,type:"button",onClick:()=>p(!c),className:J("flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-lg border transition-colors","bg-primary/10 border-primary/30 text-primary hover:bg-primary/20 hover:border-primary/50",c&&"bg-primary/20 border-primary/50",i),title:"Insert table or syntax reference",children:[s.jsx(nr,{className:"h-3.5 w-3.5"}),"Insert"]}),c&&un.createPortal(s.jsxs("div",{ref:N,className:"fixed z-50 w-96 bg-popover border border-border/50 rounded-xl shadow-xl overflow-hidden animate-fade-in",style:{top:T.top,left:T.left},onKeyDown:z,children:[s.jsxs("div",{className:"flex border-b border-border/30",children:[s.jsxs("button",{type:"button",onClick:()=>g("tables"),className:J("flex-1 min-w-0 px-2 py-2 text-sm font-medium transition-colors relative",v==="tables"?"text-mint":"text-muted-foreground hover:text-foreground"),children:[s.jsxs("span",{className:"flex items-center justify-center gap-1",children:[s.jsx(rr,{className:"h-3.5 w-3.5 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Tables"}),s.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",R.tables,")"]})]}),v==="tables"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-mint"})]}),s.jsxs("button",{type:"button",onClick:()=>g("templates"),className:J("flex-1 min-w-0 px-2 py-2 text-sm font-medium transition-colors relative",v==="templates"?"text-lavender":"text-muted-foreground hover:text-foreground"),children:[s.jsxs("span",{className:"flex items-center justify-center gap-1",children:[s.jsx(Vn,{className:"h-3.5 w-3.5 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Templates"}),s.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",R.templates,")"]})]}),v==="templates"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-lavender"})]}),s.jsxs("button",{type:"button",onClick:()=>g("syntax"),className:J("flex-1 min-w-0 px-2 py-2 text-sm font-medium transition-colors relative",v==="syntax"?"text-amber":"text-muted-foreground hover:text-foreground"),children:[s.jsxs("span",{className:"flex items-center justify-center gap-1",children:[s.jsx($n,{className:"h-3.5 w-3.5 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:"Syntax"})]}),v==="syntax"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-amber"})]})]}),s.jsx("div",{className:"p-2 border-b border-border/30",children:s.jsxs("div",{className:"relative",children:[s.jsx(Pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx("input",{ref:C,type:"text",value:h,onChange:E=>m(E.target.value),placeholder:`Search ${v}...`,className:"w-full pl-9 pr-3 py-2 text-sm bg-background border border-border/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50"})]})}),s.jsx("div",{className:"max-h-64 overflow-y-auto",children:_.length===0?s.jsxs("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground",children:["No ",v," found"]}):G()}),s.jsx("div",{className:"px-3 py-2 border-t border-border/30 bg-muted/30",children:s.jsxs("p",{className:"text-xs text-muted-foreground/70",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:""})," navigate",s.jsx("span",{className:"mx-2",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Tab"})," switch",s.jsx("span",{className:"mx-2",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Enter"})," insert"]})})]}),document.body)]})}function Tw(e,t,n,r,a,i){if(!e||!e.includes("{{"))return"property";try{const o=Uu(e),c=new Set;for(const d of o)if(d.type!=="literal")switch(d.type){case"table":case"multiRoll":case"captureMultiRoll":case"instance":const p=d.tableId;t.has(p)?c.add("template"):(n.has(p),c.add("table"));break;case"variable":case"captureAccess":case"collect":c.add("variable");break;case"dice":case"math":c.add("dice");break;case"placeholder":c.add("property");break;case"switch":c.add("switch");break;case"again":c.add("table");break}return c.delete("none"),c.size===0?"property":c.size===1?Array.from(c)[0]:c.has("switch")?"switch":"mixed"}catch{return"property"}}function ik(e,t,n){if(!n)return;const r=n.get(e);if(r){if(r.defaultSets&&t in r.defaultSets)return r.defaultSets[t];if(r.type==="simple"&&r.entries.length>0){const a=r.entries[0];if(a.sets&&t in a.sets)return a.sets[t]}}}function N3(e,t,n,r,a){if(!n)return;const i=n[e]||n[e.replace(/^\$/,"")];if(i)try{const o=Uu(i);for(const c of o)if(c.type==="table"||c.type==="instance")return ik(c.tableId,t,r)}catch{}}function C3(e,t,n,r,a,i,o){if(!e||!e.includes("{{"))return"none";try{const c=Uu(e),d=new Set;for(const p of c)if(p.type!=="literal")switch(p.type){case"table":case"multiRoll":case"captureMultiRoll":case"instance":{const h=p.tableId,m=e.match(new RegExp(`\\{\\{${h}\\.@(\\w+)\\}\\}`));if(m){const v=m[1],g=ik(h,v,a);if(g!==void 0){const x=Tw(g,t,n,a,i,o);d.add(x);break}}t.has(h)?d.add("template"):(n.has(h),d.add("table"));break}case"variable":{const h=p.name,m=e.match(new RegExp(`\\{\\{\\$${h}\\.@(\\w+)\\}\\}`));if(m){const v=m[1],g=N3(h,v,o,a,i);if(g!==void 0){const x=Tw(g,t,n,a,i,o);d.add(x);break}}d.add("variable");break}case"captureAccess":{d.add("variable");break}case"collect":d.add("variable");break;case"dice":case"math":d.add("dice");break;case"placeholder":d.add("property");break;case"switch":d.add("switch");break;case"again":d.add("table");break}return d.delete("none"),d.size===0?"none":d.size===1?Array.from(d)[0]:d.has("switch")?"switch":"mixed"}catch{return"none"}}const S3={template:"hsl(var(--lavender))",table:"hsl(var(--mint))",variable:"hsl(var(--pink))",dice:"hsl(var(--amber))",property:"hsl(var(--cyan))",switch:"rgb(168, 85, 247)",mixed:"hsl(var(--copper))",none:null};function E3(e){const t=S3[e];return t?{borderLeftWidth:"4px",borderLeftStyle:"solid",borderLeftColor:t,"--focus-color":t}:{}}function Wi({value:e,onChange:t,keyPlaceholder:n="Key",valuePlaceholder:r="Value",keyPattern:a,keyError:i,valueSupportsExpressions:o,collectionId:c,showInsertButton:d,localTables:p=[],localTemplates:h=[],importedTables:m=[],importedTemplates:v=[],suggestions:g,tableMap:x,templateMap:y,sharedVariables:k}){const N=Object.entries(e),[C,T]=w.useState(""),[j,D]=w.useState(""),[_,I]=w.useState(null),R=w.useRef(null),z=w.useRef(null),[P,q]=w.useState(null),[$,G]=w.useState(""),[E,L]=w.useState(null),[Z,X]=w.useState(!1),[K,ee]=w.useState(null),[U,M]=w.useState(!1),F=w.useRef(new Map),B=d&&(p.length>0||h.length>0||m.length>0||v.length>0),le=w.useMemo(()=>{const te=new Set;for(const V of h)te.add(V.id);for(const V of v)te.add(V.id);return te},[h,v]),pe=w.useMemo(()=>{const te=new Set;for(const V of p)te.add(V.id);for(const V of m)te.add(V.id);return te},[p,m]),de=w.useMemo(()=>{const te=new Set;for(const V of Object.keys(e))te.add(V);if(k)for(const V of Object.keys(k))te.add(V);return te},[e,k]),je=w.useMemo(()=>{const te={};for(const[V,W]of Object.entries(e))te[V]=C3(W,le,pe,de,x,y,k);return te},[e,le,pe,de,x,y,k]),ye=w.useCallback(te=>a?new RegExp(a).test(te):!0,[a]),Te=w.useCallback(()=>{const te=C.trim();if(te){if(!ye(te)){I(i||"Invalid key format");return}if(e[te]!==void 0){I("Key already exists");return}t({...e,[te]:j}),T(""),D(""),I(null),setTimeout(()=>{var V;return(V=R.current)==null?void 0:V.focus()},0)}},[e,t,C,j,ye,i]),Ie=w.useCallback(te=>{const V={...e};delete V[te],t(V)},[e,t]),ve=w.useCallback((te,V)=>{t({...e,[te]:V})},[e,t]),qe=w.useCallback((te,V,W)=>{const se=W.trim();if(q(null),G(""),!se||se===V||!ye(se)||e[se]!==void 0)return;const ke={};for(const[Se,ue]of Object.entries(e))Se===V?ke[se]=ue:ke[Se]=ue;t(ke)},[e,t,ye]),st=w.useCallback((te,V)=>{q(te),G(V)},[]),O=w.useCallback((te,V,W)=>{const se=F.current.get(te);se&&se.insertAtCursor(W)},[]),xe=w.useCallback(te=>{const V=z.current;V&&V.insertAtCursor(te)},[]);return s.jsxs("div",{className:"space-y-3",children:[N.length===0&&s.jsx("div",{className:"text-base md:text-sm text-muted-foreground text-center py-6 md:py-4 border-2 border-dashed rounded-xl md:rounded-lg",children:"No variables defined. Add one below."}),N.map(([te,V],W)=>{const ke=P===W?$:te,Se=E3(je[te]||"none");return s.jsxs("div",{className:"editor-entry-row flex-col md:flex-row items-stretch md:items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block md:hidden text-sm font-medium mb-1.5 text-muted-foreground",children:"Key"}),s.jsx("input",{type:"text",value:ke,onFocus:()=>st(W,te),onChange:ue=>G(ue.target.value),onBlur:()=>qe(W,te,$),onKeyDown:ue=>{ue.key==="Enter"?ue.currentTarget.blur():ue.key==="Escape"&&(q(null),G(""))},className:"editor-input text-base md:text-sm font-mono min-h-[48px] md:min-h-0",style:Se,placeholder:n})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("label",{className:"block md:hidden text-sm font-medium text-muted-foreground mb-1.5",children:"Value"}),s.jsxs("div",{className:"relative",children:[s.jsx(Cu,{ref:ue=>{ue?F.current.set(W,ue):F.current.delete(W)},value:V,onChange:ue=>ve(te,ue),onFocus:()=>L(W),onBlur:()=>{setTimeout(()=>L(ue=>ue===W?null:ue),150)},className:J("editor-input text-base md:text-sm min-h-[48px] md:min-h-0 w-full",B&&"pr-10"),placeholder:r,suggestions:g,tableMap:x,templateMap:y,sharedVariables:k}),B&&(E===W||K===W)&&s.jsx("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 z-10",children:s.jsx(Cm,{localTables:p,localTemplates:h,importedTables:m,importedTemplates:v,onInsert:ue=>O(W,te,ue),buttonClassName:"!px-1.5 !py-1 !text-[10px] bg-primary/20 hover:bg-primary/30",onOpenChange:ue=>ee(ue?W:null)})})]}),o&&(V==null?void 0:V.includes("{{"))&&s.jsx(D3,{value:V,collectionId:c,templateIds:le})]}),s.jsx("button",{type:"button",onClick:()=>Ie(te),className:"p-3 md:p-2 hover:bg-destructive/10 hover:text-destructive rounded-xl md:rounded-lg transition-colors self-end md:self-auto min-w-[48px] min-h-[48px] md:min-w-0 md:min-h-0 flex items-center justify-center",title:"Delete variable",children:s.jsx(ar,{className:"h-5 w-5 md:h-4 md:w-4"})})]},W)}),s.jsxs("div",{className:"pt-3 md:pt-2 border-t border-border/50 space-y-3 md:space-y-2",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-2 items-stretch md:items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block md:hidden text-sm font-medium mb-1.5 text-muted-foreground",children:"New Key"}),s.jsx("input",{ref:R,type:"text",value:C,onChange:te=>{T(te.target.value),I(null)},onKeyDown:te=>te.key==="Enter"&&Te(),className:"editor-input text-base md:text-sm font-mono min-h-[48px] md:min-h-0",placeholder:n})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block md:hidden text-sm font-medium text-muted-foreground mb-1.5",children:"New Value"}),s.jsxs("div",{className:"relative",children:[s.jsx(Cu,{ref:z,value:j,onChange:D,onFocus:()=>X(!0),onBlur:()=>{setTimeout(()=>X(!1),150)},onKeyDown:te=>te.key==="Enter"&&Te(),className:J("editor-input text-base md:text-sm min-h-[48px] md:min-h-0 w-full",B&&"pr-10"),placeholder:r,suggestions:g,tableMap:x,templateMap:y,sharedVariables:k}),B&&(Z||U)&&s.jsx("div",{className:"absolute right-1 top-1/2 -translate-y-1/2 z-10",children:s.jsx(Cm,{localTables:p,localTemplates:h,importedTables:m,importedTemplates:v,onInsert:xe,buttonClassName:"!px-1.5 !py-1 !text-[10px] bg-primary/20 hover:bg-primary/30",onOpenChange:M})})]})]}),s.jsxs("button",{type:"button",onClick:Te,disabled:!C.trim(),className:"editor-input-btn flex items-center justify-center gap-2 md:gap-1.5 px-4 md:px-3 py-3 md:py-2 text-base md:text-sm rounded-xl md:rounded-lg min-h-[48px] md:min-h-0 self-end md:self-auto disabled:opacity-50",children:[s.jsx(nr,{className:"h-5 w-5 md:h-4 md:w-4"}),"Add"]})]}),_&&s.jsx("p",{className:"text-sm md:text-xs text-destructive",children:_})]}),o&&s.jsx("div",{className:"text-sm md:text-xs text-muted-foreground p-4 md:p-3 bg-muted/30 rounded-xl md:rounded-lg",children:s.jsxs("p",{children:[s.jsx("strong",{children:"Tip:"})," Shared variables support expressions like"," ",s.jsx("code",{className:"px-1.5 md:px-1 py-0.5 bg-muted rounded",children:"{{dice:2d6}}"}),","," ",s.jsx("code",{className:"px-1.5 md:px-1 py-0.5 bg-muted rounded",children:"{{math:$var + 5}}"}),", or table references. They're evaluated in order, so later variables can reference earlier ones. Access properties with"," ",s.jsx("code",{className:"px-1.5 md:px-1 py-0.5 bg-muted rounded",children:"{{$varName.@property}}"}),"."]})})]})}function T3(e,t){if(e===t)return!0;if(!e||!t)return e===t;if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const D3=w.memo(function({value:t,collectionId:n,templateIds:r}){const{result:a,reroll:i,isEvaluating:o}=_f(t,n,{enableTrace:!1,debounceMs:300,templateIds:r});if(!n)return s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Expression detected (save to preview)"});const c=o?"...":a!=null&&a.error?a.error:(a==null?void 0:a.fullText)||"...",d=(a==null?void 0:a.error)!=null;return s.jsxs("div",{className:"flex items-center gap-1.5 mt-1 overflow-hidden",children:[s.jsxs("span",{className:J("text-xs truncate",d?"text-destructive":"text-muted-foreground"),title:c,children:[" ",c]}),s.jsx("button",{type:"button",onClick:p=>{p.preventDefault(),i()},className:"p-0.5 rounded hover:bg-accent transition-colors flex-shrink-0",title:"Re-roll expression",children:s.jsx(Qm,{className:J("w-3 h-3 text-muted-foreground",o&&"animate-spin")})})]})},(e,t)=>e.value===t.value&&e.collectionId===t.collectionId&&T3(e.templateIds,t.templateIds));function j3({entry:e,onChange:t,onDelete:n,onAddEntry:r,onClone:a,index:i,isDragging:o,canDelete:c=!0,collectionId:d,autoFocus:p=!1,defaultExpanded:h=!1,isCloned:m=!1,localTables:v=[],localTemplates:g=[],importedTables:x=[],importedTemplates:y=[],suggestions:k,tableMap:N,templateMap:C,sharedVariables:T}){var U,M,F,B,le,pe;const[j,D]=w.useState(h),[_,I]=w.useState(!1),[R,z]=w.useState(e.range?"range":"weight"),P=w.useRef(null),q=w.useRef(null);w.useEffect(()=>{h===!0?D(!0):h===!1&&D(!1)},[h]),w.useEffect(()=>{if(p){const de=setTimeout(()=>{const ye=window.innerWidth<768?q.current:P.current;ye==null||ye.focus()},0);return()=>clearTimeout(de)}},[p]);const $=w.useMemo(()=>Zr(e.value).length>0,[e.value]),G=w.useMemo(()=>{if(!(!C||C.size===0))return new Set(C.keys())},[C]),{result:E,reroll:L}=_f(_?e.value:"",d,{enableTrace:!1,debounceMs:200,templateIds:G}),Z=w.useCallback((de,je)=>{const ye={...e,[de]:je};(je===void 0||je==="")&&delete ye[de],t(ye)},[e,t]),X=w.useCallback(de=>{if(z(de),de==="weight"){const je={...e};delete je.range,je.weight=1,t(je)}else{const je={...e};delete je.weight,je.range=[1,1],t(je)}},[e,t]),K=w.useCallback((de,je)=>{const ye=[...e.range||[1,1]];ye[de]=je,Z("range",ye)},[e.range,Z]),ee=w.useCallback(de=>{de.key==="Enter"&&e.value.trim()&&r&&(de.preventDefault(),r())},[e.value,r]);return s.jsxs("div",{className:J("border rounded-xl md:rounded-lg transition-all duration-300","md:border md:rounded-lg",o&&"shadow-lg bg-background",m&&"animate-clone-highlight"),children:[s.jsxs("div",{className:"hidden md:flex items-center gap-2 p-3",children:[s.jsx("button",{type:"button",onClick:()=>D(!j),className:"p-1 hover:bg-accent rounded",children:j?s.jsx(En,{className:"h-4 w-4"}):s.jsx(sn,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:["#",i+1]}),s.jsx(Cu,{ref:P,value:e.value,onChange:de=>Z("value",de),onKeyDown:ee,placeholder:"Entry value (supports {{...}} templates)",wrapperClassName:"flex-1 min-w-0",className:"w-full p-2 border rounded-md bg-background text-sm",suggestions:k,tableMap:N,templateMap:C,sharedVariables:T}),s.jsxs("div",{className:"flex items-center gap-2",children:[R==="weight"?s.jsx("input",{type:"number",value:e.weight??1,onChange:de=>Z("weight",de.target.value?parseFloat(de.target.value):1),min:0,step:.1,className:"w-16 p-2 border rounded-md bg-background text-sm text-center",title:"Weight"}):s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"number",value:((U=e.range)==null?void 0:U[0])??1,onChange:de=>K(0,parseInt(de.target.value,10)||1),min:1,className:"w-12 p-2 border rounded-md bg-background text-sm text-center",title:"Range start"}),s.jsx("span",{className:"text-muted-foreground",children:"-"}),s.jsx("input",{type:"number",value:((M=e.range)==null?void 0:M[1])??1,onChange:de=>K(1,parseInt(de.target.value,10)||1),min:((F=e.range)==null?void 0:F[0])??1,className:"w-12 p-2 border rounded-md bg-background text-sm text-center",title:"Range end"})]}),$&&d&&s.jsx("button",{type:"button",onClick:()=>I(!_),className:J("p-2 rounded transition-colors",_?"bg-primary/10 text-primary":"hover:bg-accent text-muted-foreground"),title:_?"Hide preview":"Show preview",children:_?s.jsx(li,{className:"h-4 w-4"}):s.jsx(Qh,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",onClick:n,disabled:!c,className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent disabled:hover:text-current",title:c?"Delete entry":"Cannot delete the last entry",children:s.jsx(ar,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"md:hidden mobile-entry-card",children:[s.jsxs("div",{className:"mobile-entry-header",children:[s.jsx("button",{type:"button",onClick:()=>D(!j),className:"mobile-action-btn -ml-2",children:j?s.jsx(En,{className:"h-5 w-5"}):s.jsx(sn,{className:"h-5 w-5"})}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["#",i+1]}),s.jsx("div",{className:"flex-1"}),s.jsx("button",{type:"button",onClick:n,disabled:!c,className:"mobile-action-btn text-muted-foreground disabled:opacity-30",children:s.jsx(ar,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mobile-entry-content",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:"Value"}),s.jsx(Cu,{ref:q,value:e.value,onChange:de=>Z("value",de),onKeyDown:ee,placeholder:"Entry value (supports {{...}} templates)",className:"w-full p-3 border rounded-xl bg-background text-base min-h-[48px]",suggestions:k,tableMap:N,templateMap:C,sharedVariables:T})]}),s.jsxs("div",{className:"flex gap-3",children:[R==="weight"?s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:"Weight"}),s.jsx("input",{type:"number",value:e.weight??1,onChange:de=>Z("weight",de.target.value?parseFloat(de.target.value):1),min:0,step:.1,className:"w-full p-3 border rounded-xl bg-background text-base text-center min-h-[48px]"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:"From"}),s.jsx("input",{type:"number",value:((B=e.range)==null?void 0:B[0])??1,onChange:de=>K(0,parseInt(de.target.value,10)||1),min:1,className:"w-full p-3 border rounded-xl bg-background text-base text-center min-h-[48px]"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-muted-foreground mb-1.5",children:"To"}),s.jsx("input",{type:"number",value:((le=e.range)==null?void 0:le[1])??1,onChange:de=>K(1,parseInt(de.target.value,10)||1),min:((pe=e.range)==null?void 0:pe[0])??1,className:"w-full p-3 border rounded-xl bg-background text-base text-center min-h-[48px]"})]})]}),$&&d&&s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"button",onClick:()=>I(!_),className:J("p-3 rounded-xl transition-colors min-w-[48px] min-h-[48px] flex items-center justify-center",_?"bg-primary/10 text-primary":"bg-muted/50 text-muted-foreground"),children:_?s.jsx(li,{className:"h-5 w-5"}):s.jsx(Qh,{className:"h-5 w-5"})})})]})]})]}),_&&(E==null?void 0:E.segments)&&E.segments.length>0&&s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded border border-border/50",children:[s.jsx("div",{className:"flex-1 text-sm",children:s.jsx(tk,{segments:E.segments})}),s.jsx("button",{type:"button",onClick:L,className:"p-1 hover:bg-accent rounded text-muted-foreground hover:text-foreground transition-colors",title:"Re-roll",children:s.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})}),j&&s.jsxs("div",{className:"border-t p-4 space-y-4 bg-muted/30",children:[a&&s.jsx("div",{className:"flex justify-end -mt-1 -mb-2",children:s.jsxs("button",{type:"button",onClick:a,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-muted-foreground hover:text-foreground hover:bg-accent rounded-md transition-colors",title:"Clone entry",children:[s.jsx(vl,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Clone"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Entry ID"}),s.jsx("input",{type:"text",value:e.id||"",onChange:de=>Z("id",de.target.value||void 0),placeholder:"Auto-generated if empty",className:"w-full p-2 border rounded-md bg-background text-sm"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Required for inheritance overrides"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Weight Mode"}),s.jsxs("div",{className:"flex border rounded-md overflow-hidden",children:[s.jsx("button",{type:"button",onClick:()=>X("weight"),className:J("flex-1 px-3 py-2 text-sm transition-colors",R==="weight"?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Weight"}),s.jsx("button",{type:"button",onClick:()=>X("range"),className:J("flex-1 px-3 py-2 text-sm transition-colors",R==="range"?"bg-primary text-primary-foreground":"hover:bg-accent"),children:"Range"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx(ak,{pattern:e.description||"",onChange:de=>Z("description",de||void 0),collectionId:d,placeholder:"Optional description (Markdown and patterns supported)",minHeight:60,hidePreviewWhenEmpty:!0,hideLabel:!0,suggestions:k,tableMap:N,templateMap:C,autocompleteSharedVariables:T})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Result Type"}),s.jsx(Rf,{value:e.resultType,onChange:de=>Z("resultType",de),placeholder:"Override table type..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sets (Placeholder Values)"}),s.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Use ","{{pattern}}"," syntax for dynamic values (e.g., ","{{dice:1d6}}",", ","{{tableName}}",")"]}),s.jsx(Wi,{value:e.sets||{},onChange:de=>Z("sets",Object.keys(de).length>0?de:void 0),keyPlaceholder:"Key (@key)",valuePlaceholder:"Value or {{pattern}}",valueSupportsExpressions:!0,collectionId:d,showInsertButton:!0,localTables:v,localTemplates:g,importedTables:x,importedTemplates:y,suggestions:k,tableMap:N,templateMap:C,sharedVariables:T})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Assets"}),s.jsx(Wi,{value:e.assets||{},onChange:de=>Z("assets",Object.keys(de).length>0?de:void 0),keyPlaceholder:"Type (image, token, etc.)",valuePlaceholder:"Path or URL"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tags"}),s.jsx(A3,{value:e.tags||[],onChange:de=>Z("tags",de.length>0?de:void 0)})]})]})]})}function A3({value:e,onChange:t}){const[n,r]=w.useState(""),a=w.useCallback(o=>{const c=o.trim().toLowerCase();c&&!e.includes(c)&&t([...e,c]),r("")},[e,t]),i=w.useCallback(o=>{t(e.filter((c,d)=>d!==o))},[e,t]);return s.jsx("div",{className:"border rounded-md bg-background p-2",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((o,c)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-sm bg-primary/10 text-primary rounded-full",children:[o,s.jsx("button",{type:"button",onClick:()=>i(c),className:"hover:bg-primary/20 rounded-full p-0.5",children:s.jsx(Ut,{className:"h-3 w-3"})})]},o)),s.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),a(n)):o.key==="Backspace"&&!n&&e.length>0&&i(e.length-1)},onBlur:()=>n&&a(n),placeholder:e.length===0?"Add tags...":"",className:"flex-1 min-w-[100px] bg-transparent outline-none text-sm"})]})})}function _3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const Zu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function If(e){return"nodeType"in e}function gr(e){var t,n;return e?Vs(e)?e:If(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function $f(e){const{Document:t}=gr(e);return e instanceof t}function Dl(e){return Vs(e)?!1:e instanceof gr(e).HTMLElement}function sk(e){return e instanceof gr(e).SVGElement}function Gs(e){return e?Vs(e)?e.document:If(e)?$f(e)?e:Dl(e)||sk(e)?e.ownerDocument:document:document:document}const da=Zu?w.useLayoutEffect:w.useEffect;function Mf(e){const t=w.useRef(e);return da(()=>{t.current=e}),w.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function R3(){const e=w.useRef(null),t=w.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ul(e,t){t===void 0&&(t=[e]);const n=w.useRef(e);return da(()=>{n.current!==e&&(n.current=e)},t),n}function jl(e,t){const n=w.useRef();return w.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Su(e){const t=Mf(e),n=w.useRef(null),r=w.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function Sm(e){const t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}let Th={};function Al(e,t){return w.useMemo(()=>{if(t)return t;const n=Th[e]==null?0:Th[e]+1;return Th[e]=n,e+"-"+n},[e,t])}function ok(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const c=Object.entries(o);for(const[d,p]of c){const h=i[d];h!=null&&(i[d]=h+e*p)}return i},{...t})}}const $s=ok(1),dl=ok(-1);function I3(e){return"clientX"in e&&"clientY"in e}function Ff(e){if(!e)return!1;const{KeyboardEvent:t}=gr(e.target);return t&&e instanceof t}function $3(e){if(!e)return!1;const{TouchEvent:t}=gr(e.target);return t&&e instanceof t}function Em(e){if($3(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return I3(e)?{x:e.clientX,y:e.clientY}:null}const pl=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[pl.Translate.toString(e),pl.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Dw="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function M3(e){return e.matches(Dw)?e:e.querySelector(Dw)}const F3={display:"none"};function O3(e){let{id:t,value:n}=e;return Ot.createElement("div",{id:t,style:F3},n)}function P3(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ot.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function L3(){const[e,t]=w.useState("");return{announce:w.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const lk=w.createContext(null);function z3(e){const t=w.useContext(lk);w.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function B3(){const[e]=w.useState(()=>new Set),t=w.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[w.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[e]),t]}const U3={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},H3={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function q3(e){let{announcements:t=H3,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=U3}=e;const{announce:i,announcement:o}=L3(),c=Al("DndLiveRegion"),[d,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),z3(w.useMemo(()=>({onDragStart(m){let{active:v}=m;i(t.onDragStart({active:v}))},onDragMove(m){let{active:v,over:g}=m;t.onDragMove&&i(t.onDragMove({active:v,over:g}))},onDragOver(m){let{active:v,over:g}=m;i(t.onDragOver({active:v,over:g}))},onDragEnd(m){let{active:v,over:g}=m;i(t.onDragEnd({active:v,over:g}))},onDragCancel(m){let{active:v,over:g}=m;i(t.onDragCancel({active:v,over:g}))}}),[i,t])),!d)return null;const h=Ot.createElement(Ot.Fragment,null,Ot.createElement(O3,{id:r,value:a.draggable}),Ot.createElement(P3,{id:c,announcement:o}));return n?un.createPortal(h,n):h}var Sn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Sn||(Sn={}));function Eu(){}function jw(e,t){return w.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function W3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Xr=Object.freeze({x:0,y:0});function ck(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function uk(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function V3(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Aw(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function dk(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function _w(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const G3=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=_w(t,t.left,t.top),i=[];for(const o of r){const{id:c}=o,d=n.get(c);if(d){const p=ck(_w(d),a);i.push({id:c,data:{droppableContainer:o,value:p}})}}return i.sort(uk)},K3=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Aw(t),i=[];for(const o of r){const{id:c}=o,d=n.get(c);if(d){const p=Aw(d),h=a.reduce((v,g,x)=>v+ck(p[x],g),0),m=Number((h/4).toFixed(4));i.push({id:c,data:{droppableContainer:o,value:m}})}}return i.sort(uk)};function Y3(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,c=i-n;if(r<a&&n<i){const d=t.width*t.height,p=e.width*e.height,h=o*c,m=h/(d+p-h);return Number(m.toFixed(4))}return 0}const Z3=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,c=n.get(o);if(c){const d=Y3(c,t);d>0&&a.push({id:o,data:{droppableContainer:i,value:d}})}}return a.sort(V3)};function Q3(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function pk(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Xr}function J3(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+e*c.y,bottom:o.bottom+e*c.y,left:o.left+e*c.x,right:o.right+e*c.x}),{...n})}}const X3=J3(1);function e4(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function t4(e,t,n){const r=e4(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:c}=r,d=e.left-o-(1-a)*parseFloat(n),p=e.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=a?e.width/a:e.width,m=i?e.height/i:e.height;return{width:h,height:m,top:p,right:d+h,bottom:p+m,left:d}}const n4={ignoreTransform:!1};function Ks(e,t){t===void 0&&(t=n4);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:h}=gr(e).getComputedStyle(e);p&&(n=t4(n,p,h))}const{top:r,left:a,width:i,height:o,bottom:c,right:d}=n;return{top:r,left:a,width:i,height:o,bottom:c,right:d}}function Rw(e){return Ks(e,{ignoreTransform:!0})}function r4(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function a4(e,t){return t===void 0&&(t=gr(e).getComputedStyle(e)),t.position==="fixed"}function i4(e,t){t===void 0&&(t=gr(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function Qu(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if($f(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Dl(a)||sk(a)||n.includes(a))return n;const i=gr(e).getComputedStyle(a);return a!==e&&i4(a,i)&&n.push(a),a4(a,i)?n:r(a.parentNode)}return e?r(e):n}function hk(e){const[t]=Qu(e,1);return t??null}function Dh(e){return!Zu||!e?null:Vs(e)?e:If(e)?$f(e)||e===Gs(e).scrollingElement?window:Dl(e)?e:null:null}function mk(e){return Vs(e)?e.scrollX:e.scrollLeft}function fk(e){return Vs(e)?e.scrollY:e.scrollTop}function Tm(e){return{x:mk(e),y:fk(e)}}var In;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(In||(In={}));function gk(e){return!Zu||!e?!1:e===document.scrollingElement}function vk(e){const t={x:0,y:0},n=gk(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:r,minScroll:t}}const s4={x:.2,y:.2};function o4(e,t,n,r,a){let{top:i,left:o,right:c,bottom:d}=n;r===void 0&&(r=10),a===void 0&&(a=s4);const{isTop:p,isBottom:h,isLeft:m,isRight:v}=vk(e),g={x:0,y:0},x={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!p&&i<=t.top+y.height?(g.y=In.Backward,x.y=r*Math.abs((t.top+y.height-i)/y.height)):!h&&d>=t.bottom-y.height&&(g.y=In.Forward,x.y=r*Math.abs((t.bottom-y.height-d)/y.height)),!v&&c>=t.right-y.width?(g.x=In.Forward,x.x=r*Math.abs((t.right-y.width-c)/y.width)):!m&&o<=t.left+y.width&&(g.x=In.Backward,x.x=r*Math.abs((t.left+y.width-o)/y.width)),{direction:g,speed:x}}function l4(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function yk(e){return e.reduce((t,n)=>$s(t,Tm(n)),Xr)}function c4(e){return e.reduce((t,n)=>t+mk(n),0)}function u4(e){return e.reduce((t,n)=>t+fk(n),0)}function d4(e,t){if(t===void 0&&(t=Ks),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);hk(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const p4=[["x",["left","right"],c4],["y",["top","bottom"],u4]];class Of{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Qu(n),a=yk(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,c]of p4)for(const d of o)Object.defineProperty(this,d,{get:()=>{const p=c(r),h=a[i]-p;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function h4(e){const{EventTarget:t}=gr(e);return e instanceof t?e:Gs(e)}function jh(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Mr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Mr||(Mr={}));function Iw(e){e.preventDefault()}function m4(e){e.stopPropagation()}var _t;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(_t||(_t={}));const bk={start:[_t.Space,_t.Enter],cancel:[_t.Esc],end:[_t.Space,_t.Enter,_t.Tab]},f4=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case _t.Right:return{...n,x:n.x+25};case _t.Left:return{...n,x:n.x-25};case _t.Down:return{...n,y:n.y+25};case _t.Up:return{...n,y:n.y-25}}};class Pf{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Qo(Gs(n)),this.windowListeners=new Qo(gr(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mr.Resize,this.handleCancel),this.windowListeners.add(Mr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Mr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&d4(r),n(Xr)}handleKeyDown(t){if(Ff(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=bk,coordinateGetter:o=f4,scrollBehavior:c="smooth"}=a,{code:d}=t;if(i.end.includes(d)){this.handleEnd(t);return}if(i.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:p}=r.current,h=p?{x:p.left,y:p.top}:Xr;this.referenceCoordinates||(this.referenceCoordinates=h);const m=o(t,{active:n,context:r.current,currentCoordinates:h});if(m){const v=dl(m,h),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const y of x){const k=t.code,{isTop:N,isRight:C,isLeft:T,isBottom:j,maxScroll:D,minScroll:_}=vk(y),I=l4(y),R={x:Math.min(k===_t.Right?I.right-I.width/2:I.right,Math.max(k===_t.Right?I.left:I.left+I.width/2,m.x)),y:Math.min(k===_t.Down?I.bottom-I.height/2:I.bottom,Math.max(k===_t.Down?I.top:I.top+I.height/2,m.y))},z=k===_t.Right&&!C||k===_t.Left&&!T,P=k===_t.Down&&!j||k===_t.Up&&!N;if(z&&R.x!==m.x){const q=y.scrollLeft+v.x,$=k===_t.Right&&q<=D.x||k===_t.Left&&q>=_.x;if($&&!v.y){y.scrollTo({left:q,behavior:c});return}$?g.x=y.scrollLeft-q:g.x=k===_t.Right?y.scrollLeft-D.x:y.scrollLeft-_.x,g.x&&y.scrollBy({left:-g.x,behavior:c});break}else if(P&&R.y!==m.y){const q=y.scrollTop+v.y,$=k===_t.Down&&q<=D.y||k===_t.Up&&q>=_.y;if($&&!v.x){y.scrollTo({top:q,behavior:c});return}$?g.y=y.scrollTop-q:g.y=k===_t.Down?y.scrollTop-D.y:y.scrollTop-_.y,g.y&&y.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(t,$s(dl(m,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pf.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=bk,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function $w(e){return!!(e&&"distance"in e)}function Mw(e){return!!(e&&"delay"in e)}class Lf{constructor(t,n,r){var a;r===void 0&&(r=h4(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=Gs(o),this.documentListeners=new Qo(this.document),this.listeners=new Qo(r),this.windowListeners=new Qo(gr(o)),this.initialCoordinates=(a=Em(i))!=null?a:Xr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Mr.Resize,this.handleCancel),this.windowListeners.add(Mr.DragStart,Iw),this.windowListeners.add(Mr.VisibilityChange,this.handleCancel),this.windowListeners.add(Mr.ContextMenu,Iw),this.documentListeners.add(Mr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Mw(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if($w(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Mr.Click,m4,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mr.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const d=(n=Em(t))!=null?n:Xr,p=dl(a,d);if(!r&&c){if($w(c)){if(c.tolerance!=null&&jh(p,c.tolerance))return this.handleCancel();if(jh(p,c.distance))return this.handleStart()}if(Mw(c)&&jh(p,c.tolerance))return this.handleCancel();this.handlePending(c,p);return}t.cancelable&&t.preventDefault(),o(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===_t.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const g4={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class zf extends Lf{constructor(t){const{event:n}=t,r=Gs(n.target);super(t,g4,r)}}zf.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const v4={move:{name:"mousemove"},end:{name:"mouseup"}};var Dm;(function(e){e[e.RightClick=2]="RightClick"})(Dm||(Dm={}));class y4 extends Lf{constructor(t){super(t,v4,Gs(t.event.target))}}y4.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Dm.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ah={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class b4 extends Lf{constructor(t){super(t,Ah)}static setup(){return window.addEventListener(Ah.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ah.move.name,t)};function t(){}}}b4.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var Jo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Jo||(Jo={}));var Tu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Tu||(Tu={}));function w4(e){let{acceleration:t,activator:n=Jo.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:c=Tu.TreeOrder,pointerCoordinates:d,scrollableAncestors:p,scrollableAncestorRects:h,delta:m,threshold:v}=e;const g=k4({delta:m,disabled:!i}),[x,y]=R3(),k=w.useRef({x:0,y:0}),N=w.useRef({x:0,y:0}),C=w.useMemo(()=>{switch(n){case Jo.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Jo.DraggableRect:return a}},[n,a,d]),T=w.useRef(null),j=w.useCallback(()=>{const _=T.current;if(!_)return;const I=k.current.x*N.current.x,R=k.current.y*N.current.y;_.scrollBy(I,R)},[]),D=w.useMemo(()=>c===Tu.TreeOrder?[...p].reverse():p,[c,p]);w.useEffect(()=>{if(!i||!p.length||!C){y();return}for(const _ of D){if((r==null?void 0:r(_))===!1)continue;const I=p.indexOf(_),R=h[I];if(!R)continue;const{direction:z,speed:P}=o4(_,R,C,t,v);for(const q of["x","y"])g[q][z[q]]||(P[q]=0,z[q]=0);if(P.x>0||P.y>0){y(),T.current=_,x(j,o),k.current=P,N.current=z;return}}k.current={x:0,y:0},N.current={x:0,y:0},y()},[t,j,r,y,i,o,JSON.stringify(C),JSON.stringify(g),x,p,D,h,JSON.stringify(v)])}const x4={x:{[In.Backward]:!1,[In.Forward]:!1},y:{[In.Backward]:!1,[In.Forward]:!1}};function k4(e){let{delta:t,disabled:n}=e;const r=Sm(t);return jl(a=>{if(n||!r||!a)return x4;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[In.Backward]:a.x[In.Backward]||i.x===-1,[In.Forward]:a.x[In.Forward]||i.x===1},y:{[In.Backward]:a.y[In.Backward]||i.y===-1,[In.Forward]:a.y[In.Forward]||i.y===1}}},[n,t,r])}function N4(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return jl(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function C4(e,t){return w.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var hl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(hl||(hl={}));var jm;(function(e){e.Optimized="optimized"})(jm||(jm={}));const Fw=new Map;function S4(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=w.useState(null),{frequency:c,measure:d,strategy:p}=a,h=w.useRef(e),m=k(),v=ul(m),g=w.useCallback(function(N){N===void 0&&(N=[]),!v.current&&o(C=>C===null?N:C.concat(N.filter(T=>!C.includes(T))))},[v]),x=w.useRef(null),y=jl(N=>{if(m&&!n)return Fw;if(!N||N===Fw||h.current!==e||i!=null){const C=new Map;for(let T of e){if(!T)continue;if(i&&i.length>0&&!i.includes(T.id)&&T.rect.current){C.set(T.id,T.rect.current);continue}const j=T.node.current,D=j?new Of(d(j),j):null;T.rect.current=D,D&&C.set(T.id,D)}return C}return N},[e,i,n,m,d]);return w.useEffect(()=>{h.current=e},[e]),w.useEffect(()=>{m||g()},[n,m]),w.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),w.useEffect(()=>{m||typeof c!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},c))},[c,m,g,...r]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:i!=null};function k(){switch(p){case hl.Always:return!1;case hl.BeforeDragging:return n;default:return!n}}}function wk(e,t){return jl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function E4(e,t){return wk(e,t)}function T4(e){let{callback:t,disabled:n}=e;const r=Mf(t),a=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return w.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Ju(e){let{callback:t,disabled:n}=e;const r=Mf(t),a=w.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return w.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function D4(e){return new Of(Ks(e),e)}function Ow(e,t,n){t===void 0&&(t=D4);const[r,a]=w.useState(null);function i(){a(d=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=d??n)!=null?p:null}const h=t(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const o=T4({callback(d){if(e)for(const p of d){const{type:h,target:m}=p;if(h==="childList"&&m instanceof HTMLElement&&m.contains(e)){i();break}}}}),c=Ju({callback:i});return da(()=>{i(),e?(c==null||c.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[e]),r}function j4(e){const t=wk(e);return pk(e,t)}const Pw=[];function A4(e){const t=w.useRef(e),n=jl(r=>e?r&&r!==Pw&&e&&t.current&&e.parentNode===t.current.parentNode?r:Qu(e):Pw,[e]);return w.useEffect(()=>{t.current=e},[e]),n}function _4(e){const[t,n]=w.useState(null),r=w.useRef(e),a=w.useCallback(i=>{const o=Dh(i.target);o&&n(c=>c?(c.set(o,Tm(o)),new Map(c)):null)},[]);return w.useEffect(()=>{const i=r.current;if(e!==i){o(i);const c=e.map(d=>{const p=Dh(d);return p?(p.addEventListener("scroll",a,{passive:!0}),[p,Tm(p)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),r.current=e}return()=>{o(e),o(i)};function o(c){c.forEach(d=>{const p=Dh(d);p==null||p.removeEventListener("scroll",a)})}},[a,e]),w.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>$s(i,o),Xr):yk(e):Xr,[e,t])}function Lw(e,t){t===void 0&&(t=[]);const n=w.useRef(null);return w.useEffect(()=>{n.current=null},t),w.useEffect(()=>{const r=e!==Xr;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?dl(e,n.current):Xr}function R4(e){w.useEffect(()=>{if(!Zu)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function I4(e,t){return w.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function xk(e){return w.useMemo(()=>e?r4(e):null,[e])}const zw=[];function $4(e,t){t===void 0&&(t=Ks);const[n]=e,r=xk(n?gr(n):null),[a,i]=w.useState(zw);function o(){i(()=>e.length?e.map(d=>gk(d)?r:new Of(t(d),d)):zw)}const c=Ju({callback:o});return da(()=>{c==null||c.disconnect(),o(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),a}function M4(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Dl(t)?t:e}function F4(e){let{measure:t}=e;const[n,r]=w.useState(null),a=w.useCallback(p=>{for(const{target:h}of p)if(Dl(h)){r(m=>{const v=t(h);return m?{...m,width:v.width,height:v.height}:v});break}},[t]),i=Ju({callback:a}),o=w.useCallback(p=>{const h=M4(p);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?t(h):null)},[t,i]),[c,d]=Su(o);return w.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const O4=[{sensor:zf,options:{}},{sensor:Pf,options:{}}],P4={current:{}},cu={draggable:{measure:Rw},droppable:{measure:Rw,strategy:hl.WhileDragging,frequency:jm.Optimized},dragOverlay:{measure:Ks}};class Xo extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const L4={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Eu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cu,measureDroppableContainers:Eu,windowRect:null,measuringScheduled:!1},z4={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Eu,draggableNodes:new Map,over:null,measureDroppableContainers:Eu},Xu=w.createContext(z4),kk=w.createContext(L4);function B4(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xo}}}function U4(e,t){switch(t.type){case Sn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Sn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Sn.DragEnd:case Sn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Sn.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Xo(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Sn.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Xo(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case Sn.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Xo(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function H4(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=w.useContext(Xu),i=Sm(r),o=Sm(n==null?void 0:n.id);return w.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!Ff(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:p}=c;if(!d.current&&!p.current)return;requestAnimationFrame(()=>{for(const h of[d.current,p.current]){if(!h)continue;const m=M3(h);if(m){m.focus();break}}})}},[r,t,a,o,i]),null}function q4(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function W4(e){return w.useMemo(()=>({draggable:{...cu.draggable,...e==null?void 0:e.draggable},droppable:{...cu.droppable,...e==null?void 0:e.droppable},dragOverlay:{...cu.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function V4(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=w.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;da(()=>{if(!o&&!c||!t){i.current=!1;return}if(i.current||!r)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const h=n(p),m=pk(h,r);if(o||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=hk(p);v&&v.scrollBy({top:m.y,left:m.x})}},[t,o,c,r,n])}const Nk=w.createContext({...Xr,scaleX:1,scaleY:1});var ai;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ai||(ai={}));const G4=w.memo(function(t){var n,r,a,i;let{id:o,accessibility:c,autoScroll:d=!0,children:p,sensors:h=O4,collisionDetection:m=Z3,measuring:v,modifiers:g,...x}=t;const y=w.useReducer(U4,void 0,B4),[k,N]=y,[C,T]=B3(),[j,D]=w.useState(ai.Uninitialized),_=j===ai.Initialized,{draggable:{active:I,nodes:R,translate:z},droppable:{containers:P}}=k,q=I!=null?R.get(I):null,$=w.useRef({initial:null,translated:null}),G=w.useMemo(()=>{var Et;return I!=null?{id:I,data:(Et=q==null?void 0:q.data)!=null?Et:P4,rect:$}:null},[I,q]),E=w.useRef(null),[L,Z]=w.useState(null),[X,K]=w.useState(null),ee=ul(x,Object.values(x)),U=Al("DndDescribedBy",o),M=w.useMemo(()=>P.getEnabled(),[P]),F=W4(v),{droppableRects:B,measureDroppableContainers:le,measuringScheduled:pe}=S4(M,{dragging:_,dependencies:[z.x,z.y],config:F.droppable}),de=N4(R,I),je=w.useMemo(()=>X?Em(X):null,[X]),ye=Mn(),Te=E4(de,F.draggable.measure);V4({activeNode:I!=null?R.get(I):null,config:ye.layoutShiftCompensation,initialRect:Te,measure:F.draggable.measure});const Ie=Ow(de,F.draggable.measure,Te),ve=Ow(de?de.parentElement:null),qe=w.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=P.getNodeFor((n=qe.current.over)==null?void 0:n.id),O=F4({measure:F.dragOverlay.measure}),xe=(r=O.nodeRef.current)!=null?r:de,te=_?(a=O.rect)!=null?a:Ie:null,V=!!(O.nodeRef.current&&O.rect),W=j4(V?null:Ie),se=xk(xe?gr(xe):null),ke=A4(_?st??de:null),Se=$4(ke),ue=q4(g,{transform:{x:z.x-W.x,y:z.y-W.y,scaleX:1,scaleY:1},activatorEvent:X,active:G,activeNodeRect:Ie,containerNodeRect:ve,draggingNodeRect:te,over:qe.current.over,overlayNodeRect:O.rect,scrollableAncestors:ke,scrollableAncestorRects:Se,windowRect:se}),_e=je?$s(je,z):null,oe=_4(ke),me=Lw(oe),ae=Lw(oe,[Ie]),we=$s(ue,me),De=te?X3(te,ue):null,He=G&&De?m({active:G,collisionRect:De,droppableRects:B,droppableContainers:M,pointerCoordinates:_e}):null,pt=dk(He,"id"),[vt,dn]=w.useState(null),ht=V?ue:$s(ue,ae),mn=Q3(ht,(i=vt==null?void 0:vt.rect)!=null?i:null,Ie),yn=w.useRef(null),jt=w.useCallback((Et,Bt)=>{let{sensor:ne,options:Ce}=Bt;if(E.current==null)return;const Me=R.get(E.current);if(!Me)return;const Ze=Et.nativeEvent,wt=new ne({active:E.current,activeNode:Me,event:Ze,options:Ce,context:qe,onAbort(Be){if(!R.get(Be))return;const{onDragAbort:re}=ee.current,he={id:Be};re==null||re(he),C({type:"onDragAbort",event:he})},onPending(Be,Y,re,he){if(!R.get(Be))return;const{onDragPending:Oe}=ee.current,We={id:Be,constraint:Y,initialCoordinates:re,offset:he};Oe==null||Oe(We),C({type:"onDragPending",event:We})},onStart(Be){const Y=E.current;if(Y==null)return;const re=R.get(Y);if(!re)return;const{onDragStart:he}=ee.current,Ne={activatorEvent:Ze,active:{id:Y,data:re.data,rect:$}};un.unstable_batchedUpdates(()=>{he==null||he(Ne),D(ai.Initializing),N({type:Sn.DragStart,initialCoordinates:Be,active:Y}),C({type:"onDragStart",event:Ne}),Z(yn.current),K(Ze)})},onMove(Be){N({type:Sn.DragMove,coordinates:Be})},onEnd:$t(Sn.DragEnd),onCancel:$t(Sn.DragCancel)});yn.current=wt;function $t(Be){return async function(){const{active:re,collisions:he,over:Ne,scrollAdjustedTranslate:Oe}=qe.current;let We=null;if(re&&Oe){const{cancelDrop:at}=ee.current;We={activatorEvent:Ze,active:re,collisions:he,delta:Oe,over:Ne},Be===Sn.DragEnd&&typeof at=="function"&&await Promise.resolve(at(We))&&(Be=Sn.DragCancel)}E.current=null,un.unstable_batchedUpdates(()=>{N({type:Be}),D(ai.Uninitialized),dn(null),Z(null),K(null),yn.current=null;const at=Be===Sn.DragEnd?"onDragEnd":"onDragCancel";if(We){const Ve=ee.current[at];Ve==null||Ve(We),C({type:at,event:We})}})}}},[R]),kn=w.useCallback((Et,Bt)=>(ne,Ce)=>{const Me=ne.nativeEvent,Ze=R.get(Ce);if(E.current!==null||!Ze||Me.dndKit||Me.defaultPrevented)return;const wt={active:Ze};Et(ne,Bt.options,wt)===!0&&(Me.dndKit={capturedBy:Bt.sensor},E.current=Ce,jt(ne,Bt))},[R,jt]),Qt=C4(h,kn);R4(h),da(()=>{Ie&&j===ai.Initializing&&D(ai.Initialized)},[Ie,j]),w.useEffect(()=>{const{onDragMove:Et}=ee.current,{active:Bt,activatorEvent:ne,collisions:Ce,over:Me}=qe.current;if(!Bt||!ne)return;const Ze={active:Bt,activatorEvent:ne,collisions:Ce,delta:{x:we.x,y:we.y},over:Me};un.unstable_batchedUpdates(()=>{Et==null||Et(Ze),C({type:"onDragMove",event:Ze})})},[we.x,we.y]),w.useEffect(()=>{const{active:Et,activatorEvent:Bt,collisions:ne,droppableContainers:Ce,scrollAdjustedTranslate:Me}=qe.current;if(!Et||E.current==null||!Bt||!Me)return;const{onDragOver:Ze}=ee.current,wt=Ce.get(pt),$t=wt&&wt.rect.current?{id:wt.id,rect:wt.rect.current,data:wt.data,disabled:wt.disabled}:null,Be={active:Et,activatorEvent:Bt,collisions:ne,delta:{x:Me.x,y:Me.y},over:$t};un.unstable_batchedUpdates(()=>{dn($t),Ze==null||Ze(Be),C({type:"onDragOver",event:Be})})},[pt]),da(()=>{qe.current={activatorEvent:X,active:G,activeNode:de,collisionRect:De,collisions:He,droppableRects:B,draggableNodes:R,draggingNode:xe,draggingNodeRect:te,droppableContainers:P,over:vt,scrollableAncestors:ke,scrollAdjustedTranslate:we},$.current={initial:te,translated:De}},[G,de,He,De,R,xe,te,B,P,vt,ke,we]),w4({...ye,delta:z,draggingRect:De,pointerCoordinates:_e,scrollableAncestors:ke,scrollableAncestorRects:Se});const Kn=w.useMemo(()=>({active:G,activeNode:de,activeNodeRect:Ie,activatorEvent:X,collisions:He,containerNodeRect:ve,dragOverlay:O,draggableNodes:R,droppableContainers:P,droppableRects:B,over:vt,measureDroppableContainers:le,scrollableAncestors:ke,scrollableAncestorRects:Se,measuringConfiguration:F,measuringScheduled:pe,windowRect:se}),[G,de,Ie,X,He,ve,O,R,P,B,vt,le,ke,Se,F,pe,se]),vr=w.useMemo(()=>({activatorEvent:X,activators:Qt,active:G,activeNodeRect:Ie,ariaDescribedById:{draggable:U},dispatch:N,draggableNodes:R,over:vt,measureDroppableContainers:le}),[X,Qt,G,Ie,N,U,R,vt,le]);return Ot.createElement(lk.Provider,{value:T},Ot.createElement(Xu.Provider,{value:vr},Ot.createElement(kk.Provider,{value:Kn},Ot.createElement(Nk.Provider,{value:mn},p)),Ot.createElement(H4,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Ot.createElement(q3,{...c,hiddenTextDescribedById:U}));function Mn(){const Et=(L==null?void 0:L.autoScrollEnabled)===!1,Bt=typeof d=="object"?d.enabled===!1:d===!1,ne=_&&!Et&&!Bt;return typeof d=="object"?{...d,enabled:ne}:{enabled:ne}}}),K4=w.createContext(null),Bw="button",Y4="Draggable";function Z4(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=Al(Y4),{activators:o,activatorEvent:c,active:d,activeNodeRect:p,ariaDescribedById:h,draggableNodes:m,over:v}=w.useContext(Xu),{role:g=Bw,roleDescription:x="draggable",tabIndex:y=0}=a??{},k=(d==null?void 0:d.id)===t,N=w.useContext(k?Nk:K4),[C,T]=Su(),[j,D]=Su(),_=I4(o,t),I=ul(n);da(()=>(m.set(t,{id:t,key:i,node:C,activatorNode:j,data:I}),()=>{const z=m.get(t);z&&z.key===i&&m.delete(t)}),[m,t]);const R=w.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":r,"aria-pressed":k&&g===Bw?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,g,y,k,x,h.draggable]);return{active:d,activatorEvent:c,activeNodeRect:p,attributes:R,isDragging:k,listeners:r?void 0:_,node:C,over:v,setNodeRef:T,setActivatorNodeRef:D,transform:N}}function Q4(){return w.useContext(kk)}const J4="Droppable",X4={timeout:25};function eL(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=Al(J4),{active:o,dispatch:c,over:d,measureDroppableContainers:p}=w.useContext(Xu),h=w.useRef({disabled:n}),m=w.useRef(!1),v=w.useRef(null),g=w.useRef(null),{disabled:x,updateMeasurementsFor:y,timeout:k}={...X4,...a},N=ul(y??r),C=w.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{p(Array.isArray(N.current)?N.current:[N.current]),g.current=null},k)},[k]),T=Ju({callback:C,disabled:x||!o}),j=w.useCallback((R,z)=>{T&&(z&&(T.unobserve(z),m.current=!1),R&&T.observe(R))},[T]),[D,_]=Su(j),I=ul(t);return w.useEffect(()=>{!T||!D.current||(T.disconnect(),m.current=!1,T.observe(D.current))},[D,T]),w.useEffect(()=>(c({type:Sn.RegisterDroppable,element:{id:r,key:i,disabled:n,node:D,rect:v,data:I}}),()=>c({type:Sn.UnregisterDroppable,key:i,id:r})),[r]),w.useEffect(()=>{n!==h.current.disabled&&(c({type:Sn.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,c]),{active:o,rect:v,isOver:(d==null?void 0:d.id)===r,node:D,over:d,setNodeRef:_}}function Bf(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function tL(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function Yc(e){return e!==null&&e>=0}function nL(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rL(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ck=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=Bf(t,r,n),o=t[a],c=i[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Zc={scaleX:1,scaleY:1},aL=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const c=(t=i[n])!=null?t:r;if(!c)return null;if(a===n){const p=i[o];return p?{x:0,y:n<o?p.top+p.height-(c.top+c.height):p.top-c.top,...Zc}:null}const d=iL(i,a,n);return a>n&&a<=o?{x:0,y:-c.height-d,...Zc}:a<n&&a>=o?{x:0,y:c.height+d,...Zc}:{x:0,y:0,...Zc}};function iL(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Sk="Sortable",Ek=Ot.createContext({activeIndex:-1,containerId:Sk,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ck,disabled:{draggable:!1,droppable:!1}});function sL(e){let{children:t,id:n,items:r,strategy:a=Ck,disabled:i=!1}=e;const{active:o,dragOverlay:c,droppableRects:d,over:p,measureDroppableContainers:h}=Q4(),m=Al(Sk,n),v=c.rect!==null,g=w.useMemo(()=>r.map(_=>typeof _=="object"&&"id"in _?_.id:_),[r]),x=o!=null,y=o?g.indexOf(o.id):-1,k=p?g.indexOf(p.id):-1,N=w.useRef(g),C=!nL(g,N.current),T=k!==-1&&y===-1||C,j=rL(i);da(()=>{C&&x&&h(g)},[C,g,x,h]),w.useEffect(()=>{N.current=g},[g]);const D=w.useMemo(()=>({activeIndex:y,containerId:m,disabled:j,disableTransforms:T,items:g,overIndex:k,useDragOverlay:v,sortedRects:tL(g,d),strategy:a}),[y,m,j.draggable,j.droppable,T,g,k,d,v,a]);return Ot.createElement(Ek.Provider,{value:D},t)}const oL=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return Bf(n,r,a).indexOf(t)},lL=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:c,previousContainerId:d,transition:p}=e;return!p||!r||c!==i&&a===o?!1:n?!0:o!==a&&t===d},cL={duration:200,easing:"ease"},Tk="transform",uL=pl.Transition.toString({property:Tk,duration:0,easing:"linear"}),dL={roleDescription:"sortable"};function pL(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=w.useState(null),c=w.useRef(n);return da(()=>{if(!t&&n!==c.current&&r.current){const d=a.current;if(d){const p=Ks(r.current,{ignoreTransform:!0}),h={x:d.left-p.left,y:d.top-p.top,scaleX:d.width/p.width,scaleY:d.height/p.height};(h.x||h.y)&&o(h)}}n!==c.current&&(c.current=n)},[t,n,r,a]),w.useEffect(()=>{i&&o(null)},[i]),i}function hL(e){let{animateLayoutChanges:t=lL,attributes:n,disabled:r,data:a,getNewIndex:i=oL,id:o,strategy:c,resizeObserverConfig:d,transition:p=cL}=e;const{items:h,containerId:m,activeIndex:v,disabled:g,disableTransforms:x,sortedRects:y,overIndex:k,useDragOverlay:N,strategy:C}=w.useContext(Ek),T=mL(r,g),j=h.indexOf(o),D=w.useMemo(()=>({sortable:{containerId:m,index:j,items:h},...a}),[m,a,j,h]),_=w.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:I,node:R,isOver:z,setNodeRef:P}=eL({id:o,data:D,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...d}}),{active:q,activatorEvent:$,activeNodeRect:G,attributes:E,setNodeRef:L,listeners:Z,isDragging:X,over:K,setActivatorNodeRef:ee,transform:U}=Z4({id:o,data:D,attributes:{...dL,...n},disabled:T.draggable}),M=_3(P,L),F=!!q,B=F&&!x&&Yc(v)&&Yc(k),le=!N&&X,pe=le&&B?U:null,je=B?pe??(c??C)({rects:y,activeNodeRect:G,activeIndex:v,overIndex:k,index:j}):null,ye=Yc(v)&&Yc(k)?i({id:o,items:h,activeIndex:v,overIndex:k}):j,Te=q==null?void 0:q.id,Ie=w.useRef({activeId:Te,items:h,newIndex:ye,containerId:m}),ve=h!==Ie.current.items,qe=t({active:q,containerId:m,isDragging:X,isSorting:F,id:o,index:j,items:h,newIndex:Ie.current.newIndex,previousItems:Ie.current.items,previousContainerId:Ie.current.containerId,transition:p,wasDragging:Ie.current.activeId!=null}),st=pL({disabled:!qe,index:j,node:R,rect:I});return w.useEffect(()=>{F&&Ie.current.newIndex!==ye&&(Ie.current.newIndex=ye),m!==Ie.current.containerId&&(Ie.current.containerId=m),h!==Ie.current.items&&(Ie.current.items=h)},[F,ye,m,h]),w.useEffect(()=>{if(Te===Ie.current.activeId)return;if(Te!=null&&Ie.current.activeId==null){Ie.current.activeId=Te;return}const xe=setTimeout(()=>{Ie.current.activeId=Te},50);return()=>clearTimeout(xe)},[Te]),{active:q,activeIndex:v,attributes:E,data:D,rect:I,index:j,newIndex:ye,items:h,isOver:z,isSorting:F,isDragging:X,listeners:Z,node:R,overIndex:k,over:K,setNodeRef:M,setActivatorNodeRef:ee,setDroppableNodeRef:P,setDraggableNodeRef:L,transform:st??je,transition:O()};function O(){if(st||ve&&Ie.current.newIndex===j)return uL;if(!(le&&!Ff($)||!p)&&(F||qe))return pl.Transition.toString({...p,property:Tk})}}function mL(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Du(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const fL=[_t.Down,_t.Right,_t.Up,_t.Left],gL=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:c}}=t;if(fL.includes(e.code)){if(e.preventDefault(),!n||!r)return;const d=[];i.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const v=a.get(m.id);if(v)switch(e.code){case _t.Down:r.top<v.top&&d.push(m);break;case _t.Up:r.top>v.top&&d.push(m);break;case _t.Left:r.left>v.left&&d.push(m);break;case _t.Right:r.left<v.left&&d.push(m);break}});const p=K3({collisionRect:r,droppableRects:a,droppableContainers:d});let h=dk(p,"id");if(h===(o==null?void 0:o.id)&&p.length>1&&(h=p[1].id),h!=null){const m=i.get(n.id),v=i.get(h),g=v?a.get(v.id):null,x=v==null?void 0:v.node.current;if(x&&g&&m&&v){const k=Qu(x).some((_,I)=>c[I]!==_),N=Dk(m,v),C=vL(m,v),T=k||!N?{x:0,y:0}:{x:C?r.width-g.width:0,y:C?r.height-g.height:0},j={x:g.left,y:g.top};return T.x&&T.y?j:dl(j,T)}}}};function Dk(e,t){return!Du(e)||!Du(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function vL(e,t){return!Du(e)||!Du(t)||!Dk(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function yL({items:e,getItemId:t,onReorder:n,children:r}){const a=W3(jw(zf,{activationConstraint:{distance:8}}),jw(Pf,{coordinateGetter:gL})),i=w.useCallback(c=>{const{active:d,over:p}=c;if(p&&d.id!==p.id){const h=e.findIndex(v=>t(v)===d.id),m=e.findIndex(v=>t(v)===p.id);h!==-1&&m!==-1&&n(Bf(e,h,m))}},[e,t,n]),o=e.map(t);return s.jsx(G4,{sensors:a,collisionDetection:G3,onDragEnd:i,children:s.jsx(sL,{items:o,strategy:aL,children:r})})}function bL({id:e,children:t,className:n,handleClassName:r}){const{attributes:a,listeners:i,setNodeRef:o,transform:c,transition:d,isDragging:p}=hL({id:e}),h={transform:pl.Transform.toString(c),transition:d};return s.jsx("div",{ref:o,style:h,className:J("relative",p&&"z-50 opacity-90 shadow-lg",n),children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("button",{type:"button",className:J("flex-shrink-0 p-1.5 mt-2 rounded cursor-grab active:cursor-grabbing","text-muted-foreground/40 hover:text-muted-foreground hover:bg-accent/50","transition-colors touch-none",r),...a,...i,"aria-label":"Drag to reorder",children:s.jsx(yT,{className:"h-4 w-4"})}),s.jsx("div",{className:"flex-1 min-w-0",children:t})]})})}function wL({table:e,onChange:t,onDelete:n,availableTableIds:r,defaultExpanded:a=!1,collectionId:i,onFocus:o,onBlur:c,onExpandChange:d,localTables:p=[],localTemplates:h=[],importedTables:m=[],importedTemplates:v=[],suggestions:g,tableMap:x,templateMap:y,sharedVariables:k}){var Z,X,K,ee,U,M;const[N,C]=w.useState(a),T=w.useRef(a),j=w.useMemo(()=>{const F=e.id.trim();return F?p.find(pe=>pe.id===F&&pe.id!==e.id)?`Table ID "${F}" already exists`:h.find(pe=>pe.id===F)?`ID "${F}" is already used by a template`:null:null},[e.id,p,h]),[D,_]=w.useState(()=>{const F=Object.keys(e.shared||{}).length,B=Object.keys(e.defaultSets||{}).length;return F===0&&B>0?"defaultSets":"shared"}),I=w.useMemo(()=>Object.keys(e.shared||{}).length,[e.shared]),R=w.useMemo(()=>Object.keys(e.defaultSets||{}).length,[e.defaultSets]),z=w.useMemo(()=>({...k,...e.shared}),[k,e.shared]);w.useEffect(()=>{a&&!T.current&&(C(!0),d==null||d(!0)),T.current=a},[a,d]),w.useEffect(()=>{const F=Object.keys(e.shared||{}).length,B=Object.keys(e.defaultSets||{}).length;F===0&&B>0?_("defaultSets"):B===0&&F>0&&_("shared")},[e.id]);const P=w.useCallback(()=>{const F=!N;C(F),d==null||d(F)},[N,d]),q=w.useCallback(()=>{o==null||o()},[o]),$=w.useCallback(F=>{F.currentTarget.contains(F.relatedTarget)||c==null||c()},[c]),G=w.useCallback((F,B)=>{t({...e,[F]:B})},[e,t]),E=w.useCallback((F,B)=>{const le={...e.source||{},[F]:B};Object.keys(le).forEach(pe=>{le[pe]||delete le[pe]}),t({...e,source:Object.keys(le).length>0?le:void 0})},[e,t]),L=w.useCallback(F=>{if(F===e.type)return;const B={id:e.id,name:e.name,type:F,description:e.description,tags:e.tags,hidden:e.hidden,defaultSets:e.defaultSets,resultType:e.resultType};let le;F==="simple"?le={...B,type:"simple",entries:[{value:"New entry"}]}:F==="composite"?le={...B,type:"composite",sources:[{tableId:""}]}:le={...B,type:"collection",collections:[]},t(le)},[e,t]);return s.jsxs("div",{className:J("editor-card",N&&"editor-card-expanded"),onFocus:q,onBlur:$,children:[s.jsxs("div",{className:J("editor-accordion-header","min-h-[56px] md:min-h-0",N&&"border-b border-border/50"),onClick:P,children:[N?s.jsx(En,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}):s.jsx(sn,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium truncate text-base md:text-sm",children:e.name||"Untitled Table"}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-muted text-muted-foreground",children:e.type}),e.hidden&&s.jsx("span",{title:"Hidden",children:s.jsx(li,{className:"h-4 w-4 text-muted-foreground"})})]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.id})]}),s.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),n()},className:"p-3 md:p-2 hover:bg-destructive/10 hover:text-destructive rounded-xl md:rounded transition-colors min-w-[44px] min-h-[44px] md:min-w-0 md:min-h-0 flex items-center justify-center",title:"Delete table",children:s.jsx(ar,{className:"h-5 w-5 md:h-4 md:w-4"})})]}),N&&s.jsxs("div",{className:"p-4 space-y-5 mobile-form-container",children:[s.jsxs("div",{className:"editor-field-group",children:[s.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"editor-label editor-label-required",children:"Table ID"}),s.jsx("input",{type:"text",value:e.id,onChange:F=>G("id",F.target.value),placeholder:"uniqueTableId",className:J("editor-input text-base md:text-sm min-h-[48px] md:min-h-0",j&&"border-destructive focus:ring-destructive")}),j&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:j})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label editor-label-required",children:"Name"}),s.jsx("input",{type:"text",value:e.name,onChange:F=>G("name",F.target.value),placeholder:"Table Name",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Type"}),s.jsxs("select",{value:e.type,onChange:F=>L(F.target.value),className:"editor-select text-base md:text-sm min-h-[48px] md:min-h-0",children:[s.jsx("option",{value:"simple",children:"Simple (Weighted Entries)"}),s.jsx("option",{value:"composite",children:"Composite (Select Table)"}),s.jsx("option",{value:"collection",children:"Collection (Merge Tables)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Result Type"}),s.jsx(Rf,{value:e.resultType,onChange:F=>G("resultType",F),placeholder:"Select or enter type..."})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"editor-label",children:"Description"}),s.jsx("textarea",{value:e.description||"",onChange:F=>G("description",F.target.value||void 0),placeholder:"Table description (Markdown supported)",rows:2,className:"editor-input text-base md:text-sm resize-y"})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap gap-4 items-start md:items-center",children:[s.jsxs("label",{className:"flex items-center gap-3 md:gap-2 text-base md:text-sm p-3 md:p-2 editor-entry-row md:border-0 md:bg-transparent w-full md:w-auto cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.hidden||!1,onChange:F=>G("hidden",F.target.checked||void 0),className:"rounded border-border w-5 h-5 md:w-4 md:h-4 accent-primary"}),s.jsxs("span",{className:"flex items-center gap-2 md:gap-1",children:[e.hidden?s.jsx(li,{className:"h-5 w-5 md:h-4 md:w-4"}):s.jsx(Qh,{className:"h-5 w-5 md:h-4 md:w-4"}),"Hidden from UI"]})]}),e.type==="simple"&&s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 w-full md:w-auto",children:[s.jsx("label",{className:"editor-label md:mb-0",children:"Extends:"}),s.jsxs("select",{value:e.extends||"",onChange:F=>G("extends",F.target.value||void 0),className:"editor-select w-full md:w-auto text-base md:text-sm min-h-[48px] md:min-h-0",children:[s.jsx("option",{value:"",children:"None"}),r.filter(F=>F!==e.id).map(F=>s.jsx("option",{value:F,children:F},F))]})]})]}),s.jsxs("details",{className:"editor-collapsible",children:[s.jsx("summary",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:"Shared Variables / Default Sets"}),I>0&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-rose/15 text-rose",children:I}),R>0&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-mint/15 text-mint",children:R}),I===0&&R===0&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"}),s.jsxs("div",{className:"group relative",children:[s.jsx(ua,{className:"h-4 w-4 text-muted-foreground cursor-help"}),s.jsx("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:"Shared Variables are evaluated lazily when rolled and propagate to nested tables. Default Sets provide default placeholder values for all entries in this table."})]})]})}),s.jsxs("div",{className:"editor-collapsible-content space-y-3",children:[s.jsxs("div",{className:"flex border-b border-border/50",role:"tablist",children:[s.jsxs("button",{type:"button",className:J("flex items-center gap-1.5 px-3 py-2 text-sm font-medium transition-colors","border-b-2 -mb-px",D==="shared"?"text-rose border-rose":"text-muted-foreground border-transparent hover:text-foreground/80"),onClick:()=>_("shared"),role:"tab","aria-selected":D==="shared",children:[s.jsx("span",{children:"Shared Variables"}),I>0&&s.jsx("span",{className:J("px-1.5 py-0.5 text-xs rounded-full",D==="shared"?"bg-rose/15 text-rose":"bg-muted text-muted-foreground"),children:I})]}),s.jsxs("button",{type:"button",className:J("flex items-center gap-1.5 px-3 py-2 text-sm font-medium transition-colors","border-b-2 -mb-px",D==="defaultSets"?"text-mint border-mint":"text-muted-foreground border-transparent hover:text-foreground/80"),onClick:()=>_("defaultSets"),role:"tab","aria-selected":D==="defaultSets",children:[s.jsx("span",{children:"Default Sets"}),R>0&&s.jsx("span",{className:J("px-1.5 py-0.5 text-xs rounded-full",D==="defaultSets"?"bg-mint/15 text-mint":"bg-muted text-muted-foreground"),children:R})]})]}),D==="shared"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Variables evaluated when this table is rolled. Available to nested table references."}),s.jsx(Wi,{value:e.shared||{},onChange:F=>G("shared",Object.keys(F).length>0?F:void 0),keyPlaceholder:"Variable name",valuePlaceholder:"Value (supports {{dice:}}, {{math:}}, etc.)",keyPattern:"^\\$?[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only",valueSupportsExpressions:!0,collectionId:i,showInsertButton:!0,localTables:p,localTemplates:h,importedTables:m,importedTemplates:v,suggestions:g,tableMap:x,templateMap:y,sharedVariables:z})]}),D==="defaultSets"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Default placeholder values applied to all entries. Can be overridden by entry-specific sets."}),s.jsx(Wi,{value:e.defaultSets||{},onChange:F=>G("defaultSets",Object.keys(F).length>0?F:void 0),keyPlaceholder:"Key (@key)",valuePlaceholder:"Value or {{pattern}}",valueSupportsExpressions:!0,collectionId:i,showInsertButton:!0,localTables:p,localTemplates:h,importedTables:m,importedTemplates:v,suggestions:g,tableMap:x,templateMap:y,sharedVariables:z})]})]})]}),e.type==="simple"&&s.jsx(xL,{table:e,onChange:t,collectionId:i,localTables:p,localTemplates:h,importedTables:m,importedTemplates:v,suggestions:g,tableMap:x,templateMap:y,sharedVariables:k}),e.type==="composite"&&s.jsx(kL,{table:e,onChange:t,availableTableIds:r}),e.type==="collection"&&s.jsx(NL,{table:e,onChange:t,availableTableIds:r}),s.jsxs("details",{className:"editor-collapsible",children:[s.jsx("summary",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:"Source Attribution"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"}),s.jsxs("div",{className:"group relative",children:[s.jsx(ua,{className:"h-4 w-4 text-muted-foreground cursor-help"}),s.jsx("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:"Track where this table originated. Useful when combining content from multiple sources."})]})]})}),s.jsxs("div",{className:"editor-collapsible-content space-y-4",children:[s.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Book"}),s.jsx("input",{type:"text",value:((Z=e.source)==null?void 0:Z.book)||"",onChange:F=>E("book",F.target.value||void 0),placeholder:"Source book name",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Page"}),s.jsx("input",{type:"text",value:((K=(X=e.source)==null?void 0:X.page)==null?void 0:K.toString())||"",onChange:F=>E("page",F.target.value||void 0),placeholder:"47 or 47-49",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Section"}),s.jsx("input",{type:"text",value:((ee=e.source)==null?void 0:ee.section)||"",onChange:F=>E("section",F.target.value||void 0),placeholder:"Chapter or section name",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"License"}),s.jsx("input",{type:"text",value:((U=e.source)==null?void 0:U.license)||"",onChange:F=>E("license",F.target.value||void 0),placeholder:"OGL 1.0a, CC BY 4.0, etc.",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"URL"}),s.jsx("input",{type:"url",value:((M=e.source)==null?void 0:M.url)||"",onChange:F=>E("url",F.target.value||void 0),placeholder:"https://...",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]})]})]})]})]})}function xL({table:e,onChange:t,collectionId:n,localTables:r=[],localTemplates:a=[],importedTables:i=[],importedTemplates:o=[],suggestions:c,tableMap:d,templateMap:p,sharedVariables:h}){const[m,v]=w.useState(null),[g,x]=w.useState(null),[y,k]=w.useState(null),[N,C]=w.useState(null),T=w.useMemo(()=>({...h,...e.shared}),[h,e.shared]),j=w.useMemo(()=>{const $=Cf(e).filter(Z=>Z!=="value"&&Z!=="description");if($.length===0)return c||[];const G=$.map(Z=>({id:`placeholder-table-${e.id}-${Z}`,label:`@${Z}`,insertText:`@${Z}`,category:"placeholder",description:`Set property from ${e.name||e.id}`,icon:Hi,source:"This Table",colorClass:"cyan"})),E=new Set((c||[]).map(Z=>Z.id)),L=G.filter(Z=>!E.has(Z.id));return[...c||[],...L]},[c,e]);w.useEffect(()=>{if(m!==null){const q=setTimeout(()=>v(null),100);return()=>clearTimeout(q)}},[m]),w.useEffect(()=>{if(g!==null||y!==null){const q=setTimeout(()=>{x(null),k(null)},100);return()=>clearTimeout(q)}},[g,y]),w.useEffect(()=>{if(N!==null){const q=setTimeout(()=>C(null),600);return()=>clearTimeout(q)}},[N]);const D=w.useCallback(()=>{const q=e.entries.length;t({...e,entries:[...e.entries,{value:""}]}),v(q)},[e,t]),_=w.useCallback((q,$)=>{const G=[...e.entries];G[q]=$,t({...e,entries:G})},[e,t]),I=w.useCallback(q=>{e.entries.length<=1||t({...e,entries:e.entries.filter(($,G)=>G!==q)})},[e,t]),R=w.useCallback(q=>{const $=e.entries[q],G=JSON.parse(JSON.stringify($));G.id&&(G.id=`${G.id}_copy`);const E=[...e.entries];E.splice(q+1,0,G),t({...e,entries:E}),x(q+1),k(q),C(q+1)},[e,t]),z=w.useCallback(q=>{t({...e,entries:q})},[e,t]),P=w.useCallback((q,$)=>q.id||`entry-${$}`,[]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-base md:text-sm font-medium",children:["Entries (",e.entries.length,")"]}),s.jsxs("button",{type:"button",onClick:D,className:"flex items-center gap-2 px-4 md:px-3 py-2.5 md:py-1.5 text-base md:text-sm border rounded-xl md:rounded-md hover:bg-accent active:bg-accent/70 transition-colors min-h-[44px] md:min-h-0",children:[s.jsx(nr,{className:"h-5 w-5 md:h-4 md:w-4"}),"Add Entry"]})]}),s.jsx(yL,{items:e.entries,getItemId:q=>P(q,e.entries.indexOf(q)),onReorder:z,children:s.jsx("div",{className:"space-y-3 md:space-y-2",children:e.entries.map((q,$)=>s.jsx(bL,{id:P(q,$),children:s.jsx(j3,{entry:q,onChange:G=>_($,G),onDelete:()=>I($),onAddEntry:D,onClone:()=>R($),index:$,canDelete:e.entries.length>1,collectionId:n,autoFocus:m===$,defaultExpanded:g===$?!0:y===$?!1:void 0,isCloned:N===$,localTables:r,localTemplates:a,importedTables:i,importedTemplates:o,suggestions:j,tableMap:d,templateMap:p,sharedVariables:T})},`entry-${$}`))})})]})}function kL({table:e,onChange:t,availableTableIds:n}){const r=w.useCallback(()=>{t({...e,sources:[...e.sources,{tableId:"",weight:1}]})},[e,t]),a=w.useCallback((o,c)=>{const d=[...e.sources];d[o]=c,t({...e,sources:d})},[e,t]),i=w.useCallback(o=>{e.sources.length<=1||t({...e,sources:e.sources.filter((c,d)=>d!==o)})},[e,t]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-base md:text-sm font-medium",children:["Source Tables (",e.sources.length,")"]}),s.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-4 md:px-3 py-2.5 md:py-1.5 text-base md:text-sm border rounded-xl md:rounded-md hover:bg-accent active:bg-accent/70 transition-colors min-h-[44px] md:min-h-0",children:[s.jsx(nr,{className:"h-5 w-5 md:h-4 md:w-4"}),"Add Source"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Composite tables select one source table based on weight, then roll on that table."}),s.jsx("div",{className:"space-y-2",children:e.sources.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[s.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:["#",c+1]}),s.jsxs("select",{value:o.tableId,onChange:d=>a(c,{...o,tableId:d.target.value}),className:"flex-1 p-2 border rounded-md bg-background text-sm",children:[s.jsx("option",{value:"",children:"Select a table..."}),n.filter(d=>d!==e.id).map(d=>s.jsx("option",{value:d,children:d},d))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-muted-foreground",children:"Weight:"}),s.jsx("input",{type:"number",value:o.weight??1,onChange:d=>a(c,{...o,weight:parseFloat(d.target.value)||1}),min:0,step:.1,className:"w-16 p-2 border rounded-md bg-background text-sm text-center"})]}),s.jsx("button",{type:"button",onClick:()=>i(c),disabled:e.sources.length<=1,className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",children:s.jsx(ar,{className:"h-4 w-4"})})]},c))})]})}function NL({table:e,onChange:t,availableTableIds:n}){const r=w.useCallback(()=>{t({...e,collections:[...e.collections,""]})},[e,t]),a=w.useCallback((o,c)=>{const d=[...e.collections];d[o]=c,t({...e,collections:d})},[e,t]),i=w.useCallback(o=>{e.collections.length<=1||t({...e,collections:e.collections.filter((c,d)=>d!==o)})},[e,t]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"font-medium",children:["Collected Tables (",e.collections.length,")"]}),s.jsxs("button",{type:"button",onClick:r,className:"flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md hover:bg-accent transition-colors",children:[s.jsx(nr,{className:"h-4 w-4"}),"Add Table"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Collection tables merge all entries from multiple tables into a single pool."}),s.jsx("div",{className:"space-y-2",children:e.collections.map((o,c)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[s.jsxs("span",{className:"text-sm text-muted-foreground w-8",children:["#",c+1]}),s.jsxs("select",{value:o,onChange:d=>a(c,d.target.value),className:"flex-1 p-2 border rounded-md bg-background text-sm",children:[s.jsx("option",{value:"",children:"Select a table..."}),n.filter(d=>d!==e.id).map(d=>s.jsx("option",{value:d,children:d},d))]}),s.jsx("button",{type:"button",onClick:()=>i(c),disabled:e.collections.length<=1,className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded transition-colors disabled:opacity-50",children:s.jsx(ar,{className:"h-4 w-4"})})]},c))})]})}function CL({template:e,onChange:t,onDelete:n,localTables:r,localTemplates:a=[],importedTables:i=[],importedTemplates:o=[],suggestions:c,tableMap:d,templateMap:p,documentShared:h,defaultExpanded:m=!1,collectionId:v,onFocus:g,onBlur:x,onExpandChange:y}){const[k,N]=w.useState(m),C=w.useRef(null),T=w.useRef(m),j=w.useMemo(()=>{const E=e.id.trim();return E?a.find(X=>X.id===E&&X.id!==e.id)?`Template ID "${E}" already exists`:r.find(X=>X.id===E)?`ID "${E}" is already used by a table`:null:null},[e.id,r,a]);w.useEffect(()=>{m&&!T.current&&(N(!0),y==null||y(!0)),T.current=m},[m,y]);const D=w.useCallback(()=>{const E=!k;N(E),y==null||y(E)},[k,y]),_=w.useCallback(()=>{g==null||g()},[g]),I=w.useCallback(E=>{E.currentTarget.contains(E.relatedTarget)||x==null||x()},[x]),R=w.useCallback((E,L)=>{t({...e,[E]:L})},[e,t]),z=w.useCallback(E=>{C.current?C.current.insertAtCursor(E):R("pattern",(e.pattern||"")+E)},[e.pattern,R]),P=w.useMemo(()=>a.filter(E=>E.id!==e.id),[a,e.id]),q=w.useMemo(()=>o.filter(E=>E.id!==e.id),[o,e.id]),$=w.useMemo(()=>({...h,...e.shared}),[h,e.shared]),G=w.useMemo(()=>{if(!c)return[];const E=e.shared;if(!E||Object.keys(E).length===0)return c;const L=Object.keys(E).map(K=>{const ee=K.startsWith("$")?K:`$${K}`;return{id:`template-shared-${K}`,label:ee,insertText:ee,category:"variable",description:`Template shared: ${E[K]}`,icon:Hm,source:"Template",colorClass:"pink"}}),Z=new Set(Object.keys(E).map(K=>K.startsWith("$")?K:`$${K}`));return[...c.filter(K=>!(K.category==="variable"&&Z.has(K.label))),...L]},[c,e.shared]);return s.jsxs("div",{className:J("editor-card",k&&"editor-card-expanded-lavender"),onFocus:_,onBlur:I,children:[s.jsxs("div",{className:J("editor-accordion-header","min-h-[56px] md:min-h-0",k&&"border-b border-border/50"),onClick:D,children:[k?s.jsx(En,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}):s.jsx(sn,{className:"h-5 w-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate text-base md:text-sm",children:e.name||"Untitled Template"}),s.jsx("span",{className:"text-sm md:text-sm text-muted-foreground",children:e.id})]}),s.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),n()},className:"p-2 md:p-2 p-3 hover:bg-destructive/10 hover:text-destructive rounded-xl md:rounded transition-colors min-w-[44px] min-h-[44px] md:min-w-0 md:min-h-0 flex items-center justify-center",title:"Delete template",children:s.jsx(ar,{className:"h-5 w-5 md:h-4 md:w-4"})})]}),k&&s.jsxs("div",{className:"p-4 space-y-5 mobile-form-container",children:[s.jsxs("div",{className:"editor-field-group",children:[s.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"editor-label editor-label-required",children:"Template ID"}),s.jsx("input",{type:"text",value:e.id,onChange:E=>R("id",E.target.value),placeholder:"uniqueTemplateId",className:J("editor-input text-base md:text-sm min-h-[48px] md:min-h-0",j&&"border-destructive focus:ring-destructive")}),j&&s.jsx("p",{className:"text-xs text-destructive mt-1",children:j})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label editor-label-required",children:"Name"}),s.jsx("input",{type:"text",value:e.name,onChange:E=>R("name",E.target.value),placeholder:"Template Name",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Result Type"}),s.jsx(Rf,{value:e.resultType,onChange:E=>R("resultType",E),placeholder:"Select or enter type..."})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"editor-label",children:"Description"}),s.jsx("input",{type:"text",value:e.description||"",onChange:E=>R("description",E.target.value||void 0),placeholder:"Template description",className:"editor-input text-base md:text-sm min-h-[48px] md:min-h-0"})]})]}),s.jsxs("details",{className:"editor-collapsible",children:[s.jsx("summary",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-sm",children:"Shared Variables"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"(optional)"}),e.shared&&Object.keys(e.shared).length>0&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-rose/15 text-rose",children:Object.keys(e.shared).length}),s.jsxs("div",{className:"group relative",children:[s.jsx(ua,{className:"h-4 w-4 text-muted-foreground cursor-help"}),s.jsx("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:"Template-level shared variables are evaluated lazily when this template is rolled, not when the document loads. They propagate to any nested table references. Cannot shadow document-level variables."})]})]})}),s.jsxs("div",{className:"editor-collapsible-content space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Variables evaluated when this template is rolled. Available to nested table references."}),s.jsx(Wi,{value:e.shared||{},onChange:E=>R("shared",Object.keys(E).length>0?E:void 0),keyPlaceholder:"Variable name",valuePlaceholder:"Value (supports {{dice:}}, {{math:}}, etc.)",keyPattern:"^\\$?[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only",valueSupportsExpressions:!0,collectionId:v,showInsertButton:!0,localTables:r,localTemplates:P,importedTables:i,importedTemplates:q,suggestions:c,tableMap:d,templateMap:p,sharedVariables:$})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center mb-2 md:mb-2 mb-3",children:s.jsx("span",{className:"text-base md:text-sm font-medium",children:"Pattern & Preview"})}),s.jsxs("div",{className:"flex flex-wrap md:flex-wrap flex-nowrap gap-2 md:gap-1.5 mb-3 overflow-x-auto md:overflow-visible pb-2 md:pb-0 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-none",style:{WebkitOverflowScrolling:"touch"},children:[s.jsx(Cm,{localTables:r,localTemplates:P,importedTables:i,importedTemplates:q,onInsert:z}),s.jsx(Ca,{icon:s.jsx($n,{className:"h-3.5 w-3.5"}),label:"Dice",title:"Insert dice roll",onClick:()=>z("{{dice:2d6}}")}),s.jsx(Ca,{icon:s.jsx($u,{className:"h-3.5 w-3.5"}),label:"Math",title:"Insert math expression",onClick:()=>z("{{math:1 + 2}}")}),s.jsx(Ca,{icon:s.jsx(Us,{className:"h-3.5 w-3.5"}),label:"Variable",title:"Insert variable reference",onClick:()=>z("{{$variableName}}")}),s.jsx(Ca,{icon:s.jsx(Qm,{className:"h-3.5 w-3.5"}),label:"Again",title:"Insert re-roll reference",onClick:()=>z("{{again}}")}),s.jsx(Ca,{label:"@placeholder",title:"Insert placeholder reference",onClick:()=>z("{{@placeholderName}}")}),s.jsx(Ca,{label:"unique:N",title:"Insert unique selection",onClick:()=>{const E=r.length>0?r[0].id:"tableId";z(`{{unique:3:${E}}}`)}}),s.jsx("span",{className:"w-px h-4 bg-border mx-1"}),s.jsx(Ca,{icon:s.jsx(yl,{className:"h-3.5 w-3.5"}),label:"Capture",title:"Insert capture multi-roll (stores results in variable)",onClick:()=>{const E=r.length>0?r[0].id:"tableId";z(`{{3*${E} >> $items}}`)}}),s.jsx(Ca,{icon:s.jsx(zs,{className:"h-3.5 w-3.5"}),label:"$var[n]",title:"Insert capture access (get item by index)",onClick:()=>z("{{$items[0]}}")}),s.jsx(Ca,{icon:s.jsx(Ls,{className:"h-3.5 w-3.5"}),label:"collect:",title:"Insert collect expression (aggregate property from captures)",onClick:()=>z("{{collect:$items.@value|unique}}")})]}),s.jsx(ak,{ref:C,pattern:e.pattern||"",onChange:E=>R("pattern",E),collectionId:v,availableTableIds:r.map(E=>E.id),availableTemplateIds:P.map(E=>E.id),sharedVariables:e.shared,suggestions:G,tableMap:d,templateMap:p,autocompleteSharedVariables:$})]}),s.jsxs("div",{children:[s.jsx("label",{className:"editor-label",children:"Tags"}),s.jsx(SL,{value:e.tags||[],onChange:E=>R("tags",E.length>0?E:void 0)})]})]})]})}function Ca({icon:e,label:t,title:n,onClick:r}){return s.jsxs("button",{type:"button",onClick:r,title:n,className:"editor-input-btn flex items-center gap-1.5 px-3 md:px-2.5 py-2 md:py-1 text-sm md:text-xs rounded-xl md:rounded-lg flex-shrink-0 min-h-[40px] md:min-h-0",children:[e,t]})}function SL({value:e,onChange:t}){const[n,r]=w.useState(""),a=w.useCallback(o=>{const c=o.trim().toLowerCase();c&&!e.includes(c)&&t([...e,c]),r("")},[e,t]),i=w.useCallback(o=>{t(e.filter((c,d)=>d!==o))},[e,t]);return s.jsx("div",{className:"editor-input p-3 md:p-2",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((o,c)=>s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 md:px-2 py-1.5 md:py-0.5 text-sm bg-primary/10 text-primary rounded-full",children:[o,s.jsx("button",{type:"button",onClick:()=>i(c),className:"hover:bg-primary/20 rounded-full p-1 md:p-0.5 min-w-[24px] min-h-[24px] md:min-w-0 md:min-h-0 flex items-center justify-center",children:s.jsx(Ut,{className:"h-3.5 w-3.5 md:h-3 md:w-3"})})]},o)),s.jsx("input",{type:"text",value:n,onChange:o=>r(o.target.value),onKeyDown:o=>{o.key==="Enter"?(o.preventDefault(),a(n)):o.key==="Backspace"&&!n&&e.length>0&&i(e.length-1)},onBlur:()=>n&&a(n),placeholder:e.length===0?"Add tags...":"",className:"flex-1 min-w-[100px] bg-transparent outline-none text-base md:text-sm py-1 md:py-0"})]})})}function EL({variables:e,shared:t,onVariablesChange:n,onSharedChange:r,collectionId:a,localTables:i,localTemplates:o,importedTables:c,importedTemplates:d,suggestions:p,tableMap:h,templateMap:m}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("section",{className:"border rounded-lg",children:[s.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium",children:"Static Variables"}),s.jsxs("div",{className:"group relative",children:[s.jsx(ua,{className:"h-4 w-4 text-muted-foreground cursor-help"}),s.jsxs("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-64 p-2 text-xs bg-popover border rounded-md shadow-lg",children:["Static variables are evaluated once when the collection is loaded. Use them for constants like settings, separators, or campaign-specific values. Reference with ","{{$variableName}}","."]})]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Constants loaded at initialization. Reference with ","{{$name}}","."]})]}),s.jsx("div",{className:"p-4",children:s.jsx(Wi,{value:e,onChange:n,keyPlaceholder:"Variable name",valuePlaceholder:"Value (text only)",keyPattern:"^[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with letter/underscore, alphanumeric only"})})]}),s.jsxs("section",{className:"border rounded-lg",children:[s.jsxs("div",{className:"p-4 border-b bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium",children:"Shared Variables"}),s.jsxs("div",{className:"group relative",children:[s.jsx(ua,{className:"h-4 w-4 text-muted-foreground cursor-help"}),s.jsxs("div",{className:"absolute left-0 top-6 z-10 hidden group-hover:block w-72 p-2 text-xs bg-popover border rounded-md shadow-lg",children:[s.jsx("p",{className:"mb-2",children:"Shared variables are evaluated once at the start of each generation and remain constant for that run."}),s.jsxs("p",{className:"mb-2",children:["Variables capture the full roll result including sets, enabling"," ",s.jsx("code",{className:"px-1 bg-muted rounded",children:"{{$hero.@prop}}"})," ","syntax with dynamic table resolution."]})]})]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Evaluated once per generation. Access properties with ",s.jsx("code",{className:"px-1 bg-muted rounded text-xs",children:"{{$name.@prop}}"}),"."]})]}),s.jsx("div",{className:"p-4",children:s.jsx(Wi,{value:t,onChange:r,keyPlaceholder:"Variable name",valuePlaceholder:"Value (supports {{dice:}}, {{math:}}, etc.)",keyPattern:"^\\$?[a-zA-Z_][a-zA-Z0-9_]*$",keyError:"Must start with optional $, then letter/underscore, alphanumeric only",valueSupportsExpressions:!0,collectionId:a,showInsertButton:!0,localTables:i,localTemplates:o,importedTables:c,importedTemplates:d,suggestions:p,tableMap:h,templateMap:m,sharedVariables:t})})]})]})}function _h({title:e,icon:t,count:n,isExpanded:r,onToggle:a,onAdd:i,children:o,accentColor:c}){const d={mint:"text-[hsl(var(--mint))]",lavender:"text-[hsl(var(--lavender))]",amber:"text-[hsl(var(--amber))]"};return s.jsxs("div",{className:"border-b border-border/30 last:border-b-0",children:[s.jsxs("div",{className:"group w-full flex items-center gap-2 px-3 py-2.5 text-sm font-medium hover:bg-accent/50 transition-colors",children:[s.jsxs("button",{onClick:a,className:"flex items-center gap-2 flex-1 text-left",children:[r?s.jsx(En,{className:"h-3.5 w-3.5 text-muted-foreground"}):s.jsx(sn,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx(t,{className:J("h-4 w-4",d[c])}),s.jsx("span",{className:"flex-1 text-left",children:e}),s.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 py-0.5 rounded-full",children:n})]}),s.jsx("button",{onClick:i,className:"p-1 hover:bg-primary/10 rounded transition-colors opacity-0 group-hover:opacity-100 hover:opacity-100",title:`Add ${e.toLowerCase().slice(0,-1)}`,children:s.jsx(nr,{className:"h-3.5 w-3.5 text-muted-foreground hover:text-primary"})})]}),r&&s.jsx("div",{className:"pb-2 animate-slide-up",children:o})]})}function Rh({label:e,id:t,isSelected:n,onClick:r,onDelete:a,canDelete:i=!0}){return s.jsxs("div",{className:J("group flex items-center gap-2 px-3 py-1.5 mx-2 rounded-lg text-sm cursor-pointer transition-all",n?"bg-primary/10 text-primary":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"),onClick:r,children:[s.jsx("span",{className:"flex-1 truncate",title:e,children:e}),s.jsx("span",{className:"text-xs text-muted-foreground/60 font-mono truncate max-w-[60px]",title:t,children:t}),i&&a&&s.jsx("button",{onClick:o=>{o.stopPropagation(),a()},className:"p-1 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded transition-all",title:"Delete",children:s.jsx(ar,{className:"h-3 w-3 text-destructive"})})]})}function TL({document:e,isCollapsed:t,onToggleCollapse:n,onNavigate:r,onAddImport:a,onAddTable:i,onAddTemplate:o,onDeleteImport:c,onDeleteTable:d,onDeleteTemplate:p,selectedItemId:h}){const[m,v]=w.useState({includes:!0,tables:!0,templates:!0}),[g,x]=w.useState(""),[y,k]=w.useState("all"),N=w.useCallback(z=>{v(P=>({...P,[z]:!P[z]}))},[]),C=e.imports||[],T=e.tables,j=e.templates||[],D=w.useMemo(()=>{const z=g.toLowerCase().trim(),P=E=>!z||E.toLowerCase().includes(z),q=C.filter(E=>P(E.alias)||P(E.path)),$=T.filter(E=>P(E.name)||P(E.id)),G=j.filter(E=>P(E.name)||P(E.id));return{imports:y==="all"||y==="includes"?q:[],templates:y==="all"||y==="templates"?G:[],tables:y==="all"||y==="tables"?$:[]}},[C,T,j,g,y]),_=g.length>0||y!=="all",I=D.imports.length+D.tables.length+D.templates.length,R=w.useCallback(()=>{x(""),k("all")},[]);return t?s.jsxs("div",{className:"w-12 border-r border-border/50 bg-card/30 flex flex-col items-center py-3 gap-2",children:[s.jsx("button",{onClick:n,className:"p-2 hover:bg-accent rounded-lg transition-colors",title:"Expand sidebar",children:s.jsx(DT,{className:"h-4 w-4 text-muted-foreground"})}),s.jsx("div",{className:"w-6 h-px bg-border/50 my-1"}),s.jsx("button",{onClick:()=>r("metadata"),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:"Includes",children:s.jsx(Pi,{className:"h-4 w-4 text-[hsl(var(--amber))]"})}),s.jsx("button",{onClick:()=>r("templates"),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:`Templates (${j.length})`,children:s.jsx(Vn,{className:"h-4 w-4 text-[hsl(var(--lavender))]"})}),s.jsx("button",{onClick:()=>r("tables"),className:"p-2 hover:bg-accent rounded-lg transition-colors",title:`Tables (${T.length})`,children:s.jsx(rr,{className:"h-4 w-4 text-[hsl(var(--mint))]"})})]}):s.jsxs("div",{className:"w-64 border-r border-border/50 bg-card/30 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5 border-b border-border/30",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Explorer"}),s.jsx("button",{onClick:n,className:"p-1.5 hover:bg-accent rounded-lg transition-colors",title:"Collapse sidebar",children:s.jsx(TT,{className:"h-4 w-4 text-muted-foreground"})})]}),s.jsxs("div",{className:"px-3 py-2.5 border-b border-border/30 space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pr,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),s.jsx("input",{type:"text",value:g,onChange:z=>x(z.target.value),placeholder:"Search...",className:J("w-full pl-8 pr-8 py-1.5 text-sm rounded-lg","bg-background/50 border border-border/50","focus:outline-none focus:border-primary/50 focus:ring-1 focus:ring-primary/20","placeholder:text-muted-foreground/50 transition-all")}),g&&s.jsx("button",{onClick:()=>x(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 hover:bg-accent rounded transition-colors",title:"Clear search",children:s.jsx(Ut,{className:"h-3.5 w-3.5 text-muted-foreground"})})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:["all","tables","templates","includes"].map(z=>{const P=y===z,q={all:null,includes:Pi,tables:rr,templates:Vn},$={all:"",includes:"text-[hsl(var(--amber))]",tables:"text-[hsl(var(--mint))]",templates:"text-[hsl(var(--lavender))]"},G=q[z],E=z==="all"?C.length+T.length+j.length:z==="includes"?C.length:z==="tables"?T.length:j.length;return s.jsxs("button",{onClick:()=>k(z),className:J("flex items-center gap-1 px-2 py-0.5 text-xs rounded-full border transition-all",P?"bg-primary/10 border-primary/30 text-primary":"border-border/50 text-muted-foreground hover:border-border hover:bg-accent/50"),children:[G&&s.jsx(G,{className:J("h-3 w-3",P?"":$[z])}),s.jsx("span",{className:"capitalize",children:z}),s.jsxs("span",{className:"text-muted-foreground/60",children:["(",E,")"]})]},z)})}),_&&s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"text-muted-foreground",children:[I," result",I!==1?"s":""]}),s.jsx("button",{onClick:R,className:"text-primary hover:underline",children:"Clear filters"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[(y==="all"||y==="includes")&&s.jsx(_h,{title:"Includes",icon:Pi,count:D.imports.length,isExpanded:m.includes,onToggle:()=>N("includes"),onAdd:a,accentColor:"amber",children:D.imports.length===0?s.jsx("p",{className:"px-5 py-2 text-xs text-muted-foreground/70 italic",children:_?"No matches":"No imports yet"}):D.imports.map(z=>{const P=C.indexOf(z);return s.jsx(Rh,{label:z.alias,id:z.path.split("/").pop()||z.path,isSelected:h===`import-${P}`,onClick:()=>r("metadata",`import-${P}`),onDelete:c?()=>c(P):void 0},`import-${P}`)})}),(y==="all"||y==="templates")&&s.jsx(_h,{title:"Templates",icon:Vn,count:D.templates.length,isExpanded:m.templates,onToggle:()=>N("templates"),onAdd:o,accentColor:"lavender",children:D.templates.length===0?s.jsx("p",{className:"px-5 py-2 text-xs text-muted-foreground/70 italic",children:_?"No matches":"No templates yet"}):D.templates.map(z=>{const P=j.indexOf(z);return s.jsx(Rh,{label:z.name,id:z.id,isSelected:h===z.id,onClick:()=>r("templates",z.id),onDelete:p?()=>p(P):void 0},z.id)})}),(y==="all"||y==="tables")&&s.jsx(_h,{title:"Tables",icon:rr,count:D.tables.length,isExpanded:m.tables,onToggle:()=>N("tables"),onAdd:i,accentColor:"mint",children:D.tables.length===0?s.jsx("p",{className:"px-5 py-2 text-xs text-muted-foreground/70 italic",children:_?"No matches":"No tables yet"}):D.tables.map(z=>{const P=T.indexOf(z);return s.jsx(Rh,{label:z.name,id:z.id,isSelected:h===z.id,onClick:()=>r("tables",z.id),onDelete:d?()=>d(P):void 0,canDelete:T.length>1},z.id)})})]})]})}const DL={metadata:"bg-amber",tables:"bg-mint",templates:"bg-lavender",variables:"bg-rose",json:"bg-gray-400 dark:bg-white"},Uw={metadata:"text-amber",tables:"text-mint",templates:"text-lavender",variables:"text-rose",json:"text-gray-400 dark:text-white"},Ih={metadata:{active:"bg-amber/15 text-amber",hover:"group-hover:bg-amber/10 group-hover:text-amber"},tables:{active:"bg-mint/15 text-mint",hover:"group-hover:bg-mint/10 group-hover:text-mint"},templates:{active:"bg-lavender/15 text-lavender",hover:"group-hover:bg-lavender/10 group-hover:text-lavender"},variables:{active:"bg-rose/15 text-rose",hover:"group-hover:bg-rose/10 group-hover:text-rose"},json:{active:"bg-gray-400/15 text-gray-500",hover:"group-hover:bg-gray-400/10 group-hover:text-gray-500"}};function jL({activeTab:e,onTabChange:t,tableCounts:n}){const r=[{id:"metadata",label:"Metadata",icon:rl},{id:"tables",label:"Tables",icon:rr,count:n.tables},{id:"templates",label:"Templates",icon:Vn,count:n.templates},{id:"variables",label:"Variables",icon:Us},{id:"json",label:"JSON",icon:qm}];return s.jsxs("div",{className:"border-b border-border/50 bg-card/50 backdrop-blur-sm sticky top-0 z-10",children:[s.jsx("nav",{className:"hidden md:flex gap-1 px-2 pt-2","aria-label":"Editor tabs",children:r.map(a=>{const i=e===a.id,o=a.icon;return s.jsxs("button",{onClick:()=>t(a.id),className:J("group relative flex items-center gap-2 px-4 py-2.5 text-sm font-medium rounded-t-xl transition-all duration-200",i?"bg-background text-foreground":"text-muted-foreground hover:text-foreground hover:bg-background/50"),"aria-selected":i,role:"tab",children:[s.jsx(o,{className:J("h-4 w-4 transition-colors",i?Uw[a.id]:"text-muted-foreground group-hover:text-foreground")}),s.jsx("span",{children:a.label}),a.count!==void 0&&a.count>0&&s.jsx("span",{className:J("px-1.5 py-0.5 text-xs rounded-full transition-colors",i?Ih[a.id].active:`bg-muted text-muted-foreground ${Ih[a.id].hover}`),children:a.count}),i&&s.jsx("span",{className:J("absolute bottom-0 left-2 right-2 h-0.5 rounded-full",DL[a.id])})]},a.id)})}),s.jsx("nav",{className:"flex md:hidden overflow-x-auto gap-1 px-2 py-2","aria-label":"Editor tabs",style:{WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory",msOverflowStyle:"none",scrollbarWidth:"none"},children:r.map(a=>{const i=e===a.id,o=a.icon;return s.jsxs("button",{onClick:()=>t(a.id),className:J("group relative flex-shrink-0 flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200","min-h-[44px]",i?"bg-primary/10 text-primary":"text-muted-foreground active:bg-accent"),"aria-selected":i,role:"tab",style:{scrollSnapAlign:"center"},children:[s.jsx(o,{className:J("h-4 w-4 transition-colors",i?Uw[a.id]:"text-muted-foreground")}),s.jsx("span",{className:"whitespace-nowrap",children:a.label}),a.count!==void 0&&a.count>0&&s.jsx("span",{className:J("px-1.5 py-0.5 text-xs rounded-full transition-colors",i?Ih[a.id].active:"bg-muted text-muted-foreground"),children:a.count})]},a.id)})})]})}function AL({document:e,activeTab:t,onNavigate:n,onAddTable:r,onAddTemplate:a,onAddImport:i,selectedItemId:o}){const[c,d]=w.useState(!1),[p,h]=w.useState(!1),[m,v]=w.useState("");w.useEffect(()=>{const R=z=>{z.key==="Escape"&&c&&g()};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[c]),w.useEffect(()=>(c?window.document.body.style.overflow="hidden":window.document.body.style.overflow="",()=>{window.document.body.style.overflow=""}),[c]);const g=w.useCallback(()=>{h(!0),setTimeout(()=>{d(!1),h(!1),v("")},250)},[]),x=w.useCallback((R,z)=>{n(R,z),g()},[n,g]),y=w.useCallback(R=>{R==="table"?r():R==="template"?a():i(),g()},[r,a,i,g]),k=e.imports||[],N=e.tables,C=e.templates||[],T=m?N.filter(R=>R.name.toLowerCase().includes(m.toLowerCase())||R.id.toLowerCase().includes(m.toLowerCase())):N,j=m?C.filter(R=>R.name.toLowerCase().includes(m.toLowerCase())||R.id.toLowerCase().includes(m.toLowerCase())):C,D=m?k.filter(R=>R.alias.toLowerCase().includes(m.toLowerCase())||R.path.toLowerCase().includes(m.toLowerCase())):k,_=[{id:"metadata",label:"Metadata",icon:Or},{id:"tables",label:"Tables",icon:rr},{id:"templates",label:"Templates",icon:Vn},{id:"variables",label:"Variables",icon:Us},{id:"json",label:"JSON",icon:qm}],I=s.jsxs("div",{className:"mobile-overlay",role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:J("mobile-overlay-backdrop",p?"mobile-backdrop-exit":"mobile-backdrop-enter"),onClick:g,"aria-hidden":"true"}),s.jsxs("div",{className:J("mobile-overlay-content",p?"mobile-nav-exit":"mobile-nav-enter"),children:[s.jsxs("div",{className:"mobile-overlay-header",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Navigator"}),s.jsx("button",{onClick:g,className:"mobile-action-btn","aria-label":"Close navigation",children:s.jsx(Ut,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-3 border-b",children:s.jsxs("div",{className:"relative",children:[s.jsx(Pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx("input",{type:"text",value:m,onChange:R=>v(R.target.value),placeholder:"Search tables, templates...",className:"w-full pl-10 pr-4 py-3 text-base rounded-xl bg-muted/50 border border-border/50 focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),m&&s.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-accent",children:s.jsx(Ut,{className:"h-4 w-4 text-muted-foreground"})})]})}),s.jsxs("div",{className:"mobile-overlay-body",children:[!m&&s.jsxs("div",{className:"p-3 space-y-1",children:[s.jsx("div",{className:"mobile-section-header !static !bg-transparent !border-0 !p-0 !mb-2",children:"Quick Access"}),_.map(R=>s.jsxs("button",{onClick:()=>x(R.id),className:J("mobile-list-item w-full",t===R.id&&"bg-primary/10"),children:[s.jsx(R.icon,{className:J("h-5 w-5",t===R.id?"text-primary":"text-muted-foreground")}),s.jsx("span",{className:J("flex-1 text-left font-medium",t===R.id&&"text-primary"),children:R.label}),s.jsx(sn,{className:"h-4 w-4 text-muted-foreground/50"})]},R.id))]}),T.length>0&&s.jsxs("div",{className:"p-3 pt-0",children:[s.jsxs("div",{className:"mobile-section-header !static !bg-transparent !border-0 !p-0 !mb-2 flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(rr,{className:"h-4 w-4 text-[hsl(var(--mint))]"}),"Tables (",T.length,")"]}),!m&&s.jsx("button",{onClick:()=>y("table"),className:"p-1.5 rounded-lg hover:bg-accent","aria-label":"Add table",children:s.jsx(nr,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"space-y-1",children:T.map(R=>s.jsxs("button",{onClick:()=>x("tables",R.id),className:J("mobile-list-item w-full",o===R.id&&"bg-primary/10"),children:[s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("div",{className:J("font-medium truncate",o===R.id&&"text-primary"),children:R.name}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:R.id})]}),s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-muted text-muted-foreground",children:R.type})]},R.id))})]}),j.length>0&&s.jsxs("div",{className:"p-3 pt-0",children:[s.jsxs("div",{className:"mobile-section-header !static !bg-transparent !border-0 !p-0 !mb-2 flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4 text-[hsl(var(--lavender))]"}),"Templates (",j.length,")"]}),!m&&s.jsx("button",{onClick:()=>y("template"),className:"p-1.5 rounded-lg hover:bg-accent","aria-label":"Add template",children:s.jsx(nr,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"space-y-1",children:j.map(R=>s.jsx("button",{onClick:()=>x("templates",R.id),className:J("mobile-list-item w-full",o===R.id&&"bg-primary/10"),children:s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("div",{className:J("font-medium truncate",o===R.id&&"text-primary"),children:R.name}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:R.id})]})},R.id))})]}),D.length>0&&s.jsxs("div",{className:"p-3 pt-0",children:[s.jsxs("div",{className:"mobile-section-header !static !bg-transparent !border-0 !p-0 !mb-2 flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Pi,{className:"h-4 w-4 text-[hsl(var(--amber))]"}),"Includes (",D.length,")"]}),!m&&s.jsx("button",{onClick:()=>y("import"),className:"p-1.5 rounded-lg hover:bg-accent","aria-label":"Add import",children:s.jsx(nr,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"space-y-1",children:D.map((R,z)=>s.jsx("button",{onClick:()=>x("metadata",`import-${z}`),className:"mobile-list-item w-full",children:s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:R.alias}),s.jsx("div",{className:"text-xs text-muted-foreground truncate",children:R.path})]})},`import-${z}`))})]}),m&&T.length===0&&j.length===0&&D.length===0&&s.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Pr,{className:"h-8 w-8 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No results found"}),s.jsx("p",{className:"text-sm mt-1",children:"Try a different search term"})]})]})]})]});return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>d(!0),className:"mobile-fab mobile-only animate-fab-float","aria-label":"Open navigation","aria-expanded":c,children:s.jsx(Km,{className:"h-6 w-6"})}),c&&un.createPortal(I,window.document.body)]})}function _L({value:e,onChange:t,availableCollections:n,placeholder:r="Select collection or enter URL...",hasError:a=!1}){const[i,o]=w.useState(!1),[c,d]=w.useState(""),[p,h]=w.useState(0),m=w.useRef(null),v=w.useRef(null),g=w.useRef(null),[x,y]=w.useState({top:0,left:0,width:0}),k=w.useMemo(()=>n.map(q=>({id:q.id,name:q.name,namespace:q.namespace,isPreloaded:q.isPreloaded,tableCount:q.tableCount})),[n]),N=w.useMemo(()=>{if(!c.trim())return k;const q=c.toLowerCase();return k.filter($=>$.name.toLowerCase().includes(q)||$.namespace.toLowerCase().includes(q))},[k,c]),C=w.useMemo(()=>{const q=[],$=[];return N.forEach(G=>{G.isPreloaded?q.push(G):$.push(G)}),{preloaded:q,user:$}},[N]),T=w.useMemo(()=>k.find(q=>q.namespace===e),[k,e]);w.useEffect(()=>{if(i&&g.current){const q=g.current.getBoundingClientRect();y({top:q.bottom+4,left:q.left,width:q.width})}},[i]),w.useEffect(()=>{h(0)},[c]),w.useEffect(()=>{const q=$=>{v.current&&!v.current.contains($.target)&&g.current&&!g.current.contains($.target)&&(o(!1),d(""))};if(i)return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[i]);const j=w.useCallback(q=>{switch(q.key){case"ArrowDown":q.preventDefault(),i?h($=>Math.min($+1,N.length-1)):o(!0);break;case"ArrowUp":q.preventDefault(),h($=>Math.max($-1,0));break;case"Enter":q.preventDefault(),i&&N[p]&&D(N[p]);break;case"Escape":q.preventDefault(),o(!1),d("");break;case"Tab":o(!1),d("");break}},[i,N,p]),D=w.useCallback(q=>{t(q.namespace),o(!1),d("")},[t]),_=q=>{const $=q.target.value;d($),t($),i||o(!0)},I=()=>{o(!0),d(e)},R=(q,$,G)=>$.length===0?null:s.jsxs("div",{children:[s.jsx("div",{className:"px-3 py-1.5 text-xs font-semibold uppercase tracking-wider text-muted-foreground/70 bg-muted/30",children:q}),$.map((E,L)=>{const Z=G+L,X=E.namespace===e;return s.jsxs("button",{type:"button",className:J("w-full flex items-center gap-3 px-3 py-2 text-sm text-left transition-colors",Z===p?"bg-primary/10 text-primary":"hover:bg-accent/50"),onClick:()=>D(E),onMouseEnter:()=>h(Z),children:[s.jsx(Ou,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:E.name}),s.jsx("div",{className:"text-xs text-muted-foreground truncate font-mono",children:E.namespace})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs text-muted-foreground/60",children:[E.tableCount," tables"]}),X&&s.jsx(vn,{className:"h-4 w-4 text-primary"})]})]},E.id)})]},q),z=0,P=C.preloaded.length;return s.jsxs("div",{ref:g,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:m,type:"text",value:i?c:e,onChange:_,onFocus:I,onKeyDown:j,placeholder:r,className:J("w-full px-3 py-2 pr-8 text-sm rounded-lg border bg-background transition-colors font-mono text-xs","focus:outline-none focus:ring-2 focus:ring-primary/50",a?"border-destructive/50 focus:border-destructive":"border-border/50 focus:border-primary")}),s.jsx("button",{type:"button",onClick:()=>{var q;o(!i),i||(d(e),(q=m.current)==null||q.focus())},className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 hover:bg-accent rounded transition-colors",children:s.jsx(En,{className:J("h-4 w-4 text-muted-foreground transition-transform",i&&"rotate-180")})}),T&&!i&&s.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2",children:s.jsx(vn,{className:"h-4 w-4 text-green-500"})})]}),i&&un.createPortal(s.jsxs("div",{ref:v,className:"fixed z-50 bg-popover border border-border/50 rounded-xl shadow-xl overflow-hidden animate-fade-in",style:{top:x.top,left:x.left,width:x.width,minWidth:280},children:[s.jsx("div",{className:"px-3 py-2 border-b border-border/30 bg-muted/20",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(Pr,{className:"h-3 w-3"}),s.jsx("span",{children:"Type to search or enter a URL"})]})}),s.jsx("div",{className:"max-h-64 overflow-y-auto",children:N.length===0?s.jsx("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground",children:c.trim()?"No matching collections":"No collections available"}):s.jsxs(s.Fragment,{children:[R("Preloaded",C.preloaded,z),R("Your Collections",C.user,P)]})}),s.jsx("div",{className:"px-3 py-2 border-t border-border/30 bg-muted/30",children:s.jsxs("p",{className:"text-xs text-muted-foreground/70",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:""})," navigate",s.jsx("span",{className:"mx-2",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Enter"})," select",s.jsx("span",{className:"mx-2",children:""}),s.jsx("kbd",{className:"px-1 py-0.5 bg-background rounded text-[10px]",children:"Esc"})," close"]})})]}),document.body)]})}function RL({import_:e,index:t,onChange:n,onDelete:r,availableCollections:a}){const i=!e.path.trim()||!e.alias.trim(),o=e.alias.includes("."),c=w.useCallback((d,p)=>{n(t,{...e,[d]:p})},[e,t,n]);return s.jsxs("div",{className:J("group border rounded-xl p-4 transition-all hover:border-border",i||o?"border-destructive/50 bg-destructive/5":"border-border/50 bg-card/50"),children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:J("p-2 rounded-lg",i||o?"bg-destructive/10":"bg-[hsl(var(--amber)/0.1)]"),children:s.jsx(Pi,{className:J("h-4 w-4",i||o?"text-destructive":"text-[hsl(var(--amber))]")})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:["Alias ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx("input",{type:"text",value:e.alias,onChange:d=>c("alias",d.target.value),placeholder:"myCollection",className:J("w-full px-3 py-2 text-sm rounded-lg border bg-background transition-colors","focus:outline-none focus:ring-2 focus:ring-primary/50",o||!e.alias.trim()?"border-destructive/50 focus:border-destructive":"border-border/50 focus:border-primary")}),o&&s.jsxs("p",{className:"mt-1 text-xs text-destructive flex items-center gap-1",children:[s.jsx(Mu,{className:"h-3 w-3"}),"Alias cannot contain dots"]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:["Path ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(_L,{value:e.path,onChange:d=>c("path",d),availableCollections:a,placeholder:"Select collection or enter URL...",hasError:!e.path.trim()})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:["Description ",s.jsx("span",{className:"text-muted-foreground/50",children:"(optional)"})]}),s.jsx("input",{type:"text",value:e.description||"",onChange:d=>c("description",d.target.value||void 0),placeholder:"What does this import provide?",className:"w-full px-3 py-2 text-sm rounded-lg border border-border/50 bg-background transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"})]})]}),s.jsx("button",{onClick:()=>r(t),className:"p-2 opacity-0 group-hover:opacity-100 hover:bg-destructive/10 rounded-lg transition-all",title:"Delete import",children:s.jsx(ar,{className:"h-4 w-4 text-destructive"})})]}),e.alias.trim()&&!o&&s.jsx("div",{className:"mt-3 pt-3 border-t border-border/30",children:s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Use as:"," ",s.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-[hsl(var(--amber))]",children:`{{${e.alias}.tableId}}`})]})})]})}function IL({imports:e,onChange:t,currentNamespace:n}){const r=dt(c=>c.collections),a=w.useMemo(()=>{const c=Array.from(r.values());return n?c.filter(d=>d.namespace!==n):c},[r,n]),i=w.useCallback((c,d)=>{const p=[...e];p[c]=d,t(p)},[e,t]),o=w.useCallback(c=>{t(e.filter((d,p)=>p!==c))},[e,t]);return e.length===0?s.jsxs("div",{className:"border-2 border-dashed rounded-xl p-6 text-center",children:[s.jsx(Pi,{className:"h-8 w-8 text-muted-foreground/40 mx-auto mb-3"}),s.jsx("p",{className:"text-muted-foreground",children:"No imports yet"}),s.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Import external collections to reference their tables"})]}):s.jsx("div",{className:"space-y-3",children:e.map((c,d)=>s.jsx(RL,{import_:c,index:d,onChange:i,onDelete:o,availableCollections:a},d))})}function $L(e){return e.replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/[\u2013\u2014\u2212]/g,"-").replace(/[\u2018\u2019\u201A]/g,"'").replace(/[\u201C\u201D\u201E]/g,'"').replace(/\ufb01/g,"fi").replace(/\ufb02/g,"fl").replace(/\ufb03/g,"ffi").replace(/\ufb04/g,"ffl").replace(/\ufb00/g,"ff").replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g," ").replace(/[^\S\n]+/g," ").replace(/\n+/g," ").trim()}function ML(e){const n=e.replace(/[^a-zA-Z0-9\s]/g,"").split(/\s+/).filter(r=>r.length>0);return n.length===0?"table":n.map((r,a)=>{const i=r.toLowerCase();return a===0?i:i.charAt(0).toUpperCase()+i.slice(1)}).join("")}function FL(e){const t=[/^(?:1)?d(%|100)\s+/i,/^(?:1)?d(\d+)\s+/i];let n=null,r=e;for(const p of t){const h=e.match(p);if(h){const m=h[1];m==="%"?n=100:n=parseInt(m,10),r=e.slice(h[0].length);break}}const a=/(?:^|\s)(\d+(?:-\d+)?)\s/,i=r.match(a);let o,c;if(i&&i.index!==void 0){const p=i.index;o=r.slice(0,p).trim(),c=r.slice(p).trim()}else o=r.trim(),c="";n&&o.includes(`d${n}`)&&(o=o.replace(new RegExp(`d${n}`,"gi"),"").replace(/\s+/g," ").trim());const d=o.split(/\s+/);if(d.length>=2){const p=Math.floor(d.length/2),h=d.slice(0,p).join(" "),m=d.slice(p,p*2).join(" ");h===m&&(o=h)}return{dieType:n,tableName:o||"Untitled Table",remainingText:c||r}}function OL(e){const t=[],n=[],r=/(\d+)-(\d+)\s+/g,a=[...e.matchAll(r)];if(a.length>0){for(let d=0;d<a.length;d++){const p=a[d];let h=parseInt(p[1],10),m=parseInt(p[2],10);(p[2]==="00"||m===0)&&(m=100),(p[1]==="00"||h===0)&&(h=100);const v=p.index+p[0].length,g=d<a.length-1?a[d+1].index:e.length,x=e.slice(v,g).trim();x&&n.push({rangeStart:h,rangeEnd:m,value:x})}return n.sort((d,p)=>d.rangeStart-p.rangeStart),{entries:n,warnings:t}}const i=/(?:^|\s)(\d+)\s+(?=[A-Za-z"'])/g,o=[...e.matchAll(i)];if(o.length>0){const d=o.map(m=>parseInt(m[1],10)),p=d.every((m,v)=>v===0||m===d[v-1]+1),h=[];for(let m=0;m<o.length;m++){const v=o[m];let g=parseInt(v[1],10);v[1]==="00"&&(g=100);const x=v.index+v[0].length,y=m<o.length-1?o[m+1].index:e.length,k=e.slice(x,y).trim();k&&h.push({num:g,value:k,index:v.index})}!p&&h.length>2&&(t.push("Detected non-sequential numbers - attempting to reorder (may be multi-column PDF)"),h.sort((m,v)=>m.num-v.num));for(const m of h)n.push({rangeStart:m.num,rangeEnd:m.num,value:m.value});return{entries:n,warnings:t}}const c=e.split(/\.\s+/).map(d=>d.trim()).filter(d=>d.length>0);if(c.length>1){t.push("No numbers detected - splitting by sentences and using equal weights");for(let d=0;d<c.length;d++)n.push({rangeStart:d+1,rangeEnd:d+1,value:c[d].replace(/\.$/,"").trim()});return{entries:n,warnings:t}}return t.push("Could not parse entries - returning text as single entry"),n.push({rangeStart:1,rangeEnd:1,value:e.trim()}),{entries:n,warnings:t}}function PL(e,t){const n=[],r=[],a=[...e].sort((o,c)=>o.rangeStart-c.rangeStart);let i=0;for(const o of a)o.rangeStart>i+1&&i>0&&n.push(`Gap detected in ranges: ${i+1} to ${o.rangeStart-1}`),o.rangeStart<=i&&i>0&&n.push(`Overlapping ranges detected at ${o.rangeStart} (previous ended at ${i})`),i=o.rangeEnd;for(const o of a){const c={value:o.value};o.rangeStart!==o.rangeEnd||t?c.range=[o.rangeStart,o.rangeEnd]:c.weight=1,r.push(c)}return{entries:r,warnings:n}}function LL(e,t={}){const n=[],r=[];if(!e||typeof e!="string")return{success:!1,errors:["No text provided"],warnings:[]};const a=$L(e);if(!a)return{success:!1,errors:["Text is empty after normalization"],warnings:[]};const i=FL(a),o=i.tableName==="Untitled Table"&&t.defaultTableName?t.defaultTableName:i.tableName,c=OL(i.remainingText||a);if(n.push(...c.warnings),c.entries.length===0)return{success:!1,errors:["No entries could be extracted from text"],warnings:n};const d=PL(c.entries,i.dieType);return n.push(...d.warnings),{success:!0,table:{id:ML(o),name:o,type:"simple",entries:d.entries},warnings:n,errors:r}}function zL({isOpen:e,onClose:t,onImport:n}){const[r,a]=w.useState("input"),[i,o]=w.useState(""),[c,d]=w.useState(null),[p,h]=w.useState(null),m=w.useRef(null);w.useEffect(()=>{e||(a("input"),o(""),d(null),h(null))},[e]),w.useEffect(()=>{e&&r==="input"&&setTimeout(()=>{var T;return(T=m.current)==null?void 0:T.focus()},100)},[e,r]),w.useEffect(()=>{if(!e)return;const T=j=>{j.key==="Escape"&&t()};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[e,t]);const v=w.useCallback(()=>{const T=LL(i);d(T),T.success&&T.table?h({...T.table}):h(null),a("preview")},[i]),g=w.useCallback(()=>{p&&(n(p),t())},[p,n,t]),x=w.useCallback(()=>{a("input"),d(null),h(null)},[]),y=w.useCallback((T,j,D)=>{if(!p)return;const _=[...p.entries],I={..._[T]};j==="value"?I.value=D:j==="range"&&(I.range=D),_[T]=I,h({...p,entries:_})},[p]),k=w.useCallback((T,j,D)=>{if(!p)return;const _=[...p.entries],I={..._[T]},R=I.range||[1,1];j==="start"?I.range=[D,R[1]]:I.range=[R[0],D],_[T]=I,h({...p,entries:_})},[p]),N=w.useCallback(()=>{if(!p)return;const T=p.entries[p.entries.length-1],D=((T==null?void 0:T.range)||[0,0])[1]+1,_={value:"New entry",range:[D,D]};h({...p,entries:[...p.entries,_]})},[p]),C=w.useCallback(T=>{if(!p||p.entries.length<=1)return;const j=p.entries.filter((D,_)=>_!==T);h({...p,entries:j})},[p]);return e?un.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:t,children:s.jsxs("div",{className:J("bg-background border border-border rounded-lg shadow-xl","w-full max-w-2xl mx-4 max-h-[85vh] flex flex-col","animate-fade-in"),onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($x,{className:"w-5 h-5 text-primary"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Import Table"}),s.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-500 font-medium",children:"BETA"})]}),s.jsx("button",{onClick:t,className:"p-1.5 rounded-md hover:bg-accent text-muted-foreground hover:text-foreground transition-colors","aria-label":"Close",children:s.jsx(Ut,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 flex-1 overflow-auto",children:[r==="input"&&s.jsx(BL,{rawText:i,onChange:o,textareaRef:m}),r==="preview"&&s.jsx(UL,{result:c,editedTable:p,onUpdateTable:h,onUpdateEntry:y,onUpdateEntryRange:k,onAddEntry:N,onRemoveEntry:C})]}),s.jsx("div",{className:"px-4 py-3 border-t border-border flex justify-between",children:r==="preview"?s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:x,className:J("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:[s.jsx(aT,{className:"w-4 h-4"}),"Back"]}),s.jsxs("button",{onClick:g,disabled:!p,className:J("flex items-center gap-1.5 px-4 py-1.5 rounded-md text-sm font-medium","bg-primary text-primary-foreground","hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:[s.jsx(vn,{className:"w-4 h-4"}),"Import Table"]})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:t,className:J("px-3 py-1.5 rounded-md text-sm","hover:bg-accent transition-colors"),children:"Cancel"}),s.jsx("button",{onClick:v,disabled:!i.trim(),className:J("px-4 py-1.5 rounded-md text-sm font-medium","bg-primary text-primary-foreground","hover:bg-primary/90 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:"Parse Text"})]})})]})}),document.body):null}function BL({rawText:e,onChange:t,textareaRef:n}){return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paste text copied from a PDF or other source. The importer will attempt to detect the table format automatically."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{htmlFor:"raw-text",className:"text-sm font-medium",children:"Raw Table Text"}),s.jsx("textarea",{ref:n,id:"raw-text",value:e,onChange:r=>t(r.target.value),placeholder:`d6 Random Encounters
1 Wandering merchant
2 Pack of wolves
3 Mysterious stranger
4 Abandoned campsite
5 Hidden treasure
6 Ancient ruins`,className:J("w-full h-64 p-3 rounded-md border border-border bg-background","text-sm font-mono resize-y","placeholder:text-muted-foreground/50","focus:outline-none focus:ring-2 focus:ring-primary/50")})]}),s.jsxs("details",{className:"text-sm",children:[s.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground transition-colors",children:"Supported formats"}),s.jsxs("ul",{className:"mt-2 space-y-1 text-muted-foreground pl-4 list-disc",children:[s.jsx("li",{children:'d6/d20 tables: "d6 Table Name 1 Entry 2 Entry..."'}),s.jsx("li",{children:'d100 with ranges: "d100 Name 1-30 Entry 31-60 Entry..."'}),s.jsx("li",{children:"Multi-column PDF copies (will attempt to reorder)"}),s.jsx("li",{children:"No numbers: Entries separated by periods"}),s.jsx("li",{children:'Note: "00" is interpreted as 100'})]})]})]})}function UL({result:e,editedTable:t,onUpdateTable:n,onUpdateEntry:r,onUpdateEntryRange:a,onAddEntry:i,onRemoveEntry:o}){return e?e.success?t?s.jsxs("div",{className:"space-y-4",children:[e.warnings.length>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(ca,{className:"w-4 h-4 text-amber-500"}),s.jsx("h4",{className:"text-sm font-medium text-amber-500",children:"Warnings"})]}),s.jsx("ul",{className:"text-xs space-y-0.5 text-amber-500/80",children:e.warnings.map((c,d)=>s.jsx("li",{children:c},d))})]}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{htmlFor:"table-id",className:"text-sm font-medium",children:"Table ID"}),s.jsx("input",{id:"table-id",type:"text",value:t.id,onChange:c=>n({...t,id:c.target.value}),className:J("w-full px-3 py-1.5 rounded-md border border-border bg-background","text-sm font-mono","focus:outline-none focus:ring-2 focus:ring-primary/50")})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{htmlFor:"table-name",className:"text-sm font-medium",children:"Table Name"}),s.jsx("input",{id:"table-name",type:"text",value:t.name,onChange:c=>n({...t,name:c.target.value}),className:J("w-full px-3 py-1.5 rounded-md border border-border bg-background","text-sm","focus:outline-none focus:ring-2 focus:ring-primary/50")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium",children:["Entries (",t.entries.length,")"]}),s.jsxs("button",{onClick:i,className:J("flex items-center gap-1 px-2 py-1 rounded text-xs","hover:bg-accent transition-colors text-muted-foreground"),children:[s.jsx(nr,{className:"w-3.5 h-3.5"}),"Add Entry"]})]}),s.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-auto pr-1",children:t.entries.map((c,d)=>{var p,h;return s.jsxs("div",{className:J("flex items-start gap-2 p-2 rounded-md bg-muted/50 border border-border/50"),children:[s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[s.jsx("input",{type:"number",value:((p=c.range)==null?void 0:p[0])??d+1,onChange:m=>a(d,"start",parseInt(m.target.value)||1),className:J("w-12 px-1.5 py-1 rounded border border-border bg-background","text-xs text-center","focus:outline-none focus:ring-1 focus:ring-primary/50")}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"-"}),s.jsx("input",{type:"number",value:((h=c.range)==null?void 0:h[1])??d+1,onChange:m=>a(d,"end",parseInt(m.target.value)||1),className:J("w-12 px-1.5 py-1 rounded border border-border bg-background","text-xs text-center","focus:outline-none focus:ring-1 focus:ring-primary/50")})]}),s.jsx("input",{type:"text",value:c.value,onChange:m=>r(d,"value",m.target.value),className:J("flex-1 px-2 py-1 rounded border border-border bg-background","text-sm","focus:outline-none focus:ring-1 focus:ring-primary/50")}),s.jsx("button",{onClick:()=>o(d),disabled:t.entries.length<=1,className:J("p-1 rounded hover:bg-accent transition-colors flex-shrink-0","text-muted-foreground hover:text-destructive","disabled:opacity-30 disabled:cursor-not-allowed"),"aria-label":"Remove entry",children:s.jsx(ar,{className:"w-4 h-4"})})]},d)})})]})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No table to display."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg bg-destructive/10 border border-destructive/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ca,{className:"w-5 h-5 text-destructive"}),s.jsx("h3",{className:"font-medium text-destructive",children:"Parse Errors"})]}),s.jsx("ul",{className:"text-sm space-y-1 text-destructive/80",children:e.errors.map((c,d)=>s.jsx("li",{children:c},d))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Go back and edit the text, then try parsing again."})]}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No results to display."})}function HL({document:e,jsonContent:t,onDocumentChange:n,onJsonChange:r,onValidationChange:a,syncToJson:i,collectionId:o}){var ke,Se,ue,_e;const c=nt(oe=>oe.editorActiveTab),d=nt(oe=>oe.setEditorActiveTab),p=nt(oe=>oe.editorSidebarCollapsed),h=nt(oe=>oe.setEditorSidebarCollapsed),m=nt(oe=>oe.setEditorSelectedItemId),v=nt(oe=>oe.editorFocusedItemId),g=nt(oe=>oe.setEditorFocusedItemId),x=nt(oe=>oe.editorLastExplicitItemId),y=nt(oe=>oe.setEditorLastExplicitItemId),k=w.useRef(null),N=w.useRef(null),[C,T]=w.useState(!1),[j,D]=w.useState(0),[_,I]=w.useState(new Set),[R,z]=w.useState(new Set),[P,q]=w.useState(!1),$=w.useRef(null),G=w.useCallback((oe,me)=>{z(ae=>{const we=new Set(ae);return me?(we.add(oe),y(oe)):we.delete(oe),we})},[y]),E=w.useMemo(()=>{if(c!=="tables"&&c!=="templates"||P&&x)return x;if(v)return v;const me=(c==="tables"?e.tables.map(ae=>ae.id):(e.templates||[]).map(ae=>ae.id)).find(ae=>_.has(ae)&&R.has(ae));return me||x},[v,_,R,c,e.tables,e.templates,x,P]);w.useEffect(()=>{m(E)},[E,m]),w.useEffect(()=>{if(x&&k.current){const oe=k.current.querySelector(`[data-item-id="${x}"]`);oe&&(q(!0),$.current&&clearTimeout($.current),oe.scrollIntoView({behavior:"smooth",block:"start"}),$.current=setTimeout(()=>{q(!1)},800))}return()=>{$.current&&clearTimeout($.current)}},[x]),w.useEffect(()=>{if(c!=="tables"&&c!=="templates")return;I(new Set);const oe=setTimeout(()=>{k.current&&(N.current=new IntersectionObserver(me=>{I(ae=>{const we=new Set(ae);return me.forEach(De=>{const He=De.target.getAttribute("data-item-id");He&&(De.isIntersecting?we.add(He):we.delete(He))}),we})},{root:k.current,threshold:.1}),k.current.querySelectorAll("[data-item-id]").forEach(me=>{var ae;(ae=N.current)==null||ae.observe(me)}))},100);return()=>{var me;clearTimeout(oe),(me=N.current)==null||me.disconnect()}},[c,e.tables,e.templates]),w.useEffect(()=>{if(o){const oe=dt.getState().getCollection(o);oe&&e.metadata.namespace===oe.namespace&&(dt.getState().updateCollectionDocument(o,e),D(me=>me+1))}},[o,e.imports,e.metadata.namespace]);const L=w.useMemo(()=>e.tables.map(oe=>{var me;return{id:oe.id,name:oe.name,type:oe.type,description:oe.description,tags:oe.tags,hidden:oe.hidden,entryCount:oe.type==="simple"?(me=oe.entries)==null?void 0:me.length:void 0,resultType:oe.resultType}}),[e.tables]),Z=w.useMemo(()=>(e.templates||[]).map(oe=>({id:oe.id,name:oe.name,description:oe.description,tags:oe.tags,resultType:oe.resultType})),[e.templates]),X=w.useMemo(()=>e.tables.map(oe=>oe.id),[e.tables]),K=w.useMemo(()=>o?dt.getState().getImportedTableList(o,!0):[],[o,j]),ee=w.useMemo(()=>o?dt.getState().getImportedTemplateList(o):[],[o,j]),U=w.useMemo(()=>{const oe=new Map;for(const me of e.tables)oe.set(me.id,me);return oe},[e.tables]),M=w.useMemo(()=>{const oe=new Map;for(const me of e.templates||[])oe.set(me.id,me);return oe},[e.templates]),F=pF({localTables:L,localTemplates:Z,importedTables:K,importedTemplates:ee,variables:e.variables||{},sharedVariables:e.shared||{}}),B=w.useCallback(oe=>{const me={...e,metadata:oe};n(me),i(me)},[e,n,i]),le=w.useCallback(oe=>{const me={...e,imports:oe.length>0?oe:void 0};n(me),i(me)},[e,n,i]),pe=w.useCallback(oe=>{const me={...e,tables:oe};n(me),i(me)},[e,n,i]),de=w.useCallback(oe=>{const me={...e,templates:oe.length>0?oe:void 0};n(me),i(me)},[e,n,i]),je=w.useCallback(oe=>{const me={...e,variables:Object.keys(oe).length>0?oe:void 0};n(me),i(me)},[e,n,i]),ye=w.useCallback(oe=>{const me={...e,shared:Object.keys(oe).length>0?oe:void 0};n(me),i(me)},[e,n,i]),Te=w.useCallback(()=>{const oe=e.imports||[],me={path:"",alias:`import${oe.length+1}`};le([...oe,me]),d("metadata")},[e.imports,le]),Ie=w.useCallback(()=>{const oe=`table${e.tables.length+1}`,me={id:oe,name:"New Table",type:"simple",entries:[{value:"New entry"}]};pe([...e.tables,me]),d("tables"),y(oe)},[e.tables,pe,d,y]),ve=w.useCallback(oe=>{const me=e.tables.map(He=>He.id);let ae=oe.id,we=1;for(;me.includes(ae);)ae=`${oe.id}${we++}`;const De={...oe,id:ae};pe([...e.tables,De]),d("tables"),y(ae)},[e.tables,pe,d,y]),qe=w.useCallback(()=>{const oe=e.templates||[],me=`template${oe.length+1}`,ae={id:me,name:"New Template",pattern:"You encounter {{example}}!"};de([...oe,ae]),d("templates"),y(me)},[e.templates,de,d,y]),st=w.useCallback(oe=>{const me=e.imports||[];le(me.filter((ae,we)=>we!==oe))},[e.imports,le]),O=w.useCallback(oe=>{if(e.tables.length<=1){alert("Cannot delete the last table. A collection must have at least one table.");return}pe(e.tables.filter((me,ae)=>ae!==oe))},[e.tables,pe]),xe=w.useCallback(oe=>{const me=e.templates||[];de(me.filter((ae,we)=>we!==oe))},[e.templates,de]),te=w.useCallback((oe,me)=>{const ae=[...e.tables];ae[oe]=me,pe(ae)},[e.tables,pe]),V=w.useCallback((oe,me)=>{const ae=[...e.templates||[]];ae[oe]=me,de(ae)},[e.templates,de]),W=w.useCallback((oe,me)=>{d(oe),me&&y(me)},[d,y]),se={tables:e.tables.length,templates:((ke=e.templates)==null?void 0:ke.length)||0};return s.jsxs("div",{className:"flex h-[calc(100vh-12rem)] md:h-[calc(100vh-12rem)] h-[calc(100vh-8rem)] border rounded-2xl overflow-hidden bg-background",children:[s.jsx("div",{className:"hidden md:flex h-full",children:s.jsx(TL,{document:e,isCollapsed:p,onToggleCollapse:()=>h(!p),onNavigate:W,onAddImport:Te,onAddTable:Ie,onAddTemplate:qe,onDeleteImport:st,onDeleteTable:O,onDeleteTemplate:xe,selectedItemId:E??void 0})}),s.jsx(AL,{document:e,activeTab:c,onNavigate:W,onAddTable:Ie,onAddTemplate:qe,onAddImport:Te,selectedItemId:E??void 0}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(jL,{activeTab:c,onTabChange:d,tableCounts:se}),s.jsxs("div",{ref:k,className:"flex-1 overflow-y-auto p-4 md:p-6",children:[c==="metadata"&&s.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Collection Metadata"}),s.jsx(c3,{value:e.metadata,onChange:B})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Includes"}),s.jsxs("button",{onClick:Te,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[s.jsx(nr,{className:"h-4 w-4"}),"Add Import"]})]}),s.jsx(IL,{imports:e.imports||[],onChange:le,currentNamespace:e.metadata.namespace})]})]}),c==="tables"&&s.jsxs("div",{className:"space-y-4 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:["Tables (",e.tables.length,")"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[s.jsx($x,{className:"h-4 w-4"}),"Import Table",s.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-500 font-medium",children:"BETA"})]}),s.jsxs("button",{onClick:Ie,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[s.jsx(nr,{className:"h-4 w-4"}),"Add Table"]})]})]}),s.jsx("div",{className:"space-y-4",children:e.tables.map((oe,me)=>s.jsx("div",{"data-item-id":oe.id,children:s.jsx(wL,{table:oe,onChange:ae=>te(me,ae),onDelete:()=>O(me),availableTableIds:X,defaultExpanded:x===oe.id||e.tables.length===1,collectionId:o,onFocus:()=>g(oe.id),onBlur:()=>g(null),onExpandChange:ae=>G(oe.id,ae),localTables:L,localTemplates:Z,importedTables:K,importedTemplates:ee,suggestions:F,tableMap:U,templateMap:M,sharedVariables:e.shared})},`table-${me}`))})]}),c==="templates"&&s.jsxs("div",{className:"space-y-4 animate-fade-in",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:["Templates (",((Se=e.templates)==null?void 0:Se.length)||0,")"]}),s.jsxs("button",{onClick:qe,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm border rounded-lg hover:bg-accent transition-colors",children:[s.jsx(nr,{className:"h-4 w-4"}),"Add Template"]})]}),(((ue=e.templates)==null?void 0:ue.length)||0)>0?s.jsx("div",{className:"space-y-4",children:(_e=e.templates)==null?void 0:_e.map((oe,me)=>{var ae;return s.jsx("div",{"data-item-id":oe.id,children:s.jsx(CL,{template:oe,onChange:we=>V(me,we),onDelete:()=>xe(me),localTables:L,localTemplates:Z,importedTables:K,importedTemplates:ee,suggestions:F,tableMap:U,templateMap:M,documentShared:e.shared,defaultExpanded:x===oe.id||(((ae=e.templates)==null?void 0:ae.length)||0)===1,collectionId:o,onFocus:()=>g(oe.id),onBlur:()=>g(null),onExpandChange:we=>G(oe.id,we)})},`template-${me}`)})}):s.jsxs("div",{className:"border-2 border-dashed rounded-xl p-8 text-center text-muted-foreground",children:[s.jsx("p",{children:'No templates yet. Click "Add Template" to create one.'}),s.jsxs("p",{className:"text-sm mt-2",children:["Templates combine multiple tables using patterns like"," ",s.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:"{{tableId}}"})]})]})]}),c==="variables"&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Variables"}),s.jsx(EL,{variables:e.variables||{},shared:e.shared||{},onVariablesChange:je,onSharedChange:ye,collectionId:o,localTables:L,localTemplates:Z,importedTables:K,importedTemplates:ee,suggestions:F,tableMap:U,templateMap:M})]}),c==="json"&&s.jsx("div",{className:"animate-fade-in h-full flex flex-col",children:s.jsx(l3,{value:t,onChange:r,onValidationChange:a,height:"calc(100vh - 20rem)",filename:`${e.metadata.namespace||"untitled"}.json`})})]})]}),s.jsx(zL,{isOpen:C,onClose:()=>T(!1),onImport:ve})]})}function qL({currentCollectionId:e,isDirty:t=!1,onSwitchAttempt:n}){const r=Gi(),{collections:a,getAllCollections:i}=dt(),[o,c]=w.useState(!1),[d,p]=w.useState(""),[h,m]=w.useState(-1),v=w.useRef(null),g=w.useRef(null),x=w.useRef(null),y=e?a.get(e):null,{preloaded:k,userCreated:N,imported:C}=w.useMemo(()=>{const R=i();return{preloaded:R.filter(z=>z.source==="preloaded"),userCreated:R.filter(z=>z.source==="user"),imported:R.filter(z=>z.source==="file"||z.source==="zip")}},[i,a]),T=w.useMemo(()=>{const R=d.toLowerCase().trim(),z=P=>!R||P.name.toLowerCase().includes(R)||P.namespace.toLowerCase().includes(R)||P.tags.some(q=>q.toLowerCase().includes(R));return{preloaded:k.filter(z),userCreated:N.filter(z),imported:C.filter(z)}},[k,N,C,d]),j=w.useMemo(()=>{const R=[];return R.push({type:"new"}),T.userCreated.forEach(z=>R.push({type:"collection",data:z})),T.imported.forEach(z=>R.push({type:"collection",data:z})),T.preloaded.forEach(z=>R.push({type:"collection",data:z})),R},[T]);w.useEffect(()=>{const R=z=>{v.current&&!v.current.contains(z.target)&&(c(!1),p(""),m(-1))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]),w.useEffect(()=>{o&&g.current&&g.current.focus()},[o]),w.useEffect(()=>{var R;h>=0&&x.current&&((R=x.current.querySelectorAll("[data-item]")[h])==null||R.scrollIntoView({block:"nearest"}))},[h]);const D=w.useCallback(R=>{n&&!n(R)||(c(!1),p(""),m(-1),R===null?r("/editor",{state:{intent:"new"}}):R!==e&&r(`/editor/${R}`))},[r,e,n]),_=w.useCallback(R=>{if(!o){(R.key==="Enter"||R.key===" "||R.key==="ArrowDown")&&(R.preventDefault(),c(!0));return}switch(R.key){case"Escape":R.preventDefault(),c(!1),p(""),m(-1);break;case"ArrowDown":R.preventDefault(),m(z=>Math.min(z+1,j.length-1));break;case"ArrowUp":R.preventDefault(),m(z=>Math.max(z-1,0));break;case"Enter":if(R.preventDefault(),h>=0&&h<j.length){const z=j[h];D(z.type==="new"?null:z.data.id)}break}},[o,h,j,D]),I=k.length+N.length+C.length;return s.jsxs("div",{ref:v,className:"relative",children:[s.jsxs("button",{type:"button",onClick:()=>c(!o),onKeyDown:_,className:J("group flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200","border border-border/50 hover:border-border hover:bg-accent/50","focus:outline-none focus:ring-2 focus:ring-primary/30",o&&"border-primary/50 bg-accent/50 ring-2 ring-primary/20"),children:[s.jsx("div",{className:J("flex items-center justify-center w-8 h-8 rounded-lg transition-colors",y?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:y?y.source==="preloaded"?s.jsx(Lr,{className:"w-4 h-4"}):s.jsx(Or,{className:"w-4 h-4"}):s.jsx(nr,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex flex-col items-start min-w-0",children:[s.jsx("span",{className:"text-sm font-semibold truncate max-w-[200px]",children:(y==null?void 0:y.name)||"New Collection"}),s.jsxs("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",children:[(y==null?void 0:y.namespace)||"Untitled",t&&s.jsx("span",{className:"ml-1.5 text-amber-500 dark:text-amber-400",children:" unsaved"})]})]}),s.jsx(En,{className:J("w-4 h-4 text-muted-foreground transition-transform duration-200",o&&"rotate-180")})]}),o&&s.jsxs("div",{className:J("absolute top-full left-0 mt-2 w-80 z-50","bg-popover border border-border rounded-2xl shadow-xl","animate-slide-up overflow-hidden"),style:{boxShadow:"0 10px 40px -10px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 0, 0, 0.05)"},children:[s.jsxs("div",{className:"p-3 border-b border-border/50",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx("input",{ref:g,type:"text",value:d,onChange:R=>{p(R.target.value),m(0)},onKeyDown:_,placeholder:"Search collections...",className:J("w-full pl-9 pr-4 py-2 text-sm rounded-lg","bg-muted/50 border border-transparent","placeholder:text-muted-foreground","focus:outline-none focus:border-primary/30 focus:bg-background")})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2 px-1",children:[s.jsxs("span",{className:"text-xs text-muted-foreground",children:[I," collection",I!==1?"s":""]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:" navigate   select"})]})]}),s.jsxs("div",{ref:x,className:"max-h-80 overflow-y-auto py-2",onKeyDown:_,children:[s.jsx("div",{className:"px-2 mb-1",children:s.jsxs("button",{type:"button","data-item":!0,onClick:()=>D(null),className:J("w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-colors","hover:bg-primary/10",h===0&&"bg-primary/10",!e&&"bg-primary/5 ring-1 ring-primary/20"),children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-lg bg-primary/10 text-primary",children:s.jsx(nr,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-sm font-medium",children:"New Collection"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Create from scratch"})]})]})}),T.userCreated.length>0&&s.jsx($h,{label:"Your Collections",icon:s.jsx(Or,{className:"w-3.5 h-3.5"}),collections:T.userCreated,currentId:e,focusedIndex:h,startIndex:1,onSelect:D}),T.imported.length>0&&s.jsx($h,{label:"Imported",icon:s.jsx(Fx,{className:"w-3.5 h-3.5"}),collections:T.imported,currentId:e,focusedIndex:h,startIndex:1+T.userCreated.length,onSelect:D}),T.preloaded.length>0&&s.jsx($h,{label:"Built-in Examples",icon:s.jsx(Zm,{className:"w-3.5 h-3.5"}),collections:T.preloaded,currentId:e,focusedIndex:h,startIndex:1+T.userCreated.length+T.imported.length,onSelect:D}),j.length===1&&d&&s.jsx("div",{className:"px-4 py-8 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:['No collections match "',d,'"']})})]})]})]})}function $h({label:e,icon:t,collections:n,currentId:r,focusedIndex:a,startIndex:i,onSelect:o}){return s.jsxs("div",{className:"mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:[t,e,s.jsxs("span",{className:"text-muted-foreground/60",children:["(",n.length,")"]})]}),s.jsx("div",{className:"px-2 space-y-0.5",children:n.map((c,d)=>{const p=i+d,h=c.id===r,m=a===p;return s.jsxs("button",{type:"button","data-item":!0,onClick:()=>o(c.id),className:J("w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-all duration-150","hover:bg-accent/80",m&&"bg-accent/80",h&&"bg-primary/5 ring-1 ring-primary/20"),children:[s.jsx("div",{className:J("flex items-center justify-center w-8 h-8 rounded-lg transition-colors",h?"bg-primary/15 text-primary":"bg-muted/80 text-muted-foreground"),children:c.source==="preloaded"?s.jsx(Lr,{className:"w-4 h-4"}):s.jsx(Or,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:J("text-sm font-medium truncate",h&&"text-primary"),children:c.name}),h&&s.jsx(vn,{className:"w-3.5 h-3.5 text-primary flex-shrink-0"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("span",{className:"truncate",children:c.namespace}),s.jsxs("span",{className:"flex-shrink-0",children:[" ",c.tableCount," table",c.tableCount!==1?"s":""]})]})]})]},c.id)})})]})}const WL=`# Syntax Quick Reference

## Table References

| Syntax | Description |
|--------|-------------|
| \`{{tableName}}\` | Roll once on table |
| \`{{alias.tableName}}\` | Roll on table from imported file |
| \`{{namespace.tableName}}\` | Roll on namespaced table |
| \`{{3*tableName}}\` | Roll 3 times |
| \`{{3*unique*tableName}}\` | Roll 3 times, no duplicates |
| \`{{3*tableName\\|", "}}\` | Roll 3 times, custom separator |
| \`{{tableName#instance}}\` | Named instance |
| \`{{$count*tableName}}\` | Use shared variable as count |

## Roll Again

*In entry values only*

| Syntax | Description |
|--------|-------------|
| \`{{again}}\` | Roll once more on this table |
| \`{{2*again}}\` | Roll 2 more times |
| \`{{2*unique*again}}\` | Roll 2 more times, no duplicates |
| \`{{dice:1d4*again}}\` | Roll 1d4 times on this table |
| \`{{2*again\\|" and "}}\` | Roll 2 more times with custom separator |
| \`{{2*unique*again\\|"; "}}\` | Roll 2 unique with custom separator |

## Dice

| Syntax | Description |
|--------|-------------|
| \`{{dice:3d6}}\` | Roll 3d6 |
| \`{{dice:4d6k3}}\` | Roll 4d6, keep highest 3 |
| \`{{dice:2d6kl1}}\` | Roll 2d6, keep lowest 1 |
| \`{{dice:1d6!}}\` | Exploding d6 |
| \`{{dice:2d8+5}}\` | Roll 2d8, add 5 |
| \`{{dice:1d4*tableName}}\` | Roll 1d4, roll that many times on table |

## Math Expressions

| Syntax | Description |
|--------|-------------|
| \`{{math:$a + $b}}\` | Add two variables |
| \`{{math:$a - $b}}\` | Subtract variables |
| \`{{math:$a * $b}}\` | Multiply variables |
| \`{{math:$a / $b}}\` | Integer division (rounds toward zero) |
| \`{{math:($a + $b) * 2}}\` | Grouping with parentheses |
| \`{{math:dice:2d6 + $mod}}\` | Inline dice with variable |
| \`{{math:@hd * 4 + 10}}\` | Using placeholders |

## Variables & Placeholders

| Syntax | Description |
|--------|-------------|
| \`{{$variableName}}\` | Static or shared variable |
| \`{{$alias.variableName}}\` | Variable from imported file |
| \`{{@placeholder.property}}\` | Placeholder property |
| \`{{@self.description}}\` | Current entry's description |
| \`{{@self.value}}\` | Current entry's raw value string |

## Roll Capture

| Syntax | Description |
|--------|-------------|
| \`{{3*table >> $var}}\` | Capture 3 rolls into $var |
| \`{{3*unique*table >> $var}}\` | Capture 3 unique rolls |
| \`{{$n*table >> $var}}\` | Variable count capture |
| \`{{dice:1d4*table >> $var}}\` | Dice count capture |
| \`{{3*table >> $var\\|silent}}\` | Capture without output |
| \`{{3*table >> $var\\|", "}}\` | Capture with custom separator |

## Capture Access

| Syntax | Description |
|--------|-------------|
| \`{{$var}}\` | All values (comma-separated) |
| \`{{$var\\|"; "}}\` | All values (custom separator) |
| \`{{$var.count}}\` | Number of items captured |
| \`{{$var[0]}}\` | First item's value |
| \`{{$var[-1]}}\` | Last item's value |
| \`{{$var[0].@prop}}\` | First item's @prop from sets |

## Property Aggregation

| Syntax | Description |
|--------|-------------|
| \`{{collect:$var.value}}\` | All values |
| \`{{collect:$var.@prop}}\` | All @prop values |
| \`{{collect:$var.@prop\\|", "}}\` | Custom separator |
| \`{{collect:$var.@prop\\|unique}}\` | Deduplicated |
| \`{{collect:$var.@prop\\|unique\\|", "}}\` | Deduplicated with separator |

## Switch Expressions

Inline conditional value selection with \`switch[condition:result]\` syntax.

### Standalone Switch

| Syntax | Description |
|--------|-------------|
| \`{{switch[cond:result].else[fallback]}}\` | Single condition with fallback |
| \`{{switch[c1:r1].switch[c2:r2].else[fb]}}\` | Multiple conditions (first match wins) |
| \`{{switch[cond:result]}}\` | No fallback (returns empty if no match) |

### Attached Switch

Apply switch to transform any expression result. Use \`$\` to reference the base result.

| Syntax | Description |
|--------|-------------|
| \`{{dice:1d20.switch[$>=10:"hit"].else["miss"]}}\` | Transform dice result |
| \`{{mood.switch[$=="angry":"rage"].else["calm"]}}\` | Transform table result |
| \`{{$var.switch[$=="a":"A"].else[$var]}}\` | Transform variable (returns base if no match) |

### Result Types

| Type | Example |
|------|---------|
| String literal | \`"he"\`, \`"Critical Hit!"\` |
| Interpolated string | \`", glowing {{$color}} light"\` |
| Capture property | \`$race.@maleName\` |
| Table reference | \`{{spellBook}}\` |
| Placeholder | \`@creature.type\` |

**Note:** Quoted strings containing \`{{}}\` are interpolated (like template literals).

### Condition Operators

| Operator | Description |
|----------|-------------|
| \`==\`, \`!=\` | Equality/inequality |
| \`>\`, \`<\`, \`>=\`, \`<=\` | Numeric comparison |
| \`contains\` | Substring match (case-insensitive) |
| \`matches\` | Regex match |
| \`&&\`, \`\\|\\|\`, \`!\` | Logical AND, OR, NOT |
| \`()\` | Grouping |

### Examples

\`\`\`
{{switch[$gender=="male":"he"].switch[$gender=="female":"she"].else["they"]}}

{{dice:1d20.switch[$>=20:"Critical!"].switch[$>=10:"Hit"].else["Miss"]}}

{{switch[$gender=="male":$race.@maleName].else[$race.@femaleName]}}

{{switch[$class=="wizard" && $level>=5:{{powerSpell}}].else[{{basicSpell}}]}}
\`\`\`

## Shared Block

\`\`\`json
"shared": {
  "count": "{{dice:2d4}}",
  "total": "{{math:$count + 5}}",
  "damage": "{{math:dice:1d8 + $strMod}}"
}
\`\`\`

## Shared Variables with Property Access

Variables capture sets for property access:

\`\`\`json
"shared": {
  "hero": "{{race}}",
  "enemy": "{{race}}"
}
\`\`\`

| Syntax | Description |
|--------|-------------|
| \`"varName": "{{table}}"\` | Define shared variable |
| \`{{$varName}}\` | Access captured value |
| \`{{$varName.@property}}\` | Access captured set property |

Property access with dynamic table resolution:
- If property value is a table ID, it's rolled automatically
- If property value is a template ID, it's evaluated automatically
- Otherwise, the raw string value is returned

## Imports

\`\`\`json
"imports": [
  { "path": "./file.json", "alias": "name" }
]
\`\`\`

Reference with: \`{{name.tableId}}\`

## Entry Options

### Ranges
| Syntax | Description |
|--------|-------------|
| \`"range": [1, 50]\` | Equivalent to weight 50 |
| \`"range": [51, 75]\` | Equivalent to weight 25 |
| \`"range": [99, 100]\` | Equivalent to weight 2 |

### Weights
| Syntax | Description |
|--------|-------------|
| \`"weight": 0\` | Disables entry (won't be rolled) |
| \`"weight": 1\` | Default weight |

### Assets
\`\`\`json
"assets": {
  "image": "path/to/image.png",
  "token": "path/to/token.webp"
}
\`\`\`

### Tags
\`\`\`json
"tags": ["category", "subcategory", "keyword"]
\`\`\`

## Result Type

| Property | Description |
|----------|-------------|
| \`"resultType": "creature"\` | On tables, entries, templates |

- Case-insensitive, user-definable
- Precedence: Entry > Table > Composite
- Template resultType overrides all

## Inheritance

| Syntax | Description |
|--------|-------------|
| \`"extends": "parentTable"\` | Single-level inheritance |
| \`"extends": "alias.table"\` | Cross-file inheritance |

- Multi-level supported (A > B > C)
- Property-level merging
- \`null\` removes inherited property

## Markdown in Values

| Syntax | Description |
|--------|-------------|
| \`**bold**\` | Bold text |
| \`*italic*\` or \`_italic_\` | Italic text |
| \`\` \`code\` \`\` | Inline code |
| \`[text](url)\` | Hyperlink |

## Escaping

| Syntax | Description |
|--------|-------------|
| \`\\{{\` | Literal {{ |
| \`\\}}\` | Literal }} |
| \`\\"\` | Literal " in separator |
`;function VL(){const[e,t]=w.useState(!1);w.useEffect(()=>{if(!e)return;const r=a=>{a.key==="Escape"&&t(!1)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e]),w.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[e]);const n=w.useCallback(r=>{r.target===r.currentTarget&&t(!1)},[]);return s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>t(!0),className:J("fixed bottom-6 right-6 z-40","w-10 h-10 rounded-full","flex items-center justify-center","text-muted-foreground/50 hover:text-muted-foreground","hover:bg-accent/50","transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"),"aria-label":"Syntax quick reference",title:"Syntax quick reference",children:s.jsx(cT,{className:"w-5 h-5"})}),e&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"help-modal-title",children:s.jsxs("div",{className:J("relative bg-background border rounded-2xl shadow-lg","w-full max-w-2xl max-h-[80vh]","mx-4 flex flex-col","animate-slide-up"),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[s.jsx("h2",{id:"help-modal-title",className:"text-lg font-semibold",children:"Quick Reference"}),s.jsx("button",{onClick:()=>t(!1),className:J("p-2 rounded-lg","text-muted-foreground hover:text-foreground","hover:bg-accent","transition-colors"),"aria-label":"Close",children:s.jsx(Ut,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:s.jsx("div",{className:"prose-help",children:s.jsx(_a,{remarkPlugins:[pi],components:{h1:()=>null,h2:({children:r})=>s.jsx("h2",{className:"text-base font-semibold mt-6 mb-3 first:mt-0 text-foreground",children:r}),h3:({children:r})=>s.jsx("h3",{className:"text-sm font-medium mt-4 mb-2 text-foreground",children:r}),table:({children:r})=>s.jsx("div",{className:"overflow-x-auto my-3",children:s.jsx("table",{className:"w-full border-collapse text-sm",children:r})}),thead:({children:r})=>s.jsx("thead",{className:"border-b border-border bg-muted/50",children:r}),th:({children:r})=>s.jsx("th",{className:"px-3 py-2 text-left font-medium text-xs",children:r}),td:({children:r})=>s.jsx("td",{className:"px-3 py-2 border-b border-border/50 text-muted-foreground",children:r}),code:({className:r,children:a,...i})=>r?s.jsx("code",{className:J(r,"text-xs"),...i,children:a}):s.jsx("code",{className:"rounded bg-muted px-1 py-0.5 text-xs font-mono text-primary",...i,children:a}),pre:({children:r})=>s.jsx("pre",{className:"overflow-x-auto rounded-lg bg-muted/50 p-3 text-xs my-3",children:r}),p:({children:r})=>s.jsx("p",{className:"text-sm text-muted-foreground my-2",children:r}),ul:({children:r})=>s.jsx("ul",{className:"list-disc pl-4 space-y-1 my-2 text-sm text-muted-foreground",children:r}),em:({children:r})=>s.jsx("em",{className:"text-muted-foreground not-italic text-xs",children:r})},children:WL})})}),s.jsxs("div",{className:"px-6 py-3 border-t text-xs text-muted-foreground text-center",children:["Press ",s.jsx("kbd",{className:"px-1.5 py-0.5 rounded bg-muted font-mono",children:"Esc"})," or click outside to close"]})]})})]})}function GL({isOpen:e,onClose:t,document:n,collectionId:r}){const a=dt(C=>C.engine),i=dt(C=>C.collections),[o,c]=w.useState("choice"),[d,p]=w.useState(null),[h,m]=w.useState([]),[v,g]=w.useState(0),x=w.useMemo(()=>n.imports||[],[n.imports]),y=w.useCallback(()=>{c("choice"),p(null),m([]),g(0),t()},[t]),k=w.useCallback(()=>{Sf(n),y()},[n,y]),N=w.useCallback(async()=>{c("resolving"),p(null);try{await new Promise(D=>setTimeout(D,100));const C=EF(n,r,a,i);C.unresolvedPaths.length>0&&m(C.unresolvedPaths);const T=[C.primary,...C.dependencies];g(T.length);const j=`${n.metadata.namespace||"collection"}-bundle.zip`;await M1(T,j),c("complete"),setTimeout(()=>{y()},1500)}catch(C){p(C instanceof Error?C.message:"Export failed"),c("choice")}},[n,r,a,i,y]);return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm animate-fade-in",onClick:o==="choice"?y:void 0,"aria-hidden":"true"}),s.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"export-dialog-title",className:"relative card-elevated border border-white/10 max-w-md w-full mx-4 animate-slide-up",children:[o==="choice"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-white/5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"icon-container icon-amber",children:s.jsx(Zm,{className:"h-5 w-5"})}),s.jsx("h2",{id:"export-dialog-title",className:"text-lg font-semibold",children:"Export with Dependencies?"})]}),s.jsx("button",{onClick:y,className:"p-2 rounded-xl hover:bg-white/5 transition-colors","aria-label":"Close dialog",children:s.jsx(Ut,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-5 space-y-4",children:[s.jsxs("p",{className:"text-muted-foreground",children:["This collection references ",x.length," external collection",x.length!==1?"s":"",". Would you like to include them in the export?"]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:x.map(C=>s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5",children:[s.jsx(Pi,{className:"h-4 w-4 text-[hsl(var(--amber))] shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"font-medium text-sm truncate",children:C.alias}),s.jsx("p",{className:"text-xs text-muted-foreground truncate",children:C.path})]})]},C.alias))}),d&&s.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-destructive/10 border border-destructive/20",children:[s.jsx(ca,{className:"h-4 w-4 text-destructive shrink-0"}),s.jsx("p",{className:"text-sm text-destructive",children:d})]})]}),s.jsxs("div",{className:"p-5 border-t border-white/5 flex gap-3",children:[s.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 border border-border/50 rounded-xl hover:bg-accent transition-colors",children:"Export Only This"}),s.jsxs("button",{onClick:N,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-xl hover:bg-primary/90 transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ps,{className:"h-4 w-4"}),"Include Dependencies"]})]})]}),o==="resolving"&&s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Er,{className:"h-12 w-12 animate-spin text-primary"}),s.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"Resolving dependencies..."}),s.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"This may take a moment for larger collections"})]})]})}),o==="complete"&&s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:"icon-container icon-mint",children:s.jsx(Yh,{className:"h-8 w-8"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-semibold text-mint",children:"Export Complete!"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[v," collection",v!==1?"s":""," ","exported"]}),h.length>0&&s.jsxs("p",{className:"text-sm text-amber-500 mt-2",children:[h.length," import",h.length!==1?"s":""," could not be resolved"]})]})]})})]})]}):null}w.forwardRef(function({label:t,value:n,onChange:r,placeholder:a,required:i,description:o,type:c="text",multiline:d=!1,rows:p=3,className:h,min:m,max:v,step:g,pattern:x,disabled:y,autoCapitalize:k="sentences",autoCorrect:N="off"},C){const[T,j]=w.useState(!1),[D,_]=w.useState(n),I=w.useRef(null),R=typeof window<"u"&&window.innerWidth<768;w.useEffect(()=>{T||_(n)},[n,T]);const z=w.useCallback(()=>{R&&!y&&(j(!0),_(n))},[R,y,n]),P=w.useCallback(()=>{r(D),j(!1)},[D,r]),q=w.useCallback(()=>{_(n),j(!1)},[n]);w.useEffect(()=>{T&&I.current&&requestAnimationFrame(()=>{var L;(L=I.current)==null||L.focus()})},[T]),w.useEffect(()=>{const L=Z=>{Z.key==="Escape"&&T&&q()};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[T,q]),w.useEffect(()=>(T?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[T]);const $={value:D,onChange:L=>{const Z=L.target.value;_(Z),R||r(Z)},placeholder:a,disabled:y,autoCapitalize:k,autoCorrect:N,pattern:x,"aria-label":t,"aria-required":i};if(!R){const L=J("w-full p-2 border rounded-md bg-background text-sm","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",y&&"opacity-50 cursor-not-allowed",h);return d?s.jsx("textarea",{ref:C,...$,rows:p,className:J(L,"resize-y")}):s.jsx("input",{ref:C,type:c,min:m,max:v,step:g,...$,className:L})}const G=s.jsx("button",{type:"button",onClick:z,disabled:y,className:J("w-full p-3 text-left text-base border rounded-xl bg-background","min-h-[48px] transition-colors","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50",y&&"opacity-50 cursor-not-allowed",!n&&"text-muted-foreground",h),children:n||a||`Enter ${t.toLowerCase()}...`}),E=T?s.jsxs("div",{className:"mobile-focus-overlay mobile-focus-expand",children:[s.jsxs("div",{className:"mobile-focus-header",children:[s.jsx("button",{onClick:q,className:"mobile-action-btn","aria-label":"Cancel",children:s.jsx(Ut,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h3",{className:"font-semibold",children:t}),i&&s.jsx("span",{className:"text-xs text-destructive",children:"Required"})]}),s.jsx("button",{onClick:P,className:"mobile-action-btn bg-primary/10 text-primary","aria-label":"Done",children:s.jsx(vn,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mobile-focus-content",children:[o&&s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:o}),d?s.jsx("textarea",{ref:I,...$,rows:Math.max(p,5),className:J("w-full p-4 text-lg border rounded-xl bg-card","resize-none","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50"),onKeyDown:L=>{(L.metaKey||L.ctrlKey)&&L.key==="Enter"&&(L.preventDefault(),P())}}):s.jsx("input",{ref:I,type:c,min:m,max:v,step:g,...$,className:J("w-full p-4 text-lg border rounded-xl bg-card","focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary/50"),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),P())}})]}),s.jsx("div",{className:"mobile-focus-footer",children:s.jsx("button",{onClick:P,className:"w-full py-3 px-6 bg-primary text-primary-foreground font-semibold rounded-xl",children:"Done"})})]}):null;return s.jsxs(s.Fragment,{children:[G,E&&un.createPortal(E,document.body)]})});const KL=()=>({metadata:{name:"",namespace:"",version:"1.0.0",specVersion:"1.0"},tables:[{id:"example",name:"Example Table",type:"simple",entries:[{value:"First result"},{value:"Second result"}]}]});function Hw(){const{collectionId:e}=yx(),t=Gi(),n=pa(),{getCollectionDocument:r,saveCollection:a,collections:i,isInitialized:o}=dt(),c=nt(F=>F.lastEditorCollectionId),d=nt(F=>F.setLastEditorCollectionId),[p,h]=w.useState(null),[m,v]=w.useState(""),[g,x]=w.useState(""),[y,k]=w.useState(!1),[N,C]=w.useState(null),[T,j]=w.useState(!1),[D,_]=w.useState([]),[I,R]=w.useState(!0),[z,P]=w.useState(!1),q=!e,$=n.state,G=($==null?void 0:$.intent)==="new";w.useEffect(()=>{o&&(G||!e&&c&&i.has(c)&&t(`/editor/${c}`,{replace:!0}))},[e,c,i,o,t,G]),w.useEffect(()=>{if(o){if(R(!0),e){const F=r(e);if(F){h(F);const B=Gc(JSON.stringify(F));v(B),x(B),d(e)}else t("/editor",{replace:!0})}else{const F=KL();h(F);const B=Gc(JSON.stringify(F));v(B),x(B)}R(!1)}},[e,o,r,t,d]);const E=m!==g,L=QS(E),Z=w.useCallback(F=>{const B=Gc(JSON.stringify(F));v(B)},[]),X=w.useCallback(F=>{h(F)},[]),K=w.useCallback(F=>{v(F);try{const B=JSON.parse(F);h(B)}catch{}},[]),ee=w.useCallback(F=>{_(F)},[]),U=w.useCallback(async()=>{if(p){if(!p.metadata.name.trim()){C("Name is required");return}if(!p.metadata.namespace.trim()){C("Namespace is required");return}if(D.some(F=>F.severity==="error")){C("Please fix validation errors before saving");return}k(!0),C(null),j(!1);try{const F=e||p.metadata.namespace.replace(/\./g,"-");if(!e&&i.has(F)){C(`A collection with ID "${F}" already exists. Use a different namespace.`),k(!1);return}await a(F,p,"user");const B=Gc(JSON.stringify(p));un.flushSync(()=>{x(B),v(B)}),j(!0),setTimeout(()=>j(!1),2e3),e||t(`/editor/${F}`,{replace:!0})}catch(F){C(F instanceof Error?F.message:"Failed to save")}finally{k(!1)}}},[p,e,i,a,t,D]),M=w.useCallback(()=>{p&&(p.imports&&p.imports.length>0?P(!0):Sf(p))},[p]);return w.useEffect(()=>{const F=B=>{(B.metaKey||B.ctrlKey)&&B.key==="s"&&(B.preventDefault(),U())};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[U]),I||!o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Er,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):p?s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.editor}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:q?"Create Collection":"Edit Collection"}),s.jsx(qL,{currentCollectionId:e,isDirty:E})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[D.length>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[D.filter(F=>F.severity==="error").length>0&&s.jsxs("span",{className:"text-destructive flex items-center gap-1",children:[s.jsx(Ut,{className:"h-4 w-4"}),D.filter(F=>F.severity==="error").length," errors"]}),D.filter(F=>F.severity==="warning").length>0&&s.jsxs("span",{className:"text-yellow-600 flex items-center gap-1",children:[s.jsx(ca,{className:"h-4 w-4"}),D.filter(F=>F.severity==="warning").length," warnings"]})]}),T&&s.jsxs("span",{className:"flex items-center gap-1 text-sm text-green-600",children:[s.jsx(vn,{className:"h-4 w-4"}),"Saved"]}),N&&s.jsxs("span",{className:"flex items-center gap-1 text-sm text-destructive",children:[s.jsx(ca,{className:"h-4 w-4"}),N]}),s.jsxs("button",{onClick:U,disabled:y||!E,className:J("flex items-center gap-2 px-4 py-2 rounded-xl transition-all font-medium",E?"bg-primary text-primary-foreground hover:bg-primary/90":"border border-border/50 hover:bg-accent",y&&"opacity-50 cursor-not-allowed"),children:[y?s.jsx(Er,{className:"h-4 w-4 animate-spin"}):s.jsx(MT,{className:"h-4 w-4"}),"Save",E&&!y&&s.jsx("span",{className:"text-xs opacity-70",children:"(unsaved)"})]}),s.jsxs("button",{onClick:M,disabled:!p,className:"flex items-center gap-2 px-4 py-2 border border-border/50 rounded-xl hover:bg-accent transition-colors disabled:opacity-50",children:[s.jsx(Ps,{className:"h-4 w-4"}),"Export"]})]})]}),s.jsx(HL,{document:p,jsonContent:m,onDocumentChange:X,onJsonChange:K,onValidationChange:ee,syncToJson:Z,collectionId:e}),s.jsx(VL,{}),L.state==="blocked"&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-background border rounded-2xl p-6 max-w-md w-full mx-4 space-y-4 animate-slide-up",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-xl",children:s.jsx(ca,{className:"h-6 w-6 text-yellow-600"})}),s.jsx("h2",{className:"text-lg font-semibold",children:"Unsaved Changes"})]}),s.jsx("p",{className:"text-muted-foreground",children:"You have unsaved changes. Are you sure you want to leave? Your changes will be lost."}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{var F;return(F=L.reset)==null?void 0:F.call(L)},className:"px-4 py-2 border rounded-xl hover:bg-accent transition-colors",children:"Stay"}),s.jsx("button",{onClick:()=>{var F;return(F=L.proceed)==null?void 0:F.call(L)},className:"px-4 py-2 bg-destructive text-destructive-foreground rounded-xl hover:bg-destructive/90 transition-colors",children:"Leave"})]})]})}),z&&p&&s.jsx(GL,{isOpen:z,onClose:()=>P(!1),document:p,collectionId:e})]})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-muted-foreground",children:"Failed to load document"})})}const YL=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g,ZL=Object.hasOwnProperty;class QL{constructor(){this.occurrences,this.reset()}slug(t,n){const r=this;let a=JL(t,n===!0);const i=a;for(;ZL.call(r.occurrences,a);)r.occurrences[i]++,a=i+"-"+r.occurrences[i];return r.occurrences[a]=0,a}reset(){this.occurrences=Object.create(null)}}function JL(e,t){return typeof e!="string"?"":(t||(e=e.toLowerCase()),e.replace(YL,"").replace(/ /g,"-"))}function XL(e){const t=e.type==="element"?e.tagName.toLowerCase():"",n=t.length===2&&t.charCodeAt(0)===104?t.charCodeAt(1):0;return n>48&&n<55?n-48:void 0}function ez(e){return"children"in e?jk(e):"value"in e?e.value:""}function tz(e){return e.type==="text"?e.value:"children"in e?jk(e):""}function jk(e){let t=-1;const n=[];for(;++t<e.children.length;)n[t]=tz(e.children[t]);return n.join("")}const nz={},qw=new QL;function rz(e){const n=(e||nz).prefix||"";return function(r){qw.reset(),Sl(r,"element",function(a){XL(a)&&!a.properties.id&&(a.properties.id=n+qw.slug(ez(a)))})}}const Ww=(function(e,t,n){const r=Cl(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if(typeof t=="number"){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(t=e.children.indexOf(t),t<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(r(e.children[t],t,e))return e.children[t]}),Zi=(function(e){if(e==null)return sz;if(typeof e=="string")return iz(e);if(typeof e=="object")return az(e);if(typeof e=="function")return Uf(e);throw new Error("Expected function, string, or array as `test`")});function az(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Zi(e[n]);return Uf(r);function r(...a){let i=-1;for(;++i<t.length;)if(t[i].apply(this,a))return!0;return!1}}function iz(e){return Uf(t);function t(n){return n.tagName===e}}function Uf(e){return t;function t(n,r,a){return!!(oz(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function sz(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function oz(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const Vw=/\n/g,Gw=/[\t ]+/g,Am=Zi("br"),Kw=Zi(fz),lz=Zi("p"),Yw=Zi("tr"),cz=Zi(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",mz,gz]),Ak=Zi(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function uz(e,t){const n=t||{},r="children"in e?e.children:[],a=Ak(e),i=Ik(e,{whitespace:n.whitespace||"normal"}),o=[];(e.type==="text"||e.type==="comment")&&o.push(...Rk(e,{breakBefore:!0,breakAfter:!0}));let c=-1;for(;++c<r.length;)o.push(..._k(r[c],e,{whitespace:i,breakBefore:c?void 0:a,breakAfter:c<r.length-1?Am(r[c+1]):a}));const d=[];let p;for(c=-1;++c<o.length;){const h=o[c];typeof h=="number"?p!==void 0&&h>p&&(p=h):h&&(p!==void 0&&p>-1&&d.push(`
`.repeat(p)||" "),p=-1,d.push(h))}return d.join("")}function _k(e,t,n){return e.type==="element"?dz(e,t,n):e.type==="text"?n.whitespace==="normal"?Rk(e,n):pz(e):[]}function dz(e,t,n){const r=Ik(e,n),a=e.children||[];let i=-1,o=[];if(cz(e))return o;let c,d;for(Am(e)||Yw(e)&&Ww(t,e,Yw)?d=`
`:lz(e)?(c=2,d=2):Ak(e)&&(c=1,d=1);++i<a.length;)o=o.concat(_k(a[i],e,{whitespace:r,breakBefore:i?void 0:c,breakAfter:i<a.length-1?Am(a[i+1]):d}));return Kw(e)&&Ww(t,e,Kw)&&o.push("	"),c&&o.unshift(c),d&&o.push(d),o}function Rk(e,t){const n=String(e.value),r=[],a=[];let i=0;for(;i<=n.length;){Vw.lastIndex=i;const d=Vw.exec(n),p=d&&"index"in d?d.index:n.length;r.push(hz(n.slice(i,p).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),i===0?t.breakBefore:!0,p===n.length?t.breakAfter:!0)),i=p+1}let o=-1,c;for(;++o<r.length;)r[o].charCodeAt(r[o].length-1)===8203||o<r.length-1&&r[o+1].charCodeAt(0)===8203?(a.push(r[o]),c=void 0):r[o]?(typeof c=="number"&&a.push(c),a.push(r[o]),c=0):(o===0||o===r.length-1)&&a.push(0);return a}function pz(e){return[String(e.value)]}function hz(e,t,n){const r=[];let a=0,i;for(;a<e.length;){Gw.lastIndex=a;const o=Gw.exec(e);i=o?o.index:e.length,!a&&!i&&o&&!t&&r.push(""),a!==i&&r.push(e.slice(a,i)),a=o?i+o[0].length:i}return a!==i&&!n&&r.push(""),r.join(" ")}function Ik(e,t){if(e.type==="element"){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}function mz(e){return!!(e.properties||{}).hidden}function fz(e){return e.tagName==="td"||e.tagName==="th"}function gz(e){return e.tagName==="dialog"&&!(e.properties||{}).open}function vz(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},p={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},h={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(p,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},v={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},g=t.optional(a)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],y=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],k=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],N=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],j={type:y,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:k},D={className:"function.dispatch",relevance:0,keywords:{_hint:N},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},_=[D,m,c,n,e.C_BLOCK_COMMENT_MODE,h,p],I={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:j,contains:_.concat([{begin:/\(/,end:/\)/,keywords:j,contains:_.concat(["self"]),relevance:0}]),relevance:0},R={className:"function",begin:"("+o+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:j,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:j,relevance:0},{begin:g,returnBegin:!0,contains:[v],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[p,h]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:j,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,p,h,c,{begin:/\(/,end:/\)/,keywords:j,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,p,h,c]}]},c,n,e.C_BLOCK_COMMENT_MODE,m]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:j,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(I,R,D,_,[m,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:j,contains:["self",c]},{begin:e.IDENT_RE+"::",keywords:j},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function yz(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=vz(e),r=n.keywords;return r.type=[...r.type,...t.type],r.literal=[...r.literal,...t.literal],r.built_in=[...r.built_in,...t.built_in],r._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n}function bz(e){const t=e.regex,n={},r={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},r]});const a={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},i=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},c={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,a]};a.contains.push(c);const d={match:/\\"/},p={className:"string",begin:/'/,end:/'/},h={match:/\\'/},m={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},v=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],g=e.SHEBANG({binary:`(${v.join("|")})`,relevance:10}),x={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},y=["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],k=["true","false"],N={match:/(\/[a-z._-]+)+/},C=["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset"],T=["alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias"],j=["autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp"],D=["chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"];return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:y,literal:k,built_in:[...C,...T,"set","shopt",...j,...D]},contains:[g,e.SHEBANG(),x,m,i,o,N,c,d,p,h,n]}}function wz(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",o="("+r+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},p={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},h={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(p,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},v={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},g=t.optional(a)+e.IDENT_RE+"\\s*\\(",k={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},N=[m,c,n,e.C_BLOCK_COMMENT_MODE,h,p],C={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:k,contains:N.concat([{begin:/\(/,end:/\)/,keywords:k,contains:N.concat(["self"]),relevance:0}]),relevance:0},T={begin:"("+o+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:k,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:k,relevance:0},{begin:g,returnBegin:!0,contains:[e.inherit(v,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,p,h,c,{begin:/\(/,end:/\)/,keywords:k,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,p,h,c]}]},c,n,e.C_BLOCK_COMMENT_MODE,m]};return{name:"C",aliases:["h"],keywords:k,disableAutodetect:!0,illegal:"</",contains:[].concat(C,T,N,[m,{begin:e.IDENT_RE+"::",keywords:k},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:m,strings:p,keywords:k}}}function xz(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),r="decltype\\(auto\\)",a="[a-zA-Z_]\\w*::",o="(?!struct)("+r+"|"+t.optional(a)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",c={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},p={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+"\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)"+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},h={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},m={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(p,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},v={className:"title",begin:t.optional(a)+e.IDENT_RE,relevance:0},g=t.optional(a)+e.IDENT_RE+"\\s*\\(",x=["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],y=["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],k=["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"],N=["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"],j={type:y,keyword:x,literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:k},D={className:"function.dispatch",relevance:0,keywords:{_hint:N},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},_=[D,m,c,n,e.C_BLOCK_COMMENT_MODE,h,p],I={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:j,contains:_.concat([{begin:/\(/,end:/\)/,keywords:j,contains:_.concat(["self"]),relevance:0}]),relevance:0},R={className:"function",begin:"("+o+"[\\*&\\s]+)+"+g,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:j,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:r,keywords:j,relevance:0},{begin:g,returnBegin:!0,contains:[v],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[p,h]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:j,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,p,h,c,{begin:/\(/,end:/\)/,keywords:j,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,p,h,c]}]},c,n,e.C_BLOCK_COMMENT_MODE,m]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:j,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(I,R,D,_,[m,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:j,contains:["self",c]},{begin:e.IDENT_RE+"::",keywords:j},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}function kz(e){const t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],n=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],r=["default","false","null","true"],a=["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"],i=["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"],o={keyword:a.concat(i),built_in:t,literal:r},c=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),d={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},p={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},h={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},m=e.inherit(h,{illegal:/\n/}),v={className:"subst",begin:/\{/,end:/\}/,keywords:o},g=e.inherit(v,{illegal:/\n/}),x={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,g]},y={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},v]},k=e.inherit(y,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},g]});v.contains=[y,x,h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.C_BLOCK_COMMENT_MODE],g.contains=[k,x,m,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const N={variants:[p,y,x,h,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},C={begin:"<",end:">",contains:[{beginKeywords:"in out"},c]},T=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",j={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:o,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},N,d,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},c,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[c,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[c,C,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+T+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:o,contains:[{beginKeywords:n.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,C],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,relevance:0,contains:[N,d,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},j]}}const Nz=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Cz=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Sz=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Ez=[...Cz,...Sz],Tz=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Dz=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),jz=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Az=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function _z(e){const t=e.regex,n=Nz(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},a="and or not only",i=/@-?\w[\w]*(-\w+)*/,o="[a-zA-Z-][a-zA-Z0-9_-]*",c=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+o,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Dz.join("|")+")"},{begin:":(:)?("+jz.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Az.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...c,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...c,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:a,attribute:Tz.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...c,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+Ez.join("|")+")\\b"}]}}function Rz(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function Iz(e){const i={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:i,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:i,illegal:/["']/}]}]}}function $z(e){const t=e.regex,n=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(n,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}function Mz(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},r=e.COMMENT();r.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const a={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},i={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},c={begin:/\[/,end:/\]/,contains:[r,i,a,o,n,"self"],relevance:0},d=/[A-Za-z0-9_-]+/,p=/"(\\"|[^"])*"/,h=/'[^']*'/,m=t.either(d,p,h),v=t.concat(m,"(\\s*\\.\\s*",m,")*",t.lookahead(/\s*=\s*[^#\s]/));return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[r,{className:"section",begin:/\[+/,end:/\]+/},{begin:v,className:"attr",starts:{end:/$/,contains:[r,c,i,a,o,n]}}]}}var Es="[0-9](_*[0-9])*",Qc=`\\.(${Es})`,Jc="[0-9a-fA-F](_*[0-9a-fA-F])*",Zw={className:"number",variants:[{begin:`(\\b(${Es})((${Qc})|\\.)?|(${Qc}))[eE][+-]?(${Es})[fFdD]?\\b`},{begin:`\\b(${Es})((${Qc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Qc})[fFdD]?\\b`},{begin:`\\b(${Es})[fFdD]\\b`},{begin:`\\b0[xX]((${Jc})\\.?|(${Jc})?\\.(${Jc}))[pP][+-]?(${Es})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Jc})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function $k(e,t,n){return n===-1?"":e.replace(t,r=>$k(e,t,n-1))}function Fz(e){const t=e.regex,n="[-a-zA-Z_$][-a-zA-Z_$0-9]*",r=n+$k("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),d={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},p={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},h={className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:d,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+r+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:d,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:d,relevance:0,contains:[p,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,Zw,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},Zw,p]}}const Qw="[A-Za-z$_][0-9A-Za-z$_]*",Oz=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Pz=["true","false","null","undefined","NaN","Infinity"],Mk=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Fk=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Ok=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Lz=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],zz=[].concat(Ok,Mk,Fk);function Bz(e){const t=e.regex,n=(K,{after:ee})=>{const U="</"+K[0].slice(1);return K.input.indexOf(U,ee)!==-1},r=Qw,a={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,ee)=>{const U=K[0].length+K.index,M=K.input[U];if(M==="<"||M===","){ee.ignoreMatch();return}M===">"&&(n(K,{after:U})||ee.ignoreMatch());let F;const B=K.input.substring(U);if(F=B.match(/^\s*=/)){ee.ignoreMatch();return}if((F=B.match(/^\s+extends\s+/))&&F.index===0){ee.ignoreMatch();return}}},c={$pattern:Qw,keyword:Oz,literal:Pz,built_in:zz,"variable.language":Lz},d="[0-9](_?[0-9])*",p=`\\.(${d})`,h="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${h})((${p})|\\.)?|(${p}))[eE][+-]?(${d})\\b`},{begin:`\\b(${h})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},v={className:"subst",begin:"\\$\\{",end:"\\}",keywords:c,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"css"}},y={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"graphql"}},k={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,v]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},T=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,x,y,k,{match:/\$\d+/},m];v.contains=T.concat({begin:/\{/,end:/\}/,keywords:c,contains:["self"].concat(T)});const j=[].concat(C,v.contains),D=j.concat([{begin:/(\s*)\(/,end:/\)/,keywords:c,contains:["self"].concat(j)}]),_={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:D},I={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},R={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Mk,...Fk]}},z={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[_],illegal:/%/},q={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function $(K){return t.concat("(?!",K.join("|"),")")}const G={match:t.concat(/\b/,$([...Ok,"super","import"].map(K=>`${K}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},E={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},L={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},_]},Z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",X={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(Z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[_]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:c,exports:{PARAMS_CONTAINS:D,CLASS_REFERENCE:R},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),z,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,x,y,k,C,{match:/\$\d+/},m,R,{scope:"attr",match:r+t.lookahead(":"),relevance:0},X,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:Z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:D}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:i},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[_,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},E,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[_]},G,q,I,L,{match:/\$[(.]/}]}}function Uz(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],a={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,a,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}var Ts="[0-9](_*[0-9])*",Xc=`\\.(${Ts})`,eu="[0-9a-fA-F](_*[0-9a-fA-F])*",Hz={className:"number",variants:[{begin:`(\\b(${Ts})((${Xc})|\\.)?|(${Xc}))[eE][+-]?(${Ts})[fFdD]?\\b`},{begin:`\\b(${Ts})((${Xc})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Xc})[fFdD]?\\b`},{begin:`\\b(${Ts})[fFdD]\\b`},{begin:`\\b0[xX]((${eu})\\.?|(${eu})?\\.(${eu}))[pP][+-]?(${Ts})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${eu})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function qz(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},r={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},a={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},i={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[i,a]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,i,a]}]};a.contains.push(o);const c={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},d={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(o,{className:"string"}),"self"]}]},p=Hz,h=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),m={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},v=m;return v.variants[1].contains=[m],m.variants[1].contains=[v],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,h,n,r,c,d,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[m,e.C_LINE_COMMENT_MODE,h],relevance:0},e.C_LINE_COMMENT_MODE,h,c,d,o,e.C_NUMBER_MODE]},h]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},c,d]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:`
`},p]}}const Wz=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),Vz=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Gz=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],Kz=[...Vz,...Gz],Yz=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Pk=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),Lk=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Zz=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),Qz=Pk.concat(Lk).sort().reverse();function Jz(e){const t=Wz(e),n=Qz,r="and or not only",a="[\\w-]+",i="("+a+"|@\\{"+a+"\\})",o=[],c=[],d=function(T){return{className:"string",begin:"~?"+T+".*?"+T}},p=function(T,j,D){return{className:T,begin:j,relevance:D}},h={$pattern:/[a-z-]+/,keyword:r,attribute:Yz.join(" ")},m={begin:"\\(",end:"\\)",contains:c,keywords:h,relevance:0};c.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,d("'"),d('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,m,p("variable","@@?"+a,10),p("variable","@\\{"+a+"\\}"),p("built_in","~?`[^`]*?`"),{className:"attribute",begin:a+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const v=c.concat({begin:/\{/,end:/\}/,contains:o}),g={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(c)},x={begin:i+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Zz.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:c}}]},y={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:h,returnEnd:!0,contains:c,relevance:0}},k={className:"variable",variants:[{begin:"@"+a+"\\s*:",relevance:15},{begin:"@"+a}],starts:{end:"[;}]",returnEnd:!0,contains:v}},N={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:i,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:`[<='$"]`,relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,g,p("keyword","all\\b"),p("variable","@\\{"+a+"\\}"),{begin:"\\b("+Kz.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,p("selector-tag",i,0),p("selector-id","#"+i),p("selector-class","\\."+i,0),p("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Pk.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Lk.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:v},{begin:"!important"},t.FUNCTION_DISPATCH]},C={begin:a+`:(:)?(${n.join("|")})`,returnBegin:!0,contains:[N]};return o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,y,k,C,x,N,g,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:`[=>'/<($"]`,contains:o}}function Xz(e){const t="\\[=*\\[",n="\\]=*\\]",r={begin:t,end:n,contains:["self"]},a=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[r],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:a.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:a}].concat(a)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[r],relevance:5}])}}function eB(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},r={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,n]},a={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},i={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,r,a,i,o]}}function tB(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},a={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},c=/[A-Za-z][A-Za-z0-9+.-]*/,d={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,c,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},p={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},h={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},m=e.inherit(p,{contains:[]}),v=e.inherit(h,{contains:[]});p.contains.push(v),h.contains.push(m);let g=[n,d];return[p,h,m,v].forEach(N=>{N.contains=N.contains.concat(g)}),g=g.concat(p,h),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},n,i,p,h,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},a,r,d,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function nB(e){const t={className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,c={"variable.language":["this","super"],$pattern:n,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},d={$pattern:n,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:c,illegal:"</",contains:[t,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+d.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:d,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}function rB(e){const t=e.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","class","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","field","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","method","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,a={$pattern:/[\w.]+/,keyword:n.join(" ")},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:a},o={begin:/->\{/,end:/\}/},c={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},d={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[c]},p={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},h=[e.BACKSLASH_ESCAPE,i,d],m=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],v=(y,k,N="\\1")=>{const C=N==="\\1"?N:t.concat(N,k);return t.concat(t.concat("(?:",y,")"),k,/(?:\\.|[^\\\/])*?/,C,/(?:\\.|[^\\\/])*?/,N,r)},g=(y,k,N)=>t.concat(t.concat("(?:",y,")"),k,/(?:\\.|[^\\\/])*?/,N,r),x=[d,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:h,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},p,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:v("s|tr|y",t.either(...m,{capture:!0}))},{begin:v("s|tr|y","\\(","\\)")},{begin:v("s|tr|y","\\[","\\]")},{begin:v("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:g("(?:m|qr)?",/\//,/\//)},{begin:g("m|qr",t.either(...m,{capture:!0}),/\1/)},{begin:g("m|qr",/\(/,/\)/)},{begin:g("m|qr",/\[/,/\]/)},{begin:g("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,c]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,c,p]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=x,o.contains=x,{name:"Perl",aliases:["pl","pm"],keywords:a,contains:x}}function aB(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,r=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),a=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),i=t.concat(/[A-Z]+/,n),o={scope:"variable",match:"\\$+"+r},c={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},d={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},p=e.inherit(e.APOS_STRING_MODE,{illegal:null}),h=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(d)}),m={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(d),"on:begin":(E,L)=>{L.data._beginMatch=E[1]||E[2]},"on:end":(E,L)=>{L.data._beginMatch!==E[1]&&L.ignoreMatch()}},v=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),g=`[ 	
]`,x={scope:"string",variants:[h,p,m,v]},y={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},k=["false","null","true"],N=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],C=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],j={keyword:N,literal:(E=>{const L=[];return E.forEach(Z=>{L.push(Z),Z.toLowerCase()===Z?L.push(Z.toUpperCase()):L.push(Z.toLowerCase())}),L})(k),built_in:C},D=E=>E.map(L=>L.replace(/\|\d+$/,"")),_={variants:[{match:[/new/,t.concat(g,"+"),t.concat("(?!",D(C).join("\\b|"),"\\b)"),a],scope:{1:"keyword",4:"title.class"}}]},I=t.concat(r,"\\b(?!\\()"),R={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),I],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[a,t.concat(/::/,t.lookahead(/(?!class\b)/)),I],scope:{1:"title.class",3:"variable.constant"}},{match:[a,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[a,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},z={scope:"attr",match:t.concat(r,t.lookahead(":"),t.lookahead(/(?!::)/))},P={relevance:0,begin:/\(/,end:/\)/,keywords:j,contains:[z,o,R,e.C_BLOCK_COMMENT_MODE,x,y,_]},q={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",D(N).join("\\b|"),"|",D(C).join("\\b|"),"\\b)"),r,t.concat(g,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[P]};P.contains.push(q);const $=[z,R,e.C_BLOCK_COMMENT_MODE,x,y,_],G={begin:t.concat(/#\[\s*\\?/,t.either(a,i)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:k,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:k,keyword:["new","array"]},contains:["self",...$]},...$,{scope:"meta",variants:[{match:a},{match:i}]}]};return{case_insensitive:!1,keywords:j,contains:[G,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},c,{scope:"variable.language",match:/\$this\b/},o,q,R,{match:[/const/,/\s/,r],scope:{1:"keyword",3:"variable.constant"}},_,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:j,contains:["self",G,o,R,e.C_BLOCK_COMMENT_MODE,x,y]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},x,y]}}function iB(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}function sB(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}function oB(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],c={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},p={className:"subst",begin:/\{/,end:/\}/,keywords:c,illegal:/#/},h={begin:/\{\{/,relevance:0},m={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,d,h,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,d,h,p]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,h,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,h,p]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},v="[0-9](_?[0-9])*",g=`(\\b(${v}))?\\.(${v})|\\b(${v})\\.`,x=`\\b|${r.join("|")}`,y={className:"number",relevance:0,variants:[{begin:`(\\b(${v})|(${g}))[eE][+-]?(${v})[jJ]?(?=${x})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${x})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${x})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${x})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${x})`},{begin:`\\b(${v})[jJ](?=${x})`}]},k={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:c,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},N={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:["self",d,y,m,e.HASH_COMMENT_MODE]}]};return p.contains=[m,y,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:c,illegal:/(<\/|\?)|=>/,contains:[d,y,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,k,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[N]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[y,N,m]}]}}function lB(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}function cB(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,r=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),a=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,i=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[a,r]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,r]},{scope:{1:"punctuation",2:"number"},match:[i,r]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,r]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:a},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:i},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}function uB(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",r=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),a=t.concat(r,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield",...["include","extend","prepend","public","private","protected","raise","throw"]],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},c={className:"doctag",begin:"@[A-Za-z]+"},d={begin:"#<",end:">"},p=[e.COMMENT("#","$",{contains:[c]}),e.COMMENT("^=begin","^=end",{contains:[c],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],h={className:"subst",begin:/#\{/,end:/\}/,keywords:o},m={className:"string",contains:[e.BACKSLASH_ESCAPE,h],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,h]})]}]},v="[1-9](_?[0-9])*|0",g="[0-9](_?[0-9])*",x={className:"number",relevance:0,variants:[{begin:`\\b(${v})(\\.(${g}))?([eE][+-]?(${g})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},y={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},_=[m,{variants:[{match:[/class\s+/,a,/\s+<\s+/,a]},{match:[/\b(class|module)\s+/,a]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,a],scope:{2:"title.class"},keywords:o},{relevance:0,match:[a,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:r,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[y]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[m,{begin:n}],relevance:0},x,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,h],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(d,p),relevance:0}].concat(d,p);h.contains=_,y.contains=_;const P=[{begin:/^\s*=>/,starts:{end:"$",contains:_}},{className:"meta.prompt",begin:"^("+"[>?]>"+"|"+"[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]"+"|"+"(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>"+")(?=[ ])",starts:{end:"$",keywords:o,contains:_}}];return p.unshift(d),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(P).concat(p).concat(_)}}function dB(e){const t=e.regex,n=/(r#)?/,r=t.concat(n,e.UNDERSCORE_IDENT_RE),a=t.concat(n,e.IDENT_RE),i={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,a,t.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",c=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],d=["true","false","Some","None","Ok","Err"],p=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],h=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:h,keyword:c,literal:d,built_in:p},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,r],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,r],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,r,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:p,type:h}},{className:"punctuation",begin:"->"},i]}}const pB=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),hB=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],mB=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],fB=[...hB,...mB],gB=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),vB=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),yB=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),bB=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function wB(e){const t=pB(e),n=yB,r=vB,a="@[a-z-]+",i="and or not only",c={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+fB.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},c,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+bB.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,c,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:a,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:i,attribute:gB.join(" ")},contains:[{begin:a,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},c,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}function xB(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function kB(e){const t=e.regex,n=e.COMMENT("--","$"),r={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},a={begin:/"/,end:/"/,contains:[{match:/""/}]},i=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],c=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],d=["add","asc","collation","desc","final","first","last","view"],p=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year"],h=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],m=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],v=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],g=h,x=[...p,...d].filter(D=>!h.includes(D)),y={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},k={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},N={match:t.concat(/\b/,t.either(...g),/\s*\(/),relevance:0,keywords:{built_in:g}};function C(D){return t.concat(/\b/,t.either(...D.map(_=>_.replace(/\s+/,"\\s+"))),/\b/)}const T={scope:"keyword",match:C(v),relevance:0};function j(D,{exceptions:_,when:I}={}){const R=I;return _=_||[],D.map(z=>z.match(/\|\d+$/)||_.includes(z)?z:R(z)?`${z}|0`:z)}return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:j(x,{when:D=>D.length<3}),literal:i,type:c,built_in:m},contains:[{scope:"type",match:C(o)},T,N,y,r,a,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,k]}}function zk(e){return e?typeof e=="string"?e:e.source:null}function Ho(e){return Wt("(?=",e,")")}function Wt(...e){return e.map(n=>zk(n)).join("")}function NB(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Xn(...e){return"("+(NB(e).capture?"":"?:")+e.map(r=>zk(r)).join("|")+")"}const Hf=e=>Wt(/\b/,e,/\w$/.test(e)?/\b/:/\B/),CB=["Protocol","Type"].map(Hf),Jw=["init","self"].map(Hf),SB=["Any","Self"],Mh=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],Xw=["false","nil","true"],EB=["assignment","associativity","higherThan","left","lowerThan","none","right"],TB=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],ex=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],Bk=Xn(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),Uk=Xn(Bk,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),Fh=Wt(Bk,Uk,"*"),Hk=Xn(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),ju=Xn(Hk,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),sa=Wt(Hk,ju,"*"),tu=Wt(/[A-Z]/,ju,"*"),DB=["attached","autoclosure",Wt(/convention\(/,Xn("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Wt(/objc\(/,sa,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],jB=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];function AB(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),r=[e.C_LINE_COMMENT_MODE,n],a={match:[/\./,Xn(...CB,...Jw)],className:{2:"keyword"}},i={match:Wt(/\./,Xn(...Mh)),relevance:0},o=Mh.filter(te=>typeof te=="string").concat(["_|0"]),c=Mh.filter(te=>typeof te!="string").concat(SB).map(Hf),d={variants:[{className:"keyword",match:Xn(...c,...Jw)}]},p={$pattern:Xn(/\b\w+/,/#\w+/),keyword:o.concat(TB),literal:Xw},h=[a,i,d],m={match:Wt(/\./,Xn(...ex)),relevance:0},v={className:"built_in",match:Wt(/\b/,Xn(...ex),/(?=\()/)},g=[m,v],x={match:/->/,relevance:0},y={className:"operator",relevance:0,variants:[{match:Fh},{match:`\\.(\\.|${Uk})+`}]},k=[x,y],N="([0-9]_*)+",C="([0-9a-fA-F]_*)+",T={className:"number",relevance:0,variants:[{match:`\\b(${N})(\\.(${N}))?([eE][+-]?(${N}))?\\b`},{match:`\\b0x(${C})(\\.(${C}))?([pP][+-]?(${N}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},j=(te="")=>({className:"subst",variants:[{match:Wt(/\\/,te,/[0\\tnr"']/)},{match:Wt(/\\/,te,/u\{[0-9a-fA-F]{1,8}\}/)}]}),D=(te="")=>({className:"subst",match:Wt(/\\/,te,/[\t ]*(?:[\r\n]|\r\n)/)}),_=(te="")=>({className:"subst",label:"interpol",begin:Wt(/\\/,te,/\(/),end:/\)/}),I=(te="")=>({begin:Wt(te,/"""/),end:Wt(/"""/,te),contains:[j(te),D(te),_(te)]}),R=(te="")=>({begin:Wt(te,/"/),end:Wt(/"/,te),contains:[j(te),_(te)]}),z={className:"string",variants:[I(),I("#"),I("##"),I("###"),R(),R("#"),R("##"),R("###")]},P=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],q={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:P},$=te=>{const V=Wt(te,/\//),W=Wt(/\//,te);return{begin:V,end:W,contains:[...P,{scope:"comment",begin:`#(?!.*${W})`,end:/$/}]}},G={scope:"regexp",variants:[$("###"),$("##"),$("#"),q]},E={match:Wt(/`/,sa,/`/)},L={className:"variable",match:/\$\d+/},Z={className:"variable",match:`\\$${ju}+`},X=[E,L,Z],K={match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:jB,contains:[...k,T,z]}]}},ee={scope:"keyword",match:Wt(/@/,Xn(...DB),Ho(Xn(/\(/,/\s+/)))},U={scope:"meta",match:Wt(/@/,sa)},M=[K,ee,U],F={match:Ho(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Wt(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,ju,"+")},{className:"type",match:tu,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Wt(/\s+&\s+/,Ho(tu)),relevance:0}]},B={begin:/</,end:/>/,keywords:p,contains:[...r,...h,...M,x,F]};F.contains.push(B);const le={match:Wt(sa,/\s*:/),keywords:"_|0",relevance:0},pe={begin:/\(/,end:/\)/,relevance:0,keywords:p,contains:["self",le,...r,G,...h,...g,...k,T,z,...X,...M,F]},de={begin:/</,end:/>/,keywords:"repeat each",contains:[...r,F]},je={begin:Xn(Ho(Wt(sa,/\s*:/)),Ho(Wt(sa,/\s+/,sa,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:sa}]},ye={begin:/\(/,end:/\)/,keywords:p,contains:[je,...r,...h,...k,T,z,...M,F,pe],endsParent:!0,illegal:/["']/},Te={match:[/(func|macro)/,/\s+/,Xn(E.match,sa,Fh)],className:{1:"keyword",3:"title.function"},contains:[de,ye,t],illegal:[/\[/,/%/]},Ie={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[de,ye,t],illegal:/\[|%/},ve={match:[/operator/,/\s+/,Fh],className:{1:"keyword",3:"title"}},qe={begin:[/precedencegroup/,/\s+/,tu],className:{1:"keyword",3:"title"},contains:[F],keywords:[...EB,...Xw],end:/}/},st={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},O={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},xe={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,sa,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:p,contains:[de,...h,{begin:/:/,end:/\{/,keywords:p,contains:[{scope:"title.class.inherited",match:tu},...h],relevance:0}]};for(const te of z.variants){const V=te.contains.find(se=>se.label==="interpol");V.keywords=p;const W=[...h,...g,...k,T,z,...X];V.contains=[...W,{begin:/\(/,end:/\)/,contains:["self",...W]}]}return{name:"Swift",keywords:p,contains:[...r,Te,Ie,st,O,xe,ve,qe,{beginKeywords:"import",end:/$/,contains:[...r],relevance:0},G,...h,...g,...k,T,z,...X,...M,F,pe]}}const Au="[A-Za-z$_][0-9A-Za-z$_]*",qk=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Wk=["true","false","null","undefined","NaN","Infinity"],Vk=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Gk=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Kk=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Yk=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Zk=[].concat(Kk,Vk,Gk);function _B(e){const t=e.regex,n=(K,{after:ee})=>{const U="</"+K[0].slice(1);return K.input.indexOf(U,ee)!==-1},r=Au,a={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,ee)=>{const U=K[0].length+K.index,M=K.input[U];if(M==="<"||M===","){ee.ignoreMatch();return}M===">"&&(n(K,{after:U})||ee.ignoreMatch());let F;const B=K.input.substring(U);if(F=B.match(/^\s*=/)){ee.ignoreMatch();return}if((F=B.match(/^\s+extends\s+/))&&F.index===0){ee.ignoreMatch();return}}},c={$pattern:Au,keyword:qk,literal:Wk,built_in:Zk,"variable.language":Yk},d="[0-9](_?[0-9])*",p=`\\.(${d})`,h="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${h})((${p})|\\.)?|(${p}))[eE][+-]?(${d})\\b`},{begin:`\\b(${h})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},v={className:"subst",begin:"\\$\\{",end:"\\}",keywords:c,contains:[]},g={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"xml"}},x={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"css"}},y={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,v],subLanguage:"graphql"}},k={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,v]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},T=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,x,y,k,{match:/\$\d+/},m];v.contains=T.concat({begin:/\{/,end:/\}/,keywords:c,contains:["self"].concat(T)});const j=[].concat(C,v.contains),D=j.concat([{begin:/(\s*)\(/,end:/\)/,keywords:c,contains:["self"].concat(j)}]),_={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:D},I={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},R={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Vk,...Gk]}},z={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[_],illegal:/%/},q={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function $(K){return t.concat("(?!",K.join("|"),")")}const G={match:t.concat(/\b/,$([...Kk,"super","import"].map(K=>`${K}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},E={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},L={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},_]},Z="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",X={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(Z)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[_]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:c,exports:{PARAMS_CONTAINS:D,CLASS_REFERENCE:R},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),z,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,g,x,y,k,C,{match:/\$\d+/},m,R,{scope:"attr",match:r+t.lookahead(":"),relevance:0},X,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:Z,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:c,contains:D}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:a.begin,end:a.end},{match:i},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[_,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},E,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[_]},G,q,I,L,{match:/\$[(.]/}]}}function RB(e){const t=e.regex,n=_B(e),r=Au,a=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:a},contains:[n.exports.CLASS_REFERENCE]},c={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],p={$pattern:Au,keyword:qk.concat(d),literal:Wk,built_in:Zk.concat(a),"variable.language":Yk},h={className:"meta",begin:"@"+r},m=(y,k,N)=>{const C=y.contains.findIndex(T=>T.label===k);if(C===-1)throw new Error("can not find mode to replace");y.contains.splice(C,1,N)};Object.assign(n.keywords,p),n.exports.PARAMS_CONTAINS.push(h);const v=n.contains.find(y=>y.scope==="attr"),g=Object.assign({},v,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,v,g]),n.contains=n.contains.concat([h,i,o,g]),m(n,"shebang",e.SHEBANG()),m(n,"use_strict",c);const x=n.contains.find(y=>y.label==="func.def");return x.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function IB(e){const t=e.regex,n={className:"string",begin:/"(""|[^/n])"C\b/},r={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},a=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,c=/\d{1,2}(:\d{1,2}){1,2}/,d={className:"literal",variants:[{begin:t.concat(/# */,t.either(i,a),/ *#/)},{begin:t.concat(/# */,c,/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,t.either(i,a),/ +/,t.either(o,c),/ *#/)}]},p={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},h={className:"label",begin:/^\w+:/},m=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),v=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[n,r,d,p,h,m,v,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[v]}]}}function $B(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");const n=e.COMMENT(/;;/,/$/),r=["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"],a={begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},i={className:"variable",begin:/\$[\w_]+/},o={match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},c={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},d={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},p={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:r},contains:[n,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},i,o,a,e.QUOTE_STRING_MODE,d,p,c]}}function MB(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,a={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(i,{begin:/\(/,end:/\)/}),c=e.inherit(e.APOS_STRING_MODE,{className:"string"}),d=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),p={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[a]},{begin:/'/,end:/'/,contains:[a]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,d,c,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,o,d,c]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},a,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[p],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[p],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:p}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function FB(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},a={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},i={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,a]},c=e.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),v={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},g={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},x={begin:/\{/,end:/\}/,contains:[g],illegal:"\\n",relevance:0},y={begin:"\\[",end:"\\]",contains:[g],illegal:"\\n",relevance:0},k=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},v,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},x,y,i,o],N=[...k];return N.pop(),N.push(c),g.contains=N,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:k}}const OB={arduino:yz,bash:bz,c:wz,cpp:xz,csharp:kz,css:_z,diff:Rz,go:Iz,graphql:$z,ini:Mz,java:Fz,javascript:Bz,json:Uz,kotlin:qz,less:Jz,lua:Xz,makefile:eB,markdown:tB,objectivec:nB,perl:rB,php:aB,"php-template":iB,plaintext:sB,python:oB,"python-repl":lB,r:cB,ruby:uB,rust:dB,scss:wB,shell:xB,sql:kB,swift:AB,typescript:RB,vbnet:IB,wasm:$B,xml:MB,yaml:FB};var Oh,tx;function PB(){if(tx)return Oh;tx=1;function e(ne){return ne instanceof Map?ne.clear=ne.delete=ne.set=function(){throw new Error("map is read-only")}:ne instanceof Set&&(ne.add=ne.clear=ne.delete=function(){throw new Error("set is read-only")}),Object.freeze(ne),Object.getOwnPropertyNames(ne).forEach(Ce=>{const Me=ne[Ce],Ze=typeof Me;(Ze==="object"||Ze==="function")&&!Object.isFrozen(Me)&&e(Me)}),ne}class t{constructor(Ce){Ce.data===void 0&&(Ce.data={}),this.data=Ce.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function n(ne){return ne.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(ne,...Ce){const Me=Object.create(null);for(const Ze in ne)Me[Ze]=ne[Ze];return Ce.forEach(function(Ze){for(const wt in Ze)Me[wt]=Ze[wt]}),Me}const a="</span>",i=ne=>!!ne.scope,o=(ne,{prefix:Ce})=>{if(ne.startsWith("language:"))return ne.replace("language:","language-");if(ne.includes(".")){const Me=ne.split(".");return[`${Ce}${Me.shift()}`,...Me.map((Ze,wt)=>`${Ze}${"_".repeat(wt+1)}`)].join(" ")}return`${Ce}${ne}`};class c{constructor(Ce,Me){this.buffer="",this.classPrefix=Me.classPrefix,Ce.walk(this)}addText(Ce){this.buffer+=n(Ce)}openNode(Ce){if(!i(Ce))return;const Me=o(Ce.scope,{prefix:this.classPrefix});this.span(Me)}closeNode(Ce){i(Ce)&&(this.buffer+=a)}value(){return this.buffer}span(Ce){this.buffer+=`<span class="${Ce}">`}}const d=(ne={})=>{const Ce={children:[]};return Object.assign(Ce,ne),Ce};class p{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(Ce){this.top.children.push(Ce)}openNode(Ce){const Me=d({scope:Ce});this.add(Me),this.stack.push(Me)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(Ce){return this.constructor._walk(Ce,this.rootNode)}static _walk(Ce,Me){return typeof Me=="string"?Ce.addText(Me):Me.children&&(Ce.openNode(Me),Me.children.forEach(Ze=>this._walk(Ce,Ze)),Ce.closeNode(Me)),Ce}static _collapse(Ce){typeof Ce!="string"&&Ce.children&&(Ce.children.every(Me=>typeof Me=="string")?Ce.children=[Ce.children.join("")]:Ce.children.forEach(Me=>{p._collapse(Me)}))}}class h extends p{constructor(Ce){super(),this.options=Ce}addText(Ce){Ce!==""&&this.add(Ce)}startScope(Ce){this.openNode(Ce)}endScope(){this.closeNode()}__addSublanguage(Ce,Me){const Ze=Ce.root;Me&&(Ze.scope=`language:${Me}`),this.add(Ze)}toHTML(){return new c(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function m(ne){return ne?typeof ne=="string"?ne:ne.source:null}function v(ne){return y("(?=",ne,")")}function g(ne){return y("(?:",ne,")*")}function x(ne){return y("(?:",ne,")?")}function y(...ne){return ne.map(Me=>m(Me)).join("")}function k(ne){const Ce=ne[ne.length-1];return typeof Ce=="object"&&Ce.constructor===Object?(ne.splice(ne.length-1,1),Ce):{}}function N(...ne){return"("+(k(ne).capture?"":"?:")+ne.map(Ze=>m(Ze)).join("|")+")"}function C(ne){return new RegExp(ne.toString()+"|").exec("").length-1}function T(ne,Ce){const Me=ne&&ne.exec(Ce);return Me&&Me.index===0}const j=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function D(ne,{joinWith:Ce}){let Me=0;return ne.map(Ze=>{Me+=1;const wt=Me;let $t=m(Ze),Be="";for(;$t.length>0;){const Y=j.exec($t);if(!Y){Be+=$t;break}Be+=$t.substring(0,Y.index),$t=$t.substring(Y.index+Y[0].length),Y[0][0]==="\\"&&Y[1]?Be+="\\"+String(Number(Y[1])+wt):(Be+=Y[0],Y[0]==="("&&Me++)}return Be}).map(Ze=>`(${Ze})`).join(Ce)}const _=/\b\B/,I="[a-zA-Z]\\w*",R="[a-zA-Z_]\\w*",z="\\b\\d+(\\.\\d+)?",P="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",q="\\b(0b[01]+)",$="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",G=(ne={})=>{const Ce=/^#![ ]*\//;return ne.binary&&(ne.begin=y(Ce,/.*\b/,ne.binary,/\b.*/)),r({scope:"meta",begin:Ce,end:/$/,relevance:0,"on:begin":(Me,Ze)=>{Me.index!==0&&Ze.ignoreMatch()}},ne)},E={begin:"\\\\[\\s\\S]",relevance:0},L={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[E]},Z={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[E]},X={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},K=function(ne,Ce,Me={}){const Ze=r({scope:"comment",begin:ne,end:Ce,contains:[]},Me);Ze.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const wt=N("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Ze.contains.push({begin:y(/[ ]+/,"(",wt,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Ze},ee=K("//","$"),U=K("/\\*","\\*/"),M=K("#","$"),F={scope:"number",begin:z,relevance:0},B={scope:"number",begin:P,relevance:0},le={scope:"number",begin:q,relevance:0},pe={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[E,{begin:/\[/,end:/\]/,relevance:0,contains:[E]}]},de={scope:"title",begin:I,relevance:0},je={scope:"title",begin:R,relevance:0},ye={begin:"\\.\\s*"+R,relevance:0};var Ie=Object.freeze({__proto__:null,APOS_STRING_MODE:L,BACKSLASH_ESCAPE:E,BINARY_NUMBER_MODE:le,BINARY_NUMBER_RE:q,COMMENT:K,C_BLOCK_COMMENT_MODE:U,C_LINE_COMMENT_MODE:ee,C_NUMBER_MODE:B,C_NUMBER_RE:P,END_SAME_AS_BEGIN:function(ne){return Object.assign(ne,{"on:begin":(Ce,Me)=>{Me.data._beginMatch=Ce[1]},"on:end":(Ce,Me)=>{Me.data._beginMatch!==Ce[1]&&Me.ignoreMatch()}})},HASH_COMMENT_MODE:M,IDENT_RE:I,MATCH_NOTHING_RE:_,METHOD_GUARD:ye,NUMBER_MODE:F,NUMBER_RE:z,PHRASAL_WORDS_MODE:X,QUOTE_STRING_MODE:Z,REGEXP_MODE:pe,RE_STARTERS_RE:$,SHEBANG:G,TITLE_MODE:de,UNDERSCORE_IDENT_RE:R,UNDERSCORE_TITLE_MODE:je});function ve(ne,Ce){ne.input[ne.index-1]==="."&&Ce.ignoreMatch()}function qe(ne,Ce){ne.className!==void 0&&(ne.scope=ne.className,delete ne.className)}function st(ne,Ce){Ce&&ne.beginKeywords&&(ne.begin="\\b("+ne.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",ne.__beforeBegin=ve,ne.keywords=ne.keywords||ne.beginKeywords,delete ne.beginKeywords,ne.relevance===void 0&&(ne.relevance=0))}function O(ne,Ce){Array.isArray(ne.illegal)&&(ne.illegal=N(...ne.illegal))}function xe(ne,Ce){if(ne.match){if(ne.begin||ne.end)throw new Error("begin & end are not supported with match");ne.begin=ne.match,delete ne.match}}function te(ne,Ce){ne.relevance===void 0&&(ne.relevance=1)}const V=(ne,Ce)=>{if(!ne.beforeMatch)return;if(ne.starts)throw new Error("beforeMatch cannot be used with starts");const Me=Object.assign({},ne);Object.keys(ne).forEach(Ze=>{delete ne[Ze]}),ne.keywords=Me.keywords,ne.begin=y(Me.beforeMatch,v(Me.begin)),ne.starts={relevance:0,contains:[Object.assign(Me,{endsParent:!0})]},ne.relevance=0,delete Me.beforeMatch},W=["of","and","for","in","not","or","if","then","parent","list","value"],se="keyword";function ke(ne,Ce,Me=se){const Ze=Object.create(null);return typeof ne=="string"?wt(Me,ne.split(" ")):Array.isArray(ne)?wt(Me,ne):Object.keys(ne).forEach(function($t){Object.assign(Ze,ke(ne[$t],Ce,$t))}),Ze;function wt($t,Be){Ce&&(Be=Be.map(Y=>Y.toLowerCase())),Be.forEach(function(Y){const re=Y.split("|");Ze[re[0]]=[$t,Se(re[0],re[1])]})}}function Se(ne,Ce){return Ce?Number(Ce):ue(ne)?0:1}function ue(ne){return W.includes(ne.toLowerCase())}const _e={},oe=ne=>{console.error(ne)},me=(ne,...Ce)=>{console.log(`WARN: ${ne}`,...Ce)},ae=(ne,Ce)=>{_e[`${ne}/${Ce}`]||(console.log(`Deprecated as of ${ne}. ${Ce}`),_e[`${ne}/${Ce}`]=!0)},we=new Error;function De(ne,Ce,{key:Me}){let Ze=0;const wt=ne[Me],$t={},Be={};for(let Y=1;Y<=Ce.length;Y++)Be[Y+Ze]=wt[Y],$t[Y+Ze]=!0,Ze+=C(Ce[Y-1]);ne[Me]=Be,ne[Me]._emit=$t,ne[Me]._multi=!0}function He(ne){if(Array.isArray(ne.begin)){if(ne.skip||ne.excludeBegin||ne.returnBegin)throw oe("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),we;if(typeof ne.beginScope!="object"||ne.beginScope===null)throw oe("beginScope must be object"),we;De(ne,ne.begin,{key:"beginScope"}),ne.begin=D(ne.begin,{joinWith:""})}}function pt(ne){if(Array.isArray(ne.end)){if(ne.skip||ne.excludeEnd||ne.returnEnd)throw oe("skip, excludeEnd, returnEnd not compatible with endScope: {}"),we;if(typeof ne.endScope!="object"||ne.endScope===null)throw oe("endScope must be object"),we;De(ne,ne.end,{key:"endScope"}),ne.end=D(ne.end,{joinWith:""})}}function vt(ne){ne.scope&&typeof ne.scope=="object"&&ne.scope!==null&&(ne.beginScope=ne.scope,delete ne.scope)}function dn(ne){vt(ne),typeof ne.beginScope=="string"&&(ne.beginScope={_wrap:ne.beginScope}),typeof ne.endScope=="string"&&(ne.endScope={_wrap:ne.endScope}),He(ne),pt(ne)}function ht(ne){function Ce(Be,Y){return new RegExp(m(Be),"m"+(ne.case_insensitive?"i":"")+(ne.unicodeRegex?"u":"")+(Y?"g":""))}class Me{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Y,re){re.position=this.position++,this.matchIndexes[this.matchAt]=re,this.regexes.push([re,Y]),this.matchAt+=C(Y)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Y=this.regexes.map(re=>re[1]);this.matcherRe=Ce(D(Y,{joinWith:"|"}),!0),this.lastIndex=0}exec(Y){this.matcherRe.lastIndex=this.lastIndex;const re=this.matcherRe.exec(Y);if(!re)return null;const he=re.findIndex((Oe,We)=>We>0&&Oe!==void 0),Ne=this.matchIndexes[he];return re.splice(0,he),Object.assign(re,Ne)}}class Ze{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Y){if(this.multiRegexes[Y])return this.multiRegexes[Y];const re=new Me;return this.rules.slice(Y).forEach(([he,Ne])=>re.addRule(he,Ne)),re.compile(),this.multiRegexes[Y]=re,re}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Y,re){this.rules.push([Y,re]),re.type==="begin"&&this.count++}exec(Y){const re=this.getMatcher(this.regexIndex);re.lastIndex=this.lastIndex;let he=re.exec(Y);if(this.resumingScanAtSamePosition()&&!(he&&he.index===this.lastIndex)){const Ne=this.getMatcher(0);Ne.lastIndex=this.lastIndex+1,he=Ne.exec(Y)}return he&&(this.regexIndex+=he.position+1,this.regexIndex===this.count&&this.considerAll()),he}}function wt(Be){const Y=new Ze;return Be.contains.forEach(re=>Y.addRule(re.begin,{rule:re,type:"begin"})),Be.terminatorEnd&&Y.addRule(Be.terminatorEnd,{type:"end"}),Be.illegal&&Y.addRule(Be.illegal,{type:"illegal"}),Y}function $t(Be,Y){const re=Be;if(Be.isCompiled)return re;[qe,xe,dn,V].forEach(Ne=>Ne(Be,Y)),ne.compilerExtensions.forEach(Ne=>Ne(Be,Y)),Be.__beforeBegin=null,[st,O,te].forEach(Ne=>Ne(Be,Y)),Be.isCompiled=!0;let he=null;return typeof Be.keywords=="object"&&Be.keywords.$pattern&&(Be.keywords=Object.assign({},Be.keywords),he=Be.keywords.$pattern,delete Be.keywords.$pattern),he=he||/\w+/,Be.keywords&&(Be.keywords=ke(Be.keywords,ne.case_insensitive)),re.keywordPatternRe=Ce(he,!0),Y&&(Be.begin||(Be.begin=/\B|\b/),re.beginRe=Ce(re.begin),!Be.end&&!Be.endsWithParent&&(Be.end=/\B|\b/),Be.end&&(re.endRe=Ce(re.end)),re.terminatorEnd=m(re.end)||"",Be.endsWithParent&&Y.terminatorEnd&&(re.terminatorEnd+=(Be.end?"|":"")+Y.terminatorEnd)),Be.illegal&&(re.illegalRe=Ce(Be.illegal)),Be.contains||(Be.contains=[]),Be.contains=[].concat(...Be.contains.map(function(Ne){return yn(Ne==="self"?Be:Ne)})),Be.contains.forEach(function(Ne){$t(Ne,re)}),Be.starts&&$t(Be.starts,Y),re.matcher=wt(re),re}if(ne.compilerExtensions||(ne.compilerExtensions=[]),ne.contains&&ne.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return ne.classNameAliases=r(ne.classNameAliases||{}),$t(ne)}function mn(ne){return ne?ne.endsWithParent||mn(ne.starts):!1}function yn(ne){return ne.variants&&!ne.cachedVariants&&(ne.cachedVariants=ne.variants.map(function(Ce){return r(ne,{variants:null},Ce)})),ne.cachedVariants?ne.cachedVariants:mn(ne)?r(ne,{starts:ne.starts?r(ne.starts):null}):Object.isFrozen(ne)?r(ne):ne}var jt="11.11.1";class kn extends Error{constructor(Ce,Me){super(Ce),this.name="HTMLInjectionError",this.html=Me}}const Qt=n,Kn=r,vr=Symbol("nomatch"),Mn=7,Et=function(ne){const Ce=Object.create(null),Me=Object.create(null),Ze=[];let wt=!0;const $t="Could not find the language '{}', did you forget to load/include a language module?",Be={disableAutodetect:!0,name:"Plain text",contains:[]};let Y={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:h};function re(Fe){return Y.noHighlightRe.test(Fe)}function he(Fe){let Le=Fe.className+" ";Le+=Fe.parentNode?Fe.parentNode.className:"";const tt=Y.languageDetectRe.exec(Le);if(tt){const yt=Tn(tt[1]);return yt||(me($t.replace("{}",tt[1])),me("Falling back to no-highlight mode for this block.",Fe)),yt?tt[1]:"no-highlight"}return Le.split(/\s+/).find(yt=>re(yt)||Tn(yt))}function Ne(Fe,Le,tt){let yt="",Gt="";typeof Le=="object"?(yt=Fe,tt=Le.ignoreIllegals,Gt=Le.language):(ae("10.7.0","highlight(lang, code, ...args) has been deprecated."),ae("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Gt=Fe,yt=Le),tt===void 0&&(tt=!0);const bt={code:yt,language:Gt};Yn("before:highlight",bt);const Fn=bt.result?bt.result:Oe(bt.language,bt.code,tt);return Fn.code=bt.code,Yn("after:highlight",Fn),Fn}function Oe(Fe,Le,tt,yt){const Gt=Object.create(null);function bt(Ue,Je){return Ue.keywords[Je]}function Fn(){if(!gt.keywords){fn.addText(Ht);return}let Ue=0;gt.keywordPatternRe.lastIndex=0;let Je=gt.keywordPatternRe.exec(Ht),ut="";for(;Je;){ut+=Ht.substring(Ue,Je.index);const At=Tr.case_insensitive?Je[0].toLowerCase():Je[0],pn=bt(gt,At);if(pn){const[Dn,rd]=pn;if(fn.addText(ut),ut="",Gt[At]=(Gt[At]||0)+1,Gt[At]<=Mn&&(gi+=rd),Dn.startsWith("_"))ut+=Je[0];else{const Rl=Tr.classNameAliases[Dn]||Dn;Zn(Je[0],Rl)}}else ut+=Je[0];Ue=gt.keywordPatternRe.lastIndex,Je=gt.keywordPatternRe.exec(Ht)}ut+=Ht.substring(Ue),fn.addText(ut)}function ma(){if(Ht==="")return;let Ue=null;if(typeof gt.subLanguage=="string"){if(!Ce[gt.subLanguage]){fn.addText(Ht);return}Ue=Oe(gt.subLanguage,Ht,!0,Qs[gt.subLanguage]),Qs[gt.subLanguage]=Ue._top}else Ue=at(Ht,gt.subLanguage.length?gt.subLanguage:null);gt.relevance>0&&(gi+=Ue.relevance),fn.__addSublanguage(Ue._emitter,Ue.language)}function On(){gt.subLanguage!=null?ma():Fn(),Ht=""}function Zn(Ue,Je){Ue!==""&&(fn.startScope(Je),fn.addText(Ue),fn.endScope())}function mi(Ue,Je){let ut=1;const At=Je.length-1;for(;ut<=At;){if(!Ue._emit[ut]){ut++;continue}const pn=Tr.classNameAliases[Ue[ut]]||Ue[ut],Dn=Je[ut];pn?Zn(Dn,pn):(Ht=Dn,Fn(),Ht=""),ut++}}function Ia(Ue,Je){return Ue.scope&&typeof Ue.scope=="string"&&fn.openNode(Tr.classNameAliases[Ue.scope]||Ue.scope),Ue.beginScope&&(Ue.beginScope._wrap?(Zn(Ht,Tr.classNameAliases[Ue.beginScope._wrap]||Ue.beginScope._wrap),Ht=""):Ue.beginScope._multi&&(mi(Ue.beginScope,Je),Ht="")),gt=Object.create(Ue,{parent:{value:gt}}),gt}function fi(Ue,Je,ut){let At=T(Ue.endRe,ut);if(At){if(Ue["on:end"]){const pn=new t(Ue);Ue["on:end"](Je,pn),pn.isMatchIgnored&&(At=!1)}if(At){for(;Ue.endsParent&&Ue.parent;)Ue=Ue.parent;return Ue}}if(Ue.endsWithParent)return fi(Ue.parent,Je,ut)}function td(Ue){return gt.matcher.regexIndex===0?(Ht+=Ue[0],1):(Fa=!0,0)}function nd(Ue){const Je=Ue[0],ut=Ue.rule,At=new t(ut),pn=[ut.__beforeBegin,ut["on:begin"]];for(const Dn of pn)if(Dn&&(Dn(Ue,At),At.isMatchIgnored))return td(Je);return ut.skip?Ht+=Je:(ut.excludeBegin&&(Ht+=Je),On(),!ut.returnBegin&&!ut.excludeBegin&&(Ht=Je)),Ia(ut,Ue),ut.returnBegin?0:Je.length}function Ys(Ue){const Je=Ue[0],ut=Le.substring(Ue.index),At=fi(gt,Ue,ut);if(!At)return vr;const pn=gt;gt.endScope&&gt.endScope._wrap?(On(),Zn(Je,gt.endScope._wrap)):gt.endScope&&gt.endScope._multi?(On(),mi(gt.endScope,Ue)):pn.skip?Ht+=Je:(pn.returnEnd||pn.excludeEnd||(Ht+=Je),On(),pn.excludeEnd&&(Ht=Je));do gt.scope&&fn.closeNode(),!gt.skip&&!gt.subLanguage&&(gi+=gt.relevance),gt=gt.parent;while(gt!==At.parent);return At.starts&&Ia(At.starts,Ue),pn.returnEnd?0:Je.length}function _l(){const Ue=[];for(let Je=gt;Je!==Tr;Je=Je.parent)Je.scope&&Ue.unshift(Je.scope);Ue.forEach(Je=>fn.openNode(Je))}let $a={};function Ma(Ue,Je){const ut=Je&&Je[0];if(Ht+=Ue,ut==null)return On(),0;if($a.type==="begin"&&Je.type==="end"&&$a.index===Je.index&&ut===""){if(Ht+=Le.slice(Je.index,Je.index+1),!wt){const At=new Error(`0 width match regex (${Fe})`);throw At.languageName=Fe,At.badRule=$a.rule,At}return 1}if($a=Je,Je.type==="begin")return nd(Je);if(Je.type==="illegal"&&!tt){const At=new Error('Illegal lexeme "'+ut+'" for mode "'+(gt.scope||"<unnamed>")+'"');throw At.mode=gt,At}else if(Je.type==="end"){const At=Ys(Je);if(At!==vr)return At}if(Je.type==="illegal"&&ut==="")return Ht+=`
`,1;if(vi>1e5&&vi>Je.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Ht+=ut,ut.length}const Tr=Tn(Fe);if(!Tr)throw oe($t.replace("{}",Fe)),new Error('Unknown language: "'+Fe+'"');const Zs=ht(Tr);let Mt="",gt=yt||Zs;const Qs={},fn=new Y.__emitter(Y);_l();let Ht="",gi=0,ta=0,vi=0,Fa=!1;try{if(Tr.__emitTokens)Tr.__emitTokens(Le,fn);else{for(gt.matcher.considerAll();;){vi++,Fa?Fa=!1:gt.matcher.considerAll(),gt.matcher.lastIndex=ta;const Ue=gt.matcher.exec(Le);if(!Ue)break;const Je=Le.substring(ta,Ue.index),ut=Ma(Je,Ue);ta=Ue.index+ut}Ma(Le.substring(ta))}return fn.finalize(),Mt=fn.toHTML(),{language:Fe,value:Mt,relevance:gi,illegal:!1,_emitter:fn,_top:gt}}catch(Ue){if(Ue.message&&Ue.message.includes("Illegal"))return{language:Fe,value:Qt(Le),illegal:!0,relevance:0,_illegalBy:{message:Ue.message,index:ta,context:Le.slice(ta-100,ta+100),mode:Ue.mode,resultSoFar:Mt},_emitter:fn};if(wt)return{language:Fe,value:Qt(Le),illegal:!1,relevance:0,errorRaised:Ue,_emitter:fn,_top:gt};throw Ue}}function We(Fe){const Le={value:Qt(Fe),illegal:!1,relevance:0,_top:Be,_emitter:new Y.__emitter(Y)};return Le._emitter.addText(Fe),Le}function at(Fe,Le){Le=Le||Y.languages||Object.keys(Ce);const tt=We(Fe),yt=Le.filter(Tn).filter(ir).map(On=>Oe(On,Fe,!1));yt.unshift(tt);const Gt=yt.sort((On,Zn)=>{if(On.relevance!==Zn.relevance)return Zn.relevance-On.relevance;if(On.language&&Zn.language){if(Tn(On.language).supersetOf===Zn.language)return 1;if(Tn(Zn.language).supersetOf===On.language)return-1}return 0}),[bt,Fn]=Gt,ma=bt;return ma.secondBest=Fn,ma}function Ve(Fe,Le,tt){const yt=Le&&Me[Le]||tt;Fe.classList.add("hljs"),Fe.classList.add(`language-${yt}`)}function Qe(Fe){let Le=null;const tt=he(Fe);if(re(tt))return;if(Yn("before:highlightElement",{el:Fe,language:tt}),Fe.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Fe);return}if(Fe.children.length>0&&(Y.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Fe)),Y.throwUnescapedHTML))throw new kn("One of your code blocks includes unescaped HTML.",Fe.innerHTML);Le=Fe;const yt=Le.textContent,Gt=tt?Ne(yt,{language:tt,ignoreIllegals:!0}):at(yt);Fe.innerHTML=Gt.value,Fe.dataset.highlighted="yes",Ve(Fe,tt,Gt.language),Fe.result={language:Gt.language,re:Gt.relevance,relevance:Gt.relevance},Gt.secondBest&&(Fe.secondBest={language:Gt.secondBest.language,relevance:Gt.secondBest.relevance}),Yn("after:highlightElement",{el:Fe,result:Gt,text:yt})}function Ke(Fe){Y=Kn(Y,Fe)}const Ye=()=>{tn(),ae("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function ft(){tn(),ae("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Nt=!1;function tn(){function Fe(){tn()}if(document.readyState==="loading"){Nt||window.addEventListener("DOMContentLoaded",Fe,!1),Nt=!0;return}document.querySelectorAll(Y.cssSelector).forEach(Qe)}function Lt(Fe,Le){let tt=null;try{tt=Le(ne)}catch(yt){if(oe("Language definition for '{}' could not be registered.".replace("{}",Fe)),wt)oe(yt);else throw yt;tt=Be}tt.name||(tt.name=Fe),Ce[Fe]=tt,tt.rawDefinition=Le.bind(null,ne),tt.aliases&&ea(tt.aliases,{languageName:Fe})}function Tt(Fe){delete Ce[Fe];for(const Le of Object.keys(Me))Me[Le]===Fe&&delete Me[Le]}function Vt(){return Object.keys(Ce)}function Tn(Fe){return Fe=(Fe||"").toLowerCase(),Ce[Fe]||Ce[Me[Fe]]}function ea(Fe,{languageName:Le}){typeof Fe=="string"&&(Fe=[Fe]),Fe.forEach(tt=>{Me[tt.toLowerCase()]=Le})}function ir(Fe){const Le=Tn(Fe);return Le&&!Le.disableAutodetect}function Rt(Fe){Fe["before:highlightBlock"]&&!Fe["before:highlightElement"]&&(Fe["before:highlightElement"]=Le=>{Fe["before:highlightBlock"](Object.assign({block:Le.el},Le))}),Fe["after:highlightBlock"]&&!Fe["after:highlightElement"]&&(Fe["after:highlightElement"]=Le=>{Fe["after:highlightBlock"](Object.assign({block:Le.el},Le))})}function hi(Fe){Rt(Fe),Ze.push(Fe)}function zr(Fe){const Le=Ze.indexOf(Fe);Le!==-1&&Ze.splice(Le,1)}function Yn(Fe,Le){const tt=Fe;Ze.forEach(function(yt){yt[tt]&&yt[tt](Le)})}function Br(Fe){return ae("10.7.0","highlightBlock will be removed entirely in v12.0"),ae("10.7.0","Please use highlightElement now."),Qe(Fe)}Object.assign(ne,{highlight:Ne,highlightAuto:at,highlightAll:tn,highlightElement:Qe,highlightBlock:Br,configure:Ke,initHighlighting:Ye,initHighlightingOnLoad:ft,registerLanguage:Lt,unregisterLanguage:Tt,listLanguages:Vt,getLanguage:Tn,registerAliases:ea,autoDetection:ir,inherit:Kn,addPlugin:hi,removePlugin:zr}),ne.debugMode=function(){wt=!1},ne.safeMode=function(){wt=!0},ne.versionString=jt,ne.regex={concat:y,lookahead:v,either:N,optional:x,anyNumberOfTimes:g};for(const Fe in Ie)typeof Ie[Fe]=="object"&&e(Ie[Fe]);return Object.assign(ne,Ie),ne},Bt=Et({});return Bt.newInstance=()=>Et({}),Oh=Bt,Bt.HighlightJS=Bt,Bt.default=Bt,Oh}var LB=PB();const zB=Ta(LB),nx={},BB="hljs-";function UB(e){const t=zB.newInstance();return e&&i(e),{highlight:n,highlightAuto:r,listLanguages:a,register:i,registerAlias:o,registered:c};function n(d,p,h){const m=h||nx,v=typeof m.prefix=="string"?m.prefix:BB;if(!t.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");t.configure({__emitter:HB,classPrefix:v});const g=t.highlight(p,{ignoreIllegals:!0,language:d});if(g.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:g.errorRaised});const x=g._emitter.root,y=x.data;return y.language=g.language,y.relevance=g.relevance,x}function r(d,p){const m=(p||nx).subset||a();let v=-1,g=0,x;for(;++v<m.length;){const y=m[v];if(!t.getLanguage(y))continue;const k=n(y,d,p);k.data&&k.data.relevance!==void 0&&k.data.relevance>g&&(g=k.data.relevance,x=k)}return x||{type:"root",children:[],data:{language:void 0,relevance:g}}}function a(){return t.listLanguages()}function i(d,p){if(typeof d=="string")t.registerLanguage(d,p);else{let h;for(h in d)Object.hasOwn(d,h)&&t.registerLanguage(h,d[h])}}function o(d,p){if(typeof d=="string")t.registerAliases(typeof p=="string"?p:[...p],{languageName:d});else{let h;for(h in d)if(Object.hasOwn(d,h)){const m=d[h];t.registerAliases(typeof m=="string"?m:[...m],{languageName:h})}}}function c(d){return!!t.getLanguage(d)}}class HB{constructor(t){this.options=t,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(t){if(t==="")return;const n=this.stack[this.stack.length-1],r=n.children[n.children.length-1];r&&r.type==="text"?r.value+=t:n.children.push({type:"text",value:t})}startScope(t){this.openNode(String(t))}endScope(){this.closeNode()}__addSublanguage(t,n){const r=this.stack[this.stack.length-1],a=t.root.children;n?r.children.push({type:"element",tagName:"span",properties:{className:[n]},children:a}):r.children.push(...a)}openNode(t){const n=this,r=t.split(".").map(function(o,c){return c?o+"_".repeat(c):n.options.classPrefix+o}),a=this.stack[this.stack.length-1],i={type:"element",tagName:"span",properties:{className:r},children:[]};a.children.push(i),this.stack.push(i)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const qB={};function WB(e){const t=e||qB,n=t.aliases,r=t.detect||!1,a=t.languages||OB,i=t.plainText,o=t.prefix,c=t.subset;let d="hljs";const p=UB(a);if(n&&p.registerAlias(n),o){const h=o.indexOf("-");d=h===-1?o:o.slice(0,h)}return function(h,m){Sl(h,"element",function(v,g,x){if(v.tagName!=="code"||!x||x.type!=="element"||x.tagName!=="pre")return;const y=VB(v);if(y===!1||!y&&!r||y&&i&&i.includes(y))return;Array.isArray(v.properties.className)||(v.properties.className=[]),v.properties.className.includes(d)||v.properties.className.unshift(d);const k=uz(v,{whitespace:"pre"});let N;try{N=y?p.highlight(y,k,{prefix:o}):p.highlightAuto(k,{prefix:o,subset:c})}catch(C){const T=C;if(y&&/Unknown language/.test(T.message)){m.message("Cannot highlight as `"+y+"`, its not registered",{ancestors:[x,v],cause:T,place:v.position,ruleId:"missing-language",source:"rehype-highlight"});return}throw T}!y&&N.data&&N.data.language&&v.properties.className.push("language-"+N.data.language),N.children.length>0&&(v.children=N.children)})}}function VB(e){const t=e.properties.className;let n=-1;if(!Array.isArray(t))return;let r;for(;++n<t.length;){const a=String(t[n]);if(a==="no-highlight"||a==="nohighlight")return!1;!r&&a.slice(0,5)==="lang-"&&(r=a.slice(5)),!r&&a.slice(0,9)==="language-"&&(r=a.slice(9))}return r}function GB({content:e,className:t}){return s.jsx("div",{className:J("prose-guide",t),children:s.jsx(_a,{remarkPlugins:[pi],rehypePlugins:[rz,WB],components:{h1:({children:n,id:r})=>s.jsxs("h1",{id:r,className:"scroll-mt-24 group",children:[n,r&&s.jsx(Ph,{id:r})]}),h2:({children:n,id:r})=>s.jsxs("h2",{id:r,className:"scroll-mt-24 group",children:[n,r&&s.jsx(Ph,{id:r})]}),h3:({children:n,id:r})=>s.jsxs("h3",{id:r,className:"scroll-mt-24 group",children:[n,r&&s.jsx(Ph,{id:r})]}),pre:({children:n})=>s.jsx("pre",{className:"overflow-x-auto rounded-lg bg-[#1e1e1e] p-4 text-sm",children:n}),code:({className:n,children:r,...a})=>n?s.jsx("code",{className:n,...a,children:r}):s.jsx("code",{className:"rounded bg-muted px-1.5 py-0.5 text-sm font-mono text-primary",...a,children:r}),table:({children:n})=>s.jsx("div",{className:"overflow-x-auto my-6",children:s.jsx("table",{className:"w-full border-collapse text-sm",children:n})}),thead:({children:n})=>s.jsx("thead",{className:"border-b border-border bg-muted/50",children:n}),th:({children:n})=>s.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:n}),td:({children:n})=>s.jsx("td",{className:"px-4 py-3 border-b border-border/50",children:n}),a:({href:n,children:r})=>s.jsx("a",{href:n,className:"text-primary hover:text-primary/80 underline underline-offset-2 transition-colors",target:n!=null&&n.startsWith("http")?"_blank":void 0,rel:n!=null&&n.startsWith("http")?"noopener noreferrer":void 0,children:r}),blockquote:({children:n})=>s.jsx("blockquote",{className:"border-l-4 border-primary/30 pl-4 italic text-muted-foreground my-4",children:n}),ul:({children:n})=>s.jsx("ul",{className:"list-disc pl-6 space-y-2 my-4",children:n}),ol:({children:n})=>s.jsx("ol",{className:"list-decimal pl-6 space-y-2 my-4",children:n}),hr:()=>s.jsx("hr",{className:"my-8 border-border"}),strong:({children:n})=>s.jsx("strong",{className:"font-semibold",children:n})},children:e})})}function Ph({id:e}){return s.jsx("a",{href:`#${e}`,className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-primary","aria-label":"Link to this section",children:"#"})}function KB(e){const t=[],n=/^(#{1,3})\s+(.+)$/gm;let r;for(;(r=n.exec(e))!==null;){const a=r[1].length,i=r[2].trim(),o=i.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();t.push({id:o,text:i,level:a})}return t}const js=[{id:"quickstart",label:"Getting Started",path:"/guide/quickstart",icon:Jm,description:"Learn the basics"},{id:"using-rolldeo",label:"Using Rolldeo",path:"/guide/using-rolldeo",icon:Ym,description:"Site features guide"},{id:"spec",label:"Full Specification",path:"/guide/spec",icon:Vm,description:"Complete reference"},{id:"schema",label:"Schema Reference",path:"/guide/schema",icon:Wm,description:"JSON schema docs"}];function rx({headings:e=[],isCollapsed:t=!1,onToggleCollapse:n}){const r=pa(),[a,i]=w.useState("");return w.useEffect(()=>{if(e.length===0)return;const o=new IntersectionObserver(c=>{c.forEach(d=>{d.isIntersecting&&i(d.target.id)})},{rootMargin:"-100px 0px -80% 0px"});return e.forEach(c=>{const d=document.getElementById(c.id);d&&o.observe(d)}),()=>o.disconnect()},[e]),s.jsxs("aside",{className:J("sticky top-24 h-fit max-h-[calc(100vh-8rem)] overflow-y-auto","border-r border-border/50 pr-4",t&&"hidden md:block"),children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Lr,{className:"h-4 w-4 text-primary"}),s.jsx("span",{className:"text-sm font-semibold",children:"Guide"})]}),s.jsx("nav",{className:"space-y-1",children:js.map(o=>{const c=o.icon,d=r.pathname===o.path;return s.jsxs(zn,{to:o.path,className:J("flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",d?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[s.jsx(c,{className:"h-4 w-4"}),s.jsx("span",{children:o.label})]},o.id)})})]}),e.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(sn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm font-semibold",children:"On this page"})]}),s.jsx("nav",{className:"space-y-1",children:e.map(o=>s.jsx("a",{href:`#${o.id}`,onClick:c=>{c.preventDefault();const d=document.getElementById(o.id);d&&(d.scrollIntoView({behavior:"smooth"}),i(o.id))},className:J("block py-1.5 text-sm transition-colors",o.level===1&&"pl-0 font-medium",o.level===2&&"pl-3",o.level===3&&"pl-6 text-xs",a===o.id?"text-primary":"text-muted-foreground hover:text-foreground"),children:o.text},o.id))})]})]})}function ed({title:e,content:t,children:n}){const r=pa(),[a,i]=w.useState(!1),o=w.useMemo(()=>KB(t),[t]),c=js.find(d=>r.pathname===d.path);return s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>i(!a),className:"fixed bottom-20 right-4 z-50 md:hidden p-3 rounded-full bg-primary text-primary-foreground shadow-lg","aria-label":"Toggle table of contents",children:a?s.jsx(Ut,{className:"h-5 w-5"}):s.jsx(Km,{className:"h-5 w-5"})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>i(!1)}),s.jsx("div",{className:J("fixed inset-y-0 left-0 z-50 w-72 bg-background p-6 transform transition-transform md:hidden",a?"translate-x-0":"-translate-x-full"),children:s.jsx(rx,{headings:o})}),s.jsxs("div",{className:"flex gap-8",children:[s.jsx("div",{className:"hidden md:block w-56 flex-shrink-0",children:s.jsx(rx,{headings:o})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("nav",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[s.jsx(zn,{to:"/guide",className:"hover:text-foreground transition-colors",children:"Guide"}),s.jsx(sn,{className:"h-4 w-4"}),s.jsx("span",{className:"text-foreground font-medium",children:e})]}),c&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:c.label}),s.jsx("p",{className:"text-lg text-muted-foreground",children:c.description})]}),s.jsx(GB,{content:t}),n,s.jsx(YB,{})]})]})]})}function YB(){const e=pa(),t=js.findIndex(a=>a.path===e.pathname),n=t>0?js[t-1]:null,r=t<js.length-1?js[t+1]:null;return!n&&!r?null:s.jsxs("div",{className:"flex justify-between items-center mt-12 pt-8 border-t border-border",children:[n?s.jsxs(zn,{to:n.path,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(sn,{className:"h-4 w-4 rotate-180"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Previous"}),s.jsx("div",{className:"font-medium",children:n.label})]})]}):s.jsx("div",{}),r&&s.jsxs(zn,{to:r.path,className:"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors text-right",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs uppercase tracking-wide",children:"Next"}),s.jsx("div",{className:"font-medium",children:r.label})]}),s.jsx(sn,{className:"h-4 w-4"})]})]})}function _u({filename:e,content:t,mimeType:n,label:r,variant:a="secondary",className:i}){const o=()=>{const c=new Blob([t],{type:n}),d=URL.createObjectURL(c),p=document.createElement("a");p.href=d,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(d)};return s.jsxs("button",{onClick:o,className:J("flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all",a==="primary"?"bg-primary text-primary-foreground hover:bg-primary/90":"border border-border hover:bg-accent",i),children:[s.jsx(Ps,{className:"h-4 w-4"}),r]})}const _m=`# Random Table JSON Template Specification v1.0

---

## Overview

This specification defines a JSON template format for creating configurable random table generators. The format supports simple weighted tables, composite tables, template-based text generation, mathematical operations, inline switch expressions, multi-level table inheritance, external file references, and generation-time shared variables.

---

## Table of Contents

1. [File Structure](#file-structure)
2. [Metadata Object](#1-metadata-object)
3. [Imports Array](#2-imports-array)
4. [Tables Array](#3-tables-array)
5. [Templates Array](#4-templates-array)
6. [Template Pattern Syntax](#5-template-pattern-syntax)
7. [Variables Object](#6-variables-object)
8. [Shared Block](#7-shared-block)
9. [Placeholder System](#8-placeholder-system)
10. [Table Inheritance](#9-table-inheritance)
11. [ResultType System](#10-resulttype-system)
12. [Markdown Support](#11-markdown-support)
13. [Complete Example](#12-complete-example)
14. [Processing Order](#13-processing-order)
15. [Validation Rules](#14-validation-rules)
16. [Error Handling](#15-error-handling)

---

## File Structure

\`\`\`json
{
  "metadata": { ... },
  "imports": [ ... ],
  "tables": [ ... ],
  "templates": [ ... ],
  "variables": { ... },
  "shared": { ... }
}
\`\`\`

All top-level properties except \`metadata\` and \`tables\` are optional. A minimal valid file requires only \`metadata\` and at least one table.

---

## 1. Metadata Object

Contains information about the file itself and global engine configuration.

### 1.1 Required Properties

| Property | Type | Description |
|----------|------|-------------|
| name | string | Name of the table collection |
| namespace | string | Unique namespace (e.g., \`fantasy.core\`) to prevent collisions |
| version | string | Semantic version number (e.g., \`1.0.1\`) |
| specVersion | string | The specification version this file conforms to (e.g., \`1.0\`) |

### 1.2 Optional Properties

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| author | string | - | Author name or organization |
| description | string | - | Markdown-formatted description |
| instructions | string | - | Usage instructions in Markdown |
| tags | string[] | \`[]\` | Tags for categorizing the collection |
| created | string | - | ISO 8601 date string |
| updated | string | - | ISO 8601 date string |

### 1.3 Source Attribution

Optional properties for tracking content origin and licensing.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| source.book | string | - | Name of the source book or product |
| source.publisher | string | - | Publisher name |
| source.pages | string | - | Page number(s) or range (see formats below) |
| source.isbn | string | - | ISBN if applicable |
| source.url | string | - | URL to product page or official source |
| source.license | string | - | License under which content is used (e.g., \`OGL 1.0a\`, \`CC BY 4.0\`, \`Original\`) |
| source.copyright | string \\| object | - | Copyright notice (string for simple notice, or structured object) |

**Page Reference Formats:**

The \`source.pages\` property supports multiple formats:

| Format | Example | Description |
|--------|---------|-------------|
| Single page | \`"47"\` | A single page number |
| Page range | \`"47-89"\` | Continuous page range |
| Multiple pages | \`"12, 45-67"\` | Non-contiguous pages and ranges |
| Named sections | \`"Appendix A"\` | Non-numeric page references |

#### 1.3.1 Structured Copyright Object

When more detailed copyright information is needed, \`source.copyright\` can be an object:

| Property | Type | Description |
|----------|------|-------------|
| copyright.year | string | Copyright year or range (e.g., \`"2024"\` or \`"2020-2024"\`) |
| copyright.holder | string | Legal entity name that holds the copyright |
| copyright.notice | string | Full copyright notice text |

**Example:**

\`\`\`json
"source": {
  "copyright": {
    "year": "2024",
    "holder": "Open Design LLC",
    "notice": " 2024 Open Design LLC. All rights reserved."
  }
}
\`\`\`

### 1.4 Rights & Permissions

Optional properties for declaring intellectual property rights, usage permissions, and legal contact information. These fields help publishers protect their content while making licensing terms clear to users.

> **Note:** While this specification is open source (CC0), content created using this format remains the intellectual property of its respective copyright holders. These fields provide a standardized way to communicate ownership and usage terms.

#### 1.4.1 Rights Declaration

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| rights.type | string | - | Content classification: \`"proprietary"\`, \`"open-content"\`, \`"fan-content"\`, or \`"licensed"\` |
| rights.official | boolean | \`false\` | Whether this is official publisher content (vs. fan-made) |
| rights.productIdentity | string[] | \`[]\` | List of Product Identity elements (names, characters, logos, etc.) |
| rights.trademarks | string[] | \`[]\` | Trademark notices (e.g., \`"Rolldeo Press"\`, \`"Tome of Rolldeo"\`) |
| rights.compatibilityNotice | string | - | Required compatibility/non-affiliation statement |

**Rights Type Values:**

| Value | Description |
|-------|-------------|
| \`proprietary\` | Fully owned content with all rights reserved |
| \`open-content\` | Content released under an open license (OGL, CC, etc.) |
| \`fan-content\` | Fan-created content using publisher's IP under community policy |
| \`licensed\` | Third-party content used under license agreement |

#### 1.4.2 Usage Permissions

Explicit permissions for how the content may be used. All default to \`false\` if \`rights\` is specified but permissions are omitted.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| rights.permissions.commercialUse | boolean | \`false\` | Whether content may be used in commercial products |
| rights.permissions.modification | boolean | \`false\` | Whether content may be modified or adapted |
| rights.permissions.redistribution | boolean | \`false\` | Whether content may be redistributed |
| rights.permissions.derivativeWorks | boolean | \`false\` | Whether derivative works may be created |
| rights.permissions.attributionRequired | boolean | \`true\` | Whether attribution is required when using content |

#### 1.4.3 Legal Contact

| Property | Type | Description |
|----------|------|-------------|
| rights.contact.licensing | string | Email or URL for licensing inquiries |
| rights.contact.dmca | string | DMCA agent contact for takedown requests |
| rights.contact.general | string | General legal contact |

#### 1.4.4 Terms & Policies

| Property | Type | Description |
|----------|------|-------------|
| rights.termsUrl | string | URL to full terms of use |
| rights.communityPolicyUrl | string | URL to fan content/community use policy |

**Complete Rights Example:**

\`\`\`json
"rights": {
  "type": "proprietary",
  "official": true,
  "productIdentity": [
    "Rolldeo",
    "Rolldeo Tables Collection",
    "All table names and unique entry descriptions"
  ],
  "trademarks": [
    "Rolldeo",
    "Rolldeo Tables"
  ],
  "compatibilityNotice": "Created for use with the Rolldeo random table roller. Compatible with any system-agnostic tabletop gaming.",
  "permissions": {
    "commercialUse": false,
    "modification": true,
    "redistribution": false,
    "derivativeWorks": true,
    "attributionRequired": true
  },
  "contact": {
    "licensing": "licensing@rolldeo.com",
    "dmca": "dmca@rolldeo.com"
  },
  "termsUrl": "https://rolldeo.com/terms",
  "communityPolicyUrl": "https://rolldeo.com/community-use"
}
\`\`\`

### 1.5 Engine Configuration

These optional properties control engine behavior for this file.

| Property | Type | Default | Description |
|----------|------|---------|-------------|
| maxRecursionDepth | integer | \`50\` | Maximum depth for nested table/template references. Prevents infinite loops from circular references. |
| maxExplodingDice | integer | \`100\` | Maximum number of times exploding dice can re-roll. |
| maxInheritanceDepth | integer | \`5\` | Maximum depth for inheritance chains (e.g., C extends B extends A = depth 2). |
| uniqueOverflowBehavior | string | \`"stop"\` | Behavior when unique selection requests more entries than available. One of: \`"stop"\` (return what's available), \`"cycle"\` (restart from full pool), \`"error"\` (throw error). |

**Example:**

\`\`\`json
{
  "metadata": {
    "name": "Fantasy Treasure Generator",
    "namespace": "fantasy.treasure",
    "version": "2.1.0",
    "specVersion": "1.0",
    "author": "Rolldeo Games",
    "description": "A comprehensive treasure generation system for fantasy RPGs.",
    "tags": ["fantasy", "treasure", "loot", "rewards"],
    "source": {
      "book": "Ultimate Treasure Guide",
      "publisher": "Example Games",
      "isbn": "978-1-234567-89-0",
      "license": "CC BY 4.0",
      "url": "https://example-games.com/treasure-guide",
      "copyright": {
        "year": "2024",
        "holder": "Rolldeo Games LLC",
        "notice": " 2024 Rolldeo Games LLC. All rights reserved."
      }
    },
    "rights": {
      "type": "open-content",
      "official": true,
      "permissions": {
        "commercialUse": true,
        "modification": true,
        "redistribution": true,
        "derivativeWorks": true,
        "attributionRequired": true
      },
      "contact": {
        "licensing": "licensing@rolldeo-games.com"
      },
      "termsUrl": "https://rolldeo.com/license"
    },
    "maxRecursionDepth": 25,
    "maxExplodingDice": 50,
    "maxInheritanceDepth": 5,
    "uniqueOverflowBehavior": "stop"
  }
}
\`\`\`

---

## 2. Imports Array

The \`imports\` array allows you to reference tables, templates, and variables from external JSON files. This enables modular content organization, shared libraries, and large-scale content management.

### 2.1 Import Object Properties

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| path | string | Yes | Relative path or URL to the external JSON file |
| alias | string | Yes | Local alias used to reference content from this import. **Must be unique within the file.** |
| description | string | No | Human-readable description of what this import provides |

### 2.2 Path Resolution

Paths can be specified in several formats:

| Format           | Example                                         | Description                             |
| ---------------- | ----------------------------------------------- | --------------------------------------- |
| Relative path    | \`"./creatures/undead.json"\`                     | Relative to the current file's location |
| Parent directory | \`"../shared/core.json"\`                         | Navigate up directory tree              |
| Absolute URL     | \`"https://rolldeo.com/tables/v2/monsters.json"\` | Remote file (requires network access)   |

**Security Note:** Implementations SHOULD restrict remote URLs to HTTPS and MAY implement allowlists for permitted domains.

### 2.3 Referencing Imported Content

Once imported, content is referenced using the alias as a prefix:

| Reference Type | Syntax | Example |
|----------------|--------|---------|
| Table | \`{{alias.tableId}}\` | \`{{undead.skeletons}}\` |
| Template | \`{{alias.templateId}}\` | \`{{core.npcDescription}}\` |
| Variable | \`{{$alias.variableName}}\` | \`{{$shared.defaultCurrency}}\` |
| Inheritance | \`"extends": "alias.tableId"\` | \`"extends": "core.baseTreasure"\` |

### 2.4 Import Behavior

**Namespace Isolation:** Imported content retains its original namespace for provenance tracking, but is accessed locally via the alias. This prevents collisions when importing multiple files that might share table IDs.

**Transitive Imports:** If File A imports File B, and File B imports File C, File A does NOT automatically have access to File C's content. Each file must explicitly declare its own imports.

**Load Order:** Imports are resolved before any table or template processing. Circular imports (File A imports File B which imports File A) MUST be detected and rejected at load time.

**Shared Block Isolation:** The \`shared\` block from imported files is evaluated, but variables won't be available to any other templates or tables.

**Example:**

\`\`\`json
{
  "metadata": {
    "name": "Complete Dungeon Generator",
    "namespace": "mydungeon.complete",
    "version": "1.0.0",
    "specVersion": "1.0"
  },
  "imports": [
    {
      "path": "./creatures/undead.json",
      "alias": "undead",
      "description": "Undead creature tables from the creature compendium"
    },
    {
      "path": "./creatures/beasts.json",
      "alias": "beasts",
      "description": "Beast and animal tables"
    },
    {
      "path": "../shared/treasure.json",
      "alias": "loot",
      "description": "Shared treasure generation tables"
    },
    {
      "path": "https://rolldeo.com/tables/core-v2.json",
      "alias": "core",
      "description": "Publisher's official core tables"
    }
  ],
  "tables": [
    {
      "id": "dungeonEncounter",
      "name": "Dungeon Encounter",
      "type": "composite",
      "resultType": "encounter",
      "sources": [
        { "tableId": "undead.allUndead", "weight": 3 },
        { "tableId": "beasts.dungeonBeasts", "weight": 2 },
        { "tableId": "localTraps", "weight": 1 }
      ]
    },
    {
      "id": "localTraps",
      "name": "Local Trap Table",
      "type": "simple",
      "resultType": "encounter",
      "entries": [
        { "value": "Pit trap" },
        { "value": "Poison dart" }
      ]
    }
  ],
  "templates": [
    {
      "id": "roomDescription",
      "name": "Room Description",
      "resultType": "description",
      "pattern": "This room contains {{dungeonEncounter}}. There is also {{loot.minorTreasure}}."
    }
  ]
}
\`\`\`

### 2.5 Import Validation

Implementations MUST validate:

- All \`path\` values resolve to valid, accessible files
- All \`alias\` values are unique within the importing file
- No circular import chains exist
- Referenced content (\`alias.tableId\`) exists in the imported file
- Imported files conform to a compatible specification version
- All inheritance chains are resolvable (see Section 10)

**Error on Missing Import:** If an imported file cannot be loaded, the entire file MUST fail to load with a clear error message identifying the problematic import.

---

## 3. Tables Array

Each table object can be one of three types: **simple**, **composite**, or **collection**.

### 3.1 Common Table Properties

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| id | string | Yes | - | Unique identifier for the table (local scope). **Must not contain periods (\`.\`)** |
| name | string | Yes | - | Display name for the table |
| type | string | Yes | - | One of: \`"simple"\`, \`"composite"\`, \`"collection"\` |
| description | string | No | - | Markdown-formatted description |
| tags | string[] | No | \`[]\` | Tags for organization and searching |
| hidden | boolean | No | \`false\` | If \`true\`, table won't appear in user-facing lists. **Note:** Hidden tables remain fully accessible to templates and other tables; this is purely UI guidance. |
| extends | string | No | - | ID of table to inherit from (supports \`alias.tableId\` and \`namespace.tableId\` syntax). See Section 10 for multi-level inheritance. |
| defaultSets | object | No | \`{}\` | Default key-value pairs applied to all entries in this table (see Section 3.8) |
| resultType | string | No | - | Classification of output type (see Section 11). Case-insensitive. |
| shared | object | No | \`{}\` | Table-level shared variables evaluated lazily when rolled (see Section 8.8) |

### 3.2 Table Source Attribution

Tables can include their own source attribution to track where specific tables originated, particularly useful when a file combines content from multiple sources.

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| source.book | string | No | Source book name |
| source.page | integer/string | No | Page number or range (see formats below) |
| source.section | string | No | Section or chapter name |
| source.url | string | No | Direct URL to source if available online |
| source.license | string | No | License for this specific table (overrides file-level) |

**Page Number Formats:**

The \`source.page\` property supports multiple formats:

| Format | Example | Description |
|--------|---------|-------------|
| Single page (integer) | \`47\` | A single page number |
| Single page (string) | \`"47"\` | A single page as string |
| Page range | \`"47-89"\` | Continuous page range |
| Multiple pages | \`"12, 45-67"\` | Non-contiguous pages and ranges |
| Named sections | \`"Appendix A"\` | Non-numeric page references |

**Example:**

\`\`\`json
{
  "id": "wanderingMonsters",
  "name": "Wandering Monsters",
  "type": "simple",
  "tags": ["encounters", "monsters", "wilderness"],
  "resultType": "creature",
  "source": {
    "book": "Monster Manual",
    "page": 147,
    "section": "Random Encounters"
  },
  "entries": [ ... ]
}
\`\`\`

### 3.3 Simple Table

A basic table with weighted entries. This is the most common table type and is optimized for ease of data entry.

**Additional Properties:**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| entries | Entry[] | Yes | Array of table entries |

**Entry Object:**

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| id | string | No | Auto-generated | Unique ID within this table. **Required for inheritance overrides.** |
| value | string | Yes | - | The output text. Supports Markdown formatting and may contain template syntax for nested evaluation. |
| weight | number | No* | \`1\` | Relative probability weight. Must be \`0\` or greater. A weight of \`0\` disables the entry (see Section 3.4). |
| range | [number, number] | No* | - | A two-element array specifying an inclusive range (e.g., \`[1, 5]\`). Converted to weight automatically (see Section 3.4). |
| description | string | No | - | Markdown description (for documentation/UI) |
| tags | string[] | No | \`[]\` | Tags for this specific entry |
| sets | object | No | \`{}\` | Key-value pairs that set placeholder values when this entry is selected. Merges with and overrides \`defaultSets\`. |
| assets | object | No | \`{}\` | Key-value pairs mapping asset types to file paths or URLs (see Section 3.5). |
| resultType | string | No | - | Override the table's resultType for this specific entry. Case-insensitive. |

*\\* An entry must have either \`weight\` OR \`range\`, but not both. If neither is specified, \`weight\` defaults to \`1\`.*

**Auto-Generated Entry IDs:**

When an entry does not specify an \`id\`, the engine automatically generates one using the pattern \`{tableId}{NNN}\` where \`NNN\` is a zero-padded three-digit ordinal (001-999). For example, the third entry in a table with \`id: "meleeWeapons"\` receives the auto-generated ID \`meleeWeapons003\`.

Auto-generated IDs are:
- Stable within a single file version (same entry always gets same ID)
- Suitable for internal engine use and logging
- **NOT valid for inheritance overrides** (use explicit IDs instead)

**Example (Minimal):**

\`\`\`json
{
  "id": "weaponType",
  "name": "Weapon Type",
  "type": "simple",
  "resultType": "item",
  "entries": [
    { "value": "sword" },
    { "value": "axe" },
    { "value": "spear" },
    { "value": "dagger" }
  ]
}
\`\`\`

**Example (With Weights, IDs, and ResultType Override):**

\`\`\`json
{
  "id": "treasureContents",
  "name": "Treasure Contents",
  "type": "simple",
  "resultType": "item",
  "tags": ["treasure", "loot"],
  "entries": [
    { "id": "gold", "value": "gold coins", "weight": 3 },
    { "id": "gems", "value": "precious gems", "weight": 2 },
    { "id": "potion", "value": "healing potion", "weight": 1 },
    { "id": "mimic", "value": "**It's a Mimic!**", "weight": 0.5, "resultType": "creature" }
  ]
}
\`\`\`

### 3.4 Range Syntax and Weight Conversion

The \`range\` property provides convenient syntax for tables that use traditional dice-roll ranges (e.g., "1-5: Goblin, 6-10: Orc"). Ranges are automatically converted to weights during parsing.

**Conversion Formula:**

\`\`\`
weight = (range[1] - range[0]) + 1
\`\`\`

| Range | Calculated Weight | Explanation |
|-------|-------------------|-------------|
| \`[1, 5]\` | 5 | Numbers 1, 2, 3, 4, 5 |
| \`[6, 10]\` | 5 | Numbers 6, 7, 8, 9, 10 |
| \`[11, 11]\` | 1 | Single number 11 |
| \`[12, 20]\` | 9 | Numbers 12 through 20 |

**Flexibility Features:**

The range system is intentionally forgiving to accommodate various table designs:

- **Gaps are allowed:** Ranges don't need to be continuous. A table with ranges \`[1, 3]\` and \`[7, 10]\` is validit simply means numbers 4-6 have no entries.
- **Overlaps are allowed:** If two entries have overlapping ranges (e.g., \`[1, 5]\` and \`[4, 8]\`), both entries receive their full calculated weight. This can be useful for "critical hit" style tables where certain results trigger multiple outcomes.
- **Zero-width ranges:** A range like \`[5, 5]\` is valid and equals weight 1.
- **Mixing with weights:** While a single entry cannot have both \`range\` and \`weight\`, different entries in the same table may use different systems.

**Example (d100 Encounter Table):**

\`\`\`json
{
  "id": "wildernessEncounter",
  "name": "Wilderness Encounter (d100)",
  "type": "simple",
  "resultType": "encounter",
  "description": "Roll d100 for a random wilderness encounter",
  "tags": ["encounters", "wilderness", "d100"],
  "entries": [
    { "value": "Nothing eventful", "range": [1, 30] },
    { "value": "Merchant caravan", "range": [31, 45], "resultType": "npc" },
    { "value": "{{dice:1d4+1}} wolves", "range": [46, 60], "resultType": "creature" },
    { "value": "Bandits demand toll", "range": [61, 75], "resultType": "encounter" },
    { "value": "Traveling adventurers", "range": [76, 85], "resultType": "npc" },
    { "value": "{{beasts.rareCreature}}", "range": [86, 95] },
    { "value": "**Dragon sighting!**", "range": [96, 100], "resultType": "creature" }
  ]
}
\`\`\`

**Weight of Zero:**

A \`weight\` of \`0\` is valid and effectively **disables** the entry from being randomly selected. The entry:
- Still exists in the table structure
- Can be referenced by ID for inheritance overrides
- Can be accessed programmatically
- Will NEVER be selected by random rolls

This is particularly useful for:
- Disabling parent entries in child tables via inheritance
- Temporarily removing entries without deleting them
- Creating "template" entries that are referenced but not rolled

**Example (Disabling via Weight):**

\`\`\`json
{
  "id": "customLoot",
  "name": "Custom Loot Table",
  "type": "simple",
  "extends": "core.standardLoot",
  "entries": [
    { "id": "cursedItem", "weight": 0, "value": "Cursed Ring" },
    { "id": "newItem", "value": "Enchanted Amulet", "weight": 2 }
  ]
}
\`\`\`

### 3.5 Entry Assets

The \`assets\` property allows entries to reference associated media files such as images, tokens, audio, or other resources. This enables integration with virtual tabletops, character sheets, and multimedia applications.

**Assets Object:**

The \`assets\` object uses arbitrary string keys to identify asset types. This flexibility allows different applications to define their own asset conventions.

| Common Key | Typical Use |
|------------|-------------|
| \`image\` | Primary illustration or artwork |
| \`token\` | VTT token image |
| \`thumbnail\` | Small preview image |
| \`portrait\` | Character portrait |
| \`sound\` | Sound effect or ambient audio |
| \`music\` | Background music track |
| \`handout\` | Player handout document |
| \`statblock\` | Reference to stat block file |

**Value Format:**

Asset values can be:
- **Relative paths:** \`"images/goblin.png"\` (relative to the JSON file)
- **Absolute URLs:** \`"https://cdn.rolldeo.com/tokens/goblin.webp"\`
- **Data URIs:** \`"data:image/png;base64,..."\` (for embedded small assets)

**Inheritance Behavior:** When a child entry overrides a parent entry, \`assets\` are deep-merged. Child assets override matching keys; unspecified keys are inherited from the parent.

**Example:**

\`\`\`json
{
  "id": "goblin",
  "value": "Goblin",
  "weight": 3,
  "resultType": "creature",
  "tags": ["humanoid", "low-level", "common"],
  "sets": {
    "creatureType": "humanoid",
    "challengeRating": "1/4"
  },
  "assets": {
    "image": "images/creatures/goblin.png",
    "token": "tokens/goblin_token.webp",
    "portrait": "portraits/goblin_portrait.jpg",
    "sound": "sounds/goblin_cackle.mp3",
    "statblock": "statblocks/goblin.json"
  }
}
\`\`\`

### 3.6 Composite Table

Selects which source table to roll on using weighted probability, then rolls once on that table. Use composite tables when you want weighted selection *between* different tables.

**When to Use:** Composite tables are ideal when you need to select from categorically different pools. For example, a "Random Encounter" table might weight toward "Common Creatures" 70% of the time, "Uncommon Creatures" 25%, and "Rare Creatures" 5%.

**Additional Properties:**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| sources | Source[] | Yes | Array of source tables to select from |

**Source Object:**

| Property | Type | Required | Default | Description |
|----------|------|----------|---------|-------------|
| tableId | string | Yes | - | ID of the table to pull from (supports \`alias.tableId\` and \`namespace.tableId\`) |
| weight | number | No | \`1\` | Relative weight for selecting this source. Must be \`0\` or greater. Weight of \`0\` disables this source. |

**ResultType Behavior:** When rolling on a composite table:
1. If the selected entry has a \`resultType\`, use it
2. Else if the selected source table has a \`resultType\`, use it
3. Else if the composite table has a \`resultType\`, use it
4. Else resultType is undefined

**Example:**

\`\`\`json
{
  "id": "randomEncounter",
  "name": "Random Encounter",
  "type": "composite",
  "resultType": "encounter",
  "tags": ["encounters", "combat", "exploration"],
  "sources": [
    { "tableId": "commonCreatures", "weight": 7 },
    { "tableId": "uncommonCreatures", "weight": 2.5 },
    { "tableId": "rareCreatures", "weight": 0.5 },
    { "tableId": "undead.allUndead", "weight": 0 }
  ]
}
\`\`\`

### 3.7 Collection Table

Merges all entries from multiple tables into a single unified pool. The resulting table contains every entry from every source table, preserving original weights and entry IDs.

**When to Use:** Collection tables are for combining related tables into one master table. For example, combining "Swords", "Axes", and "Polearms" tables into an "All Melee Weapons" table.

**Additional Properties:**

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| collections | string[] | Yes | Array of table IDs to combine (supports \`alias.tableId\` and \`namespace.tableId\`) |

**Entry ID Collision Handling:** If multiple source tables contain entries with the same \`id\`, entries are prefixed with their source table ID (e.g., \`swords.longsword\`, \`axes.battleaxe\`). Weights are preserved from the original entries.

**Example:**

\`\`\`json
{
  "id": "allMeleeWeapons",
  "name": "All Melee Weapons",
  "type": "collection",
  "resultType": "item",
  "tags": ["equipment", "weapons", "melee", "combined"],
  "collections": ["swords", "axes", "polearms", "exotic.weapons"]
}
\`\`\`

### 3.8 Default Sets

The \`defaultSets\` property allows you to define placeholder values that apply to all entries in a table. Individual entries can override these defaults using their own \`sets\` property.

**Merge Behavior:** Entry-level \`sets\` are merged with \`defaultSets\`. If both define the same key, the entry-level value takes precedence.

**Inheritance Behavior:** When a table extends another, \`defaultSets\` are deep-merged through the inheritance chain. Child tables' \`defaultSets\` override matching keys from ancestors.

**Example:**

\`\`\`json
{
  "id": "forestCreatures",
  "name": "Forest Creatures",
  "type": "simple",
  "resultType": "creature",
  "tags": ["creatures", "forest", "wilderness"],
  "defaultSets": {
    "terrain": "forest",
    "climate": "temperate"
  },
  "entries": [
    { "value": "Wolf", "sets": { "size": "medium" }, "tags": ["beast", "predator"] },
    { "value": "Bear", "sets": { "size": "large" }, "tags": ["beast", "predator"] },
    { "value": "Snow Owl", "sets": { "size": "small", "climate": "cold" }, "tags": ["beast", "bird"] }
  ]
}
\`\`\`

**Resulting placeholder values when each entry is selected:**

| Entry | @terrain | @climate | @size |
|-------|----------|----------|-------|
| Wolf | forest | temperate | medium |
| Bear | forest | temperate | large |
| Snow Owl | forest | cold | small |

---

## 4. Templates Array

Templates define text generation patterns that combine multiple tables and operations.

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| id | string | Yes | Unique identifier |
| name | string | Yes | Display name |
| pattern | string | Yes | Template pattern string (see Section 5). Supports Markdown. |
| description | string | No | Markdown description |
| tags | string[] | No | Tags for organization and filtering |
| resultType | string | No | Classification of output type. Overrides any resultTypes from tables used within the template. Case-insensitive. |
| shared | object | No | Template-level shared variables evaluated lazily when rolled (see Section 8.8) |

**Example:**

\`\`\`json
{
  "id": "treasureDescription",
  "name": "Treasure Description",
  "resultType": "description",
  "tags": ["treasure", "description", "loot"],
  "pattern": "You find **{{dice:2d6*10}} gold pieces** and _{{itemTable}}_."
}
\`\`\`

---

## 5. Template Pattern Syntax

Templates use double curly braces \`{{}}\` for dynamic content. To include literal \`{{\` or \`}}\` in output, escape them as \`\\{{\` and \`\\}}\`.

### 5.1 Syntax Reference

The following table lists all supported operations in order of parsing priority:

| Syntax                        | Description                                    | Example                       |
| ----------------------------- | ---------------------------------------------- | ----------------------------- |
| \`{{tableId}}\`                 | Roll once on specified table                   | \`{{treasureTable}}\`           |
| \`{{alias.tableId}}\`           | Roll on table from imported file               | \`{{loot.minorTreasure}}\`      |
| \`{{namespace.tableId}}\`       | Roll on table from specific namespace          | \`{{fantasy.core.treasure}}\`   |
| \`{{again}}\`                   | Roll once more on the current table            | \`{{again}}\`                   |
| \`{{N*again}}\`                 | Roll N times on the current table              | \`{{2*again}}\`                 |
| \`{{N*unique*again}}\`          | Roll N times on current table, no duplicates   | \`{{3*unique*again}}\`          |
| \`{{dice:XdY}}\`                | Standard dice roll                             | \`{{dice:3d6}}\`                |
| \`{{dice:XdY+Z}}\`              | Dice with arithmetic                           | \`{{dice:2d8+3}}\`              |
| \`{{dice:XdY-Z}}\`              | Dice with subtraction                          | \`{{dice:2d8-1}}\`              |
| \`{{dice:XdY*Z}}\`              | Dice with multiplication                       | \`{{dice:2d6*10}}\`             |
| \`{{dice:XdYkH}}\`              | Keep highest H dice                            | \`{{dice:4d6k3}}\`              |
| \`{{dice:XdYkL}}\`              | Keep lowest L dice                             | \`{{dice:2d20kl1}}\`            |
| \`{{dice:XdY!}}\`               | Exploding dice (max value re-rolls)            | \`{{dice:1d6!}}\`               |
| \`{{dice:XdY!+Z}}\`             | Exploding dice with modifier                   | \`{{dice:1d6!+2}}\`             |
| \`{{N*tableId}}\`               | Roll N times (with replacement)                | \`{{3*itemTable}}\`             |
| \`{{N*unique*tableId}}\`        | Roll N times (no duplicates)                   | \`{{3*unique*itemTable}}\`      |
| \`{{dice:XdY*tableId}}\`        | Roll dice for count, then roll that many times | \`{{dice:1d4*treasureTable}}\`  |
| \`{{N*tableId\\|"sep"}}\`        | Multiple rolls with custom separator           | \`{{3*nameTable\\|", "}}\`       |
| \`{{N*unique*tableId\\|"sep"}}\` | Unique rolls with custom separator             | \`{{3*unique*items\\|" and "}}\` |
| \`{{tableId#instance}}\`        | Named instance for conditional references      | \`{{weapon#primary}}\`          |
| \`{{$variableName}}\`           | Reference a stored variable (static or shared) | \`{{$playerRace}}\`             |
| \`{{$alias.variableName}}\`     | Reference a variable from imported file        | \`{{$core.defaultCurrency}}\`   |
| \`{{@placeholder.property}}\`   | Lookup property from placeholder context       | \`{{@size.buildingCount}}\`     |
| \`{{@self.description}}\`       | Access current entry's description             | \`{{@self.description}}\`       |
| \`{{$var*tableId}}\`            | Use shared variable as roll count              | \`{{$monsterCount*creatures}}\` |
| \`{{$var*unique*tableId}}\`     | Use shared variable for unique roll count      | \`{{$count*unique*loot}}\`      |
| \`{{N*table >> $var}}\`         | Capture N roll results into variable           | \`{{3*items >> $loot}}\`        |
| \`{{N*unique*table >> $var}}\`  | Capture N unique rolls into variable           | \`{{3*unique*items >> $loot}}\` |
| \`{{N*table >> $var\\|silent}}\` | Capture without output                         | \`{{3*items >> $loot\\|silent}}\`|
| \`{{$var[N]}}\`                 | Access captured item by index (0-based)        | \`{{$loot[0]}}\`                |
| \`{{$var[N].@prop}}\`           | Access captured item's sets property           | \`{{$loot[0].@enemy}}\`         |
| \`{{$var.count}}\`              | Get count of captured items                    | \`{{$loot.count}}\`             |
| \`{{collect:$var.@prop}}\`      | Aggregate property across all captured items   | \`{{collect:$loot.@enemy}}\`    |
| \`{{collect:$var.@prop\\|unique}}\` | Aggregate with deduplication               | \`{{collect:$loot.@enemy\\|unique}}\` |

### 5.2 The \`again\` Keyword

The \`again\` keyword enables "roll again" mechanics within a table entry's value. When processed, it rolls on the same table that contains the current entry.

**Self-Reference Safety:** When \`again\` is used, the entry containing it is automatically excluded from subsequent rolls to prevent infinite loops. This exclusion applies only to the immediate reroll chain, not to future independent rolls on the same table.

**Syntax Variants:**

| Syntax | Description |
|--------|-------------|
| \`{{again}}\` | Roll once more on this table |
| \`{{N*again}}\` | Roll N times on this table |
| \`{{N*unique*again}}\` | Roll N times, no duplicates (excluding self) |
| \`{{again\\|"sep"}}\` | Roll again with custom separator |
| \`{{N*again\\|"sep"}}\` | Roll N times with custom separator |
| \`{{dice:XdY*again}}\` | Roll dice for count, then roll that many times |

**Example: Wild Magic Surge Table**

\`\`\`json
{
  "id": "wildMagic",
  "name": "Wild Magic Surge",
  "type": "simple",
  "resultType": "effect",
  "tags": ["magic", "wild-magic", "chaos"],
  "entries": [
    { "value": "You can fly for 1 minute", "tags": ["beneficial", "movement"] },
    { "value": "Your skin turns bright blue for 24 hours", "tags": ["cosmetic"] },
    { "value": "You cast *fireball* centered on yourself", "tags": ["harmful", "fire"] },
    { "value": "**Double surge!** {{2*unique*again|\\" AND \\"}}", "tags": ["meta", "double"] },
    { "value": "Nothing happens", "weight": 2, "tags": ["null"] }
  ]
}
\`\`\`

**Possible output for "Double surge!":**
> **Double surge!** You can fly for 1 minute AND Your skin turns bright blue for 24 hours

### 5.3 Dice Notation

All dice operations must be prefixed with \`dice:\` to distinguish them from table references.

| Notation | Description |
|----------|-------------|
| \`XdY\` | Roll X dice with Y sides |
| \`+Z\`, \`-Z\`, \`*Z\` | Add, subtract, or multiply result by Z |
| \`kN\` or \`khN\` | Keep highest N dice |
| \`klN\` | Keep lowest N dice |
| \`!\` | Exploding (rolls of max value roll again, up to \`maxExplodingDice\`) |

**Examples:**
- \`{{dice:3d6}}\`  Roll 3d6 (result: 3-18)
- \`{{dice:4d6k3}}\`  Roll 4d6, keep highest 3
- \`{{dice:2d10+5}}\`  Roll 2d10, add 5
- \`{{dice:1d6!}}\`  Roll 1d6, 6s explode

### 5.4 Math Expressions

Use the \`math:\` prefix to perform arithmetic operations. Math expressions can combine variables, placeholders, literal numbers, and inline dice rolls.

#### 5.4.1 Basic Syntax

| Component | Syntax | Example |
|-----------|--------|---------|
| Literal integers | \`N\` | \`5\`, \`-3\`, \`100\` |
| Variables | \`$varName\` | \`$baseValue\`, \`$bonus\` |
| Imported variables | \`$alias.varName\` | \`$core.multiplier\` |
| Placeholders | \`@placeholder.property\` | \`@creature.hitDice\` |
| Inline dice | \`dice:XdY...\` | \`dice:2d6\`, \`dice:1d4+1\` |

#### 5.4.2 Operators

| Operator | Description | Precedence |
|----------|-------------|------------|
| \`(\` \`)\` | Grouping | Highest |
| \`*\` | Multiplication | High |
| \`/\` | Integer division (rounds toward zero) | High |
| \`+\` | Addition | Low |
| \`-\` | Subtraction | Low |

Operators of equal precedence are evaluated left to right.

#### 5.4.3 Examples

**Simple variable arithmetic:**
\`\`\`
{{math:$base + $bonus}}
{{math:$price * $quantity}}
{{math:$total / 2}}
\`\`\`

**With grouping:**
\`\`\`
{{math:($strength - 10) / 2}}            D&D-style ability modifier
{{math:($base + $bonus) * $multiplier}}
\`\`\`

**With inline dice:**
\`\`\`
{{math:dice:2d6 + $strMod}}              Damage roll with modifier
{{math:dice:1d20 + $attackBonus}}        Attack roll
{{math:$level * dice:1d8 + $conMod}}     Hit points per level
\`\`\`

**With placeholders:**
\`\`\`
{{math:@creature.hd * 4 + 10}}           Calculate HP from hit dice
{{math:@item.basePrice * $markup}}       Dynamic pricing
\`\`\`

**Complex TTRPG calculations:**
\`\`\`
{{math:(dice:4d6k3 - 10) / 2}}           Roll stats, calculate modifier
{{math:$proficiencyBonus + @weapon.attackMod + $strMod}}
\`\`\`

#### 5.4.4 Type Coercion and Errors

- **Non-numeric values** coerce to \`0\` with a logged warning
- **Division by zero** evaluates to \`0\` with a logged warning
- **All results are integers**decimal results are rounded toward zero
- Inline dice are rolled once when the math expression is evaluated

#### 5.4.5 Where Math Expressions Can Be Used

| Context | Example |
|---------|---------|
| Shared block values | \`"damage": "{{math:dice:2d6 + $strMod}}"\` |
| Template patterns | \`"You deal {{math:$baseDamage + $bonus}} damage."\` |
| Entry values | \`"{{math:@creature.count * 10}} gold pieces"\` |
| Conditional values | \`"value": "{{math:$current + 5}}"\` |

### 5.5 Multiple Rolls

Use the \`*\` operator to roll multiple times on a table.

| Syntax | Behavior |
|--------|----------|
| \`{{3*table}}\` | Roll 3 times, results joined by \`, \` (default) |
| \`{{3*unique*table}}\` | Roll 3 times, no duplicates |
| \`{{dice:1d4*table}}\` | Roll 1d4 to determine count, then roll that many times |
| \`{{3*table\\|" and "}}\` | Roll 3 times, join with \` and \` |
| \`{{$count*table}}\` | Use shared variable as count (must resolve to integer) |

**Separator Syntax:** Separators must be enclosed in double quotes after a pipe character. To include a literal double quote in the separator, escape it as \`\\"\`.

**Variable as Count:** When using a shared variable as a roll count:
- The variable must resolve to a number
- Non-integer values are rounded down (toward zero)
- Values  0 result in zero rolls (empty string output)
- Non-numeric values are coerced; coercion failure results in 0

### 5.6 Unique Constraint Logic

When using \`{{N*unique*tableId}}\`:

1. A temporary pool is created containing all table entries with weight > 0.
2. Each selection removes that entry from the pool.
3. Weights apply to each successive draw from the remaining pool.
4. If N exceeds total available entries, behavior follows \`uniqueOverflowBehavior\` in metadata:
   - \`"stop"\` (default): Return all available entries
   - \`"cycle"\`: Refill pool and continue
   - \`"error"\`: Throw an error

### 5.7 Instance References

Use \`#\` to create named instances for later conditional logic:

\`\`\`
{{weapon#primary}} and {{weapon#secondary}}
\`\`\`

This rolls on \`weapon\` twice, storing results as \`primary\` and \`secondary\` instances that can be referenced in conditionals.

### 5.8 Variables and Placeholders

**Variables** (\`$\`) reference values from the global \`variables\` object (static), the \`shared\` block (generation-time), imported file variables, or values set by conditionals:

\`\`\`
{{$defaultCurrency}}
{{$core.standardSeparator}}
{{$monsterCount}}
\`\`\`

**Lookup Order:** When resolving \`{{$name}}\`:
1. Check shared scope (generation-time variables)
2. Check static variable scope (file-level variables)
3. If not found and within a conditional's when-clause: treat as \`false\`
4. Otherwise: throw \`REFERENCE_ERROR\`

**Placeholders** (\`@\`) reference contextual values set by previously rolled entries via their \`sets\` property:

\`\`\`
{{@race.firstName}}
\`\`\`

See Section 9 for details on the placeholder system.

### 5.9 Roll Capture System

The Roll Capture System enables capturing multiple roll results for later aggregation and individual access. This allows combining properties from multiple independent table rolls into unified lists.

#### 5.9.1 Capture Declaration

Use the \`>>\` operator to capture roll results into a named variable:

| Syntax | Description |
|--------|-------------|
| \`{{N*table >> $var}}\` | Roll N times, capture results into \`$var\` |
| \`{{N*unique*table >> $var}}\` | Roll N unique times, capture into \`$var\` |
| \`{{$count*table >> $var}}\` | Use shared variable for roll count |
| \`{{dice:XdY*table >> $var}}\` | Use dice roll for count |

**Output Control:**

| Syntax | Description |
|--------|-------------|
| \`{{3*table >> $var}}\` | Outputs joined values, creates capture |
| \`{{3*table >> $var\\|"; "}}\` | Outputs with custom separator, creates capture |
| \`{{3*table >> $var\\|silent}}\` | No output, only creates capture |

**Data Model:** A capture variable stores an ordered array of captured items:

\`\`\`typescript
interface CaptureItem {
  value: string;           // The resolved output text from the roll
  sets: Record<string, string>;  // The merged sets (defaultSets + entry sets), fully resolved
}

interface CaptureVariable {
  items: CaptureItem[];
  count: number;           // items.length
}
\`\`\`

#### 5.9.2 Capture Variable Access

**Basic Access:**

| Syntax | Returns | Example |
|--------|---------|---------|
| \`{{$var}}\` | All raw values, comma-separated | \`"palace, mansion, fortress"\` |
| \`{{$var\\|"sep"}}\` | All raw values, custom separator | \`"palace; mansion; fortress"\` |
| \`{{$var.count}}\` | Number of captured items (integer) | \`3\` |

**Indexed Access (0-based):**

| Syntax | Returns | Example |
|--------|---------|---------|
| \`{{$var[0]}}\` | Raw value of first item | \`"palace"\` |
| \`{{$var[1]}}\` | Raw value of second item | \`"mansion"\` |
| \`{{$var[-1]}}\` | Raw value of last item | \`"fortress"\` |
| \`{{$var[0].value}}\` | Explicit raw value access | \`"palace"\` |
| \`{{$var[0].@enemy}}\` | The \`enemy\` sets property from first item | \`"mad scientist"\` |

**Out-of-bounds behavior:** Returns empty string with engine warning.

#### 5.9.3 Property Aggregation (collect)

The \`collect:\` prefix aggregates a specific property across all captured items:

| Syntax | Returns |
|--------|---------|
| \`{{collect:$var.value}}\` | All raw values (equivalent to \`{{$var}}\`) |
| \`{{collect:$var.@prop}}\` | All values of \`@prop\` from each item, comma-separated |
| \`{{collect:$var.@prop\\|"sep"}}\` | Same, with custom separator |
| \`{{collect:$var.@prop\\|unique}}\` | Deduplicated values, comma-separated |
| \`{{collect:$var.@prop\\|unique\\|"sep"}}\` | Deduplicated values, custom separator |

**Missing property behavior:** If an item doesn't have the requested property, it contributes an empty string to the collection.

#### 5.9.4 Example

\`\`\`json
{
  "templates": [
    {
      "id": "fullSetting",
      "name": "Full Campaign Setting",
      "pattern": "## Settings\\n{{dice:1d3+1*unique*settingIdeas >> $ideas}}\\n\\n## Enemies\\n{{collect:$ideas.@enemy}}\\n\\n## Allies\\n{{collect:$ideas.@ally}}"
    }
  ]
}
\`\`\`

**Sample Output:**

\`\`\`markdown
## Settings
A crumbling palace, A haunted manor, An icy fortress

## Enemies
mad scientist, vengeful spirit, frost giant

## Allies
disgraced noble, ghostly guardian, arctic ranger
\`\`\`

#### 5.9.5 Capture Scope and Rules

1. **Generation Scope:** Capture variables exist in generation scope (same as shared variables)
2. **Persistence:** They persist for the entire generation run, then are discarded
3. **Namespace:** Capture variable names share namespace with shared variables (no conflicts allowed)
4. **Forward References:** A capture variable must be declared before it can be accessed
5. **Overwrite Behavior:** If a capture variable name is reused, the second capture overwrites the first (with warning)

### 5.10 Switch Expressions

Switch expressions provide inline conditional value selection within templates. They allow you to choose different outputs based on runtime conditions, all within a single expression.

#### 5.10.1 Basic Syntax

There are two forms of switch expressions:

**Standalone Switch** (no base expression):
\`\`\`
{{switch[condition:result].switch[condition2:result2].else[fallback]}}
\`\`\`

**Attached Switch** (transforms an expression result):
\`\`\`
{{expression.switch[condition:result].else[fallback]}}
\`\`\`

#### 5.10.2 Components

| Component | Description | Required |
|-----------|-------------|----------|
| \`condition\` | Boolean expression using variables, operators, and literals | Yes |
| \`result\` | Value returned if condition is true | Yes |
| \`fallback\` | Value returned if no condition matches (in \`.else[]\`) | No |

**Evaluation Order:** Switch clauses are evaluated left-to-right. The first matching condition wins.

**No Match Behavior:**
- Standalone switch: Returns empty string (with console warning)
- Attached switch: Returns the original base expression result

#### 5.10.3 Condition Syntax

Conditions support the same operators as conditionals:

| Operator | Description | Example |
|----------|-------------|---------|
| \`==\` | Equality | \`$gender=="male"\` |
| \`!=\` | Inequality | \`$type!="common"\` |
| \`>\`, \`<\`, \`>=\`, \`<=\` | Numeric comparison | \`$level>=5\` |
| \`contains\` | Substring match (case-insensitive) | \`$name contains "the"\` |
| \`matches\` | Regex pattern match | \`$code matches "^[A-Z]{3}$"\` |
| \`&&\` | Logical AND | \`$class=="wizard" && $level>=5\` |
| \`\\|\\|\` | Logical OR | \`$type=="fire" \\|\\| $type=="ice"\` |
| \`!\` | Logical NOT | \`!$hidden\` |
| \`()\` | Grouping | \`($a \\|\\| $b) && $c\` |

**Implicit Subject (\`$\`):** In attached switch expressions, a standalone \`$\` (not followed by a variable name) refers to the base expression's result:

\`\`\`
{{dice:1d20.switch[$>=20:"Critical!"].switch[$>=10:"Hit"].else["Miss"]}}
\`\`\`

Here, \`$>=20\` means "the dice result is >= 20".

#### 5.10.4 Result Types

Result expressions can be:

| Type | Syntax | Example |
|------|--------|---------|
| String literal | \`"text"\` or \`'text'\` | \`"he"\`, \`"Critical Hit!"\` |
| Capture property | \`$var.@property\` | \`$race.@maleName\` |
| Table reference | \`{{tableId}}\` | \`{{spellBook}}\` |
| Unwrapped table ID | \`tableName\` | \`wizardSpells\` |
| Placeholder | \`@name.property\` | \`@creature.type\` |

**Important:** Results require explicit paths. Use \`$race.@maleName\` not just \`@maleName\` to avoid ambiguity when multiple captures have the same property names.

**Automatic Table Resolution in Shared Variables:**

When a switch expression is used as a shared variable, the engine automatically resolves table references in the winning result and captures the full roll including sets:

\`\`\`json
{
  "shared": {
    "hairStyle": "{{switch[$gender==\\"male\\":maleHairStyles].else[femaleHairStyles]}}"
  },
  "pattern": "Hair: {{$hairStyle}}, Color: {{$hairStyle.@color}}"
}
\`\`\`

In this example:
1. The switch evaluates to either \`maleHairStyles\` or \`femaleHairStyles\` (an unwrapped table ID)
2. The engine recognizes this as a table reference and rolls on it
3. The full result including sets is captured, enabling \`{{$hairStyle.@color}}\` access

This also works with wrapped table references like \`{{wizardSpells}}\` in switch results.

#### 5.10.5 Examples

**Pronoun Selection:**
\`\`\`
{{switch[$gender=="male":"he"].switch[$gender=="female":"she"].else["they"]}}
\`\`\`

**Dice Outcome Transformation:**
\`\`\`
{{dice:1d20.switch[$>=20:"Critical Hit!"].switch[$>=10:"Hit"].else["Miss"]}}
\`\`\`

**Gender-Based Name Selection:**
\`\`\`json
{
  "shared": {
    "$gender": "{{gender}}",
    "$race": "{{race}}"
  },
  "pattern": "A {{$gender}} {{$race}} named {{switch[$gender==\\"male\\":$race.@maleName].else[$race.@femaleName]}}"
}
\`\`\`

**Complex Conditions with Nested Tables:**
\`\`\`
{{switch[$class=="wizard" && $level>=5:{{powerSpells}}].else[{{basicSpells}}]}}
\`\`\`

**Table Result Transformation:**
\`\`\`
{{mood.switch[$=="angry":"furiously"].switch[$=="sad":"mournfully"].else["calmly"]}}
\`\`\`

**Multiple Condition Chains:**
\`\`\`
{{switch[$culture=="english" && $gender=="male":$race.@maleEnglishName].switch[$culture=="english" && $gender=="female":$race.@femaleEnglishName].switch[$culture=="chinese" && $gender=="male":$race.@maleChineseName].switch[$culture=="chinese" && $gender=="female":$race.@femaleChineseName].else[$race.@defaultName]}}
\`\`\`

#### 5.10.6 Switch Expression Use Cases

Switch expressions are the primary mechanism for conditional logic in templates. They handle all conditional value selection inline during pattern evaluation.

**Common use cases:**
- Selecting between property values based on other variables
- Transforming expression results inline
- Gender/race/class-based name selection
- Dice outcome interpretation
- Adding conditional text (append empty string for no-match cases)
- Conditional warnings or notes based on rolled results

**Conditional text pattern:**
\`\`\`
{{switch[@danger.value=="high":"\\n\\n*Warning: This area is dangerous.*"].else[""]}}
\`\`\`

This pattern appends conditional text when the condition is met, or nothing when it's not.

#### 5.10.7 Common Pattern: Conditional Sub-Selection

One of the most powerful and common patterns in table design is selecting sub-tables based on multiple rolled factors. This applies to many scenarios:

- **Names:** Gender + culture  appropriate first name, surname
- **Encounters:** Terrain + time of day  appropriate creature/event tables
- **Loot:** Enemy type + difficulty  appropriate reward tables
- **Military:** Region (land/air/sea)  appropriate units, attacks, defenses
- **NPCs:** Faction + role  appropriate names, traits, equipment

The core concept:
1. Roll one or more "selector" tables (e.g., region, gender, faction)
2. Use switch expressions to pick sub-tables based on selector values
3. Store results in variables for reuse throughout the template
4. Each selector entry can contain sets pointing to its own sub-tables

**Example: Region-Based Military Units**

A simple example where region type determines available units:

\`\`\`
{{switch[$region=="Land":{{landUnits}}].switch[$region=="Air":{{airUnits}}].switch[$region=="Sea":{{seaUnits}}].else[{{genericUnits}}]}}
\`\`\`

**Example: Character Names (Gender + Culture)**

A more complex example generating names that depend on multiple factors:

**Example Setup:**

First, define your helper tables:

\`\`\`json
{
  "tables": [
    {
      "id": "gender",
      "name": "Gender",
      "type": "simple",
      "hidden": true,
      "entries": [
        { "value": "male" },
        { "value": "female" }
      ]
    },
    {
      "id": "culture",
      "name": "Culture",
      "type": "simple",
      "entries": [
        { "id": "dragonborn", "value": "Dragonborn" },
        { "id": "elf", "value": "Elf" },
        { "id": "dwarf", "value": "Dwarf" }
      ]
    },
    {
      "id": "maleDragonbornNames",
      "name": "Male Dragonborn Names",
      "type": "simple",
      "hidden": true,
      "entries": [
        { "value": "Arjhan" },
        { "value": "Balasar" },
        { "value": "Kriv" }
      ]
    },
    {
      "id": "femaleDragonbornNames",
      "name": "Female Dragonborn Names",
      "type": "simple",
      "hidden": true,
      "entries": [
        { "value": "Akra" },
        { "value": "Biri" },
        { "value": "Kava" }
      ]
    },
    {
      "id": "dragonbornSurnames",
      "name": "Dragonborn Surnames",
      "type": "simple",
      "hidden": true,
      "entries": [
        { "value": "Clethtinthiallor" },
        { "value": "Daardendrian" },
        { "value": "Kerrhylon" }
      ]
    }
  ]
}
\`\`\`

**Basic Pattern:** Use switch to select the gender-appropriate name table:

\`\`\`
{{switch[$gender=="male":{{maleDragonbornNames}}].else[{{femaleDragonbornNames}}]}} {{dragonbornSurnames}}
\`\`\`

This produces results like "Balasar Daardendrian" or "Akra Kerrhylon".

**Advanced Pattern with Variables:** Store each name part for later reference:

\`\`\`json
{
  "id": "dragonbornCharacter",
  "name": "Dragonborn Character",
  "resultType": "npc",
  "shared": {
    "$gender": "{{gender}}",
    "$firstName": "{{switch[$gender==\\"male\\":{{maleDragonbornNames}}].else[{{femaleDragonbornNames}}]}}",
    "$surname": "{{dragonbornSurnames}}",
    "$fullName": "{{$firstName}} {{$surname}}"
  },
  "pattern": "**{{$fullName}}** is a {{$gender}} Dragonborn.\\n\\nRefer to {{$firstName}} by first name, or the {{$surname}} clan by surname."
}
\`\`\`

This allows you to:
- Use \`{{$fullName}}\` anywhere you need the complete name
- Use \`{{$firstName}}\` or \`{{$surname}}\` individually
- Reference \`{{$gender}}\` for pronouns or other gender-specific content

**Multi-Culture Pattern:** When you have many cultures, chain switches or use culture-specific sets:

\`\`\`json
{
  "shared": {
    "$gender": "{{gender}}",
    "$culture": "{{culture}}",
    "$firstName": "{{switch[$culture==\\"Dragonborn\\" && $gender==\\"male\\":{{maleDragonbornNames}}].switch[$culture==\\"Dragonborn\\" && $gender==\\"female\\":{{femaleDragonbornNames}}].switch[$culture==\\"Elf\\" && $gender==\\"male\\":{{maleElfNames}}].switch[$culture==\\"Elf\\" && $gender==\\"female\\":{{femaleElfNames}}].else[{{genericNames}}]}}",
    "$surname": "{{switch[$culture==\\"Dragonborn\\":{{dragonbornSurnames}}].switch[$culture==\\"Elf\\":{{elfSurnames}}].else[{{genericSurnames}}]}}",
    "$fullName": "{{$firstName}} {{$surname}}"
  },
  "pattern": "**{{$fullName}}** is a {{$gender}} {{$culture}}."
}
\`\`\`

**Alternative: Using Sets for Cleaner Multi-Culture Support:**

For many cultures, consider putting name table references in the culture entry's sets:

\`\`\`json
{
  "id": "culture",
  "name": "Culture",
  "type": "simple",
  "entries": [
    {
      "id": "dragonborn",
      "value": "Dragonborn",
      "sets": {
        "maleNames": "{{maleDragonbornNames}}",
        "femaleNames": "{{femaleDragonbornNames}}",
        "surnames": "{{dragonbornSurnames}}"
      }
    },
    {
      "id": "elf",
      "value": "Elf",
      "sets": {
        "maleNames": "{{maleElfNames}}",
        "femaleNames": "{{femaleElfNames}}",
        "surnames": "{{elfSurnames}}"
      }
    }
  ]
}
\`\`\`

Then use shared variables with property access:

\`\`\`json
{
  "shared": {
    "gender": "{{gender}}",
    "culture": "{{culture}}",
    "firstName": "{{switch[$gender==\\"male\\":$culture.@maleNames].else[$culture.@femaleNames]}}",
    "surname": "{{$culture.@surnames}}",
    "fullName": "{{$firstName}} {{$surname}}"
  },
  "pattern": "**{{$fullName}}** is a {{$gender}} {{$culture}}."
}
\`\`\`

This approach scales betteradding a new culture means adding one entry with its name table references, rather than updating multiple switch chains.

**More Examples of This Pattern:**

| Scenario | Selector(s) | Sets Contain | Template Access |
|----------|-------------|--------------|-----------------|
| Military units | \`region\` (Land/Air/Sea) | \`attacks\`, \`defenses\`, \`units\` | \`{{$region.@units}}\` |
| Encounters | \`terrain\`, \`timeOfDay\` | \`dayEncounters\`, \`nightEncounters\` | \`{{switch[$time=="day":$terrain.@dayEncounters].else[...]}}\` |
| Loot drops | \`enemyType\`, \`difficulty\` | \`easyLoot\`, \`hardLoot\` | \`{{switch[$difficulty=="hard":$enemy.@hardLoot].else[...]}}\` |
| Faction NPCs | \`faction\`, \`role\` | \`leaderNames\`, \`soldierNames\`, \`spyNames\` | \`{{switch[$role=="leader":$faction.@leaderNames].else[...]}}\` |
| Spells | \`school\`, \`level\` | \`cantripSpells\`, \`lowSpells\`, \`highSpells\` | \`{{switch[$level=="cantrip":$school.@cantripSpells].else[...]}}\` |

**Decision Guide:**
- **Few options per factor (2-3):** Use switch expressions directly
- **Many options, one factor:** Put sub-table refs in that factor's entry sets
- **Many options, multiple factors:** Combine sets approach with switch for remaining factors
- **Need extensibility:** Always prefer sets approachadding entries is easier than updating switches

---

## 6. Variables Object

Static global variables that are loaded at engine initialization and can be referenced throughout templates using \`{{$variableName}}\`.

\`\`\`json
"variables": {
  "defaultSeparator": ", ",
  "setting": "fantasy",
  "campaignYear": "1247"
}
\`\`\`

**Static Nature:** Variables are evaluated once at file load time. They should contain static, non-generative values. While dice expressions and table references are technically permitted, they will be resolved once at load timenot per generation.

**Recommendation:** For values that should be re-evaluated each generation, use the \`shared\` block instead (see Section 8).

Variable names must:
- Start with a letter
- Contain only letters, numbers, and underscores
- Not conflict with reserved words (see Section 15)
- Not duplicate variable names from imported files

**Important:** Variable names and placeholder names exist in separate namespaces. A variable \`$race\` and a placeholder \`@race\` are distinct and do not conflict.

---

## 7. Shared Block

The \`shared\` block defines generation-time variables that are evaluated once at the start of each generation and remain constant throughout that generation run.

### 7.1 Purpose

Shared variables solve the problem of needing consistent values across a single generation. For example, if you roll for "number of monsters" and want to use that same number multiple times in a template, shared variables ensure consistency.

### 7.2 Shared Object Structure

\`\`\`json
"shared": {
  "monsterCount": "{{dice:2d4}}",
  "leaderType": "{{eliteMonsterTable}}",
  "totalThreat": "{{math:$monsterCount + 5}}"
}
\`\`\`

### 7.3 Evaluation Rules

1. **Order-dependent:** Shared variables are evaluated in declaration order
2. **Once per generation:** Each shared value is resolved exactly once at generation start
3. **Forward reference prohibition:** A shared variable cannot reference another shared variable that appears later in the declaration
4. **Static variable shadowing:** A shared variable cannot have the same name as a static variable (error at generation start)
5. **Imported shared isolation:** The \`shared\` block from imported files is NOT evaluated; only the entry-point file's shared block is processed

### 7.4 Supported Expressions

| Expression Type           | Example                            | Result Type   |
| ------------------------- | ---------------------------------- | ------------- |
| Dice expression           | \`"{{dice:2d6}}"\`                   | Integer       |
| Table roll                | \`"{{monsterTable}}"\`               | String        |
| Prior shared reference    | \`"{{$previousVar}}"\`               | Inherits type |
| Static variable reference | \`"{{$staticVar}}"\`                 | Inherits type |
| Math expression           | \`"{{math:$a + $b}}"\`               | Integer       |
| Math with inline dice     | \`"{{math:dice:2d6 + $modifier}}"\` | Integer       |

### 7.5 Math Expressions in Shared Block

Use the \`{{math:...}}\` syntax for arithmetic operations. This explicit syntax eliminates ambiguity and provides full expression support.

**Basic arithmetic:**
\`\`\`json
"shared": {
  "baseMonsters": "{{dice:2d6}}",
  "eliteMonsters": "{{dice:1d4}}",
  "totalMonsters": "{{math:$baseMonsters + $eliteMonsters}}",
  "treasureValue": "{{math:$totalMonsters * 10}}"
}
\`\`\`

If \`baseMonsters\` resolves to \`7\` and \`eliteMonsters\` resolves to \`3\`:
- \`totalMonsters\` = \`{{math:7 + 3}}\`  \`10\`
- \`treasureValue\` = \`{{math:10 * 10}}\`  \`100\`

**With grouping and inline dice:**
\`\`\`json
"shared": {
  "strength": "{{dice:4d6k3}}",
  "strMod": "{{math:($strength - 10) / 2}}",
  "meleeDamage": "{{math:dice:1d8 + $strMod}}"
}
\`\`\`

**TTRPG Examples:**

| Use Case | Expression |
|----------|------------|
| Ability modifier | \`"{{math:($abilityScore - 10) / 2}}"\` |
| Attack bonus | \`"{{math:$proficiency + $strMod}}"\` |
| Damage with modifier | \`"{{math:dice:2d6 + $strMod}}"\` |
| Scaled encounter | \`"{{math:$partyLevel * 2 + dice:1d4}}"\` |
| Gold reward | \`"{{math:$challengeRating * 50 + dice:2d6*10}}"\` |
| HP calculation | \`"{{math:$level * (dice:1d10 + $conMod)}}"\` |

See Section 5.4 for complete math expression syntax and operator details.

### 7.6 Using Shared Variables

Shared variables are referenced with the \`$\` prefix, just like static variables:

\`\`\`json
{
  "pattern": "You encounter {{$monsterCount}} {{creatures}}. They carry {{$monsterCount*unique*treasure|\\", \\"}}."
}
\`\`\`

**As Roll Multiplier:** When used as \`{{$var*tableId}}\`:
- The variable must resolve to a number
- Non-integer values are rounded down
- Values  0 result in zero rolls (empty string)

### 8.7 Example: Complete Shared Usage

\`\`\`json
{
  "metadata": {
    "name": "Encounter Generator",
    "namespace": "encounter.gen",
    "version": "1.0.0",
    "specVersion": "1.0"
  },
  "shared": {
    "encounterSize": "{{dice:2d4}}",
    "creatureType": "{{creatureCategory}}",
    "lootMultiplier": "{{math:$encounterSize / 2}}",
    "totalXP": "{{math:$encounterSize * 50 + dice:2d6*10}}"
  },
  "tables": [
    {
      "id": "creatureCategory",
      "name": "Creature Category",
      "type": "simple",
      "entries": [
        { "value": "goblins" },
        { "value": "orcs" },
        { "value": "undead" }
      ]
    }
  ],
  "templates": [
    {
      "id": "encounter",
      "name": "Random Encounter",
      "resultType": "encounter",
      "pattern": "You encounter {{$encounterSize}} {{$creatureType}}. They have {{$lootMultiplier*treasureTable|\\", \\"}} treasure items worth {{math:$totalXP / 10}} gold."
    }
  ]
}
\`\`\`

### 8.8 Table/Template-Level Shared Variables

In addition to document-level shared variables, you can define \`shared\` on individual tables and templates. These are evaluated **lazily** - only when that specific table or template is rolled.

#### 8.8.1 Syntax

\`\`\`json
{
  "tables": [
    {
      "id": "scaledEncounter",
      "name": "Scaled Encounter",
      "type": "simple",
      "shared": {
        "threatLevel": "{{dice:1d6}}",
        "monsterCount": "{{math:$threatLevel + 2}}"
      },
      "entries": [
        { "value": "{{$monsterCount}} goblins attack!" },
        { "value": "A band of {{$monsterCount}} orcs approaches." }
      ]
    }
  ],
  "templates": [
    {
      "id": "dynamicEncounter",
      "name": "Dynamic Encounter",
      "shared": {
        "partyLevel": "{{dice:1d10}}",
        "dangerModifier": "{{math:$partyLevel / 2}}"
      },
      "pattern": "Danger level {{math:$dangerModifier + dice:1d6}}: {{encounterTable}}"
    }
  ]
}
\`\`\`

#### 8.8.2 Evaluation Rules

1. **Lazy Evaluation**: Table/template-level shared variables are only evaluated when that specific table or template is rolled - not at generation start
2. **Order-Dependent**: Within a \`shared\` block, later variables can reference earlier ones
3. **Propagation**: Shared variables propagate to nested table references - if table A defines \`$foo\` and references table B, table B can use \`$foo\`
4. **Document-Level Precedence**: Document-level shared variables take precedence. Attempting to shadow a document-level shared variable throws an error
5. **No Static Shadowing**: Table/template-level shared cannot shadow static variables

#### 8.8.3 Inheritance from Parent Tables

When a table with \`shared\` is referenced by another table that also defines \`shared\`:
- The parent's shared variables are evaluated first (since it's rolled first)
- If the child table defines a variable with the same name, it is skipped (parent wins)
- This allows tables to work both standalone and when nested

\`\`\`json
{
  "tables": [
    {
      "id": "parentTable",
      "type": "simple",
      "shared": { "count": "{{dice:1d4}}" },
      "entries": [{ "value": "{{$count}} items from {{childTable}}" }]
    },
    {
      "id": "childTable",
      "type": "simple",
      "shared": { "count": "{{dice:1d6}}" },
      "entries": [{ "value": "{{$count}} things" }]
    }
  ]
}
\`\`\`

When rolling \`parentTable\`:
1. \`$count\` is set to 1d4 result (e.g., 3)
2. \`childTable\` is rolled - its \`shared.count\` is skipped since \`$count\` already exists
3. Child entry uses the parent's \`$count\` value (3)

When rolling \`childTable\` directly:
1. \`$count\` is set to 1d6 result (e.g., 5)
2. Entry uses 5

### 8.9 Shared Variables with Property Access

Shared variables capture the full roll result including its \`sets\` (placeholder values), enabling property access syntax with dynamic table resolution.

#### 8.9.1 Purpose

Shared variables solve the problem of needing multiple independent "instances" from the same table. For example, when generating two NPCs (a hero and an enemy), each needs their own race and corresponding race-specific name:

\`\`\`json
{
  "shared": {
    "hero": "{{race}}",
    "enemy": "{{race}}"
  },
  "pattern": "{{$hero.@firstName}} the {{$hero}} battles {{$enemy.@firstName}} the {{$enemy}}"
}
\`\`\`

Each variable captures its own roll result independently, including all set properties.

#### 8.9.2 Syntax

| Syntax | Description | Example |
|--------|-------------|---------|
| \`"varName": "{{table}}"\` | Define shared variable | \`"hero": "{{race}}"\` |
| \`{{$varName}}\` | Access the captured value | \`{{$hero}}\`  \`"Elf"\` |
| \`{{$varName.@property}}\` | Access captured set property | \`{{$hero.@firstName}}\` |

#### 8.9.3 How It Works

1. **Definition**: Define variables in the \`shared\` block
2. **Capture**: When evaluated, the full roll result (value + sets) is captured
3. **Value Access**: \`{{$varName}}\` returns the string value
4. **Property Access**: \`{{$varName.@prop}}\` returns the specified set property (already evaluated if it contained a pattern)

#### 8.9.4 Example: Multi-Character Generation

\`\`\`json
{
  "tables": [
    {
      "id": "race",
      "type": "simple",
      "entries": [
        { "value": "Elf", "sets": { "firstName": "{{elfNames}}", "homeland": "Forest" } },
        { "value": "Dwarf", "sets": { "firstName": "{{dwarfNames}}", "homeland": "Mountain" } }
      ]
    },
    {
      "id": "elfNames",
      "type": "simple",
      "entries": [{ "value": "Legolas" }, { "value": "Arwen" }]
    },
    {
      "id": "dwarfNames",
      "type": "simple",
      "entries": [{ "value": "Gimli" }, { "value": "Thorin" }]
    }
  ],
  "templates": [
    {
      "id": "rivals",
      "name": "Rival Characters",
      "shared": {
        "hero": "{{race}}",
        "enemy": "{{race}}"
      },
      "pattern": "**{{$hero.@firstName}}** the {{$hero}} from the {{$hero.@homeland}} vs **{{$enemy.@firstName}}** the {{$enemy}} from the {{$enemy.@homeland}}"
    }
  ]
}
\`\`\`

**Possible Output:**
> **Legolas** the Elf from the Forest vs **Thorin** the Dwarf from the Mountain

Each character has independent:
- Race value (\`Elf\` vs \`Dwarf\`)
- First name (evaluated from \`{{elfNames}}\` or \`{{dwarfNames}}\` at selection time)
- Homeland property (\`Forest\` vs \`Mountain\`)

#### 8.9.5 Pattern Evaluation in Sets

Set values can contain \`{{pattern}}\` expressions that are evaluated when the entry is selected (at merge time). This enables dynamic content in placeholder values:

\`\`\`json
{
  "sets": {
    "firstName": "{{elfFirstNames}}",     // Rolls table when entry selected
    "hp": "{{dice:2d6+10}}",               // Rolls dice when entry selected
    "description": "A {{adjective}} elf"   // Mixed literal and pattern
  }
}
\`\`\`

When accessing \`{{$hero.@firstName}}\`:

1. The property value was already evaluated at merge time
2. The resolved string value is returned directly

This enables powerful patterns where entry sets define dynamic values that are evaluated once and then accessed consistently throughout the template.

#### 8.9.7 Deep Property Chaining

When a set property value is a single table reference (e.g., \`"{{childTable}}"\`), the engine captures the full result including its own sets. This enables multi-level property access through nested structures.

**Syntax:**

| Pattern | Description |
|---------|-------------|
| \`{{$var.@prop1.@prop2}}\` | Two levels deep |
| \`{{$var.@prop1.@prop2.@prop3}}\` | Three levels deep |
| \`{{$var[0].@prop1.@prop2}}\` | Indexed access with chain |

**Example: Nested Structure**

\`\`\`json
{
  "tables": [
    {
      "id": "conflict",
      "type": "simple",
      "entries": [
        { "value": "War", "sets": { "situation": "{{warSituation}}" } }
      ]
    },
    {
      "id": "warSituation",
      "type": "simple",
      "entries": [
        { "value": "Border Dispute", "sets": { "focus": "Territory" } }
      ]
    }
  ],
  "templates": [
    {
      "id": "scenario",
      "shared": { "conflict": "{{conflict}}" },
      "pattern": "Conflict: {{$conflict}}, Focus: {{$conflict.@situation.@focus}}"
    }
  ]
}
\`\`\`

**Output:** \`Conflict: War, Focus: Territory\`

**How It Works:**

1. \`$conflict\` captures \`"War"\` with sets \`{ situation: { value: "Border Dispute", sets: { focus: "Territory" } } }\`
2. \`{{$conflict.@situation}}\` returns \`"Border Dispute"\` (the nested value)
3. \`{{$conflict.@situation.@focus}}\` traverses into the nested sets and returns \`"Territory"\`

**Behavior Notes:**
- If any property in the chain is a plain string (not a CaptureItem), chaining stops and returns empty
- Non-existent properties return empty string with a console warning
- This works with both shared variables and placeholder access

---

## 8. Placeholder System

Placeholders enable dynamic behavior based on previously rolled results. When an entry is selected, its \`sets\` property (merged with any \`defaultSets\` from the table, and inherited values if applicable) populates a placeholder context that subsequent operations can reference.

### 9.1 Setting Placeholder Values

In a table entry, use \`sets\` to define key-value pairs. Values can be literal strings or contain \`{{pattern}}\` expressions that are evaluated when the entry is selected:

\`\`\`json
{
  "id": "elfEntry",
  "value": "elf",
  "tags": ["playable", "fey"],
  "sets": {
    "race": "elf",
    "firstName": "{{elfFirstNames}}",
    "lifespan": "750"
  }
}
\`\`\`

When this entry is selected:
- \`@race\` returns the literal value \`"elf"\`
- \`@firstName\` is evaluated by rolling the \`elfFirstNames\` table, returning something like \`"Aelindra"\`
- \`@lifespan\` returns the literal value \`"750"\`

**Pattern syntax is required for dynamic content.** A value like \`"elfNames"\` will be treated as a literal string, not a table reference. Use \`"{{elfNames}}"\` to roll a table.

**Reserved Set Names:**

The following property names are reserved and should **not** be used as keys in \`sets\`:

| Reserved Name | Reason |
|---------------|--------|
| \`description\` | Use the entry's \`description\` field instead. Using \`description\` in sets can cause unexpected behavior with \`{{@self.description}}\` and UI display. |

**Correct Usage:**

\`\`\`json
{
  "value": "Deep One",
  "description": "A batrachian humanoid with glistening scales",
  "sets": { "origin": "ocean depths", "threat": "high" }
}
\`\`\`

**Avoid:**

\`\`\`json
{
  "value": "Deep One",
  "sets": { "description": "A batrachian humanoid...", "origin": "ocean depths" }
}
\`\`\`

### 9.2 Using Placeholder Values

Reference placeholders in templates using \`@placeholder.property\` syntax:

\`\`\`
A {{dice:1d100+{{@race.lifespan}}}} year old {{@race.value}}
\`\`\`

**Pre-evaluated Values:**

Since set values containing \`{{pattern}}\` are evaluated when the entry is selected, you simply access the resolved value:

\`\`\`json
{
  "sets": { "firstName": "{{elfFirstNames}}" },
  "pattern": "The elf's name is {{@race.firstName}}"
}
\`\`\`

When accessed, \`{{@race.firstName}}\` returns the already-evaluated name (e.g., \`"Aelindra"\`), not the original pattern. This ensures consistent values when the same placeholder is accessed multiple times in a pattern.

**Nested CaptureItem Access:**

When a set value is a single table reference (e.g., \`"{{childTable}}"\`), the engine captures the full result including its sets as a nested structure. This enables chained placeholder access:

\`\`\`json
{
  "tables": [
    {
      "id": "person",
      "type": "simple",
      "entries": [
        { "value": "A traveler", "sets": { "culture": "{{culture}}" } }
      ]
    },
    {
      "id": "culture",
      "type": "simple",
      "entries": [
        { "value": "Elvish", "sets": { "greeting": "Mae govannen", "farewell": "Namri" } }
      ]
    }
  ],
  "templates": [
    {
      "id": "meeting",
      "pattern": "{{person}} says '{{@person.culture.@greeting}}' and later '{{@person.culture.@farewell}}'"
    }
  ]
}
\`\`\`

**Output:** \`A traveler says 'Mae govannen' and later 'Namri'\`

The \`@person.culture\` property contains a CaptureItem (not just a string), so you can access its nested sets via \`@person.culture.@greeting\`. This pattern works to any depth where set values are single table references.

### 9.3 Placeholder vs Variable Separation

| Prefix | Source | Syntax | Example |
|--------|--------|--------|---------|
| \`$\` | Static variables, shared variables, or \`setVariable\` action | \`{{$varName}}\` | \`{{$setting}}\` |
| \`@\` | Entry \`sets\` property (merged with \`defaultSets\` and inherited) | \`{{@placeholder.property}}\` | \`{{@race.firstName}}\` |

This separation prevents naming collisions and clarifies the source of each value.

### 9.4 The \`@self\` Placeholder

The \`@self\` placeholder provides access to properties of the current entry being evaluated. This allows an entry's value to reference its own description field.

| Syntax | Description |
|--------|-------------|
| \`{{@self.description}}\` | The current entry's \`description\` field |
| \`{{@self.value}}\` | The current entry's raw (unevaluated) \`value\` string |

**Example:**

\`\`\`json
{
  "tables": [
    {
      "id": "treasures",
      "type": "simple",
      "entries": [
        {
          "value": "You found {{@self.description}}!",
          "description": "a gleaming silver sword"
        },
        {
          "value": "The chest contains {{@self.description}}.",
          "description": "{{dice:3d6*10}} gold coins"
        }
      ]
    }
  ]
}
\`\`\`

**Outputs:**
- Entry 1: \`You found a gleaming silver sword!\`
- Entry 2: \`The chest contains 90 gold coins.\` (dice rolled)

**Behavior:**
- If the entry has no \`description\` field, \`{{@self.description}}\` returns an empty string
- Expressions within the description (like \`{{dice:1d6}}\`) are evaluated when accessed
- \`{{@self.value}}\` returns the raw value string before any expression evaluation
- In nested rolls, \`@self\` refers to the innermost entry being evaluated

**@self.value Example:**

\`\`\`json
{
  "entries": [
    {
      "value": "The pattern was: {{@self.value}}",
      "description": "a debug entry"
    }
  ]
}
\`\`\`

This would output: \`The pattern was: The pattern was: {{@self.value}}\`

The \`@self.value\` property is useful for debugging or when you need to reference the entry's own template structure.

---

## 9. Table Inheritance

Tables can extend other tables using the \`extends\` property. The child table inherits all entries from the parent, then applies its own modifications.

### 10.1 Basic Inheritance

\`\`\`json
{
  "id": "basicLoot",
  "type": "simple",
  "tags": ["loot", "base"],
  "entries": [
    { "id": "gold", "value": "Copper coins", "weight": 5 },
    { "id": "silver", "value": "Silver coins", "weight": 3 }
  ]
}
\`\`\`

\`\`\`json
{
  "id": "richLoot",
  "extends": "basicLoot",
  "type": "simple",
  "tags": ["loot", "wealthy"],
  "entries": [
    { "id": "gold", "value": "Gold coins", "weight": 2 },
    { "id": "gems", "value": "Precious gems", "weight": 1 }
  ]
}
\`\`\`

**Result for \`richLoot\`:**
- \`gold\`: "Gold coins" (weight 2)  *overridden*
- \`silver\`: "Silver coins" (weight 3)  *inherited*
- \`gems\`: "Precious gems" (weight 1)  *added*

### 10.2 Multi-Level Inheritance

Tables can form inheritance chains where Table C extends Table B, which extends Table A.

\`\`\`json
{
  "id": "baseTreasure",
  "type": "simple",
  "defaultSets": { "rarity": "common" },
  "entries": [
    { "id": "copper", "value": "Copper coins", "weight": 5 },
    { "id": "silver", "value": "Silver coins", "weight": 3 },
    { "id": "gold", "value": "Gold coins", "weight": 1 }
  ]
}
\`\`\`

\`\`\`json
{
  "id": "mediumTreasure",
  "extends": "baseTreasure",
  "type": "simple",
  "defaultSets": { "rarity": "uncommon" },
  "entries": [
    { "id": "copper", "weight": 3 },
    { "id": "gems", "value": "Gemstones", "weight": 2 }
  ]
}
\`\`\`

\`\`\`json
{
  "id": "largeTreasure",
  "extends": "mediumTreasure",
  "type": "simple",
  "defaultSets": { "rarity": "rare", "quality": "fine" },
  "entries": [
    { "id": "copper", "weight": 0 },
    { "id": "gold", "value": "Platinum coins", "weight": 3 },
    { "id": "artifacts", "value": "Ancient artifact", "weight": 1 }
  ]
}
\`\`\`

**Resolution for \`largeTreasure\`:**

| Entry ID | Value | Weight | Source |
|----------|-------|--------|--------|
| copper | "Copper coins" | 0 | Value from baseTreasure, weight overridden by largeTreasure (disabled) |
| silver | "Silver coins" | 3 | Fully inherited from baseTreasure |
| gold | "Platinum coins" | 3 | Value and weight overridden by largeTreasure |
| gems | "Gemstones" | 2 | Inherited from mediumTreasure |
| artifacts | "Ancient artifact" | 1 | Added by largeTreasure |

**DefaultSets Resolution:**
Deep-merged from oldest ancestor to child: \`{ "rarity": "rare", "quality": "fine" }\`

### 10.3 Property-Level Inheritance

When overriding an entry, only explicitly specified properties are replaced. Unspecified properties are inherited from the nearest ancestor that defines them.

\`\`\`json
// Parent
{
  "id": "goblin",
  "value": "Goblin",
  "weight": 3,
  "description": "A small green creature",
  "assets": { "image": "goblin.png", "token": "goblin_token.png" },
  "sets": { "hp": "7", "ac": "15" }
}

// Child override
{
  "id": "goblin",
  "weight": 5,
  "assets": { "image": "goblin_elite.png" }
}
\`\`\`

**Resulting entry:**
\`\`\`json
{
  "id": "goblin",
  "value": "Goblin",              // inherited
  "weight": 5,                     // overridden
  "description": "A small green creature",  // inherited
  "assets": { 
    "image": "goblin_elite.png",   // overridden
    "token": "goblin_token.png"    // inherited (deep merge)
  },
  "sets": { "hp": "7", "ac": "15" }  // inherited
}
\`\`\`

**Explicit Removal:** To remove an inherited property, set it to \`null\`:

\`\`\`json
{
  "id": "goblin",
  "description": null,   // removes the description
  "sets": null           // removes all sets
}
\`\`\`

### 10.4 Inheritance Rules

1. **Explicit IDs required:** Only entries with explicit \`id\` values can be overridden. Attempting to override an entry without an ID produces a parse-time error.

2. **Single parent:** A table can only extend one other table (no diamond inheritance). Use collection tables for combining multiple sources.

3. **Depth limit:** Inheritance chains are limited by \`maxInheritanceDepth\` (default: 5). Exceeding this produces a parse-time error.

4. **Topmost wins:** The child table's values always take precedence. In a chain ABC, C's values override both B and A, even if B didn't override A.

5. **No circular inheritance:** If Table A extends Table B, Table B cannot extend Table A (directly or indirectly).

6. **Tags not inherited:** Each table defines its own tags. Child tables do not inherit parent tags.

7. **ResultType not inherited:** Each table defines its own resultType.

8. **Cross-file inheritance:** Tables can extend tables from imported files using \`alias.tableId\` syntax.

### 10.5 Cross-File and Cross-Namespace Inheritance

Tables can extend tables from imported files or other namespaces:

\`\`\`json
{
  "id": "customTreasure",
  "extends": "loot.baseTreasure",
  "type": "simple",
  "entries": [ ... ]
}
\`\`\`

\`\`\`json
{
  "id": "customTreasure",
  "extends": "fantasy.core.baseTreasure",
  "type": "simple",
  "entries": [ ... ]
}
\`\`\`

**Validation:** All ancestors in an inheritance chain must be resolvable at file load time. If any ancestor table is missing (file not imported, table doesn't exist), the engine must produce a clear error:

\`\`\`
INHERITANCE_ERROR in table 'customTreasure':
  Cannot resolve parent 'loot.baseTreasure'.
  The import alias 'loot' is defined, but table 'baseTreasure' was not found.
\`\`\`

---

## 10. ResultType System

The \`resultType\` field provides semantic classification of output, enabling consuming applications to handle different result types appropriately.

### 11.1 Properties

- **Optional:** ResultType is not required on any element
- **Case-insensitive:** \`"Creature"\`, \`"creature"\`, and \`"CREATURE"\` are equivalent
- **User-definable:** Any string value is valid; namespaced values are encouraged for custom types
- **Not inherited:** ResultType is not inherited through table inheritance chains

### 11.2 Default Types

The following types are recommended as a baseline vocabulary:

| Type | Description |
|------|-------------|
| \`creature\` | A monster, animal, or other creature |
| \`npc\` | A non-player character |
| \`faction\` | An organization, guild, or group |
| \`item\` | Equipment, treasure, or objects |
| \`loot\` | Treasure hauls or reward packages |
| \`location\` | Places, dungeons, or areas |
| \`encounter\` | Combat or exploration encounters |
| \`event\` | Things that happen, occurrences |
| \`hook\` | Plot hooks or adventure seeds |
| \`complication\` | Obstacles or problems |
| \`name\` | Character, place, or thing names |
| \`trait\` | Personality traits, features, or characteristics |
| \`effect\` | Spell effects, conditions, or outcomes |
| \`environment\` | Weather, terrain, or atmosphere |
| \`ability\` | Skills, powers, or capabilities |
| \`description\` | Narrative text or flavor |
| \`rumor\` | Information, gossip, or lore |
| \`dialogue\` | Speech or conversation |
| \`statistic\` | Numbers, stats, or metrics |
| \`number\` | Pure numeric output |
| \`currency\` | Money or value amounts |
| \`time\` | Durations or timestamps |
| \`weather\` | Weather conditions |

### 11.3 Custom Types

Publishers may define their own types using namespace conventions:

\`\`\`json
"resultType": "starships/cruiser"
"resultType": "wh40k/regiment"
"resultType": "buildings/al-kazir/trade"
\`\`\`

### 11.4 Precedence Rules

**For Simple Tables:**
1. Entry's \`resultType\` (if defined)
2. Table's \`resultType\` (if defined)
3. Undefined

**For Composite Tables:**
1. Selected entry's \`resultType\` (if defined)
2. Selected source table's \`resultType\` (if defined)
3. Composite table's \`resultType\` (if defined)
4. Undefined

**For Templates:**
1. Template's \`resultType\` (always used if defined)
2. Undefined (template resultType is never inherited from tables used within)

### 11.5 Engine Handling

ResultType is metadata for consuming applications. The engine:
- MUST include resultType in output when defined
- MUST NOT interpret or act upon resultType values
- MUST normalize case (lowercase recommended)

---

## 11. Markdown Support

The specification supports Markdown formatting in specific fields to enable rich text output.

### 12.1 Markdown-Enabled Fields

| Location | Field | Markdown Support |
|----------|-------|------------------|
| Metadata | \`description\` | Yes |
| Metadata | \`instructions\` | Yes |
| Table | \`description\` | Yes |
| Entry | \`value\` | Yes |
| Entry | \`description\` | Yes |
| Template | \`pattern\` | Yes |
| Template | \`description\` | Yes |
| Conditional | \`value\` | Yes |

### 12.2 Supported Markdown Syntax

Implementations SHOULD support at minimum:

| Syntax | Renders As |
|--------|------------|
| \`**bold**\` | **bold** |
| \`*italic*\` or \`_italic_\` | *italic* |
| \`***bold italic***\` | ***bold italic*** |
| \`\` \`code\` \`\` | \`code\` |
| \`[link text](url)\` | Hyperlink |
| \`- item\` or \`* item\` | Bullet list |
| \`1. item\` | Numbered list |

Implementations MAY support additional Markdown features such as headers, tables, and blockquotes.

### 12.3 Markdown in Template Output

When template syntax is embedded within Markdown, the template is resolved first, then Markdown is rendered:

\`\`\`json
{
  "pattern": "You find a **{{weaponType}}** worth _{{dice:2d6*10}} gold pieces_."
}
\`\`\`

**Resolved output:** \`You find a **sword** worth _70 gold pieces_.\`

**Rendered:** You find a **sword** worth *70 gold pieces*.

### 12.4 Escaping Markdown

To output literal Markdown characters, use standard Markdown escaping with backslashes:

\`\`\`json
{
  "value": "The price is 5\\\\*10 = 50 gold"
}
\`\`\`

**Output:** The price is 5\\*10 = 50 gold

---

## 12. Complete Example

\`\`\`json
{
  "metadata": {
    "name": "Fantasy Town Generator",
    "namespace": "fantasy.towns",
    "version": "2.2.0",
    "specVersion": "1.0",
    "author": "Game Master",
    "description": "Generates random fantasy town descriptions with **dynamic features** based on settlement size.",
    "tags": ["fantasy", "towns", "settlements", "worldbuilding"],
    "source": {
      "book": "Worldbuilder's Handbook",
      "publisher": "Example Games",
      "page": "45-52",
      "license": "CC BY 4.0"
    },
    "maxRecursionDepth": 30,
    "maxExplodingDice": 50,
    "maxInheritanceDepth": 5
  },
  "imports": [
    {
      "path": "./shared/names.json",
      "alias": "names",
      "description": "Shared name generation tables"
    }
  ],
  "variables": {
    "defaultSeparator": ", ",
    "era": "medieval"
  },
  "shared": {
    "featureCount": "{{dice:1d3+1}}",
    "populationModifier": "{{dice:1d20-10}}"
  },
  "tables": [
    {
      "id": "townSize",
      "name": "Town Size",
      "type": "simple",
      "resultType": "location",
      "tags": ["settlement", "size", "population"],
      "source": {
        "page": 47
      },
      "entries": [
        {
          "id": "hamlet",
          "value": "tiny hamlet",
          "range": [1, 50],
          "tags": ["tiny", "rural"],
          "sets": {
            "size": "tiny",
            "buildingCount": "{{dice:1d4+2}}",
            "population": "{{dice:2d6*10}}"
          },
          "assets": {
            "image": "images/hamlet.png",
            "token": "tokens/settlement_tiny.webp"
          }
        },
        {
          "id": "village",
          "value": "small village",
          "range": [51, 80],
          "tags": ["small", "rural"],
          "sets": {
            "size": "small",
            "buildingCount": "{{dice:2d6+5}}",
            "population": "{{dice:4d6*10}}"
          },
          "assets": {
            "image": "images/village.png",
            "token": "tokens/settlement_small.webp"
          }
        },
        {
          "id": "town",
          "value": "bustling town",
          "range": [81, 100],
          "tags": ["medium", "urban"],
          "sets": {
            "size": "medium",
            "buildingCount": "{{dice:3d6+10}}",
            "population": "{{dice:2d6*100}}"
          },
          "assets": {
            "image": "images/town.png",
            "token": "tokens/settlement_medium.webp"
          }
        }
      ]
    },
    {
      "id": "features",
      "name": "Town Features",
      "type": "simple",
      "resultType": "location",
      "tags": ["settlement", "features", "buildings"],
      "source": {
        "page": 48
      },
      "defaultSets": {
        "featureType": "building"
      },
      "entries": [
        { "value": "a lively tavern", "weight": 2, "tags": ["social", "tavern"] },
        { "value": "a skilled smithy", "weight": 1.5, "tags": ["commerce", "crafting"] },
        { "value": "a small shrine", "weight": 1, "sets": { "featureType": "religious" }, "tags": ["religious"] },
        { "value": "an open-air market", "weight": 1.5, "tags": ["commerce", "market"] },
        { "value": "a central well", "weight": 1, "sets": { "featureType": "infrastructure" }, "tags": ["infrastructure"] },
        { "value": "a grain mill", "weight": 0.5, "tags": ["industry", "food"] },
        { "value": "**multiple features:** {{2*unique*again|\\" and \\"}}", "weight": 0.5, "tags": ["meta", "multiple"] }
      ]
    },
    {
      "id": "sizeBasedFeatures",
      "name": "Size-Appropriate Features",
      "type": "simple",
      "hidden": true,
      "resultType": "description",
      "tags": ["settlement", "fortification", "internal"],
      "entries": [
        { "value": "surrounded by a wooden palisade", "tags": ["defense", "wall"] },
        { "value": "patrolled by a town guard", "tags": ["defense", "guards"] }
      ]
    }
  ],
  "templates": [
    {
      "id": "townDescription",
      "name": "Town Description",
      "resultType": "description",
      "tags": ["settlement", "description", "main"],
      "pattern": "A **{{townSize}}** called {{names.townName}} with approximately _{{math:@size.population + $populationModifier}} residents_ and {{@size.buildingCount}} buildings. Notable features include {{$featureCount*unique*features|\\" and \\"}}.{{switch[@size.size==\\"medium\\":\\" The town is {{sizeBasedFeatures}}.\\"].else[\\"\\"]}}"
    }
  ]
}
\`\`\`

**Sample Output:**
> A **bustling town** called Millbrook with approximately *807 residents* and 21 buildings. Notable features include an open-air market and a lively tavern and a skilled smithy. The town is surrounded by a wooden palisade.

**Result metadata:**
\`\`\`json
{
  "text": "A **bustling town** called Millbrook...",
  "resultType": "description"
}
\`\`\`

---

## 13. Processing Order

### 14.1 Engine Instantiation (File Loading)

\`\`\`
1.  PARSE primary JSON file
2.  VALIDATE JSON structure (schema validation)
3.  EXTRACT metadata
    3a. Read maxRecursionDepth (default: 50)
    3b. Read maxExplodingDice (default: 100)
    3c. Read maxInheritanceDepth (default: 5)
    3d. Read uniqueOverflowBehavior (default: "stop")
    
4.  PROCESS imports (in declaration order)
    FOR each import:
        4a. Resolve path (relative/absolute/URL)
        4b. Load and parse imported file
        4c. Recursively process that file's imports (depth-first)
        4d. CHECK for circular imports  ERROR if detected
        4e. Register imported content under alias
    END FOR
    
5.  LOAD static variables into global scope
    FOR each file (imports first, then primary):
        5a. Read "variables" object
        5b. CHECK for duplicate variable names  ERROR if collision
        5c. Store values literally (no resolution at load time)
    END FOR
    
6.  BUILD table registry
    FOR each file:
        6a. Register all tables by id
        6b. Register with namespace prefix
        6c. Register with import alias prefix (if imported)
    END FOR
    
7.  RESOLVE inheritance chains
    FOR each table with "extends":
        7a. Build ancestor chain (child  parent  grandparent  ...)
        7b. CHECK depth against maxInheritanceDepth  ERROR if exceeded
        7c. CHECK for circular inheritance  ERROR if detected
        7d. CHECK all ancestors exist  ERROR with specific missing table
        7e. CHECK all overriding entries have explicit IDs  ERROR if not
        7f. PRE-COMPUTE merged entries (optional optimization):
            - Start with oldest ancestor's entries
            - Apply each descendant's entries in order
            - For matching IDs: merge properties (child overrides parent)
            - For new IDs: add to pool
            - Deep-merge defaultSets at each level
    END FOR
    
8.  VALIDATE references
    FOR each table, template:
        8a. Parse all {{tableId}} references
        8b. CHECK each referenced table exists  ERROR if not
        8c. CHECK each {{$variable}} exists in static scope  WARN if not
    END FOR

9.  REGISTER templates
    9a. Index templates by id

10. ENGINE READY
\`\`\`

### 14.2 Generation (Per-Request)

\`\`\`
1.  INITIALIZE generation context
    1a. Create empty placeholder context (@)
    1b. Create empty shared variable scope
    1c. Initialize recursion depth counter = 0
    1d. Initialize used-entry tracking (for unique constraints)
    
2.  EVALUATE shared block (if present in entry-point file)
    FOR each shared variable (in declaration order):
        2a. CHECK if variable name exists in static scope  ERROR if shadows
        2b. CHECK if variable name already in shared scope  ERROR if duplicate
        2c. PARSE the value expression
        2d. RESOLVE all {{...}} expressions within the value (including {{math:...}})
        2e. CHECK for forward references to undeclared shared  ERROR
        2f. STORE result in shared scope (integer for math/dice, string otherwise)
    END FOR
    
3.  RESOLVE entry point
    IF template requested:
         GO TO step 5 (Template Evaluation)
    IF table requested:
         GO TO step 4 (Table Roll)
    
4.  TABLE ROLL
    4a. RESOLVE inheritance (if extends)
        - Get pre-computed merged entries, OR
        - Compute merge on-demand using ancestor chain
    4b. BUILD effective entry pool
        - Include all entries with weight > 0
        - Apply unique constraints if applicable
    4c. CHECK pool not empty  handle per uniqueOverflowBehavior
    4d. CALCULATE total weight of pool
    4e. GENERATE random number [0, totalWeight)
    4f. SELECT entry based on weight distribution
    4g. PROCESS entry sets
        - Deep-merge: ancestor defaultSets  table defaultSets  entry sets
        - Store in placeholder context under @
    4h. DETERMINE resultType
        - Use entry.resultType if defined
        - Else use table.resultType if defined
        - Else undefined
    4i. PROCESS entry value  GO TO step 6 (Expression Resolution)
    4j. RETURN resolved value + resultType + assets
    
5.  TEMPLATE EVALUATION
    5a. GET template pattern string
    5b. DETERMINE resultType (from template.resultType, overrides all)
    5c. PROCESS pattern  GO TO step 6 (Expression Resolution)
    5d. RETURN resolved pattern + resultType
    
6.  EXPRESSION RESOLUTION (for any string containing {{...}})
    6a. PARSE string for {{...}} blocks (left-to-right)
    FOR each {{...}} block:
        6b. IDENTIFY expression type:
            
            {{again}} or {{N*again}} or {{N*unique*again}}:
                - CHECK this is within an entry value  ERROR if not
                - Mark current entry as excluded
                - Roll on current table N times (or dice result times)
                - Apply unique constraint if specified
                - Join results with separator (default ", ")
                
            {{dice:XdY...}}:
                - Parse dice notation
                - Roll dice
                - Apply modifiers (kH, kL, !, +, -, *)
                - Return integer result
                
            {{math:expression}}:
                - PARSE expression for components:
                  * Literals: integers (positive or negative)
                  * Variables: $varName  resolve from shared/static scope
                  * Placeholders: @placeholder.property  resolve from context
                  * Inline dice: dice:XdY...  roll and substitute result
                  * Operators: +, -, *, /
                  * Grouping: ( )
                - EVALUATE expression with standard precedence:
                  1. Parentheses (innermost first)
                  2. * and / (left to right)
                  3. + and - (left to right)
                - HANDLE errors:
                  * Division by zero  0 with warning
                  * Non-numeric coercion  0 with warning
                - Return integer result (round toward zero)
                
            {{$variableName}}:
                - CHECK shared scope first
                - THEN check static variable scope
                - IF in conditional when-clause and not found  treat as false
                - ELSE if not found  ERROR: undefined variable
                - Return value
                
            {{@placeholder.property}}:
                - Lookup in placeholder context
                - Return value or empty string if not set
                
            {{$var*tableId}} or {{$var*unique*tableId}}:
                - Resolve $var to integer (round down if needed)
                - If value  0  return empty string
                - Roll on table that many times
                - Apply unique constraint if specified
                - Join with separator
                
            {{N*tableId}} or {{N*unique*tableId}}:
                - Resolve N (literal or dice result)
                - Roll on table N times
                - Apply unique constraint if specified
                - Join with separator
                - INCREMENT recursion depth  CHECK against max
                
            {{tableId}} (simple reference):
                - Roll once on table  GO TO step 4
                - INCREMENT recursion depth  CHECK against max
                
            {{tableId#instanceName}}:
                - Roll on table
                - Store result under instance name for later reference
                - Return result

        6c. SUBSTITUTE resolved value into string
    END FOR
    6d. RETURN fully resolved string

7.  FINALIZE OUTPUT
    7a. COMPILE final resolved string
    7b. ATTACH resultType (from entry/table/template hierarchy)
    7c. ATTACH assets (from selected entry, if any)
    7d. OPTIONALLY attach generation metadata
    7e. RETURN generation result
\`\`\`

### 14.3 Context Cleanup

\`\`\`
1.  DISCARD generation context
    1a. Clear placeholder context
    1b. Clear shared variable scope
    1c. Clear recursion tracking
    1d. Clear unique-entry tracking
    
2.  RETAIN
    2a. Static variable scope (persists for engine lifetime)
    2b. Table registry (persists for engine lifetime)
    2c. Pre-computed inheritance merges (persists for engine lifetime)
    
3.  READY for next generation request
\`\`\`

---

## 14. Validation Rules

Implementations must enforce these validation rules.

### 15.1 Identifier Rules

| Identifier Type | Rules |
|-----------------|-------|
| Table ID | Required. Unique within namespace. **Must not contain periods (\`.\`)**. Alphanumeric plus underscore. Cannot start with a digit. |
| Entry ID | Optional. If provided, must be unique within table. Alphanumeric plus underscore. **Required for inheritance overrides.** |
| Variable Name | Alphanumeric plus underscore. Cannot start with a digit. Unique across all loaded files. |
| Shared Variable Name | Alphanumeric plus underscore. Cannot start with a digit. Cannot shadow static variables. |
| Namespace | Dot-separated segments. Each segment alphanumeric plus underscore. |
| Import Alias | Required for imports. Unique within file. Alphanumeric plus underscore. Cannot start with a digit. **Must not contain periods (\`.\`)**. |

### 15.2 Auto-Generated ID Format

When entry \`id\` is omitted:
- Format: \`{tableId}{NNN}\` where \`NNN\` is zero-padded ordinal (001-999)
- First entry: \`{tableId}001\`, second: \`{tableId}002\`, etc.
- Maximum 999 entries per table for auto-ID (entries beyond 999 require explicit IDs)
- Auto-IDs are generated at parse time and remain stable for that file version
- **Auto-IDs cannot be used for inheritance overrides**

### 15.3 Reserved Words

The following cannot be used as table IDs, variable names, import aliases, or entry IDs:

\`dice\`, \`unique\`, \`again\`, \`true\`, \`false\`, \`null\`, \`and\`, \`or\`, \`not\`, \`contains\`, \`matches\`, \`shared\`, \`math\`

### 15.4 Weight and Range Validation

**Weight:**
- Must be a non-negative number (\`0\` or greater)
- Decimals are permitted
- Negative values are invalid and must produce a validation error
- A weight of \`0\` is valid but disables the entry from random selection

**Range:**
- Must be a two-element array of integers
- First element must be less than or equal to second element
- Both elements must be non-negative
- An entry cannot have both \`weight\` and \`range\` properties
- Range is converted to weight using formula: \`weight = (range[1] - range[0]) + 1\`

### 15.5 Reference Validation

- All \`tableId\` references must resolve to an existing table (local, imported via alias, or namespaced)
- All \`extends\` references must resolve to an existing table of the same type
- All import \`path\` values must resolve to accessible files
- All import \`alias\` values must be unique within the file
- Circular inheritance must be detected and rejected
- Circular imports must be detected and rejected
- Static variable references (\`$name\`) should warn if undefined at parse time
- Shared variable forward references must error at generation time
- \`{{again}}\` is only valid within entry \`value\` fields, not in templates

### 15.6 Math Expression Validation

Math expressions (\`{{math:...}}\`) must be validated for:

- **Balanced parentheses:** Every \`(\` must have a matching \`)\`
- **Valid operators:** Only \`+\`, \`-\`, \`*\`, \`/\` are permitted between operands
- **Valid operands:** Integers, \`$variable\`, \`@placeholder.property\`, or \`dice:XdY...\`
- **No empty expressions:** \`{{math:}}\` is invalid
- **No consecutive operators:** \`{{math:$a + + $b}}\` is invalid (except unary minus for negative literals)

**Runtime validation:**
- Division by zero returns \`0\` with a warning
- Non-numeric values coerce to \`0\` with a warning
- Variables and placeholders must resolve to values (unresolved  error or \`0\` depending on context)

### 15.7 Inheritance Validation

- Inheritance depth must not exceed \`maxInheritanceDepth\`
- All entries being overridden must have explicit IDs in both parent and child
- Circular inheritance chains must be detected and rejected at load time
- Missing ancestor tables must produce clear error messages identifying the missing table
- Type mismatch (extending a composite from a simple) must be rejected

### 15.8 Circular Reference Detection

The engine must detect and reject:

- **Import cycles:** File A imports File B, which imports File A
- **Inheritance cycles:** Table A extends Table B, which extends Table A
- **Template cycles:** Template A references Template B, which references Template A
- **Entry value cycles:** Entry value contains reference that eventually references itself
- **Shared variable cycles:** Shared variable A references shared variable B which references A

Detection should occur at load time (for imports, inheritance, templates) or generation start (for shared variables). The error must identify the cycle path.

**Note:** \`{{again}}\` is explicitly protected from infinite loops by automatically excluding the triggering entry.

### 15.9 Dice Notation Validation

Dice expressions must match the pattern:

\`\`\`
dice:(\\d+)d(\\d+)(kl?\\d+)?(!)?([+\\-*]\\d+)?
\`\`\`

Invalid dice notation must produce a parse error with the invalid expression highlighted.

### 15.10 Schema Validation Summary

| Field | Type | Constraints |
|-------|------|-------------|
| \`metadata.name\` | string | Required, non-empty |
| \`metadata.namespace\` | string | Required, valid namespace format |
| \`metadata.version\` | string | Required, semver format recommended |
| \`metadata.specVersion\` | string | Required, must be \`"1.0"\` |
| \`metadata.maxRecursionDepth\` | integer | Optional, default \`50\`, minimum \`1\` |
| \`metadata.maxExplodingDice\` | integer | Optional, default \`100\`, minimum \`1\` |
| \`metadata.maxInheritanceDepth\` | integer | Optional, default \`5\`, minimum \`1\` |
| \`metadata.source\` | object | Optional |
| \`metadata.tags\` | string[] | Optional |
| \`import.path\` | string | Required |
| \`import.alias\` | string | Required, unique within file |
| \`table.id\` | string | Required, no periods, unique in namespace |
| \`table.type\` | string | Required, one of: \`simple\`, \`composite\`, \`collection\` |
| \`table.resultType\` | string | Optional, case-insensitive |
| \`table.source\` | object | Optional |
| \`table.defaultSets\` | object | Optional |
| \`table.tags\` | string[] | Optional |
| \`entry.id\` | string | Optional (required for inheritance), unique within table |
| \`entry.value\` | string | Required |
| \`entry.weight\` | number | Optional, default \`1\`, must be >= \`0\` |
| \`entry.range\` | [int, int] | Optional, mutually exclusive with weight |
| \`entry.resultType\` | string | Optional, case-insensitive |
| \`entry.tags\` | string[] | Optional |
| \`entry.assets\` | object | Optional |
| \`source.weight\` | number | Optional, default \`1\`, must be >= \`0\` |
| \`template.resultType\` | string | Optional, case-insensitive |
| \`template.tags\` | string[] | Optional |
| \`conditional.tags\` | string[] | Optional |
| \`shared.*\` | string | Values must be valid expressions |
| \`variables.*\` | string | Static values, resolved at load time |

---

## 15. Error Handling

Implementations should handle errors gracefully with clear messages.

### 16.1 Error Categories

| Error Type | Cause | Recommended Behavior |
|------------|-------|----------------------|
| \`VALIDATION_ERROR\` | Invalid JSON structure or field values | Reject file at load time |
| \`IMPORT_ERROR\` | Cannot load imported file | Reject file at load time |
| \`IMPORT_CYCLE\` | Circular import chain detected | Reject file at load time |
| \`INHERITANCE_ERROR\` | Missing ancestor, cycle, or depth exceeded | Reject file at load time |
| \`INHERITANCE_ID_ERROR\` | Override attempted on entry without explicit ID | Reject file at load time |
| \`REFERENCE_ERROR\` | Unknown table, variable, or placeholder | Return error marker or throw |
| \`CIRCULAR_REFERENCE\` | Detected cycle in templates or shared variables | Reject or return error marker |
| \`RECURSION_LIMIT\` | Exceeded \`maxRecursionDepth\` | Return partial result with error marker |
| \`PARSE_ERROR\` | Malformed template syntax | Return error marker with position |
| \`UNIQUE_OVERFLOW\` | More unique selections than entries | Follow \`uniqueOverflowBehavior\` setting |
| \`INVALID_AGAIN\` | \`{{again}}\` used outside of entry value | Parse error |
| \`INVALID_RANGE\` | Range array malformed or invalid | Reject file at load time |
| \`WEIGHT_RANGE_CONFLICT\` | Entry has both weight and range | Reject file at load time |
| \`SHARED_FORWARD_REF\` | Shared variable references undeclared shared | Error at generation start |
| \`SHARED_SHADOW\` | Shared variable name matches static variable | Error at generation start |
| \`MATH_SYNTAX_ERROR\` | Malformed math expression (unbalanced parens, invalid operator) | Return error marker with position |
| \`DIVISION_BY_ZERO\` | Division by zero in math expression | Return 0 with warning |
| \`COERCION_FAILURE\` | Non-numeric string in math expression | Coerce to 0 with warning |
| \`CAPTURE_FORWARD_REF\` | Capture variable references another capture not yet declared | Error at generation time |
| \`CAPTURE_NAME_CONFLICT\` | Capture variable name conflicts with existing variable | Error at generation time |
| \`CAPTURE_OVERWRITE_WARNING\` | Overwriting existing capture variable (non-fatal) | Log warning, continue |
| \`CAPTURE_INDEX_OUT_OF_BOUNDS\` | Index access exceeds capture array bounds | Return empty string with warning |
| \`CAPTURE_MISSING_PROPERTY\` | Property access on non-existent set property | Return empty string with warning |

### 16.2 Error Message Format

Error messages should include:
- Error type
- Location (file, import alias, table ID, entry ID, template ID, line/column if applicable)
- Description of the problem
- Suggestion for resolution (when possible)

**Examples:**

\`\`\`
INHERITANCE_ERROR in table 'epicTreasure':
  Inheritance depth (6) exceeds maxInheritanceDepth (5).
  Chain: epicTreasure  largeTreasure  mediumTreasure  
         smallTreasure  baseTreasure  coreLoot
  Consider flattening the inheritance chain or increasing maxInheritanceDepth.
\`\`\`

\`\`\`
INHERITANCE_ID_ERROR in table 'customMonsters':
  Cannot override entry at position 3 in parent table 'baseMonsters'.
  The parent entry does not have an explicit ID.
  Add an 'id' property to the parent entry to enable override.
\`\`\`

\`\`\`
SHARED_FORWARD_REF in shared block:
  Variable 'totalCount' references '$bonusCount' which is declared later.
  Move 'bonusCount' declaration before 'totalCount'.
\`\`\`

\`\`\`
MATH_SYNTAX_ERROR in template 'damageCalculation':
  Unbalanced parentheses in expression: {{math:($base + $bonus * 2}}
  Position: column 34
  Add closing parenthesis to complete the expression.
\`\`\`

### 16.3 Graceful Degradation

When possible, the engine should:
- Continue processing other valid content
- Mark errors inline rather than failing entirely
- Log warnings for non-critical issues (e.g., unused variables, division by zero)
- Provide partial results with error markers for recoverable errors

---

## Appendix A: Quick Reference Card

\`\`\`
TABLE REFERENCES
  {{tableName}}              Roll once on table
  {{alias.tableName}}        Roll on table from imported file
  {{namespace.tableName}}    Roll on namespaced table
  {{3*tableName}}            Roll 3 times
  {{3*unique*tableName}}     Roll 3 times, no duplicates
  {{3*tableName|", "}}       Roll 3 times, custom separator
  {{tableName#instance}}     Named instance
  {{$count*tableName}}       Use shared variable as count

ROLL AGAIN (in entry values only)
  {{again}}                  Roll once more on this table
  {{2*again}}                Roll 2 more times
  {{2*unique*again}}         Roll 2 more times, no duplicates
  {{dice:1d4*again}}         Roll 1d4 times on this table

DICE
  {{dice:3d6}}               Roll 3d6
  {{dice:4d6k3}}             Roll 4d6, keep highest 3
  {{dice:2d6kl1}}            Roll 2d6, keep lowest 1
  {{dice:1d6!}}              Exploding d6
  {{dice:2d8+5}}             Roll 2d8, add 5
  {{dice:1d4*tableName}}     Roll 1d4, roll that many times on table

MATH EXPRESSIONS
  {{math:$a + $b}}           Add two variables
  {{math:$a - $b}}           Subtract variables
  {{math:$a * $b}}           Multiply variables
  {{math:$a / $b}}           Integer division (rounds toward zero)
  {{math:($a + $b) * 2}}     Grouping with parentheses
  {{math:dice:2d6 + $mod}}   Inline dice with variable
  {{math:@hd * 4 + 10}}      Using placeholders

VARIABLES & PLACEHOLDERS
  {{$variableName}}          Static or shared variable
  {{$alias.variableName}}    Variable from imported file
  {{@placeholder.property}}  Placeholder property

ROLL CAPTURE
  {{3*table >> $var}}        Capture 3 rolls into $var
  {{3*unique*table >> $var}} Capture 3 unique rolls
  {{$n*table >> $var}}       Variable count capture
  {{dice:1d4*table >> $var}} Dice count capture
  {{3*table >> $var|silent}} Capture without output
  {{3*table >> $var|", "}}   Capture with custom separator

CAPTURE ACCESS
  {{$var}}                   All values (comma-separated)
  {{$var|"; "}}              All values (custom separator)
  {{$var.count}}             Number of items captured
  {{$var[0]}}                First item's value
  {{$var[-1]}}               Last item's value
  {{$var[0].@prop}}          First item's @prop from sets

PROPERTY AGGREGATION
  {{collect:$var.value}}     All values
  {{collect:$var.@prop}}     All @prop values
  {{collect:$var.@prop|", "}} Custom separator
  {{collect:$var.@prop|unique}} Deduplicated
  {{collect:$var.@prop|unique|", "}} Deduplicated with separator

SHARED BLOCK
  "shared": {
    "count": "{{dice:2d4}}",
    "total": "{{math:$count + 5}}",
    "damage": "{{math:dice:1d8 + $strMod}}"
  }

IMPORTS
  imports: [
    { "path": "./file.json", "alias": "name" }
  ]
  {{name.tableId}}           Reference imported table

RANGES (in entries)
  "range": [1, 50]           Equivalent to weight 50
  "range": [51, 75]          Equivalent to weight 25
  "range": [99, 100]         Equivalent to weight 2

RESULTTYPE
  "resultType": "creature"   On tables, entries, templates
  Case-insensitive, user-definable
  Entry  Table  Composite (precedence)
  Template resultType overrides all

INHERITANCE
  "extends": "parentTable"   Single-level
  "extends": "alias.table"   Cross-file
  Multi-level supported (ABC)
  Property-level merging
  Null removes inherited property

ASSETS (in entries)
  "assets": {
    "image": "path/to/image.png",
    "token": "path/to/token.webp"
  }

WEIGHT SPECIAL VALUES
  "weight": 0                Disables entry (won't be rolled)
  "weight": 1                Default weight

TAGS (on any object)
  "tags": ["category", "subcategory", "keyword"]

MARKDOWN (in value fields)
  **bold**                   Bold text
  *italic* or _italic_       Italic text
  \`code\`                     Inline code
  [text](url)                Hyperlink

ESCAPING
  \\{{                        Literal {{
  \\}}                        Literal }}
  \\"                         Literal " in separator
\`\`\`

---

## Appendix B: TTRPG Math Expression Patterns

Common math expression patterns for tabletop RPG generators:

### Character Statistics

\`\`\`json
"shared": {
  "strength": "{{dice:4d6k3}}",
  "strMod": "{{math:($strength - 10) / 2}}",
  "proficiencyBonus": "{{math:($level - 1) / 4 + 2}}",
  "attackBonus": "{{math:$proficiencyBonus + $strMod}}"
}
\`\`\`

### Combat Calculations

\`\`\`json
"shared": {
  "baseDamage": "{{math:dice:1d8 + $strMod}}",
  "critDamage": "{{math:dice:2d8 + $strMod}}",
  "armorClass": "{{math:10 + $dexMod + @armor.bonus}}",
  "initiative": "{{math:dice:1d20 + $dexMod}}"
}
\`\`\`

### Encounter Scaling

\`\`\`json
"shared": {
  "partyLevel": "{{$inputLevel}}",
  "enemyCount": "{{math:$partySize + dice:1d4 - 2}}",
  "bossHP": "{{math:$partyLevel * 15 + dice:4d10}}",
  "xpReward": "{{math:$enemyCount * 50 * $partyLevel}}"
}
\`\`\`

### Treasure and Economy

\`\`\`json
"shared": {
  "baseGold": "{{math:dice:2d6 * 10}}",
  "levelMultiplier": "{{math:$dungeonLevel * $dungeonLevel}}",
  "totalGold": "{{math:$baseGold * $levelMultiplier}}",
  "gemValue": "{{math:dice:1d6 * 50 + 25}}"
}
\`\`\`

### Template Usage Examples

\`\`\`json
{
  "pattern": "The {{creatureType}} attacks with a {{math:dice:1d20 + $attackBonus}} to hit, dealing {{math:dice:$damageDice + $strMod}} damage on a hit."
}
\`\`\`

\`\`\`json
{
  "pattern": "You find a chest containing {{math:$baseGold + dice:3d6}} gold pieces and {{$gemCount*gems|\\", \\"}}."
}
\`\`\`

### Entry Value Examples

\`\`\`json
{
  "value": "A band of {{math:dice:2d4 + $partySize}} goblins",
  "sets": {
    "count": "{{math:dice:2d4 + $partySize}}",
    "totalXP": "{{math:@count * 50}}"
  }
}
\`\`\`

---

## Appendix C: Default ResultTypes

The following resultType values are recommended as a common vocabulary:

\`\`\`
creature    - Monsters, animals, beings
npc         - Non-player characters  
faction     - Organizations, groups
item        - Equipment, objects
loot        - Treasure packages
location    - Places, areas
encounter   - Combat/exploration events
event       - Occurrences, happenings
hook        - Plot hooks, adventure seeds
complication - Obstacles, problems
name        - Names for anything
trait       - Characteristics, features
effect      - Spell effects, conditions
environment - Weather, terrain
ability     - Skills, powers
description - Narrative text
rumor       - Information, lore
dialogue    - Speech, conversation
statistic   - Numbers, metrics
number      - Pure numeric output
currency    - Money, values
time        - Durations, timestamps
weather     - Weather conditions
\`\`\`

Custom types should use namespace conventions: \`"publisher/category/type"\`

---

## License

This specification is released under the **CC0 1.0 Universal** (Public Domain) license.

You are free to:
- **Use**  Copy, modify, and distribute this specification
- **Build**  Create your own implementations, tools, or engines
- **Share**  Include this specification in your own projects

No attribution required, though it's always appreciated.

[View Full License](https://creativecommons.org/publicdomain/zero/1.0/)

### Content Ownership Notice

**Important:** While this specification format is public domain, the creative content within files conforming to this specification remains the intellectual property of its respective copyright holders.

- The open nature of this format **does not** grant any license to use, copy, or distribute the content contained within individual table files
- Publishers and content creators retain full copyright over their tables, entries, descriptions, and other creative works
- Always check the \`source\` and \`rights\` metadata fields to understand usage permissions for specific content
- When in doubt, contact the content's copyright holder for licensing information

This specification provides standardized fields (\`rights\`, \`source.copyright\`, \`permissions\`) specifically to help content creators communicate their ownership and terms clearly.

---

## Source Code

The Rolldeo application is open source under the **Apache License 2.0**.

- **GitHub Repository**: [https://github.com/RolldeoDev/rolldeo](https://github.com/RolldeoDev/rolldeo)
- **Report Issues**: [https://github.com/RolldeoDev/rolldeo/issues](https://github.com/RolldeoDev/rolldeo/issues)
- **Official Website**: [https://rolldeo.com](https://rolldeo.com)

---
`,Ru=`{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rolldeo.com/schemas/random-table-spec-v1.0.json",
  "title": "Random Table JSON Template Specification v1.0",
  "description": "A JSON schema for configurable random table generators supporting weighted tables, composite tables, template-based text generation, mathematical operations, conditional logic, multi-level table inheritance, external file references, and generation-time shared variables.",
  "type": "object",
  "required": ["metadata", "tables"],
  "additionalProperties": false,
  "properties": {
    "metadata": {
      "$ref": "#/$defs/metadata"
    },
    "imports": {
      "type": "array",
      "description": "Array of external file imports for modular content organization. Imports are resolved before any table or template processing.",
      "items": {
        "$ref": "#/$defs/import"
      }
    },
    "tables": {
      "type": "array",
      "description": "Array of table definitions. At least one table is required. Tables can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/table"
      }
    },
    "templates": {
      "type": "array",
      "description": "Array of text generation pattern templates that combine multiple tables and operations using {{...}} syntax.",
      "items": {
        "$ref": "#/$defs/template"
      }
    },
    "conditionals": {
      "type": "array",
      "description": "Array of conditional logic rules applied after primary generation based on rolled results.",
      "items": {
        "$ref": "#/$defs/conditional"
      }
    },
    "variables": {
      "$ref": "#/$defs/variables"
    },
    "shared": {
      "$ref": "#/$defs/shared"
    }
  },
  "$defs": {
    "metadata": {
      "type": "object",
      "title": "Metadata Object",
      "description": "Contains information about the file itself and global engine configuration.",
      "required": ["name", "namespace", "version", "specVersion"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the table collection",
          "minLength": 1,
          "examples": ["Fantasy Treasure Generator", "Sci-Fi Name Generator"]
        },
        "namespace": {
          "type": "string",
          "description": "Unique namespace to prevent collisions. Use dot-separated segments (e.g., 'fantasy.core', 'scifi.names').",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*(\\\\.[a-zA-Z_][a-zA-Z0-9_]*)*$",
          "minLength": 1,
          "examples": ["fantasy.core", "publisher.product.module"]
        },
        "version": {
          "type": "string",
          "description": "Semantic version number for this file (e.g., '1.0.0', '2.1.0-beta').",
          "pattern": "^\\\\d+\\\\.\\\\d+\\\\.\\\\d+(-[a-zA-Z0-9.]+)?(\\\\+[a-zA-Z0-9.]+)?$",
          "examples": ["1.0.0", "2.1.0", "1.0.0-beta.1"]
        },
        "specVersion": {
          "type": "string",
          "description": "The specification version this file conforms to. Must be '1.0' for this schema.",
          "const": "1.0"
        },
        "author": {
          "type": "string",
          "description": "Author name or organization"
        },
        "description": {
          "type": "string",
          "description": "Markdown-formatted description of the collection"
        },
        "instructions": {
          "type": "string",
          "description": "Usage instructions in Markdown format"
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        },
        "created": {
          "type": "string",
          "description": "ISO 8601 date-time string for creation date",
          "format": "date-time"
        },
        "updated": {
          "type": "string",
          "description": "ISO 8601 date-time string for last update",
          "format": "date-time"
        },
        "source": {
          "$ref": "#/$defs/metadataSource"
        },
        "rights": {
          "$ref": "#/$defs/rights"
        },
        "maxRecursionDepth": {
          "type": "integer",
          "description": "Maximum depth for nested table/template references. Prevents infinite loops from circular references.",
          "default": 50,
          "minimum": 1,
          "examples": [25, 50, 100]
        },
        "maxExplodingDice": {
          "type": "integer",
          "description": "Maximum number of times exploding dice (!) can re-roll.",
          "default": 100,
          "minimum": 1,
          "examples": [50, 100]
        },
        "maxInheritanceDepth": {
          "type": "integer",
          "description": "Maximum depth for inheritance chains. For example, C extends B extends A has depth 2.",
          "default": 5,
          "minimum": 1,
          "examples": [3, 5, 10]
        },
        "uniqueOverflowBehavior": {
          "type": "string",
          "description": "Behavior when unique selection requests more entries than available.",
          "enum": ["stop", "cycle", "error"],
          "default": "stop"
        }
      }
    },
    "metadataSource": {
      "type": "object",
      "title": "Source Attribution",
      "description": "Optional properties for tracking content origin and licensing at the file level.",
      "additionalProperties": false,
      "properties": {
        "book": {
          "type": "string",
          "description": "Name of the source book or product"
        },
        "publisher": {
          "type": "string",
          "description": "Publisher name"
        },
        "pages": {
          "type": "string",
          "description": "Page number(s) or range (e.g., '47', '47-89', '12, 45-67')",
          "examples": ["47", "47-89", "12, 45-67, 120"]
        },
        "isbn": {
          "type": "string",
          "description": "ISBN if applicable"
        },
        "url": {
          "type": "string",
          "description": "URL to product page or official source",
          "format": "uri"
        },
        "license": {
          "type": "string",
          "description": "License under which content is used",
          "examples": ["OGL 1.0a", "CC BY 4.0", "Original", "CC BY-NC-SA 4.0"]
        },
        "copyright": {
          "oneOf": [
            {
              "type": "string",
              "description": "Simple copyright notice string"
            },
            {
              "$ref": "#/$defs/structuredCopyright"
            }
          ],
          "description": "Copyright notice (string or structured object)"
        }
      }
    },
    "structuredCopyright": {
      "type": "object",
      "title": "Structured Copyright",
      "description": "Detailed copyright information for publishers",
      "additionalProperties": false,
      "properties": {
        "year": {
          "type": "string",
          "description": "Copyright year or range (e.g., '2024' or '2020-2024')",
          "pattern": "^\\\\d{4}(-\\\\d{4})?$",
          "examples": ["2024", "2020-2024"]
        },
        "holder": {
          "type": "string",
          "description": "Legal entity name that holds the copyright"
        },
        "notice": {
          "type": "string",
          "description": "Full copyright notice text",
          "examples": [" 2024 Example Games LLC. All rights reserved."]
        }
      }
    },
    "rights": {
      "type": "object",
      "title": "Rights & Permissions",
      "description": "Intellectual property rights, usage permissions, and legal contact information for content protection.",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "description": "Content classification type",
          "enum": ["proprietary", "open-content", "fan-content", "licensed"]
        },
        "official": {
          "type": "boolean",
          "description": "Whether this is official publisher content (vs. fan-made)",
          "default": false
        },
        "productIdentity": {
          "type": "array",
          "description": "List of Product Identity elements (names, characters, logos, etc.) that are protected",
          "items": {
            "type": "string"
          },
          "examples": [["Kobold Press", "Tome of Beasts", "All creature names and descriptions"]]
        },
        "trademarks": {
          "type": "array",
          "description": "Trademark notices for protected marks",
          "items": {
            "type": "string"
          },
          "examples": [["Kobold Press", "Tome of Beasts"]]
        },
        "compatibilityNotice": {
          "type": "string",
          "description": "Required compatibility/non-affiliation statement",
          "examples": ["Compatible with 5th Edition fantasy roleplaying. Not affiliated with or endorsed by Wizards of the Coast."]
        },
        "permissions": {
          "$ref": "#/$defs/rightsPermissions"
        },
        "contact": {
          "$ref": "#/$defs/rightsContact"
        },
        "termsUrl": {
          "type": "string",
          "description": "URL to full terms of use",
          "format": "uri"
        },
        "communityPolicyUrl": {
          "type": "string",
          "description": "URL to fan content/community use policy",
          "format": "uri"
        }
      }
    },
    "rightsPermissions": {
      "type": "object",
      "title": "Usage Permissions",
      "description": "Explicit permissions for how the content may be used",
      "additionalProperties": false,
      "properties": {
        "commercialUse": {
          "type": "boolean",
          "description": "Whether content may be used in commercial products",
          "default": false
        },
        "modification": {
          "type": "boolean",
          "description": "Whether content may be modified or adapted",
          "default": false
        },
        "redistribution": {
          "type": "boolean",
          "description": "Whether content may be redistributed",
          "default": false
        },
        "derivativeWorks": {
          "type": "boolean",
          "description": "Whether derivative works may be created",
          "default": false
        },
        "attributionRequired": {
          "type": "boolean",
          "description": "Whether attribution is required when using content",
          "default": true
        }
      }
    },
    "rightsContact": {
      "type": "object",
      "title": "Legal Contact Information",
      "description": "Contact information for licensing and legal inquiries",
      "additionalProperties": false,
      "properties": {
        "licensing": {
          "type": "string",
          "description": "Email or URL for licensing inquiries"
        },
        "dmca": {
          "type": "string",
          "description": "DMCA agent contact for takedown requests"
        },
        "general": {
          "type": "string",
          "description": "General legal contact"
        }
      }
    },
    "tableSource": {
      "type": "object",
      "title": "Table Source Attribution",
      "description": "Source attribution for a specific table, useful when combining content from multiple sources.",
      "additionalProperties": false,
      "properties": {
        "book": {
          "type": "string",
          "description": "Source book name"
        },
        "page": {
          "oneOf": [
            {
              "type": "integer",
              "description": "Single page number",
              "minimum": 1
            },
            {
              "type": "string",
              "description": "Page range",
              "pattern": "^\\\\d+(-\\\\d+)?$",
              "examples": ["47", "47-49", "123-125"]
            }
          ],
          "description": "Page number or range (e.g., 47 or '47-49')"
        },
        "section": {
          "type": "string",
          "description": "Section or chapter name"
        },
        "url": {
          "type": "string",
          "description": "Direct URL to source if available online",
          "format": "uri"
        },
        "license": {
          "type": "string",
          "description": "License for this specific table (overrides file-level license)"
        }
      }
    },
    "import": {
      "type": "object",
      "title": "Import Definition",
      "description": "References tables, templates, and variables from an external JSON file.",
      "required": ["path", "alias"],
      "additionalProperties": false,
      "properties": {
        "path": {
          "type": "string",
          "description": "Relative path (e.g., './creatures/undead.json'), parent directory path (e.g., '../shared/core.json'), or absolute URL (e.g., 'https://rolldeo.com/tables.json').",
          "minLength": 1,
          "examples": ["./creatures/undead.json", "../shared/core.json", "https://rolldeo.com/tables/v2/core.json"]
        },
        "alias": {
          "type": "string",
          "description": "Local alias for referencing imported content. Must be unique within the file. Cannot contain periods.",
          "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*$",
          "minLength": 1,
          "examples": ["undead", "core", "loot"]
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of what this import provides"
        }
      }
    },
    "table": {
      "type": "object",
      "title": "Table Definition",
      "description": "A table definition. Can be simple (weighted entries), composite (select from source tables), or collection (merge multiple tables).",
      "required": ["id", "name", "type"],
      "allOf": [
        {
          "properties": {
            "id": {
              "type": "string",
              "description": "Unique identifier for the table within the namespace. Cannot contain periods. Cannot be a reserved word.",
              "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$",
              "minLength": 1
            },
            "name": {
              "type": "string",
              "description": "Display name for the table",
              "minLength": 1
            },
            "type": {
              "type": "string",
              "description": "Table type: 'simple' for weighted entries, 'composite' for selecting from source tables, 'collection' for merging multiple tables.",
              "enum": ["simple", "composite", "collection"]
            },
            "description": {
              "type": "string",
              "description": "Markdown-formatted description"
            },
            "tags": {
              "$ref": "#/$defs/tagsArray"
            },
            "hidden": {
              "type": "boolean",
              "description": "If true, table won't appear in user-facing lists. Still fully accessible to templates and other tables.",
              "default": false
            },
            "extends": {
              "type": "string",
              "description": "ID of table to inherit from. Supports 'alias.tableId' for imported tables and 'namespace.tableId' for namespaced tables.",
              "minLength": 1,
              "examples": ["baseTreasure", "loot.baseTreasure", "fantasy.core.weapons"]
            },
            "defaultSets": {
              "$ref": "#/$defs/setsObject"
            },
            "resultType": {
              "$ref": "#/$defs/resultType"
            },
            "source": {
              "$ref": "#/$defs/tableSource"
            },
            "shared": {
              "$ref": "#/$defs/tableShared"
            }
          }
        },
        {
          "oneOf": [
            {
              "$ref": "#/$defs/simpleTable"
            },
            {
              "$ref": "#/$defs/compositeTable"
            },
            {
              "$ref": "#/$defs/collectionTable"
            }
          ]
        }
      ]
    },
    "simpleTable": {
      "type": "object",
      "title": "Simple Table",
      "description": "A basic table with weighted entries. The most common table type, optimized for ease of data entry.",
      "properties": {
        "type": {
          "const": "simple"
        },
        "entries": {
          "type": "array",
          "description": "Array of table entries with values and optional weights/ranges",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/entry"
          }
        }
      },
      "required": ["entries"]
    },
    "compositeTable": {
      "type": "object",
      "title": "Composite Table",
      "description": "Selects which source table to roll on using weighted probability, then rolls once on that table. Use when you want weighted selection between different tables.",
      "properties": {
        "type": {
          "const": "composite"
        },
        "sources": {
          "type": "array",
          "description": "Array of source tables to select from, with optional weights",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/compositeSource"
          }
        }
      },
      "required": ["sources"]
    },
    "collectionTable": {
      "type": "object",
      "title": "Collection Table",
      "description": "Merges all entries from multiple tables into a single unified pool. Use for combining related tables (e.g., 'Swords' + 'Axes' + 'Polearms' = 'All Melee Weapons').",
      "properties": {
        "type": {
          "const": "collection"
        },
        "collections": {
          "type": "array",
          "description": "Array of table IDs to combine. Supports 'alias.tableId' and 'namespace.tableId' syntax.",
          "minItems": 1,
          "items": {
            "type": "string",
            "description": "Table ID reference to include in the collection",
            "minLength": 1
          },
          "examples": [["swords", "axes", "polearms"], ["core.commonItems", "expansion.rareItems"]]
        }
      },
      "required": ["collections"]
    },
    "compositeSource": {
      "type": "object",
      "title": "Composite Source",
      "description": "A source table reference for composite tables with optional weight.",
      "required": ["tableId"],
      "additionalProperties": false,
      "properties": {
        "tableId": {
          "type": "string",
          "description": "ID of the table to pull from. Supports 'alias.tableId' and 'namespace.tableId' syntax.",
          "minLength": 1
        },
        "weight": {
          "type": "number",
          "description": "Relative weight for selecting this source. Weight of 0 disables this source from random selection.",
          "minimum": 0,
          "default": 1
        }
      }
    },
    "entry": {
      "type": "object",
      "title": "Table Entry",
      "description": "A single entry in a simple table. Normally requires a value. When overriding an inherited entry (via 'id' in an extended table), 'value' becomes optional - only 'id' plus the properties you want to change are needed. Can optionally specify weight OR range (not both). If neither specified, defaults to weight: 1.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique ID within this table. Required for inheritance overrides. If omitted, auto-generated as {tableId}{NNN}.",
          "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
        },
        "value": {
          "type": "string",
          "description": "The output text. Supports Markdown formatting and {{...}} template syntax for nested evaluation, dice rolls, math expressions, table references, roll captures ({{N*table >> $var}}), capture access ({{$var[0].@prop}}), property aggregation ({{collect:$var.@prop}}), and switch expressions ({{switch[cond:result].else[fallback]}})."
        },
        "weight": {
          "type": "number",
          "description": "Relative probability weight. Must be 0 or greater. Weight of 0 disables the entry from random selection but preserves it for inheritance. Mutually exclusive with 'range'.",
          "minimum": 0,
          "default": 1
        },
        "range": {
          "$ref": "#/$defs/rangeArray"
        },
        "description": {
          "type": "string",
          "description": "Markdown description for documentation/UI purposes"
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        },
        "sets": {
          "$ref": "#/$defs/setsObject"
        },
        "assets": {
          "$ref": "#/$defs/assetsObject"
        },
        "resultType": {
          "$ref": "#/$defs/resultType"
        }
      },
      "additionalProperties": false,
      "allOf": [
        {
          "not": {
            "required": ["weight", "range"]
          }
        },
        {
          "if": {
            "not": {
              "required": ["id"]
            }
          },
          "then": {
            "required": ["value"]
          }
        }
      ]
    },
    "rangeArray": {
      "type": "array",
      "title": "Range",
      "description": "A two-element inclusive range for dice-roll style tables (e.g., [1, 5] means numbers 1-5, weight = 5). Mutually exclusive with 'weight'. Converted to weight as: weight = (range[1] - range[0]) + 1.",
      "items": {
        "type": "integer",
        "minimum": 0
      },
      "minItems": 2,
      "maxItems": 2,
      "examples": [[1, 50], [51, 75], [76, 100]]
    },
    "setsObject": {
      "type": "object",
      "title": "Sets (Placeholder Values)",
      "description": "Key-value pairs that set placeholder values (accessible via @key syntax) when this entry is selected. Merges with and overrides table's defaultSets.",
      "additionalProperties": {
        "type": "string"
      },
      "examples": [{"size": "large", "terrain": "forest"}, {"hp": "{{dice:4d8+12}}", "ac": "16"}]
    },
    "assetsObject": {
      "type": "object",
      "title": "Assets",
      "description": "Key-value pairs mapping asset types to file paths or URLs. Common keys: image, token, thumbnail, portrait, sound, music, handout, statblock.",
      "additionalProperties": {
        "type": "string",
        "description": "Asset path: relative path, absolute URL, or data URI"
      },
      "examples": [{"image": "images/goblin.png", "token": "tokens/goblin.webp"}, {"portrait": "https://cdn.rolldeo.com/orc.jpg"}]
    },
    "template": {
      "type": "object",
      "title": "Template Definition",
      "description": "A text generation pattern that combines multiple tables and operations using {{...}} syntax.",
      "required": ["id", "name", "pattern"],
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the template. Cannot be a reserved word.",
          "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "description": "Display name for the template",
          "minLength": 1
        },
        "pattern": {
          "type": "string",
          "description": "Template pattern string. Use {{tableId}} for table rolls, {{dice:XdY}} for dice, {{$var}} for variables, {{@placeholder}} for placeholders, {{math:expr}} for math, {{N*table >> $var}} for captures, {{$var[0].@prop}} for capture access, {{collect:$var.@prop}} for aggregation, {{switch[cond:result].else[fallback]}} for inline conditionals, {{expr.switch[cond:result]}} for attached conditionals. Supports Markdown."
        },
        "description": {
          "type": "string",
          "description": "Markdown description of the template"
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        },
        "resultType": {
          "$ref": "#/$defs/resultType"
        },
        "shared": {
          "$ref": "#/$defs/tableShared"
        }
      }
    },
    "conditional": {
      "type": "object",
      "title": "Conditional Rule",
      "description": "Applies logic based on rolled results. Evaluated after primary generation.",
      "required": ["when", "action", "value"],
      "additionalProperties": false,
      "properties": {
        "when": {
          "type": "string",
          "description": "Condition expression. Supports comparisons (==, !=, >, <, >=, <=, contains, matches) and logical operators (&&, ||, !). Use @placeholder.property for entry values, $variable for variables.",
          "minLength": 1,
          "examples": ["@size.value == 'large'", "@race.value == 'elf' && @class.value == 'mage'", "$setting != 'modern'", "@name.value contains 'the'"]
        },
        "action": {
          "type": "string",
          "description": "Action to perform when condition is true: append (add to end), prepend (add to start), replace (replace target), setVariable (set a variable).",
          "enum": ["append", "prepend", "replace", "setVariable"]
        },
        "target": {
          "type": "string",
          "description": "Required for 'replace' and 'setVariable' actions. For 'append'/'prepend', defaults to current output.",
          "minLength": 1
        },
        "value": {
          "type": "string",
          "description": "Value to apply. May contain template syntax ({{...}}) for dynamic content. Supports Markdown."
        },
        "tags": {
          "$ref": "#/$defs/tagsArray"
        }
      },
      "allOf": [
        {
          "if": {
            "properties": {
              "action": { "enum": ["replace", "setVariable"] }
            },
            "required": ["action"]
          },
          "then": {
            "required": ["target"]
          }
        }
      ]
    },
    "variables": {
      "type": "object",
      "title": "Static Variables",
      "description": "Static global variables loaded at engine initialization. Referenced using {{$variableName}}. Evaluated once at file load time. For generation-time values, use 'shared' instead.",
      "additionalProperties": {
        "type": "string"
      },
      "propertyNames": {
        "pattern": "^(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
      },
      "examples": [{"defaultSeparator": ", ", "setting": "fantasy", "campaignYear": "1247"}]
    },
    "shared": {
      "type": "object",
      "title": "Shared Variables (Generation-Time)",
      "description": "Generation-time variables evaluated once at the start of each generation and remain constant throughout that run. Referenced using {{$variableName}}. Evaluated in declaration order. Cannot forward-reference other shared variables. All shared variables capture the full roll result including sets, enabling {{$varName.@property}} syntax with dynamic table resolution.",
      "additionalProperties": {
        "type": "string"
      },
      "propertyNames": {
        "pattern": "^\\\\$?(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
      },
      "examples": [
        {"monsterCount": "{{dice:2d4}}", "leaderType": "{{eliteMonsterTable}}", "totalThreat": "{{math:$monsterCount + 5}}"},
        {"$hero": "{{race}}", "$enemy": "{{race}}"}
      ]
    },
    "tableShared": {
      "type": "object",
      "title": "Table/Template Shared Variables",
      "description": "Table or template-level shared variables evaluated lazily when rolled. Cannot shadow document-level shared or static variables. Propagate to nested table references. Referenced using {{$variableName}}. All shared variables capture the full roll result including sets, enabling {{$varName.@property}} syntax with dynamic table resolution.",
      "additionalProperties": {
        "type": "string"
      },
      "propertyNames": {
        "pattern": "^\\\\$?(?!dice$|unique$|again$|true$|false$|null$|and$|or$|not$|contains$|matches$|shared$|math$)[a-zA-Z_][a-zA-Z0-9_]*$"
      },
      "examples": [
        {"threatLevel": "{{dice:1d6}}", "monsterCount": "{{math:$threatLevel + 2}}"},
        {"$character": "{{race}}"}
      ]
    },
    "resultType": {
      "type": "string",
      "title": "Result Type",
      "description": "Classification of output type. Case-insensitive, user-definable. Common values: creature, npc, faction, item, loot, location, encounter, event, hook, complication, name, trait, effect, environment, ability, description, rumor, dialogue, statistic, number, currency, time, weather. Custom types should use namespace conventions (e.g., 'publisher/category/type').",
      "examples": ["creature", "item", "location", "encounter", "description", "starships/cruiser", "wh40k/regiment"]
    },
    "tagsArray": {
      "type": "array",
      "title": "Tags",
      "description": "Tags for categorization, organization, filtering, and searching",
      "items": {
        "type": "string",
        "minLength": 1
      },
      "default": [],
      "examples": [["fantasy", "treasure", "loot"], ["encounters", "combat", "wilderness"]]
    }
  }
}
`,ZB=[{id:"quickstart",title:"Getting Started",description:"Learn the basics of random tables in under 10 minutes. Create your first table, add weights, roll dice, and more.",icon:Jm,path:"/guide/quickstart",color:"mint",tags:["Beginner","10 min read"]},{id:"using-rolldeo",title:"Using Rolldeo",description:"Master the Library, Roller, and Editor. Learn how to import collections, roll on tables, and create your own.",icon:Ym,path:"/guide/using-rolldeo",color:"lavender",tags:["App Guide","Features"]},{id:"spec",title:"Full Specification",description:"Complete reference for the Random Table JSON Spec v1.0. Covers all features including imports, inheritance, and conditionals.",icon:Vm,path:"/guide/spec",color:"amber",tags:["Reference","Advanced"]},{id:"schema",title:"Schema Reference",description:"JSON Schema documentation for validation. Use this to validate your table files and understand the exact structure.",icon:Wm,path:"/guide/schema",color:"rose",tags:["JSON Schema","Validation"]}],QB={mint:{icon:"bg-[hsl(var(--mint)/0.15)] text-[hsl(var(--mint))]",border:"hover:border-[hsl(var(--mint)/0.3)]",tag:"bg-[hsl(var(--mint)/0.1)] text-[hsl(var(--mint))]"},lavender:{icon:"bg-[hsl(var(--lavender)/0.15)] text-[hsl(var(--lavender))]",border:"hover:border-[hsl(var(--lavender)/0.3)]",tag:"bg-[hsl(var(--lavender)/0.1)] text-[hsl(var(--lavender))]"},amber:{icon:"bg-[hsl(var(--amber)/0.15)] text-[hsl(var(--amber))]",border:"hover:border-[hsl(var(--amber)/0.3)]",tag:"bg-[hsl(var(--amber)/0.1)] text-[hsl(var(--amber))]"},rose:{icon:"bg-[hsl(var(--rose)/0.15)] text-[hsl(var(--rose))]",border:"hover:border-[hsl(var(--rose)/0.3)]",tag:"bg-[hsl(var(--rose)/0.1)] text-[hsl(var(--rose))]"}};function JB(){const[e,t]=w.useState(!1),[n,r]=w.useState(!1),[a,i]=w.useState(!1),[o,c]=w.useState(null),d=dt(v=>v.restoreHiddenCollections),p=dt(v=>v.collections),h=w.useMemo(()=>Array.from(p.values()).filter(v=>v.hiddenFromUI),[p]),m=w.useCallback(async()=>{i(!0),c(null);try{const v=await d();c(v>0?`Restored ${v} collection${v!==1?"s":""}`:"No hidden collections to restore")}catch{c("Failed to restore collections")}finally{i(!1)}},[d]);return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.guide}),s.jsxs("div",{className:"space-y-12",children:[s.jsxs("section",{className:"text-center space-y-6 py-8",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium animate-fade-in",children:[s.jsx(Lr,{className:"h-4 w-4"}),"Documentation"]}),s.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight animate-slide-up",children:["Rolldeo",s.jsx("br",{}),s.jsx("span",{className:"gradient-text",children:"Guide"})]}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto animate-slide-up stagger-1",children:"Everything you need to create, roll, and share random tables. From quick tutorials to complete specifications."})]}),s.jsx("section",{className:"grid gap-6 md:grid-cols-2",children:ZB.map((v,g)=>{const x=v.icon,y=QB[v.color];return s.jsx(zn,{to:v.path,className:`
                group card-elevated p-6 border border-border/50
                ${y.border}
                transition-all duration-300 hover:shadow-lg
                animate-slide-up
              `,style:{animationDelay:`${(g+2)*.1}s`},children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`p-3 rounded-xl ${y.icon}`,children:s.jsx(x,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h2",{className:"text-xl font-bold group-hover:text-primary transition-colors",children:v.title}),s.jsx(Ix,{className:"h-4 w-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all text-primary"})]}),s.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed mb-4",children:v.description}),s.jsx("div",{className:"flex flex-wrap gap-2",children:v.tags.map(k=>s.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${y.tag}`,children:k},k))})]})]})},v.id)})}),s.jsx("section",{className:"card-elevated border border-border/50 p-8 animate-slide-up stagger-4",children:s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(bl,{className:"h-6 w-6 text-primary"}),s.jsx("h2",{className:"text-xl font-bold",children:"Open Source & Free to Use"})]}),s.jsxs("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:["Rolldeo is open source. The Random Table Specification and JSON Schema are released under ",s.jsx("strong",{className:"text-foreground",children:"CC0 (Public Domain)"}),"  use them freely to build your own tools, engines, or table collections without any restrictions."]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-muted/50 border border-border/50",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Application:"}),s.jsx("a",{href:"https://www.apache.org/licenses/LICENSE-2.0",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-primary hover:underline",children:"Apache 2.0"})]}),s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-muted/50 border border-border/50",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Spec & Schema:"}),s.jsx("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-primary hover:underline",children:"CC0 Public Domain"})]})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("a",{href:"https://github.com/RolldeoDev/rolldeo",target:"_blank",rel:"noopener noreferrer",className:"btn-primary inline-flex items-center gap-2",children:[s.jsx(Gm,{className:"h-4 w-4"}),"View on GitHub"]})})]})}),s.jsx("section",{className:"card-elevated border border-border/50 p-8 animate-slide-up stagger-5",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ps,{className:"h-5 w-5 text-primary"}),s.jsx("h2",{className:"text-xl font-bold",children:"Download Specification Files"})]}),s.jsx("p",{className:"text-muted-foreground",children:"Get the complete spec markdown and JSON schema for offline use or integration with your tools."})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx(_u,{filename:"randomTableSpecV1.md",content:_m,mimeType:"text/markdown",label:"Spec (Markdown)"}),s.jsx(_u,{filename:"random-table-spec-v1.0.json",content:Ru,mimeType:"application/json",label:"Schema (JSON)",variant:"primary"})]})]})}),s.jsx("section",{className:"card-elevated border border-border/50 p-8 animate-slide-up stagger-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s.jsx(Zm,{className:"h-5 w-5 text-primary"}),s.jsx("h2",{className:"text-xl font-bold",children:"Download Pre-built Examples"})]}),s.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Complete example packs demonstrating every feature in the specification. Import them into Rolldeo, study the code, and remix them for your own projects."})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-amber-500/5 border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-500",children:s.jsx(Lx,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Fantasy Toolkit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dungeon crawling adventures"})]})]}),s.jsx("a",{href:"/guide/examples/fantasyExample.zip",download:!0,className:"btn-primary text-sm px-4 py-2",children:"Download"})]})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full",children:[s.jsx(En,{className:`h-4 w-4 transition-transform ${e?"rotate-180":""}`}),e?"Hide contents":"Show contents"]}),e&&s.jsxs("div",{className:"mt-4 space-y-3 text-sm animate-fade-in",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Monsters.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Creatures from common beasts to legendary dragons. Demonstrates weights, sets, defaultSets, collection/composite types, hidden helper tables, and templates."})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Treasure.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Loot including coins, gems, weapons, and magic items. Demonstrates dice expressions, shared variables, table references, gem quality modifiers, and cursed items."})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Environments.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Dungeons, taverns, wilderness, and urban locations. Demonstrates multiple rolls, unique selections, custom separators, and location atmosphere."})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Encounters.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Combat, social, and quest encounters. Demonstrates imports, composite tables, NPC generation, quest hooks, and encounter twists."})]})]})]})]}),s.jsxs("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-cyan-500/5 border-b border-border/50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-cyan-500/10 text-cyan-500",children:s.jsx(Jm,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Sci-Fi Worldbuilding"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Space exploration system"})]})]}),s.jsx("a",{href:"/guide/examples/sciFiExample.zip",download:!0,className:"btn-primary text-sm px-4 py-2",children:"Download"})]})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors w-full",children:[s.jsx(En,{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`}),n?"Hide contents":"Show contents"]}),n&&s.jsxs("div",{className:"mt-4 space-y-3 text-sm animate-fade-in",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Aliens.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Alien species with physical and cultural traits. Demonstrates conditionals, template-level shared variables, capture syntax, and species naming."})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Ships.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Starships from fighters to battleships. Demonstrates ranges (d100 style), extends inheritance, ship systems, and fleet generation with captures."})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Planets.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Planets with environments, resources, and hazards. Demonstrates imports, star classification, colonization status, native life, and multi-world comparison."})]}),s.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[s.jsx("div",{className:"font-medium mb-1",children:"Encounters.json"}),s.jsx("p",{className:"text-muted-foreground text-xs",children:"Space encounters combining all modules. Demonstrates multiple imports, complex captures, combat/peaceful variants, and full scenario generation."})]})]})]})]})]})]})}),s.jsxs("section",{className:"grid gap-4 md:grid-cols-3 animate-slide-up",children:[s.jsx(Lh,{icon:s.jsx(Vn,{className:"h-5 w-5"}),title:"Start Simple",description:"Begin with the Quickstart guide to learn the basics before diving into advanced features."}),s.jsx(Lh,{icon:s.jsx(Vm,{className:"h-5 w-5"}),title:"Use the Editor",description:"The built-in editor validates your tables in real-time against the JSON schema."}),s.jsx(Lh,{icon:s.jsx(Wm,{className:"h-5 w-5"}),title:"Schema Validation",description:"Import the JSON schema into your IDE for autocomplete and validation while editing."})]}),h.length>0&&s.jsx("section",{className:"card-elevated border border-border/50 p-6 animate-slide-up",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-muted text-muted-foreground",children:s.jsx(li,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Hidden Collections"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["You have ",h.length," hidden collection",h.length!==1?"s":"",". Click restore to bring them back to the Library."]}),o&&s.jsx("p",{className:"text-sm text-primary mt-1",children:o})]})]}),s.jsxs("button",{onClick:m,disabled:a,className:"btn-secondary flex items-center gap-2 whitespace-nowrap",children:[s.jsx(Bs,{className:`h-4 w-4 ${a?"animate-spin":""}`}),a?"Restoring...":"Restore All"]})]})})]})]})}function Lh({icon:e,title:t,description:n}){return s.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/30",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2 text-primary",children:e}),s.jsx("h3",{className:"font-semibold mb-1",children:t}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})}const XB=`# Random Table Quickstart Guide

Get up and running with random tables in under 10 minutes.

---

## Your First Table

Every random table file needs two things: **metadata** (information about the file) and at least one **table**. Here's the simplest possible example:

\`\`\`json
{
  "metadata": {
    "name": "My First Table",
    "namespace": "myproject.demo",
    "version": "1.0.0",
    "specVersion": "1.0"
  },
  "tables": [
    {
      "id": "loot",
      "name": "What's in the Chest?",
      "type": "simple",
      "entries": [
        { "value": "Gold coins" },
        { "value": "A rusty dagger" },
        { "value": "Empty!" },
        { "value": "A rolled-up map" }
      ]
    }
  ]
}
\`\`\`

Save this as a \`.json\` file and load it into your roller engine. Each entry has an equal chance of being selected (25% each).

---

## Adding Weights

Want some results to appear more often? Add \`weight\` to your entries:

\`\`\`json
"entries": [
  { "value": "Gold coins", "weight": 4 },
  { "value": "A rusty dagger", "weight": 2 },
  { "value": "Empty!", "weight": 3 },
  { "value": "A rolled-up map", "weight": 1 }
]
\`\`\`

Higher weight = more likely. In this example:
- Gold coins: 40% (4 out of 10)
- Empty: 30% (3 out of 10)  
- Rusty dagger: 20% (2 out of 10)
- Map: 10% (1 out of 10)

**Tip:** If you don't specify a weight, it defaults to 1.

---

## Rolling Dice

Use \`{{dice:XdY}}\` to roll dice inside your results:

\`\`\`json
{ "value": "{{dice:2d6*10}} gold pieces" }
\`\`\`

This rolls 2d6 and multiplies by 10, giving you results like "70 gold pieces" or "120 gold pieces".

**Common dice patterns:**

| Syntax | What it does |
|--------|--------------|
| \`{{dice:1d20}}\` | Roll a d20 |
| \`{{dice:3d6}}\` | Roll 3d6 |
| \`{{dice:2d6+5}}\` | Roll 2d6, add 5 |
| \`{{dice:4d6k3}}\` | Roll 4d6, keep highest 3 |
| \`{{dice:1d6!}}\` | Exploding d6 (6s roll again) |

---

## Referencing Other Tables

Tables can reference each other using \`{{tableName}}\`:

\`\`\`json
{
  "tables": [
    {
      "id": "treasure",
      "name": "Treasure",
      "type": "simple",
      "entries": [
        { "value": "A {{weaponType}} worth {{dice:2d6*10}} gold" },
        { "value": "{{dice:3d6}} gems" },
        { "value": "Nothing valuable" }
      ]
    },
    {
      "id": "weaponType",
      "name": "Weapon Type",
      "type": "simple",
      "entries": [
        { "value": "sword" },
        { "value": "axe" },
        { "value": "spear" }
      ]
    }
  ]
}
\`\`\`

Rolling on "treasure" might give you: "A sword worth 80 gold"

---

## Multiple Rolls

Need multiple results from the same table? Use \`{{N*tableName}}\`:

\`\`\`json
{ "value": "You find: {{3*itemTable}}" }
\`\`\`

This rolls three times on \`itemTable\`, giving results like: "You find: gold ring, silver bracelet, emerald"

**Want unique results?** Add \`unique\`:

\`\`\`json
{ "value": "{{3*unique*itemTable}}" }
\`\`\`

This ensures no duplicates.

**Custom separators:**

\`\`\`json
{ "value": "{{3*itemTable|\\" and \\"}}" }
\`\`\`

Result: "gold ring and silver bracelet and emerald"

---

## Using Ranges (d100 Tables)

If you're converting traditional tables with ranges like "01-30: Goblin", use the \`range\` property:

\`\`\`json
"entries": [
  { "value": "Goblin", "range": [1, 30] },
  { "value": "Orc", "range": [31, 60] },
  { "value": "Troll", "range": [61, 85] },
  { "value": "Dragon!", "range": [86, 100] }
]
\`\`\`

The engine automatically converts ranges to weightsyou don't need to do any math.

---

## Templates: Combining Multiple Tables

Templates let you create complex outputs that pull from multiple tables:

\`\`\`json
{
  "templates": [
    {
      "id": "npcDescription",
      "name": "NPC Generator",
      "pattern": "A {{npcRace}} {{npcOccupation}} with {{npcTrait}} and {{npcTrait}}."
    }
  ]
}
\`\`\`

Result: "A dwarf blacksmith with a loud laugh and a missing finger."

---

## Variables: Reusing Values

Sometimes you need the same random value to appear multiple times. Use the \`shared\` block:

\`\`\`json
{
  "shared": {
    "creatureCount": "{{dice:2d4}}"
  },
  "templates": [
    {
      "id": "encounter",
      "pattern": "You see {{$creatureCount}} goblins. If you fight, you'll face all {{$creatureCount}} of them."
    }
  ]
}
\`\`\`

The \`$\` prefix references a variable. The dice are rolled once when generation starts, then that value is used everywhere.

---

## Quick Reference

| What you want | Syntax |
|---------------|--------|
| Roll on a table | \`{{tableName}}\` |
| Roll dice | \`{{dice:3d6}}\` |
| Roll multiple times | \`{{3*tableName}}\` |
| Unique results | \`{{3*unique*tableName}}\` |
| Use a variable | \`{{$variableName}}\` |
| Custom separator | \`{{3*tableName\\|" and "}}\` |

---

## What's Next?

This guide covers the basics. The full specification includes:

- **Imports:** Split tables across multiple files
- **Inheritance:** Create table variations without duplicating entries
- **Conditionals:** Add logic based on rolled results
- **Placeholders:** Pass data between tables dynamically
- **ResultTypes:** Classify outputs for different handling
- **Assets:** Attach images, tokens, and sounds to entries

See the [Random Table JSON Template Specification v1.0](./randomTableSpecV1.md) for complete documentation.

---

## Complete Starter Example

Here's a ready-to-use file you can copy and modify:

\`\`\`json
{
  "metadata": {
    "name": "Dungeon Loot Tables",
    "namespace": "myproject.loot",
    "version": "1.0.0",
    "specVersion": "1.0",
    "author": "Your Name",
    "description": "Random loot for dungeon exploration"
  },
  "shared": {
    "lootQuality": "{{qualityRoll}}"
  },
  "tables": [
    {
      "id": "qualityRoll",
      "name": "Loot Quality",
      "type": "simple",
      "entries": [
        { "value": "poor", "weight": 3 },
        { "value": "average", "weight": 5 },
        { "value": "good", "weight": 2 }
      ]
    },
    {
      "id": "chestContents",
      "name": "Chest Contents",
      "type": "simple",
      "entries": [
        { "value": "{{dice:2d6*10}} gold pieces", "weight": 4 },
        { "value": "A {{$lootQuality}} {{weaponType}}", "weight": 3 },
        { "value": "{{dice:1d4}} healing potions", "weight": 2 },
        { "value": "**Mimic!** It attacks!", "weight": 1 }
      ]
    },
    {
      "id": "weaponType",
      "name": "Weapon Type",
      "type": "simple",
      "entries": [
        { "value": "longsword" },
        { "value": "battle axe" },
        { "value": "shortbow" },
        { "value": "warhammer" },
        { "value": "dagger" }
      ]
    }
  ],
  "templates": [
    {
      "id": "lootHaul",
      "name": "Complete Loot Description",
      "pattern": "Inside the chest you find: {{2*unique*chestContents|\\" and \\"}}."
    }
  ]
}
\`\`\`

**Sample outputs:**
- "Inside the chest you find: 80 gold pieces and A good longsword."
- "Inside the chest you find: 2 healing potions and **Mimic!** It attacks!."
- "Inside the chest you find: A average battle axe and 50 gold pieces."

---

## Example Downloads

Ready to see these concepts in action? Download these comprehensive example packs:

### [fantasyExample.zip](./examples/fantasyExample.zip)

A complete high fantasy toolkit for dungeon crawling adventures:

| File | Description | Features Demonstrated |
|------|-------------|----------------------|
| **Monsters.json** | Creatures from common beasts to legendary dragons | Weights, \`sets\`, \`defaultSets\`, \`type: collection\`, \`type: composite\`, hidden helper tables, templates |
| **Treasure.json** | Loot including coins, gems, weapons, and magic items | Dice expressions, shared variables, table references, gem quality modifiers, cursed items |
| **Environments.json** | Dungeons, taverns, wilderness, and urban locations | Multiple rolls, unique selections, custom separators, location atmosphere |
| **Encounters.json** | Combat, social, and quest encounters | Imports, composite tables, NPC generation, quest hooks, encounter twists |

### [sciFiExample.zip](./examples/sciFiExample.zip)

A comprehensive sci-fi worldbuilding system for space exploration:

| File | Description | Features Demonstrated |
|------|-------------|----------------------|
| **Aliens.json** | Alien species with physical and cultural traits | \`conditionals\`, template-level shared variables, capture syntax, species naming |
| **Ships.json** | Starships from fighters to battleships | Ranges (d100 style), \`extends\` inheritance, ship systems, fleet generation with captures |
| **Planets.json** | Planets with environments, resources, and hazards | Imports, star classification, colonization status, native life, multi-world comparison |
| **Encounters.json** | Space encounters combining all modules | Multiple imports, complex captures, combat/peaceful variants, full scenario generation |

These examples demonstrate **every feature** in the specification, from basic tables to advanced captures and conditionals. Import them, study them, remix them!

---

## Happy Creating!

Whether you're crafting treasure hoards for a fantasy dungeon, generating alien species for a space opera, or building something entirely your own - Rolldeo is here to help bring randomness and creativity to your games.

Download the examples, experiment with the syntax, and let the dice decide the rest. May your rolls be ever in your favor!
`;function e6(){return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.quickstart}),s.jsx(ed,{title:"Getting Started",content:XB})]})}function t6(){return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.spec}),s.jsxs(ed,{title:"Full Specification",content:_m,children:[s.jsx("div",{className:"mt-12 p-6 rounded-xl bg-muted/30 border border-border/30",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-1",children:"Download Specification"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Get the complete specification for offline reference."})]}),s.jsx(_u,{filename:"randomTableSpecV1.md",content:_m,mimeType:"text/markdown",label:"Download Markdown",variant:"primary"})]})}),s.jsx("div",{className:"mt-8 p-6 rounded-xl bg-primary/5 border border-primary/20",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(bl,{className:"h-5 w-5 text-primary mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-1",children:"CC0 Public Domain"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["This specification is released under"," ",s.jsx("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"CC0 1.0 Universal"}),". Use it freely to build your own tools and engines."]})]})]}),s.jsxs("a",{href:"https://github.com/RolldeoDev/rolldeo",target:"_blank",rel:"noopener noreferrer",className:"btn-secondary flex items-center gap-2 whitespace-nowrap",children:[s.jsx(Gm,{className:"h-4 w-4"}),"View Source"]})]})})]})]})}const uu=JSON.parse(Ru),n6=`
# JSON Schema Reference

The Random Table JSON Schema provides validation for your table collection files. Use this schema with your IDE or validation tools to ensure your files are correctly formatted.

## Schema Info

- **$schema**: ${uu.$schema}
- **$id**: ${uu.$id||"N/A"}
- **Title**: ${uu.title||"Random Table Collection"}

## Using the Schema

### In VS Code

Add this to your \`.vscode/settings.json\`:

\`\`\`json
{
  "json.schemas": [
    {
      "fileMatch": ["*.table.json", "*-tables.json"],
      "url": "https://rolldeo.com/schemas/random-table-spec-v1.0.json"
    }
  ]
}
\`\`\`

### In JSON Files

Add a \`$schema\` property to your JSON files:

\`\`\`json
{
  "$schema": "https://rolldeo.com/schemas/random-table-spec-v1.0.json",
  "metadata": { ... },
  "tables": [ ... ]
}
\`\`\`

## Schema Structure

The schema defines the following top-level properties:

| Property | Required | Description |
|----------|----------|-------------|
| \`metadata\` | Yes | Collection metadata (name, namespace, version) |
| \`imports\` | No | External file imports |
| \`tables\` | Yes | Array of table definitions |
| \`templates\` | No | Template patterns for complex outputs |
| \`conditionals\` | No | Post-processing conditionals |
| \`variables\` | No | Static variables |
| \`shared\` | No | Lazy-evaluated shared variables |

---

## Full Schema

Below is the complete JSON Schema. Click "Copy" to copy it to your clipboard or download for local use.

## License

This schema is released under **CC0 1.0 Universal** (Public Domain). You are free to use, modify, and distribute it without restriction.
`;function r6(){const[e,t]=w.useState(!1),n=async()=>{await navigator.clipboard.writeText(Ru),t(!0),setTimeout(()=>t(!1),2e3)};return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.schema}),s.jsxs(ed,{title:"Schema Reference",content:n6,children:[s.jsxs("div",{className:"mt-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(rl,{className:"h-4 w-4"}),s.jsx("span",{children:"random-table-spec-v1.0.json"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:n,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg border border-border hover:bg-accent transition-colors",children:e?s.jsxs(s.Fragment,{children:[s.jsx(vn,{className:"h-4 w-4 text-green-500"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(vl,{className:"h-4 w-4"}),"Copy"]})}),s.jsx(_u,{filename:"random-table-spec-v1.0.json",content:Ru,mimeType:"application/json",label:"Download",variant:"primary"})]})]}),s.jsx("div",{className:"relative",children:s.jsx("pre",{className:"overflow-x-auto rounded-lg bg-[#1e1e1e] p-4 text-sm max-h-[600px] overflow-y-auto",children:s.jsx("code",{className:"language-json text-gray-300",children:JSON.stringify(uu,null,2)})})})]}),s.jsxs("div",{className:"mt-12 p-6 rounded-xl bg-muted/30 border border-border/30",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Related Resources"}),s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(zn,{to:"/guide/spec",className:"flex items-center gap-3 p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10 text-amber-500",children:s.jsx(rl,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Full Specification"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Human-readable documentation"})]})]}),s.jsxs("a",{href:"https://github.com/RolldeoDev/rolldeo",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-lg bg-[hsl(var(--mint)/0.1)] text-[hsl(var(--mint))]",children:s.jsx(Gm,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"GitHub Repository"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"View source code and contribute"})]})]}),s.jsxs("a",{href:"https://json-schema.org/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:s.jsx(Zh,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"JSON Schema Docs"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Learn more about JSON Schema"})]})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-primary/5 border border-primary/20 flex items-center gap-3",children:[s.jsx(bl,{className:"h-5 w-5 text-primary flex-shrink-0"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["This schema is released under"," ",s.jsx("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"CC0 1.0 Universal (Public Domain)"}),". Use it freely in your own projects."]})]})]})]})}const a6=`# Using Rolldeo

A complete guide to all the features in Rolldeo - your random table companion.

---

## Overview

Rolldeo is a web application for creating, managing, and rolling on random tables. Whether you're a game master generating encounters, a writer seeking inspiration, or a developer building procedural content, Rolldeo provides the tools you need.

### Key Features

- **Library**: Browse, import, and manage your table collections
- **Roller**: Roll on tables with full history and result tracking
- **Editor**: Create and edit collections with real-time validation
- **Offline Support**: Works without an internet connection (PWA)

---

## The Library

The Library is your central hub for managing table collections.

### Browsing Collections

When you open the Library, you'll see all available collections organized into:

- **Built-in Collections**: Pre-loaded example tables to get you started
- **Your Collections**: Tables you've created or imported

Each collection card shows:
- Collection name and description
- Number of tables and templates
- Tags for quick filtering

### Importing Collections

You can import table collections in several ways:

1. **Drag and Drop**: Drop \`.json\` files or \`.zip\` archives directly onto the upload area
2. **Click to Browse**: Click the upload area to select files from your computer
3. **Multiple Files**: Import several collections at once from a zip archive

**Supported formats:**
- Single \`.json\` files following the Random Table Spec
- \`.zip\` archives containing multiple JSON files

### Managing Collections

- **View**: Click a collection to see its tables and templates
- **Edit**: Click the edit button to modify a collection
- **Delete**: Remove collections you no longer need (built-in collections cannot be deleted)
- **Export**: Download any collection as a JSON file

---

## The Roller

The Roller is where you generate random results from your tables.

### Selecting a Table

1. Use the left panel to browse available tables
2. Collections are grouped and expandable
3. Click any table to select it for rolling
4. Templates appear in a separate section

### Rolling

Once you've selected a table:

1. Click the **Roll** button (or press \`Enter\`)
2. The result appears in the main panel
3. Each roll is added to your history

### Understanding Results

Results can include:
- **Plain text**: Simple string results
- **Dice expressions**: Automatically rolled (e.g., "2d6" becomes "7")
- **Nested table references**: Results from other tables
- **Formatted text**: Bold, italic, and other markdown formatting

### Roll History

Your roll history is preserved during your session:

- See all previous results with timestamps
- Results are color-coded by source table
- Click any history item to see full details
- Clear history with the trash button

### Favorites

Mark frequently-used tables as favorites:

1. Click the star icon next to any table
2. Favorites appear at the top of the table list
3. Quickly access your most-used tables

---

## The Editor

Create and modify table collections with the visual editor.

### Creating a New Collection

1. Click **Editor** in the navigation
2. You start with a blank collection template
3. Fill in the metadata (name, namespace, version)
4. Add tables, templates, and more

### Editor Tabs

The editor is organized into tabs:

| Tab | Purpose |
|-----|---------|
| **Metadata** | Collection info and imports |
| **Tables** | Define your random tables |
| **Templates** | Create complex output patterns |
| **Variables** | Set static and shared variables |
| **JSON** | View and edit raw JSON |

### Working with Tables

#### Creating Tables

1. Go to the **Tables** tab
2. Click **Add Table**
3. Choose a table type (Simple is most common)
4. Fill in the table details

#### Table Types

- **Simple**: Basic weighted entries
- **Composite**: Combines entries from multiple sources
- **Collection**: Groups entries from imported files

#### Adding Entries

Each entry can have:
- **Value**: The result text (supports \`{{expressions}}\`)
- **Weight**: How likely this entry is to be selected
- **Range**: Alternative to weight for d100-style tables
- **Description**: Optional notes about the entry
- **Tags**: Categorization labels

#### Drag and Drop

Reorder entries by dragging:
1. Grab the drag handle () on any entry
2. Drag to the new position
3. Release to drop

### Working with Templates

Templates combine multiple tables into complex outputs.

#### Creating Templates

1. Go to the **Templates** tab
2. Click **Add Template**
3. Write your pattern using \`{{tableName}}\` syntax

#### Pattern Syntax

Use these expressions in your patterns:

| Syntax | Description |
|--------|-------------|
| \`{{tableName}}\` | Roll on a table |
| \`{{dice:2d6}}\` | Roll dice |
| \`{{math:1+2}}\` | Calculate math |
| \`{{$variable}}\` | Use a variable |
| \`{{3*tableName}}\` | Roll multiple times |
| \`{{3*table >> $var}}\` | Capture rolls into variable |
| \`{{$var[0]}}\` | Access first captured item |
| \`{{$var[0].@prop}}\` | Access captured item's property |
| \`{{collect:$var.@prop}}\` | Aggregate property from all captured items |

#### Insert Helper

Use the **Insert** dropdown to easily add references:
1. Click the dropdown next to the pattern field
2. Search for tables or templates
3. Click to insert at cursor position

#### Live Preview

The pattern preview shows:
- **Pattern**: Your raw template with syntax highlighting
- **Result**: A sample evaluation (click **Re-roll** to regenerate)

### JSON View

The JSON tab provides direct access to the collection data:

- **Syntax Highlighting**: Color-coded JSON
- **Schema Validation**: Real-time error checking
- **Format**: Auto-formats on paste
- **Sync**: Changes sync with visual editors

### Saving and Exporting

- **Save**: Press \`Ctrl+S\` or click **Save** to store your collection
- **Export**: Download as a \`.json\` file for sharing or backup
- **Unsaved Changes**: A warning appears if you try to leave with unsaved changes

---

## Keyboard Shortcuts

| Shortcut | Action |
|----------|--------|
| \`Ctrl+S\` / \`Cmd+S\` | Save (in Editor) |
| \`Enter\` | Roll (in Roller) |
| \`Escape\` | Close dialogs |

---

## Tips & Tricks

### For Game Masters

1. **Create themed sets**: Organize tables by campaign or setting
2. **Use templates**: Build encounter generators that combine multiple tables
3. **Leverage variables**: Keep values consistent across rolls (e.g., enemy count)

### For Developers

1. **Use the JSON schema**: Import it into your IDE for autocomplete
2. **Validate before import**: The editor catches errors in real-time
3. **Export and version**: Download collections regularly for backup

### For Writers

1. **Build prompt generators**: Combine character, setting, and conflict tables
2. **Create name generators**: Use weighted entries for cultural distributions
3. **Chain tables**: Reference one table from another for complex results

---

## Troubleshooting

### Import Errors

If a file fails to import:
- Check that it's valid JSON (use a JSON validator)
- Ensure it follows the Random Table Spec
- Look for missing required fields (metadata, tables)

### Roll Errors

If a roll fails:
- Check for circular references (Table A  Table B  Table A)
- Verify table IDs match exactly (case-sensitive)
- Look for typos in \`{{expressions}}\`

### Editor Issues

If the editor behaves unexpectedly:
- Try switching to JSON view and back
- Check the validation errors panel
- Refresh the page if needed (changes save automatically)

---

## Getting Help

- **Quickstart Guide**: Learn the basics in 10 minutes
- **Full Specification**: Complete reference documentation
- **Schema Reference**: JSON validation schema
- **Report Issues**: [GitHub Issues](https://github.com/RolldeoDev/rolldeo/issues)

---

## Open Source

Rolldeo is open source software:

- **Source Code**: [GitHub Repository](https://github.com/RolldeoDev/rolldeo)
- **Application License**: [Apache 2.0](https://www.apache.org/licenses/LICENSE-2.0)
- **Spec & Schema License**: [CC0 Public Domain](https://creativecommons.org/publicdomain/zero/1.0/)

The Random Table Specification and JSON Schema are released under CC0 (Public Domain)  use them freely to build your own tools, engines, or table collections.

Happy rolling! 
`;function i6(){return s.jsxs(s.Fragment,{children:[s.jsx(Aa,{...ja.usingRolldeo}),s.jsx(ed,{title:"Using Rolldeo",content:a6})]})}function s6(){return w.useEffect(()=>{dt.getState().initialize(),Fs.getState().loadFavorites(),il.getState().loadStats(),P2()},[]),null}function o6(){return s.jsxs(s.Fragment,{children:[s.jsx(SA,{}),s.jsx(j2,{}),s.jsx(A2,{})]})}const l6=uE([{path:"/",element:s.jsxs(s.Fragment,{children:[s.jsx(TA,{}),s.jsx(o6,{})]}),children:[{index:!0,element:s.jsx(aF,{})},{path:"library",element:s.jsx(DF,{})},{path:"roll",element:s.jsx(ww,{})},{path:"roll/:collectionId/:tableId",element:s.jsx(ww,{})},{path:"editor",element:s.jsx(Hw,{})},{path:"editor/:collectionId",element:s.jsx(Hw,{})},{path:"guide",element:s.jsx(JB,{})},{path:"guide/quickstart",element:s.jsx(e6,{})},{path:"guide/spec",element:s.jsx(t6,{})},{path:"guide/schema",element:s.jsx(r6,{})},{path:"guide/using-rolldeo",element:s.jsx(i6,{})}]}]);PC.createRoot(document.getElementById("root")).render(s.jsx(w.StrictMode,{children:s.jsx(_x,{children:s.jsx(C2,{children:s.jsxs(U2,{children:[s.jsx(s6,{}),s.jsx(bE,{router:l6})]})})})}));
